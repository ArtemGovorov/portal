{"version":3,"sources":["webpack:///./~/ng-metadata/src/facade/lang.js","webpack:///./~/ng-metadata/core.js","webpack:///./~/ng-metadata/src/facade/collections.js","webpack:///./~/ng-metadata/src/core/di/metadata.js","webpack:///./~/ng-metadata/src/core/directives/metadata_directives.js","webpack:///./~/ng-metadata/src/core/reflection/reflection.js","webpack:///./lib/di.core/global/utility/util.js","webpack:///./~/ng-metadata/src/core/di/provider.js","webpack:///./lib/di.core/global/exception/guard.js","webpack:///./~/ng-metadata/src/core/di/forward_ref.js","webpack:///./~/ng-metadata/src/core/di/provider_util.js","webpack:///./src/app/portal/parties/shared/resource-list-configuration-base.service.ts","webpack:///./~/ng-metadata/src/core/directives/metadata_di.js","webpack:///./~/ng-metadata/src/core/util/decorators.js","webpack:///./lib/di.core/spa/controls/modal/modal-base.controller.ts","webpack:///./src/app/portal/parties/shared/resource-handler-base.service.ts","webpack:///./~/angular-local-storage/index.js","webpack:///./~/ng-metadata/src/core/directives/directives_utils.js","webpack:///./~/ng-metadata/src/core/linker/directive_lifecycle_interfaces.js","webpack:///./~/ng-metadata/src/core/pipes/metadata.js","webpack:///./~/rxjs/Subscription.js","webpack:///./~/rxjs/symbol/rxSubscriber.js","webpack:///./~/rxjs/util/root.js","webpack:///./src/app/portal/parties/add-party.component.controller.ts","webpack:///./src/app/portal/parties/contacts/shared/index.ts","webpack:///./src/app/portal/parties/locations/shared/index.ts","webpack:///./src/app/portal/parties/party-codes/shared/party-code-configuration.service.ts","webpack:///./src/app/portal/parties/party-codes/shared/party-code-handler.service.ts","webpack:///./lib/di.core/global/utility/placeholders/arguments/map.js","webpack:///./lib/di.core/global/utility/placeholders/extract.js","webpack:///./~/angular-ui-router/release/angular-ui-router.js","webpack:///./~/ng-metadata/src/core/change_detection/change_detection_util.js","webpack:///./~/ng-metadata/src/core/change_detection/change_detector_ref.js","webpack:///./~/ng-metadata/src/core/di/decorators.js","webpack:///./~/ng-metadata/src/core/di/opaque_token.js","webpack:///./~/ng-metadata/src/core/directives/binding/constants.js","webpack:///./~/ng-metadata/src/facade/async.js","webpack:///./~/ng-metadata/src/facade/exceptions.js","webpack:///./~/ng-metadata/src/facade/primitives.js","webpack:///./~/ng-metadata/src/facade/type.js","webpack:///./~/rxjs/Observer.js","webpack:///./~/rxjs/Subscriber.js","webpack:///./~/rxjs/util/errorObject.js","webpack:///./~/rxjs/util/isFunction.js","webpack:///./lib/di.core/di.core.global.js","webpack:///./src/app/app.module.js","webpack:///./~/detect-dom-ready/lib/detect-dom-ready.js","webpack:///./src/app/portal/parties/add-party.component.ts","webpack:///./src/app/portal/parties/contacts/_loader.ts","webpack:///./src/app/portal/parties/contacts/list/_loader.ts","webpack:///./src/app/portal/parties/contacts/list/contact-list-configuration.service.ts","webpack:///./src/app/portal/parties/contacts/list/contact-list.component.ts","webpack:///./src/app/portal/parties/contacts/list/index.ts","webpack:///./src/app/portal/parties/contacts/shared/_loader.ts","webpack:///./src/app/portal/parties/contacts/shared/contact-handler.service.ts","webpack:///./src/app/portal/parties/contacts/shared/contact-proxy.service.ts","webpack:///./src/app/portal/parties/loader.ts","webpack:///./src/app/portal/parties/locations/_loader.ts","webpack:///./src/app/portal/parties/locations/list/_loader.ts","webpack:///./src/app/portal/parties/locations/list/index.ts","webpack:///./src/app/portal/parties/locations/list/location-list-configuration.service.ts","webpack:///./src/app/portal/parties/locations/list/location-list.component.ts","webpack:///./src/app/portal/parties/locations/location.component.controller.ts","webpack:///./src/app/portal/parties/locations/shared/_loader.ts","webpack:///./src/app/portal/parties/locations/shared/location-handler.service.ts","webpack:///./src/app/portal/parties/locations/shared/location-proxy.service.ts","webpack:///./src/app/portal/parties/party-codes/index.ts","webpack:///./src/app/portal/parties/party-codes/loader.ts","webpack:///./src/app/portal/parties/party-codes/party-code.component.ts","webpack:///./src/app/portal/parties/party-codes/shared/_loader.ts","webpack:///./src/app/portal/parties/party.component.ts","webpack:///./src/app/portal/shared/components/document-state-selector/document-state-selector.controller.ts","webpack:///./src/app/portal/shared/components/document-state-selector/index.ts","webpack:///./src/app/portal/shared/components/document-state-selector/loader.ts","webpack:///./lib/di.core/di.core.spa.js","webpack:///./lib/di.core/global/_main.js","webpack:///./lib/di.core/global/_namespace.js","webpack:///./lib/di.core/global/debug/_main.js","webpack:///./lib/di.core/global/debug/debugger.js","webpack:///./lib/di.core/global/event/_main.js","webpack:///./lib/di.core/global/event/jqueryEventSubscriber.js","webpack:///./lib/di.core/global/exception/_main.js","webpack:///./lib/di.core/global/prototypeExtensions/_main.js","webpack:///./lib/di.core/global/prototypeExtensions/arrayExtensions.js","webpack:///./lib/di.core/global/utility/_main.js","webpack:///./lib/di.core/global/utility/compatability.js","webpack:///./lib/di.core/global/utility/placeholders/_main.js","webpack:///./lib/di.core/global/utility/placeholders/arguments/_main.js","webpack:///./lib/di.core/global/utility/placeholders/arguments/split.js","webpack:///./lib/di.core/global/utility/placeholders/replace.js","webpack:///./lib/di.core/spa/_loader.js","webpack:///./lib/di.core/spa/authentication/_config.js","webpack:///./lib/di.core/spa/authentication/_loader.js","webpack:///./lib/di.core/spa/authentication/activityMonitor.js","webpack:///./lib/di.core/spa/authentication/authenticationClientEventSubscriber.js","webpack:///./lib/di.core/spa/authentication/authenticationController.js","webpack:///./lib/di.core/spa/authentication/authenticationData.js","webpack:///./lib/di.core/spa/authentication/authenticationHttpInterceptor.js","webpack:///./lib/di.core/spa/authentication/authenticationPromptConfigurator.js","webpack:///./lib/di.core/spa/authentication/authenticationResult.js","webpack:///./lib/di.core/spa/authentication/authenticationStore.js","webpack:///./lib/di.core/spa/authentication/authenticationTicketValidator.js","webpack:///./lib/di.core/spa/authentication/authorizedObjectsFilter.js","webpack:///./lib/di.core/spa/authentication/diAuthenticationDirective.js","webpack:///./lib/di.core/spa/authentication/loggedOutReason.js","webpack:///./lib/di.core/spa/authentication/userAuthenticationProxy.js","webpack:///./lib/di.core/spa/authentication/userIdleActivityMonitor.js","webpack:///./lib/di.core/spa/authentication/userRightsRepository.js","webpack:///./lib/di.core/spa/caching/_loader.js","webpack:///./lib/di.core/spa/caching/scopeCacheFactory.js","webpack:///./lib/di.core/spa/controls/_loader.js","webpack:///./lib/di.core/spa/controls/button/_loader.js","webpack:///./lib/di.core/spa/controls/button/diButtonController.js","webpack:///./lib/di.core/spa/controls/button/diButtonDirective.js","webpack:///./lib/di.core/spa/controls/chart/_loader.js","webpack:///./lib/di.core/spa/controls/chart/chartPlotter.js","webpack:///./lib/di.core/spa/controls/chart/diChartController.js","webpack:///./lib/di.core/spa/controls/chart/diChartDirective.js","webpack:///./lib/di.core/spa/controls/dataTable/_loader.js","webpack:///./lib/di.core/spa/controls/dataTable/diDataTableController.js","webpack:///./lib/di.core/spa/controls/dataTable/diDataTableDirective.js","webpack:///./lib/di.core/spa/controls/dataTable/diTemplateCompilerDirective.js","webpack:///./lib/di.core/spa/controls/diClickDirective.js","webpack:///./lib/di.core/spa/controls/diEnabledDirective.js","webpack:///./lib/di.core/spa/controls/diNoDirtyDirective.js","webpack:///./lib/di.core/spa/controls/diTranscludeRepeatDirective.js","webpack:///./lib/di.core/spa/controls/diTranscludeReplaceDirective.js","webpack:///./lib/di.core/spa/controls/elementNotifier.js","webpack:///./lib/di.core/spa/controls/elementNotifierStyles.js","webpack:///./lib/di.core/spa/controls/enterKey/_loader.js","webpack:///./lib/di.core/spa/controls/enterKey/diEnterDirective.js","webpack:///./lib/di.core/spa/controls/enterKey/enterEvents.js","webpack:///./lib/di.core/spa/controls/gridPaginationButtons/_loader.js","webpack:///./lib/di.core/spa/controls/gridPaginationButtons/diGridPaginationButtonsController.js","webpack:///./lib/di.core/spa/controls/gridPaginationButtons/diGridPaginationButtonsDirective.js","webpack:///./lib/di.core/spa/controls/gridPaginationPageSize/_loader.js","webpack:///./lib/di.core/spa/controls/gridPaginationPageSize/diGridPaginationPageSizeController.js","webpack:///./lib/di.core/spa/controls/gridPaginationPageSize/diGridPaginationPageSizeDirective.js","webpack:///./lib/di.core/spa/controls/image/_loader.js","webpack:///./lib/di.core/spa/controls/image/diImageCompile.js","webpack:///./lib/di.core/spa/controls/image/diImageDirective.js","webpack:///./lib/di.core/spa/controls/image/diImageTemplate.js","webpack:///./lib/di.core/spa/controls/input/_loader.js","webpack:///./lib/di.core/spa/controls/input/diInputDirective.js","webpack:///./lib/di.core/spa/controls/input/inputController.js","webpack:///./lib/di.core/spa/controls/modal/_loader.js","webpack:///./lib/di.core/spa/controls/modal/modal-resource.controller.js","webpack:///./lib/di.core/spa/controls/modal/modal-window.service.js","webpack:///./lib/di.core/spa/controls/multiSelect/_loader.js","webpack:///./lib/di.core/spa/controls/multiSelect/diMultiSelectDirective.js","webpack:///./lib/di.core/spa/controls/notifier.js","webpack:///./lib/di.core/spa/controls/promptWindow/_loader.js","webpack:///./lib/di.core/spa/controls/promptWindow/promptWindow.js","webpack:///./lib/di.core/spa/controls/restrictions/_loader.js","webpack:///./lib/di.core/spa/controls/restrictions/controls-restriction-manager.service.js","webpack:///./lib/di.core/spa/controls/restrictions/restrictions-store.service.js","webpack:///./lib/di.core/spa/controls/restrictions/user-edit-restrictions-proxy.service.js","webpack:///./lib/di.core/spa/controls/select/_loader.js","webpack:///./lib/di.core/spa/controls/select/diObjectFilter.js","webpack:///./lib/di.core/spa/controls/select/diSelectController.js","webpack:///./lib/di.core/spa/controls/select/diSelectDirective.js","webpack:///./lib/di.core/spa/controls/select/diSelectUpgrade.js","webpack:///./lib/di.core/spa/controls/select/diSelectUpgradeController.js","webpack:///./lib/di.core/spa/controls/simpleSelect/_loader.js","webpack:///./lib/di.core/spa/controls/simpleSelect/diSimpleSelectController.js","webpack:///./lib/di.core/spa/controls/simpleSelect/diSimpleSelectDirective.js","webpack:///./lib/di.core/spa/controls/spinner/_loader.js","webpack:///./lib/di.core/spa/controls/spinner/modalSpinner.js","webpack:///./lib/di.core/spa/controls/spinner/spinnerGenerator.js","webpack:///./lib/di.core/spa/controls/toggle/_loader.js","webpack:///./lib/di.core/spa/controls/toggle/diToggleController.js","webpack:///./lib/di.core/spa/controls/toggle/diToggleDirective.js","webpack:///./lib/di.core/spa/controls/toggle/overrideToggleFactory.js","webpack:///./lib/di.core/spa/currency/_loader.js","webpack:///./lib/di.core/spa/currency/currencyCache.js","webpack:///./lib/di.core/spa/currency/diCurrencyFilter.js","webpack:///./lib/di.core/spa/date/_loader.js","webpack:///./lib/di.core/spa/date/diDateFilter.js","webpack:///./lib/di.core/spa/date/diDateFormats.js","webpack:///./lib/di.core/spa/date/diMoment.js","webpack:///./lib/di.core/spa/exception/_config.js","webpack:///./lib/di.core/spa/exception/_loader.js","webpack:///./lib/di.core/spa/exception/exceptionHandler.js","webpack:///./lib/di.core/spa/exception/exceptionHttpInterceptor.js","webpack:///./lib/di.core/spa/exception/stackTrace.js","webpack:///./lib/di.core/spa/file/_loader.js","webpack:///./lib/di.core/spa/file/fileDownloader.js","webpack:///./lib/di.core/spa/http/_loader.js","webpack:///./lib/di.core/spa/http/authHttp.js","webpack:///./lib/di.core/spa/http/dHttp.js","webpack:///./lib/di.core/spa/http/serverResponseHandler.js","webpack:///./lib/di.core/spa/http/webApiHttp.js","webpack:///./lib/di.core/spa/logging/_loader.js","webpack:///./lib/di.core/spa/logging/loggerProxy.js","webpack:///./lib/di.core/spa/session/_loader.js","webpack:///./lib/di.core/spa/session/sessionStore.js","webpack:///./lib/di.core/spa/state/_loader.js","webpack:///./lib/di.core/spa/state/diState.js","webpack:///./lib/di.core/spa/state/stateAuthenticator.js","webpack:///./lib/di.core/spa/state/stateDecorator.js","webpack:///./lib/di.core/spa/state/stateHelper.js","webpack:///./lib/di.core/spa/staticLookup/_loader.js","webpack:///./lib/di.core/spa/staticLookup/staticLookupProxy.js","webpack:///./lib/di.core/spa/translation/_loader.js","webpack:///./lib/di.core/spa/translation/diTranslateDirective.js","webpack:///./lib/di.core/spa/translation/diTranslateFilter.js","webpack:///./lib/di.core/spa/translation/diTranslateLink.js","webpack:///./lib/di.core/spa/translation/translator.js","webpack:///./lib/di.core/spa/url/_loader.js","webpack:///./lib/di.core/spa/url/absoluteUrl.js","webpack:///./lib/di.core/spa/url/endpoints.js","webpack:///./lib/di.core/spa/url/urlHelper.js","webpack:///./lib/di.core/spa/userSecurity/_loader.js","webpack:///./lib/di.core/spa/userSecurity/changePasswordController.js","webpack:///./lib/di.core/spa/userSecurity/diChangePasswordDirective.js","webpack:///./lib/di.core/spa/userSecurity/diForgotPasswordDirective.js","webpack:///./lib/di.core/spa/userSecurity/diGetSecurityQuestionDirective.js","webpack:///./lib/di.core/spa/userSecurity/diPasswordPolicyDirective.js","webpack:///./lib/di.core/spa/userSecurity/diResetPasswordDirective.js","webpack:///./lib/di.core/spa/userSecurity/diResetPasswordSuccessDirective.js","webpack:///./lib/di.core/spa/userSecurity/diSecurityAnswerDirective.js","webpack:///./lib/di.core/spa/userSecurity/diSetPasswordDirective.js","webpack:///./lib/di.core/spa/userSecurity/forgotPasswordController.js","webpack:///./lib/di.core/spa/userSecurity/setPasswordController.js","webpack:///./lib/di.core/spa/userSecurity/userSecurityProxy.js","webpack:///./lib/di.core/spa/utility/_loader.js","webpack:///./lib/di.core/spa/utility/associativeArrayConvertor.js","webpack:///./lib/di.core/spa/utility/filters/_loader.js","webpack:///./lib/di.core/spa/utility/filters/diYesNoFilter.js","webpack:///./lib/di.core/spa/utility/guardedInjector.js","webpack:///./lib/di.core/spa/utility/identityIncrementor.js","webpack:///./lib/di.core/spa/utility/randomStringGenerator.js","webpack:///./lib/di.core/spa/utility/uniqueIdGenerator.js","webpack:///./lib/di.core/spa/validation/_loader.js","webpack:///./lib/di.core/spa/validation/comparers/_config.js","webpack:///./lib/di.core/spa/validation/comparers/_loader.js","webpack:///./lib/di.core/spa/validation/comparers/comparerRegistrar.js","webpack:///./lib/di.core/spa/validation/comparers/defaultComparer.js","webpack:///./lib/di.core/spa/validation/comparers/momentComparer.js","webpack:///./lib/di.core/spa/validation/diRequireIfDirective.js","webpack:///./lib/di.core/spa/validation/diValidateClickDirective.js","webpack:///./lib/di.core/spa/validation/diValidateDirective.js","webpack:///./lib/di.core/spa/validation/diValidateModelDirective.js","webpack:///./lib/di.core/spa/validation/equalAlwaysValidator.js","webpack:///./lib/di.core/spa/validation/equalIfSelfSetValidator.js","webpack:///./lib/di.core/spa/validation/formAnalyser.js","webpack:///./lib/di.core/spa/validation/greaterValidator.js","webpack:///./lib/di.core/spa/validation/idValidator.js","webpack:///./lib/di.core/spa/validation/lessValidator.js","webpack:///./lib/di.core/spa/validation/pastOrTodayValidator.js","webpack:///./lib/di.core/spa/validation/positiveWholeNumberValidator.js","webpack:///./lib/di.core/spa/validation/product-code-custom-validator.service.js","webpack:///./lib/di.core/spa/validation/requireIfValidator.js","webpack:///./lib/di.core/spa/validation/requiredIfPairNotSetValidator.js","webpack:///./lib/di.core/spa/validation/requiredIfPairSetValidator.js","webpack:///./lib/di.core/spa/validation/ruleViolationSelector.js","webpack:///./lib/di.core/spa/validation/validationInitialiser.js","webpack:///./lib/di.core/spa/validation/validationMessageGenerator.js","webpack:///./lib/di.core/spa/validation/validationNotifier.js","webpack:///./lib/di.core/spa/validation/validationRulesProxy.js","webpack:///./lib/di.core/spa/validation/validationRulesSetter.js","webpack:///./lib/di.core/spa/validation/validationRulesStore.js","webpack:///./lib/di.core/spa/watchers/_loader.js","webpack:///./lib/di.core/spa/watchers/debounce.js","webpack:///./lib/di.core/spa/watchers/watcherHelper.js","webpack:///./lib/di.core/spa/watchers/watchersTogglerDirective.js","webpack:///./lib/di.core/spa/window/_loader.js","webpack:///./lib/di.core/spa/window/diClickAwayDirective.js","webpack:///./lib/di.core/spa/window/windowEventSubscriber.js","webpack:///./src/app/_config.js","webpack:///./src/app/_run.js","webpack:///./src/app/_states.js","webpack:///./src/app/config.js","webpack:///./src/app/impersonate/_loader.js","webpack:///./src/app/impersonate/impersonateController.js","webpack:///./src/app/main.js","webpack:///./src/app/portal/_loader.js","webpack:///./src/app/portal/_states.js","webpack:///./src/app/portal/account/_loader.js","webpack:///./src/app/portal/account/_states.js","webpack:///./src/app/portal/account/account-management/_loader.js","webpack:///./src/app/portal/account/account-management/account-management.component.js","webpack:///./src/app/portal/account/account.service.js","webpack:///./src/app/portal/account/notifications-settings/_loader.js","webpack:///./src/app/portal/account/notifications-settings/notifications-settings.component.js","webpack:///./src/app/portal/account/security-question/_loader.js","webpack:///./src/app/portal/account/security-question/security-question.component.js","webpack:///./src/app/portal/account/settings/_loader.js","webpack:///./src/app/portal/account/settings/account-settings/_loader.js","webpack:///./src/app/portal/account/settings/account-settings/account-settings.component.js","webpack:///./src/app/portal/account/settings/language-selector/_loader.js","webpack:///./src/app/portal/account/settings/language-selector/language-data.factory.js","webpack:///./src/app/portal/account/settings/language-selector/language-handler.factory.js","webpack:///./src/app/portal/account/settings/language-selector/language-selector.controller.js","webpack:///./src/app/portal/account/settings/language-selector/language-selector.directive.js","webpack:///./src/app/portal/audit/_loader.js","webpack:///./src/app/portal/audit/_states.js","webpack:///./src/app/portal/audit/audit-action-buttons/_loader.js","webpack:///./src/app/portal/audit/audit-action-buttons/audit-action-buttons.component.js","webpack:///./src/app/portal/audit/audit-list/_loader.js","webpack:///./src/app/portal/audit/audit-list/audit-list-configurator.provider.js","webpack:///./src/app/portal/audit/audit-list/audit-list.controller.js","webpack:///./src/app/portal/audit/audit-list/audit-list.directive.js","webpack:///./src/app/portal/forceUrlReloader.js","webpack:///./src/app/portal/grn/_loader.js","webpack:///./src/app/portal/grn/_states.js","webpack:///./src/app/portal/grn/grn-action-buttons/_loader.js","webpack:///./src/app/portal/grn/grn-action-buttons/grn-action-buttons.component.js","webpack:///./src/app/portal/grn/grn-details/_loader.js","webpack:///./src/app/portal/grn/grn-details/grn-details.directive.js","webpack:///./src/app/portal/grn/grn-details/grn-view-configurator.provider.js","webpack:///./src/app/portal/grn/grn-details/grn-view.controller.js","webpack:///./src/app/portal/grn/grn-footer/_loader.js","webpack:///./src/app/portal/grn/grn-footer/grn-footer.component.js","webpack:///./src/app/portal/grn/grn-header/_loader.js","webpack:///./src/app/portal/grn/grn-header/grn-header.component.js","webpack:///./src/app/portal/grn/grn-lines/_loader.js","webpack:///./src/app/portal/grn/grn-lines/grn-lines.component.js","webpack:///./src/app/portal/grn/grn-list/_loader.js","webpack:///./src/app/portal/grn/grn-list/grn-list-configurator.provider.js","webpack:///./src/app/portal/grn/grn-list/grn-list.controller.js","webpack:///./src/app/portal/grn/grn-list/grn-list.directive.js","webpack:///./src/app/portal/grn/grn-list/grn-search/_loader.js","webpack:///./src/app/portal/grn/grn-list/grn-search/grn-search.component.js","webpack:///./src/app/portal/grn/grn-proxy.factory.js","webpack:///./src/app/portal/grn/grn-repository.factory.js","webpack:///./src/app/portal/invoices/_components/_loader.js","webpack:///./src/app/portal/invoices/_components/invoiceActionVerifier.js","webpack:///./src/app/portal/invoices/_components/invoiceLinesColumnSettings.js","webpack:///./src/app/portal/invoices/_components/scrollbarResizer.js","webpack:///./src/app/portal/invoices/_loader.js","webpack:///./src/app/portal/invoices/_states.js","webpack:///./src/app/portal/invoices/allowances-charges/_loader.js","webpack:///./src/app/portal/invoices/allowances-charges/allowance-charge.controller.js","webpack:///./src/app/portal/invoices/allowances-charges/allowance-charge.directive.js","webpack:///./src/app/portal/invoices/allowances-charges/reason-selector/_loader.js","webpack:///./src/app/portal/invoices/allowances-charges/reason-selector/allowance-charge-reason-repository.factory.js","webpack:///./src/app/portal/invoices/allowances-charges/reason-selector/allowance-charge-reason-selector.directive.js","webpack:///./src/app/portal/invoices/allowances-charges/reason-selector/allowance-charge-reason.controller.js","webpack:///./src/app/portal/invoices/attachment-uploader/_loader.js","webpack:///./src/app/portal/invoices/attachment-uploader/attachment-configurator.provider.js","webpack:///./src/app/portal/invoices/attachment-uploader/attachment-uploader.component.js","webpack:///./src/app/portal/invoices/document-issues/_loader.js","webpack:///./src/app/portal/invoices/document-issues/business-validation-failure-formatter.factory.js","webpack:///./src/app/portal/invoices/document-issues/document-issues-message-builder.factory.js","webpack:///./src/app/portal/invoices/document-issues/reconciliation-failure-formatter.factory.js","webpack:///./src/app/portal/invoices/editor/_components/_loader.js","webpack:///./src/app/portal/invoices/editor/_components/_snippets/_loader.js","webpack:///./src/app/portal/invoices/editor/_components/invoiceDetails/invoiceDetailsDirective.js","webpack:///./src/app/portal/invoices/editor/_components/optionalFields/_loader.js","webpack:///./src/app/portal/invoices/editor/_components/optionalFields/optionalFieldsConfiguration.js","webpack:///./src/app/portal/invoices/editor/_loader.js","webpack:///./src/app/portal/invoices/editor/companies-selector/_loader.js","webpack:///./src/app/portal/invoices/editor/companies-selector/companies-selector.component.js","webpack:///./src/app/portal/invoices/editor/contact-details/_loader.js","webpack:///./src/app/portal/invoices/editor/contact-details/contact-details.controller.js","webpack:///./src/app/portal/invoices/editor/contact-details/contact-details.directive.js","webpack:///./src/app/portal/invoices/editor/contact-selector/_loader.js","webpack:///./src/app/portal/invoices/editor/contact-selector/contact-selector.controller.js","webpack:///./src/app/portal/invoices/editor/contact-selector/contact-selector.directive.js","webpack:///./src/app/portal/invoices/editor/contract-type-code-selector/_loader.js","webpack:///./src/app/portal/invoices/editor/contract-type-code-selector/contract-type-code-repository.factory.js","webpack:///./src/app/portal/invoices/editor/contract-type-code-selector/contract-type-code-selector.directive.js","webpack:///./src/app/portal/invoices/editor/contract-type-code-selector/contract-type-code.controller.js","webpack:///./src/app/portal/invoices/editor/currency-selector/_loader.js","webpack:///./src/app/portal/invoices/editor/currency-selector/currency-selector.controller.js","webpack:///./src/app/portal/invoices/editor/currency-selector/currency-selector.directive.js","webpack:///./src/app/portal/invoices/editor/invoiceController.js","webpack:///./src/app/portal/invoices/editor/invoiceDetailsButtonsConfigurator.js","webpack:///./src/app/portal/invoices/editor/invoiceTotalsCalculator.js","webpack:///./src/app/portal/invoices/editor/location-selector/_loader.js","webpack:///./src/app/portal/invoices/editor/location-selector/location-selector.component.js","webpack:///./src/app/portal/invoices/invoice-proxy.factory.js","webpack:///./src/app/portal/invoices/invoiceRepository.js","webpack:///./src/app/portal/invoices/lists/_components/_loader.js","webpack:///./src/app/portal/invoices/lists/_components/_snippets/_loader.js","webpack:///./src/app/portal/invoices/lists/_components/invoiceList/invoiceListDirective.js","webpack:///./src/app/portal/invoices/lists/_loader.js","webpack:///./src/app/portal/invoices/lists/invoiceListConfigurator.js","webpack:///./src/app/portal/invoices/lists/invoiceListController.js","webpack:///./src/app/portal/invoices/product-lines/_loader.js","webpack:///./src/app/portal/invoices/product-lines/column-visibility-toggle/_loader.js","webpack:///./src/app/portal/invoices/product-lines/column-visibility-toggle/column-visibility-toggle.controller.js","webpack:///./src/app/portal/invoices/product-lines/column-visibility-toggle/column-visibility-toggle.directive.js","webpack:///./src/app/portal/invoices/product-lines/item-listener.controller.js","webpack:///./src/app/portal/invoices/product-lines/product-lines.controller.js","webpack:///./src/app/portal/invoices/product-lines/product-lines.directive.js","webpack:///./src/app/portal/invoices/product-proxy.factory.js","webpack:///./src/app/portal/invoices/product-selector/_loader.js","webpack:///./src/app/portal/invoices/product-selector/product-selector.controller.js","webpack:///./src/app/portal/invoices/product-selector/product-selector.directive.js","webpack:///./src/app/portal/invoices/product-type-selector/_loader.js","webpack:///./src/app/portal/invoices/product-type-selector/product-type-selector.controller.js","webpack:///./src/app/portal/invoices/product-type-selector/product-type-selector.directive.js","webpack:///./src/app/portal/invoices/shared/_loader.js","webpack:///./src/app/portal/invoices/shared/services/_loader.js","webpack:///./src/app/portal/invoices/shared/services/invoice-additional-document-references-configuration.js","webpack:///./src/app/portal/invoices/tax-code-selector/_loader.js","webpack:///./src/app/portal/invoices/tax-code-selector/tax-code-selector.controller.js","webpack:///./src/app/portal/invoices/tax-code-selector/tax-code-selector.directive.js","webpack:///./src/app/portal/invoices/tax-proxy.factory.js","webpack:///./src/app/portal/invoices/unit-of-measure-selector/_loader.js","webpack:///./src/app/portal/invoices/unit-of-measure-selector/unit-of-measure-repository.factory.js","webpack:///./src/app/portal/invoices/unit-of-measure-selector/unit-of-measure-selector.directive.js","webpack:///./src/app/portal/invoices/unit-of-measure-selector/unit-of-measure.controller.js","webpack:///./src/app/portal/invoices/viewer/_components/_loader.js","webpack:///./src/app/portal/invoices/viewer/_components/_snippets/_loader.js","webpack:///./src/app/portal/invoices/viewer/_components/invoiceDetails/invoiceDetailsDirective.js","webpack:///./src/app/portal/invoices/viewer/_loader.js","webpack:///./src/app/portal/invoices/viewer/invoiceViewDetailsButtonsConfigurator.js","webpack:///./src/app/portal/invoices/viewer/invoiceViewerController.js","webpack:///./src/app/portal/parties/_loader.js","webpack:///./src/app/portal/parties/_states.js","webpack:///./src/app/portal/parties/discovery/_loader.js","webpack:///./src/app/portal/parties/discovery/discover-parties-list-configuration.service.js","webpack:///./src/app/portal/parties/discovery/discover-parties-list.component.js","webpack:///./src/app/portal/parties/discovery/discovered-party-details.component.js","webpack:///./src/app/portal/parties/list/_loader.js","webpack:///./src/app/portal/parties/list/allocated-to-party-list.component.js","webpack:///./src/app/portal/parties/list/party-list-table-configuration.service.js","webpack:///./src/app/portal/parties/list/party-list.component.js","webpack:///./src/app/portal/parties/list/party-selector.component.js","webpack:///./src/app/portal/parties/list/working-for-party-list.component.js","webpack:///./src/app/portal/parties/party-codes/_loader.js","webpack:///./src/app/portal/parties/party-codes/party-codes.component.js","webpack:///./src/app/portal/parties/shared/_loader.js","webpack:///./src/app/portal/portalController.js","webpack:///./src/app/portal/purchaseOrders/_loader.js","webpack:///./src/app/portal/purchaseOrders/_states.js","webpack:///./src/app/portal/purchaseOrders/lists/_components/_loader.js","webpack:///./src/app/portal/purchaseOrders/lists/_components/_snippets/_loader.js","webpack:///./src/app/portal/purchaseOrders/lists/_components/purchaseOrderList/purchaseOrderListDirective.js","webpack:///./src/app/portal/purchaseOrders/lists/_loader.js","webpack:///./src/app/portal/purchaseOrders/lists/purchaseOrderListConfigurator.js","webpack:///./src/app/portal/purchaseOrders/lists/purchaseOrderListController.js","webpack:///./src/app/portal/purchaseOrders/lists/purchaseOrderListFiltersController.js","webpack:///./src/app/portal/purchaseOrders/purchase-order-additional-document-references-configuration.js","webpack:///./src/app/portal/purchaseOrders/purchase-order-proxy.factory.js","webpack:///./src/app/portal/purchaseOrders/purchaseOrderLinesColumnSettings.js","webpack:///./src/app/portal/purchaseOrders/purchaseOrderRepository.js","webpack:///./src/app/portal/purchaseOrders/viewer/_components/_loader.js","webpack:///./src/app/portal/purchaseOrders/viewer/_components/_snippets/_loader.js","webpack:///./src/app/portal/purchaseOrders/viewer/_components/dateRangeDisplay/_loader.js","webpack:///./src/app/portal/purchaseOrders/viewer/_components/dateRangeDisplay/diDateRangeDisplayDirective.js","webpack:///./src/app/portal/purchaseOrders/viewer/_components/purchaseOrderDetails/purchaseOrderDetailsDirective.js","webpack:///./src/app/portal/purchaseOrders/viewer/_loader.js","webpack:///./src/app/portal/purchaseOrders/viewer/purchaseOrderViewerController.js","webpack:///./src/app/portal/purchaseOrders/viewer/purchaseOrderViewerLinesConfigurator.js","webpack:///./src/app/portal/related/_loader.js","webpack:///./src/app/portal/related/_states.js","webpack:///./src/app/portal/related/lists/_components/_loader.js","webpack:///./src/app/portal/related/lists/_components/_snippets/_loader.js","webpack:///./src/app/portal/related/lists/_components/relatedList/relatedListDirective.js","webpack:///./src/app/portal/related/lists/_loader.js","webpack:///./src/app/portal/related/lists/relatedListConfigurator.js","webpack:///./src/app/portal/related/lists/relatedListController.js","webpack:///./src/app/portal/related/related-documents/_loader.js","webpack:///./src/app/portal/related/related-documents/related-documents-configurator.provider.js","webpack:///./src/app/portal/related/related-documents/related-documents.controller.js","webpack:///./src/app/portal/related/related-documents/related-documents.directive.js","webpack:///./src/app/portal/shared/_loader.js","webpack:///./src/app/portal/shared/components/_loader.js","webpack:///./src/app/portal/shared/components/action-buttons/_loader.js","webpack:///./src/app/portal/shared/components/action-buttons/action-buttons.controller.js","webpack:///./src/app/portal/shared/components/action-buttons/action-buttons.directive.js","webpack:///./src/app/portal/shared/components/action-buttons/stateful-button/_loader.js","webpack:///./src/app/portal/shared/components/action-buttons/stateful-button/stateful-button.controller.js","webpack:///./src/app/portal/shared/components/action-buttons/stateful-button/stateful-button.directive.js","webpack:///./src/app/portal/shared/components/additional-document-references/_loader.js","webpack:///./src/app/portal/shared/components/additional-document-references/additional-document-references.component.js","webpack:///./src/app/portal/shared/components/address-edit-details/_loader.js","webpack:///./src/app/portal/shared/components/address-edit-details/address-details.component.js","webpack:///./src/app/portal/shared/components/address-edit-details/address-edit-details.controller.js","webpack:///./src/app/portal/shared/components/address-edit-details/address-edit-details.directive.js","webpack:///./src/app/portal/shared/components/address-edit-details/address-validation-property-name-provider.factory.js","webpack:///./src/app/portal/shared/components/address-view-details/_loader.js","webpack:///./src/app/portal/shared/components/address-view-details/address-view-details.directive.js","webpack:///./src/app/portal/shared/components/contact-details/_loader.js","webpack:///./src/app/portal/shared/components/contact-details/contact-details.component.js","webpack:///./src/app/portal/shared/components/contact-view-details/_loader.js","webpack:///./src/app/portal/shared/components/contact-view-details/contact-view-details.directive.js","webpack:///./src/app/portal/shared/components/date-selector/_loader.js","webpack:///./src/app/portal/shared/components/date-selector/date-selector.controller.js","webpack:///./src/app/portal/shared/components/date-selector/date-selector.directive.js","webpack:///./src/app/portal/shared/components/document-state-display/_loader.js","webpack:///./src/app/portal/shared/components/document-state-display/document-state-display.controller.js","webpack:///./src/app/portal/shared/components/document-state-display/document-state-display.directive.js","webpack:///./src/app/portal/shared/components/document-state-selector/_loader.js","webpack:///./src/app/portal/shared/components/document-state-selector/document-state-resolver.factory.js","webpack:///./src/app/portal/shared/components/legal-view-details/_loader.js","webpack:///./src/app/portal/shared/components/legal-view-details/legal-view-details.directive.js","webpack:///./src/app/portal/shared/components/party-view-details/_loader.js","webpack:///./src/app/portal/shared/components/party-view-details/party-view-details.directive.js","webpack:///./src/app/portal/shared/components/set-focus/_loader.js","webpack:///./src/app/portal/shared/components/set-focus/set-focus.directive.js","webpack:///./src/app/portal/shared/services/_loader.js","webpack:///./src/app/portal/shared/services/attachment-download-validator/_loader.js","webpack:///./src/app/portal/shared/services/attachment-download-validator/attachment-download-validator.factory.js","webpack:///./src/app/portal/shared/services/attachment-proxy.factory.js","webpack:///./src/app/portal/shared/services/audit-proxy.factory.js","webpack:///./src/app/portal/shared/services/button-state-resolver/_loader.js","webpack:///./src/app/portal/shared/services/button-state-resolver/button-state-resolver.factory.js","webpack:///./src/app/portal/shared/services/document-attachment-configurator/_loader.js","webpack:///./src/app/portal/shared/services/document-attachment-configurator/document-attachment-configurator.factory.js","webpack:///./src/app/portal/shared/services/document-attribute-resolver/_loader.js","webpack:///./src/app/portal/shared/services/document-attribute-resolver/document-attribute-resolver.factory.js","webpack:///./src/app/portal/shared/services/document-proxy.factory.js","webpack:///./src/app/portal/shared/services/document-type-resolver/_loader.js","webpack:///./src/app/portal/shared/services/document-type-resolver/document-type-resolver.factory.js","webpack:///./src/app/portal/shared/services/file-extension-validator/_loader.js","webpack:///./src/app/portal/shared/services/file-extension-validator/file-extension-validator.factory.js","webpack:///./src/app/portal/shared/services/file-transfer/_loader.js","webpack:///./src/app/portal/shared/services/file-transfer/document-downloader.factory.js","webpack:///./src/app/portal/shared/services/file-transfer/file-uploader.factory.js","webpack:///./src/app/portal/shared/services/formatters/_loader.js","webpack:///./src/app/portal/shared/services/formatters/date-formatter.factory.js","webpack:///./src/app/portal/shared/services/formatters/grn-formatter.factory.js","webpack:///./src/app/portal/shared/services/formatters/invoice-formatter.factory.js","webpack:///./src/app/portal/shared/services/formatters/purchase-order-formatter.factory.js","webpack:///./src/app/portal/shared/services/notification-handler/_loader.js","webpack:///./src/app/portal/shared/services/notification-handler/notification-handler.factory.js","webpack:///./src/app/portal/shared/services/party-proxy.factory.js","webpack:///./src/app/portal/shared/services/proxy-error-interceptor/proxy-error-interceptor.service.js","webpack:///./src/app/portal/shared/services/trading-relationship-proxy.js","webpack:///./src/app/portal/shared/services/user-actions-resolver/_loader.js","webpack:///./src/app/portal/shared/services/user-actions-resolver/user-actions-resolver.factory.js","webpack:///./src/app/portal/shared/services/user-proxy.factory.js","webpack:///./src/app/portal/shared/services/vm-list-configurator/_loader.js","webpack:///./src/app/portal/shared/services/vm-list-configurator/vm-filters-list-configurator.factory.js","webpack:///./src/app/portal/summaries/_components/_loader.js","webpack:///./src/app/portal/summaries/_components/_snippets/_loader.js","webpack:///./src/app/portal/summaries/_components/chartSummary/_loader.js","webpack:///./src/app/portal/summaries/_components/chartSummary/chartConfigMapper.js","webpack:///./src/app/portal/summaries/_components/chartSummary/chartConfigurationMapper.js","webpack:///./src/app/portal/summaries/_components/chartSummary/chartDataMapper.js","webpack:///./src/app/portal/summaries/_components/chartSummary/chartFontMapper.js","webpack:///./src/app/portal/summaries/_components/chartSummary/chartLayoutMapper.js","webpack:///./src/app/portal/summaries/_components/chartSummary/chartSummaryController.js","webpack:///./src/app/portal/summaries/_components/chartSummary/chartSummaryDirective.js","webpack:///./src/app/portal/summaries/_components/chartSummary/chartTitleMapper.js","webpack:///./src/app/portal/summaries/_components/rangeSelector/_loader.js","webpack:///./src/app/portal/summaries/_components/rangeSelector/rangeSelectorController.js","webpack:///./src/app/portal/summaries/_components/rangeSelector/rangeSelectorDirective.js","webpack:///./src/app/portal/summaries/_components/rangeSelector/summaryOptionsStore.js","webpack:///./src/app/portal/summaries/_components/singleValueSummary/_loader.js","webpack:///./src/app/portal/summaries/_components/singleValueSummary/singleValueSummaryController.js","webpack:///./src/app/portal/summaries/_components/singleValueSummary/singleValueSummaryDirective.js","webpack:///./src/app/portal/summaries/_components/summarySelectorController.js","webpack:///./src/app/portal/summaries/_components/summaryTypes.js","webpack:///./src/app/portal/summaries/_components/tabularSummary/_loader.js","webpack:///./src/app/portal/summaries/_components/tabularSummary/tabularSummaryController.js","webpack:///./src/app/portal/summaries/_components/tabularSummary/tabularSummaryDirective.js","webpack:///./src/app/portal/summaries/_loader.js","webpack:///./src/app/portal/summaries/buyerSummary/_loader.js","webpack:///./src/app/portal/summaries/buyerSummary/buyerSummaryController.js","webpack:///./src/app/portal/summaries/buyerSummary/buyerSummaryDirective.js","webpack:///./src/app/portal/summaries/clickThroughDataMapper.js","webpack:///./src/app/portal/summaries/summary-proxy.factory.js","webpack:///./src/app/portal/summaries/supplierSummary/_loader.js","webpack:///./src/app/portal/summaries/supplierSummary/supplierSummaryController.js","webpack:///./src/app/portal/summaries/supplierSummary/supplierSummaryDirective.js","webpack:///./src/app/portal/users/_loader.js","webpack:///./src/app/portal/users/_states.js","webpack:///./src/app/portal/users/user-bottom-buttons/_loader.js","webpack:///./src/app/portal/users/user-bottom-buttons/user-bottom-buttons.component.js","webpack:///./src/app/portal/users/user-details-header/_loader.js","webpack:///./src/app/portal/users/user-details-header/user-details-header.component.js","webpack:///./src/app/portal/users/user-details/_loader.js","webpack:///./src/app/portal/users/user-details/user-details-configuration.service.js","webpack:///./src/app/portal/users/user-details/user-details.component.js","webpack:///./src/app/portal/users/user-edit-restrictions/_loader.js","webpack:///./src/app/portal/users/user-edit-restrictions/user-edit-restrictions.component.js","webpack:///./src/app/portal/users/user-list/_loader.js","webpack:///./src/app/portal/users/user-list/user-list-configuration.service.js","webpack:///./src/app/portal/users/user-list/user-list.component.js","webpack:///./src/app/portal/users/user-main-buttons/_loader.js","webpack:///./src/app/portal/users/user-main-buttons/user-main-buttons.component.js","webpack:///./src/app/portal/users/users-action-buttons/_loader.js","webpack:///./src/app/portal/users/users-action-buttons/users-action-buttons.component.js","webpack:///./src/app/portal/utilities/_loader.js","webpack:///./src/app/portal/utilities/_states.js","webpack:///./src/app/portal/utilities/integrator/_loader.js","webpack:///./src/app/portal/utilities/integrator/integrator-details-proxy.service.js","webpack:///./src/app/portal/utilities/integrator/integrator-details.component.js","webpack:///./src/app/shared/components/_loader.js","webpack:///./src/app/shared/components/client-enums/_loader.js","webpack:///./src/app/shared/components/client-enums/client-enums.js","webpack:///./src/app/shared/components/client-enums/enum-translator.service.js","webpack:///./src/app/shared/components/client-enums/enums-key-resolver.service.js","webpack:///./src/app/shared/components/dropdown-selector/_loader.js","webpack:///./src/app/shared/components/dropdown-selector/dropdown-selector.controller.js","webpack:///./src/app/shared/components/dropdown-selector/dropdown-selector.directive.js","webpack:///./src/app/shared/components/header/_loader.js","webpack:///./src/app/shared/components/header/_snippets/_loader.js","webpack:///./src/app/shared/components/header/header-data.service.js","webpack:///./src/app/shared/components/header/header.controller.js","webpack:///./src/app/shared/components/identifier/_loader.js","webpack:///./src/app/shared/components/identifier/identifierFactory.js","webpack:///./src/app/shared/components/image/_loader.js","webpack:///./src/app/shared/components/image/images.js","webpack:///./src/app/shared/components/navigation/_loader.js","webpack:///./src/app/shared/components/navigation/go-back.directive.js","webpack:///./src/app/shared/components/navigation/navigation-warning.controller.js","webpack:///./src/app/shared/components/navigation/navigation-warning.directive.js","webpack:///./src/app/shared/components/navigation/navigation.controller.js","webpack:///./src/app/shared/components/navigation/navigation.directive.js","webpack:///./src/app/shared/components/service-status-monitor/_loader.js","webpack:///./src/app/shared/components/service-status-monitor/server-proxy.factory.js","webpack:///./src/app/shared/components/service-status-monitor/service-status-monitor.controller.js","webpack:///./src/app/shared/components/service-status-monitor/service-status-monitor.directive.js","webpack:///./src/app/shared/components/service-status-monitor/service-status-monitor.service.js","webpack:///./src/app/shared/components/style-constants/_loader.js","webpack:///./src/app/shared/components/style-constants/colour-classes.js","webpack:///./src/app/shared/components/tooltip/_loader.js","webpack:///./src/app/shared/components/tooltip/tooltip.directive.js","webpack:///./src/app/shared/components/user/_loader.js","webpack:///./src/app/shared/components/user/authentication-client-event-handler.service.js","webpack:///./src/app/shared/components/user/user-rights.js","webpack:///./src/app/shared/components/user/user-settings-store.service.js","webpack:///./src/app/shared/services/_loader.js","webpack:///./src/app/shared/services/party-feature-enabled/_loader.js","webpack:///./src/app/shared/services/party-feature-enabled/party-feature-enabled-proxy.service.js","webpack:///./src/app/shared/services/session-preferences/_loader.js","webpack:///./src/app/shared/services/session-preferences/lists-params-store.service.js","webpack:///./src/app/welcome/_loader.js","webpack:///./src/app/welcome/welcome.component.js","webpack:///./~/angular-animate/angular-animate.js","webpack:///./~/angular-animate/index.js","webpack:///./~/angular-sanitize/angular-sanitize.js","webpack:///./~/angular-sanitize/index.js","webpack:///./lib/di.core/global/angular/_main.js","webpack:///./lib/di.core/global/angular/snippetRegistrar.js","webpack:///./lib/di.core/global/angular/util.js","webpack:///./~/angular-local-storage/src/angular-local-storage.js","webpack:///./~/ng-metadata/src/core/change_detection.js","webpack:///./~/ng-metadata/src/core/change_detection/changes_queue.js","webpack:///./~/ng-metadata/src/core/change_detection/constants.js","webpack:///./~/ng-metadata/src/core/di.js","webpack:///./~/ng-metadata/src/core/di/key.js","webpack:///./~/ng-metadata/src/core/di/reflective_provider.js","webpack:///./~/ng-metadata/src/core/directives.js","webpack:///./~/ng-metadata/src/core/directives/binding/binding_factory.js","webpack:///./~/ng-metadata/src/core/directives/binding/binding_parser.js","webpack:///./~/ng-metadata/src/core/directives/controller/constants.js","webpack:///./~/ng-metadata/src/core/directives/controller/controller_factory.js","webpack:///./~/ng-metadata/src/core/directives/decorators.js","webpack:///./~/ng-metadata/src/core/directives/directive_provider.js","webpack:///./~/ng-metadata/src/core/directives/host/host_parser.js","webpack:///./~/ng-metadata/src/core/directives/host/host_resolver.js","webpack:///./~/ng-metadata/src/core/directives/query/children_resolver.js","webpack:///./~/ng-metadata/src/core/linker/directive_lifecycles_reflector.js","webpack:///./~/ng-metadata/src/core/linker/directive_resolver.js","webpack:///./~/ng-metadata/src/core/linker/pipe_resolver.js","webpack:///./~/ng-metadata/src/core/pipes.js","webpack:///./~/ng-metadata/src/core/pipes/decorators.js","webpack:///./~/ng-metadata/src/core/pipes/pipe_provider.js","webpack:///./~/ng-metadata/src/core/reflection/reflection_capabilities.js","webpack:///./~/ng-metadata/src/core/reflection/reflector.js","webpack:///./~/ng-metadata/src/core/reflection/reflector_reader.js","webpack:///./~/ng-metadata/src/core/util.js","webpack:///./~/ng-metadata/src/core/util/bundler.js","webpack:///./~/ng-metadata/src/facade/facade.js","webpack:///./~/rxjs/Observable.js","webpack:///./~/rxjs/Subject.js","webpack:///./~/rxjs/SubjectSubscription.js","webpack:///./~/rxjs/symbol/observable.js","webpack:///./~/rxjs/util/ObjectUnsubscribedError.js","webpack:///./~/rxjs/util/UnsubscriptionError.js","webpack:///./~/rxjs/util/isArray.js","webpack:///./~/rxjs/util/isObject.js","webpack:///./~/rxjs/util/toSubscriber.js","webpack:///./~/rxjs/util/tryCatch.js"],"names":["window","$di","utility","util","isArray","isNonEmptyArray","isBoolean","isNull","isNullOrUndefined","isNumber","isDecimalNumber","isString","isNonEmptyString","isSymbol","isUndefined","isRegExp","isObject","isEmptyObject","isRealObject","isDate","isError","isFunction","isPrimitive","isDefined","extend","isAnyObjectPropertyDefined","toSnakeCase","hasValue","arg","Array","length","Math","floor","objectToString","name","Error","o","Object","prototype","toString","call","argI","arguments","dest","source","attr","hasOwnProperty","fill","ignoredProperties","property","contains","arrhaystack","needle","indexOf","separator","replace","letter","pos","toLowerCase","throwIfNullOrUndefined","exception","guard","getNewError","throwNew","throwIf","throwIfNull","throwIfUndefined","throwIfNotAnObject","throwIfNotANumber","throwIfZero","throwIfNegative","throwIfZeroOrNegative","throwIfDecimal","throwIfNotAString","throwIfEmptyString","throwIfInvalidId","throwIfNotAFunction","throwIfNotArray","throwIfEmptyArray","reThrow","message","err","condition","value","valueName","e","ex","innerException","placeholders","map","targets","args","mapped","unmapped","i","obj","eval","error","unshift","undefined","popped","pop","s","_pattern","extract","placeholderString","matches","exec","ms","push","trim","ng","configLoader","runLoader","statesLoader","componentsLoader","portalLoader","welcomeLoader","impersonateLoader","diCoreAngularLoader","module","spaLoader","angular","debug","event","debugger","enabled","log","newLogger","breakHere","data","logContext","logData","_logContext","console","$","valListenerAdded","jqueryEventSubscriber","listenToVal","originalVal","fn","val","result","apply","trigger","pushArray","clear","concat","compatability","transitionEndEvent","getTransitionEndEvent","transitionEndNames","Modernizr","prefixed","DELIMITER","OPEN_BRACE","CLOSE_BRACE","split","argumentString","chunks","insideBraces","lastChunkIndex","substring","argumentFilter","mappedArguments","filteredArguments","replacing","str","_","template","authenticationLoader","cachingLoader","exceptionLoader","httpLoader","loggingLoader","userSecurityLoader","sessionLoader","stateLoader","translationLoader","utilityLoader","validationLoader","watchersLoader","windowLoader","currencyLoader","controlsLoader","staticLookupLoader","dateLoader","fileLoader","urlLoader","config","configureAuthenticationHttpInterceptor","$inject","$httpProvider","interceptors","authenticationClientEventSubscriberLoader","authenticationControllerLoader","authenticationDirectiveLoader","authenticationHttpInterceptorLoader","authenticationDataLoader","authenticationStoreLoader","userAuthenticationProxyLoader","authenticationTicketValidatorLoader","authorizedObjectsFilterLoader","userRightsRepositoryLoader","authenticationPromptConfiguratorLoader","authenticationResultLoader","loggedOutReasonLoader","userIdleActivityMonitorLoader","activityMonitor","provider","configure","$get","cfg","userIdleActivityMonitor","authenticationData","authenticationClientEventSubscriber","authenticationTicketValidator","promptWindow","translator","LOGGED_OUT_REASON","sessionAboutToExpiry","idle","timeout","translate","then","translated","alert","title","instantTranslate","callback","userData","isAuthenticated","start","validateTicket","sessionTimeout","loggedOut","SessionTimeout","stop","idleStartedHandler","idleEndHandler","idleTimeoutHandler","authenticationClientEventSubscriberProvider","unauthenticatedState","authenticatedState","changePasswordState","rootScope","diState","authenticationStore","loggerProxy","loggedInEventHandlers","loggedOutEventHandlers","rightsChangedEventHandlers","loggedIn","changePasswordRequested","failedLogin","server401","ticketExpired","unauthorisedState","authenticatedAccessToLoginState","rightsChanged","addLoggedInEventHandler","addLoggedOutEventHandler","addRightsChangedEventHandler","setAuthenticationTicket","go","toState","toParams","loggedOutReason","info","reason","UnauthorisedServerResponse","TicketExpired","url","warning","UnauthorisedState","eventHandler","controller","AuthenticationController","userAuthenticationProxy","notifier","scope","authenticationPromptConfigurator","modalSpinner","authenticationResult","stateParams","vm","username","password","login","forgotPassword","onForgotPasswordClick","loginProcessing","spinner","init","autoLogin","showSpinner","resolved","rejected","removeSpinner","authResult","success","changePasswordOnLogin","handleChangePasswordOnLogin","handleLoginSuccess","handleLoginFailure","subscribeToFirstLogin","serverDescription","Success","PasswordAboutToExpire","getPromptConfiguration","confirm","tryTanslate","errorMessage","InvalidUsername","InvalidPassword","AccountDisabled","AccountLocked","focusOn","setTimeout","PasswordExpired","subscribeToPasswordExpired","userName","failureReason","toUpperCase","opts","width","radius","scale","color","opacity","zIndex","showModalSpinner","remove","factory","service","authenticationTicket","authenticationHttpInterceptor","request","requestConfig","token","headers","Authorization","okBtnText","cancelBtnText","constant","ServerDown","sessionStore","storageKey","getAuthenticationData","setAuthenticationData","sessionData","get","set","access_token","refreshToken","refresh_token","issuedDate","Date","expiresDate","rights","userId","parseInt","moment","AuthenticationTicketValidatorProvider","expiryToleranceMilliseconds","validating","deferredActions","AUTHENTICATION_RESULT","$q","refresh","action","deferredAction","deferred","defer","promise","validateTicketInner","stillValid","da","resolve","when","now","expiresDateMoment","difference","diff","refreshAuth","ChangePasswordOnLogin","oldRights","join","newRights","reload","getLoggedOutReason","authorizedObjectsFilter","associativeArrayConvertor","objectsDefinitions","rightsRequired","requireAllRights","requireRights","getAuthorizedObjects","getAuthorizedObjectsAsAssociative","keyPropName","valuePropName","results","convert","definitions","requireAll","userRights","findObjectsWithMatchingRights","objectsIndexed","objects","found","containsAll","index","each","right","containsOne","sortedObjects","sort","compare","containsObject","filtered","filter","checkAllRightsExist","needles","haystack","len","inArray","checkRightExists","arr","item","list","a","b","directive","diAuthentication","restrict","controllerAs","link","element","attrs","id","focusElm","find","focus","html","UserLoggedOut","RightsChanged","UserAuthenticationProxyProvider","endpoint","clientId","dHttp","urlHelper","encodedUsername","encodeUriComponent","encodedPassword","encodedClientId","postWithHeaders","encodedRefreshToken","parseResult","failure","response","status","reject","resultPropertyName","errorDetails","errorId","errorDesc","tokenString","errorDetailsArr","authenticateResultParts","tokenPartsArr","userIdleActivityMonitorProvider","pageTitle","idleProvider","autoResume","Title","idleStartedHandlerFn","idleEndHandlerFn","idleTimeoutHandlerFn","$on","handlers","watch","unwatch","userRightsRepository","userHasRight","rightName","hasRight","scopeCacheFactoryLoader","scopeCacheFactory","create","scopeCacheData","delegateName","delegate","cacheKey","JSON","stringify","buttonDirectiveLoader","imageDirectiveLoader","inputLoader","transcludeRepeatDirectiveLoader","transcludeReplaceDirectiveLoader","elementNotifierLoader","elementNotifierStylesLoader","notifierLoader","promptWindowLoader","modalLoader","spinnerLoader","toggleLoader","selectLoader","simpleSelectLoader","multiSelectLoader","diEnabledLoader","diClickLoader","diDataTableLoader","gridPaginationButtonsLoader","gridPaginationPageSizeLoader","enterKeyLoader","chartLoader","diNoDirtyLoader","restrictionsLoader","buttonContrllerLoader","DiButtonController","clicked","blur","valid","diToggleTrigger","$parent","diToggleCtrl","toggle","prompt","prePromptAction","displayPromptIfRequired","promptConfiguration","defaultConfiguration","promptTitle","promptMessage","promptCondition","promptOkBtnText","promptCancelBtnText","defaults","diButton","transclude","tooltip","validate","image","imageColour","btnClass","btnDisabledClass","filled","text","diChartController","diChartDirective","chartPlotter","plotly","plot","restyle","relayout","addDataSeries","addTraces","deleteDataSeries","deleteTraces","reorderDataSeries","moveTraces","redraw","onEvent","on","purge","toImage","downloadImage","resize","reconfigure","updatePlotConfig","graphDiv","layout","newPlot","update","tracesIndices","traces","indices","oldIndex","newIndex","handler","imageProperties","Plots","configObj","DiChartController","initialise","getDefaultConfigOptions","getDefaultLayoutSettings","drawChart","resizeChart","purgeChart","setWatches","displaylogo","autosizable","autosize","fillFrame","showLink","displayModeBar","paper_bgcolor","plot_bgcolor","getDirectiveElement","elem","$watch","$watchCollection","diChart","$window","attributes","onResize","cleanUp","off","diDataTableDirectiveLoader","diDataTableControllerLoader","diTemplateCompilerLoader","DiDataTableController","keepWatch","currentPage","tableOptions","dblClicked","displayData","selectRow","getDataForPage","getCurrentlySelectedItems","getTotalPages","updatePagination","changePage","onOptionsForResizeLoaded","onDataLoaded","onRowClick","onRowDblClick","rowClick","rowDoubleClick","onOptionsForButtonsLoaded","setPaginationPageSizeButtonsOptions","setFunc","dataLoaded","watchItems","loaded","watchExpression","initialiseOnce","items","options","paginationPageNumber","pagination","seek","translateColumnHeaders","whenReady","columns","column","nameLanguageKey","visible","enableSelect","isSelected","raiseOnSelectionChanged","selected","wasSelected","multiSelect","clearSelectedRows","selectedRows","forEach","clearSelected","onSelectionChanged","selectedItems","pageNo","onPageNumberChanged","newSize","paginationPageSize","onPageSizeChanged","page","clearDisplayedRows","setDisplayedRows","onDataDisplayed","displayedRows","getCurrentlyDisplayedItems","enablePaging","ceil","pageNumber","begin","end","pagedData","slice","fixedHeight","addMissingRows","minRows","missingRows","isHidden","reset","setIsDisplayed","propertyValue","isDisplayed","diDataTable","itemsController","diTemplateCompiler","compile","binding","doCompileTemplate","compiled","parent","diClick","$parse","waitForSecondClick","delay","singleClick","doubleClick","clicks","timer","twoClicks","callSingle","callDouble","clearTimeout","$apply","$event","diEnabled","$animate","multiElement","tempClasses","diNoDirty","require","ngModelCtrl","$setDirty","noop","diTranscludeRepeat","terminal","innerScope","$new","clone","empty","append","$destroy","diTranscludeReplace","ctrl","replaceWith","ElementNotifierProvider","defaultOptions","clickToHide","autoHide","position","notification","style","className","createNotification","notElm","setMessage","show","hide","getMessage","destroy","userContainer","firstElementChild","innerText","newMessage","notify","removeData","msg","thirdPartyOptions","mapOptionsToThirdPartyOptions","wrapper","css","arrowShow","arrowSize","showAnimation","showDuration","hideAnimation","hideDuration","gap","setOption","optionName","thirdPartyOptionName","mappingFunction","option","thirdPartyOption","addStyle","classes","base","warn","diEnterDirectiveLoader","enterEventsLoader","diEnter","enterEvents","bind","which","keyPressed","formAnalyser","$timeout","validateForm","$eval","form","getForm","skipValidation","canSkipValidation","formIsValid","isFormValid","preventDefault","diEnterSkipValidation","diGridPaginationButtonsDirectiveLoader","diGridPaginationButtonsControllerLoader","DiGridPaginationButtonsController","$scope","switchPage","current","total","pageSize","maxButtonsShown","goToPage","nextPage","previousPage","setTableOptions","updateItems","getPageNumbers","count","max","shownPages","leftSide","rightSide","number","j","diGridPaginationButtons","translucent","ctrls","paginationCtrl","dataTableCtrl","diGridPaginationPageSizeDirectiveLoader","diGridPaginationPageSizeController","DiGridPaginationPageSizeController","gridOptions","sizes","selectedSize","initialize","setOptions","paginationPageSizes","size","label","diGridPaginationPageSize","bindToObject","bindToProperty","imageTemplate","imageCompile","diImageCompile","IMAGES","COLOUR_CLASSES","diImageTemplate","compileHtml","elmTag","rootElement","imageHtmlTemplate","compileElement","rootElm","cssClass","class","imageData","src","compileLinked","compileEmbedded","addClass","imgElm","svgElm","findById","setSvgAttrs","setSvgPath","elm","removeAttr","minX","minY","height","viewbox","viewBox","xmlSpace","preserveAspectRatio","pathElm","colour","pathStyles","addElementCss","cssStyles","diImage","inputControllerLoader","inputDirectiveLoader","diInput","$interpolate","controlsRestrictionManager","bindModel","bindModelProperty","bindModelOptions","validationPropertyName","onChange","inputClass","interpolate","diInputType","interpolateAndTranslate","diInputLabel","diShowIcon","validationModelDisplayName","validationMessagePosition","validationMessage","validateOnBlur","diClass","placeholder","modelName","getModelName","addControlChangeSubscription","disabled","elementWithValidatationModelName","getElementWithValidationModel","innerElement","valueIfEmpty","Pikaday","InputController","DATE_FORMATS","pikaday","showDatePicker","validationProperty","validationModelProperty","inputElm","field","theme","format","supported","onSelect","constants","Symbol","ModalResourceController","$element","close","partyProxy","elementNotifier","save","cancel","onCountryChanged","validateCode","validationFailed","cancelText","model","isEditable","country","changed","onDataChanged","validateOnSave","onSave","identifier","dataModel","partyId","partyCodeType","codeValue","code","schemeId","scheme","relatedPartyId","relatedParty","validatePartyCode","resultData","all","el","querySelector","constructor","ModalWindowService","modalService","saveCallback","cancelCallback","deleteCallback","showModal","templateUrl","bodyClass","inputs","preventClose","preClose","modal","state","object","diMultiSelectDirectiveLoader","diMultiSelect","selectedOptions","availableOptions","labelText","icon","maxItemsToShow","labelCtrl","toastr","NotifierProvider","timeOut","positionClass","extendedTimeOut","errorTimeOut","infoTimeOut","onClick","successTimeOut","onclick","closeButton","warningTimeOut","bootbox","box","promptConfig","okBtnClass","cancelBtnClass","inputPromptConfig","closeIfActiveBox","getPromptConfig","validatePromptConfig","setDefaults","stringToTranslate","translationArguments","buttons","ok","inputConfig","userEditRestrictionsProxy","restrictionStore","UserEditRestrictionsProxyService","ControlsRestrictionManager","RestrictionsStore","_restrictionStore","_subscriptions","Map","_optionSubscriptions","_initialised","_allowAddNewLine","_allowAddAllowance","_allowAddCharge","invoiceId","_invoiceId","_allowSubscriptions","loadRestrictions","loadRestrictionLevelsFromStore","processSubscriptions","_userRestrictionLevel","editRestrictions","getEditRestrictions","userRestrictionLevel","_entityEditRestrictions","entityEditStates","allowAddNewLine","_allowAddAllowanceCharge","allowAddAllowanceCharge","subcriptionFunction","fullName","disableControl","key","disable","restriction","entityType","entityName","allowEdit","_userEditRestrictionsProxy","_sessionStore","webApiHttp","_webApiHttp","_urlHelper","requestedParams","requestedUrl","setParameters","objectFilterLoader","selectControllerLoader","selectDirectiveLoader","selectDirectiveUpgradeLoader","selectUpgradeControllerLoader","diObjectFilter","searchData","propertiesToSearch","searchExp","RegExp","matchedObjects","objectMatches","checkObjectMatches","some","itemMatches","search","DiSelectController","ngUtil","selectedItem","searchablePropertyNames","ignoreBoundObjectProperty","highlightedItem","onItemSelected","filteredItems","inputKeypress","inputKeyUp","toggleActions","controlState","selectStyle","onSearchTextChange","applySearch","watchBoundObjectProperty","diValidateModel","canBeShown","filteredItem","highlighed","previous","next","newItem","searchText","getSearchText","watchBinding","onChangeAccessor","evt","keyCode","isHandled","toggleFunc","stopEventPropagation","setSearchText","displaySelectedItem","highlightItem","stopPropagation","displayText","displayProperty","allowEmptyDisplay","tryToDisplay","searchableProperties","setDisplayText","properties","values","v","noMatches","every","propertyName","noMatch","isMatch","searchWord","currentValue","watchIncludeDefaultObj","itemSelected","listener","selectSingle","onItemSelectFunction","selectOption","confirmFunc","confirmTitle","confirmMessage","confirmOkBtnText","confirmCancelBtnText","updateBoundProperty","itemCompare","diSelect","validationModel","tabIndex","t","validationName","searchImage","searchImageColour","mode","listElm","searchTextInputElm","displayPropertyInputElm","inputNeedsFocus","hasSearchText","onShow","$evalAsync","copySearchValue","itemInputElm","itemSpanElms","itemSpanElm","removeClass","autoCompleteModeHtml","dropdownModeHtml","dropdownSearchModeHtml","trackBy","itemUniqueProperty","listHtml","searchInputAttrs","imageHtml","diSelectUpgrade","DiSelectUpgradeController","diFill","diSimpleSelectDirectiveLoader","diSimpleSelectControllerLoader","DiSimpleSelectController","onChanged","translateFilterLabels","filters","defaultValue","diSimpleSelect","spinnerGeneratorLoader","modalSpinnerLoader","spinnerGenerator","modalSpinnerClass","spinnerOptions","modalElement","prepend","generateNewSpinner","spin","children","elementToRemove","fadeOut","Spinner","toggleControllerLoader","toggleDirectiveLoader","overrideToggleFactory","DiToggleController","actionsHook","isVisible","whenDigestComplete","onToggle","setVisible","shouldOverrideToggleHide","onHide","func","innerFunc","diToggle","$compile","uniqueIdGenerator","wrapClass","toggleClass","adjustPosition","newScope","parentElm","triggerElms","findByAttrAndRemove","targetElms","ignoreElms","ignoreClass","newId","hasClass","moveUp","is","closeTargetOnClickAway","closeTargetOnClick","elms","panel","pEl","fieldBottom","panelTop","viewportHeight","innerHeight","document","documentElement","clientHeight","scrollTop","pageYOffset","body","getBoundingClientRect","clientRect","bottom","offsetTop","offsetHeight","offsetParent","panelHeight","getHeight","margin","getTopMargin","newPanelTop","top","outerHeight","pikadayDivs","querySelectorAll","currencyFilterLoader","currencyCacheLoader","currencyCache","sce","staticLookup","q","currencies","sessionStorageKey","sessionStoragePrefix","getCurrencies","getCurrencyByIsoCode","getCurrencyById","currenciesFromStore","getCurrenciesFromStore","currency","trustAsHtml","symbol","sortBy","sessionCurrency","isoCode","diCurrencyFilter","getCurrency","currencyId","abs","digitsAfterDecimal","diDateFilter","diDateFormats","diMoment","diDate","dateFormats","input","momentValue","isMoment","isValid","supportedDateFormats","localeData","longDateFormat","ISO_8601","inputMoment","locale","configureExceptionHandler","configureExceptionHttpInterceptor","$provide","decorator","extendExceptionHandler","exceptionHandler","cause","handleException","exceptionHandlerLoader","exceptionHttpInterceptorLoader","stackTraceLoader","ExceptionHandlerProvider","appErrorPrefix","$log","stackTraceService","logger","loggedEx","stackTrace","print","exceptionHttpInterceptor","responseError","httpResponse","handleResponseError","stackTraceFactory","fileDownloaderLoader","FileDownloaderProvider","tokenParameterName","endpoints","downloadFile","validateAuthenticationTicketAndDownloadFile","relativeUrl","getUrl","setParameter","open","dHttpLoader","webApiHttpLoader","authHttpLoader","serverResponseHandlerLoader","authHttp","getWithHeaders","post","doDelete","doDeleteWithHeaders","DHttpProvider","$http","makeRequest","method","handledPromise","getHandledPromise","getFailureReason","statusPrefix","serverResponseHandler","defaultErrorMessage","handleServerResponsePromise","newPromise","responseObject","responseContent","rejectedPromise","WebApiHttpProvider","endpointName","defaultHeaders","accept","dHttpPromise","mergedHeaders","loggerProxyLoader","LoggerProxyProvider","logInfoToServer","logWarningToServer","logErrorToServer","sendToServer","severity","logEntry","ajax","type","contentType","currentUrl","location","href","sessionStoreLoader","SessionStoreProvider","localStorage","prefix","fullKey","generateKey","stateHelperLoader","diStateLoader","stateAuthenticatorLoader","stateDecoratorLoader","$state","stateSubscriptions","goBack","subscribeToStateChange","to","params","subscriptions","from","fromParams","currentState","getCurrentState","stateName","$current","self","currentParams","StateAuthenticatorProvider","securityEnabled","loginState","authenticateState","requiredRights","requiredRight","stateDecorator","decorated","ev","StateHelperProvider","$stateProvider","stateRights","addStates","stateData","parentRights","parentStateName","addStatesArray","states","templateBaseUrl","statesArray","templateName","onlyCreateStateCollection","stateCollection","createState","newTemplateName","qualifiedStateName","stateObj","abstract","isAbstract","childStates","staticLookupProxyLoader","staticLookupProxy","http","requestParameters","requestUrl","httpPromise","diTranslateDirectiveLoader","diTranslateFilterLoader","diTranslateLink","translatorLoader","diTranslate","translateLink","languageKey","translateArguments","targetProperty","textContent","nodeName","$rootScope","$translate","deregisterTranslateChangeStart","translationChanged","deregisterTranslateRefreshStart","deregisterTranslateChangeSuccess","translationLoaded","translationIsLoaded","requests","tearDown","changeLanguage","getCurrentLanguage","defferal","translateMappedArguments","instant","use","endpointsLoader","urlHelperLoader","absoluteUrlLoader","absoluteUrl","isAbsoluteUrl","uriRegex","capturingGroups","EndpointsProvider","siteOne","siteTwo","defaultEndpoint","endpointConfig","endpointUrl","getEndpointUrl","combine","URI","getParameters","protocol","urlParts","argument","argumentUrlParts","urlPart","urlParams","urlObj","setSearch","encodeURIComponent","changePasswordDirectiveLoader","setPasswordDirectiveLoader","forgotPasswordDirectiveLoader","changePasswordController","setPasswordController","forgotPasswordController","userSecurityProxy","passwordPolicyDirectiveLoader","getSecurityQuestionDirectiveLoader","securityAnswerDirectiveLoader","resetPasswordDirectiveLoader","resetPasswordSuccessDirectiveLoader","ChangePasswordController","oldPassword","newPassword","confirmPassword","changePassword","subscribeToUsernameChange","passwordValidationMessage","newPasswordElement","oldPasswordElement","diChangePassword","confirmPasswordElement","diForgotPassword","onPasswordReset","onBackToLoginClick","subscribeToResetTokenChange","showhHideControl","findElementById","diGetSecurityQuestion","emailAddressElement","diPasswordPolicy","diResetPassword","resetTokenElement","diResetPasswordSuccess","diSecurityAnswer","securityAnswerElement","diSetPassword","onBackToLogin","setPassword","userNameElement","tokenElement","findElement","ForgotPasswordController","EMAIL_ADDRESS_STATE","SECURITY_QUESTION_STATE","RESET_PASSWORD_STATE","RESET_PASSWORD_SUCCESS_STATE","emailAddress","securityQuestion","securityAnswer","resetToken","setResetToken","isState","requestPasswordReset","getSecurityQuestion","resetPassword","backToLogin","startStopProcessing","buttonActive","buttonInactive","startOrStop","SetPasswordController","passwordExpired","securityQuestions","setPasswordAndQuestion","getSecurityQuestions","questions","question","setPasswordWithToken","setPasswordAndQuestionWithToken","userSecurityProxyProvider","getSecurityQuestionUrl","requestPasswordResetUrl","changePasswordUrl","resetPasswordUrl","resetPasswordSiteUrl","getUserUrl","getQuestionsUrl","setSecurityQuestionUrl","setPasswordWithTokenUrl","getUser","setSecurityQuestionAndAnswer","requestPasswordResetOnUserBehalf","email","requestParams","resetBaseUrl","requestPasswordResetUrlOnUserBehalf","setPasswordAndQuestionWithTokenUrl","associativeArrayConvertorLoader","guardedInjectorLoader","uniqueIdGeneratorLoader","filtersLoader","identityIncrementorLoader","randomStringGeneratorLoader","itemToConvert","indexer","convertArrayToAssociativeArray","convertAssoicativeArrayToArray","array","indexBy","associativeArray","diYesNoFilterLoader","diYesNo","guardedInjector","$injector","valueIfNotFound","has","identityIncrementor","getNext","getNextIdentifier","collection","identityName","identityIncrement","identitySeed","randomStringGenerator","MAX_LENGTH","CHAR_ARRAY","generate","maxLength","randomString","chars","round","random","lastId","diValidateClickDirectiveLoader","diValidateDirectiveLoader","diValidateDirectiveModelLoader","diRequireIfDirectiveLoader","requireIfValidatorLoader","formAnalyserLoader","idValidatorLoader","positiveWholeNumberValidatorLoader","ruleViolationSelectorLoader","validationMessageGeneratorLoader","validationNotifierLoader","validationInitialiserLoader","validationRulesProxyLoader","validationRulesStoreLoader","validationRulesSetterLoader","pastOrTodayValidatorLoader","comparersLoader","greaterValidatorLoader","lessValidatorLoader","equalAlwaysValidatorLoader","equalIfSelfSetValidatorLoader","requiredIfPairSetValidatorLoader","requiredIfPairNotSetValidatorLoader","productCodeCustomValidator","ProductCodeCustomValidator","comparerRegistrarConfig","comparerRegistrar","addComparer","comparerRegistrarLoader","defaultComparerLoader","momentComparerLoader","comparerRegistrarProvider","comparerNames","comparers","comparerName","comparer","firstValue","secondValue","compareOperation","defaultComparer","momentComparer","firstValueAsMoment","getMoment","secondValueAsMoment","equalAlways","isSame","diRequireIf","validator","otherModelValue","ngModel","$validators","requireIf","modelValue","$validate","diValidateClick","ngEventHandler","dirtyTrackedElements","formInstance","getFormInstance","$setSubmitted","diValidate","validationNotifier","validationMessageGenerator","ruleViolationSelector","priority","uiElement","unsubscribeErrorWatch","validatedElement","focusElement","notificationElement","elementWithValidationModel","getValidationModel","elementWorksWithValdr","checkElementWorksWithValdr","elementIsBoundToValidationProperty","checkElementIsBoundToValidationProperty","checkCount","addFocusEvents","eventName","checkErrorState","explicitFocusElement","explicitNotificationElement","change","trackElement","addValdrAttributes","forgetElement","currentCheckCount","setErrorState","checkIsInvalid","inEvent","outEvent","getErrorState","showNotification","hideNotification","hasInvalid","warnWhenClean","validationWarnWhenClean","showByCleanDirty","hasError","elementHasFocus","stateHasChanged","errorMessagePromise","getErrorMessage","validationNotificationPosition","propertyDisplayName","propertyCompareDisplayName","validationModelCompareDisplayName","ruleViolations","getRuleViolations","selectedRuleViolation","getMostImportantRuleViolation","generateMessage","requireModelsDisplayName","equalAlwaysValidator","requiredModels","equalIfSelfSetValidator","getTrackedElements","allowCascadingDirty","closest","$$parentForm","foundForm","ngModelController","valdrViolations","trackedElements","splice","dirtyChildForms","dirtyTrackedElementsForForm","allForms","formToDirty","ii","allow","greaterValidator","constraint","minValue","Number","valueAsNumber","idValidator","parseFloat","lessValidator","maxValue","pastOrTodayValidator","isInThePastOrToday","isEmpty","date","startOf","today","positiveWholeNumberValidator","isQuantity","regex","test","_comparerRegistrar","productType","requireIfValidator","requiredIfPairNotSetValidator","requiredIfPairSetValidator","validationRulesStore","validationRules","getValidationRules","highestPriority","ruleViolation","validationRule","ValidationInitialiserProvider","valdrProvider","rules","messageMask","minLength","min","required","pattern","digits","future","past","positiveWholeNumber","equalIfSelfSet","requiredIfPairSet","requiredIfPairNotSet","productCodeCustom","pastOrToday","greater","less","addValidator","validatorServiceName","valdr","applyValidationRules","addConstraints","validationInitialiser","displayName","compareDisplayName","translationArgs","fraction","dataKey","validationNotification","ValidationRulesProxyProvider","entityNames","validationRulesString","parse","validationRulesSetter","validationRulesProxy","setValidationRules","storeKey","existingRules","mergedRules","watcherHelperLoader","watchersTogglerDirectiveLoader","debounceLoader","debounce","interval","watcherHelper","toggleWatchers","enable","digest","$$watchers","$$watchersBackup","$root","$$phase","watchDuringDisable","$$childHead","$$nextSibling","$digest","diWatchersToggler","watchers","suspended","suspendWatchers","resumeWatchers","refreshSuspendedWatchers","suspendScopeWatchers","$id","mockScopeWatch","scopeId","watchExp","objectEquality","prettyPrintExpression","last","exp","eq","iterateScopeMembers","resumeScopeWatchers","operationOnScope","root","pendingChildHeads","currentScope","shift","diClickAwayDirectiveLoader","windowEventSubscriberLoader","moduleName","diClickAway","windowEventSubscriber","diClickAwayIgnore","childElements","subscribeToClickAwayByClass","clickedElement","subscribeToClickAway","jqWindow","newWindowClickFun","target","configModule","endpointsConfig","configureLocationProvider","httpConfig","loggerProxyConfig","exceptionHandlerConfig","notifierConfig","translationModuleConfig","userAuthenticationProxyConfig","stateAuthenticatorConfig","authenticationClientEventSubscriberConfig","validationInitialiserConfig","configureValdrDateValidation","invoiceListConfiguratorConfig","auditListConfiguratorConfig","purchaseOrderListConfiguratorConfig","purchaseOrderViewerLinesConfiguratorConfig","userSecurityProxyConfig","documentAttachmentConfiguratorConfig","relatedDocumentsConfiguratorConfig","grnListConfiguratorConfig","serviceStatusMonitorConfig","userIdleActivityMonitorConfig","forceUrlReloaderConfig","debuggerEnabled","endpointsProvider","webApi","app","webApiAddress","appUrl","$locationProvider","html5Mode","useXDomain","common","version","loggerProxyProvider","exceptionHandlerProvider","appTitle","notifierProvider","$translateProvider","useStaticFilesLoader","suffix","useSanitizeValueStrategy","webApiHttpConfig","webApiHttpProvider","userAuthenticationProxyProvider","stateAuthenticatorProvider","authenticationClientEventHandlerProvider","validationInitialiserProvider","futureAndPastSharedValidatorWithDiMoment","comparison","valueAsDiMoment","invoiceListConfiguratorProvider","purchaseOrderListConfiguratorProvider","auditListConfiguratorProvider","purchaseOrderViewerLinesConfiguratorProvider","documentAttachmentConfigurationProvider","maximumAttachmentSize","disallowedFileExtensions","relatedDocumentsConfiguratorProvider","grnListConfiguratorProvider","serviceStatusMonitorProvider","pollingInterval","sessionIdle","forceUrlReloaderProvider","enableForceUrlReload","forceUrlReloadLimit","stateNames","forceUrlStateNames","run","configureInitialLanguage","stateChangeStartEventHandler","initLoginLogoutEventHandler","readAuthenticationStore","languageHandler","applyLanguage","headerData","stateAuthenticator","forceUrlReloader","stateChangeCounter","forceRefresh","stateChangeCount","fromState","process","authorized","header","authenticationClientEventHandler","configureAppStates","stateHelperProvider","$urlRouterProvider","otherwise","clientLogEnabled","utilities","integrator","configFilePath","impersonateControllerLoader","snippetContext","snippetRegistrar","createContext","registerSnippet","ImpersonateController","u","p","r","navigator","language","languages","userLanguage","bootstrap","strictDi","sharedLoader","sharedServicesLoader","invoicesLoader","accountLoader","purchaseOrdersLoader","usersLoader","auditLoader","summariesLoader","relatedLoader","grnLoader","portalController","forceUrlReloaderLoader","utilitiesLoader","partiesLoader","configureInvoiceStates","accountService","settingsLoader","accountManagementLoader","notificationSettingsLoader","securityQuestionLoader","AccountService","ownStateName","accountManagement","component","AccountManagementComponent","selector","notificationHandler","currentUsername","currentUser","showError","catch","subscription","userProxy","notifiableEvents","getById","user","notificationsSettings","NotificationSettingsComponent","clientEnums","enumTranslator","setNotifications","saveNotifications","setFrequencies","allNotificationFrequencies","allFrequencies","notificationFrequency","translateCollection","eventType","notifiableEvent","eventTypeName","frequencies","frq","saveUserNotifications","showSuccess","SecurityQuestionComponent","securityAnswerTemplate","securityQuestionEditable","editSecurityQuestion","cancelSecurityQuestionEdit","securityAnswerHash","findSelectedQuestion","currentQuestion","accountSettingsLoader","languageSelectorLoader","accountSettings","AccountSettingsComponent","diLanguageDirectiveLoader","languageSelectorControllerLoader","languageHandlerLoader","languageDataLoader","languageData","getLanguages","userSettingsStore","setLanguage","languageToApply","LanguageSelectorController","selectedLanguage","selectableLanguages","languageChanged","diLanguageSelector","auditListsLoader","auditActionButtonsLoader","configureAuditStates","auditActionButtons","AuditActionButtonsComponent","bindings","selectedStates","actionButtonsOptions","onViewAudit","auditListConfiguratorLoader","auditListControllerLoader","auditListDirectiveLoader","AuditListConfiguratorProvider","buttonsConfiguration","visibleButtons","statesRequired","columnDefinitions","eventTypeFilters","dateTimeDefaultFilters","dateTypesOptions","sortOptions","initialEventTypeFilter","getOptionByValue","initialDateTimeFilter","initialDateType","initialSortOption","filterItems","filterItem","getTableConfiguration","getEventTypeFilters","getDateTimeFilters","getDateTypesOptions","getSortableColumns","getButtonsConfiguration","getInitialFilter","getInitialEventTypeFilter","getInitialDateTimeFilter","getInitialDateType","getInitialSortOption","initialFilters","AuditListController","auditProxy","auditListConfigurator","dateFormatter","resultsReachedNotification","summary","selectedFilters","labels","audits","eventTypeOptions","dateOptions","dateTypes","getAudits","viewAudit","goToViewCurrent","orderChanged","eventTypeChanged","dateChanged","dateTypeChanged","onSelectedChanged","clearFilters","setLabels","dateType","dateTimeFilter","eventTypeFilter","sortOption","customDateTimeFilter","toDate","fromDate","getSummary","getAuditDocummentSummaryByDocumentId","documentTypeName","summaryTitle","documentNumber","maxItemsToGet","dateTimeFilters","getAuditsByDocumentId","documentId","dateCreatedTz","toDateTimeWithZone","dateCreated","documentType","changedEventAuditConverter","sortedDataByDate","documentVersion","eventTypeId","audit","getSelectedAudit","isDocumentVersioned","documentChangedEventId","headerId","aid","getCurrentlySelectedAudits","customDate","diAuditList","ForceUrlReloaderProvider","grnRepositoryLoader","grnProxyLoader","grnActionButtonsLoader","grnDetailsLoader","grnFooterLoader","grnHeaderLoader","grnLinesLoader","grnListLoader","configureGrnStates","statusFilter","grnActionButtons","GrnActionButtonsComponent","selectedActions","selectedItemsCount","buttonsSetOneOptions","buttonsSetTwoOptions","onViewGrn","onGoToRelated","grnViewConfiguratorLoader","grnViewControllerLoader","grnDetailsDirectiveLoader","diGrnDetails","grnViewConfiguratorProvider","cellClass","buttonsSetOne","userActions","downloadGoodsReceiptNote","singleAction","viewRelatedDocumentsGoodsReceiptNote","getButtonsSetOneConfiguration","getConfiguration","configuration","GrnViewController","grnViewConfigurator","grnProxy","documentAttributeResolver","documentStateResolver","grn","lines","functionToGetGrn","parameterToGetGrn","selectedAttributes","backToList","goToRelated","loadGrn","setState","clientDocumentState","notLoaded","stateId","getDocumentState","calculateCurrentState","grnFooter","GrnFooterComponent","deliveryNotes","grnHeader","GrnHeaderComponent","grnLines","GrnLinesComponent","grnSearchLoader","grnListConfigurator","grnListController","grnListDirective","GrnListConfiguratorProvider","order","statusFilters","initialStatusFilter","viewGoodsReceiptNote","buttonsSetTwo","getStatusFilters","getButtonsSetTwoConfiguration","getInitialStatusFilter","getFreeformSearchDefaultFilter","dateTypeId","utc","GrnListController","grnRepository","userActionsResolver","vmFiltersListConfigurator","listsParamsStore","loading","grns","statusOptions","initialiseTable","filterGrns","searchGrns","statusChanged","viewGrn","getGrns","searchDefaultFilter","filterOptions","toServerDate","setInitialPaginationDetails","storeParams","attributesFilter","finally","translateDocumentStates","resetAllowedActions","resolveDocumentStates","getCalculatedState","clientEInvoicingStateId","calculatedState","setAttributes","resolveAttributeKeys","isUserSupplier","removeAttribute","documentAttribute","notScheduledForPayment","scheduledForPayment","getSelectedGrn","arrayStates","arrayAttributes","arrayActions","documentStateKey","actions","attribute","resolvedActions","resolveActions","updateStoredParams","newPageNumber","addToSelected","diGrnList","grnSearch","GrnSearchComponent","grnFormatter","defaultFailureReason","reformatServerGrnDetailsForClient","errorReceivingGrn","lastNRows","statusOption","dateTimeFilterOption","errorProcessingGrn","rejectWithErrorNotification","reference","invoiceLinesColumnSettingsLoader","scrollbarResizerLoader","invoiceActionVerifierLoader","invoiceActionVerifier","canBeEdited","canBeSubmitted","invoice","editAction","editInvoice","submitAction","submit","invoiceLinesColumnSettings","settings","getColumnSettings","heading","headerClass","readonlyTemplate","hideable","editable","tiny","isColumn","mandatory","dataType","scrollbarResizer","monitorHorizontalBrowserScrollbar","resizeHorizontalScrollbar","productTableWidth","leftToProductTableWidth","innerWidth","editorLoader","listsLoader","viewerLoader","invoiceRepositoryLoader","unitOfMeasureSelectorLoader","allowancesChargesLoader","documentIssuesLoader","attachmentsLoader","productSelectorLoader","productTypeSelectorLoader","taxCodeSelectorLoader","productLinesLoader","invoiceProxyLoader","productProxyLoader","taxProxyLoader","diAllowanceChargeDirectiveLoader","allowanceChargeControllerLoader","reasonSelectorLoader","AllowanceChargeController","taxProxy","filterFilter","invoiceProxy","currentEditAllowanceCharge","unWatchAllowanceCharge","scopeCache","readonly","allowancesCharges","subscribeToInvoiceDetailsChange","allowanceChargeReasonChanged","allowanceChargeChange","taxCodeChanged","isCharge","addAllowanceCharge","removeAllowanceCharge","filteredItemsCount","toggleEdit","setChangedInvoiceDetails","addOptionsSubscription","invoiceDetails","supplierPartyId","setPartyId","setFilteredItemsCount","filteredAllowancesAndChagers","taxPromise","taxData","taxes","getTaxesByPartyId","taxesResolved","taxesRejected","tax","reasonCode","reasonCodeId","taxCode","taxRate","rate","taxCodeId","taxCategory","onAllowanceChargeChange","sequenceNumber","getMaxSequenceNumber","allowanceCharge","amountPayable","$emit","editing","watchAllowanceCharge","ac","diAllowancesCharges","diAllowanceChargeReasonSelectorDirectiveLoader","allowanceChargeReasonControllerLoader","allowanceChargeReasonRepositoryLoader","allowanceChargeReasonRepository","reasons","getAllowanceChargeReasons","diAllowanceChargeReasonSelector","bindToSecondProperty","getValidationHtml","innerHtml","AllowanceChargeReasonController","setBoundIdFromSelectedItem","setSelectedItemFromBoundId","unknownItem","exist","accessor","attachmentUploader","attachmentConfiguratorProviderLoader","AttachmentUploaderComponent","documentAttachmentConfiguratorProvider","getMaximumAttachmentSize","getDisallowedFileExtensions","attachmentDataId","fileName","download","onUploadStateChanged","documentAttachmentConfigurator","attachmentProxy","fileExtensionValidator","onFileSelected","maxSize","invalidFile","setLanguageFailureKey","changes","setUploadButtonVisibility","selectedFileName","selectedAttachmentDataId","file","showUploadButton","showFileName","isFileExtensionValid","showInfo","onUploadStarted","addSpinner","hideUploadErrorNotification","addAttachmentData","onUploadSuccessful","onUploadFailed","handleUploadStateChange","lineIdentifier","filename","$error","errorKey","uploadErrorNotification","visibility","reconciliationFailureFormatterLoader","businessValidationFailureFormatterLoader","documentIssuesMessageBuilderLoader","businessValidationFailureFormatter","invoiceValidationType","documentIssuesMessageBuilder","reconciliationFailureFormatter","$sce","buildMessage","documentIssuesModel","formattedMessages","buildDocumentIssuesDetails","buildHtml","reconciliationHeaderFailureMessages","reconciliationHeaderFailures","reconciliationResultLine","reconciliationLineFailureMessages","reconciliationLineFailures","businessValidationFailureMessages","businessValidationFailures","failureType","exportSchemaValidationErrorMessages","exportSchemaValidationWarningMessages","transmissionEndpointValidationMessages","getDetailsHtml","getTitleHtml","detailsHtml","getSection","messages","subSections","sectionHtml","totalLength","subSection","getList","level","innerList","isSupplier","reconciliationFailureType","productCode","supplierProductCode","buyerProductCode","snippetsLoader","optionalFieldsLoader","invoiceDetailsLoader","diInvoice","optionalFieldsConfigurationLoader","optionalFieldsConfiguration","clientName","typeGroup","contractTypeCodeSelectorLoader","currencySelectorLoader","locationSelectorLoader","invoiceControllerLoader","invoiceTotalsCalculatorLoader","invoiceDetailsButtonsConfiguratorLoader","contactDetailsLoader","contactSelectorLoader","companiesSelectorLoader","companiesSelectorComponentModule","CompaniesSelectorComponent","billFromCompanies","selectedBillFromCompanyId","selectedBillToCompanyId","onBillFromSelected","onBillToSelected","setBillFrom","setBillTo","billFromSelected","billToSelected","selectedBillFrom","selectedBillTo","billFrom","company","party","billFromId","getAllUserWorkingForRelatedAllocatedToParties","billTo","contactDetailsDirectiveLoader","contactDetailsControllerLoader","ContactDetailsController","diContactDetails","contactSelectorDirectiveLoader","contactSelectorControllerLoader","ContactSelectorController","contacts","contact","subscribeToEvents","reloadContactsForParty","referencedId","contactType","getContactsForParty","invoiceChanged","getPartyContacts","fromInvoice","selectedContact","billContactEmail","fax","billContactFax","billContactId","originalId","originalBillContactId","billContactName","billContactReference","telephoneNumber","billContactTelephone","modified","addFromInvoice","fromInvoiceAdded","dataItem","formatDisplayName","compare1","pick","compare2","newEntity","selectDummyContact","setSelectedContactFromBoundId","selectedContactBelongsToCompany","isValidContact","addModifiedSuffix","output","hasName","contactToUpdate","setBoundIdFromSelectedContact","diContactSelector","contractTypeCodeSeclectorDirectiveLoader","contractTypeCodeControllerLoader","contractTypeCodeRepositoryLoader","contractTypeCodeRepository","codes","getContractTypeCodes","diContractTypeCodeSelector","ContractTypeCodeController","currencySelectorDirectiveLoader","currencySelectorControllerLoader","CurrencySelectorController","diCurrencySelector","InvoiceController","invoiceTotalsCalculator","CLIENT_ENUMS","invoiceDetailsButtonsConfigurator","invoiceRepository","documentDownloader","additionalDocumentReferencesTableConfiguration","attachmentDownloadValidator","modalWindow","identifierFactory","locationProxy","contactProxy","unRegCalculateInvoiceTotals","setUp","constraints","getConstraints","invoiceLine","usingAccounting","invoiceTypeId","invoiceDocumentIssuesDetails","totals","invoiceDetailsChangeSubscriptions","eventsSubscriptions","uploadsInProgress","optionalFieldsSettings","additionalDocumentReferencesConfiguration","countOfAttachments","calculateLineNet","calculateLineTax","events","getEvents","getActions","revealPayeeDetails","revealTaxRepresentativeDetails","showBillFromChangePopup","showBillToChangePopup","showBillToLocationChangePopup","preSaveAction","saveInvoice","submitInvoice","voidInvoice","viewInvoice","viewHistory","getRelatedDocuments","deleteInvoice","viewInvoiceDocumentIssues","getRenderedInvoice","cancelChanges","viewDocumentAttachments","downloadAttachment","downloadAllAttachments","addAdditionalDocumentReference","removeAdditionalDocumentReference","matchSelectedEndpoint","matchPartyId","matchContactId","matchAddressId","customerPartyId","supplier","customer","customerBillToLocationSelected","showWarning","invalidLineNumbers","line","allowanceReason","isNaN","allowanceAmount","lineNumber","chargeReason","chargeAmount","invalidLines","updateModelReadyForServer","testForDocumentIssuesPromise","testForInvoiceDocumentIssues","issuesLevel","goToInvoiceLinesScreen","commitInvoice","commitResolved","commitRejected","invoiceForm","$setPristine","loadInvoice","pending","setClean","notifyEventsSubscribers","documentCreationFailureReason","submitInvoiceByDocumentId","getInvoiceDocumentIssues","downloadRenderedInvoice","allowDownloadSingleFile","additionalDocumentReferences","onInvoiceChanged","beingUploaded","removeSingleLine","without","item1","item2","display","codeDescription","displayValue","party1","party2","_compareItems","contact1","contact2","address1","address2","propertyName1","propertyName2","onContractTypeCodeChanged","onFromCompanyChanged","onBillToChanged","onBillToCountryChanged","onDeliveryCountryChanged","onSupplierLegalCountryChanged","onBillToLocationChanged","onDeliveryLocationChanged","onCurrencyChanged","onToContactChanged","onFromContactChanged","onPrepaidAmountChanged","onInvoiceTypeChanged","onAttachmentUploaded","onAttachmentUploadStarted","onAttachmentUploadFailed","onSupplierCodeChanged","onSupplierEndpointIdentifierChanged","onCustomerCodeChanged","onBuyerEndpointIdentifierChanged","onAccountingCustomerEndpointIdentifierChanged","onSupplierVatNumberChanged","onBuyerVatNumberChanged","onAccountingCustomerVatNumberChanged","onPayeeVatNumberChanged","onTaxRepresentativePartyVatNumberChanged","onPayeePartyIdentifierChanged","onBuyerCustomerLegalCompanyReferenceChanged","onAccountingCustomerLegalCompanyReferenceChanged","onSupplierLegalCompanyReferenceChanged","setDirty","selectedContractTypeCode","contractTypeCodes","contractTypeCode","contractTypeCodeId","contractType","selectedCustomerContact","_onSupplierSelected","notifyInvoiceDetailsChangeSubscribers","onCustomerSelected","countryCode","setCurrencyFromBusinessAddress","customerDeliveryLocationSelected","supplierLegalCountry","setCustomerDetails","locationIdentifier","schemeDescription","showLabel","setCurrency","calculate","selectedId","supplierCode","supplierCodeScheme","supplierCodeSchemeId","supplierEndpointIdentifier","supplierEndpointIdentifierScheme","supplierEndpointIdentifierSchemeId","customerCode","customerCodeScheme","customerCodeSchemeId","buyerEndpointIdentifier","buyerEndpointIdentifierScheme","buyerEndpointIdentifierSchemeId","accountingCustomerEndpointIdentifier","accountingCustomerEndpointIdentifierScheme","accountingCustomerEndpointIdentifierSchemeId","supplierVatNumber","supplierVatNumberScheme","supplierVatNumberSchemeId","customerVatNumber","customerVatNumberScheme","customerVatNumberSchemeId","accouningCustomerVatNumber","accouningCustomerVatNumberScheme","accouningCustomerVatNumberSchemeId","payeeVatNumber","payeeVatNumberScheme","payeeVatNumberSchemeId","taxRepresentativePartyVatNumber","taxRepresentativePartyVatNumberScheme","taxRepresentativePartyVatNumberSchemeId","payeePartyIdentifier","payeePartyIdentifierScheme","payeePartyIdentifierSchemeId","buyerCustomerLegalCompanyReference","buyerCustomerLegalCompanyReferenceScheme","buyerCustomerLegalCompanyReferenceSchemeId","accountingCustomerLegalCompanyReference","accountingCustomerLegalCompanyReferenceScheme","accountingCustomerLegalCompanyReferenceSchemeId","supplierLegalCompanyReference","supplierLegalCompanyReferenceScheme","supplierLegalCompanyReferenceSchemeId","getButtonsOneConfiguration","getButtonsTwoConfiguration","buttonsSetThreeOptions","getButtonsThreeConfiguration","buttonsSetFourOptions","getButtonsFourConfiguration","restrictionLevel","promises","countriesPromise","currenciesPromise","contractTypesPromise","workingForPartiesPromise","getAllPartiesUserCanWorkFor","countries","contractTypes","workingForParties","partiesUserWorksFor","titleEdit","titleNew","functionToGetInvoice","parameterToGetInvoice","accountingCustomer","currentBillTo","invoiceNumber","getByInvoiceNumber","taxPointDateInitialValue","commit","invoiceResolved","invoiceRejected","setIdentifiers","setSupplierLegalCountry","omit","setTaxExemptionReasonField","validateCurrency","setActions","clientEInvoicingState","invalid","setContactDetails","setInvoiceAddressDetails","setDeliveryAddressDetails","businessInvalid","reconciliationFailed","xsltInvalid","setSupplier","togglePayeeDetails","toggleTaxRepresentativeDetails","address","locationId","invoiceLocationId","addressName","addressLine1","addressLine2","town","addressTown","county","addressCounty","postCode","getCountryByCode","countryId","countryName","customerBillToLocationFromInvoice","deliveryLocationId","deliveryAddressName","deliveryAddressLine1","deliveryAddressLine2","deliveryAddressTown","deliveryAddressCounty","deliveryCountry","deliveryPostCode","deliveryLocationIdentifierScheme","deliveryLocationIdentifierSchemeId","deliveryLocationIdentifier","customerDeliveryLocationFromInvoice","supplierContactFromInvoice","contactId","billFromContactId","billFromContactName","billFromContactTelephone","billFromContactFax","billFromContactEmail","billFromContactReference","customerContactFromInvoice","billToContactId","billToContactName","billToContactTelephone","billToContactFax","billToContactEmail","billToContactReference","foundSupplier","payeeName","taxRepresentativePartyName","justFlipped","addAttributeById","saved","hasServerId","taxBreakdown","taxItem","taxExemptionReason","selectedSupplier","currentUserId","allocatedPartiesPromise","partiesResolved","partiesRejected","supplierContactsPromise","setSupplierContacts","getContactIdentifier","setResource","getMatch","getIdentifier","getValid","formatItem","allowDefaultOptions","proxyParam","fromInvoiceIsValid","match","labelModified","selectedResource","formatted","setDefaultOptions","none","getContactMatch","isContactValid","formatContact","resource","formatContactDisplayName","getContacts","forPartyId","setCustomerContacts","setCustomerBillToLocations","getAddresses","getAddressMatch","getAddressIdentifier","isAddressIsValid","formatBusinessAddress","formatAddressDisplayName","types","locationType","Business","Accounting","getContactBook","getAddressBook","setCustomerDeliveryLocations","formatAddress","Delivery","getAddressReference","parameters","addressDetailsIdentifier","delivery","line1","line2","locationIdentifierScheme","locationIdentifierSchemeId","getCountryById","addressDetails","companies","allocatedCompanies","foundCustomer","selectedCustomer","resetCustomerSpecificDetails","contactsPromise","billToLocationsPromise","deliveryLocationsPromise","accountingCustomerVatNumber","accountingCustomerVatNumberScheme","accountingCustomerVatNumberSchemeId","accountingCustomerCustomerLegalCompanyReferenceScheme","accountingCustomerCustomerLegalCompanyReferenceSchemeId","accountingCustomerCustomerLegalCompanyReference","buyerCustomerLegalRegistrationName","accountingCustomerLegalRegistrationName","setForAccounting","setForBuyer","isAccountingCustomer","identifiersPromise","propertyFieldsPromise","getVisiblePropertyFieldsForBuyer","populateCustomPropertyFields","invalidDraft","createdDateTime","createdByUserId","documentSource","websiteUser","taxCurrencyId","lastDocumentSource","lastModifiedDateTime","lastModifiedByUserId","totalLineAmounts","beforeTax","totalExcludingTax","totalTax","totalIncludingTax","updateSupplierCode","updateCustomerCode","updateAccountingCustomer","updateAddressDetails","updateContactDetails","netAmount","taxAmount","calculateTaxForLine","mapTaxExemptionReason","updateAccountingAddress","updateAccountingIdentifiers","clearAccountingDetails","accountingCustomerPartyId","accountingCustomerName","accountingCustomerLocationId","accountingCustomerAddressName","accountingCustomerAddressLine1","accountingCustomerAddressLine2","accountingCustomerAddressTown","accountingCustomerAddressCounty","accountingCustomerPostCode","accountingCustomerCountry","accountingCustomerLocationIdentifier","accountingCustomerCode","accountingCustomerCodeScheme","accountingCustomerCodeSchemeId","accountingCustomerLegalName","updateAccountingCustomerCode","updateAccountingCustomerEndpoint","updateAccountingCustomerVatNumber","selectedSupplierContact","supplierLegalCountryId","setDefault","enabledCurrency","propertyFields","invoicePropertyKeyValueArray","pairs","invoiceLinesPropertyKeyValueArray","customFieldSetting","fieldSetting","entityPropertyClientName","entityTypeClientName","labelValue","charAt","fieldIsVisible","hidden","entityTypeName","setVisibleWhenPopulated","propertyNameAndValuePairs","propertyClientName","getPropertyValue","lineKeyValueArray","invoiceLineProperty","keyValuePair","propertyNameAndValue","setFormDirty","notificationObject","updateCurrentState","notSaved","attachmentDataIds","allowDownloadMultipleFiles","downloadZipFile","forSupplier","forBuyer","forOthers","forAccounting","getEnabledSchemes","schemes","identifiers","setSupplierCodes","supplierEndpoints","schemeOptions1","defaultOptions1","getDefaultOptions","createIdentifiersForClient","setIdentifier","supplierEndpointIdentifierDescription","supplierVatNumbers","taxReference","schemeOptions2","defaultOptions2","schemeOptions3","default","supplierLegalCompanyReferences","justCustomerCodes","partyCodes","groupBy","customerCodes","buyerEndpoints","schemeOptions4","defaultOptions3","buyerEndpointIdentifierDescription","buyerVatNumbers","schemeOptions5","defaultOptions4","schemeOptions6","defaultOptions5","deliveryLocationIdentifiers","schemeOptions7","buyerCustomerLegalCompanyReferences","justAccountingCustomerCodes","accountingCustomerCodes","accountingCustomerEndpoints","schemeOptions11","defaultOptions11","accountingCustomerEndpointIdentifierDescription","accountingCustomerVatNumbers","schemeOptions12","defaultOptions12","schemeOptions13","accountingCustomerLegalCompanyReferences","payeeVatNumbers","payeePartyIdentifiers","taxRepresentativePartyVatNumbers","schemeOptions","arrayName","validationPropertyname","allowBlank","setNewItem","fromServer","resolveSchemeCodeFromId","description","justSupplierCodes","supplierCodes","addToListIfNotExists","addIfNotExists","temp","validateIdentifier","existing","single","InvoiceDetailsButtonsConfiguratorProvider","attributesRequired","cancelInvoice","showIssues","downloadInvoice","viewHistoryInvoice","viewRelatedDocumentsInvoice","buttonsSetThree","anyAttribute","buttonsSetFour","taxDetails","calculateAllowancesCharges","payableAmount","prepaidAmount","totalLines","totalCharges","totalAllowances","getTaxDataFromLines","linesTaxBreakdown","calculateLinesPerTaxCategory","taxableAmount","recalculateTax","allowancesChargesTaxBreakdown","calculateAllowancesChargesPerTaxCode","combineBreakTaxBreakdowns","calculateLinePrice","unitPrice","quantity","sanitizePriceBaseQuantity","priceBaseQuantity","lineTaxCategory","acTaxCategory","netAmountChanged","roundedAllowanceChargeNetAmount","roundedAllowanceChargeTotalAmount","amount","sumExact","sumRounded","sumExactRounded","NaN","isValidLine","performCalculation","formula","reduce","price","taxRatio","totalPrice","taxCatTotals","groupedByTaxCategory","groupByTaxCategory","taxCategoryDetails","breakdownForTaxCat","taxCatDetails","allowanceChargeBreakdown","roundedNetAmount","sanitized","locationSelectorComponentModule","LocationSelectorComponent","preDeterminedLocation","onLocationSelected","selectedPartyLocation","partyLocations","onLocationChanged","getPartyLocations","getLocationsForParty","locationsData","preDeterminedFound","getPredeterminedLocationFromList","setSelectedLocation","partyLocation","postalCode","selectedLocation","invoiceFormatter","proxyErrorInterceptor","getDetailsById","getDetailsByAuditId","getDetailsByInvoiceNumber","flagInDisputeInvoice","flagPaidInvoice","flagAsScheduledForPayment","getInvoices","releaseInvoice","releaseInvoices","getAllowedActions","reformatServerInvoiceForClient","errorReceivingInvoice","reformatServerInvoiceDetailsForClient","buyerPartyId","errordata","reformattedInvoice","reformatClientInvoiceForServer","errorProcessingInvoice","inDispute","isPaid","scheduled","ids","releaseResolved","releaseRejected","errorMsg","handleError","getIndex","displaySuccessNotification","isScheduled","responseText","displayWarningNotification","keyName","keyValue","findIndex","invoiceListDirectiveLoader","diInvoiceList","invoiceListControllerLoader","invoiceListConfiguratorLoader","InvoiceListConfiguratorProvider","unknown","sentreceived","sendFailed","overdue","paymentSent","paymentReceived","reconciliationInvalid","exportFailed","cancelled","startDispute","endDispute","markAsPaidBuyer","markAsNotPaidBuyer","markAsPaidSupplier","markAsNotPaidSupplier","markAsScheduledForPayment","markAsNotScheduledForPayment","release","InvoiceListController","invoiceListConfigurator","documentProxy","invoices","userCanEditInvoices","filterInvoices","searchInvoices","goToInvoice","submitInvoices","changeInvoicesDisputeFlag","voidInvoices","changeInvoicePaidStates","flagAsScheduledForPayments","deleteInvoices","initialiseInvoicesGrid","userHasWriteRight","translateDocumentData","calculated","invoiceType","selectedInvoice","getSelectedInvoice","invoiceCanBeEdited","getCurrentlySelectedInvoices","validPaymentDueDate","reloadDocumentState","reloadDocumentActions","todaysDate","paymentDueDate","paymentDueDateTime","setHours","changeInvoiceDisputeFlag","disputeReason","updateResolvedState","changeInvoicePaidState","documentIds","foundInvoice","getDocumentClientStateId","resolveDocumentState","diProductLinesDirectiveLoader","productLinesControllerLoader","columnVisibilityToggleLoader","itemListenerControllerLoader","columnVisibilityToggleControllerLoader","columnVisibilityToggleDirectiveLoader","ColumnVisibilityToggleController","manageColumnVisibility","buttonName","$broadcast","diColumnVisibilityToggle","bindToIsVisibleProperty","bindToIsHiddenProperty","bindToIsColumnProperty","bindToMandatory","ItemListenerController","ProductLinesController","unitOfMeasureRepository","currentEditLine","lineForms","tableFields","expanded","productTypes","unitsOfMeasure","originCountryId","languageKeyParent","overrideLanguageKey","manageColumnsLanguageKey","lineItemsLanguageKey","addNewLineLanguageKey","addLine","removeLine","selectLine","populateOptionalFields","getExpandedLines","getCollapsedLines","collapseAllExpandedLines","expandAllLines","getLineCount","getExpandedLineCount","getCollapsedLineCount","getVisibleColumnsCount","getVisibleColumns","getInvisibleColumns","getEditableColumns","getHideableColumns","toggleColumnVisibility","getUnitOfmeasureLabel","lineFormCreated","productCodeChanged","productStandardCodeChanged","productTypeChanged","productUnitOfMeasureChanged","onOriginCountryChanged","lineChanged","unWatchLineMonetaryChanges","unWatchLineChanges","getProductTypes","getUnitsOfMeasure","originCountry","originCountryName","optionalFields","newLine","unitOfMeasureId","getNewId","lastIndex","findLastIndex","lastLine","reseedLineNumbers","refreshLines","lineId","getLineForm","lineIdStr","isNew","deSelectCurrentEditLine","watchLineMonetaryChanges","watchLineChanges","oldLine","quantityUnit","equals","col","product","standardProductCode","standardCode","standardProductCodeScheme","standardCodeScheme","eClassCode","productId","itemName","itemDescription","unitOfMeasure","priceBaseQuantityUnit","onLineChange","productTypesResolved","productTypesRejected","unitFound","unit","setCurrencyId","optionalField","fieldExists","diProductLines","lineInit","productProxy","getProductsByPartyId","successfullyReceivedProducts","failedToReceiveProducts","diProductSelectorDirectiveLoader","productSelectorControllerLoader","ProductSelectorController","propertyControl","changedInvoiceDetails","productPromise","productsResolved","productsRejected","uniqueList","uniq","diProductSelector","validationHtml","diProductTypeSelectorDirectiveLoader","productTypeSelectorControllerLoader","ProductTypeSelectorController","productTypePromise","diProductTypeSelector","servicesLoader","invoiceAdditionalDocumentReferencesConfigurationLoader","invoiceAdditionalDocumentReferencesConfiguration","diTaxCodeSelectorDirectiveLoader","taxCodeSelectorControllerLoader","TaxCodeSelectorController","setItemsDisplayText","diTaxCodeSelector","successfullyReceivedTaxes","errorReceivingTaxes","unitOfMeasureSelectorDirectiveLoader","unitOfMeasureControllerLoader","unitOfMeasureRepositoryLoader","units","commonCode","diUnitOfMeasureSelector","UnitOfMeasureController","unitOfMeasurePromise","invoiceDetailsDirectiveLoader","diInvoiceDetails","invoiceViewerControllerLoader","invoiceViewDetailsButtonsConfiguratorLoader","InvoiceViewDetailsButtonsConfigurator","getButtonsSetThreeConfiguration","InvoiceViewerController","invoiceViewDetailsButtonsConfigurator","schemeTranslationPrefix","auditSummary","invoiceCountry","submitting","supplierId","supplierAddress","buyerAddress","deliveryAddress","supplierContactDetails","customerContactDetails","hasMainActions","goToEdit","goToHistory","getCountriesSuccess","loadAuditSummary","getAuditRecordForDocument","auditResolved","auditRejected","setSelectedCountry","setTaxExemptionReason","setMainActionsFlag","setCurrencies","setParties","setContacts","setLegal","setAddresses","setInvoiceType","addAttribute","supplierParty","partyName","supplierName","partyCode","partyIdentifierScheme","vatNumber","vatNumberScheme","endpointId","endpointIdentifierScheme","checkObjectSectionIsVisible","customerParty","customerName","buyerVatNumber","buyerVatNumberScheme","deliveryParty","deliveryPartyName","deliveryPartyCode","payeeParty","regId","regIdScheme","taxRepresentativeParty","supplierContact","Name","Telephone","Fax","Email","Reference","customerContact","supplierLegal","registrationName","supplierLegalRegistrationName","companyReference","cityName","supplierLegalTown","resolveCountryNameByCode","customerLegal","payeeLegal","payeeLegalCompanyReference","supplierAddressName","AddressLine1","supplierAddressLine1","AddressLine2","supplierAddressLine2","AddressTown","supplierAddressTown","AddressCounty","supplierAddressCounty","PostCode","supplierPostCode","Country","supplierCountry","LocationIdentifier","supplierLocationIdentifier","showName","customerAddress","LocationIdentifierScheme","additionalIgnored","ignored","union","invoiceCanBeSubmitted","taxCurrency","aId","invoiceDocumentIssuesResolved","invoiceDocumentIssuesRejected","contactsLoader","locationsLoader","listLoader","discoveryLoader","partyCodesLoader","load","configurePartiesStates","locationSortOption","contactSortOption","forPartyName","singleDetails","discoverPartiesListComponentLoader","discoverPartiesListConfigurationServiceLoader","discoveredPartyDetailsComponentLoader","DiscoverPartiesListComponent","DiscoverPartiesListConfigurationService","DiscoveredPartyDetailsComponent","_columns","_tableOptions","getTableOptions","headerCellClass","copy","Promise","onTradingPartyIdChanged","discoverPartiesListConfigurationService","selectedItemChanged","resetSelection","tableOptionsPromise","withDelay","delayStarted","searchNoDelay","parties","allParties","discoverPotentialTradingRelationshipParties","addressBookEntry","buyers","accountingCustomerForThisBuyer","selectedBuyer","buyer","accountingParties","tradingPartyId","partyListComponentLoader","partyListTableConfigurationServiceLoader","partySelectorComponentLoader","allocatedToPartyListComponentLoader","workingForPartyListComponentLoader","PartyListComponent","PartyListTableConfigurationService","PartySelectorComponent","AllocatedToPartyListComponent","WorkingForPartyListComponent","_pageTitleOptions","getSearchResults","addEnabled","pageTitleOptions","relatedParties","getPartyManagementSearchResults","partyManagementSearchResults","addNewLanguageKey","addLanguageKey","partyType","partyListTableConfigurationService","tradingRelationshipProxy","onSelection","viewParty","onSortByChanged","searchPartyList","partyManagementTable","dataTableOptions","selectedParty","getTableHeaders","actionColumns","getActionColumns","sortByOptions","getSortOptions","getAddConfiguration","authorizedConfig","addConfiguration","authorizedPageTitleConfig","previousValue","forPartySelected","splitSortBy","sortedByArray","reverse","populateDataTableOptions","reloadPage","detailsParams","pageParams","modalTitle","saveButtonText","showPopup","createTradingRelationship","res","partiesCollection","onSelected","selectPartyById","getWorkingForPartyManagementSearchResults","partyCodesComponentLoader","partyCodeComponentLoader","PartyCodesComponent","taxReferences","addNewCode","updatePartyCode","deletePartyCode","addNewPartyCode","updateCode","getAssociatedPartiesTradingRelationshipsByParty","relatedPartyDetails","purchaseOrderRepositoryLoader","purchaseOrderLinesColumnSettingsLoader","purchaseOrderProxyLoader","additionalDocumentReferencesConfigurator","configurePurchaseOrdersStates","purchaseOrderListDirectiveLoader","diPurchaseOrderList","purchaseOrderListFiltersControllerLoader","purchaseOrderListControllerLoader","purchaseOrderListConfiguratorLoader","PurchaseOrderListConfiguratorProvider","viewPurchaseOrder","flip","markAsShipped","markAsNotShipped","markAsInvoiced","markAsDelivered","markAsNotDelivered","cancelPurchaseOrder","downloadPurchaseOrder","downloadAsCsv","fallbackOnSecondaryContext","viewRelatedDocumentsPurchaseOrder","accepted","shipped","partiallyInvoiced","fullyInvoiced","delivered","closed","PurchaseOrderListController","purchaseOrderListConfigurator","purchaseOrderRepository","purchaseOrders","primary","secondary","filterPurchaseOrders","searchPurchaseOrders","flipOrders","acceptOrders","rejectOrders","flagAsShippedOrders","flagAsDeliveredOrders","cancelOrders","closeOrders","getCurrentlySelectedPurchaseOrders","downloadRenderedPurchaseOrder","downloadPurchaseOrdersAsCsv","markOrdersAsInvoiced","getPurchaseOrders","orderType","selectedPoIds","pluck","selectedPoId","flipOrder","purchaseOrderNumber","viewAction","goToViewInvoice","goToEditInvoice","acceptOrder","rejectOrder","flagAsShipped","flagAsDelivered","cancelOrder","closePurchaseOrder","closeOrder","getSelectedPurchaseOrder","purchaseOrder","toDownload","getCurrentlyDisplayedPurchaseOrders","purchaseOrderIds","downloadPurchaseOrdersCsv","toMarkAsInvoiced","documentIdsToMarkInvoiced","markPurchaseOrdersAsInvoiced","updatedItem","documentState","populateStatesActionsAndAttributes","resetSelectedSecondaryItems","PurchaseOrderListFiltersController","availableDateTimeFilters","availableSortableColumns","getAvailableFilters","getAvailableDateTimeFilters","getAvailableSortableColumns","purchaseOrderAdditionalDocumentReferencesConfiguration","purchaseOrderProxy","purchaseOrderFormatter","getByPurchaseOrderNumber","commitPurchaseOrder","submitPurchaseOrderByDocumentId","acceptPurchaseOrder","rejectPurchaseOrder","flipPurchaseOrder","reformatServerPurchaseOrderForClient","errorReceivingPurchaseOrder","reformattedPurchaseOrder","reformatClientPurchaseOrderForServer","errorProcessingPurchaseOrder","purchaseOrderLinesColumnSettings","columnDefinition","isShipped","isDelivered","purchaseOrderDetailsDirectiveLoader","dateRangeDisplayLoader","diDateRangeDisplayDirectiveLoader","diDateRangeDisplay","startDate","endDate","diPurchaseOrderDetails","purchaseOrderViewerLinesConfiguratorLoader","purchaseOrderViewerControllerLoader","PurchaseOrderViewerController","diPrompt","purchaseOrderViewerLinesConfigurator","functionToGetPurchaseOrder","parameterToGetPurchaseOrder","canFlip","allowanceCharges","billFromContact","billToContact","deliveryContact","originatorCustomer","accountingCustomerAddress","getRenderedOrder","downloadPurchaseOrderAsCsv","allowances","charges","loadPurchaseOrder","setAllowancesCharges","setOrderType","orderTypeId","poState","supplierPartyIdentifierScheme","endpointIdenfitierScheme","customerPartyIdentifierScheme","deliveryPartyIdentifierScheme","accountingParty","accountingCustomerPartyIdentifierScheme","originatorParty","originatorCustomerPartyName","originatorCustomerPartyReference","originatorCustomerPartyIdentifierScheme","deliveryContactName","deliveryContactTelephone","deliveryContactEmail","deliveryContactFax","deliveryContactReference","accountingCustomerContact","accountingCustomerContactReference","originatorCustomerContact","originatorCustomerContactName","originatorCustomerContactTelephone","originatorCustomerContactEmail","originatorCustomerContactFax","accountingLegal","companyReferenceScheme","accountingCustomerLegalTown","accountingCustomerLegalCountry","buyerLegal","buyerLegalRegistrationName","buyerLegalCompanyReference","buyerLegalCompanyReferenceScheme","buyerLegalTown","buyerLegalCountry","supplierDetailsName","supplierDetailsAddressLine1","supplierDetailsAddressLine2","supplierDetailsAddressTown","supplierDetailsAddressCounty","supplierDetailsPostCode","supplierDetailsCountry","invoiceAddressName","invoiceAddressLine1","invoiceAddressLine2","invoiceAddressTown","invoiceAddressCounty","invoiceAddressPostCode","invoiceAddressCountry","invoiceLocationIdentifier","deliveryAddressPostCode","deliveryAddressCountry","accountingCustomerAddressPostCode","accountingCustomerAddressCountry","partition","PurchaseOrderViewerLinesConfiguratorProvider","viewHistoryPurchaseOrder","relatedDocumentsLoader","configureRelatedDocumentsStates","relatedListDirectiveLoader","diRelatedList","relatedListControllerLoader","relatedListConfiguratorLoader","relatedListConfigurator","RelatedListController","documentTypeResolver","documents","viewRelatedDocument","viewCurrentDocument","documentsLoaded","documentLinkClicked","documentLinkDoubleClicked","setDetails","selectedDocument","getSelectedDocument","goToDocument","relatedDocuments","typeKey","getTypeKeyById","getCurrentlySelectedDocuments","goodsReceiptNote","relatedDocumentsControllerLoader","relatedDocumentsDirectiveLoader","relatedDocumentsConfiguratorLoader","RelatedDocumentsConfiguratorProvider","RelatedDocumentsController","$filter","configurator","showControl","relatedResponse","loadDocuments","linkClicked","linkDoubleClicked","formatDocumentData","currencyFilter","formattedTotal","resolveDocumentType","onDocumentLinkClicked","onDocumentLinkDoubleClicked","onDocumentsLoaded","diRelatedDocuments","buttonStateResolverLoader","documentAttributeResolverLoader","fileExtensionValidatorLoader","documentTypeResolverLoader","actionButtonsLoader","addressViewDetailsLoader","contactViewDetailsLoader","dateSelectorLoader","additionalDocumentReferencesLoader","documentStateSelectorLoader","documentStateDisplayLoader","legalViewDetailsLoader","partyViewDetailsLoader","addressEditDetailsLoader","setFocusLoader","actionButtonsControllerLoader","diActionButtonsDirectiveLoader","statefulButtonLoader","ActionButtonsController","buttonStateResolver","useActions","buttonClick","buttonPreSaveInvoiceClick","buttonPreCreateUserClick","getFromConfiguration","deregisterWatchListItemsCount","deregisterWatchUserActions","deregisterContextAttributes","deregisterWatchContextStates","loadConfiguration","button","primaryActionsContext","secondaryActionsContext","primaryStatesContext","secondaryStatesContext","primaryAttributesContext","secondaryAttributesContext","canSetupButtons","trySetPrimaryAndSecondaryContexts","canSetupBasedOnActions","contextStates","canSetupBasedOnStates","contextAttributes","setStates","setButtonState","displayControl","actionsLoaded","waitForData","statesLoaded","waitForStates","visibleName","enabledName","listItemsCount","getListItemsCount","context","selectContext","isEnabledForActions","isEnabledForStates","requireAllStates","isAttributeEnabled","isEnabled","denyStyle","primaryContext","secondaryContext","contextObject","eventActionName","toTitleCase","formToSubmit","handleClick","txt","substr","configurationProperty","actionName","saveInvoiceEnabled","createUserEnabled","diActionButtons","buttonEditClick","buttonEditBigClick","buttonViewClick","buttonRefreshClick","buttonFlipClick","buttonFlipLargeClick","buttonSubmitClick","buttonSubmitSmallClick","buttonRenderClick","buttonDownloadCsvClick","buttonEnableUserClick","buttonDisableUserClick","buttonUnlockUserClick","buttonLockUserClick","buttonAcceptClick","buttonRejectClick","buttonDisputeClick","buttonNotDisputeClick","buttonCancelInvoiceClick","buttonCancelOrderClick","buttonShippedClick","buttonNotShippedClick","buttonDeliveredClick","buttonNotDeliveredClick","buttonPaidClick","buttonNotPaidClick","buttonScheduledClick","buttonNotScheduledClick","buttonSaveUserClick","buttonSaveInvoiceClick","buttonSaveInvoiceSmallClick","buttonDeleteInvoiceClick","buttonDeleteSmallClick","buttonViewHistoryClick","buttonCloseClick","buttonIssuesClick","buttonRelatedClick","buttonAttachmentsClick","buttonReleaseClick","buttonResetPasswordClick","buttonClearFiltersClick","buttonInvoicedClick","buttonCreateUserClick","buttonDeleteUserClick","buttonGeneratePasswordClick","statefulButtonControllerLoader","statefulButtonDirectiveLoader","StatefulButtonController","showDisabled","getImageProperties","getStatefulConfiguration","keys","setProperties","getActionTooltip","setDisabledButtonState","diStatefulButton","disabledImage","AdditionalDocumentReferencesComponent","downloadAll","onUploaded","AdditionalDocumentReferencesController","$onInit","calculateCtrlFlags","$onChanges","onChanges","hasAttachment","onAttachmentUploadStateChanged","onPropertyChanged","isShown","hasAttachments","additionalDocumentReference","addressDetailsComponentLoader","addressEditDetailsDirectiveLoader","addressEditDetailsControllerLoader","addressValidationPropertyNameProviderLoader","AddressDetailsComponent","allowedTypes","readOnly","showIsUpdatable","isAddressUpdateableOnly","addressValidationPropertyNameProvider","onAddressTypeChanged","onUpdatableChanged","onLocationIdentifierChanged","updateOptions","showIdentifier","setValidation","showLocationIdentifier","showFinancialIdentifier","locationTypeTranslated","isUpdatable","validationProperties","getValidationPropertyNames","showAddressDetails","i1","i2","AddressEditDetailsController","addressType","matchLocationIdentifier","diAddressEditDetails","addressPostCode","addressViewDetailsDirectiveLoader","diAddressViewDetails","blockId","contactDetailsComponentLoader","ContactDetailsComponent","typeOptions","onContactTypeChanged","contactViewDetailsDirectiveLoader","diContactViewDetails","diDateSelectorDirectiveLoader","diDateSelectorControllerLoader","DiDateSelectorController","CUSTOM","customOption","customItem","showDateTypes","selectNonCustomDate","selectCustomDate","selectDateType","validSelectedDates","areSelectedDatesValid","setDateTypes","setDateRanges","translateQueryParamsToDropDown","defaultType","defaultRange","getCustomOption","toClientDate","onRangeChanged","newRange","customDates","onChangedRange","onChangedType","bindToDateTypeObject","bindToDateTypeProperty","oldItem","itemWatchCallback","bindToDateRangeObject","bindToDateRangeProperty","itemType","diDateSelector","documentStateDisplayDirectiveLoader","documentStateDisplayControllerLoader","DocumentStateDisplayController","diDocumentStateDisplay","documentStateResolverLoader","documentStateSelectorComponentLoader","enumsKeyResolver","getLanguageKey","docType","enums","getEnumsForCurrentRole","legalViewDetailsDirectiveLoader","diLegalViewDetails","partyViewDetailsDirectiveLoader","diPartyViewDetails","setFocusDirectiveLoader","SetFocus","$attrs","setFocusOn","diSetFocus","diSetFocusParent","parentNode","partyProxyLoader","userProxyLoader","auditProxyLoader","documentProxyLoader","formattersLoader","attachmentProxyLoader","fileTransferLoader","attachmentDownloadValidatorLoader","userActionsResolverLoader","vmListConfiguratorLoader","notificationHandlerLoader","documentAttachmentConfiguratorLoader","tradingRelationshipProxyLoader","proxyErrorInterceptorService","TradingRelationshipProxy","ProxyErrorInterceptor","attachmentDownloadValidatorFactoryLoader","foundInvalidFileExtension","fileUploader","fileDownloader","addAttachments","uploadAttachment","getAttachmentsForDocument","removeAttachment","upload","f","attachments","urlParameters","fileReference","mimeType","queryData","queryParams","documentAttachmentId","DEFAULT_ERROR_MSG","translateEventTypes","handleRejectedError","versionId","contextArray","containsAny","itemCount","statesDenied","requiredStates","checkAnyExist","sup","sub","resolvedArray","resolveAttributeKey","attributeId","exists","findFirstKeyWhere","k","typeId","fileExtensionValidatorFactoryLoader","fileExtension","lastIndexOf","invalidFileExtensions","disallowedExtension","invalidFileExtension","fileUploaderLoader","documentDownloaderLoader","httpUpload","validateAuthenticationTicketAndUpload","invoiceFormatterLoader","purchaseOrderFormatterLoader","grnFormatterLoader","dateFormatterLoader","clientDate","dateAsMoment","serverDate","zone","tz","guess","serverObject","reformattedGrn","mapClientToServer","mapServerToClient","invert","headerDatesPropertiesKeys","lineDatesPropertiesKeys","additionalDocumentReferencesDatesPropertiesKeys","reformatObject","paymentTerms","paymentTermsId","invoiceHeaderId","paymentTermsVersion","clientState","reformattedAllowanceCharge","reformattedTaxItem","details","reformattedLine","reformatAdditionalDocumentReferences","reformattedInvoiceAllowancesCharges","reformattedInvoiceLines","taxBreakdownItem","reformattedTaxBreakdownItem","objectToReformat","transformKeys","transformFn","outputObject","transformed","reformatAndTransform","hasKeysToTransform","hasTransformFunction","propertyKey","dateFormattingFunc","additionalReference","po","reformattedPo","formatMessage","popupTitle","resolveTitle","ref","resolveIdentifier","getPartyCountriesByType","getAllPartiesUserCanBeAllocatedTo","getAllRelatedPartyCountries","getPartyWithAccountingCustomers","getPartyCodesForParty","handleRejectError","requestProperties","filteredIds","workingForIds","parentId","parentPartyId","partyCodeModel","statusText","_authenticationResult","_translator","isMultiArray","getDetailsModelById","getUsers","getRoles","getRoleRights","getAllRights","saveUser","createUser","getUserRights","generatePassword","vmFiltersListConfiguratorLoader","listConfigurator","setSelectedFiltersOrDefaultToInitial","summarySelectorControllerLoader","summaryTypesLoader","rangeSelectorLoader","tabularSummaryLoader","singleValueSummaryLoader","chartSummaryLoader","chartSummaryController","chartSummaryDirective","chartConfigurationMapper","chartDataMapper","chartLayoutMapper","chartConfigMapper","chartFontMapper","chartTitleMapper","mapConfig","chartConfiguration","staticPlot","scrollZoom","getChartConfiguration","summaryData","documentTypeId","configureAnnotations","yAxis","orientation","yAxisAnnotation","xref","yref","x","xanchor","y","yanchor","yaxis","showarrow","font","titlefont","barWatermark","watermarkFont","yValues","flatten","barAnnotations","yValue","trace","currencySymbol","ann","annotations","mapData","clientStateEnum","getStatesEnum","hover","mapHoverConfiguration","statusesToShow","groupedByClientState","tableRow","clientStateId","tracesObj","currenciesMapper","currencyYValue","groupedByCurrency","totalAmount","formatCurrency","getCurrencySymbol","traceOptions","configureTrace","chartConfigurationParent","hoverinfo","mapFont","family","mapLayout","xAxis","legend","mapDimensionConfiguration","mapMarginConfiguration","barmode","hovermode","showLegend","showlegend","mapLegend","mapAxis","xaxis","traceOrder","traceorder","left","l","padding","pad","mapRangeConfiguration","autoRange","autorange","fixedRange","fixedrange","mapTicksConfiguration","ticks","showLabels","showticklabels","tickmode","numberOfTicks","nticks","startPosition","tick0","step","dtick","atValues","tickvals","textAtValues","ticktext","tickfont","axisConfigurationObject","range","ChartSummaryController","summaryProxy","noData","loadData","buttonValueChanged","clickTitle","summaryConfiguration","dataLoadFailed","summaryParameters","rangeParameter","getSpinnerElement","getSummaryData","summaryType","summaryDataReceived","summaryDataFailed","extendScopeSummaryConfiguration","chart","updateChartConfiguration","removeSpinnerIfRequired","buttonValue","yAxisWithTitle","titleConfiguration","paramsCreator","chartSummary","mapTitle","titleFont","rangeSelectorControllerLoader","rangeSelectorDirectiveLoader","summaryOptionsStoreLoader","RangeSelectorController","summaryOptionsStore","buttonClicked","loadInitialValue","storageItem","getSummaryOptions","defaultItem","buttonConfiguration","isDefault","setSummaryOptions","diRangeSelector","storagePrefix","summaryOptions","summaryPreferences","newPreference","preferences","singleValueSummaryControllerLoader","singleValueSummaryDirectiveLoader","SingleValueSummaryController","clickThroughDataMapper","clickThrough","loadValueClasses","getClickableSummary","intialise","clickThroughState","valueDisplayClasses","diSingleValueSummary","SummarySelectorController","rightsRepository","displayBuyerSummary","Buyer","displaySupplierSummary","Supplier","summaryTypes","countOrdersRejected","countOrdersToAccept","countOrdersToInvoice","countInvoicesUnpaid","countInvoicesMismatched","countInvoicesOverdue","countInvoicesInDispute","listInvoicesOverdue","listOrdersLatestReceived","listOrdersHighestValue","listPartiesInvoiceValue","listInvoicesToPayGroupedByStatus","listOrdersValueGroupedByStatus","tabularSummaryControllerLoader","tabularSummaryDirectiveLoader","TabularSummaryController","rowClicked","tableConfiguration","tableColumns","row","diTabularSummary","buyerSummaryLoader","supplierSummaryLoader","summaryProxyLoader","buyerSummaryDirectiveLoader","buyerSummaryControllerLoader","BuyerSummaryController","countOrdersRejectedConfiguration","countInvoicesMismatchedConfiguration","countInvoicesOverdueConfiguration","countInvoicesDisputedConfiguration","listInvoicesOverdueConfiguration","subtract","rangeOptions","listSuppliersInvoiceValueConfiguration","chartSummaryConfiguration","diBuyerSummary","dataSettings","clickThroughData","paramsObject","keyValuePairs","itemMapping","supplierSummaryDirectiveLoader","supplierSummaryControllerLoader","SupplierSummaryController","countOrdersToAcceptConfiguration","countOrdersToInvoiceConfiguration","countInvoicesUnpaidConfiguration","listOrdersLatestConfiguration","listOrdersHighestValueConfiguration","loadCount","diSupplierSummary","userDetailsLoader","usersBottomButtonsLoader","usersMainButtonsLoader","userDetailsHeaderLoader","usersActionsButtonsLoader","userEditRestrictionsLoader","userBottomButtons","UserBottomButtonsComponent","bottomButtonsOptions","createButtonsOptions","lock","unlock","delete","userDetailsHeader","UserDetailsHeaderComponent","allRoles","selectedRoleId","allWorkingFor","isSupervisor","allocatedPartyName","letterRangeFilter","unallocated","selectedRestriction","allRights","onRoleChanged","onWorkingChanged","onSearchRangeChanged","filterParties","setRights","roleRights","selectedRoleRights","role","friendlyName","rightFoundInRole","rightFoundInUser","userDetailsComponentLoader","userDetailsConfigurationServiceLoader","UserDetailsComponent","UserDetailsConfigurationService","baseConfiguration","deleteUser","createButtons","roles","visibleRoles","userDetailsConfigurationService","clipboard","isDirty","isReadOnly","workingIdsArray","allAllocatedTo","mainButtonsOptions","fromLetter","toLetter","loadUserData","loadUserResolved","filterByNameAndAllocation","initialiseRoles","getMainButtonsConfiguration","getCreateButtonsConfiguration","getRolesConfiguration","getRoleDescription","getRoleName","roleId","roleName","getCurrentUserRoleName","isBuyer","isAssigned","promptDeleteUserMessage","getTrueFalseLabel","enabledLabel","locked","lockedLabel","setAllocated","setLetters","assignedCount","matched","filterByRange","firstLetter","resetActions","relatedIds","setRoles","related","assigned","allocated","setRoleRights","roleChanged","removeAction","addAction","workingForSelected","selectedRoles","selectedWorkingFor","workingParties","allocatedParties","creatingUser","showPassword","generatedPassword","generatingPassword","created","copyToClipboard","copyText","promptOnCancel","createdUser","selectedAllocatedFor","actionId","flitered","userEditRestrictions","UserEditRestrictionsComponent","restrictions","userListComponentModule","userListConfigurationServiceLoader","UserListComponent","UserListConfigurationService","_actionColumns","userListConfigurationService","editUser","canDeleteUser","users","userMainButtons","UserMainButtonsComponent","userActionButtons","UsersActionButtonsComponent","integratorLoader","configureAttachmentStates","integratorDetailsProxyServiceModule","integratorDetailsComponentModule","IntegratorDetailsProxyService","integratorDetailsComponent","_dHttp","_config","integratorDetailsProxy","_integratorDetailsProxy","clickonceConfig","installUrl","integratorSetupGuideUrl","getClickonceConfig","clickonceInstallUrl","clickonceFilename","dropdownSelectorLoader","headerLoader","imageLoader","navigationLoader","styleConstantsLoader","tooltipLoader","userLoader","clientEnumsLoader","serviceStatusMonitorLoader","identifierLoader","enumTranslatorLoader","enumsKeyResolverLoader","integration","websiteFlip","beingProcessed","onHold","beingSent","schemaInvalid","released","documentSourceWebsite","documentSourceErp","notShipped","notDelivered","notInvoiced","notPaymentSent","notPaymentReceived","notOverdue","notInDispute","purchaseOrderFlipped","purchaseOrderImported","invoiceImported","documentScheduled","invoiceExported","invoiceCreated","legalOriginalCreated","goodsReceiptNoteImported","eInvoicingStateChanged","documentAttributeAdded","documentAttributeRemoved","documentMismatch","documentMatched","documentAttachmentAdded","documentAttachmentUpdated","documentAttachmentRemoved","invoiceImportFailed","purchaseOrderImportFailed","goodsReceiptNoteImportFailed","invoicePaid","invoiceCancelled","purchaseOrderCancelled","documentAccepted","invoiceDisputed","overReceivedGoods","invoiceOverdue","invoiceDisputeCompleted","relationshipVerificationFailed","unknownFileFormat","invoiceSent","purchaseOrderSent","invoiceReceived","purchaseOrderReceived","documentBusinessInvalid","invoiceUnPaid","documentRejected","schemaValidationFailed","purchaseOrderChanged","markAsImported","manuallyMarkAsImported","buyerPartyAutoProfiled","customs","blanketOrder","spotOrder","leaseOrder","rushOrder","repairOrder","callOffOrder","consignmentOrder","sampleOrder","swapOrder","purchaseOrderChangeRequest","purchaseOrderResponse","hireOrder","sparePartsOrder","commercialInvoice","correctedInvoice","factoredInvoice","never","immediate","every10Minutes","every30Minutes","hourly","daily","duplicateDocument","documentSchemaInvalid","nonExistentParty","noTradingRelationship","noOriginatorFileFormatLink","mappingFailure","versionNumberConflict","administrator","buyerSupervisor","buyerClerk","supplierSupervisor","supplierClerk","buyerAuditor","serviceState","maintenance","up","down","viewHistoryGoodsReceiptNote","viewAttachements","viewUser","viewRelatedDocuments","Unknown","enumObject","enumValue","enumLanguageKey","idPropertyName","textPropertyName","newKey","dropdownSelectorDirectiveLoader","dropdownSelectorControllerLoader","DropdownSelectorController","diDropdownSelector","isMandatory","noSearch","setAttribute","headerDataLoader","headerControllerLoader","HeaderController","logOut","identifierFactoryLoader","edit","codeDesc","buttonLabels","formatSchemesForClient","dropdownName","numericalCode","sortOrder","addNew","addNewItem","imagesLoader","images","view","downloadCsv","plus","calendar","getSvgImage","logo","getSrcImage","icoArrowDown","individual","support","faq","verticalOptions","removeOptionalItem","paid","notPaid","dispute","notDispute","notScheduled","uploadFile","clearFilter","issues","validationIssues","history","attachment","updated","void","dashboard","hideColumnDetails","showAsColumns","showAsColumnsDetails","partyManagement","myPartyManagement","navigationControllerLoader","diNavigationDirectiveLoader","navigationWarningLoader","navigationWarningControllerLoader","goBackLoader","controllers","back","NavigationWarningController","noWarnStates","diNavigationWarning","removeStateListener","stateChanged","onbeforeunload","navigationWarningMessage","removeLeavingPageWarningBox","navigationWarningUnauthenticated","navigationWarningAccepted","$pristine","$submitted","$dirty","prevent","navigationWarningTitle","NavigationController","partyFeatureEnabledService","showCreateOptions","toggleCreateOptions","closeCreateOptions","canManageUsers","canAccessIntegrator","canCreateDocuments","getStateParamsFromStorage","getPartiesStateParams","viewPartyManagement","getPartyFeatureEnabled","listView","getMyPartiesStateParams","compat","diNavigation","activateMenuExpand","main","sidebar","elements","add","serviceStatusMonitorControllerLoader","serviceStatusMonitorDirectiveLoader","serverProxyLoader","serverProxy","getCurrentServerState","ServiceStatusMonitorController","$interval","serviceStatusMonitor","getPollingInterval","monitorService","relace","ServiceStatusMonitorProvider","colourClassesLoader","colourClasses","offWhite","negativeButton","tooltipDirectiveLoader","diTooltip","authenticationClientEventHandlerLoader","userSetingsStorageLoader","userRightsLoader","removeSessionDataFromStorage","listsParamsToRemove","storageKeys","getLanguage","partyFeatureEnabledLoader","sessionPreferencesLoader","PartyFeatureEnabledProxyService","featureId","listsParamsStoreLoader","listViewParams","composite","composeStoragePrefix","currentPreferences","storedPreferences","paramsNamesToRemove","initial","welcomeComponentModule","welcomeComponent","$stateParams","onPasswordSet","firstTimeLogin","setUpToken","showForgotPassword","decodeURIComponent","removeAllPopups","setAuthenticationValidationRules","reloadWelcomePage","allowModals","authenticationRules","directiveName","registerSnippetInContext","objFunction","ignoreObj","newValue"],"mappings":";;;;;;;8CAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,6BAA6B,EAAE;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA,4BAA4B,2BAA2B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;;;ACpUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,MAAM;AACrB,eAAe,OAAO;AACtB,iBAAiB,EAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,aAAa;AAC5B,eAAe,EAAE;AACjB,iBAAiB,EAAE;AACnB;AACA;AACA,qBAAqB,QAAQ,OAAO,SAAS,EAAE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,aAAa;AAC5B,eAAe,EAAE;AACjB,iBAAiB,OAAO;AACxB;AACA;AACA,qBAAqB,QAAQ,OAAO,SAAS,EAAE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,kBAAkB;AACzE,4CAA4C,yBAAyB;AACrE,4CAA4C,0CAA0C;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,iBAAiB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,sCAAsC,WAAW;AACjD,yCAAyC,qBAAqB;AAC9D;AACA;AACA,mDAAmD,wBAAwB;AAC3E,sDAAsD,wBAAwB;AAC9E,0CAA0C,uBAAuB;AACjE;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,gBAAgB;AACpD;AACA;AACA,gDAAgD,gCAAgC;AAChF;AACA;AACA;AACA;AACA,0CAA0C,oBAAoB;AAC9D,wDAAwD,8BAA8B;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,iBAAiB;AAC1D,2CAA2C,yBAAyB;AACpE;AACA,+BAA+B,WAAW;AAC1C,6BAA6B,YAAY;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,cAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,UAAU;AACxC,4BAA4B,WAAW;AACvC;AACA;AACA;AACA;AACA,qDAAqD,+BAA+B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qBAAqB;AAC9D,uCAAuC,0BAA0B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB,eAAe,MAAM;AACrB,iBAAiB,MAAM;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,MAAM;AACrB,iBAAiB,MAAM;AACvB;AACA;AACA,mCAAmC,uCAAuC;AAC1E,kCAAkC,kBAAkB;AACpD,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB,iBAAiB,MAAM;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB,iBAAiB,MAAM;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,uC;;;;;;;AC1dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,aAAa,EAAE;AACzC;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,eAAe;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,wDAAwD;AAC7G;AACA,CAAC;AACD;AACA;AACA,8DAA8D,eAAe;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,sBAAsB;AAC7E;AACA,CAAC;AACD;AACA;AACA,yDAAyD,eAAe;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,eAAe,aAAa,wBAAwB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iBAAiB,EAAE;AAC7C,+BAA+B,kBAAkB,EAAE;AACnD;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA,sBAAsB,eAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,kBAAkB;AACrE;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,sBAAsB;AAC7E;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,kBAAkB;AACrE;AACA,CAAC;AACD;AACA,oC;;;;;;;AC3QA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,wBAAwB,oCAAoC,wBAAwB;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA,iEAAiE,eAAe;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,mBAAmB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,wBAAwB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C,iDAAiD,uBAAuB;AACxE;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,gBAAgB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C;AACA,qCAAqC,kBAAkB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,qBAAqB;AACrB,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA,QAAQ,uBAAuB;AAC/B;AACA;AACA;AACA,wDAAwD,mBAAmB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,+BAA+B;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,6BAA6B;AAC7B;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,6BAA6B;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,6BAA6B;AAC7B;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,4BAA4B,uBAAuB;AACnD,iCAAiC,6BAA6B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,+BAA+B;AAC5E;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,qBAAqB;AACrB;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,6BAA6B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,qBAAqB;AACrB;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,oBAAoB,uBAAuB;AAC3C,yBAAyB,6BAA6B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA,8CAA8C,2BAA2B;AACzE,kDAAkD,6BAA6B;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,wBAAwB,EAAE;AACpD;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA,+C;;;;;;;ACz9BA;AACA;AACA;AACA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA,sC;;;;;;;;;;;ACRA;AACA;AACA,kCAAO,YAAY;AACf;;AAEAA,WAAOC,GAAP,CAAWC,OAAX,CAAmBC,IAAnB,GAA0B;AACzBC,iBAASA,OADgB;AAE5BC,yBAAiBA,eAFW;AAGtBC,mBAAWA,SAHW;AAItBC,gBAAQA,MAJc;AAKtBC,2BAAmBA,iBALG;AAMtBC,kBAAUA,QANY;AAOtBC,yBAAiBA,eAPK;AAQtBC,kBAAUA,QARY;AAStBC,0BAAkBA,gBATI;AAUtBC,kBAAUA,QAVY;AAWtBC,qBAAaA,WAXS;AAYtBC,kBAAUA,QAZY;AAatBC,kBAAUA,QAbY;AActBC,uBAAeA,aAdO;AAetBC,sBAAcA,YAfQ;AAgBtBC,gBAAQA,MAhBc;AAiBtBC,iBAASA,OAjBa;AAkBtBC,oBAAYA,UAlBU;AAmBtBC,qBAAaA,WAnBS;AAoBtBC,mBAAWA,SApBW;AAqBtBC,gBAAQA,MArBc;AAsBtBC,oCAA4BA,0BAtBN;AAuBtBC,qBAAaA,WAvBS;AAwBtBC,kBAAUA;AAxBY,KAA1B;;AA2BA,WAAO3B,OAAOC,GAAP,CAAWC,OAAX,CAAmBC,IAA1B;;AAEA,aAASC,OAAT,CAAiBwB,GAAjB,EAAsB;AAClB,eAAO,CAACpB,kBAAkBoB,GAAlB,CAAD,IAA2BC,MAAMzB,OAAN,CAAcwB,GAAd,CAAlC;AACH;;AAED,aAASvB,eAAT,CAAyBuB,GAAzB,EAA8B;AAC7B,eAAOxB,QAAQwB,GAAR,KAAgBA,IAAIE,MAAJ,GAAa,CAApC;AACA;;AAED,aAASxB,SAAT,CAAmBsB,GAAnB,EAAwB;AACpB,eAAO,CAACpB,kBAAkBoB,GAAlB,CAAD,IAA2B,OAAOA,GAAP,KAAe,SAAjD;AACH;;AAED,aAASrB,MAAT,CAAgBqB,GAAhB,EAAqB;AACjB,eAAOA,QAAQ,IAAf;AACH;;AAED,aAASpB,iBAAT,CAA2BoB,GAA3B,EAAgC;AAC5B,eAAOrB,OAAOqB,GAAP,KAAed,YAAYc,GAAZ,CAAtB;AACH;;AAED,aAASnB,QAAT,CAAkBmB,GAAlB,EAAuB;AACnB,eAAO,CAACpB,kBAAkBoB,GAAlB,CAAD,IAA2B,OAAOA,GAAP,KAAe,QAAjD;AACH;;AAED,aAASlB,eAAT,CAAyBkB,GAAzB,EAA8B;AAC1B,eAAOnB,SAASmB,GAAT,KAAiBG,KAAKC,KAAL,CAAWJ,GAAX,KAAmBA,GAA3C;AACH;;AAED,aAASjB,QAAT,CAAkBiB,GAAlB,EAAuB;AACnB,eAAO,CAACpB,kBAAkBoB,GAAlB,CAAD,IAA2B,OAAOA,GAAP,KAAe,QAAjD;AACH;;AAED,aAAShB,gBAAT,CAA0BgB,GAA1B,EAA+B;AAC3B,eAAOjB,SAASiB,GAAT,KAAiBA,QAAQ,EAAhC;AACH;;AAED,aAASf,QAAT,CAAkBe,GAAlB,EAAuB;AACnB,eAAO,CAACpB,kBAAkBoB,GAAlB,CAAD,IAA2B,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAjD;AACH;;AAED,aAASd,WAAT,CAAqBc,GAArB,EAA0B;AACtB,eAAOA,QAAQ,KAAK,CAApB;AACH;;AAED,aAASb,QAAT,CAAkBa,GAAlB,EAAuB;AACnB,eAAOZ,SAASY,GAAT,KAAiBK,eAAeL,GAAf,MAAwB,iBAAhD;AACH;;AAED,aAASZ,QAAT,CAAkBY,GAAlB,EAAuB;AACnB,eAAO,CAACpB,kBAAkBoB,GAAlB,CAAD,IAA2B,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAjD;AACH;;AAED,aAASX,aAAT,CAAuBW,GAAvB,EAA4B;AACxB,YAAI,CAACZ,SAASY,GAAT,CAAL,EAAoB;AAChB,mBAAO,KAAP,CADgB,CACH;AAChB;;AAED,YAAIM,IAAJ;;AAEA,aAAKA,IAAL,IAAaN,GAAb,EAAkB;AACd,mBAAO,KAAP;AACH;;AAED,eAAO,IAAP;AACH;;AAED,aAASV,YAAT,CAAsBU,GAAtB,EAA2B;AACvB,eAAO,CAACpB,kBAAkBoB,GAAlB,CAAD,IAA2BZ,SAASY,GAAT,CAA3B,IAA4C,CAACX,cAAcW,GAAd,CAApD;AACH;;AAED,aAAST,MAAT,CAAgBS,GAAhB,EAAqB;AACjB,eAAOZ,SAASY,GAAT,KAAiBK,eAAeL,GAAf,MAAwB,eAAhD;AACH;;AAED,aAASR,OAAT,CAAiBQ,GAAjB,EAAsB;AAClB,eAAOZ,SAASY,GAAT,MACFK,eAAeL,GAAf,MAAwB,gBAAxB,IAA4CA,eAAeO,KADzD,CAAP;AAEH;;AAED,aAASd,UAAT,CAAoBO,GAApB,EAAyB;AACrB,eAAO,CAACpB,kBAAkBoB,GAAlB,CAAD,IAA2B,OAAOA,GAAP,KAAe,UAAjD;AACH;;AAED,aAASN,WAAT,CAAqBM,GAArB,EAA0B;AACtB,eAAOA,QAAQ,IAAR,IACA,OAAOA,GAAP,KAAe,SADf,IAEA,OAAOA,GAAP,KAAe,QAFf,IAGA,OAAOA,GAAP,KAAe,QAHf,IAIA,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAJf,IAI4B;AAC5B,eAAOA,GAAP,KAAe,WALtB;AAMH;;AAED,aAASK,cAAT,CAAwBG,CAAxB,EAA2B;AACvB,eAAOC,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,CAA/B,CAAP;AACH;;AAED,aAASb,SAAT,GAAqB;AACjB,aAAK,IAAIkB,OAAO,CAAhB,EAAmBA,OAAOC,UAAUZ,MAApC,EAA4C,EAAEW,IAA9C,EAAoD;AAChD,gBAAI3B,YAAY4B,UAAUD,IAAV,CAAZ,CAAJ,EAAkC;AAC9B,uBAAO,KAAP;AACH;AACJ;;AAED,eAAO,IAAP;AACH;;AAED;;;;;;;AAOA,aAASjB,MAAT,CAAgBmB,IAAhB,EAAsBC,MAAtB,EAA8B;AAC1B,YAAI,CAAC5B,SAAS4B,MAAT,CAAL,EAAuB;AACnB;AACH;;AAED,aAAK,IAAIC,IAAT,IAAiBD,MAAjB,EAAyB;AACrB,gBAAIA,OAAOE,cAAP,CAAsBD,IAAtB,CAAJ,EAAiC;AAChC,oBAAIzC,QAAQwC,OAAOC,IAAP,CAAR,CAAJ,EAA2B;AAC1B,wBAAIzC,QAAQuC,KAAKE,IAAL,CAAR,MAAwB,KAA5B,EAAkC;AACjCF,6BAAKE,IAAL,IAAa,EAAb;AACA;AACKF,yBAAKE,IAAL,EAAWE,IAAX,CAAgBH,OAAOC,IAAP,CAAhB;AACH,iBALJ,MAKU;AACHF,yBAAKE,IAAL,IAAaD,OAAOC,IAAP,CAAb;AACH;AACJ;AACJ;AACJ;;AAED,aAASpB,0BAAT,CAAoCG,GAApC,EAAyCoB,iBAAzC,EAA4D;AAC3D,YAAI,CAAChC,SAASY,GAAT,CAAL,EAAoB;AACnB,mBAAO,KAAP;AACA;;AAED,YAAI,CAACvB,gBAAgB2C,iBAAhB,CAAL,EAAyC;AACxCA,gCAAoB,EAApB;AACA;;AAED,aAAK,IAAIC,QAAT,IAAqBrB,GAArB,EAA0B;AACzB,gBAAIA,IAAIkB,cAAJ,CAAmBG,QAAnB,KACH,CAACzC,kBAAkBoB,IAAIqB,QAAJ,CAAlB,CADE,IAEHrB,IAAIqB,QAAJ,MAAkB,EAFf,IAGH,CAACC,SAASF,iBAAT,EAA4BC,QAA5B,CAHF,EAGyC;AACxC,uBAAO,IAAP;AACA;AACD;;AAED,eAAO,KAAP;;AAEA,iBAASC,QAAT,CAAkBC,WAAlB,EAA+BC,MAA/B,EAAuC;AACtC,mBAAQD,YAAYE,OAAZ,CAAoBD,MAApB,IAA8B,CAAC,CAAvC;AACA;AACD;;AAED,aAAS1B,WAAT,CAAqBQ,IAArB,EAA2BoB,SAA3B,EAAsC;AAClCA,oBAAYA,aAAa,GAAzB;AACA,eAAOpB,KAAKqB,OAAL,CAAa,QAAb,EACH,UAAUC,MAAV,EAAkBC,GAAlB,EAAuB;AACnB,mBAAO,CAACA,MAAMH,SAAN,GAAkB,EAAnB,IAAyBE,OAAOE,WAAP,EAAhC;AACH,SAHE,CAAP;AAIH;;AAED,aAAS/B,QAAT,GAAoB;AAChB,aAAK,IAAIc,OAAO,CAAhB,EAAmBA,OAAOC,UAAUZ,MAApC,EAA4C,EAAEW,IAA9C,EAAoD;AAChD,gBAAIjC,kBAAkBkC,UAAUD,IAAV,CAAlB,CAAJ,EAAwC;AACpC,uBAAO,KAAP;AACH;AACJ;;AAED,eAAO,IAAP;AACH;AACJ,CA9MD;AAAA,qG;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,kCAAkC;AACxE,sCAAsC,kCAAkC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,mCAAmC;AACzE,sCAAsC,qBAAqB;AAC3D;AACA;AACA;AACA,0BAA0B,0CAA0C,EAAE;AACtE;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,yBAAyB,kBAAkB,EAAE,EAAE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW,UAAU,EAAE;AAC9D,iCAAiC,WAAW,UAAU,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,0CAA0C,EAAE;AACvH;AACA;AACA,aAAa;AACb;AACA,gSAAgS,2CAA2C,EAAE;AAC7U;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,+BAA+B;AAC/B,iDAAiD,6EAA6E;AAC9H;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,0EAA0E,EAAE;AAClH;AACA;AACA;AACA,2BAA2B,yBAAyB,EAAE;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,gCAAgC;AAC5C;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA,WAAW,aAAa;AACxB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oC;;;;;;;;;ACxQA;AACA;AACA,iCAAO,CACH,uBADG,CAAP,kCAGA,UAAUtC,IAAV,EAAgB;AACZ;;AAEAwD,2BAAuB,UAAvB,EAAmCxD,IAAnC,EAAyC,MAAzC;;AAEA;AACAH,WAAOC,GAAP,CAAW2D,SAAX,CAAqBC,KAArB,GAA6B;AACzBC,qBAAaA,WADY;AAEzBC,kBAAUA,QAFe;AAGzBC,iBAASA,OAHgB;A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;AAOA,aAASN,iBAAT,CAA2BlC,MAA3B,EAAmCuC,KAAnC,EAA0CC,SAA1C,EAAqD;AACjDP,wBAAgBjC,MAAhB,EAAwBuC,KAAxB,EAA+BC,SAA/B;AACApB,gBAAQpB,MAAR,EAAgBuC,MAAMrD,MAAN,IAAgB,CAAhC,EAAmCsD,YAAY,oBAA/C;AACH;;AAED;;;;;;AAMA,aAASL,OAAT,CAAiBnC,MAAjB,EAAyB0C,EAAzB,EAA6BN,OAA7B,EAAsC;AAClC,YAAIC,MAAMnB,YAAYlB,MAAZ,EAAoBoC,OAApB,CAAV;;AAEAC,YAAIM,cAAJ,GAAqBD,EAArB;;AAEA,cAAML,GAAN;AACH;AACJ,CApQD;AAAA,qG;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,yCAAyC,iCAAiC;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uC;;;;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yC;;;;;;;;;;;;;;;;;;;;AClDA,gCAA8B;AAC9B,oCAAsD;AAkCtD;IAOI;QACI,IAAI,CAAC,aAAa,GAAG;YAC1B,YAAY,EAAE,IAAI;YAClB,WAAW,EAAE,KAAK;YAClB,YAAY,EAAE,IAAI;YAClB,WAAW,EAAE,IAAI;YACjB,cAAc,EAAE,GAAG;YACnB,kBAAkB,EAAE,CAAC;YACrB,oBAAoB,EAAE,CAAC;YACd,eAAe,EAAE,CAAC;YAClB,OAAO,EAAE,EAAE;YACX,aAAa,EAAE,EAAE;SAC1B;IACF,CAAC;IAjBS,2DAAY,GAAnB;QACI,MAAM,CAAC,EAAE,CAAC,IAAI,CAA2B,IAAI,CAAC,aAAa,CAAC,CAAC;IACjE,CAAC;IALiB,oCAAoC;QADzD,iBAAU,EAAE;;OACS,oCAAoC,CAwBzD;IAAD,2CAAC;CAAA;AAxBqB,oFAAoC;;;;;;;;ACnC1D;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,QAAQ;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,YAAY;AAClD;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,qBAAqB;AACpC;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,6EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,wBAAwB;AAC5E;AACA,0BAA0B,cAAc,EAAE;AAC1C;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,0BAA0B,wDAAwD,EAAE;AACpF;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,0BAA0B,uCAAuC,EAAE;AACnE;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL,oDAAoD,0DAA0D;AAC9G;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,6CAA6C,2BAA2B;AACxE;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iCAAiC;AAC9E;AACA;AACA,CAAC;AACD;AACA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,oBAAoB;AACjE;AACA;AACA;AACA;AACA;AACA,qBAAqB,gBAAgB;AACrC;AACA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA,mCAAmC;AACnC,6CAA6C,yCAAyC;AACtF;AACA;AACA;AACA,mDAAmD,oBAAoB;AACvE;AACA,0BAA0B,aAAa,EAAE;AACzC;AACA;AACA,KAAK;AACL,wDAAwD,8DAA8D;AACtH;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,oBAAoB;AACjE;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iCAAiC;AAC9E;AACA;AACA,CAAC;AACD;AACA,uC;;;;;;;ACjVA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gBAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,+BAA+B;AAC3E;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;;;;;;ACtHA;IAUI,6BAAY,QAAQ,EAAE,YAAY,EAAE,OAAO,EAAE,KAAK;QAC9C,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;QACjC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAEnB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE/C,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QAC7C,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QAC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GA;AACA;;AAEA;AACA,gC;;;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,wBAAwB;AAC/D,wCAAwC,yBAAyB;AACjE;AACA;AACA;AACA;AACA,8DAA8D,0BAA0B,EAAE;AAC1F,gEAAgE,2BAA2B,EAAE;AAC7F,KAAK;AACL;AACA;AACA,4C;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yEAAyE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qFAAqF;AACtF,0D;;;;;;;AChCA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,yDAAyD,EAAE;AACrF;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA,oC;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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AAyC;AACrCc,mBAAGC,IAAH,CAAQH,QAAQZ,CAAR,EAAWgB,IAAX,EAAR;AACH;;AAEDJ,sBAAUH,SAASI,IAAT,CAAcF,iBAAd,CAAV;AACH;;AAED,eAAOG,EAAP;AACH;AACJ,CA9BD;AAAA,qG;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yCAAyC,GAAG,oBAAoB;AAChE;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,EAAE;AACb,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,QAAQ,YAAY;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA,sEAAsE;;AAEtE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB;AACA,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA,kCAAkC;AAClC;;AAEA,eAAe,eAAe;AAC9B;AACA,mCAAmC;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,YAAY,QAAQ;AACpB;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gBAAgB;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gBAAgB;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gBAAgB;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,4CAA4C,yCAAyC;;;AAGrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc,SAAS;AACvB;AACA;AACA;AACA,mDAAmD;;AAEnD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC,6BAA6B,EAAE;AACpE,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,wCAAwC;;AAExC;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,iBAAiB;AACvC;AACA;AACA;AACA;AACA,O;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C,4BAA4B;AAC5B;AACA;;AAEA;;AAEA;AACA;AACA;AACA,sD;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,S;AACA;AACA;;AAEA;AACA,mCAAmC,MAAM;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA,yCAAyC;AACzC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF;AACzF;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA,aAAa,cAAc;AAC3B,eAAe,4DAA4D;AAC3E,aAAa,cAAc;AAC3B,0BAA0B,sDAAsD;AAChF,aAAa,SAAS;AACtB,MAAM,gEAAgE;AACtE,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,6CAA6C,iBAAiB;AAC9D;AACA,cAAc,cAAc;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B;AACA,aAAa,OAAO;AACpB;AACA,cAAc,cAAc;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B;AACA,aAAa,OAAO;AACpB,cAAc,wBAAwB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,qBAAqB,kCAAkC,uBAAuB;AAC9E,oCAAoC,sBAAsB,EAAE;AAC5D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,OAAO,iBAAiB;AACxB,cAAc,wBAAwB;AACtC;AACA;AACA;AACA,uDAAuD,iBAAiB;AACxE;AACA;;AAEA;;AAEA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,uDAAuD;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,SAAS;AACjB,QAAQ,yBAAyB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,GAAG;AACjB,cAAc,SAAS;AACvB,cAAc,eAAe,KAAK;AAClC;AACA,eAAe,QAAQ;AACvB;AACA;AACA,kBAAkB,WAAW;AAC7B;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,2DAA2D,yDAAyD;AACpH;AACA;AACA,cAAc,OAAO;AACrB;AACA,cAAc,OAAO;AACrB;AACA,cAAc,OAAO;AACrB;AACA,cAAc,OAAO;AACrB;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA,mBAAmB,WAAW,EAAE,gCAAgC;;AAEhE;AACA;AACA;AACA,SAAS,SAAS;AAClB,SAAS,oBAAoB;AAC7B;AACA;AACA;AACA,UAAU,8BAA8B;AACxC;AACA,YAAY;AACZ;AACA,UAAU,OAAO,YAAY;AAC7B,+CAA+C,2BAA2B,WAAW,OAAO,YAAY,OAAO;AAC/G,iDAAiD,6BAA6B,WAAW,OAAO,YAAY,OAAO;AACnH;AACA;AACA,8DAA8D;AAC9D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+EAA+E;AAC/E;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;;AAEA;AACA,yEAAyE,wEAAwE;AACjJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,GAAG;AAC7B,0BAA0B,GAAG;AAC7B;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,GAAG;AAC7B;AACA,IAAI;AACJ,eAAe;AACf;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;;AAEf;;AAEA;AACA,iCAAiC,yCAAyC;AAC1E,iCAAiC,iCAAiC;;AAElE;AACA;AACA;AACA;;AAEA;AACA,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA,eAAe,0BAA0B;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA,eAAe,0BAA0B;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,GAAG,aAAa,oBAAoB;AAC9D;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;;AAEA,8BAA8B;AAC9B,8DAA8D,4DAA4D,EAAE;AAC5H;;AAEA,aAAa,YAAY;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA,QAAQ,iFAAiF;AACzF;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA,4BAA4B,0BAA0B,EAAE;AACxD,4BAA4B,8BAA8B,EAAE;AAC5D,6BAA6B,8BAA8B,EAAE;AAC7D,wBAAwB,6DAA6D,EAAE;AACvF;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,WAAW,kDAAkD;AAC7D;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,OAAO;AAClB;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,sCAAsC,UAAU,uBAAuB,EAAE;;AAEzE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,6DAA6D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,aAAa;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kDAAkD;AAClE;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B,sEAAsE,SAAS,oBAAoB,IAAI,EAAE,QAAQ;AAC9I,+BAA+B,wEAAwE,SAAS,oBAAoB,IAAI,EAAE,QAAQ;;AAElJ,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,yBAAyB,kEAAkE,EAAE;AAC7F;AACA,KAAK;AACL;AACA;AACA,6BAA6B,0BAA0B,EAAE;AACzD,yBAAyB,iFAAiF,EAAE;AAC5G;AACA,KAAK;AACL;AACA,6BAA6B,oBAAoB,EAAE;AACnD,6BAA6B,gCAAgC,EAAE;AAC/D,yBAAyB,sCAAsC,EAAE;AACjE;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP,yBAAyB,qDAAqD,EAAE;AAChF,+BAA+B,wEAAwE,EAAE;AACzG,sBAAsB,EAAE;AACxB,uBAAuB,EAAE;AACzB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ,uDAAuD;AAC5E,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kDAAkD;AAClE;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,eAAe,WAAW;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAsC;AAC/D;AACA;AACA,aAAa,OAAO;AACpB,aAAa,gBAAgB;AAC7B,aAAa,sCAAsC;AACnD,aAAa,gBAAgB;AAC7B;AACA,iBAAiB,sCAAsC;AACvD;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,oBAAoB,cAAc;AAClC;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,wBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,eAAe,cAAc;AAC7B;AACA;AACA;AACA,QAAQ;AACR;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,aAAa;AACjD;AACA,sBAAsB,gCAAgC;AACtD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8CAA8C,iCAAiC,WAAW,SAAS,EAAE;AACrG,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6EAA6E,qBAAqB;AAClG;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B,wDAAwD,cAAc;AACtE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS,6DAA6D;AACtE,SAAS;AACT;AACA;AACA;AACA,sBAAsB,8BAA8B;AACpD,oDAAoD,kBAAkB,EAAE;AACxE,mDAAmD,kDAAkD,EAAE;AACvG;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,uBAAuB,yBAAyB,GAAG;AACtF;AACA,yFAAyF,eAAe,EAAE;AAC1G;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,UAAU,oFAAoF,EAAE;;AAEzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,6BAA6B;AAC7B;;AAEA;AACA;AACA,mDAAmD,gBAAgB;AACnE,KAAK;AACL;AACA;AACA;AACA,sBAAsB,oBAAoB,0BAA0B;AACpE;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA,qBAAqB;AACrB;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,uBAAuB;AACvB;AACA;AACA,uBAAuB;AACvB;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0FAA0F,EAAE;;AAE5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4DAA4D;AAC5D;AACA;;AAEA;AACA;AACA,qCAAqC,IAAI;AACzC;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,MAAM;AACN;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,MAAM;AACN;AACA;AACA,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,qDAAqD,gBAAgB;AACrE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,MAAM;AACN;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,kDAAkD,gCAAgC,EAAE;AACpF;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA,kDAAkD,sCAAsC,EAAE;AAC1F;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;;AAEA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,UAAU;AACV;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA,iDAAiD;;AAEjD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,kDAAkD;AAC5D;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,iBAAiB,WAAW;AAC5B,iBAAiB,QAAQ;AACzB,iBAAiB,QAAQ;AACzB;AACA,6BAA6B,cAAc;AAC3C;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,oBAAoB;;AAE3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qCAAqC,2BAA2B;;AAEhE;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,gCAAgC;AAChC;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sDAAsD,YAAY;AAClE;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA,iEAAiE;AACjE,KAAK;;AAEL;AACA;AACA,6CAA6C;AAC7C;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,4BAA4B,kBAAkB;AAC9C,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C,iCAAiC;AAC/E;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B,kBAAkB,OAAO;AACzB;AACA,iBAAiB,OAAO,eAAe;AACvC;AACA,uBAAuB,OAAO;AAC9B;AACA,oBAAoB,OAAO;AAC3B;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA,kBAAkB,OAAO;AACzB;AACA,sBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,MAAM;AACN;AACA;AACA;AACA,0BAA0B,+BAA+B;AACzD,0BAA0B;AAC1B;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA,aAAa,OAAO;AACpB,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,UAAU,WAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,EAAE;AAClD;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,UAAU,WAAW;AAC/B;AACA;AACA;AACA;AACA,2CAA2C,EAAE;AAC7C;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,2CAA2C,EAAE;AAC7C;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,gDAAgD,cAAc;AAC3E;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC,mBAAmB,eAAe;AAClC,mBAAmB,qBAAqB,EAAE,eAAe;AACzD;AACA,sBAAsB,YAAY,EAAE,WAAW;AAC/C,iCAAiC,YAAY,EAAE,WAAW;AAC1D;AACA;AACA,aAAa,QAAQ;AACrB;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,wBAAwB,SAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,yBAAyB;AAClE;AACA,wBAAwB,WAAW;AACnC;AACA;AACA,kBAAkB;AAClB,MAAM;AACN;AACA,yBAAyB,aAAa;AACtC;AACA;AACA,eAAe,4FAA4F;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA,wBAAwB;AACxB,yBAAyB;AACzB,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO,8BAA8B,uBAAuB;AAC5E;AACA,gBAAgB,OAAO;AACvB;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,OAAO;AACxB,iBAAiB,MAAM;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA,kCAAkC,SAAS,GAAG,cAAc;AAC5D;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,gDAAgD,KAAK;AACrD,+CAA+C,KAAK,cAAc;AAClE,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;;AAEA;AACA;;AAEA,mBAAmB,0BAA0B,iBAAiB,EAAE;;AAEhE;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,0D;AACA;AACA,QAAQ;AACR;AACA;AACA,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,0D;AACA;AACA,QAAQ;AACR;;AAEA,iBAAiB,QAAQ;AACzB,QAAQ,kDAAkD;AAC1D;AACA;AACA,gEAAgE,qDAAqD;AACrH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,yEAAyE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA,2BAA2B,qBAAqB;AAChD;AACA,0BAA0B,aAAa;AACvC,2BAA2B,uBAAuB;AAClD;AACA,yBAAyB,aAAa;AACtC,kCAAkC,4BAA4B;AAC9D;AACA,gHAAgH;AAChH;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,2CAA2C;AAChG;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB;AACA,eAAe,QAAQ;AACvB;AACA,2BAA2B,qBAAqB;AAChD;AACA,0BAA0B,cAAc;AACxC,2BAA2B,QAAQ;AACnC;AACA,yBAAyB,aAAa;AACtC,kCAAkC,8BAA8B;AAChE;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB,QAAQ,kDAAkD;AAC1D;AACA;AACA;AACA;AACA;AACA,OAAO,eAAe;;AAEtB;AACA;;AAEA;AACA;;AAEA;AACA,wBAAwB;AACxB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA,gEAAgE;;AAEhE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,mBAAmB;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,8DAA8D;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,+CAA+C;AAC/C;AACA;AACA;AACA,uBAAuB,gCAAgC;AACvD;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,QAAQ,+BAA+B,sBAAsB;AAC5E;AACA,eAAe,QAAQ;AACvB;AACA,2BAA2B,cAAc;AACzC;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA,wBAAwB,4BAA4B,eAAe;AACnE;;AAEA,8BAA8B,kBAAkB;AAChD,sCAAsC,cAAc;;AAEpD;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,gDAAgD;AAChD,wCAAwC;AACxC,gCAAgC;AAChC;AACA;AACA;AACA,uBAAuB,sCAAsC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,uCAAuC;AACvC,qCAAqC;AACrC,6CAA6C;AAC7C,0CAA0C;AAC1C,sCAAsC;AACtC,kCAAkC;AAClC;AACA;AACA,eAAe,OAAO;AACtB;AACA,eAAe,QAAQ,+BAA+B,sBAAsB;AAC5E;AACA,eAAe,QAAQ;AACvB;AACA,2BAA2B,eAAe;AAC1C;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA,wBAAwB,4BAA4B,eAAe;AACnE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,kBAAkB;AAChD,6DAA6D,cAAc;AAC3E,oBAAoB,aAAa;;AAEjC;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,gBAAgB;AAC3D;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB;AACA,wBAAwB,aAAa;AACrC;AACA;AACA,0BAA0B,aAAa;AACvC,2BAA2B,uBAAuB;AAClD;AACA,2BAA2B,cAAc;AACzC;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAe;;AAEtB;;AAEA;AACA,4EAA4E;;AAE5E;;AAEA;AACA;AACA;AACA,kGAAkG;AAClG;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B;AACA,eAAe,eAAe;AAC9B,iBAAiB,aAAa;AAC9B;AACA;AACA,iFAAiF,0BAA0B,EAAE;AAC7G;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;;AAEpB;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA,+FAA+F;AAC/F;AACA,qCAAqC,gFAAgF;AACrH,WAAW;;AAEX;AACA;AACA;AACA,kDAAkD;AAClD;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;;AAET;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,WAAW,EAAE;AACrD,+BAA+B,mBAAmB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,0EAA0E;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oCAAoC;AAClE;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,8GAA8G;AACnJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,oCAAoC;AACjD;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,8FAA8F;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,M;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,M;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,M;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,gCAAgC;AACpE;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+CAA+C,uBAAuB,MAAM,EAAE;AAC9E,uCAAuC,kBAAkB,MAAM;AAC/D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8CAA8C,qCAAqC,MAAM,EAAE;AAC3F,sCAAsC,wBAAwB,MAAM;AACpE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oEAAoE;AACpE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B,qBAAqB,OAAO;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kCAAkC,oCAAoC;AACtE;;AAEA,2CAA2C;AAC3C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,mCAAmC,GAAG,GAAG;AACzC;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wDAAwD;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,QAAQ;AACpF;AACA;AACA;AACA,wCAAwC,iBAAiB,KAAK,gBAAgB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA,kIAAkI,QAAQ;AAC1I;AACA;AACA;AACA,4DAA4D,iBAAiB;AAC7E;AACA;AACA,4DAA4D,iBAAiB;AAC7E;AACA;AACA,4DAA4D,iBAAiB;AAC7E;AACA;AACA;AACA,oCAAoC,aAAa;AACjD;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO,kCAAkC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;;AAEA,8GAA8G;;AAE9G;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mDAAmD,qCAAqC,EAAE;AAC1F;AACA;AACA;;AAEA;AACA,sEAAsE,YAAY,EAAE;AACpF;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO,oCAAoC;AACtD,WAAW,OAAO,mCAAmC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,sBAAsB,EAAE;AAC1E,oBAAoB;AACpB;AACA;;AAEA;AACA,6BAA6B,uBAAuB;AACpD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sEAAsE,YAAY,EAAE;AACpF;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,qBAAqB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,qBAAqB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,oBAAoB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,8DAA8D;AAC9E,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;;AAEzC;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,cAAc;AAC/B,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA,wCAAwC,uBAAuB,wBAAwB,EAAE,EAAE;AAC3F,2CAA2C,2BAA2B;AACtE,wCAAwC,4CAA4C;AACpF,0CAA0C,sCAAsC;;AAEhF;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,+DAA+D;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wFAAwF;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA,gC;;;;;;;;ACjlJA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,6CAA6C;AACrG;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,iD;;;;;;;ACrCA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qCAAqC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,eAAe;AACtD,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,2BAA2B;AACvF;AACA;AACA;AACA;AACA;AACA,kDAAkD,sCAAsC;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,GAAG;AAC7D;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,8BAA8B;AACpF;AACA;AACA;AACA,kDAAkD,+BAA+B;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,+BAA+B;AAC3C;AACA,6DAA6D,uBAAuB;AACpF;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mBAAmB;AAC/C,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,6BAA6B;AACrF;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+C;;;;;;;ACjQA;AACA;AACA;AACA;AACA,yBAAyB,qBAAqB;AAC9C;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA,yBAAyB,yBAAyB;AAClD;AACA;AACA;AACA,yBAAyB,mBAAmB;AAC5C;AACA;AACA;AACA,yBAAyB,mBAAmB;AAC5C;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA,sC;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,mBAAmB,EAAE;AAC/C;AACA;AACA,KAAK;AACL,kDAAkD,8BAA8B;AAChF;AACA,CAAC;AACD;AACA,wC;;;;;;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qC;;;;;;;ACTA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,gBAAgB;AACpF;AACA;AACA,uBAAuB;AACvB;AACA;AACA,iDAAiD,gBAAgB;AACjE;AACA;AACA;AACA;AACA,sCAAsC,aAAa;AACnD,sCAAsC,aAAa;AACnD;AACA;AACA,sDAAsD,yBAAyB,oCAAoC,EAAE,EAAE;AACvH,sDAAsD,6BAA6B;AACnF;AACA;AACA,sCAAsC,yBAAyB,mCAAmC,EAAE,EAAE;AACtG,sCAAsC,4BAA4B;AAClE;AACA;AACA;AACA,mCAAmC,yBAAyB,mCAAmC,EAAE,EAAE;AACnG,mCAAmC,4BAA4B;AAC/D;AACA;AACA;AACA;AACA,sDAAsD,yBAAyB,+BAA+B,EAAE,EAAE;AAClH,sDAAsD,wBAAwB;AAC9E;AACA,2DAA2D,yBAAyB,mBAAmB,EAAE,EAAE,EAAE,mBAAmB,YAAY;AAC5I;AACA;AACA,2DAA2D,yBAAyB,mBAAmB,EAAE,EAAE,EAAE,gBAAgB,YAAY;AACzI;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,iC;;;;;;;AChHA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA,oDAAoD,qBAAqB;AACzE;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,kCAAkC;AACpF,oDAAoD,4BAA4B;AAChF,gDAAgD,wBAAwB;AACxE,6CAA6C,iBAAiB;AAC9D;AACA;AACA;AACA,2BAA2B,cAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,UAAU;AACxC,4BAA4B,WAAW;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,cAAc;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,cAAc;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,sC;;;;;;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;;ACnBA;AACA;AACA;AACA,4BAA4B,EAAE;AAC9B,2BAA2B,WAAW,EAAE;AACxC,2BAA2B;AAC3B;AACA,oC;;;;;;;ACPA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,eAAe;AAClC,IAAI,mBAAmB,mBAAmB,eAAe;AACzD,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kCAAkC;AACjD;AACA,eAAe,wBAAwB;AACvC;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,aAAa;AACpF;AACA;AACA;AACA,eAAe,sBAAsB;AACrC,eAAe,wBAAwB;AACvC;AACA,eAAe,iBAAiB;AAChC;AACA,gBAAgB,cAAc;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,eAAe;AAC3B;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,eAAe;AAC3B,yCAAyC,YAAY;AACrD;AACA,eAAe,IAAI;AACnB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,eAAe;AAC3B;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sC;;;;;;;ACxPA;AACA;AACA,uBAAuB,MAAM;AAC7B,uC;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;;;;;;;ACLA;AACA,iCAAO,CACH,wBADG,CAAP,kCAEG,YAAY,CAAG,CAFlB;AAAA,qG;;;;;;;;;ACDA;AACA;AACA,iCAAO,CACH,sBADG;AAEH;AACA,wBAHG,EAIH,wBAJG,EAKH,wBALG,EAMN,wBANM,EAON,wBAPM,EAQN,wBARM,EASN,wBATM,EAUN,wBAVM;AAWH;AACH,wBAZM,EAaH,uBAbG,EAcH,uBAdG,EAeH,uBAfG,EAgBH,uBAhBG,EAiBN,uBAjBM,EAkBN,wBAlBM,EAmBN,uBAnBM,EAoBH,uBApBG,EAqBH,uBArBG,EAsBH,uBAtBG,CAAP,kCAuBG,UACCG,EADD,EAECC,YAFD,EAGCC,SAHD,EAICC,YAJD,EAKCC,gBALD,EAMCC,YAND,EAOFC,aAPE,EAQFC,iBARE,EASCC,mBATD,EASsB;AACxB;;AAEA,KAAIC,SAAST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;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iDAAiD;AACjD;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;AAEA;AACA,mBAAmB,kBAAkB;AACrC;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,sBAAsB;AAC3D;AACA;AACA,uEAAuE,MAAM;AAC7E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAe;AACjC,gBAAgB,uBAAuB;AACvC;AACA,UAAU;AACV;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAe;AACjC,gBAAgB,uBAAuB;AACvC;AACA,UAAU;AACV;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,qGAAqG;AACrG,SAAS,gBAAgB;AACzB,gBAAgB,gBAAgB;AAChC;AACA,SAAS,sGAAsG;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,uBAAuB;AAClC,SAAS,uBAAuB;AAChC;AACA;AACA;AACA,WAAW,+BAA+B;AAC1C,SAAS,+BAA+B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mBAAmB;AAC/B,UAAU;AACV,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,yBAAyB;AACpC,SAAS,2BAA2B;AACpC;AACA;AACA;AACA,WAAW,iCAAiC;AAC5C,SAAS,mCAAmC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,MAAM;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,uDAAuD;AACrE;AACA,WAAW,WAAW;AACtB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,2GAA2G;AAChH,mIAAmI;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,sBAAsB;AACtB,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,2BAA2B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA,WAAW;;AAEX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA,WAAW;;AAEX;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA,WAAW;AACX,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,oDAAoD,EAAE;AACxE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iCAAiC,aAAa;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,yDAAyD;AACzD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG;AACzG;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iDAAiD;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD,SAAS;AACT,OAAO;;AAEP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB;AAClB;;AAEA;AACA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,0BAA0B;AAC7C;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB,SAAS,EAAE;AACpC,4BAA4B,aAAa;AACzC,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,WAAW;AACX,SAAS;;AAET;AACA;AACA;AACA;AACA,OAAO;;AAEP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uBAAuB,cAAc;AACrC;AACA;;AAEA,yBAAyB,cAAc;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,wCAAwC,QAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,8BAA8B;AACpC,MAAM,8BAA8B;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,gBAAgB;AAC1B,YAAY,kBAAkB;AAC9B,WAAW,iBAAiB;AAC5B,aAAa,mBAAmB;AAChC,aAAa,mBAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,gDAAgD;AACtD,MAAM,iDAAiD;AACvD,MAAM,kDAAkD;AACxD,MAAM,gDAAgD;AACtD,MAAM,wCAAwC;AAC9C,MAAM,8CAA8C;AACpD,MAAM,4CAA4C,IAAI,4CAA4C;AAClG,MAAM,6CAA6C,IAAI,mDAAmD;AAC1G,MAAM,8CAA8C;AACpD,MAAM,6CAA6C;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,sDAAsD;AAC/D;AACA;AACA;AACA;AACA;AACA,SAAS,uDAAuD;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA,SAAS,sEAAsE;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB,SAAS,WAAW;AACpB;AACA;AACA;AACA,WAAW,WAAW;AACtB,SAAS,WAAW;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,+BAA+B;AAC1C;AACA;AACA;AACA;AACA,WAAW,2EAA2E;AACtF;AACA;AACA,WAAW;AACX,gFAAgF;AAChF;AACA;AACA,WAAW;AACX;AACA,8BAA8B,MAAM;AACpC;AACA;AACA,WAAW,iCAAiC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;AACA;AACA,6BAA6B;AAC7B,6BAA6B;AAC7B;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B,qBAAqB,aAAa;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,WAAW;AAC7B,gBAAgB;AAChB,UAAU;AACV;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,SAAS,kEAAkE;AAC3E,oBAAoB,4BAA4B;AAChD;AACA,SAAS;AACT,uDAAuD;AACvD,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA,6DAA6D,gDAAgD;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,0EAA0E;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA,aAAa,mCAAmC;AAChD,aAAa,mCAAmC;AAChD,aAAa,kCAAkC;AAC/C,aAAa,6BAA6B;AAC1C,aAAa,6BAA6B;AAC1C,aAAa,wCAAwC;AACrD,aAAa,mCAAmC;AAChD,aAAa,oCAAoC;AACjD,aAAa,6BAA6B;AAC1C,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,+BAA+B,aAAa;AAC5C,2BAA2B,aAAa;AACxC;AACA,UAAU;AACV;AACA;AACA;AACA,oDAAoD,cAAc;AAClE,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,MAAM;AACN,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,uEAAuE;AAChF,oBAAoB,4BAA4B,kBAAkB,aAAa;AAC/E;AACA;AACA;AACA,kCAAkC,4CAA4C;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iEAAiE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS,0BAA0B;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA,CAAC;;;AAGD;AACA,gC;;;;;;AC7jIA;AACA;;;AAGA;AACA,gC;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,uCAAuC;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE,wBAAwB;AACxB;AACA,mEAAmE,wBAAwB;AAC3F;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,8BAA8B,SAAS,QAAQ;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,IAAI,QAAQ;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,yBAAyB,SAAS,QAAQ;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA,mBAAmB,0BAA0B;AAC7C,mBAAmB,gDAAgD,cAAc,OAAO;AACxF,0BAA0B,MAAM;AAChC,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,0BAA0B,QAAQ,MAAM;AAC1D,MAAM;AACN;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;;AAEA;AACA,+BAA+B;AAC/B;AACA;;AAEA;AACA,gCAAgC;AAChC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+BAA+B;AAC/B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B;AAC5B;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,uCAAuC;AACvC,8BAA8B;AAC9B,iCAAiC;AACjC;AACA,MAAM;AACN;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,+EAA+E;AAC/E,OAAO;AACP;AACA,8CAA8C;AAC9C,OAAO;AACP,yBAAyB;AACzB,yBAAyB;AACzB;;AAEA;AACA;AACA,aAAa,MAAM;AACnB,eAAe,OAAO;AACtB,uCAAuC;AACvC,8BAA8B;AAC9B,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kGAAkG,EAAE;AACpG;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,SAAS,0BAA0B;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,8BAA8B;AAC/C;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,qBAAqB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO,qBAAqB,0BAA0B;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sCAAsC,QAAQ,QAAQ;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,4DAA4D,QAAQ,QAAQ;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,wDAAwD,gBAAgB,KAAK,QAAQ,QAAQ;AAClH;AACA;AACA,qEAAqE,gBAAgB;AACrF;AACA;AACA;AACA;AACA,wBAAwB,yBAAyB,QAAQ,QAAQ;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA,sEAAsE,gBAAgB;AACtF;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,0EAA0E,KAAK;AAC/E;;AAEA;AACA;AACA;AACA;AACA;;AAEA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CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,8EAA8E,iDAAiD;AAC/H;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8EAA8E,yDAAyD;AACvI;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,yDAAyD;AACzD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA,4DAA4D;AAC5D;AACA;AACA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA,mFAAmF,gCAAgC;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,aAAa;AACb;AACA,yBAAyB;AACzB,aAAa;AACb;AACA,yBAAyB;AACzB;AACA;AACA,iCAAiC;AACjC;AACA,iCAAiC;AACjC;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;;AAEA,qEAAqE;AACrE,sBAAsB,oBAAoB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iDAAiD;AACjD,wBAAwB,oBAAoB;AAC5C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;;AAEA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,GAAG;;;AAGH;AACA;;AAEA;AACA,gC;;;;;;;;AC3bA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4C;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,QAAQ;AACpF;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,yC;;;;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wFAAwF;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oGAAoG;AACrG;AACA,qBAAqB,8BAA8B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8B;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,eAAe;AACtE;AACA;AACA;AACA;AACA;AACA,gCAAgC,eAAe;AAC/C;AACA;AACA,0CAA0C,eAAe;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gCAAgC;AAC/D;AACA;AACA;AACA;AACA,sCAAsC,6DAA6D;AACnG;AACA;AACA;AACA;AACA,uCAAuC,wCAAwC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,cAAc,EAAE,mBAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sDAAsD,EAAE;AAClF;AACA;AACA,KAAK;AACL;AACA,0BAA0B,uDAAuD,EAAE;AACnF;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,+B;;;;;;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,4CAA4C,8BAA8B;AAC1E;AACA,gBAAgB;AAChB;AACA;AACA,4CAA4C,+DAA+D;AAC3G;AACA,gBAAgB;AAChB;AACA;AACA,4CAA4C,8BAA8B;AAC1E;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,sBAAsB;AACvE,sBAAsB,sBAAsB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,4BAA4B;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+C;;;;;;;ACtLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,EAAE;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gJAAgJ,EAAE;AAClJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,wCAAwC;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,QAAQ;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,2C;;;;;;;ACtMA;AACA;AACA;AACA;AACA,+BAA+B,gBAAgB;AAC/C,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,sBAAsB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA,mCAAmC;AACnC;AACA;AACA,iFAAiF,wBAAwB,mDAAmD;AAC5J;AACA;AACA,iFAAiF,wBAAwB,6DAA6D;AACtK;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,kBAAkB;AACvD;AACA,kEAAkE,oBAAoB,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uIAAuI;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb;AACA;AACA;AACA,0C;;;;;;;AC1KA;AACA;AACA,qC;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,6BAA6B,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,WAAW,EAAE;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,mEAAmE,EAAE;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,YAAY;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA,8C;;;;;;;ACjMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uBAAuB,EAAE;AAC3D;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,YAAY;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6TAA6T,QAAQ,iBAAiB;AACtV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,aAAa,EAAE;AACjF;AACA;AACA;AACA;AACA,kEAAkE,aAAa,EAAE;AACjF;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,aAAa,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,8C;;;;;;;ACrOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,mBAAmB;AACnB,sBAAsB;AACtB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,0BAA0B,EAAE,2BAA2B,wBAAwB,EAAE;AACtJ,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,uC;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,2DAA2D,4BAA4B,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wCAAwC,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yC;;;;;;;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,0BAA0B;AACvE,uCAAuC,qCAAqC;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,aAAa,EAAE;AACnF;AACA;AACA,uDAAuD,+BAA+B,EAAE;AACxF,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,8DAA8D,oKAAoK,EAAE;AACpO;AACA;AACA;AACA,8DAA8D,8JAA8J,EAAE;AAC9N;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6C;;;;;;;ACzQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0D;;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,eAAe,yCAAyC;AACxD;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,mDAAmD,EAAE;AACvI;AACA,6BAA6B,oBAAoB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,iDAAiD,EAAE;AACtI,uFAAuF,qDAAqD,EAAE;AAC9I,mFAAmF,iDAAiD,EAAE;AACtI,uFAAuF,qDAAqD,EAAE;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,uEAAuE,EAAE;AAClJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wBAAwB;AACjD;AACA;AACA;AACA;AACA;AACA,eAAe,wBAAwB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,IAAI;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,8C;;;;;;;AC5RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,mBAAmB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,yC;;;;;;;AChCA;AACA;AACA;AACA,iC;;;;;;;ACHA;AACA;AACA;AACA;AACA,sC;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,yC;;;;;;;ACnCA;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iCAAiC;AAClE;AACA;AACA,wEAAwE,aAAa;AACrF;AACA;AACA;AACA,oCAAoC,gBAAgB;AACpD;AACA,sCAAsC,kBAAkB;AACxD;AACA,0CAA0C,sBAAsB;AAChE;AACA,8CAA8C,0BAA0B;AACxE;AACA,kDAAkD,8BAA8B;AAChF;AACA,sDAAsD,kCAAkC;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,uDAAuD;AAClI;AACA,gFAAgF,4DAA4D;AAC5I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mHAAmH,+FAA+F;AAClN;AACA,wHAAwH,oGAAoG;AAC5N;AACA,6HAA6H,yGAAyG;AACtO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,iDAAiD,GAAG;AACnH;AACA,iEAAiE;AACjE;AACA;AACA,kGAAkG,+CAA+C;AACjJ;AACA;AACA;AACA,CAAC;AACD;AACA,mD;;;;;;;AChOA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,0DAA0D;AACrH;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA,yEAAyE;AACzE;AACA,CAAC;AACD;AACA,qC;;;;;;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,4C;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,qBAAqB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,mDAAmD;AAClH;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF;AACxF;AACA;AACA;AACA;AACA;AACA,oCAAoC,qBAAqB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mC;;;;;;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kC;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,gBAAgB,WAAW;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,mBAAmB;AAClC,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,WAAW;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,gBAAgB,WAAW;AAC3B;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,sC;;;;;;;AChIA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,SAAS;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,mC;;;;;;;AC/JA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,+C;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;ACrBA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,mD;;;;;;;AC1BA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0GAA0G,0CAA0C,EAAE;AACtJ;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,+C;;;;;;;ACxBA;AACA,kDAAkD,0CAA0C,EAAE;AAC9F,mC;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA,oC;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wC;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oC","file":"app.bundle.js","sourcesContent":["\"use strict\";\nvar globalScope;\nif (typeof window === 'undefined') {\n    globalScope = global;\n}\nelse {\n    globalScope = window;\n}\n// Need to declare a new variable for global here since TypeScript\n// exports the original value of the symbol.\nvar _global = globalScope;\nexports.global = _global;\n// ===============\n// implementations\n// ===============\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\n\\\\]|\\\\.)*?\\1)\\]/;\nvar reIsPlainProp = /^\\w*$/;\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\n\\\\]|\\\\.)*?)\\2)\\]/g;\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^\\d+$/;\n/**\n * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\nvar argsTag = '[object Arguments]';\nvar _devMode = true;\n/**\n * Disable Angular's development mode, which turns off assertions and other\n * checks within the framework.\n *\n * One important assertion this disables verifies that a change detection pass\n * does not result in additional changes to any bindings (also known as\n * unidirectional data flow).\n */\nfunction enableProdMode() {\n    _devMode = false;\n}\nexports.enableProdMode = enableProdMode;\nfunction assertionsEnabled() {\n    return _devMode;\n}\nexports.assertionsEnabled = assertionsEnabled;\nfunction isPresent(obj) {\n    return obj !== undefined && obj !== null;\n}\nexports.isPresent = isPresent;\nfunction isBlank(obj) {\n    return obj === undefined || obj === null;\n}\nexports.isBlank = isBlank;\nfunction isString(obj) {\n    return typeof obj === \"string\";\n}\nexports.isString = isString;\nfunction isFunction(obj) {\n    return typeof obj === \"function\";\n}\nexports.isFunction = isFunction;\nfunction isBoolean(obj) {\n    return typeof obj === \"boolean\";\n}\nexports.isBoolean = isBoolean;\nfunction isArray(obj) {\n    return Array.isArray(obj);\n}\nexports.isArray = isArray;\nfunction isNumber(obj) {\n    return typeof obj === 'number';\n}\nexports.isNumber = isNumber;\nfunction isDate(obj) {\n    return obj instanceof Date && !isNaN(obj.valueOf());\n}\nexports.isDate = isDate;\nfunction isType(obj) {\n    return isFunction(obj);\n}\nexports.isType = isType;\nfunction isStringMap(obj) {\n    return typeof obj === 'object' && obj !== null;\n}\nexports.isStringMap = isStringMap;\nfunction isPromise(obj) {\n    return obj instanceof _global.Promise;\n}\nexports.isPromise = isPromise;\nfunction isPromiseLike(obj) {\n    return Boolean(isPresent(obj) && obj.then);\n}\nexports.isPromiseLike = isPromiseLike;\nfunction isObservable(obj) {\n    return Boolean(isPresent(obj) && obj.subscribe);\n}\nexports.isObservable = isObservable;\nfunction isPromiseOrObservable(obj) {\n    return isPromiseLike(obj) || isObservable(obj);\n}\nexports.isPromiseOrObservable = isPromiseOrObservable;\nfunction isScope(obj) {\n    return isPresent(obj) && obj.$digest && obj.$on;\n}\nexports.isScope = isScope;\nfunction isSubscription(obj) {\n    return isPresent(obj) && obj.unsubscribe;\n}\nexports.isSubscription = isSubscription;\nfunction isJsObject(o) {\n    return o !== null && (typeof o === \"function\" || typeof o === \"object\");\n}\nexports.isJsObject = isJsObject;\nfunction isArguments(value) {\n    // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n    return ('length' in value) && Object.prototype.hasOwnProperty.call(value, 'callee') &&\n        (!Object.prototype.propertyIsEnumerable.call(value, 'callee') || Object.prototype.toString.call(value) == argsTag);\n}\nexports.isArguments = isArguments;\nfunction noop() { }\nexports.noop = noop;\nfunction stringify(token) {\n    if (typeof token === 'string') {\n        return token;\n    }\n    if (token === undefined || token === null) {\n        return '' + token;\n    }\n    if (token.name) {\n        return token.name;\n    }\n    var res = token.toString();\n    var newLineIndex = res.indexOf(\"\\n\");\n    return (newLineIndex === -1)\n        ? res\n        : res.substring(0, newLineIndex).replace('\\r', '');\n}\nexports.stringify = stringify;\n/**\n * Converts `value` to a string if it's not one. An empty string is returned\n * for `null` or `undefined` values.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n    return value == null ? '' : (value + '');\n}\nexports.baseToString = baseToString;\n/**\n * Converts `value` to property path array if it's not one.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {Array} Returns the property path array.\n */\nfunction toPath(value) {\n    if (isArray(value)) {\n        return value;\n    }\n    //return value.split('.');\n    var result = [];\n    baseToString(value).replace(rePropName, function (match, number, quote, string) {\n        var resultValue = quote\n            ? string.replace(reEscapeChar, '$1')\n            : (number || match);\n        result.push(resultValue);\n        return resultValue;\n    });\n    return result;\n}\nexports.toPath = toPath;\nfunction assign(destination) {\n    var sources = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        sources[_i - 1] = arguments[_i];\n    }\n    var envAssign = _global.Object['assign'] || _global.angular.extend;\n    return envAssign.apply(void 0, [destination].concat(sources));\n}\nexports.assign = assign;\nvar ATTRS_BOUNDARIES = /\\[|\\]/g;\nvar COMPONENT_SELECTOR = /^\\[?[\\w|-]*\\]?$/;\nvar SKEWER_CASE = /-(\\w)/g;\nfunction resolveDirectiveNameFromSelector(selector) {\n    if (!selector.match(COMPONENT_SELECTOR)) {\n        throw new Error(\"Only selectors matching element names or base attributes are supported, got: \" + selector);\n    }\n    return selector\n        .trim()\n        .replace(ATTRS_BOUNDARIES, '')\n        .replace(SKEWER_CASE, function (all, letter) { return letter.toUpperCase(); });\n}\nexports.resolveDirectiveNameFromSelector = resolveDirectiveNameFromSelector;\nfunction getTypeName(type) {\n    var typeName = getFuncName(type);\n    return firstToLowerCase(typeName);\n}\nexports.getTypeName = getTypeName;\n/**\n *\n * @param {Function}  func\n * @returns {string}\n * @private\n */\nfunction getFuncName(func) {\n    var parsedFnStatement = /function\\s*([^\\s(]+)/.exec(stringify(func));\n    var _a = parsedFnStatement || [], _b = _a[1], name = _b === void 0 ? '' : _b;\n    // if Function.name doesn't exist exec will find match otherwise return name property\n    return name || stringify(func);\n}\nexports.getFuncName = getFuncName;\n/**\n * controller instance of directive is exposed on jqLiteElement.data()\n * under the name: `$` + Ctor + `Controller`\n * @param name\n * @returns {string}\n */\nfunction controllerKey(name) {\n    return '$' + name + 'Controller';\n}\nexports.controllerKey = controllerKey;\nfunction hasCtorInjectables(Type) {\n    return (Array.isArray(Type.$inject) && Type.$inject.length !== 0);\n}\nexports.hasCtorInjectables = hasCtorInjectables;\nfunction firstToLowerCase(value) {\n    return _firstTo(value, String.prototype.toLowerCase);\n}\nexports.firstToLowerCase = firstToLowerCase;\nfunction firstToUpperCase(value) {\n    return _firstTo(value, String.prototype.toUpperCase);\n}\nexports.firstToUpperCase = firstToUpperCase;\nfunction _firstTo(value, cb) {\n    return cb.call(value.charAt(0)) + value.substring(1);\n}\nfunction normalizeBlank(obj) {\n    return isBlank(obj) ? null : obj;\n}\nexports.normalizeBlank = normalizeBlank;\nfunction normalizeBool(obj) {\n    return isBlank(obj) ? false : obj;\n}\nexports.normalizeBool = normalizeBool;\nfunction print(obj) {\n    console.log(obj);\n}\nexports.print = print;\n/**\n * Angular 2 setValueOnPath\n * supports only `.` path separator\n * @param global\n * @param path\n * @param value\n */\nfunction setValueOnPath(global, path, value) {\n    var parts = path.split('.');\n    var obj = global;\n    while (parts.length > 1) {\n        var name = parts.shift();\n        if (obj.hasOwnProperty(name) && isPresent(obj[name])) {\n            obj = obj[name];\n        }\n        else {\n            obj = obj[name] = {};\n        }\n    }\n    if (obj === undefined || obj === null) {\n        obj = {};\n    }\n    obj[parts.shift()] = value;\n}\nexports.setValueOnPath = setValueOnPath;\n/**\n * Converts `value` to an object if it's not one.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {Object} Returns the object.\n */\nfunction toObject(value) {\n    return isJsObject(value)\n        ? value\n        : Object(value);\n}\nexports.toObject = toObject;\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n    if (length === void 0) { length = MAX_SAFE_INTEGER; }\n    value = (isNumber(value) || reIsUint.test(value))\n        ? +value\n        : -1;\n    return value > -1 && value % 1 == 0 && value < length;\n}\nexports.isIndex = isIndex;\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n    if ((isString(value) && reIsPlainProp.test(value)) || isNumber(value)) {\n        return true;\n    }\n    if (isArray(value)) {\n        return false;\n    }\n    var result = !reIsDeepProp.test(value);\n    return result || (object != null && value in toObject(object));\n}\nexports.isKey = isKey;\n//# sourceMappingURL=lang.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/facade/lang.js\n// module id = 2\n// module chunks = 0","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\n__export(require(\"./src/core/di\"));\nvar util_1 = require(\"./src/core/util\");\nexports.bundle = util_1.bundle;\nvar directives_1 = require(\"./src/core/directives\");\nexports.Directive = directives_1.Directive;\nexports.Component = directives_1.Component;\nexports.NgModule = directives_1.NgModule;\nexports.Attr = directives_1.Attr;\nexports.Input = directives_1.Input;\nexports.Output = directives_1.Output;\nexports.HostBinding = directives_1.HostBinding;\nexports.HostListener = directives_1.HostListener;\nexports.ViewChild = directives_1.ViewChild;\nexports.ViewChildren = directives_1.ViewChildren;\nexports.ContentChild = directives_1.ContentChild;\nexports.ContentChildren = directives_1.ContentChildren;\nvar pipes_1 = require(\"./src/core/pipes\");\nexports.Pipe = pipes_1.Pipe;\n__export(require(\"./src/core/change_detection\"));\nvar lang_1 = require(\"./src/facade/lang\");\nexports.enableProdMode = lang_1.enableProdMode;\nvar facade_1 = require(\"./src/facade/facade\");\nexports.EventEmitter = facade_1.EventEmitter;\n//# sourceMappingURL=core.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/core.js\n// module id = 3\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"./lang\");\nvar INFINITY = 1 / 0;\n/**\n * Wraps Javascript Objects\n */\nvar StringMapWrapper = (function () {\n    function StringMapWrapper() {\n    }\n    StringMapWrapper.create = function () {\n        // Note: We are not using Object.create(null) here due to\n        // performance!\n        // http://jsperf.com/ng2-object-create-null\n        return {};\n    };\n    StringMapWrapper.contains = function (map, key) {\n        return map.hasOwnProperty(key);\n    };\n    /**\n     * The base implementation of `getValueFromPath` without support for string paths\n     * and default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path of the property to get.\n     * @param {string} [pathKey] The key representation of path.\n     * @returns {*} Returns the resolved value.\n     */\n    StringMapWrapper.baseGet = function (object, path, pathKey) {\n        if (object == null) {\n            return;\n        }\n        object = lang_1.toObject(object);\n        if (pathKey !== undefined && pathKey in object) {\n            path = [pathKey];\n        }\n        var index = 0, length = path.length;\n        while (object != null && index < length) {\n            object = lang_1.toObject(object)[path[index++]];\n        }\n        return (index && index == length)\n            ? object\n            : undefined;\n    };\n    /**\n     * Gets the property value at `path` of `object`. If the resolved value is\n     * `undefined` the `defaultValue` is used in its place.\n     *\n     * @static\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    StringMapWrapper.getValueFromPath = function (object, path, defaultValue) {\n        var result = object == null\n            ? undefined\n            : StringMapWrapper.baseGet(object, lang_1.toPath(path), (path + ''));\n        return result === undefined\n            ? defaultValue\n            : result;\n    };\n    /**\n     * Sets the property value of `path` on `object`. If a portion of `path`\n     * does not exist it's created.\n     *\n     * @static\n     * @param {Object} object The object to augment.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, 'x[0].y.z', 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    StringMapWrapper.setValueInPath = function (object, path, value) {\n        if (object == null) {\n            return object;\n        }\n        var pathKey = (path + '');\n        path = (object[pathKey] != null || lang_1.isKey(path, object))\n            ? [pathKey]\n            : lang_1.toPath(path);\n        var index = -1, length = path.length, lastIndex = length - 1, nested = object;\n        while (nested != null && ++index < length) {\n            var key = path[index];\n            if (lang_1.isJsObject(nested)) {\n                if (index == lastIndex) {\n                    nested[key] = value;\n                }\n                else if (nested[key] == null) {\n                    nested[key] = lang_1.isIndex(path[index + 1])\n                        ? []\n                        : {};\n                }\n            }\n            nested = nested[key];\n        }\n        return object;\n    };\n    StringMapWrapper.get = function (map, key) {\n        return map.hasOwnProperty(key)\n            ? map[key]\n            : undefined;\n    };\n    StringMapWrapper.set = function (map, key, value) { map[key] = value; };\n    StringMapWrapper.keys = function (map) { return Object.keys(map); };\n    StringMapWrapper.size = function (map) { return StringMapWrapper.keys(map).length; };\n    StringMapWrapper.isEmpty = function (map) {\n        for (var prop in map) {\n            return false;\n        }\n        return true;\n    };\n    StringMapWrapper.delete = function (map, key) { delete map[key]; };\n    StringMapWrapper.forEach = function (map, callback) {\n        for (var prop in map) {\n            if (map.hasOwnProperty(prop)) {\n                callback(map[prop], prop);\n            }\n        }\n    };\n    StringMapWrapper.values = function (map) {\n        return Object.keys(map).reduce(function (r, a) {\n            r.push(map[a]);\n            return r;\n        }, []);\n    };\n    StringMapWrapper.merge = function (m1, m2) {\n        var m = {};\n        for (var attr in m1) {\n            if (m1.hasOwnProperty(attr)) {\n                m[attr] = m1[attr];\n            }\n        }\n        for (var attr in m2) {\n            if (m2.hasOwnProperty(attr)) {\n                m[attr] = m2[attr];\n            }\n        }\n        return m;\n    };\n    StringMapWrapper.equals = function (m1, m2) {\n        var k1 = Object.keys(m1);\n        var k2 = Object.keys(m2);\n        if (k1.length != k2.length) {\n            return false;\n        }\n        var key;\n        for (var i = 0; i < k1.length; i++) {\n            key = k1[i];\n            if (m1[key] !== m2[key]) {\n                return false;\n            }\n        }\n        return true;\n    };\n    StringMapWrapper.assign = function (target) {\n        var sources = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            sources[_i - 1] = arguments[_i];\n        }\n        if (!lang_1.isPresent(target)) {\n            throw new TypeError('Object.assign cannot be called with null or undefined');\n        }\n        var hasOwnProperty = Object.prototype.hasOwnProperty;\n        if (Object.assign) {\n            return (_a = Object).assign.apply(_a, [target].concat(sources));\n        }\n        var from;\n        var to = Object(target);\n        for (var s = 0; s < sources.length; s++) {\n            from = Object(sources[s]);\n            for (var key in from) {\n                if (hasOwnProperty.call(from, key)) {\n                    to[key] = from[key];\n                }\n            }\n        }\n        return to;\n        var _a;\n    };\n    return StringMapWrapper;\n}());\nexports.StringMapWrapper = StringMapWrapper;\nvar ListWrapper = (function () {\n    function ListWrapper() {\n    }\n    ListWrapper.create = function () { return []; };\n    ListWrapper.size = function (array) { return array.length; };\n    // JS has no way to express a statically fixed size list, but dart does so we\n    // keep both methods.\n    ListWrapper.createFixedSize = function (size) { return new Array(size); };\n    ListWrapper.createGrowableSize = function (size) { return new Array(size); };\n    ListWrapper.clone = function (array) { return array.slice(0); };\n    ListWrapper.forEachWithIndex = function (array, fn) {\n        for (var i = 0; i < array.length; i++) {\n            fn(array[i], i);\n        }\n    };\n    ListWrapper.first = function (array) {\n        if (!array)\n            return null;\n        return array[0];\n    };\n    ListWrapper.last = function (array) {\n        if (!array || array.length == 0)\n            return null;\n        return array[array.length - 1];\n    };\n    ListWrapper.indexOf = function (array, value, startIndex) {\n        if (startIndex === void 0) { startIndex = 0; }\n        return array.indexOf(value, startIndex);\n    };\n    ListWrapper.contains = function (list, el) { return list.indexOf(el) !== -1; };\n    ListWrapper.reversed = function (array) {\n        var a = ListWrapper.clone(array);\n        return a.reverse();\n    };\n    ListWrapper.concat = function (a, b) { return a.concat(b); };\n    ListWrapper.insert = function (list, index, value) { list.splice(index, 0, value); };\n    ListWrapper.removeAt = function (list, index) {\n        var res = list[index];\n        list.splice(index, 1);\n        return res;\n    };\n    ListWrapper.removeAll = function (list, items) {\n        for (var i = 0; i < items.length; ++i) {\n            var index = list.indexOf(items[i]);\n            list.splice(index, 1);\n        }\n    };\n    ListWrapper.remove = function (list, el) {\n        var index = list.indexOf(el);\n        if (index > -1) {\n            list.splice(index, 1);\n            return true;\n        }\n        return false;\n    };\n    ListWrapper.clear = function (list) { list.length = 0; };\n    ListWrapper.isEmpty = function (list) { return list.length == 0; };\n    ListWrapper.fill = function (list, value, start, end) {\n        if (start === void 0) { start = 0; }\n        if (end === void 0) { end = null; }\n        if (!Array.prototype.fill) {\n            Array.prototype.fill = function (value) {\n                // Steps 1-2.\n                if (this == null) {\n                    throw new TypeError('this is null or not defined');\n                }\n                var O = Object(this);\n                // Steps 3-5.\n                var len = O.length >>> 0;\n                // Steps 6-7.\n                var start = arguments[1];\n                var relativeStart = start >> 0;\n                // Step 8.\n                var k = relativeStart < 0\n                    ? Math.max(len + relativeStart, 0)\n                    : Math.min(relativeStart, len);\n                // Steps 9-10.\n                var end = arguments[2];\n                var relativeEnd = end === undefined\n                    ? len\n                    : end >> 0;\n                // Step 11.\n                var final = relativeEnd < 0\n                    ? Math.max(len + relativeEnd, 0)\n                    : Math.min(relativeEnd, len);\n                // Step 12.\n                while (k < final) {\n                    O[k] = value;\n                    k++;\n                }\n                // Step 13.\n                return O;\n            };\n        }\n        list.fill(value, start, end === null\n            ? list.length\n            : end);\n    };\n    ListWrapper.equals = function (a, b) {\n        if (a.length != b.length)\n            return false;\n        for (var i = 0; i < a.length; ++i) {\n            if (a[i] !== b[i])\n                return false;\n        }\n        return true;\n    };\n    ListWrapper.slice = function (l, from, to) {\n        if (from === void 0) { from = 0; }\n        if (to === void 0) { to = null; }\n        return l.slice(from, to === null\n            ? undefined\n            : to);\n    };\n    ListWrapper.splice = function (l, from, length) { return l.splice(from, length); };\n    ListWrapper.sort = function (l, compareFn) {\n        if (lang_1.isPresent(compareFn)) {\n            l.sort(compareFn);\n        }\n        else {\n            l.sort();\n        }\n    };\n    ListWrapper.toString = function (l) { return l.toString(); };\n    ListWrapper.toJSON = function (l) { return JSON.stringify(l); };\n    ListWrapper.maximum = function (list, predicate) {\n        if (list.length == 0) {\n            return null;\n        }\n        var solution = null;\n        var maxValue = -Infinity;\n        for (var index = 0; index < list.length; index++) {\n            var candidate = list[index];\n            if (lang_1.isBlank(candidate)) {\n                continue;\n            }\n            var candidateValue = predicate(candidate);\n            if (candidateValue > maxValue) {\n                solution = candidate;\n                maxValue = candidateValue;\n            }\n        }\n        return solution;\n    };\n    ListWrapper.find = function (arr, predicate, ctx) {\n        if (lang_1.isFunction(Array.prototype['find'])) {\n            return arr.find(predicate, ctx);\n        }\n        ctx = ctx || this;\n        var length = arr.length;\n        var i;\n        if (!lang_1.isFunction(predicate)) {\n            throw new TypeError(predicate + \" is not a function\");\n        }\n        for (i = 0; i < length; i++) {\n            if (predicate.call(ctx, arr[i], i, arr)) {\n                return arr[i];\n            }\n        }\n        return undefined;\n    };\n    ListWrapper.findIndex = function (arr, predicate, ctx) {\n        if (lang_1.isFunction(Array.prototype['findIndex'])) {\n            return arr.findIndex(predicate, ctx);\n        }\n        if (!lang_1.isFunction(predicate)) {\n            throw new TypeError('predicate must be a function');\n        }\n        var list = Object(arr);\n        var len = list.length;\n        if (len === 0) {\n            return -1;\n        }\n        for (var i = 0; i < len; i++) {\n            if (predicate.call(ctx, list[i], i, list)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    ListWrapper.isFlattenable = function (value) {\n        return lang_1.isArray(value) || lang_1.isArguments(value);\n    };\n    /**\n     * Appends the elements of `values` to `array`.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to append.\n     * @returns {Array} Returns `array`.\n     */\n    ListWrapper.arrayPush = function (array, values) {\n        var index = -1, length = values.length, offset = array.length;\n        while (++index < length) {\n            array[offset + index] = values[index];\n        }\n        return array;\n    };\n    /**\n     * The base implementation of `_.flatten` with support for restricting flattening.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {number} depth The maximum recursion depth.\n     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    ListWrapper.baseFlatten = function (array, depth, predicate, isStrict, result) {\n        if (predicate === void 0) { predicate = ListWrapper.isFlattenable; }\n        if (isStrict === void 0) { isStrict = false; }\n        if (result === void 0) { result = []; }\n        var index = -1;\n        var length = array.length;\n        while (++index < length) {\n            var value = array[index];\n            if (depth > 0 && predicate(value)) {\n                if (depth > 1) {\n                    // Recursively flatten arrays (susceptible to call stack limits).\n                    ListWrapper.baseFlatten(value, depth - 1, predicate, isStrict, result);\n                }\n                else {\n                    ListWrapper.arrayPush(result, value);\n                }\n            }\n            else if (!isStrict) {\n                result[result.length] = value;\n            }\n        }\n        return result;\n    };\n    /**\n     * Flattens `array` a single level deep.\n     *\n     * @static\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, [3, [4]], 5]\n     */\n    ListWrapper.flatten = function (array) {\n        var length = array ? array.length : 0;\n        return length ? ListWrapper.baseFlatten(array, 1) : [];\n    };\n    /**\n     * Recursively flattens `array`.\n     *\n     * @static\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, 3, 4, 5]\n     */\n    ListWrapper.flattenDeep = function (array) {\n        var length = array\n            ? array.length\n            : 0;\n        return length\n            ? ListWrapper.baseFlatten(array, INFINITY)\n            : [];\n    };\n    return ListWrapper;\n}());\nexports.ListWrapper = ListWrapper;\n//# sourceMappingURL=collections.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/facade/collections.js\n// module id = 6\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\n/**\n * `DependencyMetadata` is used by the framework to extend DI.\n * This is internal to Angular and should not be used directly.\n */\nvar DependencyMetadata = (function () {\n    function DependencyMetadata() {\n    }\n    Object.defineProperty(DependencyMetadata.prototype, \"token\", {\n        get: function () { return null; },\n        enumerable: true,\n        configurable: true\n    });\n    return DependencyMetadata;\n}());\nexports.DependencyMetadata = DependencyMetadata;\n/**\n * A parameter metadata that specifies a dependency.\n *\n * ### Example ([live demo](http://plnkr.co/edit/6uHYJK?p=preview))\n *\n * ```typescript\n * class Engine {}\n *\n * @Injectable()\n * class Car {\n *   engine;\n *   constructor(@Inject(\"MyEngine\") engine:Engine) {\n *     this.engine = engine;\n *   }\n * }\n *\n * var injector = Injector.resolveAndCreate([\n *  provide(\"MyEngine\", {useClass: Engine}),\n *  Car\n * ]);\n *\n * expect(injector.get(Car).engine instanceof Engine).toBe(true);\n * ```\n *\n * When `@Inject()` is not present, {@link Injector} will use the type annotation of the parameter.\n *\n * ### Example\n *\n * ```typescript\n * class Engine {}\n *\n * @Injectable()\n * class Car {\n *   constructor(public engine: Engine) {} //same as constructor(@Inject(Engine) engine:Engine)\n * }\n *\n * var injector = Injector.resolveAndCreate([Engine, Car]);\n * expect(injector.get(Car).engine instanceof Engine).toBe(true);\n * ```\n */\nvar InjectMetadata = (function () {\n    function InjectMetadata(token) {\n        this.token = token;\n    }\n    InjectMetadata.paramDecoratorForNonConstructor = function (annotationInstance, target, propertyKey, paramIndex) {\n        var annotateMethod = target[propertyKey];\n        annotateMethod.$inject = annotateMethod.$inject || [];\n        annotateMethod.$inject[paramIndex] = annotationInstance.token;\n    };\n    InjectMetadata.prototype.toString = function () { return \"@Inject(\" + lang_1.stringify(this.token) + \")\"; };\n    return InjectMetadata;\n}());\nexports.InjectMetadata = InjectMetadata;\n/**\n * A parameter metadata that marks a dependency as optional. {@link Injector} provides `null` if\n * the dependency is not found.\n *\n * ### Example ([live demo](http://plnkr.co/edit/AsryOm?p=preview))\n *\n * ```typescript\n * class Engine {}\n *\n * @Injectable()\n * class Car {\n *   engine;\n *   constructor(@Optional() engine:Engine) {\n *     this.engine = engine;\n *   }\n * }\n *\n * var injector = Injector.resolveAndCreate([Car]);\n * expect(injector.get(Car).engine).toBeNull();\n * ```\n */\nvar OptionalMetadata = (function () {\n    function OptionalMetadata() {\n    }\n    OptionalMetadata.prototype.toString = function () { return \"@Optional()\"; };\n    return OptionalMetadata;\n}());\nexports.OptionalMetadata = OptionalMetadata;\n/**\n * A marker metadata that marks a class as available to {@link Injector} for creation.\n *\n * ```typescript\n * @Injectable()\n * class UsefulService {}\n *\n * @Injectable()\n * class NeedsService {\n *   constructor(public service:UsefulService) {}\n * }\n *\n * var injector = Injector.resolveAndCreate([NeedsService, UsefulService]);\n * expect(injector.get(NeedsService).service instanceof UsefulService).toBe(true);\n * ```\n * {@link Injector} will throw {@link NoAnnotationError} when trying to instantiate a class that\n * does not have `@Injectable` marker, as shown in the example below.\n *\n * ```typescript\n * class UsefulService {}\n *\n * class NeedsService {\n *   constructor(public service:UsefulService) {}\n * }\n *\n * var injector = Injector.resolveAndCreate([NeedsService, UsefulService]);\n * expect(() => injector.get(NeedsService)).toThrowError();\n * ```\n */\nvar InjectableMetadata = (function () {\n    function InjectableMetadata(_id) {\n        this._id = _id;\n    }\n    Object.defineProperty(InjectableMetadata.prototype, \"id\", {\n        get: function () { return this._id; },\n        set: function (newID) { this._id = newID; },\n        enumerable: true,\n        configurable: true\n    });\n    return InjectableMetadata;\n}());\nexports.InjectableMetadata = InjectableMetadata;\n/**\n * Specifies that an {@link Injector} should retrieve a dependency only from itself.\n *\n * ### Example ([live demo](http://plnkr.co/edit/NeagAg?p=preview))\n *\n * ```typescript\n * class Dependency {\n * }\n *\n * @Injectable()\n * class NeedsDependency {\n *   dependency;\n *   constructor(@Self() dependency:Dependency) {\n *     this.dependency = dependency;\n *   }\n * }\n *\n * var inj = Injector.resolveAndCreate([Dependency, NeedsDependency]);\n * var nd = inj.get(NeedsDependency);\n *\n * expect(nd.dependency instanceof Dependency).toBe(true);\n *\n * var inj = Injector.resolveAndCreate([Dependency]);\n * var child = inj.resolveAndCreateChild([NeedsDependency]);\n * expect(() => child.get(NeedsDependency)).toThrowError();\n * ```\n */\nvar SelfMetadata = (function () {\n    function SelfMetadata() {\n    }\n    SelfMetadata.prototype.toString = function () { return \"@Self()\"; };\n    return SelfMetadata;\n}());\nexports.SelfMetadata = SelfMetadata;\n/**\n * Specifies that the dependency resolution should start from the parent injector.\n *\n * ### Example ([live demo](http://plnkr.co/edit/Wchdzb?p=preview))\n *\n * ```typescript\n * class Dependency {\n * }\n *\n * @Injectable()\n * class NeedsDependency {\n *   dependency;\n *   constructor(@SkipSelf() dependency:Dependency) {\n *     this.dependency = dependency;\n *   }\n * }\n *\n * var parent = Injector.resolveAndCreate([Dependency]);\n * var child = parent.resolveAndCreateChild([NeedsDependency]);\n * expect(child.get(NeedsDependency).dependency instanceof Depedency).toBe(true);\n *\n * var inj = Injector.resolveAndCreate([Dependency, NeedsDependency]);\n * expect(() => inj.get(NeedsDependency)).toThrowError();\n * ```\n */\nvar SkipSelfMetadata = (function () {\n    function SkipSelfMetadata() {\n    }\n    SkipSelfMetadata.prototype.toString = function () { return \"@SkipSelf()\"; };\n    return SkipSelfMetadata;\n}());\nexports.SkipSelfMetadata = SkipSelfMetadata;\n/**\n * Specifies that an injector should retrieve a dependency from any injector until reaching the\n * closest host.\n *\n * In Angular, a component element is automatically declared as a host for all the injectors in\n * its view.\n *\n * ### Example ([live demo](http://plnkr.co/edit/GX79pV?p=preview))\n *\n * In the following example `App` contains `ParentCmp`, which contains `ChildDirective`.\n * So `ParentCmp` is the host of `ChildDirective`.\n *\n * `ChildDirective` depends on two services: `HostService` and `OtherService`.\n * `HostService` is defined at `ParentCmp`, and `OtherService` is defined at `App`.\n *\n *```typescript\n * class OtherService {}\n * class HostService {}\n *\n * @Directive({\n *   selector: 'child-directive'\n * })\n * class ChildDirective {\n *   constructor(@Optional() @Host() os:OtherService, @Optional() @Host() hs:HostService){\n *     console.log(\"os is null\", os);\n *     console.log(\"hs is NOT null\", hs);\n *   }\n * }\n *\n * @Component({\n *   selector: 'parent-cmp',\n *   providers: [HostService],\n *   template: `\n *     Dir: <child-directive></child-directive>\n *   `,\n *   directives: [ChildDirective]\n * })\n * class ParentCmp {\n * }\n *\n * @Component({\n *   selector: 'app',\n *   providers: [OtherService],\n *   template: `\n *     Parent: <parent-cmp></parent-cmp>\n *   `,\n *   directives: [ParentCmp]\n * })\n * class App {\n * }\n *\n * bootstrap(App);\n *```\n */\nvar HostMetadata = (function () {\n    function HostMetadata() {\n    }\n    HostMetadata.prototype.toString = function () { return \"@Host()\"; };\n    return HostMetadata;\n}());\nexports.HostMetadata = HostMetadata;\n//# sourceMappingURL=metadata.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/di/metadata.js\n// module id = 7\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar metadata_1 = require(\"../di/metadata\");\n/**\n * Directives allow you to attach behavior to elements in the DOM.\n *\n * {@link DirectiveMetadata}s with an embedded view are called {@link ComponentMetadata}s.\n *\n * A directive consists of a single directive annotation and a controller class. When the\n * directive's `selector` matches\n * elements in the DOM, the following steps occur:\n *\n * 1. For each directive, the `ElementInjector` attempts to resolve the directive's constructor\n * arguments.\n * 2. Angular instantiates directives for each matched element using `ElementInjector` in a\n * depth-first order,\n *    as declared in the HTML.\n *\n * ## Understanding How Injection Works\n *\n * There are three stages of injection resolution.\n * - *Pre-existing Injectors*:\n *   - The terminal {@link Injector} cannot resolve dependencies. It either throws an error or, if\n * the dependency was\n *     specified as `@Optional`, returns `null`.\n *   - The platform injector resolves browser singleton resources, such as: cookies, title,\n * location, and others.\n * - *Component Injectors*: Each component instance has its own {@link Injector}, and they follow\n * the same parent-child hierarchy\n *     as the component instances in the DOM.\n * - *Element Injectors*: Each component instance has a Shadow DOM. Within the Shadow DOM each\n * element has an `ElementInjector`\n *     which follow the same parent-child hierarchy as the DOM elements themselves.\n *\n * When a template is instantiated, it also must instantiate the corresponding directives in a\n * depth-first order. The\n * current `ElementInjector` resolves the constructor dependencies for each directive.\n *\n * Angular then resolves dependencies as follows, according to the order in which they appear in the\n * {@link ViewMetadata}:\n *\n * 1. Dependencies on the current element\n * 2. Dependencies on element injectors and their parents until it encounters a Shadow DOM boundary\n * 3. Dependencies on component injectors and their parents until it encounters the root component\n * 4. Dependencies on pre-existing injectors\n *\n *\n * The `ElementInjector` can inject other directives, element-specific special objects, or it can\n * delegate to the parent\n * injector.\n *\n * To inject other directives, declare the constructor parameter as:\n * - `directive:DirectiveType`: a directive on the current element only\n * - `@Host() directive:DirectiveType`: any directive that matches the type between the current\n * element and the\n *    Shadow DOM root.\n * - `@Query(DirectiveType) query:QueryList<DirectiveType>`: A live collection of direct child\n * directives.\n * - `@QueryDescendants(DirectiveType) query:QueryList<DirectiveType>`: A live collection of any\n * child directives.\n *\n * To inject element-specific special objects, declare the constructor parameter as:\n * - `element: ElementRef` to obtain a reference to logical element in the view.\n * - `viewContainer: ViewContainerRef` to control child template instantiation, for\n * {@link DirectiveMetadata} directives only\n * - `bindingPropagation: BindingPropagation` to control change detection in a more granular way.\n *\n * ### Example\n *\n * The following example demonstrates how dependency injection resolves constructor arguments in\n * practice.\n *\n *\n * Assume this HTML template:\n *\n * ```\n * <div dependency=\"1\">\n *   <div dependency=\"2\">\n *     <div dependency=\"3\" my-directive>\n *       <div dependency=\"4\">\n *         <div dependency=\"5\"></div>\n *       </div>\n *       <div dependency=\"6\"></div>\n *     </div>\n *   </div>\n * </div>\n * ```\n *\n * With the following `dependency` decorator and `SomeService` injectable class.\n *\n * ```\n * @Injectable()\n * class SomeService {\n * }\n *\n * @Directive({\n *   selector: '[dependency]',\n *   inputs: [\n *     'id: dependency'\n *   ]\n * })\n * class Dependency {\n *   id:string;\n * }\n * ```\n *\n * Let's step through the different ways in which `MyDirective` could be declared...\n *\n *\n * ### No injection\n *\n * Here the constructor is declared with no arguments, therefore nothing is injected into\n * `MyDirective`.\n *\n * ```\n * @Directive({ selector: '[my-directive]' })\n * class MyDirective {\n *   constructor() {\n *   }\n * }\n * ```\n *\n * This directive would be instantiated with no dependencies.\n *\n *\n * ### Component-level injection\n *\n * Directives can inject any injectable instance from the closest component injector or any of its\n * parents.\n *\n * Here, the constructor declares a parameter, `someService`, and injects the `SomeService` type\n * from the parent\n * component's injector.\n * ```\n * @Directive({ selector: '[my-directive]' })\n * class MyDirective {\n *   constructor(someService: SomeService) {\n *   }\n * }\n * ```\n *\n * This directive would be instantiated with a dependency on `SomeService`.\n *\n *\n * ### Injecting a directive from the current element\n *\n * Directives can inject other directives declared on the current element.\n *\n * ```\n * @Directive({ selector: '[my-directive]' })\n * class MyDirective {\n *   constructor(dependency: Dependency) {\n *     expect(dependency.id).toEqual(3);\n *   }\n * }\n * ```\n * This directive would be instantiated with `Dependency` declared at the same element, in this case\n * `dependency=\"3\"`.\n *\n * ### Injecting a directive from any ancestor elements\n *\n * Directives can inject other directives declared on any ancestor element (in the current Shadow\n * DOM), i.e. on the current element, the\n * parent element, or its parents.\n * ```\n * @Directive({ selector: '[my-directive]' })\n * class MyDirective {\n *   constructor(@Host() dependency: Dependency) {\n *     expect(dependency.id).toEqual(2);\n *   }\n * }\n * ```\n *\n * `@Host` checks the current element, the parent, as well as its parents recursively. If\n * `dependency=\"2\"` didn't\n * exist on the direct parent, this injection would\n * have returned\n * `dependency=\"1\"`.\n *\n *\n * ### Injecting a live collection of direct child directives\n *\n *\n * A directive can also query for other child directives. Since parent directives are instantiated\n * before child directives, a directive can't simply inject the list of child directives. Instead,\n * the directive injects a {@link QueryList}, which updates its contents as children are added,\n * removed, or moved by a directive that uses a {@link ViewContainerRef} such as a `ngFor`, an\n * `ngIf`, or an `ngSwitch`.\n *\n * ```\n * @Directive({ selector: '[my-directive]' })\n * class MyDirective {\n *   constructor(@Query(Dependency) dependencies:QueryList<Dependency>) {\n *   }\n * }\n * ```\n *\n * This directive would be instantiated with a {@link QueryList} which contains `Dependency` 4 and\n * `Dependency` 6. Here, `Dependency` 5 would not be included, because it is not a direct child.\n *\n * ### Injecting a live collection of descendant directives\n *\n * By passing the descendant flag to `@Query` above, we can include the children of the child\n * elements.\n *\n * ```\n * @Directive({ selector: '[my-directive]' })\n * class MyDirective {\n *   constructor(@Query(Dependency, {descendants: true}) dependencies:QueryList<Dependency>) {\n *   }\n * }\n * ```\n *\n * This directive would be instantiated with a Query which would contain `Dependency` 4, 5 and 6.\n *\n * ### Optional injection\n *\n * The normal behavior of directives is to return an error when a specified dependency cannot be\n * resolved. If you\n * would like to inject `null` on unresolved dependency instead, you can annotate that dependency\n * with `@Optional()`.\n * This explicitly permits the author of a template to treat some of the surrounding directives as\n * optional.\n *\n * ```\n * @Directive({ selector: '[my-directive]' })\n * class MyDirective {\n *   constructor(@Optional() dependency:Dependency) {\n *   }\n * }\n * ```\n *\n * This directive would be instantiated with a `Dependency` directive found on the current element.\n * If none can be\n * found, the injector supplies `null` instead of throwing an error.\n *\n * ### Example\n *\n * Here we use a decorator directive to simply define basic tool-tip behavior.\n *\n * ```\n * @Directive({\n *   selector: '[tooltip]',\n *   inputs: [\n *     'text: tooltip'\n *   ],\n *   host: {\n *     '(mouseenter)': 'onMouseEnter()',\n *     '(mouseleave)': 'onMouseLeave()'\n *   }\n * })\n * class Tooltip{\n *   text:string;\n *   overlay:Overlay; // NOT YET IMPLEMENTED\n *   overlayManager:OverlayManager; // NOT YET IMPLEMENTED\n *\n *   constructor(overlayManager:OverlayManager) {\n *     this.overlay = overlay;\n *   }\n *\n *   onMouseEnter() {\n *     // exact signature to be determined\n *     this.overlay = this.overlayManager.open(text, ...);\n *   }\n *\n *   onMouseLeave() {\n *     this.overlay.close();\n *     this.overlay = null;\n *   }\n * }\n * ```\n * In our HTML template, we can then add this behavior to a `<div>` or any other element with the\n * `tooltip` selector,\n * like so:\n *\n * ```\n * <div tooltip=\"some text here\"></div>\n * ```\n *\n * Directives can also control the instantiation, destruction, and positioning of inline template\n * elements:\n *\n * A directive uses a {@link ViewContainerRef} to instantiate, insert, move, and destroy views at\n * runtime.\n * The {@link ViewContainerRef} is created as a result of `<template>` element, and represents a\n * location in the current view\n * where these actions are performed.\n *\n * Views are always created as children of the current {@link ViewMetadata}, and as siblings of the\n * `<template>` element. Thus a\n * directive in a child view cannot inject the directive that created it.\n *\n * Since directives that create views via ViewContainers are common in Angular, and using the full\n * `<template>` element syntax is wordy, Angular\n * also supports a shorthand notation: `<li *foo=\"bar\">` and `<li template=\"foo: bar\">` are\n * equivalent.\n *\n * Thus,\n *\n * ```\n * <ul>\n *   <li *foo=\"bar\" title=\"text\"></li>\n * </ul>\n * ```\n *\n * Expands in use to:\n *\n * ```\n * <ul>\n *   <template [foo]=\"bar\">\n *     <li title=\"text\"></li>\n *   </template>\n * </ul>\n * ```\n *\n * Notice that although the shorthand places `*foo=\"bar\"` within the `<li>` element, the binding for\n * the directive\n * controller is correctly instantiated on the `<template>` element rather than the `<li>` element.\n *\n * ## Lifecycle hooks\n *\n * When the directive class implements some {@link angular2/lifecycle_hooks} the callbacks are\n * called by the change detection at defined points in time during the life of the directive.\n *\n * ### Example\n *\n * Let's suppose we want to implement the `unless` behavior, to conditionally include a template.\n *\n * Here is a simple directive that triggers on an `unless` selector:\n *\n * ```\n * @Directive({\n *   selector: '[unless]',\n *   inputs: ['unless']\n * })\n * export class Unless {\n *   viewContainer: ViewContainerRef;\n *   templateRef: TemplateRef;\n *   prevCondition: boolean;\n *\n *   constructor(viewContainer: ViewContainerRef, templateRef: TemplateRef) {\n *     this.viewContainer = viewContainer;\n *     this.templateRef = templateRef;\n *     this.prevCondition = null;\n *   }\n *\n *   set unless(newCondition) {\n *     if (newCondition && (isBlank(this.prevCondition) || !this.prevCondition)) {\n *       this.prevCondition = true;\n *       this.viewContainer.clear();\n *     } else if (!newCondition && (isBlank(this.prevCondition) || this.prevCondition)) {\n *       this.prevCondition = false;\n *       this.viewContainer.create(this.templateRef);\n *     }\n *   }\n * }\n * ```\n *\n * We can then use this `unless` selector in a template:\n * ```\n * <ul>\n *   <li *unless=\"expr\"></li>\n * </ul>\n * ```\n *\n * Once the directive instantiates the child view, the shorthand notation for the template expands\n * and the result is:\n *\n * ```\n * <ul>\n *   <template [unless]=\"exp\">\n *     <li></li>\n *   </template>\n *   <li></li>\n * </ul>\n * ```\n *\n * Note also that although the `<li></li>` template still exists inside the `<template></template>`,\n * the instantiated\n * view occurs on the second `<li></li>` which is a sibling to the `<template>` element.\n */\nvar DirectiveMetadata = (function (_super) {\n    __extends(DirectiveMetadata, _super);\n    function DirectiveMetadata(_a) {\n        var _b = _a === void 0 ? {} : _a, selector = _b.selector, inputs = _b.inputs, attrs = _b.attrs, outputs = _b.outputs, host = _b.host, providers = _b.providers, exportAs = _b.exportAs, queries = _b.queries, legacy = _b.legacy;\n        var _this = _super.call(this) || this;\n        _this.selector = selector;\n        _this._inputs = inputs;\n        _this._attrs = attrs;\n        _this._outputs = outputs;\n        _this.host = host;\n        _this.exportAs = exportAs;\n        _this.queries = queries;\n        _this._providers = providers;\n        _this.legacy = legacy;\n        return _this;\n    }\n    Object.defineProperty(DirectiveMetadata.prototype, \"inputs\", {\n        /**\n         * Enumerates the set of data-bound input properties for a directive\n         *\n         * Angular automatically updates input properties during change detection.\n         *\n         * The `inputs` property defines a set of `directiveProperty` to `bindingProperty`\n         * configuration:\n         *\n         * - `directiveProperty` specifies the component property where the value is written.\n         * - `bindingProperty` specifies the DOM property where the value is read from.\n         *\n         * When `bindingProperty` is not provided, it is assumed to be equal to `directiveProperty`.\n         *\n         * ### Example ([live demo](http://plnkr.co/edit/ivhfXY?p=preview))\n         *\n         * The following example creates a component with two data-bound properties.\n         *\n         * ```typescript\n         * @Component({\n         *   selector: 'bank-account',\n         *   inputs: ['bankName', 'id: account-id'],\n         *   template: `\n         *     Bank Name: {{bankName}}\n         *     Account Id: {{id}}\n         *   `\n         * })\n         * class BankAccount {\n         *   bankName: string;\n         *   id: string;\n         *\n         *   // this property is not bound, and won't be automatically updated by Angular\n         *   normalizedBankName: string;\n         * }\n         *\n         * @Component({\n         *   selector: 'app',\n         *   template: `\n         *     <bank-account bank-name=\"RBC\" account-id=\"4747\"></bank-account>\n         *   `,\n         *   directives: [BankAccount]\n         * })\n         * class App {}\n         *\n         * bootstrap(App);\n         * ```\n         *\n         */\n        get: function () {\n            return this._inputs;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DirectiveMetadata.prototype, \"attrs\", {\n        /**\n         * Enumerates the set of attribute-bound input properties for a directive\n         *\n         * Angular automatically updates input properties during change detection.\n         *\n         * The `attrs` property defines a set of `directiveProperty` to `bindingProperty`\n         * configuration:\n         *\n         * - `directiveProperty` specifies the component property where the value is written.\n         * - `bindingProperty` specifies the DOM property where the value is read from.\n         *\n         * When `bindingProperty` is not provided, it is assumed to be equal to `directiveProperty`.\n         *\n         * #### Behind the scenes:\n         * This is just Angular 1 `@` binding on `bindToController` object.\n         *\n         * So this `attrs: ['bankName', 'id: account-id']`\n         * is equal to: `bindToController{bankName:'@',id:'@accountId'}`\n         *\n         *\n         * The following example creates a component with two attribute-bound properties.\n         *\n         * ```typescript\n         * @Component({\n         *   selector: 'bank-account',\n         *   attrs: ['bankName', 'id: accountId'],\n         *   template: `\n         *     Bank Name: {{ctrl.bankName}}\n         *     Account Id: {{ctrl.id}}\n         *   `\n         * })\n         * class BankAccount {\n         *   bankName: string;\n         *   id: string;\n         *\n         *   // this property is not bound, and won't be automatically updated by Angular\n         *   normalizedBankName: string;\n         * }\n         *\n         * @Component({\n         *   selector: 'app',\n         *   template: `\n         *     <bank-account bank-name=\"RBC\" account-id=\"4747\"></bank-account>\n         *   `\n         * })\n         * class App {}\n         *\n         * ```\n         *\n         * Will output:\n         * ```html\n         * <bank-account bank-name=\"RBC\" account-id=\"4747\">\n         *    Bank Name: RBC\n         *    Account Id: 4747\n         * </bank-account>\n         * ```\n         *\n         */\n        get: function () {\n            return this._attrs;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DirectiveMetadata.prototype, \"outputs\", {\n        /**\n         * Enumerates the set of event-bound output properties.\n         *\n         * When an output property emits an event, an event handler attached to that event\n         * the template is invoked.\n         *\n         * The `outputs` property defines a set of `directiveProperty` to `bindingProperty`\n         * configuration:\n         *\n         * - `directiveProperty` specifies the component property that emits events.\n         * - `bindingProperty` specifies the DOM property the event handler is attached to.\n         *\n         * ### Example ([live demo](http://plnkr.co/edit/d5CNq7?p=preview))\n         *\n         * ```typescript\n         * @Directive({\n         *   selector: 'interval-dir',\n         *   outputs: ['everySecond', 'five5Secs: everyFiveSeconds']\n         * })\n         * class IntervalDir {\n         *   everySecond = new EventEmitter();\n         *   five5Secs = new EventEmitter();\n         *\n         *   constructor() {\n         *     setInterval(() => this.everySecond.emit(\"event\"), 1000);\n         *     setInterval(() => this.five5Secs.emit(\"event\"), 5000);\n         *   }\n         * }\n         *\n         * @Component({\n         *   selector: 'app',\n         *   template: `\n         *     <interval-dir (every-second)=\"everySecond()\" (every-five-seconds)=\"everyFiveSeconds()\">\n         *     </interval-dir>\n         *   `,\n         *   directives: [IntervalDir]\n         * })\n         * class App {\n         *   everySecond() { console.log('second'); }\n         *   everyFiveSeconds() { console.log('five seconds'); }\n         * }\n         * bootstrap(App);\n         * ```\n         *\n         */\n        get: function () {\n            return this._outputs;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DirectiveMetadata.prototype, \"providers\", {\n        /**\n         * Defines the set of injectable objects that are visible to a Directive and its light DOM\n         * children.\n         *\n         * ## Simple Example\n         *\n         * Here is an example of a class that can be injected:\n         *\n         * ```\n         * class Greeter {\n         *    greet(name:string) {\n         *      return 'Hello ' + name + '!';\n         *    }\n         * }\n         *\n         * @Directive({\n         *   selector: 'greet',\n         *   bindings: [\n         *     Greeter\n         *   ]\n         * })\n         * class HelloWorld {\n         *   greeter:Greeter;\n         *\n         *   constructor(greeter:Greeter) {\n         *     this.greeter = greeter;\n         *   }\n         * }\n         * ```\n         */\n        get: function () {\n            return this._providers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return DirectiveMetadata;\n}(metadata_1.InjectableMetadata));\nexports.DirectiveMetadata = DirectiveMetadata;\n/**\n * Declare reusable UI building blocks for an application.\n *\n * Each Angular component requires a single `@Component` annotation. The\n * `@Component`\n * annotation specifies when a component is instantiated, and which properties and hostListeners it\n * binds to.\n *\n * When a component is instantiated, Angular\n * - creates a shadow DOM for the component.\n * - loads the selected template into the shadow DOM.\n * - creates all the injectable objects configured with `providers` and `viewProviders`.\n *\n * All template expressions and statements are then evaluated against the component instance.\n *\n * ## Lifecycle hooks\n *\n * When the component class implements some {@link angular2/lifecycle_hooks} the callbacks are\n * called by the change detection at defined points in time during the life of the component.\n *\n * ### Example\n *\n * {@example core/ts/metadata/metadata.ts region='component'}\n */\nvar ComponentMetadata = (function (_super) {\n    __extends(ComponentMetadata, _super);\n    function ComponentMetadata(_a) {\n        var _b = _a === void 0 ? {} : _a, selector = _b.selector, inputs = _b.inputs, attrs = _b.attrs, outputs = _b.outputs, host = _b.host, exportAs = _b.exportAs, moduleId = _b.moduleId, providers = _b.providers, viewProviders = _b.viewProviders, _c = _b.changeDetection, changeDetection = _c === void 0 ? 1 /* Default */ : _c, queries = _b.queries, templateUrl = _b.templateUrl, template = _b.template, styleUrls = _b.styleUrls, styles = _b.styles, legacy = _b.legacy;\n        var _this = _super.call(this, {\n            selector: selector,\n            inputs: inputs,\n            attrs: attrs,\n            outputs: outputs,\n            host: host,\n            exportAs: exportAs,\n            providers: providers,\n            queries: queries,\n            legacy: legacy\n        }) || this;\n        _this.changeDetection = changeDetection;\n        _this._viewProviders = viewProviders;\n        _this.templateUrl = templateUrl;\n        _this.template = template;\n        _this.styleUrls = styleUrls;\n        _this.styles = styles;\n        _this.moduleId = moduleId;\n        return _this;\n    }\n    Object.defineProperty(ComponentMetadata.prototype, \"viewProviders\", {\n        /**\n         * Defines the set of injectable objects that are visible to its view DOM children.\n         *\n         * ## Simple Example\n         *\n         * Here is an example of a class that can be injected:\n         *\n         * ```\n         * class Greeter {\n         *    greet(name:string) {\n         *      return 'Hello ' + name + '!';\n         *    }\n         * }\n         *\n         * @Directive({\n         *   selector: 'needs-greeter'\n         * })\n         * class NeedsGreeter {\n         *   greeter:Greeter;\n         *\n         *   constructor(greeter:Greeter) {\n         *     this.greeter = greeter;\n         *   }\n         * }\n         *\n         * @Component({\n         *   selector: 'greet',\n         *   viewProviders: [\n         *     Greeter\n         *   ],\n         *   template: `<needs-greeter></needs-greeter>`,\n         *   directives: [NeedsGreeter]\n         * })\n         * class HelloWorld {\n         * }\n         *\n         * ```\n         */\n        get: function () {\n            return this._viewProviders;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ComponentMetadata;\n}(DirectiveMetadata));\nexports.ComponentMetadata = ComponentMetadata;\n/**\n * Declares a data-bound input property.\n *\n * Angular automatically updates data-bound properties during change detection.\n *\n * `InputMetadata` takes an optional parameter that specifies the name\n * used when instantiating a component in the template. When not provided,\n * the name of the decorated property is used.\n *\n * ### Example\n *\n * The following example creates a component with two input properties.\n *\n * ```typescript\n * @Component({\n *   selector: 'bank-account',\n *   template: `\n *     Bank Name: {{bankName}}\n *     Account Id: {{id}}\n *   `\n * })\n * class BankAccount {\n *   @Input() bankName: string;\n *   @Input('account-id') id: string;\n *\n *   // this property is not bound, and won't be automatically updated by Angular\n *   normalizedBankName: string;\n * }\n *\n * @Component({\n *   selector: 'app',\n *   template: `\n *     <bank-account bank-name=\"RBC\" account-id=\"4747\"></bank-account>\n *   `,\n *   directives: [BankAccount]\n * })\n * class App {}\n *\n * bootstrap(App);\n * ```\n */\nvar InputMetadata = (function () {\n    /**\n     *\n     * @param {string?} bindingPropertyName Name used when instantiating a component in the template.\n     */\n    function InputMetadata(bindingPropertyName) {\n        this.bindingPropertyName = bindingPropertyName;\n    }\n    return InputMetadata;\n}());\nexports.InputMetadata = InputMetadata;\n/**\n * Declares a data-bound attribute property.\n *\n * Angular automatically updates data-bound properties during change detection.\n *\n * `AttrMetadata` takes an optional parameter that specifies the name\n * used when instantiating a component in the template. When not provided,\n * the name of the decorated property is used.\n *\n *\n * #### Behind the scenes:\n * This is just Angular 1 `@` binding on `bindToController` object.\n *\n * So this `attrs: ['bankName', 'id: account-id']`\n * is equal to: `bindToController{bankName:'@',id:'@accountId'}`\n *\n * ### Example\n *\n * The following example creates a component with two attribute-bound properties.\n *\n * ```typescript\n * @Component({\n *   selector: 'bank-account',\n *   template: `\n *     Bank Name: {{ctrl.bankName}}\n *     Account Id: {{ctrl.id}}\n *   `\n * })\n * class BankAccount {\n *    @Attr() bankName: string;\n *    @Attr('accountId') id: string;\n *\n *   // this property is not bound, and won't be automatically updated by Angular\n *   normalizedBankName: string;\n * }\n *\n * @Component({\n *   selector: 'app',\n *   template: `\n *     <bank-account bank-name=\"RBC\" account-id=\"4747\"></bank-account>\n *   `\n * })\n * class App {}\n * ```\n *\n * Will output:\n * ```html\n * <bank-account bank-name=\"RBC\" account-id=\"4747\">\n *    Bank Name: RBC\n *    Account Id: 4747\n * </bank-account>\n * ```\n *\n */\nvar AttrMetadata = (function () {\n    /**\n     *\n     * @param {string?} bindingPropertyName Name used when instantiating a component in the template.\n     */\n    function AttrMetadata(bindingPropertyName) {\n        this.bindingPropertyName = bindingPropertyName;\n    }\n    return AttrMetadata;\n}());\nexports.AttrMetadata = AttrMetadata;\n/**\n * Declares an event-bound output property.\n *\n * When an output property emits an event, an event handler attached to that event\n * the template is invoked.\n *\n * `OutputMetadata` takes an optional parameter that specifies the name\n * used when instantiating a component in the template. When not provided,\n * the name of the decorated property is used.\n *\n * ### Example\n *\n * ```typescript\n * @Directive({\n *   selector: 'interval-dir',\n * })\n * class IntervalDir {\n *   @Output() everySecond = new EventEmitter();\n *   @Output('everyFiveSeconds') five5Secs = new EventEmitter();\n *\n *   constructor() {\n *     setInterval(() => this.everySecond.emit(\"event\"), 1000);\n *     setInterval(() => this.five5Secs.emit(\"event\"), 5000);\n *   }\n * }\n *\n * @Component({\n *   selector: 'app',\n *   template: `\n *     <interval-dir (every-second)=\"everySecond()\" (every-five-seconds)=\"everyFiveSeconds()\">\n *     </interval-dir>\n *   `,\n *   directives: [IntervalDir]\n * })\n * class App {\n *   everySecond() { console.log('second'); }\n *   everyFiveSeconds() { console.log('five seconds'); }\n * }\n * bootstrap(App);\n * ```\n */\nvar OutputMetadata = (function () {\n    /**\n     *\n     * @param {string?} bindingPropertyName Name used when instantiating a component in the template.\n     */\n    function OutputMetadata(bindingPropertyName) {\n        this.bindingPropertyName = bindingPropertyName;\n    }\n    return OutputMetadata;\n}());\nexports.OutputMetadata = OutputMetadata;\n/**\n * Declares a host property binding.\n *\n * Angular automatically checks host property bindings during change detection.\n * If a binding changes, it will update the host element of the directive.\n *\n * `HostBindingMetadata` takes an optional parameter that specifies the property\n * name of the host element that will be updated. When not provided,\n * the class property name is used.\n *\n * ### Example\n *\n * The following example creates a directive that sets the `valid` and `invalid` classes\n * on the DOM element that has ngModel directive on it.\n *\n * ```typescript\n * @Directive({selector: '[ngModel]'})\n * class NgModelStatus {\n *   constructor(public control:NgModel) {}\n *   @HostBinding('[class.valid]') get valid { return this.control.valid; }\n *   @HostBinding('[class.invalid]') get invalid { return this.control.invalid; }\n * }\n *\n * @Component({\n *   selector: 'app',\n *   template: `<input [(ngModel)]=\"prop\">`,\n *   directives: [FORM_DIRECTIVES, NgModelStatus]\n * })\n * class App {\n *   prop;\n * }\n *\n * bootstrap(App);\n * ```\n */\nvar HostBindingMetadata = (function () {\n    function HostBindingMetadata(hostPropertyName) {\n        this.hostPropertyName = hostPropertyName;\n    }\n    return HostBindingMetadata;\n}());\nexports.HostBindingMetadata = HostBindingMetadata;\n/**\n * Declares a host listener.\n *\n * Angular will invoke the decorated method when the host element emits the specified event.\n *\n * If the decorated method returns `false`, then `preventDefault` is applied on the DOM\n * event.\n *\n * ### Example\n *\n * The following example declares a directive that attaches a click listener to the button and\n * counts clicks.\n *\n * ```typescript\n * @Directive({selector: 'button[counting]'})\n * class CountClicks {\n *   numberOfClicks = 0;\n *\n *   @HostListener('click', ['$event.target'])\n *   onClick(btn) {\n *     console.log(\"button\", btn, \"number of clicks:\", this.numberOfClicks++);\n *   }\n * }\n *\n * @Component({\n *   selector: 'app',\n *   template: `<button counting>Increment</button>`,\n *   directives: [CountClicks]\n * })\n * class App {}\n *\n * bootstrap(App);\n * ```\n */\nvar HostListenerMetadata = (function () {\n    function HostListenerMetadata(eventName, args) {\n        this.eventName = eventName;\n        this.args = args;\n    }\n    return HostListenerMetadata;\n}());\nexports.HostListenerMetadata = HostListenerMetadata;\n/**\n * Declares an Angular Module.\n */\nvar NgModuleMetadata = (function (_super) {\n    __extends(NgModuleMetadata, _super);\n    function NgModuleMetadata(options) {\n        if (options === void 0) { options = {}; }\n        var _this = \n        // We cannot use destructuring of the constructor argument because `exports` is a\n        // protected symbol in CommonJS and closure tries to aggressively optimize it away.\n        _super.call(this) || this;\n        _this._providers = options.providers;\n        _this.declarations = options.declarations;\n        _this.imports = options.imports;\n        return _this;\n    }\n    Object.defineProperty(NgModuleMetadata.prototype, \"providers\", {\n        get: function () { return this._providers; },\n        enumerable: true,\n        configurable: true\n    });\n    return NgModuleMetadata;\n}(metadata_1.InjectableMetadata));\nexports.NgModuleMetadata = NgModuleMetadata;\n//# sourceMappingURL=metadata_directives.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/metadata_directives.js\n// module id = 8\n// module chunks = 0","\"use strict\";\nvar reflector_1 = require(\"./reflector\");\nvar reflection_capabilities_1 = require(\"./reflection_capabilities\");\n/**\n * The {@link Reflector} used internally in Angular to access metadata\n * about symbols.\n */\nexports.reflector = new reflector_1.Reflector(new reflection_capabilities_1.ReflectionCapabilities());\n//# sourceMappingURL=reflection.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/reflection/reflection.js\n// module id = 9\n// module chunks = 0","//{CODE:CGU01}\r\n// di.core.global.utility\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    window.$di.utility.util = {\r\n    \tisArray: isArray,\r\n\t\tisNonEmptyArray: isNonEmptyArray,\r\n        isBoolean: isBoolean,\r\n        isNull: isNull,\r\n        isNullOrUndefined: isNullOrUndefined,\r\n        isNumber: isNumber,\r\n        isDecimalNumber: isDecimalNumber,\r\n        isString: isString,\r\n        isNonEmptyString: isNonEmptyString,\r\n        isSymbol: isSymbol,\r\n        isUndefined: isUndefined,\r\n        isRegExp: isRegExp,\r\n        isObject: isObject,\r\n        isEmptyObject: isEmptyObject,\r\n        isRealObject: isRealObject,\r\n        isDate: isDate,\r\n        isError: isError,\r\n        isFunction: isFunction,\r\n        isPrimitive: isPrimitive,\r\n        isDefined: isDefined,\r\n        extend: extend,\r\n        isAnyObjectPropertyDefined: isAnyObjectPropertyDefined,\r\n        toSnakeCase: toSnakeCase,\r\n        hasValue: hasValue\r\n    };\r\n\r\n    return window.$di.utility.util;\r\n\r\n    function isArray(arg) {\r\n        return !isNullOrUndefined(arg) && Array.isArray(arg);\r\n    }\r\n\r\n    function isNonEmptyArray(arg) {\r\n    \treturn isArray(arg) && arg.length > 0;\r\n    }\r\n\r\n    function isBoolean(arg) {\r\n        return !isNullOrUndefined(arg) && typeof arg === 'boolean';\r\n    }\r\n    \r\n    function isNull(arg) {\r\n        return arg === null;\r\n    }\r\n\r\n    function isNullOrUndefined(arg) {\r\n        return isNull(arg) || isUndefined(arg);\r\n    }\r\n\r\n    function isNumber(arg) {\r\n        return !isNullOrUndefined(arg) && typeof arg === 'number';\r\n    }\r\n\r\n    function isDecimalNumber(arg) {\r\n        return isNumber(arg) && Math.floor(arg) != arg;\r\n    }\r\n\r\n    function isString(arg) {\r\n        return !isNullOrUndefined(arg) && typeof arg === 'string';\r\n    }\r\n\r\n    function isNonEmptyString(arg) {\r\n        return isString(arg) && arg !== '';\r\n    }\r\n\r\n    function isSymbol(arg) {\r\n        return !isNullOrUndefined(arg) && typeof arg === 'symbol';\r\n    }\r\n\r\n    function isUndefined(arg) {\r\n        return arg === void 0;\r\n    }\r\n\r\n    function isRegExp(arg) {\r\n        return isObject(arg) && objectToString(arg) === '[object RegExp]';\r\n    }\r\n\r\n    function isObject(arg) {\r\n        return !isNullOrUndefined(arg) && typeof arg === 'object';\r\n    }\r\n\r\n    function isEmptyObject(arg) {\r\n        if (!isObject(arg)) {\r\n            return false;//false result implies arg is non empty object, not that it is not an object\r\n        }\r\n\r\n        var name;\r\n\r\n        for (name in arg) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    function isRealObject(arg) {\r\n        return !isNullOrUndefined(arg) && isObject(arg) && !isEmptyObject(arg);\r\n    }\r\n\r\n    function isDate(arg) {\r\n        return isObject(arg) && objectToString(arg) === '[object Date]';\r\n    }\r\n\r\n    function isError(arg) {\r\n        return isObject(arg) &&\r\n            (objectToString(arg) === '[object Error]' || arg instanceof Error);\r\n    }\r\n\r\n    function isFunction(arg) {\r\n        return !isNullOrUndefined(arg) && typeof arg === 'function';\r\n    }\r\n\r\n    function isPrimitive(arg) {\r\n        return arg === null ||\r\n               typeof arg === 'boolean' ||\r\n               typeof arg === 'number' ||\r\n               typeof arg === 'string' ||\r\n               typeof arg === 'symbol' ||  // ES6 symbol\r\n               typeof arg === 'undefined';\r\n    }\r\n\r\n    function objectToString(o) {\r\n        return Object.prototype.toString.call(o);\r\n    }\r\n\r\n    function isDefined() {\r\n        for (var argI = 0; argI < arguments.length; ++argI) {\r\n            if (isUndefined(arguments[argI])) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Copies properties from source to destination object\r\n     * If any properties are an array, the array is emptied and filled with the items from source\r\n     * to preserve any references to the array property\r\n     * @param dest\r\n     * @param source\r\n     */\r\n    function extend(dest, source) {\r\n        if (!isObject(source)) {\r\n            return;\r\n        }\r\n\r\n        for (var attr in source) {\r\n            if (source.hasOwnProperty(attr)) {\r\n            \tif (isArray(source[attr])) {\r\n            \t\tif (isArray(dest[attr]) === false){\r\n\t\t\t            dest[attr] = [];\r\n\t\t            }\r\n                    dest[attr].fill(source[attr]);\r\n                } else {\r\n                    dest[attr] = source[attr];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function isAnyObjectPropertyDefined(arg, ignoredProperties) {\r\n    \tif (!isObject(arg)) {\r\n    \t\treturn false;\r\n    \t}\r\n\r\n    \tif (!isNonEmptyArray(ignoredProperties)) {\r\n    \t\tignoredProperties = [];\r\n    \t}\r\n\r\n    \tfor (var property in arg) {\r\n    \t\tif (arg.hasOwnProperty(property)\r\n\t\t\t\t&& !isNullOrUndefined(arg[property])\r\n\t\t\t\t&& arg[property] !== ''\r\n\t\t\t\t&& !contains(ignoredProperties, property)) {\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t}\r\n\r\n    \treturn false;\r\n\r\n    \tfunction contains(arrhaystack, needle) {\r\n    \t\treturn (arrhaystack.indexOf(needle) > -1);\r\n    \t}\r\n    }\r\n    \r\n    function toSnakeCase(name, separator) {\r\n        separator = separator || '_';\r\n        return name.replace(/[A-Z]/g,\r\n            function (letter, pos) {\r\n                return (pos ? separator : '') + letter.toLowerCase();\r\n            });\r\n    }\r\n\r\n    function hasValue() {\r\n        for (var argI = 0; argI < arguments.length; ++argI) {\r\n            if (isNullOrUndefined(arguments[argI])) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/utility/util.js","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\nvar reflection_1 = require(\"../reflection/reflection\");\nvar pipe_provider_1 = require(\"../pipes/pipe_provider\");\nvar directive_provider_1 = require(\"../directives/directive_provider\");\nvar collections_1 = require(\"../../facade/collections\");\nvar forward_ref_1 = require(\"./forward_ref\");\nvar exceptions_1 = require(\"../../facade/exceptions\");\nvar provider_util_1 = require(\"./provider_util\");\nvar provider_util_2 = require(\"./provider_util\");\nvar provider_util_3 = require(\"./provider_util\");\nvar Provider = (function () {\n    function Provider(token, _a) {\n        var useClass = _a.useClass, useValue = _a.useValue, useExisting = _a.useExisting, useFactory = _a.useFactory, deps = _a.deps, multi = _a.multi;\n        this.token = token;\n        this.useClass = useClass;\n        this.useValue = useValue;\n        this.useExisting = useExisting;\n        this.useFactory = useFactory;\n        this.dependencies = deps;\n        this._multi = multi;\n    }\n    Object.defineProperty(Provider.prototype, \"multi\", {\n        /**\n         * Creates multiple providers matching the same token (a multi-provider).\n         *\n         * Multi-providers are used for creating pluggable service, where the system comes\n         * with some default providers, and the user can register additional providers.\n         * The combination of the default providers and the additional providers will be\n         * used to drive the behavior of the system.\n         *\n         * ### Example\n         *\n         * ```typescript\n         * var injector = Injector.resolveAndCreate([\n         *   new Provider(\"Strings\", { useValue: \"String1\", multi: true}),\n         *   new Provider(\"Strings\", { useValue: \"String2\", multi: true})\n         * ]);\n         *\n         * expect(injector.get(\"Strings\")).toEqual([\"String1\", \"String2\"]);\n         * ```\n         *\n         * Multi-providers and regular providers cannot be mixed. The following\n         * will throw an exception:\n         *\n         * ```typescript\n         * var injector = Injector.resolveAndCreate([\n         *   new Provider(\"Strings\", { useValue: \"String1\", multi: true }),\n         *   new Provider(\"Strings\", { useValue: \"String2\"})\n         * ]);\n         * ```\n         */\n        get: function () { return lang_1.normalizeBool(this._multi); },\n        enumerable: true,\n        configurable: true\n    });\n    return Provider;\n}());\nexports.Provider = Provider;\nvar ProviderBuilder = (function () {\n    function ProviderBuilder() {\n    }\n    ProviderBuilder.createFromType = function (type, _a) {\n        var useClass = _a.useClass, useValue = _a.useValue, useFactory = _a.useFactory, deps = _a.deps;\n        // ...provide('myFactory',{useFactory: () => () => { return new Foo(); } })\n        if (lang_1.isPresent(useFactory)) {\n            var factoryToken = getInjectableName(type);\n            var injectableDeps = lang_1.isArray(deps) ? deps.map(getInjectableName) : [];\n            useFactory.$inject = injectableDeps;\n            return [\n                factoryToken,\n                useFactory\n            ];\n        }\n        // ...provide(opaqueTokenInst,{useValue: {foo:12312} })\n        // ...provide('myValue',{useValue: {foo:12312} })\n        if (lang_1.isPresent(useValue)) {\n            var valueToken = getInjectableName(type);\n            return [\n                valueToken,\n                useValue\n            ];\n        }\n        var injectableType = lang_1.isString(type) || provider_util_1.isOpaqueToken(type)\n            ? forward_ref_1.resolveForwardRef(useClass)\n            : forward_ref_1.resolveForwardRef(type);\n        var overrideName = lang_1.isString(type) || provider_util_1.isOpaqueToken(type)\n            ? getInjectableName(type)\n            : '';\n        if (!lang_1.isType(injectableType)) {\n            throw new Error(\"\\n      Provider registration: \\\"\" + lang_1.stringify(injectableType) + \"\\\":\\n      =======================================================\\n      token \" + lang_1.stringify(injectableType) + \" must be type of Type, You cannot provide none class\\n      \");\n        }\n        /**\n         *\n         * @type {any[]}\n         */\n        var annotations = reflection_1.reflector.annotations(injectableType);\n        var rootAnnotation = annotations[0];\n        // No Annotation === it's config function !!!\n        // NOTE: we are not checking anymore if user annotated the class or not,\n        // we cannot do that anymore at the costs for nic config functions registration\n        if (collections_1.ListWrapper.isEmpty(annotations)) {\n            return [injectableType];\n        }\n        if (collections_1.ListWrapper.size(annotations) > 1) {\n            var hasComponentAnnotation = annotations.some(function (meta) { return provider_util_2.isComponent(meta); });\n            var hasNotAllowedSecondAnnotation = annotations.some(function (meta) {\n                return provider_util_1.isDirectiveLike(meta) || provider_util_1.isService(meta) || provider_util_1.isPipe(meta);\n            });\n            if (!hasComponentAnnotation || (hasNotAllowedSecondAnnotation && hasComponentAnnotation)) {\n                throw Error(\"\\n        Provider registration: \\\"\" + lang_1.stringify(injectableType) + \"\\\":\\n        =======================================================\\n        - you cannot use more than 1 class decorator,\\n        - you've used \" + annotations.map(function (meta) { return lang_1.stringify(meta.constructor); }) + \"\\n        Multiple class decorators are allowed only for component class: [ @Component, @StateConfig? ]\\n        \");\n            }\n        }\n        injectableType.$inject = _dependenciesFor(injectableType);\n        if (provider_util_1.isPipe(rootAnnotation)) {\n            return pipe_provider_1.pipeProvider.createFromType(injectableType);\n        }\n        if (provider_util_1.isDirectiveLike(rootAnnotation)) {\n            return directive_provider_1.directiveProvider.createFromType(injectableType);\n        }\n        if (provider_util_1.isService(rootAnnotation)) {\n            return [\n                overrideName || rootAnnotation.id,\n                injectableType\n            ];\n        }\n    };\n    return ProviderBuilder;\n}());\n/**\n * should extract the string token from provided Type and add $inject angular 1 annotation to constructor if @Inject\n * was used\n * @returns {[string,Type]}\n * @deprecated\n */\nfunction provide(type, _a) {\n    var _b = _a === void 0 ? {} : _a, useClass = _b.useClass, useValue = _b.useValue, useFactory = _b.useFactory, deps = _b.deps;\n    return ProviderBuilder.createFromType(type, { useClass: useClass, useValue: useValue, useFactory: useFactory, deps: deps });\n}\nexports.provide = provide;\n/**\n * creates $inject array Angular 1 DI annotation strings for provided Type\n * @param typeOrFunc\n * @returns {any}\n * @private\n * @internal\n */\nfunction _dependenciesFor(typeOrFunc) {\n    var params = reflection_1.reflector.parameters(typeOrFunc);\n    if (lang_1.isBlank(params))\n        return [];\n    if (params.some(function (param) { return lang_1.isBlank(param) || collections_1.ListWrapper.isEmpty(param); })) {\n        throw new Error(exceptions_1.getErrorMsg(typeOrFunc, \"you cannot have holes in constructor DI injection\"));\n    }\n    return params\n        .map(function (p) { return _extractToken(p); });\n}\nexports._dependenciesFor = _dependenciesFor;\n/**\n * should extract service/values/directives/pipes token from constructor @Inject() paramMetadata\n * @param metadata\n * @private\n * @internal\n */\nfunction _extractToken(metadata) {\n    // this is token obtained via design:paramtypes via Reflect.metadata\n    var paramMetadata = metadata.filter(lang_1.isType)[0];\n    // this is token obtained from @Inject() usage  for DI\n    var injectMetadata = metadata.filter(provider_util_3.isInjectMetadata)[0];\n    if (lang_1.isBlank(injectMetadata) && lang_1.isBlank(paramMetadata)) {\n        return;\n    }\n    var _a = (injectMetadata || {}).token, token = _a === void 0 ? undefined : _a;\n    var injectable = forward_ref_1.resolveForwardRef(token) || paramMetadata;\n    return getInjectableName(injectable);\n}\nexports._extractToken = _extractToken;\n/**\n *  A utility function that can be used to get the angular 1 injectable's name. Needed for some cases, since\n *  injectable names are auto-created.\n *\n *  Works for string/OpaqueToken/Type\n *  Note: Type must be decorated otherwise it throws\n *\n *  @example\n *  ```typescript\n *  import { Injectable, getInjectableName } from 'ng-metadata/core';\n *  // this is given some random name like 'myService48' when it's created with `module.service`\n *\n *  @Injectable\n *  class MyService {}\n *\n *  console.log(getInjectableName(MyService)); // 'myService48'\n *  ```\n *\n * @param {ProviderType}  injectable\n * @returns {string}\n */\nfunction getInjectableName(injectable) {\n    // @Inject('foo') foo\n    if (lang_1.isString(injectable)) {\n        return injectable;\n    }\n    // const fooToken = new OpaqueToken('foo')\n    // @Inject(fooToken) foo\n    if (provider_util_1.isOpaqueToken(injectable)) {\n        return injectable.desc;\n    }\n    // @Injectable()\n    // class SomeService(){}\n    //\n    // @Inject(SomeService) someSvc\n    // someSvc: SomeService\n    if (lang_1.isType(injectable)) {\n        // only the first class annotations is injectable\n        var annotation = reflection_1.reflector.annotations(injectable)[0];\n        if (lang_1.isBlank(annotation)) {\n            throw new Error(\"\\n        cannot get injectable name token from none decorated class \" + lang_1.getFuncName(injectable) + \"\\n        Only decorated classes by one of [ @Injectable,@Directive,@Component,@Pipe ], can be injected by reference\\n      \");\n        }\n        if (provider_util_1.isPipe(annotation)) {\n            return annotation.name;\n        }\n        if (provider_util_1.isDirectiveLike(annotation)) {\n            return lang_1.resolveDirectiveNameFromSelector(annotation.selector);\n        }\n        if (provider_util_1.isService(annotation)) {\n            return annotation.id;\n        }\n    }\n}\nexports.getInjectableName = getInjectableName;\n/**\n *\n * @param metadata\n * @returns {boolean}\n * @private\n * @internal\n * @deprecated\n *\n * @TODO: delete this\n */\nfunction _areAllDirectiveInjectionsAtTail(metadata) {\n    return metadata.every(function (paramMetadata, idx, arr) {\n        var isCurrentDirectiveInjection = paramMetadata.length > 1;\n        var hasPrev = idx > 0;\n        var hasNext = idx < arr.length - 1;\n        if (hasPrev) {\n            var prevInjection = arr[idx - 1];\n            var isPrevDirectiveInjection = prevInjection.length > 1;\n            if (isPrevDirectiveInjection && !isCurrentDirectiveInjection) {\n                return false;\n            }\n        }\n        if (hasNext) {\n            var nextInjection = arr[idx + 1];\n            var isNextDirectiveInjection = nextInjection.length > 1;\n            if (!isNextDirectiveInjection && isNextDirectiveInjection) {\n                return false;\n            }\n        }\n        return true;\n    });\n}\nexports._areAllDirectiveInjectionsAtTail = _areAllDirectiveInjectionsAtTail;\n//# sourceMappingURL=provider.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/di/provider.js\n// module id = 11\n// module chunks = 0","//{CODE:CGE02}\r\n// di.core.global.exception\r\ndefine([\r\n    '../utility/util'\r\n],\r\nfunction (util) {\r\n    'use strict';\r\n\r\n    throwIfNullOrUndefined('CGE0202E', util, 'util');\r\n\r\n    /** Guard object with methods for validating values and throwing di exceptions with source */\r\n    window.$di.exception.guard = {\r\n        getNewError: getNewError,\r\n        throwNew: throwNew,\r\n        throwIf: throwIf,\r\n        throwIfNull: throwIfNull,\r\n        throwIfUndefined: throwIfUndefined,\r\n        throwIfNullOrUndefined: throwIfNullOrUndefined,\r\n        throwIfNotAnObject: throwIfNotAnObject,\r\n        throwIfNotANumber: throwIfNotANumber,\r\n        throwIfZero: throwIfZero,\r\n        throwIfNegative: throwIfNegative,\r\n        throwIfZeroOrNegative: throwIfZeroOrNegative,\r\n        throwIfDecimal: throwIfDecimal,\r\n        throwIfNotAString: throwIfNotAString,\r\n        throwIfEmptyString: throwIfEmptyString,\r\n        throwIfInvalidId: throwIfInvalidId,\r\n        throwIfNotAFunction: throwIfNotAFunction,\r\n        throwIfNotArray: throwIfNotArray,\r\n        throwIfEmptyArray: throwIfEmptyArray,\r\n        reThrow: reThrow\r\n    };\r\n\r\n    return window.$di.exception.guard;\r\n\r\n    /**\r\n     * Generate a new di exception\r\n     * @param source\r\n     * @param message\r\n     * @returns\r\n     */\r\n    function getNewError(source, message) {\r\n        var err = new Error(message);\r\n\r\n        err.source = source;\r\n\r\n        return err;\r\n    }\r\n\r\n    /**\r\n     * Throw a new exception\r\n     * @param {string} source Exception source\r\n     * @param {string} message Exception message\r\n     * @returns\r\n     */\r\n    function throwNew(source, message)\r\n    {\r\n        var err = getNewError(source, message);\r\n\r\n        throw err;\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if condition is true\r\n     * @param {string} source Exception source\r\n     * @param {bool} condition Whether or not to throw the exception\r\n     * @param {string} message Exception message\r\n     */\r\n    function throwIf(source, condition, message) {\r\n        if (condition) {\r\n            throwNew(source, message);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is [null]\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfNull(source, value, valueName) {\r\n        throwIf(source, util.isNull(value), valueName + \" is null\");\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is [undefined]\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfUndefined(source, value, valueName) {\r\n        throwIf(source, util.isUndefined(value), valueName + \" is undefined\");\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is [null] or [undefined]\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfNullOrUndefined(source, value, valueName) {\r\n        throwIfNull(source, value, valueName);\r\n        throwIfUndefined(source, value, valueName);\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is not an object\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfNotAnObject(source, value, valueName) {\r\n        throwIfNullOrUndefined(source, value, valueName);\r\n        throwIf(source, !util.isObject(value), valueName + \" is not an object\");\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is not a numeric data type\r\n     * or is [null]/[undefined]\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfNotANumber(source, value, valueName) {\r\n        throwIfNullOrUndefined(source, value, valueName);\r\n        throwIf(source, !util.isNumber(value), valueName + \" is not a number\");\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is not a numeric data type\r\n     * or is zero\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfZero(source, value, valueName) {\r\n        throwIfNotANumber(source, value, valueName);\r\n        throwIf(source, value === 0, valueName + \" is zero\");\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is not a numeric data type\r\n     * or is negative\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfNegative(source, value, valueName) {\r\n        throwIfNotANumber(source, value, valueName);\r\n        throwIf(source, value < 0, valueName + \" is negative\");\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is not a numeric data type\r\n     * or is zero or is negative\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfZeroOrNegative(source, value, valueName) {\r\n        throwIfZero(source, value, valueName);\r\n        throwIfNegative(source, value, valueName);\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is not a numeric data type\r\n     * or is decimal\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfDecimal(source, value, valueName) {\r\n        throwIfNotANumber(source, value, valueName);\r\n        throwIf(source, util.isDecimalNumber(value), valueName + \" is decimal\");\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is not a string\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfNotAString(source, value, valueName) {\r\n        throwIfNullOrUndefined(source, value, valueName);\r\n        throwIf(source, !util.isString(value), valueName + \" is not a string\");\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is an empty string\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfEmptyString(source, value, valueName) {\r\n        throwIfNotAString(source, value, valueName);\r\n        throwIf(source, value == '', valueName + \" is an empty string\");\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is not a positive integer data type\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfInvalidId(source, value, valueName) {\r\n        try {\r\n            throwIfDecimal(source, value, valueName);\r\n            throwIfZeroOrNegative(source, value, valueName);\r\n        } catch (e) {\r\n            reThrow(source, e, valueName + \" is not a valid ID\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is not a function\r\n     * or is [null]/[undefined]\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfNotAFunction(source, value, valueName) {\r\n        throwIfNullOrUndefined(source, value, valueName);\r\n        throwIf(source, !util.isFunction(value), valueName + \" is not a function\");\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is not an array\r\n     * or is [null]/[undefined]\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfNotArray(source, value, valueName) {\r\n        throwIfNullOrUndefined(source, value, valueName);\r\n        throwIf(source, !util.isArray(value), valueName + \" is not an array\");\r\n    }\r\n\r\n    /**\r\n     * Throw an exception if the given value is an empty array\r\n     * or is [null]/[undefined]\r\n     * @param {string} source Exception source\r\n     * @param value Value to check\r\n     * @param {string} valueName Name of the argument or property being checked\r\n     */\r\n    function throwIfEmptyArray(source, value, valueName) {\r\n        throwIfNotArray(source, value, valueName);\r\n        throwIf(source, value.length == 0, valueName + \" is an empty array\");\r\n    }\r\n\r\n    /**\r\n     * Throw a new exception containing the given exception as the innerException\r\n     * @param {string} source Exception source\r\n     * @param {Error} ex\r\n     * @param {string} message Exception message\r\n     */\r\n    function reThrow(source, ex, message) {\r\n        var err = getNewError(source, message);\r\n        \r\n        err.innerException = ex;\r\n        \r\n        throw err;\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/exception/guard.js","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\n/**\n * Allows to refer to references which are not yet defined.\n *\n * For instance, `forwardRef` is used when the `token` which we need to refer to for the purposes of\n * DI is declared,\n * but not yet defined. It is also used when the `token` which we use when creating a query is not\n * yet defined.\n *\n * ### Example\n * {@example core/di/ts/forward_ref/forward_ref.ts region='forward_ref'}\n */\nfunction forwardRef(forwardRefFn) {\n    forwardRefFn.__forward_ref__ = forwardRef;\n    forwardRefFn.toString = function () { return lang_1.stringify(this()); };\n    return forwardRefFn;\n}\nexports.forwardRef = forwardRef;\n/**\n * Lazily retrieves the reference value from a forwardRef.\n *\n * Acts as the identity function when given a non-forward-ref value.\n *\n * ### Example ([live demo](http://plnkr.co/edit/GU72mJrk1fiodChcmiDR?p=preview))\n *\n * ```typescript\n * var ref = forwardRef(() => \"refValue\");\n * expect(resolveForwardRef(ref)).toEqual(\"refValue\");\n * expect(resolveForwardRef(\"regularValue\")).toEqual(\"regularValue\");\n * ```\n *\n * See: {@link forwardRef}\n */\nfunction resolveForwardRef(type) {\n    if (_isForwardRef(type)) {\n        return type();\n    }\n    else {\n        return type;\n    }\n    function _isForwardRef(type) {\n        return lang_1.isFunction(type) && type.hasOwnProperty('__forward_ref__') && type.__forward_ref__ === forwardRef;\n    }\n}\nexports.resolveForwardRef = resolveForwardRef;\n//# sourceMappingURL=forward_ref.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/di/forward_ref.js\n// module id = 13\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\nvar metadata_directives_1 = require(\"../directives/metadata_directives\");\nvar metadata_1 = require(\"../pipes/metadata\");\nvar provider_1 = require(\"./provider\");\nvar opaque_token_1 = require(\"./opaque_token\");\nvar metadata_2 = require(\"./metadata\");\nfunction isProviderLiteral(obj) {\n    return obj && typeof obj == 'object' && obj.provide;\n}\nexports.isProviderLiteral = isProviderLiteral;\nfunction createProvider(obj) {\n    return new provider_1.Provider(obj.provide, obj);\n}\nexports.createProvider = createProvider;\nfunction isOpaqueToken(obj) {\n    return obj instanceof opaque_token_1.OpaqueToken;\n}\nexports.isOpaqueToken = isOpaqueToken;\nfunction isDirectiveLike(annotation) {\n    return lang_1.isString(annotation.selector) && annotation instanceof metadata_directives_1.DirectiveMetadata;\n}\nexports.isDirectiveLike = isDirectiveLike;\nfunction isDirective(annotation) {\n    return isDirectiveLike(annotation) && !_hasTemplate(annotation);\n}\nexports.isDirective = isDirective;\nfunction isComponent(annotation) {\n    return lang_1.isString(annotation.selector) && _hasTemplate(annotation) && annotation instanceof metadata_directives_1.ComponentMetadata;\n}\nexports.isComponent = isComponent;\nfunction _hasTemplate(annotation) {\n    return lang_1.isPresent(annotation.template || annotation.templateUrl);\n}\nfunction isService(annotation) {\n    return annotation instanceof metadata_2.InjectableMetadata;\n}\nexports.isService = isService;\nfunction isPipe(annotation) {\n    return lang_1.isString(annotation.name) && annotation instanceof metadata_1.PipeMetadata;\n}\nexports.isPipe = isPipe;\nfunction isInjectMetadata(injectMeta) {\n    return injectMeta instanceof metadata_2.InjectMetadata;\n}\nexports.isInjectMetadata = isInjectMetadata;\nfunction isNgModule(annotation) {\n    return annotation instanceof metadata_directives_1.NgModuleMetadata;\n}\nexports.isNgModule = isNgModule;\n//# sourceMappingURL=provider_util.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/di/provider_util.js\n// module id = 14\n// module chunks = 0","import * as ng from \"angular\";\r\nimport { Injectable, Inject } from 'ng-metadata/core';\r\n\r\nexport interface ResourceListTableOptions {\r\n    enableSelect: boolean;\r\n    multiSelect: boolean;\r\n    enablePaging: boolean;\r\n    fixedHeight: boolean;\r\n    maxItemsToShow: number;\r\n    paginationPageSize: number;\r\n    paginationPageNumber: number;\r\n    maxButtonsShown: number;\r\n    columns: Array<ResourceListColumns>;\r\n    actionColumns: Array<ResourceActionColumns>;\r\n}\r\n\r\nexport interface ResourceListSortOptions {\r\n    value: number;\r\n    key: string;\r\n    label: string\r\n}\r\n\r\nexport interface ResourceListColumns {\r\n    field: string;\r\n    nameLanguageKey: string;\r\n    template: string\r\n}\r\n\r\nexport interface ResourceActionColumns {\r\n    field: string;\r\n    template: string;\r\n    cellClass: string;\r\n}\r\n\r\n@Injectable()\r\nexport abstract class ResourceListConfigurationServiceBase {\r\n    private _tableOptions: ResourceListTableOptions;\r\n\r\n    public tableOptions(): ResourceListTableOptions {\r\n        return ng.copy<ResourceListTableOptions>(this._tableOptions);\r\n    }\r\n\r\n    constructor() {\r\n        this._tableOptions = {\r\n\t\t\tenableSelect: true,\r\n\t\t\tmultiSelect: false,\r\n\t\t\tenablePaging: true,\r\n\t\t\tfixedHeight: true,\r\n\t\t\tmaxItemsToShow: 500,\r\n\t\t\tpaginationPageSize: 5,\r\n\t\t\tpaginationPageNumber: 1,\r\n            maxButtonsShown: 3,\r\n            columns: [],\r\n            actionColumns: []\r\n\t\t}\r\n\t}\r\n\r\n    abstract getTableOptions(): Promise<ResourceListTableOptions>;\r\n    abstract getSortOptions(): Promise<Array<ResourceListSortOptions>>;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/shared/resource-list-configuration-base.service.ts","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar lang_1 = require(\"../../facade/lang\");\nvar forward_ref_1 = require(\"../di/forward_ref\");\nvar metadata_1 = require(\"../di/metadata\");\n/**\n * Declares an injectable parameter to be a live list of directives or variable\n * bindings from the content children of a directive.\n *\n * ### Example ([live demo](http://plnkr.co/edit/lY9m8HLy7z06vDoUaSN2?p=preview))\n *\n * Assume that `<tabs>` component would like to get a list its children `<pane>`\n * components as shown in this example:\n *\n * ```html\n * <tabs>\n *   <pane title=\"Overview\">...</pane>\n *   <pane *ngFor=\"#o of objects\" [title]=\"o.title\">{{o.text}}</pane>\n * </tabs>\n * ```\n *\n * The preferred solution is to query for `Pane` directives using this decorator.\n *\n * ```javascript\n * @Component({\n *   selector: 'pane',\n *   inputs: ['title']\n * })\n * class Pane {\n *   title:string;\n * }\n *\n * @Component({\n *  selector: 'tabs',\n *  template: `\n *    <ul>\n *      <li *ngFor=\"#pane of panes\">{{pane.title}}</li>\n *    </ul>\n *    <content></content>\n *  `\n * })\n * class Tabs {\n *   panes: QueryList<Pane>;\n *   constructor(@Query(Pane) panes:QueryList<Pane>) {\n  *    this.panes = panes;\n  *  }\n * }\n * ```\n *\n * A query can look for variable bindings by passing in a string with desired binding symbol.\n *\n * ### Example ([live demo](http://plnkr.co/edit/sT2j25cH1dURAyBRCKx1?p=preview))\n * ```html\n * <seeker>\n *   <div #findme>...</div>\n * </seeker>\n *\n * @Component({ selector: 'seeker' })\n * class Seeker {\n *   constructor(@Query('findme') elList: QueryList<ElementRef>) {...}\n * }\n * ```\n *\n * In this case the object that is injected depend on the type of the variable\n * binding. It can be an ElementRef, a directive or a component.\n *\n * Passing in a comma separated list of variable bindings will query for all of them.\n *\n * ```html\n * <seeker>\n *   <div #find-me>...</div>\n *   <div #find-me-too>...</div>\n * </seeker>\n *\n *  @Component({\n *   selector: 'seeker'\n * })\n * class Seeker {\n *   constructor(@Query('findMe, findMeToo') elList: QueryList<ElementRef>) {...}\n * }\n * ```\n *\n * Configure whether query looks for direct children or all descendants\n * of the querying element, by using the `descendants` parameter.\n * It is set to `false` by default.\n *\n * ### Example ([live demo](http://plnkr.co/edit/wtGeB977bv7qvA5FTYl9?p=preview))\n * ```html\n * <container #first>\n *   <item>a</item>\n *   <item>b</item>\n *   <container #second>\n *     <item>c</item>\n *   </container>\n * </container>\n * ```\n *\n * When querying for items, the first container will see only `a` and `b` by default,\n * but with `Query(TextDirective, {descendants: true})` it will see `c` too.\n *\n * The queried directives are kept in a depth-first pre-order with respect to their\n * positions in the DOM.\n *\n * Query does not look deep into any subcomponent views.\n *\n * Query is updated as part of the change-detection cycle. Since change detection\n * happens after construction of a directive, QueryList will always be empty when observed in the\n * constructor.\n *\n * The injected object is an unmodifiable live list.\n * See {@link QueryList} for more details.\n */\nvar QueryMetadata = (function (_super) {\n    __extends(QueryMetadata, _super);\n    function QueryMetadata(_selector, _a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.descendants, descendants = _c === void 0 ? false : _c, _d = _b.first, first = _d === void 0 ? false : _d;\n        var _this = _super.call(this) || this;\n        _this._selector = _selector;\n        _this.descendants = descendants;\n        _this.first = first;\n        return _this;\n    }\n    Object.defineProperty(QueryMetadata.prototype, \"isViewQuery\", {\n        /**\n         * always `false` to differentiate it with {@link ViewQueryMetadata}.\n         */\n        get: function () { return false; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QueryMetadata.prototype, \"selector\", {\n        /**\n         * what this is querying for.\n         */\n        get: function () { return forward_ref_1.resolveForwardRef(this._selector); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QueryMetadata.prototype, \"isVarBindingQuery\", {\n        /**\n         * whether this is querying for a variable binding or a directive.\n         */\n        get: function () { return lang_1.isString(this.selector); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QueryMetadata.prototype, \"varBindings\", {\n        /**\n         * returns a list of variable bindings this is querying for.\n         * Only applicable if this is a variable bindings query.\n         */\n        get: function () {\n            return this.isVarBindingQuery\n                ? this.selector.split(',')\n                : [];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    QueryMetadata.prototype.toString = function () { return \"@Query(\" + lang_1.stringify(this.selector) + \")\"; };\n    return QueryMetadata;\n}(metadata_1.DependencyMetadata));\nexports.QueryMetadata = QueryMetadata;\n/**\n * Configures a content query.\n *\n * Content queries are set before the `ngAfterContentInit` callback is called.\n *\n * ### Example\n *\n * ```\n * @Directive({\n *   selector: 'someDir'\n * })\n * class SomeDir {\n *   @ContentChildren(ChildDirective) contentChildren: QueryList<ChildDirective>;\n *\n *   ngAfterContentInit() {\n *     // contentChildren is set\n *   }\n * }\n * ```\n */\nvar ContentChildrenMetadata = (function (_super) {\n    __extends(ContentChildrenMetadata, _super);\n    function ContentChildrenMetadata(_selector, _a) {\n        var _b = (_a === void 0 ? {} : _a).descendants, descendants = _b === void 0 ? false : _b;\n        return _super.call(this, _selector, { descendants: descendants }) || this;\n    }\n    return ContentChildrenMetadata;\n}(QueryMetadata));\nexports.ContentChildrenMetadata = ContentChildrenMetadata;\n/**\n * Configures a content query.\n *\n * Content queries are set before the `ngAfterContentInit` callback is called.\n *\n * ### Example\n *\n * ```\n * @Directive({\n *   selector: 'someDir'\n * })\n * class SomeDir {\n *   @ContentChild(ChildDirective) contentChild;\n *\n *   ngAfterContentInit() {\n *     // contentChild is set\n *   }\n * }\n * ```\n */\nvar ContentChildMetadata = (function (_super) {\n    __extends(ContentChildMetadata, _super);\n    function ContentChildMetadata(_selector) {\n        return _super.call(this, _selector, { descendants: true, first: true }) || this;\n    }\n    return ContentChildMetadata;\n}(QueryMetadata));\nexports.ContentChildMetadata = ContentChildMetadata;\n/**\n * Similar to {@link QueryMetadata}, but querying the component view, instead of\n * the content children.\n *\n * ### Example ([live demo](http://plnkr.co/edit/eNsFHDf7YjyM6IzKxM1j?p=preview))\n *\n * ```javascript\n * @Component({...})\n * @View({\n *   template: `\n *     <item> a </item>\n *     <item> b </item>\n *     <item> c </item>\n *   `\n * })\n * class MyComponent {\n *   shown: boolean;\n *\n *   constructor(private @Query(Item) items:QueryList<Item>) {\n *     items.onChange(() => console.log(items.length));\n *   }\n * }\n * ```\n *\n * Supports the same querying parameters as {@link QueryMetadata}, except\n * `descendants`. This always queries the whole view.\n *\n * As `shown` is flipped between true and false, items will contain zero of one\n * items.\n *\n * Specifies that a {@link QueryList} should be injected.\n *\n * The injected object is an iterable and observable live list.\n * See {@link QueryList} for more details.\n */\nvar ViewQueryMetadata = (function (_super) {\n    __extends(ViewQueryMetadata, _super);\n    function ViewQueryMetadata(_selector, _a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.descendants, descendants = _c === void 0 ? false : _c, _d = _b.first, first = _d === void 0 ? false : _d;\n        return _super.call(this, _selector, { descendants: descendants, first: first }) || this;\n    }\n    Object.defineProperty(ViewQueryMetadata.prototype, \"isViewQuery\", {\n        /**\n         * always `true` to differentiate it with {@link QueryMetadata}.\n         */\n        get: function () { return true; },\n        enumerable: true,\n        configurable: true\n    });\n    ViewQueryMetadata.prototype.toString = function () { return \"@ViewQuery(\" + lang_1.stringify(this.selector) + \")\"; };\n    return ViewQueryMetadata;\n}(QueryMetadata));\nexports.ViewQueryMetadata = ViewQueryMetadata;\n/**\n * Configures a view query.\n *\n * View queries are set before the `ngAfterViewInit` callback is called.\n *\n * ### Example\n *\n * ```\n * @Component({\n *   selector: 'someDir',\n *   templateUrl: 'someTemplate',\n *   directives: [ItemDirective]\n * })\n * class SomeDir {\n *   @ViewChildren(ItemDirective) viewChildren: QueryList<ItemDirective>;\n *\n *   ngAfterViewInit() {\n *     // viewChildren is set\n *   }\n * }\n * ```\n */\nvar ViewChildrenMetadata = (function (_super) {\n    __extends(ViewChildrenMetadata, _super);\n    function ViewChildrenMetadata(_selector) {\n        return _super.call(this, _selector, { descendants: true }) || this;\n    }\n    return ViewChildrenMetadata;\n}(ViewQueryMetadata));\nexports.ViewChildrenMetadata = ViewChildrenMetadata;\n/**\n * Configures a view query.\n *\n * View queries are set before the `ngAfterViewInit` callback is called.\n *\n * ### Example\n *\n * ```\n * @Component({\n *   selector: 'someDir',\n *   templateUrl: 'someTemplate',\n *   directives: [ItemDirective]\n * })\n * class SomeDir {\n *   @ViewChild(ItemDirective) viewChild:ItemDirective;\n *\n *   ngAfterViewInit() {\n *     // viewChild is set\n *   }\n * }\n * ```\n */\nvar ViewChildMetadata = (function (_super) {\n    __extends(ViewChildMetadata, _super);\n    function ViewChildMetadata(_selector) {\n        return _super.call(this, _selector, { descendants: true, first: true }) || this;\n    }\n    return ViewChildMetadata;\n}(ViewQueryMetadata));\nexports.ViewChildMetadata = ViewChildMetadata;\n//# sourceMappingURL=metadata_di.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/metadata_di.js\n// module id = 18\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\nvar reflection_1 = require(\"../reflection/reflection\");\nvar metadata_1 = require(\"../di/metadata\");\nvar key_1 = require(\"../di/key\");\nfunction makeDecorator(AnnotationCls, chainFn) {\n    if (chainFn === void 0) { chainFn = null; }\n    function DecoratorFactory(objOrType) {\n        var annotationInstance = new AnnotationCls(objOrType);\n        if (this instanceof AnnotationCls) {\n            return annotationInstance;\n        }\n        else {\n            //var chainAnnotation = isFunction( this ) && this.annotations instanceof Array\n            //  ? this.annotations\n            //  : [];\n            //chainAnnotation.push(annotationInstance);\n            if (chainFn) {\n                chainFn(TypeDecorator);\n            }\n            return TypeDecorator;\n        }\n        function TypeDecorator(cls) {\n            /**\n             * here we are creating generated name for Services\n             * so we can acquire the key for AngularJS DI\n             * and we have unique names after mangling our JS\n             */\n            if (annotationInstance instanceof metadata_1.InjectableMetadata) {\n                // set id if it was explicitly provided by user @Injectable('mySvc') otherwise generate\n                annotationInstance.id = annotationInstance.id || key_1.globalKeyRegistry.get(cls);\n            }\n            var annotations = reflection_1.reflector.ownAnnotations(cls);\n            annotations = annotations || [];\n            annotations.push(annotationInstance);\n            reflection_1.reflector.registerAnnotations(annotations, cls);\n            return cls;\n        }\n    }\n    DecoratorFactory.prototype = Object.create(AnnotationCls.prototype);\n    return DecoratorFactory;\n}\nexports.makeDecorator = makeDecorator;\nfunction makeParamDecorator(annotationCls, overrideParamDecorator) {\n    if (overrideParamDecorator === void 0) { overrideParamDecorator = null; }\n    function ParamDecoratorFactory() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        // create new annotation instance with annotation decorator on proto\n        var annotationInstance = Object.create(annotationCls.prototype);\n        annotationCls.apply(annotationInstance, args);\n        if (this instanceof annotationCls) {\n            return annotationInstance;\n        }\n        else {\n            //(ParamDecorator as any).annotation = annotationInstance;\n            return ParamDecorator;\n        }\n        /**\n         * paramDecorators are 2 dimensional arrays\n         * @param cls\n         * @param unusedKey\n         * @param index\n         * @returns {any}\n         * @constructor\n         */\n        function ParamDecorator(cls, unusedKey, index) {\n            // this is special behaviour for non constructor param Injection\n            if (lang_1.isFunction(overrideParamDecorator) && lang_1.isPresent(unusedKey)) {\n                return overrideParamDecorator(annotationInstance, cls, unusedKey, index);\n            }\n            var parameters = reflection_1.reflector.rawParameters(cls);\n            parameters = parameters || [];\n            // there might be gaps if some in between parameters do not have annotations.\n            // we pad with nulls.\n            while (parameters.length <= index) {\n                parameters.push(null);\n            }\n            parameters[index] = parameters[index] || [];\n            var annotationsForParam = parameters[index];\n            annotationsForParam.push(annotationInstance);\n            reflection_1.reflector.registerParameters(parameters, cls);\n            return cls;\n        }\n    }\n    ParamDecoratorFactory.prototype = Object.create(annotationCls.prototype);\n    return ParamDecoratorFactory;\n}\nexports.makeParamDecorator = makeParamDecorator;\nfunction makePropDecorator(decoratorCls) {\n    function PropDecoratorFactory() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var decoratorInstance = Object.create(decoratorCls.prototype);\n        decoratorCls.apply(decoratorInstance, args);\n        // check if this decorator was already invoked\n        // - if it was return it again, just with newly applied arguments\n        // - this is possible thanks to PropDecoratorFactory.prototype = Object.create(decoratorCls.prototype);\n        if (this instanceof decoratorCls) {\n            return decoratorInstance;\n        }\n        else {\n            return function PropDecorator(target, name) {\n                var meta = reflection_1.reflector.ownPropMetadata(target.constructor);\n                meta = meta || {};\n                meta[name] = meta[name] || [];\n                meta[name].unshift(decoratorInstance);\n                reflection_1.reflector.registerPropMetadata(meta, target.constructor);\n            };\n        }\n    }\n    // caching\n    PropDecoratorFactory.prototype = Object.create(decoratorCls.prototype);\n    return PropDecoratorFactory;\n}\nexports.makePropDecorator = makePropDecorator;\n//# sourceMappingURL=decorators.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/util/decorators.js\n// module id = 19\n// module chunks = 0","declare var _: any;\r\n\r\nexport class ModalControllerBase {\r\n    public $element: any;\r\n    public options: any;\r\n    public close: any;\r\n    public model: any;\r\n    public original: any;\r\n    public changed: boolean;\r\n    private promptWindow: any;\r\n    private defaultCancelPromptOptions: any;\r\n\r\n    constructor($element, promptWindow, options, close) {\r\n        this.$element = $element;\r\n        this.promptWindow = promptWindow;\r\n        this.options = options;\r\n        this.close = close;\r\n\r\n        this.onDataChanged = this.onDataChanged.bind(this);\r\n        this.closeWindow = this.closeWindow.bind(this);\r\n\r\n        this.model = _.clone(this.options.dataModel);\r\n        this.original = _.clone(this.options.dataModel);\r\n        this.changed = false;\r\n\r\n        this.defaultCancelPromptOptions = {\r\n            title: 'EINVOICING.COMPONENTS.NAVIGATION.ABANDON_CHANGES_WARNING.TITLE',\r\n            message: 'EINVOICING.COMPONENTS.NAVIGATION.ABANDON_CHANGES_WARNING.MESSAGE',\r\n            okBtnText: 'CORE.PROMPT.YES',\r\n            cancelBtnText: 'CORE.PROMPT.NO'\r\n        };\r\n    }\r\n\r\n    onDataChanged() {\r\n        this.changed = true;\r\n\r\n        if (this.options.onDataChanged) {\r\n            this.options.onDataChanged(this.model);\r\n        }\r\n    }\r\n\r\n    onSave() {\r\n        this.$element.modal('hide');\r\n        this.close({\r\n            state: 'saved',\r\n            object: this.model\r\n        },\r\n            500);\r\n    }\r\n\r\n    onDelete() {\r\n        this.$element.modal('hide');\r\n        this.close({\r\n            state: 'deleted',\r\n            object: this.model\r\n        },\r\n            500);\r\n    }\r\n\r\n    onPrompt(action) {\r\n        if (this.options.onPrompt && this.options.onPrompt[action]) {\r\n            this.options.onPrompt[action]();\r\n        }\r\n    }\r\n\r\n    onCancel() {\r\n        if (this.options.promptOnCancel && this.changed) {\r\n            this.promptCancel(this.closeWindow);\r\n        } else {\r\n            this.closeWindow();\r\n        }\r\n    }\r\n\r\n    closeWindow() {\r\n        this.$element.modal('hide');\r\n        this.close({\r\n            state: 'cancelled',\r\n            object: this.original\r\n        },\r\n            500);\r\n    }\r\n\r\n    promptCancel(onConfirmed) {\r\n        let options: any = {\r\n            title: this.options.cancelPromptTitle,\r\n            message: this.options.cancelPromptMessage,\r\n            okBtnText: this.options.cancelPromptOkBtnText,\r\n            cancelBtnText: this.options.cancelPromptCancelBtnText,\r\n            callback: (result) => {\r\n                if (result) {\r\n                    onConfirmed();\r\n                }\r\n            }\r\n        };\r\n\r\n        _.defaults(options, this.defaultCancelPromptOptions);\r\n\r\n        this.promptWindow.confirm(options);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/modal/modal-base.controller.ts","import { Injectable, Inject } from 'ng-metadata/core';\r\n\r\nimport {\r\n    ResourceListConfigurationServiceBase,\r\n    ResourceListTableOptions,\r\n    ResourceListSortOptions\r\n} from './resource-list-configuration-base.service';\r\n\r\n@Injectable()\r\nexport abstract class ResourceHandlerServiceBase {\r\n    constructor(private resourceListConfigurationService: ResourceListConfigurationServiceBase) {\r\n    }\r\n\r\n    init(partyId: number, forPartyId: number, sortBy: number = 1) {\r\n        const tableOptionsPromise: Promise<ResourceListTableOptions> = this.resourceListConfigurationService.getTableOptions();\r\n        const sortOptionsPromise: Promise<Array<ResourceListSortOptions>> = this.resourceListConfigurationService.getSortOptions();\r\n        const resourcesPromise = this.getResourceBook(partyId, forPartyId, sortBy);\r\n\r\n        return [resourcesPromise, tableOptionsPromise, sortOptionsPromise];\r\n    }\r\n\r\n    abstract getResourceBook(partyId: number, forPartyId: number, sortyBy: number);\r\n    abstract addNewResource(resource, forPartyId);\r\n    abstract updateResource(resource, resourceId);\r\n    abstract removeResource(resource, resourceId);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/shared/resource-handler-base.service.ts","require('./src/angular-local-storage.js');\nmodule.exports = 'LocalStorageModule';\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = angularLocalStorage;\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = window.angular;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/angular-local-storage/index.js\n// module id = 25\n// module chunks = 0","\"use strict\";\nvar metadata_directives_1 = require(\"./metadata_directives\");\n/**\n * use #isDirective instead\n * @deprecated\n */\nfunction isAttrDirective(metadata) {\n    return metadata instanceof metadata_directives_1.DirectiveMetadata && !(metadata instanceof metadata_directives_1.ComponentMetadata);\n}\nexports.isAttrDirective = isAttrDirective;\n/**\n * use #isComponent instead\n * @deprecated\n */\nfunction isComponentDirective(metadata) {\n    return metadata instanceof metadata_directives_1.ComponentMetadata;\n}\nexports.isComponentDirective = isComponentDirective;\n/**\n *\n * @param scope\n * @param element\n * @param ctrl\n * @param implementsNgOnDestroy\n * @param watchersToDispose\n * @param observersToDispose\n * @private\n */\nfunction _setupDestroyHandler(scope, element, ctrl, implementsNgOnDestroy, watchersToDispose, observersToDispose) {\n    if (watchersToDispose === void 0) { watchersToDispose = []; }\n    if (observersToDispose === void 0) { observersToDispose = []; }\n    scope.$on('$destroy', function () {\n        if (implementsNgOnDestroy) {\n            ctrl.ngOnDestroy();\n        }\n        watchersToDispose.forEach(function (_watcherDispose) { return _watcherDispose(); });\n        observersToDispose.forEach(function (_observerDispose) { return _observerDispose(); });\n    });\n}\nexports._setupDestroyHandler = _setupDestroyHandler;\n//# sourceMappingURL=directives_utils.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/directives_utils.js\n// module id = 27\n// module chunks = 0","\"use strict\";\nvar LifecycleHooks;\n(function (LifecycleHooks) {\n    LifecycleHooks[LifecycleHooks[\"OnInit\"] = 0] = \"OnInit\";\n    LifecycleHooks[LifecycleHooks[\"OnDestroy\"] = 1] = \"OnDestroy\";\n    LifecycleHooks[LifecycleHooks[\"DoCheck\"] = 2] = \"DoCheck\";\n    LifecycleHooks[LifecycleHooks[\"OnChanges\"] = 3] = \"OnChanges\";\n    LifecycleHooks[LifecycleHooks[\"AfterContentInit\"] = 4] = \"AfterContentInit\";\n    LifecycleHooks[LifecycleHooks[\"AfterContentChecked\"] = 5] = \"AfterContentChecked\";\n    LifecycleHooks[LifecycleHooks[\"AfterViewInit\"] = 6] = \"AfterViewInit\";\n    LifecycleHooks[LifecycleHooks[\"AfterViewChecked\"] = 7] = \"AfterViewChecked\";\n    LifecycleHooks[LifecycleHooks[\"_OnChildrenChanged\"] = 8] = \"_OnChildrenChanged\";\n})(LifecycleHooks = exports.LifecycleHooks || (exports.LifecycleHooks = {}));\n/**\n * @internal\n */\nexports.LIFECYCLE_HOOKS_VALUES = [\n    LifecycleHooks.OnInit,\n    LifecycleHooks.OnDestroy,\n    LifecycleHooks.DoCheck,\n    LifecycleHooks.OnChanges,\n    LifecycleHooks.AfterContentInit,\n    LifecycleHooks.AfterContentChecked,\n    LifecycleHooks.AfterViewInit,\n    LifecycleHooks.AfterViewChecked,\n    LifecycleHooks._OnChildrenChanged\n];\nvar ChildrenChangeHook;\n(function (ChildrenChangeHook) {\n    ChildrenChangeHook[ChildrenChangeHook[\"FromView\"] = 0] = \"FromView\";\n    ChildrenChangeHook[ChildrenChangeHook[\"FromContent\"] = 1] = \"FromContent\";\n})(ChildrenChangeHook = exports.ChildrenChangeHook || (exports.ChildrenChangeHook = {}));\n//# sourceMappingURL=directive_lifecycle_interfaces.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/linker/directive_lifecycle_interfaces.js\n// module id = 28\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar lang_1 = require(\"../../facade/lang\");\nvar metadata_1 = require(\"../di/metadata\");\n/**\n * Declare reusable pipe function.\n *\n * A \"pure\" pipe is only re-evaluated when either the input or any of the arguments change.\n *\n * When not specified, pipes default to being pure.\n *\n * ### Example\n *\n * {@example core/ts/metadata/metadata.ts region='pipe'}\n */\nvar PipeMetadata = (function (_super) {\n    __extends(PipeMetadata, _super);\n    function PipeMetadata(_a) {\n        var name = _a.name, pure = _a.pure;\n        var _this = _super.call(this) || this;\n        _this.name = name;\n        _this._pure = pure;\n        return _this;\n    }\n    Object.defineProperty(PipeMetadata.prototype, \"pure\", {\n        get: function () { return lang_1.isPresent(this._pure) ? this._pure : true; },\n        enumerable: true,\n        configurable: true\n    });\n    return PipeMetadata;\n}(metadata_1.InjectableMetadata));\nexports.PipeMetadata = PipeMetadata;\n//# sourceMappingURL=metadata.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/pipes/metadata.js\n// module id = 29\n// module chunks = 0","\"use strict\";\nvar isArray_1 = require('./util/isArray');\nvar isObject_1 = require('./util/isObject');\nvar isFunction_1 = require('./util/isFunction');\nvar tryCatch_1 = require('./util/tryCatch');\nvar errorObject_1 = require('./util/errorObject');\nvar UnsubscriptionError_1 = require('./util/UnsubscriptionError');\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nvar Subscription = (function () {\n    /**\n     * @param {function(): void} [unsubscribe] A function describing how to\n     * perform the disposal of resources when the `unsubscribe` method is called.\n     */\n    function Subscription(unsubscribe) {\n        /**\n         * A flag to indicate whether this Subscription has already been unsubscribed.\n         * @type {boolean}\n         */\n        this.closed = false;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    /**\n     * Disposes the resources held by the subscription. May, for instance, cancel\n     * an ongoing Observable execution or cancel any other type of work that\n     * started when the Subscription was created.\n     * @return {void}\n     */\n    Subscription.prototype.unsubscribe = function () {\n        var hasErrors = false;\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var _a = this, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this._subscriptions = null;\n        if (isFunction_1.isFunction(_unsubscribe)) {\n            var trial = tryCatch_1.tryCatch(_unsubscribe).call(this);\n            if (trial === errorObject_1.errorObject) {\n                hasErrors = true;\n                (errors = errors || []).push(errorObject_1.errorObject.e);\n            }\n        }\n        if (isArray_1.isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject_1.isObject(sub)) {\n                    var trial = tryCatch_1.tryCatch(sub.unsubscribe).call(sub);\n                    if (trial === errorObject_1.errorObject) {\n                        hasErrors = true;\n                        errors = errors || [];\n                        var err = errorObject_1.errorObject.e;\n                        if (err instanceof UnsubscriptionError_1.UnsubscriptionError) {\n                            errors = errors.concat(err.errors);\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n        }\n        if (hasErrors) {\n            throw new UnsubscriptionError_1.UnsubscriptionError(errors);\n        }\n    };\n    /**\n     * Adds a tear down to be called during the unsubscribe() of this\n     * Subscription.\n     *\n     * If the tear down being added is a subscription that is already\n     * unsubscribed, is the same reference `add` is being called on, or is\n     * `Subscription.EMPTY`, it will not be added.\n     *\n     * If this subscription is already in an `closed` state, the passed\n     * tear down logic will be executed immediately.\n     *\n     * @param {TeardownLogic} teardown The additional logic to execute on\n     * teardown.\n     * @return {Subscription} Returns the Subscription used or created to be\n     * added to the inner subscriptions list. This Subscription can be used with\n     * `remove()` to remove the passed teardown logic from the inner subscriptions\n     * list.\n     */\n    Subscription.prototype.add = function (teardown) {\n        if (!teardown || (teardown === Subscription.EMPTY)) {\n            return Subscription.EMPTY;\n        }\n        if (teardown === this) {\n            return this;\n        }\n        var sub = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                sub = new Subscription(teardown);\n            case 'object':\n                if (sub.closed || typeof sub.unsubscribe !== 'function') {\n                    break;\n                }\n                else if (this.closed) {\n                    sub.unsubscribe();\n                }\n                else {\n                    (this._subscriptions || (this._subscriptions = [])).push(sub);\n                }\n                break;\n            default:\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n        return sub;\n    };\n    /**\n     * Removes a Subscription from the internal list of subscriptions that will\n     * unsubscribe during the unsubscribe process of this Subscription.\n     * @param {Subscription} subscription The subscription to remove.\n     * @return {void}\n     */\n    Subscription.prototype.remove = function (subscription) {\n        // HACK: This might be redundant because of the logic in `add()`\n        if (subscription == null || (subscription === this) || (subscription === Subscription.EMPTY)) {\n            return;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexports.Subscription = Subscription;\n//# sourceMappingURL=Subscription.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/Subscription.js\n// module id = 30\n// module chunks = 0","\"use strict\";\nvar root_1 = require('../util/root');\nvar Symbol = root_1.root.Symbol;\nexports.$$rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function') ?\n    Symbol.for('rxSubscriber') : '@@rxSubscriber';\n//# sourceMappingURL=rxSubscriber.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/symbol/rxSubscriber.js\n// module id = 31\n// module chunks = 0","\"use strict\";\n/**\n * window: browser in DOM main thread\n * self: browser in WebWorker\n * global: Node.js/other\n */\nexports.root = (typeof window == 'object' && window.window === window && window\n    || typeof self == 'object' && self.self === self && self\n    || typeof global == 'object' && global.global === global && global);\nif (!exports.root) {\n    throw new Error('RxJS could not find any global context (window, self, global)');\n}\n//# sourceMappingURL=root.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/util/root.js\n// module id = 32\n// module chunks = 0","import { Component, Inject, Injectable } from 'ng-metadata/core';\r\nimport { ModalControllerBase } from '../../../../lib/di.core/spa/controls/modal/modal-base.controller';\r\n\r\n@Injectable()\r\nexport class AddPartyComponentController extends ModalControllerBase {\r\n    public partyId;\r\n    public saveButtonText;\r\n    public title;\r\n\r\n    constructor(\r\n        @Inject('$element') $element,\r\n        @Inject('promptWindow') promptWindow,\r\n        @Inject('options') options,\r\n        @Inject('close') close\r\n    ) {\r\n        super($element, promptWindow, options, close);\r\n\r\n        this.partyId = options.partyId;\r\n        this.saveButtonText = options.saveButtonText;\r\n        this.title = options.modalTitle;\r\n    }\r\n\r\n    tradingPartyIdChanged(tradingPartyId) {\r\n        this.model = tradingPartyId;\r\n    }\r\n}\r\n\r\nAddPartyComponentController.prototype.constructor.$inject = ['$element', 'promptWindow', 'options', 'close']\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/add-party.component.controller.ts","export * from './contact-handler.service';\r\nexport * from './contact-proxy.service';\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/contacts/shared/index.ts","export * from './location-handler.service';\r\nexport * from './location-proxy.service';\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/locations/shared/index.ts","import {\r\n    ResourceActionColumns,\r\n    ResourceListConfigurationServiceBase,\r\n    ResourceListColumns,\r\n    ResourceListSortOptions,\r\n    ResourceListTableOptions\r\n} from '../../shared/resource-list-configuration-base.service';\r\n\r\nimport { Injectable } from 'ng-metadata/core';\r\n\r\n@Injectable()\r\nexport class PartyCodeConfigurationService extends ResourceListConfigurationServiceBase {\r\n    private _sortOptions: Array<ResourceListSortOptions>;\r\n    private _columns: Array<ResourceListColumns>;\r\n    private _actionColumns: Array<ResourceActionColumns>;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this._sortOptions = [];\r\n        this._columns = [];\r\n        this._actionColumns = [];\r\n    }\r\n\r\n    getSortOptions(): Promise<Array<ResourceListSortOptions>> {\r\n        return Promise.resolve(this._sortOptions);\r\n    }\r\n\r\n    getTableOptions(): Promise<ResourceListTableOptions> {\r\n        let tableOptions: ResourceListTableOptions = super.tableOptions();\r\n        tableOptions.columns = this._columns;\r\n        tableOptions.actionColumns = this._actionColumns;\r\n\r\n        return Promise.resolve(tableOptions);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/party-codes/shared/party-code-configuration.service.ts","import { Injectable, Inject } from 'ng-metadata/core';\r\n\r\nimport { ResourceHandlerServiceBase } from '../../shared/resource-handler-base.service';\r\nimport { PartyCodeConfigurationService } from './party-code-configuration.service';\r\n\r\n@Injectable()\r\nexport class PartyCodeHandlerService extends ResourceHandlerServiceBase {\r\n    public type: string = \"partyCode\";\r\n\r\n    constructor(\r\n        @Inject('partyProxy') private partyProxy,\r\n        @Inject('partyCodeConfigurationService') private partyCodeConfigurationService: PartyCodeConfigurationService\r\n    ) {\r\n        super(partyCodeConfigurationService);\r\n    }\r\n\r\n    getResourceBook(partyId, forPartyId, sortBy) {\r\n        return this.partyProxy.getPartyCodesForParty(partyId);\r\n    }\r\n\r\n    updateResource(resouce, resourceId) {\r\n        return this.partyProxy.updatePartyCode(resouce);\r\n    }\r\n\r\n    addNewResource(resource, forPartyId) {\r\n        let partyId = resource.partyId;\r\n\r\n        return this.partyProxy.addNewPartyCode(partyId, resource);\r\n    }\r\n\r\n    removeResource(resource, resourceId) {\r\n    }\r\n}\r\n\r\nPartyCodeHandlerService.prototype.constructor.$inject = ['partyProxy', 'partyCodeConfigurationService'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/party-codes/shared/party-code-handler.service.ts","//{CODE:CGU09}\r\n// di.core.global.utility.placeholders.arguments\r\ndefine([\r\n    '../../../exception/guard'\r\n], function (guard) {\r\n    'use strict';\r\n\r\n    window.$di.utility.placeholders.arguments.map = map;\r\n\r\n    return window.$di.utility.placeholders.arguments.map;\r\n\r\n    /**\r\n     * Maps arguments to pre-defined placeholders.\r\n     * @param targets\r\n     * @param args\r\n     */\r\n    function map(targets, args) {\r\n        guard.throwIfNullOrUndefined(\"CGU0901E\", targets, \"targets\");\r\n        guard.throwIfNullOrUndefined(\"CGU0902E\", args, \"args\");\r\n\r\n        var mapped = {};\r\n        var unmapped = [];\r\n\r\n        // try to map named arguments first\r\n        for (var i = 0; i < args.length; i++) {\r\n            try {\r\n                var obj = eval('(' + args[i] + ')');\r\n                if (typeof obj === typeof {}) {\r\n                    for (var arg in obj) {\r\n                        mapped[arg] = obj[arg];\r\n                    }\r\n                }\r\n                else if (typeof obj === typeof '') {\r\n                    mapped[arg] = obj;\r\n                }\r\n                else {\r\n                    throw obj;\r\n                }\r\n            }\r\n            catch (error) {\r\n                unmapped.unshift(args[i]);\r\n            }\r\n        }\r\n\r\n        // map any unmapped arguments in the order that they are found in\r\n        for (i = 0; i < targets.length; i++) {\r\n            if (mapped[targets[i]] === undefined) {\r\n                var popped = unmapped.pop();\r\n                // assigns the key as the value if it's still undefined\r\n                if (popped === undefined) {\r\n                    var s = targets[i];\r\n                    s = s.replace(/\\./g, '_');\r\n                    mapped[s] = targets[i];\r\n                }\r\n                else {\r\n                    mapped[targets[i]] = popped;\r\n                }\r\n            }\r\n        }\r\n\r\n        return mapped;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/utility/placeholders/arguments/map.js","//{CODE:CGU05}\r\n// di.core.global.utility\r\ndefine([\r\n    '../../exception/guard'\r\n], function (guard) {\r\n    'use strict';\r\n\r\n    var _pattern = /<%=([\\s.a-zA-Z0-9]+)%>/g;\r\n\r\n    window.$di.utility.placeholders.extract = extract;\r\n\r\n    return window.$di.utility.placeholders.extract;\r\n\r\n    /**\r\n     * Extracts a collection of placeholders in the format of <%= xxx %> from the target string\r\n     * @param placeholderString\r\n     */\r\n    function extract(placeholderString) {\r\n        guard.throwIfNotAString(\"CGU0501E\", placeholderString, \"placeholderString\");\r\n        var matches = _pattern.exec(placeholderString);\r\n        var ms = [];\r\n\r\n        while (matches != null) {\r\n            for (var i = 1; i < matches.length; i++) {\r\n                ms.push(matches[i].trim());\r\n            }\r\n\r\n            matches = _pattern.exec(placeholderString);\r\n        }\r\n\r\n        return ms;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/utility/placeholders/extract.js","/**\n * State-based routing for AngularJS\n * @version v0.4.2\n * @link http://angular-ui.github.com/\n * @license MIT License, http://www.opensource.org/licenses/MIT\n */\n\n/* commonjs package manager support (eg componentjs) */\nif (typeof module !== \"undefined\" && typeof exports !== \"undefined\" && module.exports === exports){\n  module.exports = 'ui.router';\n}\n\n(function (window, angular, undefined) {\n/*jshint globalstrict:true*/\n/*global angular:false*/\n'use strict';\n\nvar isDefined = angular.isDefined,\n    isFunction = angular.isFunction,\n    isString = angular.isString,\n    isObject = angular.isObject,\n    isArray = angular.isArray,\n    forEach = angular.forEach,\n    extend = angular.extend,\n    copy = angular.copy,\n    toJson = angular.toJson;\n\nfunction inherit(parent, extra) {\n  return extend(new (extend(function() {}, { prototype: parent }))(), extra);\n}\n\nfunction merge(dst) {\n  forEach(arguments, function(obj) {\n    if (obj !== dst) {\n      forEach(obj, function(value, key) {\n        if (!dst.hasOwnProperty(key)) dst[key] = value;\n      });\n    }\n  });\n  return dst;\n}\n\n/**\n * Finds the common ancestor path between two states.\n *\n * @param {Object} first The first state.\n * @param {Object} second The second state.\n * @return {Array} Returns an array of state names in descending order, not including the root.\n */\nfunction ancestors(first, second) {\n  var path = [];\n\n  for (var n in first.path) {\n    if (first.path[n] !== second.path[n]) break;\n    path.push(first.path[n]);\n  }\n  return path;\n}\n\n/**\n * IE8-safe wrapper for `Object.keys()`.\n *\n * @param {Object} object A JavaScript object.\n * @return {Array} Returns the keys of the object as an array.\n */\nfunction objectKeys(object) {\n  if (Object.keys) {\n    return Object.keys(object);\n  }\n  var result = [];\n\n  forEach(object, function(val, key) {\n    result.push(key);\n  });\n  return result;\n}\n\n/**\n * IE8-safe wrapper for `Array.prototype.indexOf()`.\n *\n * @param {Array} array A JavaScript array.\n * @param {*} value A value to search the array for.\n * @return {Number} Returns the array index value of `value`, or `-1` if not present.\n */\nfunction indexOf(array, value) {\n  if (Array.prototype.indexOf) {\n    return array.indexOf(value, Number(arguments[2]) || 0);\n  }\n  var len = array.length >>> 0, from = Number(arguments[2]) || 0;\n  from = (from < 0) ? Math.ceil(from) : Math.floor(from);\n\n  if (from < 0) from += len;\n\n  for (; from < len; from++) {\n    if (from in array && array[from] === value) return from;\n  }\n  return -1;\n}\n\n/**\n * Merges a set of parameters with all parameters inherited between the common parents of the\n * current state and a given destination state.\n *\n * @param {Object} currentParams The value of the current state parameters ($stateParams).\n * @param {Object} newParams The set of parameters which will be composited with inherited params.\n * @param {Object} $current Internal definition of object representing the current state.\n * @param {Object} $to Internal definition of object representing state to transition to.\n */\nfunction inheritParams(currentParams, newParams, $current, $to) {\n  var parents = ancestors($current, $to), parentParams, inherited = {}, inheritList = [];\n\n  for (var i in parents) {\n    if (!parents[i] || !parents[i].params) continue;\n    parentParams = objectKeys(parents[i].params);\n    if (!parentParams.length) continue;\n\n    for (var j in parentParams) {\n      if (indexOf(inheritList, parentParams[j]) >= 0) continue;\n      inheritList.push(parentParams[j]);\n      inherited[parentParams[j]] = currentParams[parentParams[j]];\n    }\n  }\n  return extend({}, inherited, newParams);\n}\n\n/**\n * Performs a non-strict comparison of the subset of two objects, defined by a list of keys.\n *\n * @param {Object} a The first object.\n * @param {Object} b The second object.\n * @param {Array} keys The list of keys within each object to compare. If the list is empty or not specified,\n *                     it defaults to the list of keys in `a`.\n * @return {Boolean} Returns `true` if the keys match, otherwise `false`.\n */\nfunction equalForKeys(a, b, keys) {\n  if (!keys) {\n    keys = [];\n    for (var n in a) keys.push(n); // Used instead of Object.keys() for IE8 compatibility\n  }\n\n  for (var i=0; i<keys.length; i++) {\n    var k = keys[i];\n    if (a[k] != b[k]) return false; // Not '===', values aren't necessarily normalized\n  }\n  return true;\n}\n\n/**\n * Returns the subset of an object, based on a list of keys.\n *\n * @param {Array} keys\n * @param {Object} values\n * @return {Boolean} Returns a subset of `values`.\n */\nfunction filterByKeys(keys, values) {\n  var filtered = {};\n\n  forEach(keys, function (name) {\n    filtered[name] = values[name];\n  });\n  return filtered;\n}\n\n// like _.indexBy\n// when you know that your index values will be unique, or you want last-one-in to win\nfunction indexBy(array, propName) {\n  var result = {};\n  forEach(array, function(item) {\n    result[item[propName]] = item;\n  });\n  return result;\n}\n\n// extracted from underscore.js\n// Return a copy of the object only containing the whitelisted properties.\nfunction pick(obj) {\n  var copy = {};\n  var keys = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));\n  forEach(keys, function(key) {\n    if (key in obj) copy[key] = obj[key];\n  });\n  return copy;\n}\n\n// extracted from underscore.js\n// Return a copy of the object omitting the blacklisted properties.\nfunction omit(obj) {\n  var copy = {};\n  var keys = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));\n  for (var key in obj) {\n    if (indexOf(keys, key) == -1) copy[key] = obj[key];\n  }\n  return copy;\n}\n\nfunction pluck(collection, key) {\n  var result = isArray(collection) ? [] : {};\n\n  forEach(collection, function(val, i) {\n    result[i] = isFunction(key) ? key(val) : val[key];\n  });\n  return result;\n}\n\nfunction filter(collection, callback) {\n  var array = isArray(collection);\n  var result = array ? [] : {};\n  forEach(collection, function(val, i) {\n    if (callback(val, i)) {\n      result[array ? result.length : i] = val;\n    }\n  });\n  return result;\n}\n\nfunction map(collection, callback) {\n  var result = isArray(collection) ? [] : {};\n\n  forEach(collection, function(val, i) {\n    result[i] = callback(val, i);\n  });\n  return result;\n}\n\n// issue #2676 #2889\nfunction silenceUncaughtInPromise (promise) {\n  return promise.then(undefined, function() {}) && promise;\n}\n\n/**\n * @ngdoc overview\n * @name ui.router.util\n *\n * @description\n * # ui.router.util sub-module\n *\n * This module is a dependency of other sub-modules. Do not include this module as a dependency\n * in your angular app (use {@link ui.router} module instead).\n *\n */\nangular.module('ui.router.util', ['ng']);\n\n/**\n * @ngdoc overview\n * @name ui.router.router\n * \n * @requires ui.router.util\n *\n * @description\n * # ui.router.router sub-module\n *\n * This module is a dependency of other sub-modules. Do not include this module as a dependency\n * in your angular app (use {@link ui.router} module instead).\n */\nangular.module('ui.router.router', ['ui.router.util']);\n\n/**\n * @ngdoc overview\n * @name ui.router.state\n * \n * @requires ui.router.router\n * @requires ui.router.util\n *\n * @description\n * # ui.router.state sub-module\n *\n * This module is a dependency of the main ui.router module. Do not include this module as a dependency\n * in your angular app (use {@link ui.router} module instead).\n * \n */\nangular.module('ui.router.state', ['ui.router.router', 'ui.router.util']);\n\n/**\n * @ngdoc overview\n * @name ui.router\n *\n * @requires ui.router.state\n *\n * @description\n * # ui.router\n * \n * ## The main module for ui.router \n * There are several sub-modules included with the ui.router module, however only this module is needed\n * as a dependency within your angular app. The other modules are for organization purposes. \n *\n * The modules are:\n * * ui.router - the main \"umbrella\" module\n * * ui.router.router - \n * \n * *You'll need to include **only** this module as the dependency within your angular app.*\n * \n * <pre>\n * <!doctype html>\n * <html ng-app=\"myApp\">\n * <head>\n *   <script src=\"js/angular.js\"></script>\n *   <!-- Include the ui-router script -->\n *   <script src=\"js/angular-ui-router.min.js\"></script>\n *   <script>\n *     // ...and add 'ui.router' as a dependency\n *     var myApp = angular.module('myApp', ['ui.router']);\n *   </script>\n * </head>\n * <body>\n * </body>\n * </html>\n * </pre>\n */\nangular.module('ui.router', ['ui.router.state']);\n\nangular.module('ui.router.compat', ['ui.router']);\n\n/**\n * @ngdoc object\n * @name ui.router.util.$resolve\n *\n * @requires $q\n * @requires $injector\n *\n * @description\n * Manages resolution of (acyclic) graphs of promises.\n */\n$Resolve.$inject = ['$q', '$injector'];\nfunction $Resolve(  $q,    $injector) {\n  \n  var VISIT_IN_PROGRESS = 1,\n      VISIT_DONE = 2,\n      NOTHING = {},\n      NO_DEPENDENCIES = [],\n      NO_LOCALS = NOTHING,\n      NO_PARENT = extend($q.when(NOTHING), { $$promises: NOTHING, $$values: NOTHING });\n  \n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$resolve#study\n   * @methodOf ui.router.util.$resolve\n   *\n   * @description\n   * Studies a set of invocables that are likely to be used multiple times.\n   * <pre>\n   * $resolve.study(invocables)(locals, parent, self)\n   * </pre>\n   * is equivalent to\n   * <pre>\n   * $resolve.resolve(invocables, locals, parent, self)\n   * </pre>\n   * but the former is more efficient (in fact `resolve` just calls `study` \n   * internally).\n   *\n   * @param {object} invocables Invocable objects\n   * @return {function} a function to pass in locals, parent and self\n   */\n  this.study = function (invocables) {\n    if (!isObject(invocables)) throw new Error(\"'invocables' must be an object\");\n    var invocableKeys = objectKeys(invocables || {});\n    \n    // Perform a topological sort of invocables to build an ordered plan\n    var plan = [], cycle = [], visited = {};\n    function visit(value, key) {\n      if (visited[key] === VISIT_DONE) return;\n      \n      cycle.push(key);\n      if (visited[key] === VISIT_IN_PROGRESS) {\n        cycle.splice(0, indexOf(cycle, key));\n        throw new Error(\"Cyclic dependency: \" + cycle.join(\" -> \"));\n      }\n      visited[key] = VISIT_IN_PROGRESS;\n      \n      if (isString(value)) {\n        plan.push(key, [ function() { return $injector.get(value); }], NO_DEPENDENCIES);\n      } else {\n        var params = $injector.annotate(value);\n        forEach(params, function (param) {\n          if (param !== key && invocables.hasOwnProperty(param)) visit(invocables[param], param);\n        });\n        plan.push(key, value, params);\n      }\n      \n      cycle.pop();\n      visited[key] = VISIT_DONE;\n    }\n    forEach(invocables, visit);\n    invocables = cycle = visited = null; // plan is all that's required\n    \n    function isResolve(value) {\n      return isObject(value) && value.then && value.$$promises;\n    }\n    \n    return function (locals, parent, self) {\n      if (isResolve(locals) && self === undefined) {\n        self = parent; parent = locals; locals = null;\n      }\n      if (!locals) locals = NO_LOCALS;\n      else if (!isObject(locals)) {\n        throw new Error(\"'locals' must be an object\");\n      }       \n      if (!parent) parent = NO_PARENT;\n      else if (!isResolve(parent)) {\n        throw new Error(\"'parent' must be a promise returned by $resolve.resolve()\");\n      }\n      \n      // To complete the overall resolution, we have to wait for the parent\n      // promise and for the promise for each invokable in our plan.\n      var resolution = $q.defer(),\n          result = silenceUncaughtInPromise(resolution.promise),\n          promises = result.$$promises = {},\n          values = extend({}, locals),\n          wait = 1 + plan.length/3,\n          merged = false;\n\n      silenceUncaughtInPromise(result);\n          \n      function done() {\n        // Merge parent values we haven't got yet and publish our own $$values\n        if (!--wait) {\n          if (!merged) merge(values, parent.$$values); \n          result.$$values = values;\n          result.$$promises = result.$$promises || true; // keep for isResolve()\n          delete result.$$inheritedValues;\n          resolution.resolve(values);\n        }\n      }\n      \n      function fail(reason) {\n        result.$$failure = reason;\n        resolution.reject(reason);\n      }\n\n      // Short-circuit if parent has already failed\n      if (isDefined(parent.$$failure)) {\n        fail(parent.$$failure);\n        return result;\n      }\n      \n      if (parent.$$inheritedValues) {\n        merge(values, omit(parent.$$inheritedValues, invocableKeys));\n      }\n\n      // Merge parent values if the parent has already resolved, or merge\n      // parent promises and wait if the parent resolve is still in progress.\n      extend(promises, parent.$$promises);\n      if (parent.$$values) {\n        merged = merge(values, omit(parent.$$values, invocableKeys));\n        result.$$inheritedValues = omit(parent.$$values, invocableKeys);\n        done();\n      } else {\n        if (parent.$$inheritedValues) {\n          result.$$inheritedValues = omit(parent.$$inheritedValues, invocableKeys);\n        }        \n        parent.then(done, fail);\n      }\n      \n      // Process each invocable in the plan, but ignore any where a local of the same name exists.\n      for (var i=0, ii=plan.length; i<ii; i+=3) {\n        if (locals.hasOwnProperty(plan[i])) done();\n        else invoke(plan[i], plan[i+1], plan[i+2]);\n      }\n      \n      function invoke(key, invocable, params) {\n        // Create a deferred for this invocation. Failures will propagate to the resolution as well.\n        var invocation = $q.defer(), waitParams = 0;\n        function onfailure(reason) {\n          invocation.reject(reason);\n          fail(reason);\n        }\n        // Wait for any parameter that we have a promise for (either from parent or from this\n        // resolve; in that case study() will have made sure it's ordered before us in the plan).\n        forEach(params, function (dep) {\n          if (promises.hasOwnProperty(dep) && !locals.hasOwnProperty(dep)) {\n            waitParams++;\n            promises[dep].then(function (result) {\n              values[dep] = result;\n              if (!(--waitParams)) proceed();\n            }, onfailure);\n          }\n        });\n        if (!waitParams) proceed();\n        function proceed() {\n          if (isDefined(result.$$failure)) return;\n          try {\n            invocation.resolve($injector.invoke(invocable, self, values));\n            invocation.promise.then(function (result) {\n              values[key] = result;\n              done();\n            }, onfailure);\n          } catch (e) {\n            onfailure(e);\n          }\n        }\n        // Publish promise synchronously; invocations further down in the plan may depend on it.\n        promises[key] = silenceUncaughtInPromise(invocation.promise);\n      }\n      \n      return result;\n    };\n  };\n  \n  /**\n   * @ngdoc function\n   * @name ui.router.util.$resolve#resolve\n   * @methodOf ui.router.util.$resolve\n   *\n   * @description\n   * Resolves a set of invocables. An invocable is a function to be invoked via \n   * `$injector.invoke()`, and can have an arbitrary number of dependencies. \n   * An invocable can either return a value directly,\n   * or a `$q` promise. If a promise is returned it will be resolved and the \n   * resulting value will be used instead. Dependencies of invocables are resolved \n   * (in this order of precedence)\n   *\n   * - from the specified `locals`\n   * - from another invocable that is part of this `$resolve` call\n   * - from an invocable that is inherited from a `parent` call to `$resolve` \n   *   (or recursively\n   * - from any ancestor `$resolve` of that parent).\n   *\n   * The return value of `$resolve` is a promise for an object that contains \n   * (in this order of precedence)\n   *\n   * - any `locals` (if specified)\n   * - the resolved return values of all injectables\n   * - any values inherited from a `parent` call to `$resolve` (if specified)\n   *\n   * The promise will resolve after the `parent` promise (if any) and all promises \n   * returned by injectables have been resolved. If any invocable \n   * (or `$injector.invoke`) throws an exception, or if a promise returned by an \n   * invocable is rejected, the `$resolve` promise is immediately rejected with the \n   * same error. A rejection of a `parent` promise (if specified) will likewise be \n   * propagated immediately. Once the `$resolve` promise has been rejected, no \n   * further invocables will be called.\n   * \n   * Cyclic dependencies between invocables are not permitted and will cause `$resolve`\n   * to throw an error. As a special case, an injectable can depend on a parameter \n   * with the same name as the injectable, which will be fulfilled from the `parent` \n   * injectable of the same name. This allows inherited values to be decorated. \n   * Note that in this case any other injectable in the same `$resolve` with the same\n   * dependency would see the decorated value, not the inherited value.\n   *\n   * Note that missing dependencies -- unlike cyclic dependencies -- will cause an \n   * (asynchronous) rejection of the `$resolve` promise rather than a (synchronous) \n   * exception.\n   *\n   * Invocables are invoked eagerly as soon as all dependencies are available. \n   * This is true even for dependencies inherited from a `parent` call to `$resolve`.\n   *\n   * As a special case, an invocable can be a string, in which case it is taken to \n   * be a service name to be passed to `$injector.get()`. This is supported primarily \n   * for backwards-compatibility with the `resolve` property of `$routeProvider` \n   * routes.\n   *\n   * @param {object} invocables functions to invoke or \n   * `$injector` services to fetch.\n   * @param {object} locals  values to make available to the injectables\n   * @param {object} parent  a promise returned by another call to `$resolve`.\n   * @param {object} self  the `this` for the invoked methods\n   * @return {object} Promise for an object that contains the resolved return value\n   * of all invocables, as well as any inherited and local values.\n   */\n  this.resolve = function (invocables, locals, parent, self) {\n    return this.study(invocables)(locals, parent, self);\n  };\n}\n\nangular.module('ui.router.util').service('$resolve', $Resolve);\n\n\n\n/**\n * @ngdoc object\n * @name ui.router.util.$templateFactoryProvider\n *\n * @description\n * Provider for $templateFactory. Manages which template-loading mechanism to\n * use, and will default to the most recent one ($templateRequest on Angular\n * versions starting from 1.3, $http otherwise).\n */\nfunction TemplateFactoryProvider() {\n  var shouldUnsafelyUseHttp = angular.version.minor < 3;\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$templateFactoryProvider#shouldUnsafelyUseHttp\n   * @methodOf ui.router.util.$templateFactoryProvider\n   *\n   * @description\n   * Forces $templateFactory to use $http instead of $templateRequest. This\n   * might cause XSS, as $http doesn't enforce the regular security checks for\n   * templates that have been introduced in Angular 1.3. Note that setting this\n   * to false on Angular older than 1.3.x will crash, as the $templateRequest\n   * service (and the security checks) are not implemented on these versions.\n   *\n   * See the $sce documentation, section\n   * <a href=\"https://docs.angularjs.org/api/ng/service/$sce#impact-on-loading-templates\">\n   * Impact on loading templates</a> for more details about this mechanism.\n   *\n   * @param {boolean} value\n   */\n  this.shouldUnsafelyUseHttp = function(value) {\n    shouldUnsafelyUseHttp = !!value;\n  };\n\n  /**\n   * @ngdoc object\n   * @name ui.router.util.$templateFactory\n   *\n   * @requires $http\n   * @requires $templateCache\n   * @requires $injector\n   *\n   * @description\n   * Service. Manages loading of templates.\n   */\n  this.$get = ['$http', '$templateCache', '$injector', function($http, $templateCache, $injector){\n    return new TemplateFactory($http, $templateCache, $injector, shouldUnsafelyUseHttp);}];\n}\n\n\n/**\n * @ngdoc object\n * @name ui.router.util.$templateFactory\n *\n * @requires $http\n * @requires $templateCache\n * @requires $injector\n *\n * @description\n * Service. Manages loading of templates.\n */\nfunction TemplateFactory($http, $templateCache, $injector, shouldUnsafelyUseHttp) {\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$templateFactory#fromConfig\n   * @methodOf ui.router.util.$templateFactory\n   *\n   * @description\n   * Creates a template from a configuration object. \n   *\n   * @param {object} config Configuration object for which to load a template. \n   * The following properties are search in the specified order, and the first one \n   * that is defined is used to create the template:\n   *\n   * @param {string|object} config.template html string template or function to \n   * load via {@link ui.router.util.$templateFactory#fromString fromString}.\n   * @param {string|object} config.templateUrl url to load or a function returning \n   * the url to load via {@link ui.router.util.$templateFactory#fromUrl fromUrl}.\n   * @param {Function} config.templateProvider function to invoke via \n   * {@link ui.router.util.$templateFactory#fromProvider fromProvider}.\n   * @param {object} params  Parameters to pass to the template function.\n   * @param {object} locals Locals to pass to `invoke` if the template is loaded \n   * via a `templateProvider`. Defaults to `{ params: params }`.\n   *\n   * @return {string|object}  The template html as a string, or a promise for \n   * that string,or `null` if no template is configured.\n   */\n  this.fromConfig = function (config, params, locals) {\n    return (\n      isDefined(config.template) ? this.fromString(config.template, params) :\n      isDefined(config.templateUrl) ? this.fromUrl(config.templateUrl, params) :\n      isDefined(config.templateProvider) ? this.fromProvider(config.templateProvider, params, locals) :\n      null\n    );\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$templateFactory#fromString\n   * @methodOf ui.router.util.$templateFactory\n   *\n   * @description\n   * Creates a template from a string or a function returning a string.\n   *\n   * @param {string|object} template html template as a string or function that \n   * returns an html template as a string.\n   * @param {object} params Parameters to pass to the template function.\n   *\n   * @return {string|object} The template html as a string, or a promise for that \n   * string.\n   */\n  this.fromString = function (template, params) {\n    return isFunction(template) ? template(params) : template;\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$templateFactory#fromUrl\n   * @methodOf ui.router.util.$templateFactory\n   * \n   * @description\n   * Loads a template from the a URL via `$http` and `$templateCache`.\n   *\n   * @param {string|Function} url url of the template to load, or a function \n   * that returns a url.\n   * @param {Object} params Parameters to pass to the url function.\n   * @return {string|Promise.<string>} The template html as a string, or a promise \n   * for that string.\n   */\n  this.fromUrl = function (url, params) {\n    if (isFunction(url)) url = url(params);\n    if (url == null) return null;\n    else {\n      if(!shouldUnsafelyUseHttp) {\n        return $injector.get('$templateRequest')(url);\n      } else {\n        return $http\n          .get(url, { cache: $templateCache, headers: { Accept: 'text/html' }})\n          .then(function(response) { return response.data; });\n      }\n    }\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$templateFactory#fromProvider\n   * @methodOf ui.router.util.$templateFactory\n   *\n   * @description\n   * Creates a template by invoking an injectable provider function.\n   *\n   * @param {Function} provider Function to invoke via `$injector.invoke`\n   * @param {Object} params Parameters for the template.\n   * @param {Object} locals Locals to pass to `invoke`. Defaults to \n   * `{ params: params }`.\n   * @return {string|Promise.<string>} The template html as a string, or a promise \n   * for that string.\n   */\n  this.fromProvider = function (provider, params, locals) {\n    return $injector.invoke(provider, null, locals || { params: params });\n  };\n}\n\nangular.module('ui.router.util').provider('$templateFactory', TemplateFactoryProvider);\n\nvar $$UMFP; // reference to $UrlMatcherFactoryProvider\n\n/**\n * @ngdoc object\n * @name ui.router.util.type:UrlMatcher\n *\n * @description\n * Matches URLs against patterns and extracts named parameters from the path or the search\n * part of the URL. A URL pattern consists of a path pattern, optionally followed by '?' and a list\n * of search parameters. Multiple search parameter names are separated by '&'. Search parameters\n * do not influence whether or not a URL is matched, but their values are passed through into\n * the matched parameters returned by {@link ui.router.util.type:UrlMatcher#methods_exec exec}.\n *\n * Path parameter placeholders can be specified using simple colon/catch-all syntax or curly brace\n * syntax, which optionally allows a regular expression for the parameter to be specified:\n *\n * * `':'` name - colon placeholder\n * * `'*'` name - catch-all placeholder\n * * `'{' name '}'` - curly placeholder\n * * `'{' name ':' regexp|type '}'` - curly placeholder with regexp or type name. Should the\n *   regexp itself contain curly braces, they must be in matched pairs or escaped with a backslash.\n *\n * Parameter names may contain only word characters (latin letters, digits, and underscore) and\n * must be unique within the pattern (across both path and search parameters). For colon\n * placeholders or curly placeholders without an explicit regexp, a path parameter matches any\n * number of characters other than '/'. For catch-all placeholders the path parameter matches\n * any number of characters.\n *\n * Examples:\n *\n * * `'/hello/'` - Matches only if the path is exactly '/hello/'. There is no special treatment for\n *   trailing slashes, and patterns have to match the entire path, not just a prefix.\n * * `'/user/:id'` - Matches '/user/bob' or '/user/1234!!!' or even '/user/' but not '/user' or\n *   '/user/bob/details'. The second path segment will be captured as the parameter 'id'.\n * * `'/user/{id}'` - Same as the previous example, but using curly brace syntax.\n * * `'/user/{id:[^/]*}'` - Same as the previous example.\n * * `'/user/{id:[0-9a-fA-F]{1,8}}'` - Similar to the previous example, but only matches if the id\n *   parameter consists of 1 to 8 hex digits.\n * * `'/files/{path:.*}'` - Matches any URL starting with '/files/' and captures the rest of the\n *   path into the parameter 'path'.\n * * `'/files/*path'` - ditto.\n * * `'/calendar/{start:date}'` - Matches \"/calendar/2014-11-12\" (because the pattern defined\n *   in the built-in  `date` Type matches `2014-11-12`) and provides a Date object in $stateParams.start\n *\n * @param {string} pattern  The pattern to compile into a matcher.\n * @param {Object} config  A configuration object hash:\n * @param {Object=} parentMatcher Used to concatenate the pattern/config onto\n *   an existing UrlMatcher\n *\n * * `caseInsensitive` - `true` if URL matching should be case insensitive, otherwise `false`, the default value (for backward compatibility) is `false`.\n * * `strict` - `false` if matching against a URL with a trailing slash should be treated as equivalent to a URL without a trailing slash, the default value is `true`.\n *\n * @property {string} prefix  A static prefix of this pattern. The matcher guarantees that any\n *   URL matching this matcher (i.e. any string for which {@link ui.router.util.type:UrlMatcher#methods_exec exec()} returns\n *   non-null) will start with this prefix.\n *\n * @property {string} source  The pattern that was passed into the constructor\n *\n * @property {string} sourcePath  The path portion of the source property\n *\n * @property {string} sourceSearch  The search portion of the source property\n *\n * @property {string} regex  The constructed regex that will be used to match against the url when\n *   it is time to determine which url will match.\n *\n * @returns {Object}  New `UrlMatcher` object\n */\nfunction UrlMatcher(pattern, config, parentMatcher) {\n  config = extend({ params: {} }, isObject(config) ? config : {});\n\n  // Find all placeholders and create a compiled pattern, using either classic or curly syntax:\n  //   '*' name\n  //   ':' name\n  //   '{' name '}'\n  //   '{' name ':' regexp '}'\n  // The regular expression is somewhat complicated due to the need to allow curly braces\n  // inside the regular expression. The placeholder regexp breaks down as follows:\n  //    ([:*])([\\w\\[\\]]+)              - classic placeholder ($1 / $2) (search version has - for snake-case)\n  //    \\{([\\w\\[\\]]+)(?:\\:\\s*( ... ))?\\}  - curly brace placeholder ($3) with optional regexp/type ... ($4) (search version has - for snake-case\n  //    (?: ... | ... | ... )+         - the regexp consists of any number of atoms, an atom being either\n  //    [^{}\\\\]+                       - anything other than curly braces or backslash\n  //    \\\\.                            - a backslash escape\n  //    \\{(?:[^{}\\\\]+|\\\\.)*\\}          - a matched set of curly braces containing other atoms\n  var placeholder       = /([:*])([\\w\\[\\]]+)|\\{([\\w\\[\\]]+)(?:\\:\\s*((?:[^{}\\\\]+|\\\\.|\\{(?:[^{}\\\\]+|\\\\.)*\\})+))?\\}/g,\n      searchPlaceholder = /([:]?)([\\w\\[\\].-]+)|\\{([\\w\\[\\].-]+)(?:\\:\\s*((?:[^{}\\\\]+|\\\\.|\\{(?:[^{}\\\\]+|\\\\.)*\\})+))?\\}/g,\n      compiled = '^', last = 0, m,\n      segments = this.segments = [],\n      parentParams = parentMatcher ? parentMatcher.params : {},\n      params = this.params = parentMatcher ? parentMatcher.params.$$new() : new $$UMFP.ParamSet(),\n      paramNames = [];\n\n  function addParameter(id, type, config, location) {\n    paramNames.push(id);\n    if (parentParams[id]) return parentParams[id];\n    if (!/^\\w+([-.]+\\w+)*(?:\\[\\])?$/.test(id)) throw new Error(\"Invalid parameter name '\" + id + \"' in pattern '\" + pattern + \"'\");\n    if (params[id]) throw new Error(\"Duplicate parameter name '\" + id + \"' in pattern '\" + pattern + \"'\");\n    params[id] = new $$UMFP.Param(id, type, config, location);\n    return params[id];\n  }\n\n  function quoteRegExp(string, pattern, squash, optional) {\n    var surroundPattern = ['',''], result = string.replace(/[\\\\\\[\\]\\^$*+?.()|{}]/g, \"\\\\$&\");\n    if (!pattern) return result;\n    switch(squash) {\n      case false: surroundPattern = ['(', ')' + (optional ? \"?\" : \"\")]; break;\n      case true:\n        result = result.replace(/\\/$/, '');\n        surroundPattern = ['(?:\\/(', ')|\\/)?'];\n      break;\n      default:    surroundPattern = ['(' + squash + \"|\", ')?']; break;\n    }\n    return result + surroundPattern[0] + pattern + surroundPattern[1];\n  }\n\n  this.source = pattern;\n\n  // Split into static segments separated by path parameter placeholders.\n  // The number of segments is always 1 more than the number of parameters.\n  function matchDetails(m, isSearch) {\n    var id, regexp, segment, type, cfg, arrayMode;\n    id          = m[2] || m[3]; // IE[78] returns '' for unmatched groups instead of null\n    cfg         = config.params[id];\n    segment     = pattern.substring(last, m.index);\n    regexp      = isSearch ? m[4] : m[4] || (m[1] == '*' ? '.*' : null);\n\n    if (regexp) {\n      type      = $$UMFP.type(regexp) || inherit($$UMFP.type(\"string\"), { pattern: new RegExp(regexp, config.caseInsensitive ? 'i' : undefined) });\n    }\n\n    return {\n      id: id, regexp: regexp, segment: segment, type: type, cfg: cfg\n    };\n  }\n\n  var p, param, segment;\n  while ((m = placeholder.exec(pattern))) {\n    p = matchDetails(m, false);\n    if (p.segment.indexOf('?') >= 0) break; // we're into the search part\n\n    param = addParameter(p.id, p.type, p.cfg, \"path\");\n    compiled += quoteRegExp(p.segment, param.type.pattern.source, param.squash, param.isOptional);\n    segments.push(p.segment);\n    last = placeholder.lastIndex;\n  }\n  segment = pattern.substring(last);\n\n  // Find any search parameter names and remove them from the last segment\n  var i = segment.indexOf('?');\n\n  if (i >= 0) {\n    var search = this.sourceSearch = segment.substring(i);\n    segment = segment.substring(0, i);\n    this.sourcePath = pattern.substring(0, last + i);\n\n    if (search.length > 0) {\n      last = 0;\n      while ((m = searchPlaceholder.exec(search))) {\n        p = matchDetails(m, true);\n        param = addParameter(p.id, p.type, p.cfg, \"search\");\n        last = placeholder.lastIndex;\n        // check if ?&\n      }\n    }\n  } else {\n    this.sourcePath = pattern;\n    this.sourceSearch = '';\n  }\n\n  compiled += quoteRegExp(segment) + (config.strict === false ? '\\/?' : '') + '$';\n  segments.push(segment);\n\n  this.regexp = new RegExp(compiled, config.caseInsensitive ? 'i' : undefined);\n  this.prefix = segments[0];\n  this.$$paramNames = paramNames;\n}\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:UrlMatcher#concat\n * @methodOf ui.router.util.type:UrlMatcher\n *\n * @description\n * Returns a new matcher for a pattern constructed by appending the path part and adding the\n * search parameters of the specified pattern to this pattern. The current pattern is not\n * modified. This can be understood as creating a pattern for URLs that are relative to (or\n * suffixes of) the current pattern.\n *\n * @example\n * The following two matchers are equivalent:\n * <pre>\n * new UrlMatcher('/user/{id}?q').concat('/details?date');\n * new UrlMatcher('/user/{id}/details?q&date');\n * </pre>\n *\n * @param {string} pattern  The pattern to append.\n * @param {Object} config  An object hash of the configuration for the matcher.\n * @returns {UrlMatcher}  A matcher for the concatenated pattern.\n */\nUrlMatcher.prototype.concat = function (pattern, config) {\n  // Because order of search parameters is irrelevant, we can add our own search\n  // parameters to the end of the new pattern. Parse the new pattern by itself\n  // and then join the bits together, but it's much easier to do this on a string level.\n  var defaultConfig = {\n    caseInsensitive: $$UMFP.caseInsensitive(),\n    strict: $$UMFP.strictMode(),\n    squash: $$UMFP.defaultSquashPolicy()\n  };\n  return new UrlMatcher(this.sourcePath + pattern + this.sourceSearch, extend(defaultConfig, config), this);\n};\n\nUrlMatcher.prototype.toString = function () {\n  return this.source;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:UrlMatcher#exec\n * @methodOf ui.router.util.type:UrlMatcher\n *\n * @description\n * Tests the specified path against this matcher, and returns an object containing the captured\n * parameter values, or null if the path does not match. The returned object contains the values\n * of any search parameters that are mentioned in the pattern, but their value may be null if\n * they are not present in `searchParams`. This means that search parameters are always treated\n * as optional.\n *\n * @example\n * <pre>\n * new UrlMatcher('/user/{id}?q&r').exec('/user/bob', {\n *   x: '1', q: 'hello'\n * });\n * // returns { id: 'bob', q: 'hello', r: null }\n * </pre>\n *\n * @param {string} path  The URL path to match, e.g. `$location.path()`.\n * @param {Object} searchParams  URL search parameters, e.g. `$location.search()`.\n * @returns {Object}  The captured parameter values.\n */\nUrlMatcher.prototype.exec = function (path, searchParams) {\n  var m = this.regexp.exec(path);\n  if (!m) return null;\n  searchParams = searchParams || {};\n\n  var paramNames = this.parameters(), nTotal = paramNames.length,\n    nPath = this.segments.length - 1,\n    values = {}, i, j, cfg, paramName;\n\n  if (nPath !== m.length - 1) throw new Error(\"Unbalanced capture group in route '\" + this.source + \"'\");\n\n  function decodePathArray(string) {\n    function reverseString(str) { return str.split(\"\").reverse().join(\"\"); }\n    function unquoteDashes(str) { return str.replace(/\\\\-/g, \"-\"); }\n\n    var split = reverseString(string).split(/-(?!\\\\)/);\n    var allReversed = map(split, reverseString);\n    return map(allReversed, unquoteDashes).reverse();\n  }\n\n  var param, paramVal;\n  for (i = 0; i < nPath; i++) {\n    paramName = paramNames[i];\n    param = this.params[paramName];\n    paramVal = m[i+1];\n    // if the param value matches a pre-replace pair, replace the value before decoding.\n    for (j = 0; j < param.replace.length; j++) {\n      if (param.replace[j].from === paramVal) paramVal = param.replace[j].to;\n    }\n    if (paramVal && param.array === true) paramVal = decodePathArray(paramVal);\n    if (isDefined(paramVal)) paramVal = param.type.decode(paramVal);\n    values[paramName] = param.value(paramVal);\n  }\n  for (/**/; i < nTotal; i++) {\n    paramName = paramNames[i];\n    values[paramName] = this.params[paramName].value(searchParams[paramName]);\n    param = this.params[paramName];\n    paramVal = searchParams[paramName];\n    for (j = 0; j < param.replace.length; j++) {\n      if (param.replace[j].from === paramVal) paramVal = param.replace[j].to;\n    }\n    if (isDefined(paramVal)) paramVal = param.type.decode(paramVal);\n    values[paramName] = param.value(paramVal);\n  }\n\n  return values;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:UrlMatcher#parameters\n * @methodOf ui.router.util.type:UrlMatcher\n *\n * @description\n * Returns the names of all path and search parameters of this pattern in an unspecified order.\n *\n * @returns {Array.<string>}  An array of parameter names. Must be treated as read-only. If the\n *    pattern has no parameters, an empty array is returned.\n */\nUrlMatcher.prototype.parameters = function (param) {\n  if (!isDefined(param)) return this.$$paramNames;\n  return this.params[param] || null;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:UrlMatcher#validates\n * @methodOf ui.router.util.type:UrlMatcher\n *\n * @description\n * Checks an object hash of parameters to validate their correctness according to the parameter\n * types of this `UrlMatcher`.\n *\n * @param {Object} params The object hash of parameters to validate.\n * @returns {boolean} Returns `true` if `params` validates, otherwise `false`.\n */\nUrlMatcher.prototype.validates = function (params) {\n  return this.params.$$validates(params);\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:UrlMatcher#format\n * @methodOf ui.router.util.type:UrlMatcher\n *\n * @description\n * Creates a URL that matches this pattern by substituting the specified values\n * for the path and search parameters. Null values for path parameters are\n * treated as empty strings.\n *\n * @example\n * <pre>\n * new UrlMatcher('/user/{id}?q').format({ id:'bob', q:'yes' });\n * // returns '/user/bob?q=yes'\n * </pre>\n *\n * @param {Object} values  the values to substitute for the parameters in this pattern.\n * @returns {string}  the formatted URL (path and optionally search part).\n */\nUrlMatcher.prototype.format = function (values) {\n  values = values || {};\n  var segments = this.segments, params = this.parameters(), paramset = this.params;\n  if (!this.validates(values)) return null;\n\n  var i, search = false, nPath = segments.length - 1, nTotal = params.length, result = segments[0];\n\n  function encodeDashes(str) { // Replace dashes with encoded \"\\-\"\n    return encodeURIComponent(str).replace(/-/g, function(c) { return '%5C%' + c.charCodeAt(0).toString(16).toUpperCase(); });\n  }\n\n  for (i = 0; i < nTotal; i++) {\n    var isPathParam = i < nPath;\n    var name = params[i], param = paramset[name], value = param.value(values[name]);\n    var isDefaultValue = param.isOptional && param.type.equals(param.value(), value);\n    var squash = isDefaultValue ? param.squash : false;\n    var encoded = param.type.encode(value);\n\n    if (isPathParam) {\n      var nextSegment = segments[i + 1];\n      var isFinalPathParam = i + 1 === nPath;\n\n      if (squash === false) {\n        if (encoded != null) {\n          if (isArray(encoded)) {\n            result += map(encoded, encodeDashes).join(\"-\");\n          } else {\n            result += encodeURIComponent(encoded);\n          }\n        }\n        result += nextSegment;\n      } else if (squash === true) {\n        var capture = result.match(/\\/$/) ? /\\/?(.*)/ : /(.*)/;\n        result += nextSegment.match(capture)[1];\n      } else if (isString(squash)) {\n        result += squash + nextSegment;\n      }\n\n      if (isFinalPathParam && param.squash === true && result.slice(-1) === '/') result = result.slice(0, -1);\n    } else {\n      if (encoded == null || (isDefaultValue && squash !== false)) continue;\n      if (!isArray(encoded)) encoded = [ encoded ];\n      if (encoded.length === 0) continue;\n      encoded = map(encoded, encodeURIComponent).join('&' + name + '=');\n      result += (search ? '&' : '?') + (name + '=' + encoded);\n      search = true;\n    }\n  }\n\n  return result;\n};\n\n/**\n * @ngdoc object\n * @name ui.router.util.type:Type\n *\n * @description\n * Implements an interface to define custom parameter types that can be decoded from and encoded to\n * string parameters matched in a URL. Used by {@link ui.router.util.type:UrlMatcher `UrlMatcher`}\n * objects when matching or formatting URLs, or comparing or validating parameter values.\n *\n * See {@link ui.router.util.$urlMatcherFactory#methods_type `$urlMatcherFactory#type()`} for more\n * information on registering custom types.\n *\n * @param {Object} config  A configuration object which contains the custom type definition.  The object's\n *        properties will override the default methods and/or pattern in `Type`'s public interface.\n * @example\n * <pre>\n * {\n *   decode: function(val) { return parseInt(val, 10); },\n *   encode: function(val) { return val && val.toString(); },\n *   equals: function(a, b) { return this.is(a) && a === b; },\n *   is: function(val) { return angular.isNumber(val) isFinite(val) && val % 1 === 0; },\n *   pattern: /\\d+/\n * }\n * </pre>\n *\n * @property {RegExp} pattern The regular expression pattern used to match values of this type when\n *           coming from a substring of a URL.\n *\n * @returns {Object}  Returns a new `Type` object.\n */\nfunction Type(config) {\n  extend(this, config);\n}\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:Type#is\n * @methodOf ui.router.util.type:Type\n *\n * @description\n * Detects whether a value is of a particular type. Accepts a native (decoded) value\n * and determines whether it matches the current `Type` object.\n *\n * @param {*} val  The value to check.\n * @param {string} key  Optional. If the type check is happening in the context of a specific\n *        {@link ui.router.util.type:UrlMatcher `UrlMatcher`} object, this is the name of the\n *        parameter in which `val` is stored. Can be used for meta-programming of `Type` objects.\n * @returns {Boolean}  Returns `true` if the value matches the type, otherwise `false`.\n */\nType.prototype.is = function(val, key) {\n  return true;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:Type#encode\n * @methodOf ui.router.util.type:Type\n *\n * @description\n * Encodes a custom/native type value to a string that can be embedded in a URL. Note that the\n * return value does *not* need to be URL-safe (i.e. passed through `encodeURIComponent()`), it\n * only needs to be a representation of `val` that has been coerced to a string.\n *\n * @param {*} val  The value to encode.\n * @param {string} key  The name of the parameter in which `val` is stored. Can be used for\n *        meta-programming of `Type` objects.\n * @returns {string}  Returns a string representation of `val` that can be encoded in a URL.\n */\nType.prototype.encode = function(val, key) {\n  return val;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:Type#decode\n * @methodOf ui.router.util.type:Type\n *\n * @description\n * Converts a parameter value (from URL string or transition param) to a custom/native value.\n *\n * @param {string} val  The URL parameter value to decode.\n * @param {string} key  The name of the parameter in which `val` is stored. Can be used for\n *        meta-programming of `Type` objects.\n * @returns {*}  Returns a custom representation of the URL parameter value.\n */\nType.prototype.decode = function(val, key) {\n  return val;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:Type#equals\n * @methodOf ui.router.util.type:Type\n *\n * @description\n * Determines whether two decoded values are equivalent.\n *\n * @param {*} a  A value to compare against.\n * @param {*} b  A value to compare against.\n * @returns {Boolean}  Returns `true` if the values are equivalent/equal, otherwise `false`.\n */\nType.prototype.equals = function(a, b) {\n  return a == b;\n};\n\nType.prototype.$subPattern = function() {\n  var sub = this.pattern.toString();\n  return sub.substr(1, sub.length - 2);\n};\n\nType.prototype.pattern = /.*/;\n\nType.prototype.toString = function() { return \"{Type:\" + this.name + \"}\"; };\n\n/** Given an encoded string, or a decoded object, returns a decoded object */\nType.prototype.$normalize = function(val) {\n  return this.is(val) ? val : this.decode(val);\n};\n\n/*\n * Wraps an existing custom Type as an array of Type, depending on 'mode'.\n * e.g.:\n * - urlmatcher pattern \"/path?{queryParam[]:int}\"\n * - url: \"/path?queryParam=1&queryParam=2\n * - $stateParams.queryParam will be [1, 2]\n * if `mode` is \"auto\", then\n * - url: \"/path?queryParam=1 will create $stateParams.queryParam: 1\n * - url: \"/path?queryParam=1&queryParam=2 will create $stateParams.queryParam: [1, 2]\n */\nType.prototype.$asArray = function(mode, isSearch) {\n  if (!mode) return this;\n  if (mode === \"auto\" && !isSearch) throw new Error(\"'auto' array mode is for query parameters only\");\n\n  function ArrayType(type, mode) {\n    function bindTo(type, callbackName) {\n      return function() {\n        return type[callbackName].apply(type, arguments);\n      };\n    }\n\n    // Wrap non-array value as array\n    function arrayWrap(val) { return isArray(val) ? val : (isDefined(val) ? [ val ] : []); }\n    // Unwrap array value for \"auto\" mode. Return undefined for empty array.\n    function arrayUnwrap(val) {\n      switch(val.length) {\n        case 0: return undefined;\n        case 1: return mode === \"auto\" ? val[0] : val;\n        default: return val;\n      }\n    }\n    function falsey(val) { return !val; }\n\n    // Wraps type (.is/.encode/.decode) functions to operate on each value of an array\n    function arrayHandler(callback, allTruthyMode) {\n      return function handleArray(val) {\n        if (isArray(val) && val.length === 0) return val;\n        val = arrayWrap(val);\n        var result = map(val, callback);\n        if (allTruthyMode === true)\n          return filter(result, falsey).length === 0;\n        return arrayUnwrap(result);\n      };\n    }\n\n    // Wraps type (.equals) functions to operate on each value of an array\n    function arrayEqualsHandler(callback) {\n      return function handleArray(val1, val2) {\n        var left = arrayWrap(val1), right = arrayWrap(val2);\n        if (left.length !== right.length) return false;\n        for (var i = 0; i < left.length; i++) {\n          if (!callback(left[i], right[i])) return false;\n        }\n        return true;\n      };\n    }\n\n    this.encode = arrayHandler(bindTo(type, 'encode'));\n    this.decode = arrayHandler(bindTo(type, 'decode'));\n    this.is     = arrayHandler(bindTo(type, 'is'), true);\n    this.equals = arrayEqualsHandler(bindTo(type, 'equals'));\n    this.pattern = type.pattern;\n    this.$normalize = arrayHandler(bindTo(type, '$normalize'));\n    this.name = type.name;\n    this.$arrayMode = mode;\n  }\n\n  return new ArrayType(this, mode);\n};\n\n\n\n/**\n * @ngdoc object\n * @name ui.router.util.$urlMatcherFactory\n *\n * @description\n * Factory for {@link ui.router.util.type:UrlMatcher `UrlMatcher`} instances. The factory\n * is also available to providers under the name `$urlMatcherFactoryProvider`.\n */\nfunction $UrlMatcherFactory() {\n  $$UMFP = this;\n\n  var isCaseInsensitive = false, isStrictMode = true, defaultSquashPolicy = false;\n\n  // Use tildes to pre-encode slashes.\n  // If the slashes are simply URLEncoded, the browser can choose to pre-decode them,\n  // and bidirectional encoding/decoding fails.\n  // Tilde was chosen because it's not a RFC 3986 section 2.2 Reserved Character\n  function valToString(val) { return val != null ? val.toString().replace(/(~|\\/)/g, function (m) { return {'~':'~~', '/':'~2F'}[m]; }) : val; }\n  function valFromString(val) { return val != null ? val.toString().replace(/(~~|~2F)/g, function (m) { return {'~~':'~', '~2F':'/'}[m]; }) : val; }\n\n  var $types = {}, enqueue = true, typeQueue = [], injector, defaultTypes = {\n    \"string\": {\n      encode: valToString,\n      decode: valFromString,\n      // TODO: in 1.0, make string .is() return false if value is undefined/null by default.\n      // In 0.2.x, string params are optional by default for backwards compat\n      is: function(val) { return val == null || !isDefined(val) || typeof val === \"string\"; },\n      pattern: /[^/]*/\n    },\n    \"int\": {\n      encode: valToString,\n      decode: function(val) { return parseInt(val, 10); },\n      is: function(val) { return val !== undefined && val !== null && this.decode(val.toString()) === val; },\n      pattern: /\\d+/\n    },\n    \"bool\": {\n      encode: function(val) { return val ? 1 : 0; },\n      decode: function(val) { return parseInt(val, 10) !== 0; },\n      is: function(val) { return val === true || val === false; },\n      pattern: /0|1/\n    },\n    \"date\": {\n      encode: function (val) {\n        if (!this.is(val))\n          return undefined;\n        return [ val.getFullYear(),\n          ('0' + (val.getMonth() + 1)).slice(-2),\n          ('0' + val.getDate()).slice(-2)\n        ].join(\"-\");\n      },\n      decode: function (val) {\n        if (this.is(val)) return val;\n        var match = this.capture.exec(val);\n        return match ? new Date(match[1], match[2] - 1, match[3]) : undefined;\n      },\n      is: function(val) { return val instanceof Date && !isNaN(val.valueOf()); },\n      equals: function (a, b) { return this.is(a) && this.is(b) && a.toISOString() === b.toISOString(); },\n      pattern: /[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,\n      capture: /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/\n    },\n    \"json\": {\n      encode: angular.toJson,\n      decode: angular.fromJson,\n      is: angular.isObject,\n      equals: angular.equals,\n      pattern: /[^/]*/\n    },\n    \"any\": { // does not encode/decode\n      encode: angular.identity,\n      decode: angular.identity,\n      equals: angular.equals,\n      pattern: /.*/\n    }\n  };\n\n  function getDefaultConfig() {\n    return {\n      strict: isStrictMode,\n      caseInsensitive: isCaseInsensitive\n    };\n  }\n\n  function isInjectable(value) {\n    return (isFunction(value) || (isArray(value) && isFunction(value[value.length - 1])));\n  }\n\n  /**\n   * [Internal] Get the default value of a parameter, which may be an injectable function.\n   */\n  $UrlMatcherFactory.$$getDefaultValue = function(config) {\n    if (!isInjectable(config.value)) return config.value;\n    if (!injector) throw new Error(\"Injectable functions cannot be called at configuration time\");\n    return injector.invoke(config.value);\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#caseInsensitive\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Defines whether URL matching should be case sensitive (the default behavior), or not.\n   *\n   * @param {boolean} value `false` to match URL in a case sensitive manner; otherwise `true`;\n   * @returns {boolean} the current value of caseInsensitive\n   */\n  this.caseInsensitive = function(value) {\n    if (isDefined(value))\n      isCaseInsensitive = value;\n    return isCaseInsensitive;\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#strictMode\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Defines whether URLs should match trailing slashes, or not (the default behavior).\n   *\n   * @param {boolean=} value `false` to match trailing slashes in URLs, otherwise `true`.\n   * @returns {boolean} the current value of strictMode\n   */\n  this.strictMode = function(value) {\n    if (isDefined(value))\n      isStrictMode = value;\n    return isStrictMode;\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#defaultSquashPolicy\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Sets the default behavior when generating or matching URLs with default parameter values.\n   *\n   * @param {string} value A string that defines the default parameter URL squashing behavior.\n   *    `nosquash`: When generating an href with a default parameter value, do not squash the parameter value from the URL\n   *    `slash`: When generating an href with a default parameter value, squash (remove) the parameter value, and, if the\n   *             parameter is surrounded by slashes, squash (remove) one slash from the URL\n   *    any other string, e.g. \"~\": When generating an href with a default parameter value, squash (remove)\n   *             the parameter value from the URL and replace it with this string.\n   */\n  this.defaultSquashPolicy = function(value) {\n    if (!isDefined(value)) return defaultSquashPolicy;\n    if (value !== true && value !== false && !isString(value))\n      throw new Error(\"Invalid squash policy: \" + value + \". Valid policies: false, true, arbitrary-string\");\n    defaultSquashPolicy = value;\n    return value;\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#compile\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Creates a {@link ui.router.util.type:UrlMatcher `UrlMatcher`} for the specified pattern.\n   *\n   * @param {string} pattern  The URL pattern.\n   * @param {Object} config  The config object hash.\n   * @returns {UrlMatcher}  The UrlMatcher.\n   */\n  this.compile = function (pattern, config) {\n    return new UrlMatcher(pattern, extend(getDefaultConfig(), config));\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#isMatcher\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Returns true if the specified object is a `UrlMatcher`, or false otherwise.\n   *\n   * @param {Object} object  The object to perform the type check against.\n   * @returns {Boolean}  Returns `true` if the object matches the `UrlMatcher` interface, by\n   *          implementing all the same methods.\n   */\n  this.isMatcher = function (o) {\n    if (!isObject(o)) return false;\n    var result = true;\n\n    forEach(UrlMatcher.prototype, function(val, name) {\n      if (isFunction(val)) {\n        result = result && (isDefined(o[name]) && isFunction(o[name]));\n      }\n    });\n    return result;\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#type\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Registers a custom {@link ui.router.util.type:Type `Type`} object that can be used to\n   * generate URLs with typed parameters.\n   *\n   * @param {string} name  The type name.\n   * @param {Object|Function} definition   The type definition. See\n   *        {@link ui.router.util.type:Type `Type`} for information on the values accepted.\n   * @param {Object|Function} definitionFn (optional) A function that is injected before the app\n   *        runtime starts.  The result of this function is merged into the existing `definition`.\n   *        See {@link ui.router.util.type:Type `Type`} for information on the values accepted.\n   *\n   * @returns {Object}  Returns `$urlMatcherFactoryProvider`.\n   *\n   * @example\n   * This is a simple example of a custom type that encodes and decodes items from an\n   * array, using the array index as the URL-encoded value:\n   *\n   * <pre>\n   * var list = ['John', 'Paul', 'George', 'Ringo'];\n   *\n   * $urlMatcherFactoryProvider.type('listItem', {\n   *   encode: function(item) {\n   *     // Represent the list item in the URL using its corresponding index\n   *     return list.indexOf(item);\n   *   },\n   *   decode: function(item) {\n   *     // Look up the list item by index\n   *     return list[parseInt(item, 10)];\n   *   },\n   *   is: function(item) {\n   *     // Ensure the item is valid by checking to see that it appears\n   *     // in the list\n   *     return list.indexOf(item) > -1;\n   *   }\n   * });\n   *\n   * $stateProvider.state('list', {\n   *   url: \"/list/{item:listItem}\",\n   *   controller: function($scope, $stateParams) {\n   *     console.log($stateParams.item);\n   *   }\n   * });\n   *\n   * // ...\n   *\n   * // Changes URL to '/list/3', logs \"Ringo\" to the console\n   * $state.go('list', { item: \"Ringo\" });\n   * </pre>\n   *\n   * This is a more complex example of a type that relies on dependency injection to\n   * interact with services, and uses the parameter name from the URL to infer how to\n   * handle encoding and decoding parameter values:\n   *\n   * <pre>\n   * // Defines a custom type that gets a value from a service,\n   * // where each service gets different types of values from\n   * // a backend API:\n   * $urlMatcherFactoryProvider.type('dbObject', {}, function(Users, Posts) {\n   *\n   *   // Matches up services to URL parameter names\n   *   var services = {\n   *     user: Users,\n   *     post: Posts\n   *   };\n   *\n   *   return {\n   *     encode: function(object) {\n   *       // Represent the object in the URL using its unique ID\n   *       return object.id;\n   *     },\n   *     decode: function(value, key) {\n   *       // Look up the object by ID, using the parameter\n   *       // name (key) to call the correct service\n   *       return services[key].findById(value);\n   *     },\n   *     is: function(object, key) {\n   *       // Check that object is a valid dbObject\n   *       return angular.isObject(object) && object.id && services[key];\n   *     }\n   *     equals: function(a, b) {\n   *       // Check the equality of decoded objects by comparing\n   *       // their unique IDs\n   *       return a.id === b.id;\n   *     }\n   *   };\n   * });\n   *\n   * // In a config() block, you can then attach URLs with\n   * // type-annotated parameters:\n   * $stateProvider.state('users', {\n   *   url: \"/users\",\n   *   // ...\n   * }).state('users.item', {\n   *   url: \"/{user:dbObject}\",\n   *   controller: function($scope, $stateParams) {\n   *     // $stateParams.user will now be an object returned from\n   *     // the Users service\n   *   },\n   *   // ...\n   * });\n   * </pre>\n   */\n  this.type = function (name, definition, definitionFn) {\n    if (!isDefined(definition)) return $types[name];\n    if ($types.hasOwnProperty(name)) throw new Error(\"A type named '\" + name + \"' has already been defined.\");\n\n    $types[name] = new Type(extend({ name: name }, definition));\n    if (definitionFn) {\n      typeQueue.push({ name: name, def: definitionFn });\n      if (!enqueue) flushTypeQueue();\n    }\n    return this;\n  };\n\n  // `flushTypeQueue()` waits until `$urlMatcherFactory` is injected before invoking the queued `definitionFn`s\n  function flushTypeQueue() {\n    while(typeQueue.length) {\n      var type = typeQueue.shift();\n      if (type.pattern) throw new Error(\"You cannot override a type's .pattern at runtime.\");\n      angular.extend($types[type.name], injector.invoke(type.def));\n    }\n  }\n\n  // Register default types. Store them in the prototype of $types.\n  forEach(defaultTypes, function(type, name) { $types[name] = new Type(extend({name: name}, type)); });\n  $types = inherit($types, {});\n\n  /* No need to document $get, since it returns this */\n  this.$get = ['$injector', function ($injector) {\n    injector = $injector;\n    enqueue = false;\n    flushTypeQueue();\n\n    forEach(defaultTypes, function(type, name) {\n      if (!$types[name]) $types[name] = new Type(type);\n    });\n    return this;\n  }];\n\n  this.Param = function Param(id, type, config, location) {\n    var self = this;\n    config = unwrapShorthand(config);\n    type = getType(config, type, location);\n    var arrayMode = getArrayMode();\n    type = arrayMode ? type.$asArray(arrayMode, location === \"search\") : type;\n    if (type.name === \"string\" && !arrayMode && location === \"path\" && config.value === undefined)\n      config.value = \"\"; // for 0.2.x; in 0.3.0+ do not automatically default to \"\"\n    var isOptional = config.value !== undefined;\n    var squash = getSquashPolicy(config, isOptional);\n    var replace = getReplace(config, arrayMode, isOptional, squash);\n\n    function unwrapShorthand(config) {\n      var keys = isObject(config) ? objectKeys(config) : [];\n      var isShorthand = indexOf(keys, \"value\") === -1 && indexOf(keys, \"type\") === -1 &&\n                        indexOf(keys, \"squash\") === -1 && indexOf(keys, \"array\") === -1;\n      if (isShorthand) config = { value: config };\n      config.$$fn = isInjectable(config.value) ? config.value : function () { return config.value; };\n      return config;\n    }\n\n    function getType(config, urlType, location) {\n      if (config.type && urlType) throw new Error(\"Param '\"+id+\"' has two type configurations.\");\n      if (urlType) return urlType;\n      if (!config.type) return (location === \"config\" ? $types.any : $types.string);\n\n      if (angular.isString(config.type))\n        return $types[config.type];\n      if (config.type instanceof Type)\n        return config.type;\n      return new Type(config.type);\n    }\n\n    // array config: param name (param[]) overrides default settings.  explicit config overrides param name.\n    function getArrayMode() {\n      var arrayDefaults = { array: (location === \"search\" ? \"auto\" : false) };\n      var arrayParamNomenclature = id.match(/\\[\\]$/) ? { array: true } : {};\n      return extend(arrayDefaults, arrayParamNomenclature, config).array;\n    }\n\n    /**\n     * returns false, true, or the squash value to indicate the \"default parameter url squash policy\".\n     */\n    function getSquashPolicy(config, isOptional) {\n      var squash = config.squash;\n      if (!isOptional || squash === false) return false;\n      if (!isDefined(squash) || squash == null) return defaultSquashPolicy;\n      if (squash === true || isString(squash)) return squash;\n      throw new Error(\"Invalid squash policy: '\" + squash + \"'. Valid policies: false, true, or arbitrary string\");\n    }\n\n    function getReplace(config, arrayMode, isOptional, squash) {\n      var replace, configuredKeys, defaultPolicy = [\n        { from: \"\",   to: (isOptional || arrayMode ? undefined : \"\") },\n        { from: null, to: (isOptional || arrayMode ? undefined : \"\") }\n      ];\n      replace = isArray(config.replace) ? config.replace : [];\n      if (isString(squash))\n        replace.push({ from: squash, to: undefined });\n      configuredKeys = map(replace, function(item) { return item.from; } );\n      return filter(defaultPolicy, function(item) { return indexOf(configuredKeys, item.from) === -1; }).concat(replace);\n    }\n\n    /**\n     * [Internal] Get the default value of a parameter, which may be an injectable function.\n     */\n    function $$getDefaultValue() {\n      if (!injector) throw new Error(\"Injectable functions cannot be called at configuration time\");\n      var defaultValue = injector.invoke(config.$$fn);\n      if (defaultValue !== null && defaultValue !== undefined && !self.type.is(defaultValue))\n        throw new Error(\"Default value (\" + defaultValue + \") for parameter '\" + self.id + \"' is not an instance of Type (\" + self.type.name + \")\");\n      return defaultValue;\n    }\n\n    /**\n     * [Internal] Gets the decoded representation of a value if the value is defined, otherwise, returns the\n     * default value, which may be the result of an injectable function.\n     */\n    function $value(value) {\n      function hasReplaceVal(val) { return function(obj) { return obj.from === val; }; }\n      function $replace(value) {\n        var replacement = map(filter(self.replace, hasReplaceVal(value)), function(obj) { return obj.to; });\n        return replacement.length ? replacement[0] : value;\n      }\n      value = $replace(value);\n      return !isDefined(value) ? $$getDefaultValue() : self.type.$normalize(value);\n    }\n\n    function toString() { return \"{Param:\" + id + \" \" + type + \" squash: '\" + squash + \"' optional: \" + isOptional + \"}\"; }\n\n    extend(this, {\n      id: id,\n      type: type,\n      location: location,\n      array: arrayMode,\n      squash: squash,\n      replace: replace,\n      isOptional: isOptional,\n      value: $value,\n      dynamic: undefined,\n      config: config,\n      toString: toString\n    });\n  };\n\n  function ParamSet(params) {\n    extend(this, params || {});\n  }\n\n  ParamSet.prototype = {\n    $$new: function() {\n      return inherit(this, extend(new ParamSet(), { $$parent: this}));\n    },\n    $$keys: function () {\n      var keys = [], chain = [], parent = this,\n        ignore = objectKeys(ParamSet.prototype);\n      while (parent) { chain.push(parent); parent = parent.$$parent; }\n      chain.reverse();\n      forEach(chain, function(paramset) {\n        forEach(objectKeys(paramset), function(key) {\n            if (indexOf(keys, key) === -1 && indexOf(ignore, key) === -1) keys.push(key);\n        });\n      });\n      return keys;\n    },\n    $$values: function(paramValues) {\n      var values = {}, self = this;\n      forEach(self.$$keys(), function(key) {\n        values[key] = self[key].value(paramValues && paramValues[key]);\n      });\n      return values;\n    },\n    $$equals: function(paramValues1, paramValues2) {\n      var equal = true, self = this;\n      forEach(self.$$keys(), function(key) {\n        var left = paramValues1 && paramValues1[key], right = paramValues2 && paramValues2[key];\n        if (!self[key].type.equals(left, right)) equal = false;\n      });\n      return equal;\n    },\n    $$validates: function $$validate(paramValues) {\n      var keys = this.$$keys(), i, param, rawVal, normalized, encoded;\n      for (i = 0; i < keys.length; i++) {\n        param = this[keys[i]];\n        rawVal = paramValues[keys[i]];\n        if ((rawVal === undefined || rawVal === null) && param.isOptional)\n          break; // There was no parameter value, but the param is optional\n        normalized = param.type.$normalize(rawVal);\n        if (!param.type.is(normalized))\n          return false; // The value was not of the correct Type, and could not be decoded to the correct Type\n        encoded = param.type.encode(normalized);\n        if (angular.isString(encoded) && !param.type.pattern.exec(encoded))\n          return false; // The value was of the correct type, but when encoded, did not match the Type's regexp\n      }\n      return true;\n    },\n    $$parent: undefined\n  };\n\n  this.ParamSet = ParamSet;\n}\n\n// Register as a provider so it's available to other providers\nangular.module('ui.router.util').provider('$urlMatcherFactory', $UrlMatcherFactory);\nangular.module('ui.router.util').run(['$urlMatcherFactory', function($urlMatcherFactory) { }]);\n\n/**\n * @ngdoc object\n * @name ui.router.router.$urlRouterProvider\n *\n * @requires ui.router.util.$urlMatcherFactoryProvider\n * @requires $locationProvider\n *\n * @description\n * `$urlRouterProvider` has the responsibility of watching `$location`. \n * When `$location` changes it runs through a list of rules one by one until a \n * match is found. `$urlRouterProvider` is used behind the scenes anytime you specify \n * a url in a state configuration. All urls are compiled into a UrlMatcher object.\n *\n * There are several methods on `$urlRouterProvider` that make it useful to use directly\n * in your module config.\n */\n$UrlRouterProvider.$inject = ['$locationProvider', '$urlMatcherFactoryProvider'];\nfunction $UrlRouterProvider(   $locationProvider,   $urlMatcherFactory) {\n  var rules = [], otherwise = null, interceptDeferred = false, listener;\n\n  // Returns a string that is a prefix of all strings matching the RegExp\n  function regExpPrefix(re) {\n    var prefix = /^\\^((?:\\\\[^a-zA-Z0-9]|[^\\\\\\[\\]\\^$*+?.()|{}]+)*)/.exec(re.source);\n    return (prefix != null) ? prefix[1].replace(/\\\\(.)/g, \"$1\") : '';\n  }\n\n  // Interpolates matched values into a String.replace()-style pattern\n  function interpolate(pattern, match) {\n    return pattern.replace(/\\$(\\$|\\d{1,2})/, function (m, what) {\n      return match[what === '$' ? 0 : Number(what)];\n    });\n  }\n\n  /**\n   * @ngdoc function\n   * @name ui.router.router.$urlRouterProvider#rule\n   * @methodOf ui.router.router.$urlRouterProvider\n   *\n   * @description\n   * Defines rules that are used by `$urlRouterProvider` to find matches for\n   * specific URLs.\n   *\n   * @example\n   * <pre>\n   * var app = angular.module('app', ['ui.router.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *   // Here's an example of how you might allow case insensitive urls\n   *   $urlRouterProvider.rule(function ($injector, $location) {\n   *     var path = $location.path(),\n   *         normalized = path.toLowerCase();\n   *\n   *     if (path !== normalized) {\n   *       return normalized;\n   *     }\n   *   });\n   * });\n   * </pre>\n   *\n   * @param {function} rule Handler function that takes `$injector` and `$location`\n   * services as arguments. You can use them to return a valid path as a string.\n   *\n   * @return {object} `$urlRouterProvider` - `$urlRouterProvider` instance\n   */\n  this.rule = function (rule) {\n    if (!isFunction(rule)) throw new Error(\"'rule' must be a function\");\n    rules.push(rule);\n    return this;\n  };\n\n  /**\n   * @ngdoc object\n   * @name ui.router.router.$urlRouterProvider#otherwise\n   * @methodOf ui.router.router.$urlRouterProvider\n   *\n   * @description\n   * Defines a path that is used when an invalid route is requested.\n   *\n   * @example\n   * <pre>\n   * var app = angular.module('app', ['ui.router.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *   // if the path doesn't match any of the urls you configured\n   *   // otherwise will take care of routing the user to the\n   *   // specified url\n   *   $urlRouterProvider.otherwise('/index');\n   *\n   *   // Example of using function rule as param\n   *   $urlRouterProvider.otherwise(function ($injector, $location) {\n   *     return '/a/valid/url';\n   *   });\n   * });\n   * </pre>\n   *\n   * @param {string|function} rule The url path you want to redirect to or a function \n   * rule that returns the url path. The function version is passed two params: \n   * `$injector` and `$location` services, and must return a url string.\n   *\n   * @return {object} `$urlRouterProvider` - `$urlRouterProvider` instance\n   */\n  this.otherwise = function (rule) {\n    if (isString(rule)) {\n      var redirect = rule;\n      rule = function () { return redirect; };\n    }\n    else if (!isFunction(rule)) throw new Error(\"'rule' must be a function\");\n    otherwise = rule;\n    return this;\n  };\n\n\n  function handleIfMatch($injector, handler, match) {\n    if (!match) return false;\n    var result = $injector.invoke(handler, handler, { $match: match });\n    return isDefined(result) ? result : true;\n  }\n\n  /**\n   * @ngdoc function\n   * @name ui.router.router.$urlRouterProvider#when\n   * @methodOf ui.router.router.$urlRouterProvider\n   *\n   * @description\n   * Registers a handler for a given url matching. \n   * \n   * If the handler is a string, it is\n   * treated as a redirect, and is interpolated according to the syntax of match\n   * (i.e. like `String.replace()` for `RegExp`, or like a `UrlMatcher` pattern otherwise).\n   *\n   * If the handler is a function, it is injectable. It gets invoked if `$location`\n   * matches. You have the option of inject the match object as `$match`.\n   *\n   * The handler can return\n   *\n   * - **falsy** to indicate that the rule didn't match after all, then `$urlRouter`\n   *   will continue trying to find another one that matches.\n   * - **string** which is treated as a redirect and passed to `$location.url()`\n   * - **void** or any **truthy** value tells `$urlRouter` that the url was handled.\n   *\n   * @example\n   * <pre>\n   * var app = angular.module('app', ['ui.router.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *   $urlRouterProvider.when($state.url, function ($match, $stateParams) {\n   *     if ($state.$current.navigable !== state ||\n   *         !equalForKeys($match, $stateParams) {\n   *      $state.transitionTo(state, $match, false);\n   *     }\n   *   });\n   * });\n   * </pre>\n   *\n   * @param {string|object} what The incoming path that you want to redirect.\n   * @param {string|function} handler The path you want to redirect your user to.\n   */\n  this.when = function (what, handler) {\n    var redirect, handlerIsString = isString(handler);\n    if (isString(what)) what = $urlMatcherFactory.compile(what);\n\n    if (!handlerIsString && !isFunction(handler) && !isArray(handler))\n      throw new Error(\"invalid 'handler' in when()\");\n\n    var strategies = {\n      matcher: function (what, handler) {\n        if (handlerIsString) {\n          redirect = $urlMatcherFactory.compile(handler);\n          handler = ['$match', function ($match) { return redirect.format($match); }];\n        }\n        return extend(function ($injector, $location) {\n          return handleIfMatch($injector, handler, what.exec($location.path(), $location.search()));\n        }, {\n          prefix: isString(what.prefix) ? what.prefix : ''\n        });\n      },\n      regex: function (what, handler) {\n        if (what.global || what.sticky) throw new Error(\"when() RegExp must not be global or sticky\");\n\n        if (handlerIsString) {\n          redirect = handler;\n          handler = ['$match', function ($match) { return interpolate(redirect, $match); }];\n        }\n        return extend(function ($injector, $location) {\n          return handleIfMatch($injector, handler, what.exec($location.path()));\n        }, {\n          prefix: regExpPrefix(what)\n        });\n      }\n    };\n\n    var check = { matcher: $urlMatcherFactory.isMatcher(what), regex: what instanceof RegExp };\n\n    for (var n in check) {\n      if (check[n]) return this.rule(strategies[n](what, handler));\n    }\n\n    throw new Error(\"invalid 'what' in when()\");\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.router.$urlRouterProvider#deferIntercept\n   * @methodOf ui.router.router.$urlRouterProvider\n   *\n   * @description\n   * Disables (or enables) deferring location change interception.\n   *\n   * If you wish to customize the behavior of syncing the URL (for example, if you wish to\n   * defer a transition but maintain the current URL), call this method at configuration time.\n   * Then, at run time, call `$urlRouter.listen()` after you have configured your own\n   * `$locationChangeSuccess` event handler.\n   *\n   * @example\n   * <pre>\n   * var app = angular.module('app', ['ui.router.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *\n   *   // Prevent $urlRouter from automatically intercepting URL changes;\n   *   // this allows you to configure custom behavior in between\n   *   // location changes and route synchronization:\n   *   $urlRouterProvider.deferIntercept();\n   *\n   * }).run(function ($rootScope, $urlRouter, UserService) {\n   *\n   *   $rootScope.$on('$locationChangeSuccess', function(e) {\n   *     // UserService is an example service for managing user state\n   *     if (UserService.isLoggedIn()) return;\n   *\n   *     // Prevent $urlRouter's default handler from firing\n   *     e.preventDefault();\n   *\n   *     UserService.handleLogin().then(function() {\n   *       // Once the user has logged in, sync the current URL\n   *       // to the router:\n   *       $urlRouter.sync();\n   *     });\n   *   });\n   *\n   *   // Configures $urlRouter's listener *after* your custom listener\n   *   $urlRouter.listen();\n   * });\n   * </pre>\n   *\n   * @param {boolean} defer Indicates whether to defer location change interception. Passing\n            no parameter is equivalent to `true`.\n   */\n  this.deferIntercept = function (defer) {\n    if (defer === undefined) defer = true;\n    interceptDeferred = defer;\n  };\n\n  /**\n   * @ngdoc object\n   * @name ui.router.router.$urlRouter\n   *\n   * @requires $location\n   * @requires $rootScope\n   * @requires $injector\n   * @requires $browser\n   *\n   * @description\n   *\n   */\n  this.$get = $get;\n  $get.$inject = ['$location', '$rootScope', '$injector', '$browser', '$sniffer'];\n  function $get(   $location,   $rootScope,   $injector,   $browser,   $sniffer) {\n\n    var baseHref = $browser.baseHref(), location = $location.url(), lastPushedUrl;\n\n    function appendBasePath(url, isHtml5, absolute) {\n      if (baseHref === '/') return url;\n      if (isHtml5) return baseHref.slice(0, -1) + url;\n      if (absolute) return baseHref.slice(1) + url;\n      return url;\n    }\n\n    // TODO: Optimize groups of rules with non-empty prefix into some sort of decision tree\n    function update(evt) {\n      if (evt && evt.defaultPrevented) return;\n      var ignoreUpdate = lastPushedUrl && $location.url() === lastPushedUrl;\n      lastPushedUrl = undefined;\n      // TODO: Re-implement this in 1.0 for https://github.com/angular-ui/ui-router/issues/1573\n      //if (ignoreUpdate) return true;\n\n      function check(rule) {\n        var handled = rule($injector, $location);\n\n        if (!handled) return false;\n        if (isString(handled)) $location.replace().url(handled);\n        return true;\n      }\n      var n = rules.length, i;\n\n      for (i = 0; i < n; i++) {\n        if (check(rules[i])) return;\n      }\n      // always check otherwise last to allow dynamic updates to the set of rules\n      if (otherwise) check(otherwise);\n    }\n\n    function listen() {\n      listener = listener || $rootScope.$on('$locationChangeSuccess', update);\n      return listener;\n    }\n\n    if (!interceptDeferred) listen();\n\n    return {\n      /**\n       * @ngdoc function\n       * @name ui.router.router.$urlRouter#sync\n       * @methodOf ui.router.router.$urlRouter\n       *\n       * @description\n       * Triggers an update; the same update that happens when the address bar url changes, aka `$locationChangeSuccess`.\n       * This method is useful when you need to use `preventDefault()` on the `$locationChangeSuccess` event,\n       * perform some custom logic (route protection, auth, config, redirection, etc) and then finally proceed\n       * with the transition by calling `$urlRouter.sync()`.\n       *\n       * @example\n       * <pre>\n       * angular.module('app', ['ui.router'])\n       *   .run(function($rootScope, $urlRouter) {\n       *     $rootScope.$on('$locationChangeSuccess', function(evt) {\n       *       // Halt state change from even starting\n       *       evt.preventDefault();\n       *       // Perform custom logic\n       *       var meetsRequirement = ...\n       *       // Continue with the update and state transition if logic allows\n       *       if (meetsRequirement) $urlRouter.sync();\n       *     });\n       * });\n       * </pre>\n       */\n      sync: function() {\n        update();\n      },\n\n      listen: function() {\n        return listen();\n      },\n\n      update: function(read) {\n        if (read) {\n          location = $location.url();\n          return;\n        }\n        if ($location.url() === location) return;\n\n        $location.url(location);\n        $location.replace();\n      },\n\n      push: function(urlMatcher, params, options) {\n         var url = urlMatcher.format(params || {});\n\n        // Handle the special hash param, if needed\n        if (url !== null && params && params['#']) {\n            url += '#' + params['#'];\n        }\n\n        $location.url(url);\n        lastPushedUrl = options && options.$$avoidResync ? $location.url() : undefined;\n        if (options && options.replace) $location.replace();\n      },\n\n      /**\n       * @ngdoc function\n       * @name ui.router.router.$urlRouter#href\n       * @methodOf ui.router.router.$urlRouter\n       *\n       * @description\n       * A URL generation method that returns the compiled URL for a given\n       * {@link ui.router.util.type:UrlMatcher `UrlMatcher`}, populated with the provided parameters.\n       *\n       * @example\n       * <pre>\n       * $bob = $urlRouter.href(new UrlMatcher(\"/about/:person\"), {\n       *   person: \"bob\"\n       * });\n       * // $bob == \"/about/bob\";\n       * </pre>\n       *\n       * @param {UrlMatcher} urlMatcher The `UrlMatcher` object which is used as the template of the URL to generate.\n       * @param {object=} params An object of parameter values to fill the matcher's required parameters.\n       * @param {object=} options Options object. The options are:\n       *\n       * - **`absolute`** - {boolean=false},  If true will generate an absolute url, e.g. \"http://www.example.com/fullurl\".\n       *\n       * @returns {string} Returns the fully compiled URL, or `null` if `params` fail validation against `urlMatcher`\n       */\n      href: function(urlMatcher, params, options) {\n        if (!urlMatcher.validates(params)) return null;\n\n        var isHtml5 = $locationProvider.html5Mode();\n        if (angular.isObject(isHtml5)) {\n          isHtml5 = isHtml5.enabled;\n        }\n\n        isHtml5 = isHtml5 && $sniffer.history;\n        \n        var url = urlMatcher.format(params);\n        options = options || {};\n\n        if (!isHtml5 && url !== null) {\n          url = \"#\" + $locationProvider.hashPrefix() + url;\n        }\n\n        // Handle special hash param, if needed\n        if (url !== null && params && params['#']) {\n          url += '#' + params['#'];\n        }\n\n        url = appendBasePath(url, isHtml5, options.absolute);\n\n        if (!options.absolute || !url) {\n          return url;\n        }\n\n        var slash = (!isHtml5 && url ? '/' : ''), port = $location.port();\n        port = (port === 80 || port === 443 ? '' : ':' + port);\n\n        return [$location.protocol(), '://', $location.host(), port, slash, url].join('');\n      }\n    };\n  }\n}\n\nangular.module('ui.router.router').provider('$urlRouter', $UrlRouterProvider);\n\n/**\n * @ngdoc object\n * @name ui.router.state.$stateProvider\n *\n * @requires ui.router.router.$urlRouterProvider\n * @requires ui.router.util.$urlMatcherFactoryProvider\n *\n * @description\n * The new `$stateProvider` works similar to Angular's v1 router, but it focuses purely\n * on state.\n *\n * A state corresponds to a \"place\" in the application in terms of the overall UI and\n * navigation. A state describes (via the controller / template / view properties) what\n * the UI looks like and does at that place.\n *\n * States often have things in common, and the primary way of factoring out these\n * commonalities in this model is via the state hierarchy, i.e. parent/child states aka\n * nested states.\n *\n * The `$stateProvider` provides interfaces to declare these states for your app.\n */\n$StateProvider.$inject = ['$urlRouterProvider', '$urlMatcherFactoryProvider'];\nfunction $StateProvider(   $urlRouterProvider,   $urlMatcherFactory) {\n\n  var root, states = {}, $state, queue = {}, abstractKey = 'abstract';\n\n  // Builds state properties from definition passed to registerState()\n  var stateBuilder = {\n\n    // Derive parent state from a hierarchical name only if 'parent' is not explicitly defined.\n    // state.children = [];\n    // if (parent) parent.children.push(state);\n    parent: function(state) {\n      if (isDefined(state.parent) && state.parent) return findState(state.parent);\n      // regex matches any valid composite state name\n      // would match \"contact.list\" but not \"contacts\"\n      var compositeName = /^(.+)\\.[^.]+$/.exec(state.name);\n      return compositeName ? findState(compositeName[1]) : root;\n    },\n\n    // inherit 'data' from parent and override by own values (if any)\n    data: function(state) {\n      if (state.parent && state.parent.data) {\n        state.data = state.self.data = inherit(state.parent.data, state.data);\n      }\n      return state.data;\n    },\n\n    // Build a URLMatcher if necessary, either via a relative or absolute URL\n    url: function(state) {\n      var url = state.url, config = { params: state.params || {} };\n\n      if (isString(url)) {\n        if (url.charAt(0) == '^') return $urlMatcherFactory.compile(url.substring(1), config);\n        return (state.parent.navigable || root).url.concat(url, config);\n      }\n\n      if (!url || $urlMatcherFactory.isMatcher(url)) return url;\n      throw new Error(\"Invalid url '\" + url + \"' in state '\" + state + \"'\");\n    },\n\n    // Keep track of the closest ancestor state that has a URL (i.e. is navigable)\n    navigable: function(state) {\n      return state.url ? state : (state.parent ? state.parent.navigable : null);\n    },\n\n    // Own parameters for this state. state.url.params is already built at this point. Create and add non-url params\n    ownParams: function(state) {\n      var params = state.url && state.url.params || new $$UMFP.ParamSet();\n      forEach(state.params || {}, function(config, id) {\n        if (!params[id]) params[id] = new $$UMFP.Param(id, null, config, \"config\");\n      });\n      return params;\n    },\n\n    // Derive parameters for this state and ensure they're a super-set of parent's parameters\n    params: function(state) {\n      var ownParams = pick(state.ownParams, state.ownParams.$$keys());\n      return state.parent && state.parent.params ? extend(state.parent.params.$$new(), ownParams) : new $$UMFP.ParamSet();\n    },\n\n    // If there is no explicit multi-view configuration, make one up so we don't have\n    // to handle both cases in the view directive later. Note that having an explicit\n    // 'views' property will mean the default unnamed view properties are ignored. This\n    // is also a good time to resolve view names to absolute names, so everything is a\n    // straight lookup at link time.\n    views: function(state) {\n      var views = {};\n\n      forEach(isDefined(state.views) ? state.views : { '': state }, function (view, name) {\n        if (name.indexOf('@') < 0) name += '@' + state.parent.name;\n        view.resolveAs = view.resolveAs || state.resolveAs || '$resolve';\n        views[name] = view;\n      });\n      return views;\n    },\n\n    // Keep a full path from the root down to this state as this is needed for state activation.\n    path: function(state) {\n      return state.parent ? state.parent.path.concat(state) : []; // exclude root from path\n    },\n\n    // Speed up $state.contains() as it's used a lot\n    includes: function(state) {\n      var includes = state.parent ? extend({}, state.parent.includes) : {};\n      includes[state.name] = true;\n      return includes;\n    },\n\n    $delegates: {}\n  };\n\n  function isRelative(stateName) {\n    return stateName.indexOf(\".\") === 0 || stateName.indexOf(\"^\") === 0;\n  }\n\n  function findState(stateOrName, base) {\n    if (!stateOrName) return undefined;\n\n    var isStr = isString(stateOrName),\n        name  = isStr ? stateOrName : stateOrName.name,\n        path  = isRelative(name);\n\n    if (path) {\n      if (!base) throw new Error(\"No reference point given for path '\"  + name + \"'\");\n      base = findState(base);\n      \n      var rel = name.split(\".\"), i = 0, pathLength = rel.length, current = base;\n\n      for (; i < pathLength; i++) {\n        if (rel[i] === \"\" && i === 0) {\n          current = base;\n          continue;\n        }\n        if (rel[i] === \"^\") {\n          if (!current.parent) throw new Error(\"Path '\" + name + \"' not valid for state '\" + base.name + \"'\");\n          current = current.parent;\n          continue;\n        }\n        break;\n      }\n      rel = rel.slice(i).join(\".\");\n      name = current.name + (current.name && rel ? \".\" : \"\") + rel;\n    }\n    var state = states[name];\n\n    if (state && (isStr || (!isStr && (state === stateOrName || state.self === stateOrName)))) {\n      return state;\n    }\n    return undefined;\n  }\n\n  function queueState(parentName, state) {\n    if (!queue[parentName]) {\n      queue[parentName] = [];\n    }\n    queue[parentName].push(state);\n  }\n\n  function flushQueuedChildren(parentName) {\n    var queued = queue[parentName] || [];\n    while(queued.length) {\n      registerState(queued.shift());\n    }\n  }\n\n  function registerState(state) {\n    // Wrap a new object around the state so we can store our private details easily.\n    state = inherit(state, {\n      self: state,\n      resolve: state.resolve || {},\n      toString: function() { return this.name; }\n    });\n\n    var name = state.name;\n    if (!isString(name) || name.indexOf('@') >= 0) throw new Error(\"State must have a valid name\");\n    if (states.hasOwnProperty(name)) throw new Error(\"State '\" + name + \"' is already defined\");\n\n    // Get parent name\n    var parentName = (name.indexOf('.') !== -1) ? name.substring(0, name.lastIndexOf('.'))\n        : (isString(state.parent)) ? state.parent\n        : (isObject(state.parent) && isString(state.parent.name)) ? state.parent.name\n        : '';\n\n    // If parent is not registered yet, add state to queue and register later\n    if (parentName && !states[parentName]) {\n      return queueState(parentName, state.self);\n    }\n\n    for (var key in stateBuilder) {\n      if (isFunction(stateBuilder[key])) state[key] = stateBuilder[key](state, stateBuilder.$delegates[key]);\n    }\n    states[name] = state;\n\n    // Register the state in the global state list and with $urlRouter if necessary.\n    if (!state[abstractKey] && state.url) {\n      $urlRouterProvider.when(state.url, ['$match', '$stateParams', function ($match, $stateParams) {\n        if ($state.$current.navigable != state || !equalForKeys($match, $stateParams)) {\n          $state.transitionTo(state, $match, { inherit: true, location: false });\n        }\n      }]);\n    }\n\n    // Register any queued children\n    flushQueuedChildren(name);\n\n    return state;\n  }\n\n  // Checks text to see if it looks like a glob.\n  function isGlob (text) {\n    return text.indexOf('*') > -1;\n  }\n\n  // Returns true if glob matches current $state name.\n  function doesStateMatchGlob (glob) {\n    var globSegments = glob.split('.'),\n        segments = $state.$current.name.split('.');\n\n    //match single stars\n    for (var i = 0, l = globSegments.length; i < l; i++) {\n      if (globSegments[i] === '*') {\n        segments[i] = '*';\n      }\n    }\n\n    //match greedy starts\n    if (globSegments[0] === '**') {\n       segments = segments.slice(indexOf(segments, globSegments[1]));\n       segments.unshift('**');\n    }\n    //match greedy ends\n    if (globSegments[globSegments.length - 1] === '**') {\n       segments.splice(indexOf(segments, globSegments[globSegments.length - 2]) + 1, Number.MAX_VALUE);\n       segments.push('**');\n    }\n\n    if (globSegments.length != segments.length) {\n      return false;\n    }\n\n    return segments.join('') === globSegments.join('');\n  }\n\n\n  // Implicit root state that is always active\n  root = registerState({\n    name: '',\n    url: '^',\n    views: null,\n    'abstract': true\n  });\n  root.navigable = null;\n\n\n  /**\n   * @ngdoc function\n   * @name ui.router.state.$stateProvider#decorator\n   * @methodOf ui.router.state.$stateProvider\n   *\n   * @description\n   * Allows you to extend (carefully) or override (at your own peril) the \n   * `stateBuilder` object used internally by `$stateProvider`. This can be used \n   * to add custom functionality to ui-router, for example inferring templateUrl \n   * based on the state name.\n   *\n   * When passing only a name, it returns the current (original or decorated) builder\n   * function that matches `name`.\n   *\n   * The builder functions that can be decorated are listed below. Though not all\n   * necessarily have a good use case for decoration, that is up to you to decide.\n   *\n   * In addition, users can attach custom decorators, which will generate new \n   * properties within the state's internal definition. There is currently no clear \n   * use-case for this beyond accessing internal states (i.e. $state.$current), \n   * however, expect this to become increasingly relevant as we introduce additional \n   * meta-programming features.\n   *\n   * **Warning**: Decorators should not be interdependent because the order of \n   * execution of the builder functions in non-deterministic. Builder functions \n   * should only be dependent on the state definition object and super function.\n   *\n   *\n   * Existing builder functions and current return values:\n   *\n   * - **parent** `{object}` - returns the parent state object.\n   * - **data** `{object}` - returns state data, including any inherited data that is not\n   *   overridden by own values (if any).\n   * - **url** `{object}` - returns a {@link ui.router.util.type:UrlMatcher UrlMatcher}\n   *   or `null`.\n   * - **navigable** `{object}` - returns closest ancestor state that has a URL (aka is \n   *   navigable).\n   * - **params** `{object}` - returns an array of state params that are ensured to \n   *   be a super-set of parent's params.\n   * - **views** `{object}` - returns a views object where each key is an absolute view \n   *   name (i.e. \"viewName@stateName\") and each value is the config object \n   *   (template, controller) for the view. Even when you don't use the views object \n   *   explicitly on a state config, one is still created for you internally.\n   *   So by decorating this builder function you have access to decorating template \n   *   and controller properties.\n   * - **ownParams** `{object}` - returns an array of params that belong to the state, \n   *   not including any params defined by ancestor states.\n   * - **path** `{string}` - returns the full path from the root down to this state. \n   *   Needed for state activation.\n   * - **includes** `{object}` - returns an object that includes every state that \n   *   would pass a `$state.includes()` test.\n   *\n   * @example\n   * <pre>\n   * // Override the internal 'views' builder with a function that takes the state\n   * // definition, and a reference to the internal function being overridden:\n   * $stateProvider.decorator('views', function (state, parent) {\n   *   var result = {},\n   *       views = parent(state);\n   *\n   *   angular.forEach(views, function (config, name) {\n   *     var autoName = (state.name + '.' + name).replace('.', '/');\n   *     config.templateUrl = config.templateUrl || '/partials/' + autoName + '.html';\n   *     result[name] = config;\n   *   });\n   *   return result;\n   * });\n   *\n   * $stateProvider.state('home', {\n   *   views: {\n   *     'contact.list': { controller: 'ListController' },\n   *     'contact.item': { controller: 'ItemController' }\n   *   }\n   * });\n   *\n   * // ...\n   *\n   * $state.go('home');\n   * // Auto-populates list and item views with /partials/home/contact/list.html,\n   * // and /partials/home/contact/item.html, respectively.\n   * </pre>\n   *\n   * @param {string} name The name of the builder function to decorate. \n   * @param {object} func A function that is responsible for decorating the original \n   * builder function. The function receives two parameters:\n   *\n   *   - `{object}` - state - The state config object.\n   *   - `{object}` - super - The original builder function.\n   *\n   * @return {object} $stateProvider - $stateProvider instance\n   */\n  this.decorator = decorator;\n  function decorator(name, func) {\n    /*jshint validthis: true */\n    if (isString(name) && !isDefined(func)) {\n      return stateBuilder[name];\n    }\n    if (!isFunction(func) || !isString(name)) {\n      return this;\n    }\n    if (stateBuilder[name] && !stateBuilder.$delegates[name]) {\n      stateBuilder.$delegates[name] = stateBuilder[name];\n    }\n    stateBuilder[name] = func;\n    return this;\n  }\n\n  /**\n   * @ngdoc function\n   * @name ui.router.state.$stateProvider#state\n   * @methodOf ui.router.state.$stateProvider\n   *\n   * @description\n   * Registers a state configuration under a given state name. The stateConfig object\n   * has the following acceptable properties.\n   *\n   * @param {string} name A unique state name, e.g. \"home\", \"about\", \"contacts\".\n   * To create a parent/child state use a dot, e.g. \"about.sales\", \"home.newest\".\n   * @param {object} stateConfig State configuration object.\n   * @param {string|function=} stateConfig.template\n   * <a id='template'></a>\n   *   html template as a string or a function that returns\n   *   an html template as a string which should be used by the uiView directives. This property \n   *   takes precedence over templateUrl.\n   *   \n   *   If `template` is a function, it will be called with the following parameters:\n   *\n   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by\n   *     applying the current state\n   *\n   * <pre>template:\n   *   \"<h1>inline template definition</h1>\" +\n   *   \"<div ui-view></div>\"</pre>\n   * <pre>template: function(params) {\n   *       return \"<h1>generated template</h1>\"; }</pre>\n   * </div>\n   *\n   * @param {string|function=} stateConfig.templateUrl\n   * <a id='templateUrl'></a>\n   *\n   *   path or function that returns a path to an html\n   *   template that should be used by uiView.\n   *   \n   *   If `templateUrl` is a function, it will be called with the following parameters:\n   *\n   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by \n   *     applying the current state\n   *\n   * <pre>templateUrl: \"home.html\"</pre>\n   * <pre>templateUrl: function(params) {\n   *     return myTemplates[params.pageId]; }</pre>\n   *\n   * @param {function=} stateConfig.templateProvider\n   * <a id='templateProvider'></a>\n   *    Provider function that returns HTML content string.\n   * <pre> templateProvider:\n   *       function(MyTemplateService, params) {\n   *         return MyTemplateService.getTemplate(params.pageId);\n   *       }</pre>\n   *\n   * @param {string|function=} stateConfig.controller\n   * <a id='controller'></a>\n   *\n   *  Controller fn that should be associated with newly\n   *   related scope or the name of a registered controller if passed as a string.\n   *   Optionally, the ControllerAs may be declared here.\n   * <pre>controller: \"MyRegisteredController\"</pre>\n   * <pre>controller:\n   *     \"MyRegisteredController as fooCtrl\"}</pre>\n   * <pre>controller: function($scope, MyService) {\n   *     $scope.data = MyService.getData(); }</pre>\n   *\n   * @param {function=} stateConfig.controllerProvider\n   * <a id='controllerProvider'></a>\n   *\n   * Injectable provider function that returns the actual controller or string.\n   * <pre>controllerProvider:\n   *   function(MyResolveData) {\n   *     if (MyResolveData.foo)\n   *       return \"FooCtrl\"\n   *     else if (MyResolveData.bar)\n   *       return \"BarCtrl\";\n   *     else return function($scope) {\n   *       $scope.baz = \"Qux\";\n   *     }\n   *   }</pre>\n   *\n   * @param {string=} stateConfig.controllerAs\n   * <a id='controllerAs'></a>\n   * \n   * A controller alias name. If present the controller will be\n   *   published to scope under the controllerAs name.\n   * <pre>controllerAs: \"myCtrl\"</pre>\n   *\n   * @param {string|object=} stateConfig.parent\n   * <a id='parent'></a>\n   * Optionally specifies the parent state of this state.\n   *\n   * <pre>parent: 'parentState'</pre>\n   * <pre>parent: parentState // JS variable</pre>\n   *\n   * @param {object=} stateConfig.resolve\n   * <a id='resolve'></a>\n   *\n   * An optional map&lt;string, function&gt; of dependencies which\n   *   should be injected into the controller. If any of these dependencies are promises, \n   *   the router will wait for them all to be resolved before the controller is instantiated.\n   *   If all the promises are resolved successfully, the $stateChangeSuccess event is fired\n   *   and the values of the resolved promises are injected into any controllers that reference them.\n   *   If any  of the promises are rejected the $stateChangeError event is fired.\n   *\n   *   The map object is:\n   *   \n   *   - key - {string}: name of dependency to be injected into controller\n   *   - factory - {string|function}: If string then it is alias for service. Otherwise if function, \n   *     it is injected and return value it treated as dependency. If result is a promise, it is \n   *     resolved before its value is injected into controller.\n   *\n   * <pre>resolve: {\n   *     myResolve1:\n   *       function($http, $stateParams) {\n   *         return $http.get(\"/api/foos/\"+stateParams.fooID);\n   *       }\n   *     }</pre>\n   *\n   * @param {string=} stateConfig.url\n   * <a id='url'></a>\n   *\n   *   A url fragment with optional parameters. When a state is navigated or\n   *   transitioned to, the `$stateParams` service will be populated with any \n   *   parameters that were passed.\n   *\n   *   (See {@link ui.router.util.type:UrlMatcher UrlMatcher} `UrlMatcher`} for\n   *   more details on acceptable patterns )\n   *\n   * examples:\n   * <pre>url: \"/home\"\n   * url: \"/users/:userid\"\n   * url: \"/books/{bookid:[a-zA-Z_-]}\"\n   * url: \"/books/{categoryid:int}\"\n   * url: \"/books/{publishername:string}/{categoryid:int}\"\n   * url: \"/messages?before&after\"\n   * url: \"/messages?{before:date}&{after:date}\"\n   * url: \"/messages/:mailboxid?{before:date}&{after:date}\"\n   * </pre>\n   *\n   * @param {object=} stateConfig.views\n   * <a id='views'></a>\n   * an optional map&lt;string, object&gt; which defined multiple views, or targets views\n   * manually/explicitly.\n   *\n   * Examples:\n   *\n   * Targets three named `ui-view`s in the parent state's template\n   * <pre>views: {\n   *     header: {\n   *       controller: \"headerCtrl\",\n   *       templateUrl: \"header.html\"\n   *     }, body: {\n   *       controller: \"bodyCtrl\",\n   *       templateUrl: \"body.html\"\n   *     }, footer: {\n   *       controller: \"footCtrl\",\n   *       templateUrl: \"footer.html\"\n   *     }\n   *   }</pre>\n   *\n   * Targets named `ui-view=\"header\"` from grandparent state 'top''s template, and named `ui-view=\"body\" from parent state's template.\n   * <pre>views: {\n   *     'header@top': {\n   *       controller: \"msgHeaderCtrl\",\n   *       templateUrl: \"msgHeader.html\"\n   *     }, 'body': {\n   *       controller: \"messagesCtrl\",\n   *       templateUrl: \"messages.html\"\n   *     }\n   *   }</pre>\n   *\n   * @param {boolean=} [stateConfig.abstract=false]\n   * <a id='abstract'></a>\n   * An abstract state will never be directly activated,\n   *   but can provide inherited properties to its common children states.\n   * <pre>abstract: true</pre>\n   *\n   * @param {function=} stateConfig.onEnter\n   * <a id='onEnter'></a>\n   *\n   * Callback function for when a state is entered. Good way\n   *   to trigger an action or dispatch an event, such as opening a dialog.\n   * If minifying your scripts, make sure to explicitly annotate this function,\n   * because it won't be automatically annotated by your build tools.\n   *\n   * <pre>onEnter: function(MyService, $stateParams) {\n   *     MyService.foo($stateParams.myParam);\n   * }</pre>\n   *\n   * @param {function=} stateConfig.onExit\n   * <a id='onExit'></a>\n   *\n   * Callback function for when a state is exited. Good way to\n   *   trigger an action or dispatch an event, such as opening a dialog.\n   * If minifying your scripts, make sure to explicitly annotate this function,\n   * because it won't be automatically annotated by your build tools.\n   *\n   * <pre>onExit: function(MyService, $stateParams) {\n   *     MyService.cleanup($stateParams.myParam);\n   * }</pre>\n   *\n   * @param {boolean=} [stateConfig.reloadOnSearch=true]\n   * <a id='reloadOnSearch'></a>\n   *\n   * If `false`, will not retrigger the same state\n   *   just because a search/query parameter has changed (via $location.search() or $location.hash()). \n   *   Useful for when you'd like to modify $location.search() without triggering a reload.\n   * <pre>reloadOnSearch: false</pre>\n   *\n   * @param {object=} stateConfig.data\n   * <a id='data'></a>\n   *\n   * Arbitrary data object, useful for custom configuration.  The parent state's `data` is\n   *   prototypally inherited.  In other words, adding a data property to a state adds it to\n   *   the entire subtree via prototypal inheritance.\n   *\n   * <pre>data: {\n   *     requiredRole: 'foo'\n   * } </pre>\n   *\n   * @param {object=} stateConfig.params\n   * <a id='params'></a>\n   *\n   * A map which optionally configures parameters declared in the `url`, or\n   *   defines additional non-url parameters.  For each parameter being\n   *   configured, add a configuration object keyed to the name of the parameter.\n   *\n   *   Each parameter configuration object may contain the following properties:\n   *\n   *   - ** value ** - {object|function=}: specifies the default value for this\n   *     parameter.  This implicitly sets this parameter as optional.\n   *\n   *     When UI-Router routes to a state and no value is\n   *     specified for this parameter in the URL or transition, the\n   *     default value will be used instead.  If `value` is a function,\n   *     it will be injected and invoked, and the return value used.\n   *\n   *     *Note*: `undefined` is treated as \"no default value\" while `null`\n   *     is treated as \"the default value is `null`\".\n   *\n   *     *Shorthand*: If you only need to configure the default value of the\n   *     parameter, you may use a shorthand syntax.   In the **`params`**\n   *     map, instead mapping the param name to a full parameter configuration\n   *     object, simply set map it to the default parameter value, e.g.:\n   *\n   * <pre>// define a parameter's default value\n   * params: {\n   *     param1: { value: \"defaultValue\" }\n   * }\n   * // shorthand default values\n   * params: {\n   *     param1: \"defaultValue\",\n   *     param2: \"param2Default\"\n   * }</pre>\n   *\n   *   - ** array ** - {boolean=}: *(default: false)* If true, the param value will be\n   *     treated as an array of values.  If you specified a Type, the value will be\n   *     treated as an array of the specified Type.  Note: query parameter values\n   *     default to a special `\"auto\"` mode.\n   *\n   *     For query parameters in `\"auto\"` mode, if multiple  values for a single parameter\n   *     are present in the URL (e.g.: `/foo?bar=1&bar=2&bar=3`) then the values\n   *     are mapped to an array (e.g.: `{ foo: [ '1', '2', '3' ] }`).  However, if\n   *     only one value is present (e.g.: `/foo?bar=1`) then the value is treated as single\n   *     value (e.g.: `{ foo: '1' }`).\n   *\n   * <pre>params: {\n   *     param1: { array: true }\n   * }</pre>\n   *\n   *   - ** squash ** - {bool|string=}: `squash` configures how a default parameter value is represented in the URL when\n   *     the current parameter value is the same as the default value. If `squash` is not set, it uses the\n   *     configured default squash policy.\n   *     (See {@link ui.router.util.$urlMatcherFactory#methods_defaultSquashPolicy `defaultSquashPolicy()`})\n   *\n   *   There are three squash settings:\n   *\n   *     - false: The parameter's default value is not squashed.  It is encoded and included in the URL\n   *     - true: The parameter's default value is omitted from the URL.  If the parameter is preceeded and followed\n   *       by slashes in the state's `url` declaration, then one of those slashes are omitted.\n   *       This can allow for cleaner looking URLs.\n   *     - `\"<arbitrary string>\"`: The parameter's default value is replaced with an arbitrary placeholder of  your choice.\n   *\n   * <pre>params: {\n   *     param1: {\n   *       value: \"defaultId\",\n   *       squash: true\n   * } }\n   * // squash \"defaultValue\" to \"~\"\n   * params: {\n   *     param1: {\n   *       value: \"defaultValue\",\n   *       squash: \"~\"\n   * } }\n   * </pre>\n   *\n   *\n   * @example\n   * <pre>\n   * // Some state name examples\n   *\n   * // stateName can be a single top-level name (must be unique).\n   * $stateProvider.state(\"home\", {});\n   *\n   * // Or it can be a nested state name. This state is a child of the\n   * // above \"home\" state.\n   * $stateProvider.state(\"home.newest\", {});\n   *\n   * // Nest states as deeply as needed.\n   * $stateProvider.state(\"home.newest.abc.xyz.inception\", {});\n   *\n   * // state() returns $stateProvider, so you can chain state declarations.\n   * $stateProvider\n   *   .state(\"home\", {})\n   *   .state(\"about\", {})\n   *   .state(\"contacts\", {});\n   * </pre>\n   *\n   */\n  this.state = state;\n  function state(name, definition) {\n    /*jshint validthis: true */\n    if (isObject(name)) definition = name;\n    else definition.name = name;\n    registerState(definition);\n    return this;\n  }\n\n  /**\n   * @ngdoc object\n   * @name ui.router.state.$state\n   *\n   * @requires $rootScope\n   * @requires $q\n   * @requires ui.router.state.$view\n   * @requires $injector\n   * @requires ui.router.util.$resolve\n   * @requires ui.router.state.$stateParams\n   * @requires ui.router.router.$urlRouter\n   *\n   * @property {object} params A param object, e.g. {sectionId: section.id)}, that \n   * you'd like to test against the current active state.\n   * @property {object} current A reference to the state's config object. However \n   * you passed it in. Useful for accessing custom data.\n   * @property {object} transition Currently pending transition. A promise that'll \n   * resolve or reject.\n   *\n   * @description\n   * `$state` service is responsible for representing states as well as transitioning\n   * between them. It also provides interfaces to ask for current state or even states\n   * you're coming from.\n   */\n  this.$get = $get;\n  $get.$inject = ['$rootScope', '$q', '$view', '$injector', '$resolve', '$stateParams', '$urlRouter', '$location', '$urlMatcherFactory'];\n  function $get(   $rootScope,   $q,   $view,   $injector,   $resolve,   $stateParams,   $urlRouter,   $location,   $urlMatcherFactory) {\n\n    var TransitionSupersededError = new Error('transition superseded');\n\n    var TransitionSuperseded = silenceUncaughtInPromise($q.reject(TransitionSupersededError));\n    var TransitionPrevented = silenceUncaughtInPromise($q.reject(new Error('transition prevented')));\n    var TransitionAborted = silenceUncaughtInPromise($q.reject(new Error('transition aborted')));\n    var TransitionFailed = silenceUncaughtInPromise($q.reject(new Error('transition failed')));\n\n    // Handles the case where a state which is the target of a transition is not found, and the user\n    // can optionally retry or defer the transition\n    function handleRedirect(redirect, state, params, options) {\n      /**\n       * @ngdoc event\n       * @name ui.router.state.$state#$stateNotFound\n       * @eventOf ui.router.state.$state\n       * @eventType broadcast on root scope\n       * @description\n       * Fired when a requested state **cannot be found** using the provided state name during transition.\n       * The event is broadcast allowing any handlers a single chance to deal with the error (usually by\n       * lazy-loading the unfound state). A special `unfoundState` object is passed to the listener handler,\n       * you can see its three properties in the example. You can use `event.preventDefault()` to abort the\n       * transition and the promise returned from `go` will be rejected with a `'transition aborted'` value.\n       *\n       * @param {Object} event Event object.\n       * @param {Object} unfoundState Unfound State information. Contains: `to, toParams, options` properties.\n       * @param {State} fromState Current state object.\n       * @param {Object} fromParams Current state params.\n       *\n       * @example\n       *\n       * <pre>\n       * // somewhere, assume lazy.state has not been defined\n       * $state.go(\"lazy.state\", {a:1, b:2}, {inherit:false});\n       *\n       * // somewhere else\n       * $scope.$on('$stateNotFound',\n       * function(event, unfoundState, fromState, fromParams){\n       *     console.log(unfoundState.to); // \"lazy.state\"\n       *     console.log(unfoundState.toParams); // {a:1, b:2}\n       *     console.log(unfoundState.options); // {inherit:false} + default options\n       * })\n       * </pre>\n       */\n      var evt = $rootScope.$broadcast('$stateNotFound', redirect, state, params);\n\n      if (evt.defaultPrevented) {\n        $urlRouter.update();\n        return TransitionAborted;\n      }\n\n      if (!evt.retry) {\n        return null;\n      }\n\n      // Allow the handler to return a promise to defer state lookup retry\n      if (options.$retry) {\n        $urlRouter.update();\n        return TransitionFailed;\n      }\n      var retryTransition = $state.transition = $q.when(evt.retry);\n\n      retryTransition.then(function() {\n        if (retryTransition !== $state.transition) {\n          $rootScope.$broadcast('$stateChangeCancel', redirect.to, redirect.toParams, state, params);\n          return TransitionSuperseded;\n        }\n        redirect.options.$retry = true;\n        return $state.transitionTo(redirect.to, redirect.toParams, redirect.options);\n      }, function() {\n        return TransitionAborted;\n      });\n      $urlRouter.update();\n\n      return retryTransition;\n    }\n\n    root.locals = { resolve: null, globals: { $stateParams: {} } };\n\n    $state = {\n      params: {},\n      current: root.self,\n      $current: root,\n      transition: null\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#reload\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * A method that force reloads the current state. All resolves are re-resolved,\n     * controllers reinstantiated, and events re-fired.\n     *\n     * @example\n     * <pre>\n     * var app angular.module('app', ['ui.router']);\n     *\n     * app.controller('ctrl', function ($scope, $state) {\n     *   $scope.reload = function(){\n     *     $state.reload();\n     *   }\n     * });\n     * </pre>\n     *\n     * `reload()` is just an alias for:\n     * <pre>\n     * $state.transitionTo($state.current, $stateParams, { \n     *   reload: true, inherit: false, notify: true\n     * });\n     * </pre>\n     *\n     * @param {string=|object=} state - A state name or a state object, which is the root of the resolves to be re-resolved.\n     * @example\n     * <pre>\n     * //assuming app application consists of 3 states: 'contacts', 'contacts.detail', 'contacts.detail.item' \n     * //and current state is 'contacts.detail.item'\n     * var app angular.module('app', ['ui.router']);\n     *\n     * app.controller('ctrl', function ($scope, $state) {\n     *   $scope.reload = function(){\n     *     //will reload 'contact.detail' and 'contact.detail.item' states\n     *     $state.reload('contact.detail');\n     *   }\n     * });\n     * </pre>\n     *\n     * `reload()` is just an alias for:\n     * <pre>\n     * $state.transitionTo($state.current, $stateParams, { \n     *   reload: true, inherit: false, notify: true\n     * });\n     * </pre>\n\n     * @returns {promise} A promise representing the state of the new transition. See\n     * {@link ui.router.state.$state#methods_go $state.go}.\n     */\n    $state.reload = function reload(state) {\n      return $state.transitionTo($state.current, $stateParams, { reload: state || true, inherit: false, notify: true});\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#go\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * Convenience method for transitioning to a new state. `$state.go` calls \n     * `$state.transitionTo` internally but automatically sets options to \n     * `{ location: true, inherit: true, relative: $state.$current, notify: true }`. \n     * This allows you to easily use an absolute or relative to path and specify \n     * only the parameters you'd like to update (while letting unspecified parameters \n     * inherit from the currently active ancestor states).\n     *\n     * @example\n     * <pre>\n     * var app = angular.module('app', ['ui.router']);\n     *\n     * app.controller('ctrl', function ($scope, $state) {\n     *   $scope.changeState = function () {\n     *     $state.go('contact.detail');\n     *   };\n     * });\n     * </pre>\n     * <img src='../ngdoc_assets/StateGoExamples.png'/>\n     *\n     * @param {string} to Absolute state name or relative state path. Some examples:\n     *\n     * - `$state.go('contact.detail')` - will go to the `contact.detail` state\n     * - `$state.go('^')` - will go to a parent state\n     * - `$state.go('^.sibling')` - will go to a sibling state\n     * - `$state.go('.child.grandchild')` - will go to grandchild state\n     *\n     * @param {object=} params A map of the parameters that will be sent to the state, \n     * will populate $stateParams. Any parameters that are not specified will be inherited from currently \n     * defined parameters. Only parameters specified in the state definition can be overridden, new \n     * parameters will be ignored. This allows, for example, going to a sibling state that shares parameters\n     * specified in a parent state. Parameter inheritance only works between common ancestor states, I.e.\n     * transitioning to a sibling will get you the parameters for all parents, transitioning to a child\n     * will get you all current parameters, etc.\n     * @param {object=} options Options object. The options are:\n     *\n     * - **`location`** - {boolean=true|string=} - If `true` will update the url in the location bar, if `false`\n     *    will not. If string, must be `\"replace\"`, which will update url and also replace last history record.\n     * - **`inherit`** - {boolean=true}, If `true` will inherit url parameters from current url.\n     * - **`relative`** - {object=$state.$current}, When transitioning with relative path (e.g '^'), \n     *    defines which state to be relative from.\n     * - **`notify`** - {boolean=true}, If `true` will broadcast $stateChangeStart and $stateChangeSuccess events.\n     * - **`reload`** (v0.2.5) - {boolean=false|string|object}, If `true` will force transition even if no state or params\n     *    have changed.  It will reload the resolves and views of the current state and parent states.\n     *    If `reload` is a string (or state object), the state object is fetched (by name, or object reference); and \\\n     *    the transition reloads the resolves and views for that matched state, and all its children states.\n     *\n     * @returns {promise} A promise representing the state of the new transition.\n     *\n     * Possible success values:\n     *\n     * - $state.current\n     *\n     * <br/>Possible rejection values:\n     *\n     * - 'transition superseded' - when a newer transition has been started after this one\n     * - 'transition prevented' - when `event.preventDefault()` has been called in a `$stateChangeStart` listener\n     * - 'transition aborted' - when `event.preventDefault()` has been called in a `$stateNotFound` listener or\n     *   when a `$stateNotFound` `event.retry` promise errors.\n     * - 'transition failed' - when a state has been unsuccessfully found after 2 tries.\n     * - *resolve error* - when an error has occurred with a `resolve`\n     *\n     */\n    $state.go = function go(to, params, options) {\n      return $state.transitionTo(to, params, extend({ inherit: true, relative: $state.$current }, options));\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#transitionTo\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * Low-level method for transitioning to a new state. {@link ui.router.state.$state#methods_go $state.go}\n     * uses `transitionTo` internally. `$state.go` is recommended in most situations.\n     *\n     * @example\n     * <pre>\n     * var app = angular.module('app', ['ui.router']);\n     *\n     * app.controller('ctrl', function ($scope, $state) {\n     *   $scope.changeState = function () {\n     *     $state.transitionTo('contact.detail');\n     *   };\n     * });\n     * </pre>\n     *\n     * @param {string} to State name.\n     * @param {object=} toParams A map of the parameters that will be sent to the state,\n     * will populate $stateParams.\n     * @param {object=} options Options object. The options are:\n     *\n     * - **`location`** - {boolean=true|string=} - If `true` will update the url in the location bar, if `false`\n     *    will not. If string, must be `\"replace\"`, which will update url and also replace last history record.\n     * - **`inherit`** - {boolean=false}, If `true` will inherit url parameters from current url.\n     * - **`relative`** - {object=}, When transitioning with relative path (e.g '^'), \n     *    defines which state to be relative from.\n     * - **`notify`** - {boolean=true}, If `true` will broadcast $stateChangeStart and $stateChangeSuccess events.\n     * - **`reload`** (v0.2.5) - {boolean=false|string=|object=}, If `true` will force transition even if the state or params \n     *    have not changed, aka a reload of the same state. It differs from reloadOnSearch because you'd\n     *    use this when you want to force a reload when *everything* is the same, including search params.\n     *    if String, then will reload the state with the name given in reload, and any children.\n     *    if Object, then a stateObj is expected, will reload the state found in stateObj, and any children.\n     *\n     * @returns {promise} A promise representing the state of the new transition. See\n     * {@link ui.router.state.$state#methods_go $state.go}.\n     */\n    $state.transitionTo = function transitionTo(to, toParams, options) {\n      toParams = toParams || {};\n      options = extend({\n        location: true, inherit: false, relative: null, notify: true, reload: false, $retry: false\n      }, options || {});\n\n      var from = $state.$current, fromParams = $state.params, fromPath = from.path;\n      var evt, toState = findState(to, options.relative);\n\n      // Store the hash param for later (since it will be stripped out by various methods)\n      var hash = toParams['#'];\n\n      if (!isDefined(toState)) {\n        var redirect = { to: to, toParams: toParams, options: options };\n        var redirectResult = handleRedirect(redirect, from.self, fromParams, options);\n\n        if (redirectResult) {\n          return redirectResult;\n        }\n\n        // Always retry once if the $stateNotFound was not prevented\n        // (handles either redirect changed or state lazy-definition)\n        to = redirect.to;\n        toParams = redirect.toParams;\n        options = redirect.options;\n        toState = findState(to, options.relative);\n\n        if (!isDefined(toState)) {\n          if (!options.relative) throw new Error(\"No such state '\" + to + \"'\");\n          throw new Error(\"Could not resolve '\" + to + \"' from state '\" + options.relative + \"'\");\n        }\n      }\n      if (toState[abstractKey]) throw new Error(\"Cannot transition to abstract state '\" + to + \"'\");\n      if (options.inherit) toParams = inheritParams($stateParams, toParams || {}, $state.$current, toState);\n      if (!toState.params.$$validates(toParams)) return TransitionFailed;\n\n      toParams = toState.params.$$values(toParams);\n      to = toState;\n\n      var toPath = to.path;\n\n      // Starting from the root of the path, keep all levels that haven't changed\n      var keep = 0, state = toPath[keep], locals = root.locals, toLocals = [];\n\n      if (!options.reload) {\n        while (state && state === fromPath[keep] && state.ownParams.$$equals(toParams, fromParams)) {\n          locals = toLocals[keep] = state.locals;\n          keep++;\n          state = toPath[keep];\n        }\n      } else if (isString(options.reload) || isObject(options.reload)) {\n        if (isObject(options.reload) && !options.reload.name) {\n          throw new Error('Invalid reload state object');\n        }\n        \n        var reloadState = options.reload === true ? fromPath[0] : findState(options.reload);\n        if (options.reload && !reloadState) {\n          throw new Error(\"No such reload state '\" + (isString(options.reload) ? options.reload : options.reload.name) + \"'\");\n        }\n\n        while (state && state === fromPath[keep] && state !== reloadState) {\n          locals = toLocals[keep] = state.locals;\n          keep++;\n          state = toPath[keep];\n        }\n      }\n\n      // If we're going to the same state and all locals are kept, we've got nothing to do.\n      // But clear 'transition', as we still want to cancel any other pending transitions.\n      // TODO: We may not want to bump 'transition' if we're called from a location change\n      // that we've initiated ourselves, because we might accidentally abort a legitimate\n      // transition initiated from code?\n      if (shouldSkipReload(to, toParams, from, fromParams, locals, options)) {\n        if (hash) toParams['#'] = hash;\n        $state.params = toParams;\n        copy($state.params, $stateParams);\n        copy(filterByKeys(to.params.$$keys(), $stateParams), to.locals.globals.$stateParams);\n        if (options.location && to.navigable && to.navigable.url) {\n          $urlRouter.push(to.navigable.url, toParams, {\n            $$avoidResync: true, replace: options.location === 'replace'\n          });\n          $urlRouter.update(true);\n        }\n        $state.transition = null;\n        return $q.when($state.current);\n      }\n\n      // Filter parameters before we pass them to event handlers etc.\n      toParams = filterByKeys(to.params.$$keys(), toParams || {});\n      \n      // Re-add the saved hash before we start returning things or broadcasting $stateChangeStart\n      if (hash) toParams['#'] = hash;\n      \n      // Broadcast start event and cancel the transition if requested\n      if (options.notify) {\n        /**\n         * @ngdoc event\n         * @name ui.router.state.$state#$stateChangeStart\n         * @eventOf ui.router.state.$state\n         * @eventType broadcast on root scope\n         * @description\n         * Fired when the state transition **begins**. You can use `event.preventDefault()`\n         * to prevent the transition from happening and then the transition promise will be\n         * rejected with a `'transition prevented'` value.\n         *\n         * @param {Object} event Event object.\n         * @param {State} toState The state being transitioned to.\n         * @param {Object} toParams The params supplied to the `toState`.\n         * @param {State} fromState The current state, pre-transition.\n         * @param {Object} fromParams The params supplied to the `fromState`.\n         *\n         * @example\n         *\n         * <pre>\n         * $rootScope.$on('$stateChangeStart',\n         * function(event, toState, toParams, fromState, fromParams){\n         *     event.preventDefault();\n         *     // transitionTo() promise will be rejected with\n         *     // a 'transition prevented' error\n         * })\n         * </pre>\n         */\n        if ($rootScope.$broadcast('$stateChangeStart', to.self, toParams, from.self, fromParams, options).defaultPrevented) {\n          $rootScope.$broadcast('$stateChangeCancel', to.self, toParams, from.self, fromParams);\n          //Don't update and resync url if there's been a new transition started. see issue #2238, #600\n          if ($state.transition == null) $urlRouter.update();\n          return TransitionPrevented;\n        }\n      }\n\n      // Resolve locals for the remaining states, but don't update any global state just\n      // yet -- if anything fails to resolve the current state needs to remain untouched.\n      // We also set up an inheritance chain for the locals here. This allows the view directive\n      // to quickly look up the correct definition for each view in the current state. Even\n      // though we create the locals object itself outside resolveState(), it is initially\n      // empty and gets filled asynchronously. We need to keep track of the promise for the\n      // (fully resolved) current locals, and pass this down the chain.\n      var resolved = $q.when(locals);\n\n      for (var l = keep; l < toPath.length; l++, state = toPath[l]) {\n        locals = toLocals[l] = inherit(locals);\n        resolved = resolveState(state, toParams, state === to, resolved, locals, options);\n      }\n\n      // Once everything is resolved, we are ready to perform the actual transition\n      // and return a promise for the new state. We also keep track of what the\n      // current promise is, so that we can detect overlapping transitions and\n      // keep only the outcome of the last transition.\n      var transition = $state.transition = resolved.then(function () {\n        var l, entering, exiting;\n\n        if ($state.transition !== transition) {\n          $rootScope.$broadcast('$stateChangeCancel', to.self, toParams, from.self, fromParams);\n          return TransitionSuperseded;\n        }\n\n        // Exit 'from' states not kept\n        for (l = fromPath.length - 1; l >= keep; l--) {\n          exiting = fromPath[l];\n          if (exiting.self.onExit) {\n            $injector.invoke(exiting.self.onExit, exiting.self, exiting.locals.globals);\n          }\n          exiting.locals = null;\n        }\n\n        // Enter 'to' states not kept\n        for (l = keep; l < toPath.length; l++) {\n          entering = toPath[l];\n          entering.locals = toLocals[l];\n          if (entering.self.onEnter) {\n            $injector.invoke(entering.self.onEnter, entering.self, entering.locals.globals);\n          }\n        }\n\n        // Run it again, to catch any transitions in callbacks\n        if ($state.transition !== transition) {\n          $rootScope.$broadcast('$stateChangeCancel', to.self, toParams, from.self, fromParams);\n          return TransitionSuperseded;\n        }\n\n        // Update globals in $state\n        $state.$current = to;\n        $state.current = to.self;\n        $state.params = toParams;\n        copy($state.params, $stateParams);\n        $state.transition = null;\n\n        if (options.location && to.navigable) {\n          $urlRouter.push(to.navigable.url, to.navigable.locals.globals.$stateParams, {\n            $$avoidResync: true, replace: options.location === 'replace'\n          });\n        }\n\n        if (options.notify) {\n        /**\n         * @ngdoc event\n         * @name ui.router.state.$state#$stateChangeSuccess\n         * @eventOf ui.router.state.$state\n         * @eventType broadcast on root scope\n         * @description\n         * Fired once the state transition is **complete**.\n         *\n         * @param {Object} event Event object.\n         * @param {State} toState The state being transitioned to.\n         * @param {Object} toParams The params supplied to the `toState`.\n         * @param {State} fromState The current state, pre-transition.\n         * @param {Object} fromParams The params supplied to the `fromState`.\n         */\n          $rootScope.$broadcast('$stateChangeSuccess', to.self, toParams, from.self, fromParams);\n        }\n        $urlRouter.update(true);\n\n        return $state.current;\n      }).then(null, function (error) {\n        // propagate TransitionSuperseded error without emitting $stateChangeCancel\n        // as it was already emitted in the success handler above\n        if (error === TransitionSupersededError) return TransitionSuperseded;\n\n        if ($state.transition !== transition) {\n          $rootScope.$broadcast('$stateChangeCancel', to.self, toParams, from.self, fromParams);\n          return TransitionSuperseded;\n        }\n\n        $state.transition = null;\n        /**\n         * @ngdoc event\n         * @name ui.router.state.$state#$stateChangeError\n         * @eventOf ui.router.state.$state\n         * @eventType broadcast on root scope\n         * @description\n         * Fired when an **error occurs** during transition. It's important to note that if you\n         * have any errors in your resolve functions (javascript errors, non-existent services, etc)\n         * they will not throw traditionally. You must listen for this $stateChangeError event to\n         * catch **ALL** errors.\n         *\n         * @param {Object} event Event object.\n         * @param {State} toState The state being transitioned to.\n         * @param {Object} toParams The params supplied to the `toState`.\n         * @param {State} fromState The current state, pre-transition.\n         * @param {Object} fromParams The params supplied to the `fromState`.\n         * @param {Error} error The resolve error object.\n         */\n        evt = $rootScope.$broadcast('$stateChangeError', to.self, toParams, from.self, fromParams, error);\n\n        if (!evt.defaultPrevented) {\n          $urlRouter.update();\n        }\n\n        return $q.reject(error);\n      });\n\n      silenceUncaughtInPromise(transition);\n      return transition;\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#is\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * Similar to {@link ui.router.state.$state#methods_includes $state.includes},\n     * but only checks for the full state name. If params is supplied then it will be\n     * tested for strict equality against the current active params object, so all params\n     * must match with none missing and no extras.\n     *\n     * @example\n     * <pre>\n     * $state.$current.name = 'contacts.details.item';\n     *\n     * // absolute name\n     * $state.is('contact.details.item'); // returns true\n     * $state.is(contactDetailItemStateObject); // returns true\n     *\n     * // relative name (. and ^), typically from a template\n     * // E.g. from the 'contacts.details' template\n     * <div ng-class=\"{highlighted: $state.is('.item')}\">Item</div>\n     * </pre>\n     *\n     * @param {string|object} stateOrName The state name (absolute or relative) or state object you'd like to check.\n     * @param {object=} params A param object, e.g. `{sectionId: section.id}`, that you'd like\n     * to test against the current active state.\n     * @param {object=} options An options object.  The options are:\n     *\n     * - **`relative`** - {string|object} -  If `stateOrName` is a relative state name and `options.relative` is set, .is will\n     * test relative to `options.relative` state (or name).\n     *\n     * @returns {boolean} Returns true if it is the state.\n     */\n    $state.is = function is(stateOrName, params, options) {\n      options = extend({ relative: $state.$current }, options || {});\n      var state = findState(stateOrName, options.relative);\n\n      if (!isDefined(state)) { return undefined; }\n      if ($state.$current !== state) { return false; }\n\n      return !params || objectKeys(params).reduce(function(acc, key) {\n        var paramDef = state.params[key];\n        return acc && !paramDef || paramDef.type.equals($stateParams[key], params[key]);\n      }, true);\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#includes\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * A method to determine if the current active state is equal to or is the child of the\n     * state stateName. If any params are passed then they will be tested for a match as well.\n     * Not all the parameters need to be passed, just the ones you'd like to test for equality.\n     *\n     * @example\n     * Partial and relative names\n     * <pre>\n     * $state.$current.name = 'contacts.details.item';\n     *\n     * // Using partial names\n     * $state.includes(\"contacts\"); // returns true\n     * $state.includes(\"contacts.details\"); // returns true\n     * $state.includes(\"contacts.details.item\"); // returns true\n     * $state.includes(\"contacts.list\"); // returns false\n     * $state.includes(\"about\"); // returns false\n     *\n     * // Using relative names (. and ^), typically from a template\n     * // E.g. from the 'contacts.details' template\n     * <div ng-class=\"{highlighted: $state.includes('.item')}\">Item</div>\n     * </pre>\n     *\n     * Basic globbing patterns\n     * <pre>\n     * $state.$current.name = 'contacts.details.item.url';\n     *\n     * $state.includes(\"*.details.*.*\"); // returns true\n     * $state.includes(\"*.details.**\"); // returns true\n     * $state.includes(\"**.item.**\"); // returns true\n     * $state.includes(\"*.details.item.url\"); // returns true\n     * $state.includes(\"*.details.*.url\"); // returns true\n     * $state.includes(\"*.details.*\"); // returns false\n     * $state.includes(\"item.**\"); // returns false\n     * </pre>\n     *\n     * @param {string} stateOrName A partial name, relative name, or glob pattern\n     * to be searched for within the current state name.\n     * @param {object=} params A param object, e.g. `{sectionId: section.id}`,\n     * that you'd like to test against the current active state.\n     * @param {object=} options An options object.  The options are:\n     *\n     * - **`relative`** - {string|object=} -  If `stateOrName` is a relative state reference and `options.relative` is set,\n     * .includes will test relative to `options.relative` state (or name).\n     *\n     * @returns {boolean} Returns true if it does include the state\n     */\n    $state.includes = function includes(stateOrName, params, options) {\n      options = extend({ relative: $state.$current }, options || {});\n      if (isString(stateOrName) && isGlob(stateOrName)) {\n        if (!doesStateMatchGlob(stateOrName)) {\n          return false;\n        }\n        stateOrName = $state.$current.name;\n      }\n\n      var state = findState(stateOrName, options.relative);\n      if (!isDefined(state)) { return undefined; }\n      if (!isDefined($state.$current.includes[state.name])) { return false; }\n      if (!params) { return true; }\n\n      var keys = objectKeys(params);\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i], paramDef = state.params[key];\n        if (paramDef && !paramDef.type.equals($stateParams[key], params[key])) {\n          return false;\n        }\n      }\n\n      return objectKeys(params).reduce(function(acc, key) {\n        var paramDef = state.params[key];\n        return acc && !paramDef || paramDef.type.equals($stateParams[key], params[key]);\n      }, true);\n    };\n\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#href\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * A url generation method that returns the compiled url for the given state populated with the given params.\n     *\n     * @example\n     * <pre>\n     * expect($state.href(\"about.person\", { person: \"bob\" })).toEqual(\"/about/bob\");\n     * </pre>\n     *\n     * @param {string|object} stateOrName The state name or state object you'd like to generate a url from.\n     * @param {object=} params An object of parameter values to fill the state's required parameters.\n     * @param {object=} options Options object. The options are:\n     *\n     * - **`lossy`** - {boolean=true} -  If true, and if there is no url associated with the state provided in the\n     *    first parameter, then the constructed href url will be built from the first navigable ancestor (aka\n     *    ancestor with a valid url).\n     * - **`inherit`** - {boolean=true}, If `true` will inherit url parameters from current url.\n     * - **`relative`** - {object=$state.$current}, When transitioning with relative path (e.g '^'), \n     *    defines which state to be relative from.\n     * - **`absolute`** - {boolean=false},  If true will generate an absolute url, e.g. \"http://www.example.com/fullurl\".\n     * \n     * @returns {string} compiled state url\n     */\n    $state.href = function href(stateOrName, params, options) {\n      options = extend({\n        lossy:    true,\n        inherit:  true,\n        absolute: false,\n        relative: $state.$current\n      }, options || {});\n\n      var state = findState(stateOrName, options.relative);\n\n      if (!isDefined(state)) return null;\n      if (options.inherit) params = inheritParams($stateParams, params || {}, $state.$current, state);\n      \n      var nav = (state && options.lossy) ? state.navigable : state;\n\n      if (!nav || nav.url === undefined || nav.url === null) {\n        return null;\n      }\n      return $urlRouter.href(nav.url, filterByKeys(state.params.$$keys().concat('#'), params || {}), {\n        absolute: options.absolute\n      });\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#get\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * Returns the state configuration object for any specific state or all states.\n     *\n     * @param {string|object=} stateOrName (absolute or relative) If provided, will only get the config for\n     * the requested state. If not provided, returns an array of ALL state configs.\n     * @param {string|object=} context When stateOrName is a relative state reference, the state will be retrieved relative to context.\n     * @returns {Object|Array} State configuration object or array of all objects.\n     */\n    $state.get = function (stateOrName, context) {\n      if (arguments.length === 0) return map(objectKeys(states), function(name) { return states[name].self; });\n      var state = findState(stateOrName, context || $state.$current);\n      return (state && state.self) ? state.self : null;\n    };\n\n    function resolveState(state, params, paramsAreFiltered, inherited, dst, options) {\n      // Make a restricted $stateParams with only the parameters that apply to this state if\n      // necessary. In addition to being available to the controller and onEnter/onExit callbacks,\n      // we also need $stateParams to be available for any $injector calls we make during the\n      // dependency resolution process.\n      var $stateParams = (paramsAreFiltered) ? params : filterByKeys(state.params.$$keys(), params);\n      var locals = { $stateParams: $stateParams };\n\n      // Resolve 'global' dependencies for the state, i.e. those not specific to a view.\n      // We're also including $stateParams in this; that way the parameters are restricted\n      // to the set that should be visible to the state, and are independent of when we update\n      // the global $state and $stateParams values.\n      dst.resolve = $resolve.resolve(state.resolve, locals, dst.resolve, state);\n      var promises = [dst.resolve.then(function (globals) {\n        dst.globals = globals;\n      })];\n      if (inherited) promises.push(inherited);\n\n      function resolveViews() {\n        var viewsPromises = [];\n\n        // Resolve template and dependencies for all views.\n        forEach(state.views, function (view, name) {\n          var injectables = (view.resolve && view.resolve !== state.resolve ? view.resolve : {});\n          injectables.$template = [ function () {\n            return $view.load(name, { view: view, locals: dst.globals, params: $stateParams, notify: options.notify }) || '';\n          }];\n\n          viewsPromises.push($resolve.resolve(injectables, dst.globals, dst.resolve, state).then(function (result) {\n            // References to the controller (only instantiated at link time)\n            if (isFunction(view.controllerProvider) || isArray(view.controllerProvider)) {\n              var injectLocals = angular.extend({}, injectables, dst.globals);\n              result.$$controller = $injector.invoke(view.controllerProvider, null, injectLocals);\n            } else {\n              result.$$controller = view.controller;\n            }\n            // Provide access to the state itself for internal use\n            result.$$state = state;\n            result.$$controllerAs = view.controllerAs;\n            result.$$resolveAs = view.resolveAs;\n            dst[name] = result;\n          }));\n        });\n\n        return $q.all(viewsPromises).then(function(){\n          return dst.globals;\n        });\n      }\n\n      // Wait for all the promises and then return the activation object\n      return $q.all(promises).then(resolveViews).then(function (values) {\n        return dst;\n      });\n    }\n\n    return $state;\n  }\n\n  function shouldSkipReload(to, toParams, from, fromParams, locals, options) {\n    // Return true if there are no differences in non-search (path/object) params, false if there are differences\n    function nonSearchParamsEqual(fromAndToState, fromParams, toParams) {\n      // Identify whether all the parameters that differ between `fromParams` and `toParams` were search params.\n      function notSearchParam(key) {\n        return fromAndToState.params[key].location != \"search\";\n      }\n      var nonQueryParamKeys = fromAndToState.params.$$keys().filter(notSearchParam);\n      var nonQueryParams = pick.apply({}, [fromAndToState.params].concat(nonQueryParamKeys));\n      var nonQueryParamSet = new $$UMFP.ParamSet(nonQueryParams);\n      return nonQueryParamSet.$$equals(fromParams, toParams);\n    }\n\n    // If reload was not explicitly requested\n    // and we're transitioning to the same state we're already in\n    // and    the locals didn't change\n    //     or they changed in a way that doesn't merit reloading\n    //        (reloadOnParams:false, or reloadOnSearch.false and only search params changed)\n    // Then return true.\n    if (!options.reload && to === from &&\n      (locals === from.locals || (to.self.reloadOnSearch === false && nonSearchParamsEqual(from, fromParams, toParams)))) {\n      return true;\n    }\n  }\n}\n\nangular.module('ui.router.state')\n  .factory('$stateParams', function () { return {}; })\n  .constant(\"$state.runtime\", { autoinject: true })\n  .provider('$state', $StateProvider)\n  // Inject $state to initialize when entering runtime. #2574\n  .run(['$injector', function ($injector) {\n    // Allow tests (stateSpec.js) to turn this off by defining this constant\n    if ($injector.get(\"$state.runtime\").autoinject) {\n      $injector.get('$state');\n    }\n  }]);\n\n\n$ViewProvider.$inject = [];\nfunction $ViewProvider() {\n\n  this.$get = $get;\n  /**\n   * @ngdoc object\n   * @name ui.router.state.$view\n   *\n   * @requires ui.router.util.$templateFactory\n   * @requires $rootScope\n   *\n   * @description\n   *\n   */\n  $get.$inject = ['$rootScope', '$templateFactory'];\n  function $get(   $rootScope,   $templateFactory) {\n    return {\n      // $view.load('full.viewName', { template: ..., controller: ..., resolve: ..., async: false, params: ... })\n      /**\n       * @ngdoc function\n       * @name ui.router.state.$view#load\n       * @methodOf ui.router.state.$view\n       *\n       * @description\n       *\n       * @param {string} name name\n       * @param {object} options option object.\n       */\n      load: function load(name, options) {\n        var result, defaults = {\n          template: null, controller: null, view: null, locals: null, notify: true, async: true, params: {}\n        };\n        options = extend(defaults, options);\n\n        if (options.view) {\n          result = $templateFactory.fromConfig(options.view, options.params, options.locals);\n        }\n        return result;\n      }\n    };\n  }\n}\n\nangular.module('ui.router.state').provider('$view', $ViewProvider);\n\n/**\n * @ngdoc object\n * @name ui.router.state.$uiViewScrollProvider\n *\n * @description\n * Provider that returns the {@link ui.router.state.$uiViewScroll} service function.\n */\nfunction $ViewScrollProvider() {\n\n  var useAnchorScroll = false;\n\n  /**\n   * @ngdoc function\n   * @name ui.router.state.$uiViewScrollProvider#useAnchorScroll\n   * @methodOf ui.router.state.$uiViewScrollProvider\n   *\n   * @description\n   * Reverts back to using the core [`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll) service for\n   * scrolling based on the url anchor.\n   */\n  this.useAnchorScroll = function () {\n    useAnchorScroll = true;\n  };\n\n  /**\n   * @ngdoc object\n   * @name ui.router.state.$uiViewScroll\n   *\n   * @requires $anchorScroll\n   * @requires $timeout\n   *\n   * @description\n   * When called with a jqLite element, it scrolls the element into view (after a\n   * `$timeout` so the DOM has time to refresh).\n   *\n   * If you prefer to rely on `$anchorScroll` to scroll the view to the anchor,\n   * this can be enabled by calling {@link ui.router.state.$uiViewScrollProvider#methods_useAnchorScroll `$uiViewScrollProvider.useAnchorScroll()`}.\n   */\n  this.$get = ['$anchorScroll', '$timeout', function ($anchorScroll, $timeout) {\n    if (useAnchorScroll) {\n      return $anchorScroll;\n    }\n\n    return function ($element) {\n      return $timeout(function () {\n        $element[0].scrollIntoView();\n      }, 0, false);\n    };\n  }];\n}\n\nangular.module('ui.router.state').provider('$uiViewScroll', $ViewScrollProvider);\n\n/**\n * @ngdoc directive\n * @name ui.router.state.directive:ui-view\n *\n * @requires ui.router.state.$state\n * @requires $compile\n * @requires $controller\n * @requires $injector\n * @requires ui.router.state.$uiViewScroll\n * @requires $document\n *\n * @restrict ECA\n *\n * @description\n * The ui-view directive tells $state where to place your templates.\n *\n * @param {string=} name A view name. The name should be unique amongst the other views in the\n * same state. You can have views of the same name that live in different states.\n *\n * @param {string=} autoscroll It allows you to set the scroll behavior of the browser window\n * when a view is populated. By default, $anchorScroll is overridden by ui-router's custom scroll\n * service, {@link ui.router.state.$uiViewScroll}. This custom service let's you\n * scroll ui-view elements into view when they are populated during a state activation.\n *\n * *Note: To revert back to old [`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll)\n * functionality, call `$uiViewScrollProvider.useAnchorScroll()`.*\n *\n * @param {string=} onload Expression to evaluate whenever the view updates.\n *\n * @example\n * A view can be unnamed or named.\n * <pre>\n * <!-- Unnamed -->\n * <div ui-view></div>\n *\n * <!-- Named -->\n * <div ui-view=\"viewName\"></div>\n * </pre>\n *\n * You can only have one unnamed view within any template (or root html). If you are only using a\n * single view and it is unnamed then you can populate it like so:\n * <pre>\n * <div ui-view></div>\n * $stateProvider.state(\"home\", {\n *   template: \"<h1>HELLO!</h1>\"\n * })\n * </pre>\n *\n * The above is a convenient shortcut equivalent to specifying your view explicitly with the {@link ui.router.state.$stateProvider#methods_state `views`}\n * config property, by name, in this case an empty name:\n * <pre>\n * $stateProvider.state(\"home\", {\n *   views: {\n *     \"\": {\n *       template: \"<h1>HELLO!</h1>\"\n *     }\n *   }    \n * })\n * </pre>\n *\n * But typically you'll only use the views property if you name your view or have more than one view\n * in the same template. There's not really a compelling reason to name a view if its the only one,\n * but you could if you wanted, like so:\n * <pre>\n * <div ui-view=\"main\"></div>\n * </pre>\n * <pre>\n * $stateProvider.state(\"home\", {\n *   views: {\n *     \"main\": {\n *       template: \"<h1>HELLO!</h1>\"\n *     }\n *   }    \n * })\n * </pre>\n *\n * Really though, you'll use views to set up multiple views:\n * <pre>\n * <div ui-view></div>\n * <div ui-view=\"chart\"></div>\n * <div ui-view=\"data\"></div>\n * </pre>\n *\n * <pre>\n * $stateProvider.state(\"home\", {\n *   views: {\n *     \"\": {\n *       template: \"<h1>HELLO!</h1>\"\n *     },\n *     \"chart\": {\n *       template: \"<chart_thing/>\"\n *     },\n *     \"data\": {\n *       template: \"<data_thing/>\"\n *     }\n *   }    \n * })\n * </pre>\n *\n * Examples for `autoscroll`:\n *\n * <pre>\n * <!-- If autoscroll present with no expression,\n *      then scroll ui-view into view -->\n * <ui-view autoscroll/>\n *\n * <!-- If autoscroll present with valid expression,\n *      then scroll ui-view into view if expression evaluates to true -->\n * <ui-view autoscroll='true'/>\n * <ui-view autoscroll='false'/>\n * <ui-view autoscroll='scopeVariable'/>\n * </pre>\n *\n * Resolve data:\n *\n * The resolved data from the state's `resolve` block is placed on the scope as `$resolve` (this\n * can be customized using [[ViewDeclaration.resolveAs]]).  This can be then accessed from the template.\n *\n * Note that when `controllerAs` is being used, `$resolve` is set on the controller instance *after* the\n * controller is instantiated.  The `$onInit()` hook can be used to perform initialization code which\n * depends on `$resolve` data.\n *\n * Example usage of $resolve in a view template\n * <pre>\n * $stateProvider.state('home', {\n *   template: '<my-component user=\"$resolve.user\"></my-component>',\n *   resolve: {\n *     user: function(UserService) { return UserService.fetchUser(); }\n *   }\n * });\n * </pre>\n */\n$ViewDirective.$inject = ['$state', '$injector', '$uiViewScroll', '$interpolate', '$q'];\nfunction $ViewDirective(   $state,   $injector,   $uiViewScroll,   $interpolate,   $q) {\n\n  function getService() {\n    return ($injector.has) ? function(service) {\n      return $injector.has(service) ? $injector.get(service) : null;\n    } : function(service) {\n      try {\n        return $injector.get(service);\n      } catch (e) {\n        return null;\n      }\n    };\n  }\n\n  var service = getService(),\n      $animator = service('$animator'),\n      $animate = service('$animate');\n\n  // Returns a set of DOM manipulation functions based on which Angular version\n  // it should use\n  function getRenderer(attrs, scope) {\n    var statics = function() {\n      return {\n        enter: function (element, target, cb) { target.after(element); cb(); },\n        leave: function (element, cb) { element.remove(); cb(); }\n      };\n    };\n\n    if ($animate) {\n      return {\n        enter: function(element, target, cb) {\n          if (angular.version.minor > 2) {\n            $animate.enter(element, null, target).then(cb);\n          } else {\n            $animate.enter(element, null, target, cb);\n          }\n        },\n        leave: function(element, cb) {\n          if (angular.version.minor > 2) {\n            $animate.leave(element).then(cb);\n          } else {\n            $animate.leave(element, cb);\n          }\n        }\n      };\n    }\n\n    if ($animator) {\n      var animate = $animator && $animator(scope, attrs);\n\n      return {\n        enter: function(element, target, cb) {animate.enter(element, null, target); cb(); },\n        leave: function(element, cb) { animate.leave(element); cb(); }\n      };\n    }\n\n    return statics();\n  }\n\n  var directive = {\n    restrict: 'ECA',\n    terminal: true,\n    priority: 400,\n    transclude: 'element',\n    compile: function (tElement, tAttrs, $transclude) {\n      return function (scope, $element, attrs) {\n        var previousEl, currentEl, currentScope, latestLocals,\n            onloadExp     = attrs.onload || '',\n            autoScrollExp = attrs.autoscroll,\n            renderer      = getRenderer(attrs, scope),\n            inherited     = $element.inheritedData('$uiView');\n\n        scope.$on('$stateChangeSuccess', function() {\n          updateView(false);\n        });\n\n        updateView(true);\n\n        function cleanupLastView() {\n          if (previousEl) {\n            previousEl.remove();\n            previousEl = null;\n          }\n\n          if (currentScope) {\n            currentScope.$destroy();\n            currentScope = null;\n          }\n\n          if (currentEl) {\n            var $uiViewData = currentEl.data('$uiViewAnim');\n            renderer.leave(currentEl, function() {\n              $uiViewData.$$animLeave.resolve();\n              previousEl = null;\n            });\n\n            previousEl = currentEl;\n            currentEl = null;\n          }\n        }\n\n        function updateView(firstTime) {\n          var newScope,\n              name            = getUiViewName(scope, attrs, $element, $interpolate),\n              previousLocals  = name && $state.$current && $state.$current.locals[name];\n\n          if (!firstTime && previousLocals === latestLocals) return; // nothing to do\n          newScope = scope.$new();\n          latestLocals = $state.$current.locals[name];\n\n          /**\n           * @ngdoc event\n           * @name ui.router.state.directive:ui-view#$viewContentLoading\n           * @eventOf ui.router.state.directive:ui-view\n           * @eventType emits on ui-view directive scope\n           * @description\n           *\n           * Fired once the view **begins loading**, *before* the DOM is rendered.\n           *\n           * @param {Object} event Event object.\n           * @param {string} viewName Name of the view.\n           */\n          newScope.$emit('$viewContentLoading', name);\n\n          var clone = $transclude(newScope, function(clone) {\n            var animEnter = $q.defer(), animLeave = $q.defer();\n            var viewAnimData = {\n              $animEnter: animEnter.promise,\n              $animLeave: animLeave.promise,\n              $$animLeave: animLeave\n            };\n\n            clone.data('$uiViewAnim', viewAnimData);\n            renderer.enter(clone, $element, function onUiViewEnter() {\n              animEnter.resolve();\n              if(currentScope) {\n                currentScope.$emit('$viewContentAnimationEnded');\n              }\n\n              if (angular.isDefined(autoScrollExp) && !autoScrollExp || scope.$eval(autoScrollExp)) {\n                $uiViewScroll(clone);\n              }\n            });\n            cleanupLastView();\n          });\n\n          currentEl = clone;\n          currentScope = newScope;\n          /**\n           * @ngdoc event\n           * @name ui.router.state.directive:ui-view#$viewContentLoaded\n           * @eventOf ui.router.state.directive:ui-view\n           * @eventType emits on ui-view directive scope\n           * @description\n           * Fired once the view is **loaded**, *after* the DOM is rendered.\n           *\n           * @param {Object} event Event object.\n           * @param {string} viewName Name of the view.\n           */\n          currentScope.$emit('$viewContentLoaded', name);\n          currentScope.$eval(onloadExp);\n        }\n      };\n    }\n  };\n\n  return directive;\n}\n\n$ViewDirectiveFill.$inject = ['$compile', '$controller', '$state', '$interpolate'];\nfunction $ViewDirectiveFill (  $compile,   $controller,   $state,   $interpolate) {\n  return {\n    restrict: 'ECA',\n    priority: -400,\n    compile: function (tElement) {\n      var initial = tElement.html();\n      if (tElement.empty) {\n        tElement.empty();\n      } else {\n        // ng 1.0.0 doesn't have empty(), which cleans up data and handlers\n        tElement[0].innerHTML = null;\n      }\n\n      return function (scope, $element, attrs) {\n        var current = $state.$current,\n            name = getUiViewName(scope, attrs, $element, $interpolate),\n            locals  = current && current.locals[name];\n\n        if (! locals) {\n          $element.html(initial);\n          $compile($element.contents())(scope);\n          return;\n        }\n\n        $element.data('$uiView', { name: name, state: locals.$$state });\n        $element.html(locals.$template ? locals.$template : initial);\n\n        var resolveData = angular.extend({}, locals);\n        scope[locals.$$resolveAs] = resolveData;\n\n        var link = $compile($element.contents());\n\n        if (locals.$$controller) {\n          locals.$scope = scope;\n          locals.$element = $element;\n          var controller = $controller(locals.$$controller, locals);\n          if (locals.$$controllerAs) {\n            scope[locals.$$controllerAs] = controller;\n            scope[locals.$$controllerAs][locals.$$resolveAs] = resolveData;\n          }\n          if (isFunction(controller.$onInit)) controller.$onInit();\n          $element.data('$ngControllerController', controller);\n          $element.children().data('$ngControllerController', controller);\n        }\n\n        link(scope);\n      };\n    }\n  };\n}\n\n/**\n * Shared ui-view code for both directives:\n * Given scope, element, and its attributes, return the view's name\n */\nfunction getUiViewName(scope, attrs, element, $interpolate) {\n  var name = $interpolate(attrs.uiView || attrs.name || '')(scope);\n  var uiViewCreatedBy = element.inheritedData('$uiView');\n  return name.indexOf('@') >= 0 ?  name :  (name + '@' + (uiViewCreatedBy ? uiViewCreatedBy.state.name : ''));\n}\n\nangular.module('ui.router.state').directive('uiView', $ViewDirective);\nangular.module('ui.router.state').directive('uiView', $ViewDirectiveFill);\n\nfunction parseStateRef(ref, current) {\n  var preparsed = ref.match(/^\\s*({[^}]*})\\s*$/), parsed;\n  if (preparsed) ref = current + '(' + preparsed[1] + ')';\n  parsed = ref.replace(/\\n/g, \" \").match(/^([^(]+?)\\s*(\\((.*)\\))?$/);\n  if (!parsed || parsed.length !== 4) throw new Error(\"Invalid state ref '\" + ref + \"'\");\n  return { state: parsed[1], paramExpr: parsed[3] || null };\n}\n\nfunction stateContext(el) {\n  var stateData = el.parent().inheritedData('$uiView');\n\n  if (stateData && stateData.state && stateData.state.name) {\n    return stateData.state;\n  }\n}\n\nfunction getTypeInfo(el) {\n  // SVGAElement does not use the href attribute, but rather the 'xlinkHref' attribute.\n  var isSvg = Object.prototype.toString.call(el.prop('href')) === '[object SVGAnimatedString]';\n  var isForm = el[0].nodeName === \"FORM\";\n\n  return {\n    attr: isForm ? \"action\" : (isSvg ? 'xlink:href' : 'href'),\n    isAnchor: el.prop(\"tagName\").toUpperCase() === \"A\",\n    clickable: !isForm\n  };\n}\n\nfunction clickHook(el, $state, $timeout, type, current) {\n  return function(e) {\n    var button = e.which || e.button, target = current();\n\n    if (!(button > 1 || e.ctrlKey || e.metaKey || e.shiftKey || el.attr('target'))) {\n      // HACK: This is to allow ng-clicks to be processed before the transition is initiated:\n      var transition = $timeout(function() {\n        $state.go(target.state, target.params, target.options);\n      });\n      e.preventDefault();\n\n      // if the state has no URL, ignore one preventDefault from the <a> directive.\n      var ignorePreventDefaultCount = type.isAnchor && !target.href ? 1: 0;\n\n      e.preventDefault = function() {\n        if (ignorePreventDefaultCount-- <= 0) $timeout.cancel(transition);\n      };\n    }\n  };\n}\n\nfunction defaultOpts(el, $state) {\n  return { relative: stateContext(el) || $state.$current, inherit: true };\n}\n\n/**\n * @ngdoc directive\n * @name ui.router.state.directive:ui-sref\n *\n * @requires ui.router.state.$state\n * @requires $timeout\n *\n * @restrict A\n *\n * @description\n * A directive that binds a link (`<a>` tag) to a state. If the state has an associated\n * URL, the directive will automatically generate & update the `href` attribute via\n * the {@link ui.router.state.$state#methods_href $state.href()} method. Clicking\n * the link will trigger a state transition with optional parameters.\n *\n * Also middle-clicking, right-clicking, and ctrl-clicking on the link will be\n * handled natively by the browser.\n *\n * You can also use relative state paths within ui-sref, just like the relative\n * paths passed to `$state.go()`. You just need to be aware that the path is relative\n * to the state that the link lives in, in other words the state that loaded the\n * template containing the link.\n *\n * You can specify options to pass to {@link ui.router.state.$state#methods_go $state.go()}\n * using the `ui-sref-opts` attribute. Options are restricted to `location`, `inherit`,\n * and `reload`.\n *\n * @example\n * Here's an example of how you'd use ui-sref and how it would compile. If you have the\n * following template:\n * <pre>\n * <a ui-sref=\"home\">Home</a> | <a ui-sref=\"about\">About</a> | <a ui-sref=\"{page: 2}\">Next page</a>\n *\n * <ul>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a ui-sref=\"contacts.detail({ id: contact.id })\">{{ contact.name }}</a>\n *     </li>\n * </ul>\n * </pre>\n *\n * Then the compiled html would be (assuming Html5Mode is off and current state is contacts):\n * <pre>\n * <a href=\"#/home\" ui-sref=\"home\">Home</a> | <a href=\"#/about\" ui-sref=\"about\">About</a> | <a href=\"#/contacts?page=2\" ui-sref=\"{page: 2}\">Next page</a>\n *\n * <ul>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a href=\"#/contacts/1\" ui-sref=\"contacts.detail({ id: contact.id })\">Joe</a>\n *     </li>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a href=\"#/contacts/2\" ui-sref=\"contacts.detail({ id: contact.id })\">Alice</a>\n *     </li>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a href=\"#/contacts/3\" ui-sref=\"contacts.detail({ id: contact.id })\">Bob</a>\n *     </li>\n * </ul>\n *\n * <a ui-sref=\"home\" ui-sref-opts=\"{reload: true}\">Home</a>\n * </pre>\n *\n * @param {string} ui-sref 'stateName' can be any valid absolute or relative state\n * @param {Object} ui-sref-opts options to pass to {@link ui.router.state.$state#methods_go $state.go()}\n */\n$StateRefDirective.$inject = ['$state', '$timeout'];\nfunction $StateRefDirective($state, $timeout) {\n  return {\n    restrict: 'A',\n    require: ['?^uiSrefActive', '?^uiSrefActiveEq'],\n    link: function(scope, element, attrs, uiSrefActive) {\n      var ref    = parseStateRef(attrs.uiSref, $state.current.name);\n      var def    = { state: ref.state, href: null, params: null };\n      var type   = getTypeInfo(element);\n      var active = uiSrefActive[1] || uiSrefActive[0];\n      var unlinkInfoFn = null;\n      var hookFn;\n\n      def.options = extend(defaultOpts(element, $state), attrs.uiSrefOpts ? scope.$eval(attrs.uiSrefOpts) : {});\n\n      var update = function(val) {\n        if (val) def.params = angular.copy(val);\n        def.href = $state.href(ref.state, def.params, def.options);\n\n        if (unlinkInfoFn) unlinkInfoFn();\n        if (active) unlinkInfoFn = active.$$addStateInfo(ref.state, def.params);\n        if (def.href !== null) attrs.$set(type.attr, def.href);\n      };\n\n      if (ref.paramExpr) {\n        scope.$watch(ref.paramExpr, function(val) { if (val !== def.params) update(val); }, true);\n        def.params = angular.copy(scope.$eval(ref.paramExpr));\n      }\n      update();\n\n      if (!type.clickable) return;\n      hookFn = clickHook(element, $state, $timeout, type, function() { return def; });\n      element[element.on ? 'on' : 'bind'](\"click\", hookFn);\n      scope.$on('$destroy', function() {\n        element[element.off ? 'off' : 'unbind'](\"click\", hookFn);\n      });\n    }\n  };\n}\n\n/**\n * @ngdoc directive\n * @name ui.router.state.directive:ui-state\n *\n * @requires ui.router.state.uiSref\n *\n * @restrict A\n *\n * @description\n * Much like ui-sref, but will accept named $scope properties to evaluate for a state definition,\n * params and override options.\n *\n * @param {string} ui-state 'stateName' can be any valid absolute or relative state\n * @param {Object} ui-state-params params to pass to {@link ui.router.state.$state#methods_href $state.href()}\n * @param {Object} ui-state-opts options to pass to {@link ui.router.state.$state#methods_go $state.go()}\n */\n$StateRefDynamicDirective.$inject = ['$state', '$timeout'];\nfunction $StateRefDynamicDirective($state, $timeout) {\n  return {\n    restrict: 'A',\n    require: ['?^uiSrefActive', '?^uiSrefActiveEq'],\n    link: function(scope, element, attrs, uiSrefActive) {\n      var type   = getTypeInfo(element);\n      var active = uiSrefActive[1] || uiSrefActive[0];\n      var group  = [attrs.uiState, attrs.uiStateParams || null, attrs.uiStateOpts || null];\n      var watch  = '[' + group.map(function(val) { return val || 'null'; }).join(', ') + ']';\n      var def    = { state: null, params: null, options: null, href: null };\n      var unlinkInfoFn = null;\n      var hookFn;\n\n      function runStateRefLink (group) {\n        def.state = group[0]; def.params = group[1]; def.options = group[2];\n        def.href = $state.href(def.state, def.params, def.options);\n\n        if (unlinkInfoFn) unlinkInfoFn();\n        if (active) unlinkInfoFn = active.$$addStateInfo(def.state, def.params);\n        if (def.href) attrs.$set(type.attr, def.href);\n      }\n\n      scope.$watch(watch, runStateRefLink, true);\n      runStateRefLink(scope.$eval(watch));\n\n      if (!type.clickable) return;\n      hookFn = clickHook(element, $state, $timeout, type, function() { return def; });\n      element[element.on ? 'on' : 'bind'](\"click\", hookFn);\n      scope.$on('$destroy', function() {\n        element[element.off ? 'off' : 'unbind'](\"click\", hookFn);\n      });\n    }\n  };\n}\n\n\n/**\n * @ngdoc directive\n * @name ui.router.state.directive:ui-sref-active\n *\n * @requires ui.router.state.$state\n * @requires ui.router.state.$stateParams\n * @requires $interpolate\n *\n * @restrict A\n *\n * @description\n * A directive working alongside ui-sref to add classes to an element when the\n * related ui-sref directive's state is active, and removing them when it is inactive.\n * The primary use-case is to simplify the special appearance of navigation menus\n * relying on `ui-sref`, by having the \"active\" state's menu button appear different,\n * distinguishing it from the inactive menu items.\n *\n * ui-sref-active can live on the same element as ui-sref or on a parent element. The first\n * ui-sref-active found at the same level or above the ui-sref will be used.\n *\n * Will activate when the ui-sref's target state or any child state is active. If you\n * need to activate only when the ui-sref target state is active and *not* any of\n * it's children, then you will use\n * {@link ui.router.state.directive:ui-sref-active-eq ui-sref-active-eq}\n *\n * @example\n * Given the following template:\n * <pre>\n * <ul>\n *   <li ui-sref-active=\"active\" class=\"item\">\n *     <a href ui-sref=\"app.user({user: 'bilbobaggins'})\">@bilbobaggins</a>\n *   </li>\n * </ul>\n * </pre>\n *\n *\n * When the app state is \"app.user\" (or any children states), and contains the state parameter \"user\" with value \"bilbobaggins\",\n * the resulting HTML will appear as (note the 'active' class):\n * <pre>\n * <ul>\n *   <li ui-sref-active=\"active\" class=\"item active\">\n *     <a ui-sref=\"app.user({user: 'bilbobaggins'})\" href=\"/users/bilbobaggins\">@bilbobaggins</a>\n *   </li>\n * </ul>\n * </pre>\n *\n * The class name is interpolated **once** during the directives link time (any further changes to the\n * interpolated value are ignored).\n *\n * Multiple classes may be specified in a space-separated format:\n * <pre>\n * <ul>\n *   <li ui-sref-active='class1 class2 class3'>\n *     <a ui-sref=\"app.user\">link</a>\n *   </li>\n * </ul>\n * </pre>\n *\n * It is also possible to pass ui-sref-active an expression that evaluates\n * to an object hash, whose keys represent active class names and whose\n * values represent the respective state names/globs.\n * ui-sref-active will match if the current active state **includes** any of\n * the specified state names/globs, even the abstract ones.\n *\n * @Example\n * Given the following template, with \"admin\" being an abstract state:\n * <pre>\n * <div ui-sref-active=\"{'active': 'admin.*'}\">\n *   <a ui-sref-active=\"active\" ui-sref=\"admin.roles\">Roles</a>\n * </div>\n * </pre>\n *\n * When the current state is \"admin.roles\" the \"active\" class will be applied\n * to both the <div> and <a> elements. It is important to note that the state\n * names/globs passed to ui-sref-active shadow the state provided by ui-sref.\n */\n\n/**\n * @ngdoc directive\n * @name ui.router.state.directive:ui-sref-active-eq\n *\n * @requires ui.router.state.$state\n * @requires ui.router.state.$stateParams\n * @requires $interpolate\n *\n * @restrict A\n *\n * @description\n * The same as {@link ui.router.state.directive:ui-sref-active ui-sref-active} but will only activate\n * when the exact target state used in the `ui-sref` is active; no child states.\n *\n */\n$StateRefActiveDirective.$inject = ['$state', '$stateParams', '$interpolate'];\nfunction $StateRefActiveDirective($state, $stateParams, $interpolate) {\n  return  {\n    restrict: \"A\",\n    controller: ['$scope', '$element', '$attrs', '$timeout', function ($scope, $element, $attrs, $timeout) {\n      var states = [], activeClasses = {}, activeEqClass, uiSrefActive;\n\n      // There probably isn't much point in $observing this\n      // uiSrefActive and uiSrefActiveEq share the same directive object with some\n      // slight difference in logic routing\n      activeEqClass = $interpolate($attrs.uiSrefActiveEq || '', false)($scope);\n\n      try {\n        uiSrefActive = $scope.$eval($attrs.uiSrefActive);\n      } catch (e) {\n        // Do nothing. uiSrefActive is not a valid expression.\n        // Fall back to using $interpolate below\n      }\n      uiSrefActive = uiSrefActive || $interpolate($attrs.uiSrefActive || '', false)($scope);\n      if (isObject(uiSrefActive)) {\n        forEach(uiSrefActive, function(stateOrName, activeClass) {\n          if (isString(stateOrName)) {\n            var ref = parseStateRef(stateOrName, $state.current.name);\n            addState(ref.state, $scope.$eval(ref.paramExpr), activeClass);\n          }\n        });\n      }\n\n      // Allow uiSref to communicate with uiSrefActive[Equals]\n      this.$$addStateInfo = function (newState, newParams) {\n        // we already got an explicit state provided by ui-sref-active, so we\n        // shadow the one that comes from ui-sref\n        if (isObject(uiSrefActive) && states.length > 0) {\n          return;\n        }\n        var deregister = addState(newState, newParams, uiSrefActive);\n        update();\n        return deregister;\n      };\n\n      $scope.$on('$stateChangeSuccess', update);\n\n      function addState(stateName, stateParams, activeClass) {\n        var state = $state.get(stateName, stateContext($element));\n        var stateHash = createStateHash(stateName, stateParams);\n\n        var stateInfo = {\n          state: state || { name: stateName },\n          params: stateParams,\n          hash: stateHash\n        };\n\n        states.push(stateInfo);\n        activeClasses[stateHash] = activeClass;\n\n        return function removeState() {\n          var idx = states.indexOf(stateInfo);\n          if (idx !== -1) states.splice(idx, 1);\n        };\n      }\n\n      /**\n       * @param {string} state\n       * @param {Object|string} [params]\n       * @return {string}\n       */\n      function createStateHash(state, params) {\n        if (!isString(state)) {\n          throw new Error('state should be a string');\n        }\n        if (isObject(params)) {\n          return state + toJson(params);\n        }\n        params = $scope.$eval(params);\n        if (isObject(params)) {\n          return state + toJson(params);\n        }\n        return state;\n      }\n\n      // Update route state\n      function update() {\n        for (var i = 0; i < states.length; i++) {\n          if (anyMatch(states[i].state, states[i].params)) {\n            addClass($element, activeClasses[states[i].hash]);\n          } else {\n            removeClass($element, activeClasses[states[i].hash]);\n          }\n\n          if (exactMatch(states[i].state, states[i].params)) {\n            addClass($element, activeEqClass);\n          } else {\n            removeClass($element, activeEqClass);\n          }\n        }\n      }\n\n      function addClass(el, className) { $timeout(function () { el.addClass(className); }); }\n      function removeClass(el, className) { el.removeClass(className); }\n      function anyMatch(state, params) { return $state.includes(state.name, params); }\n      function exactMatch(state, params) { return $state.is(state.name, params); }\n\n      update();\n    }]\n  };\n}\n\nangular.module('ui.router.state')\n  .directive('uiSref', $StateRefDirective)\n  .directive('uiSrefActive', $StateRefActiveDirective)\n  .directive('uiSrefActiveEq', $StateRefActiveDirective)\n  .directive('uiState', $StateRefDynamicDirective);\n\n/**\n * @ngdoc filter\n * @name ui.router.state.filter:isState\n *\n * @requires ui.router.state.$state\n *\n * @description\n * Translates to {@link ui.router.state.$state#methods_is $state.is(\"stateName\")}.\n */\n$IsStateFilter.$inject = ['$state'];\nfunction $IsStateFilter($state) {\n  var isFilter = function (state, params) {\n    return $state.is(state, params);\n  };\n  isFilter.$stateful = true;\n  return isFilter;\n}\n\n/**\n * @ngdoc filter\n * @name ui.router.state.filter:includedByState\n *\n * @requires ui.router.state.$state\n *\n * @description\n * Translates to {@link ui.router.state.$state#methods_includes $state.includes('fullOrPartialStateName')}.\n */\n$IncludedByStateFilter.$inject = ['$state'];\nfunction $IncludedByStateFilter($state) {\n  var includesFilter = function (state, params, options) {\n    return $state.includes(state, params, options);\n  };\n  includesFilter.$stateful = true;\n  return  includesFilter;\n}\n\nangular.module('ui.router.state')\n  .filter('isState', $IsStateFilter)\n  .filter('includedByState', $IncludedByStateFilter);\n})(window, window.angular);\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = angularUiRouter;\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = window.angular;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/angular-ui-router/release/angular-ui-router.js\n// module id = 53\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\nvar UninitializedValue = (function () {\n    function UninitializedValue() {\n    }\n    return UninitializedValue;\n}());\nexports.UninitializedValue = UninitializedValue;\nvar uninitialized = new UninitializedValue();\n/**\n * Represents a basic change from a previous to a new value.\n */\nvar SimpleChange = (function () {\n    function SimpleChange(previousValue, currentValue) {\n        this.previousValue = previousValue;\n        this.currentValue = currentValue;\n    }\n    /**\n     * Check whether the new value is the first value assigned.\n     */\n    SimpleChange.prototype.isFirstChange = function () { return this.previousValue === uninitialized; };\n    return SimpleChange;\n}());\nexports.SimpleChange = SimpleChange;\nvar ChangeDetectionUtil = (function () {\n    function ChangeDetectionUtil() {\n    }\n    ChangeDetectionUtil.simpleChange = function (previousValue, currentValue) {\n        return new SimpleChange(previousValue, currentValue);\n    };\n    ChangeDetectionUtil.isOnPushChangeDetectionStrategy = function (changeDetectionStrategy) {\n        return lang_1.isPresent(changeDetectionStrategy) && changeDetectionStrategy === 0 /* OnPush */;\n    };\n    return ChangeDetectionUtil;\n}());\nChangeDetectionUtil.uninitialized = uninitialized;\nexports.ChangeDetectionUtil = ChangeDetectionUtil;\n//# sourceMappingURL=change_detection_util.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/change_detection/change_detection_util.js\n// module id = 54\n// module chunks = 0","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar decorators_1 = require(\"../di/decorators\");\nvar ChangeDetectorRef = ChangeDetectorRef_1 = (function () {\n    function ChangeDetectorRef($scope) {\n        this.$scope = $scope;\n    }\n    ChangeDetectorRef.create = function ($scope) {\n        return new ChangeDetectorRef_1($scope);\n    };\n    /**\n     * Marks all {@link ChangeDetectionStrategy#OnPush} ancestors as to be checked.\n     *\n     * <!-- TODO: Add a link to a chapter on OnPush components -->\n     *\n     * ### Example ([live demo](http://plnkr.co/edit/GC512b?p=preview))\n     *\n     * ```typescript\n     * @Component({\n     *   selector: 'cmp',\n     *   changeDetection: ChangeDetectionStrategy.OnPush,\n     *   template: `Number of ticks: {{numberOfTicks}}`\n     * })\n     * class Cmp {\n     *   numberOfTicks = 0;\n     *\n     *   constructor(ref: ChangeDetectorRef) {\n     *     setInterval(() => {\n     *       this.numberOfTicks ++\n     *       // the following is required, otherwise the view will not be updated\n     *       this.ref.markForCheck();\n     *     }, 1000);\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'app',\n     *   changeDetection: ChangeDetectionStrategy.OnPush,\n     *   template: `\n     *     <cmp><cmp>\n     *   `,\n     *   directives: [Cmp]\n     * })\n     * class App {\n     * }\n     *\n     * bootstrap(App);\n     * ```\n     */\n    ChangeDetectorRef.prototype.markForCheck = function () { this.$scope.$applyAsync(); };\n    /**\n     * Detaches the change detector from the change detector tree.\n     *\n     * The detached change detector will not be checked until it is reattached.\n     *\n     * This can also be used in combination with {@link ChangeDetectorRef#detectChanges} to implement\n     * local change\n     * detection checks.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n     *\n     * ### Example\n     *\n     * The following example defines a component with a large list of readonly data.\n     * Imagine the data changes constantly, many times per second. For performance reasons,\n     * we want to check and update the list every five seconds. We can do that by detaching\n     * the component's change detector and doing a local check every five seconds.\n     *\n     * ```typescript\n     * class DataProvider {\n     *   // in a real application the returned data will be different every time\n     *   get data() {\n     *     return [1,2,3,4,5];\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'giant-list',\n     *   template: `\n     *     <li *ngFor=\"let d of dataProvider.data\">Data {{d}}</lig>\n     *   `,\n     *   directives: [NgFor]\n     * })\n     * class GiantList {\n     *   constructor(private ref: ChangeDetectorRef, private dataProvider:DataProvider) {\n     *     ref.detach();\n     *     setInterval(() => {\n     *       this.ref.detectChanges();\n     *     }, 5000);\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'app',\n     *   providers: [DataProvider],\n     *   template: `\n     *     <giant-list><giant-list>\n     *   `,\n     *   directives: [GiantList]\n     * })\n     * class App {\n     * }\n     *\n     * bootstrap(App);\n     * ```\n     */\n    ChangeDetectorRef.prototype.detach = function () { disconnectScope(this.$scope); };\n    /**\n     * Checks the change detector and its children.\n     *\n     * This can also be used in combination with {@link ChangeDetectorRef#detach} to implement local\n     * change detection\n     * checks.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n     *\n     * ### Example\n     *\n     * The following example defines a component with a large list of readonly data.\n     * Imagine, the data changes constantly, many times per second. For performance reasons,\n     * we want to check and update the list every five seconds.\n     *\n     * We can do that by detaching the component's change detector and doing a local change detection\n     * check\n     * every five seconds.\n     *\n     * See {@link ChangeDetectorRef#detach} for more information.\n     */\n    ChangeDetectorRef.prototype.detectChanges = function () { this.$scope.$digest(); };\n    /**\n     * Checks the change detector and its children, and throws if any changes are detected.\n     *\n     * This is used in development mode to verify that running change detection doesn't introduce\n     * other changes.\n     */\n    ChangeDetectorRef.prototype.checkNoChanges = function () { };\n    /**\n     * Reattach the change detector to the change detector tree.\n     *\n     * This also marks OnPush ancestors as to be checked. This reattached change detector will be\n     * checked during the next change detection run.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     *\n     * ### Example ([live demo](http://plnkr.co/edit/aUhZha?p=preview))\n     *\n     * The following example creates a component displaying `live` data. The component will detach\n     * its change detector from the main change detector tree when the component's live property\n     * is set to false.\n     *\n     * ```typescript\n     * class DataProvider {\n     *   data = 1;\n     *\n     *   constructor() {\n     *     setInterval(() => {\n     *       this.data = this.data * 2;\n     *     }, 500);\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'live-data',\n     *   inputs: ['live'],\n     *   template: `Data: {{dataProvider.data}}`\n     * })\n     * class LiveData {\n     *   constructor(private ref: ChangeDetectorRef, private dataProvider:DataProvider) {}\n     *\n     *   set live(value) {\n     *     if (value)\n     *       this.ref.reattach();\n     *     else\n     *       this.ref.detach();\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'app',\n     *   providers: [DataProvider],\n     *   template: `\n     *     Live Update: <input type=\"checkbox\" [(ngModel)]=\"live\">\n     *     <live-data [live]=\"live\"><live-data>\n     *   `,\n     *   directives: [LiveData, FORM_DIRECTIVES]\n     * })\n     * class App {\n     *   live = true;\n     * }\n     *\n     * bootstrap(App);\n     * ```\n     */\n    ChangeDetectorRef.prototype.reattach = function () { reconnectScope(this.$scope); };\n    return ChangeDetectorRef;\n}());\nChangeDetectorRef = ChangeDetectorRef_1 = __decorate([\n    decorators_1.Injectable('changeDetectorRef'),\n    __metadata(\"design:paramtypes\", [Object])\n], ChangeDetectorRef);\nexports.ChangeDetectorRef = ChangeDetectorRef;\n// Stop watchers and events from firing on a scope without destroying it,\n// by disconnecting it from its parent and its siblings' linked lists.\nfunction disconnectScope(scope) {\n    if (!scope)\n        return;\n    // we can't destroy the root scope or a scope that has been already destroyed\n    if (scope.$root === scope)\n        return;\n    if (scope.$$destroyed)\n        return;\n    var parent = scope.$parent;\n    scope.$$disconnected = true;\n    // See Scope.$destroy\n    if (parent.$$childHead === scope)\n        parent.$$childHead = scope.$$nextSibling;\n    if (parent.$$childTail === scope)\n        parent.$$childTail = scope.$$prevSibling;\n    if (scope.$$prevSibling)\n        scope.$$prevSibling.$$nextSibling = scope.$$nextSibling;\n    if (scope.$$nextSibling)\n        scope.$$nextSibling.$$prevSibling = scope.$$prevSibling;\n    scope.$$nextSibling = scope.$$prevSibling = null;\n}\n// Undo the effects of disconnectScope above.\nfunction reconnectScope(scope) {\n    if (!scope)\n        return;\n    // we can't disconnect the root node or scope already disconnected\n    if (scope.$root === scope)\n        return;\n    if (!scope.$$disconnected)\n        return;\n    var child = scope;\n    var parent = child.$parent;\n    child.$$disconnected = false;\n    // See Scope.$new for this logic...\n    child.$$prevSibling = parent.$$childTail;\n    if (parent.$$childHead) {\n        parent.$$childTail.$$nextSibling = child;\n        parent.$$childTail = child;\n    }\n    else {\n        parent.$$childHead = parent.$$childTail = child;\n    }\n}\nvar ChangeDetectorRef_1;\n//# sourceMappingURL=change_detector_ref.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/change_detection/change_detector_ref.js\n// module id = 55\n// module chunks = 0","\"use strict\";\nvar metadata_1 = require(\"./metadata\");\nvar decorators_1 = require(\"../util/decorators\");\n/**\n * Factory for creating {@link InjectMetadata}.\n */\nexports.Inject = decorators_1.makeParamDecorator(metadata_1.InjectMetadata, metadata_1.InjectMetadata.paramDecoratorForNonConstructor);\n/**\n * Factory for creating {@link OptionalMetadata}.\n */\nexports.Optional = decorators_1.makeParamDecorator(metadata_1.OptionalMetadata);\n/**\n * Factory for creating {@link InjectableMetadata}.\n */\nexports.Injectable = decorators_1.makeDecorator(metadata_1.InjectableMetadata);\n/**\n * Factory for creating {@link SelfMetadata}.\n */\nexports.Self = decorators_1.makeParamDecorator(metadata_1.SelfMetadata);\n/**\n * Factory for creating {@link HostMetadata}.\n */\nexports.Host = decorators_1.makeParamDecorator(metadata_1.HostMetadata);\n/**\n * Factory for creating {@link SkipSelfMetadata}.\n */\nexports.SkipSelf = decorators_1.makeParamDecorator(metadata_1.SkipSelfMetadata);\n//# sourceMappingURL=decorators.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/di/decorators.js\n// module id = 56\n// module chunks = 0","\"use strict\";\n/**\n * Creates a token that can be used in a DI Provider.\n *\n * ### Example ([live demo](http://plnkr.co/edit/Ys9ezXpj2Mnoy3Uc8KBp?p=preview))\n *\n * ```typescript\n * var t = new OpaqueToken(\"value\");\n *\n * var injector = Injector.resolveAndCreate([\n *   provide(t, {useValue: \"providedValue\"})\n * ]);\n *\n * expect(injector.get(t)).toEqual(\"providedValue\");\n * ```\n *\n * Using an `OpaqueToken` is preferable to using strings as tokens because of possible collisions\n * caused by multiple providers using the same string as two different tokens.\n *\n * Using an `OpaqueToken` is preferable to using an `Object` as tokens because it provides better\n * error messages.\n */\nvar OpaqueToken = (function () {\n    function OpaqueToken(_desc) {\n        this._desc = _desc;\n    }\n    Object.defineProperty(OpaqueToken.prototype, \"desc\", {\n        get: function () { return this._desc; },\n        enumerable: true,\n        configurable: true\n    });\n    OpaqueToken.prototype.toString = function () { return \"Token \" + this._desc; };\n    return OpaqueToken;\n}());\nexports.OpaqueToken = OpaqueToken;\n//# sourceMappingURL=opaque_token.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/di/opaque_token.js\n// module id = 57\n// module chunks = 0","\"use strict\";\nexports.INPUT_MODE_REGEX = /^(<|=|@)?(\\??)(\\w*)$/;\nexports.BINDING_MODE = Object.freeze({\n    oneWay: '<',\n    twoWay: '=',\n    output: '&',\n    attr: '@',\n    optional: '?'\n});\n//# sourceMappingURL=constants.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/binding/constants.js\n// module id = 58\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar lang_1 = require(\"./lang\");\nvar Subject_1 = require(\"rxjs/Subject\");\n/**\n * Use by directives and components to emit custom Events.\n *\n * ### Examples\n *\n * In the following example, `ZippyComponent` alternatively emits `open` and `close` events when its\n * title gets clicked:\n *\n * ```\n * @Component({\n *   selector: 'zippy',\n *   template: `\n *   <div class=\"zippy\">\n *     <div ng-click=\"$ctrl.toggle()\">Toggle</div>\n *     <div ng-hide=\"!$ctrl.visible\">\n *       <ng-transclude></ng-transclude>\n *     </div>\n *  </div>`\n * })\n * export class ZippyComponent {\n *   visible: boolean = true;\n *\n *   @Output() open = new EventEmitter<boolean>();\n *   @Output() close = new EventEmitter<boolean>();\n *\n *   toggle() {\n *     this.visible = !this.visible;\n *     if (this.visible) {\n *       this.open.emit( this.visible );\n *     } else {\n *       this.close.emit( this.visible );\n *     }\n *   }\n * }\n * ```\n *\n * Use Rx.Observable but provides an adapter to make it work as specified here:\n * https://github.com/jhusain/observable-spec\n *\n * Once a reference implementation of the spec is available, switch to it.\n */\nvar EventEmitter = (function (_super) {\n    __extends(EventEmitter, _super);\n    /**\n     * Creates an instance of [EventEmitter], which depending on [isAsync],\n     * delivers events synchronously or asynchronously.\n     */\n    function EventEmitter(isAsync) {\n        if (isAsync === void 0) { isAsync = false; }\n        var _this = _super.call(this) || this;\n        /** @internal */\n        _this._ngExpressionBindingCb = lang_1.noop;\n        _this.__isAsync = isAsync;\n        return _this;\n    }\n    /** @internal */\n    EventEmitter.prototype.wrapNgExpBindingToEmitter = function (cb) {\n        //used in reassignBindingsAndCreteEventEmitters to attach the original @Output binding to the instance new EventEmitter\n        this._ngExpressionBindingCb = cb;\n        // this could create memory leaks because the subscription would be never terminated\n        // super.subscribe((newValue)=>this._ngExpressionBindingCb({$event:newValue}));\n    };\n    EventEmitter.prototype.emit = function (value) {\n        var payload = { $event: value };\n        // push just the value\n        _super.prototype.next.call(this, value);\n        // our & binding needs to be called via { $event: value } because Angular 1 locals\n        this._ngExpressionBindingCb(payload);\n    };\n    EventEmitter.prototype.subscribe = function (generatorOrNext, error, complete) {\n        var schedulerFn /** TODO #9100 */;\n        var errorFn = function (err) { return null; };\n        var completeFn = function () { return null; };\n        if (generatorOrNext && typeof generatorOrNext === 'object') {\n            schedulerFn = this.__isAsync\n                ? function (value /** TODO #9100 */) { setTimeout(function () { return generatorOrNext.next(value); }); }\n                : function (value /** TODO #9100 */) { generatorOrNext.next(value); };\n            if (generatorOrNext.error) {\n                errorFn = this.__isAsync\n                    ? function (err) { setTimeout(function () { return generatorOrNext.error(err); }); }\n                    : function (err) { generatorOrNext.error(err); };\n            }\n            if (generatorOrNext.complete) {\n                completeFn = this.__isAsync\n                    ? function () { setTimeout(function () { return generatorOrNext.complete(); }); }\n                    : function () { generatorOrNext.complete(); };\n            }\n        }\n        else {\n            schedulerFn = this.__isAsync\n                ? function (value /** TODO #9100 */) { setTimeout(function () { return generatorOrNext(value); }); }\n                : function (value /** TODO #9100 */) { generatorOrNext(value); };\n            if (error) {\n                errorFn = this.__isAsync ? function (err) { setTimeout(function () { return error(err); }); } : function (err) { error(err); };\n            }\n            if (complete) {\n                completeFn = this.__isAsync ? function () { setTimeout(function () { return complete(); }); } : function () { complete(); };\n            }\n        }\n        return _super.prototype.subscribe.call(this, schedulerFn, errorFn, completeFn);\n    };\n    return EventEmitter;\n}(Subject_1.Subject));\nexports.EventEmitter = EventEmitter;\n//# sourceMappingURL=async.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/facade/async.js\n// module id = 59\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar lang_1 = require(\"./lang\");\nvar BaseException = (function (_super) {\n    __extends(BaseException, _super);\n    function BaseException(message) {\n        if (message === void 0) { message = \"--\"; }\n        var _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.stack = new Error(message).stack;\n        return _this;\n    }\n    BaseException.prototype.toString = function () { return this.message; };\n    return BaseException;\n}(Error));\nexports.BaseException = BaseException;\nfunction getErrorMsg(typeOrFunc, msg) {\n    return \"\\n      \" + lang_1.getFuncName(typeOrFunc) + \":\\n      ===========================\\n      \" + msg + \"\\n    \";\n}\nexports.getErrorMsg = getErrorMsg;\n//# sourceMappingURL=exceptions.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/facade/exceptions.js\n// module id = 60\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"./lang\");\nvar _kebabCase = _caseTransformerFactory('-');\nvar _snakeCase = _caseTransformerFactory('_');\nvar StringWrapper = (function () {\n    function StringWrapper() {\n    }\n    StringWrapper.fromCharCode = function (code) { return String.fromCharCode(code); };\n    StringWrapper.charCodeAt = function (s, index) { return s.charCodeAt(index); };\n    StringWrapper.split = function (s, regExp) { return s.split(regExp); };\n    StringWrapper.equals = function (s, s2) { return s === s2; };\n    StringWrapper.stripLeft = function (s, charVal) {\n        if (s && s.length) {\n            var pos = 0;\n            for (var i = 0; i < s.length; i++) {\n                if (s[i] != charVal)\n                    break;\n                pos++;\n            }\n            s = s.substring(pos);\n        }\n        return s;\n    };\n    StringWrapper.stripRight = function (s, charVal) {\n        if (s && s.length) {\n            var pos = s.length;\n            for (var i = s.length - 1; i >= 0; i--) {\n                if (s[i] != charVal)\n                    break;\n                pos--;\n            }\n            s = s.substring(0, pos);\n        }\n        return s;\n    };\n    StringWrapper.replace = function (s, from, replace) {\n        return s.replace(from, replace);\n    };\n    StringWrapper.replaceAll = function (s, from, replace) {\n        return s.replace(from, replace);\n    };\n    StringWrapper.slice = function (s, from, to) {\n        if (from === void 0) { from = 0; }\n        if (to === void 0) { to = null; }\n        return s.slice(from, to === null\n            ? undefined\n            : to);\n    };\n    StringWrapper.replaceAllMapped = function (s, from, cb) {\n        return s.replace(from, function () {\n            var matches = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                matches[_i] = arguments[_i];\n            }\n            // Remove offset & string from the result array\n            matches.splice(-2, 2);\n            // The callback receives match, p1, ..., pn\n            return cb(matches);\n        });\n    };\n    StringWrapper.compare = function (a, b) {\n        if (a < b) {\n            return -1;\n        }\n        else if (a > b) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    };\n    StringWrapper.includes = function (str, searchString, position) {\n        if (position === void 0) { position = 0; }\n        if (String.prototype.includes) {\n            return str.includes(searchString, position);\n        }\n        return str.indexOf(searchString, position) === position;\n    };\n    StringWrapper.startsWith = function (str, searchString, position) {\n        if (position === void 0) { position = 0; }\n        if (String.prototype.startsWith) {\n            return str.startsWith(searchString, position);\n        }\n        return str.indexOf(searchString, position) === position;\n    };\n    StringWrapper.endsWith = function (str, searchString, position) {\n        if (String.prototype.endsWith) {\n            return str.endsWith(searchString, position);\n        }\n        var subjectString = str.toString();\n        if (!lang_1.isNumber(position) || !isFinite(position)\n            || Math.floor(position) !== position || position > subjectString.length) {\n            position = subjectString.length;\n        }\n        position -= searchString.length;\n        var lastIndex = subjectString.indexOf(searchString, position);\n        return lastIndex !== -1 && lastIndex === position;\n    };\n    StringWrapper.kebabCase = function (name) {\n        return _kebabCase(name);\n    };\n    StringWrapper.snakeCase = function (name) {\n        return _snakeCase(name);\n    };\n    return StringWrapper;\n}());\nexports.StringWrapper = StringWrapper;\nfunction _caseTransformerFactory(separator) {\n    var SNAKE_CASE_REGEXP = /[A-Z]/g;\n    return _caseTransform;\n    function _caseTransform(name) {\n        return name.replace(SNAKE_CASE_REGEXP, function (match, offset) {\n            return (offset\n                ? separator\n                : '') + match.toLowerCase();\n        });\n    }\n}\n//# sourceMappingURL=primitives.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/facade/primitives.js\n// module id = 61\n// module chunks = 0","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\"use strict\";\n/**\n * @whatItDoes Represents a type that a Component or other object is instances of.\n *\n * @description\n *\n * An example of a `Type` is `MyCustomComponent` class, which in JavaScript is be represented by\n * the `MyCustomComponent` constructor function.\n *\n * @stable\n */\nexports.Type = Function;\n//# sourceMappingURL=type.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/facade/type.js\n// module id = 62\n// module chunks = 0","\"use strict\";\nexports.empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) { throw err; },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/Observer.js\n// module id = 63\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar isFunction_1 = require('./util/isFunction');\nvar Subscription_1 = require('./Subscription');\nvar Observer_1 = require('./Observer');\nvar rxSubscriber_1 = require('./symbol/rxSubscriber');\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    /**\n     * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n     * defined Observer or a `next` callback function.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     */\n    function Subscriber(destinationOrNext, error, complete) {\n        _super.call(this);\n        this.syncErrorValue = null;\n        this.syncErrorThrown = false;\n        this.syncErrorThrowable = false;\n        this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                this.destination = Observer_1.empty;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    this.destination = Observer_1.empty;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        this.destination = destinationOrNext;\n                        this.destination.add(this);\n                    }\n                    else {\n                        this.syncErrorThrowable = true;\n                        this.destination = new SafeSubscriber(this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                this.syncErrorThrowable = true;\n                this.destination = new SafeSubscriber(this, destinationOrNext, error, complete);\n                break;\n        }\n    }\n    Subscriber.prototype[rxSubscriber_1.$$rxSubscriber] = function () { return this; };\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     */\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    return Subscriber;\n}(Subscription_1.Subscription));\nexports.Subscriber = Subscriber;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parent, observerOrNext, error, complete) {\n        _super.call(this);\n        this._parent = _parent;\n        var next;\n        var context = this;\n        if (isFunction_1.isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            context = observerOrNext;\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (isFunction_1.isFunction(context.unsubscribe)) {\n                this.add(context.unsubscribe.bind(context));\n            }\n            context.unsubscribe = this.unsubscribe.bind(this);\n        }\n        this._context = context;\n        this._next = next;\n        this._error = error;\n        this._complete = complete;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parent = this._parent;\n            if (!_parent.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parent, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parent = this._parent;\n            if (this._error) {\n                if (!_parent.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parent, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parent.syncErrorThrowable) {\n                this.unsubscribe();\n                throw err;\n            }\n            else {\n                _parent.syncErrorValue = err;\n                _parent.syncErrorThrown = true;\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            var _parent = this._parent;\n            if (this._complete) {\n                if (!_parent.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._complete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parent, this._complete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            throw err;\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            parent.syncErrorValue = err;\n            parent.syncErrorThrown = true;\n            return true;\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parent = this._parent;\n        this._context = null;\n        this._parent = null;\n        _parent.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\n//# sourceMappingURL=Subscriber.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/Subscriber.js\n// module id = 64\n// module chunks = 0","\"use strict\";\n// typeof any so that it we don't have to cast when comparing a result to the error object\nexports.errorObject = { e: {} };\n//# sourceMappingURL=errorObject.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/util/errorObject.js\n// module id = 65\n// module chunks = 0","\"use strict\";\nfunction isFunction(x) {\n    return typeof x === 'function';\n}\nexports.isFunction = isFunction;\n//# sourceMappingURL=isFunction.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/util/isFunction.js\n// module id = 66\n// module chunks = 0","//{CODE:CGL06}\r\ndefine([\r\n    './global/_main'\r\n], function () { });\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/di.core.global.js","//{CODE:EUP02}\r\n// di.einvoicing.ui.portal\r\ndefine([\r\n    'angular',\r\n    // Application Angular components\r\n    'appConfig',\r\n    './_run',\r\n    './_states',\r\n\t'./shared/components/_loader',\r\n\t'./portal/_loader',\r\n\t'./welcome/_loader',\r\n\t'./impersonate/_loader',\r\n\t'../../lib/di.core/di.core.spa',\r\n    // External Angular components\r\n\t'angular-animate',\r\n    'angular-ui-router',\r\n    'angular-translate',\r\n    'angular-translate-loader-static-files',\r\n    'angular-local-storage',\r\n\t'valdr',\r\n\t'angular-sanitize',\r\n\t'ng-file-upload',\r\n    'ngIdle',\r\n    'angularModalService',\r\n    'angular-clipboard'\r\n], function (\r\n    ng,\r\n    configLoader,\r\n    runLoader,\r\n    statesLoader,\r\n    componentsLoader,\r\n    portalLoader,\r\n\twelcomeLoader,\r\n\timpersonateLoader,\r\n    diCoreAngularLoader) {\r\n\t'use strict';\r\n\r\n\tvar module = ng.module('di.einvoicing.ui.portal', [\r\n\t\t'ngAnimate',\r\n\t\t'ui.router',\r\n        'pascalprecht.translate',\r\n        'LocalStorageModule',\r\n\t\t'valdr',\r\n\t\t'ngSanitize',\r\n\t\t'ngFileUpload',\r\n        'ngIdle',\r\n        'angularModalService',\r\n        'angular-clipboard'\r\n\t]);\r\n\r\n\tconfigLoader(module);\r\n\trunLoader(module);\r\n\tcomponentsLoader(module);\r\n\tportalLoader(module);\r\n\twelcomeLoader(module);\r\n\timpersonateLoader(module);\r\n\tstatesLoader(module);\r\n\r\n\tdiCoreAngularLoader(module);\r\n\r\n\treturn module;\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.js","/*\n * detect-dom-ready\n * http://github.amexpub.com/modules\n *\n * Copyright (c) 2013 Amex Pub. All rights reserved.\n */\n\n'use strict';\n\nmodule.exports = function(callback){\n    // if ( this.readyBound ) {return;}\n    // this.readyBound = true;\n\n    if(document.addEventListener){\n        document.addEventListener( \"DOMContentLoaded\", function(){\n            //remove listener\n            callback();\n            return;\n        }, false );\n    }\n    else if(document.attachEvent){\n        document.attachEvent(\"onreadystatechange\", function(){\n            if ( document.readyState === \"complete\" ) {\n                //remove listener\n                callback();\n                return;\n            }\n        });\n\n        if ( document.documentElement.doScroll && window === window.top ){\n            try{\n                // If IE is used, use the trick by Diego Perini\n                // http://javascript.nwbox.com/IEContentLoaded/\n                document.documentElement.doScroll(\"left\");\n\n            }\n            catch( error ) {\n                callback();\n                return;\n            }\n            // and execute any waiting functions\n            callback();\n            return;\n        }\n    }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/detect-dom-ready/lib/detect-dom-ready.js\n// module id = 73\n// module chunks = 0","import { Component, Inject, Injectable, Input, Output, EventEmitter, OnChanges } from 'ng-metadata/core';\r\n\r\nimport { AddPartyComponentController } from './add-party.component.controller';\r\n\r\n@Component({\r\n    selector: 'diAddParty',\r\n    templateUrl: 'src/app/portal/parties/add-party.component.html'\r\n})\r\nexport class AddPartyComponent extends AddPartyComponentController {\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/add-party.component.ts","import { load as listLoader } from './list/_loader';\r\nimport { load as sharedLoader } from './shared/_loader';\r\n\r\nexport function load(module) {\r\n    listLoader(module);\r\n    sharedLoader(module);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/contacts/_loader.ts","import { provide } from 'ng-metadata/core';\r\n\r\nimport { ContactListConfigurationService, ContactListComponent } from './index';\r\n\r\nexport function load(module) {\r\n    module.service('contactListConfigurationService', ContactListConfigurationService);\r\n    module.directive(...provide(ContactListComponent));\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/contacts/list/_loader.ts","import { Injectable } from 'ng-metadata/core';\r\n\r\nimport {\r\n    ResourceActionColumns,\r\n    ResourceListConfigurationServiceBase,\r\n    ResourceListColumns,\r\n    ResourceListSortOptions,\r\n    ResourceListTableOptions\r\n} from '../../shared/resource-list-configuration-base.service';\r\n\r\n@Injectable()\r\nexport class ContactListConfigurationService extends ResourceListConfigurationServiceBase {\r\n    private _sortOptions: Array<ResourceListSortOptions>;\r\n    private _columns: Array<ResourceListColumns>;\r\n    private _actionColumns: Array<ResourceActionColumns>;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this._sortOptions = [\r\n            {\r\n                value: 7,\r\n                key: \"contactTypeAsc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.SORT_OPTIONS.CONTACT_TYPE_ASC\"\r\n            },\r\n            {\r\n                value: 8,\r\n                key: \"contactTypeDesc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.SORT_OPTIONS.CONTACT_TYPE_DESC\"\r\n            },\r\n            {\r\n                value: 3,\r\n                key: \"contactNameAsc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.SORT_OPTIONS.CONTACT_NAME_ASC\"\r\n            },\r\n            {\r\n                value: 4,\r\n                key: \"contactNameDesc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.SORT_OPTIONS.CONTACT_NAME_DESC\"\r\n            },\r\n            {\r\n                value: 1,\r\n                key: \"contactEmailAsc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.SORT_OPTIONS.CONTACT_EMAIL_ASC\"\r\n            },\r\n            {\r\n                value: 2,\r\n                key: \"contactEmailDesc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.SORT_OPTIONS.CONTACT_EMAIL_DESC\"\r\n            },\r\n            {\r\n                value: 5,\r\n                key: \"contactTelephoneAsc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.SORT_OPTIONS.CONTACT_TELEPHONE_ASC\"\r\n            },\r\n            {\r\n                value: 6,\r\n                key: \"contactTelephoneDesc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.SORT_OPTIONS.CONTACT_TELEPHONE_DESC\"\r\n            },\r\n            {\r\n                value: 9,\r\n                key: \"contactClassificationAsc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.SORT_OPTIONS.CONTACT_CLASSIFICATION_ASC\"\r\n            },\r\n            {\r\n                value: 10,\r\n                key: \"contactClassificationDesc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.SORT_OPTIONS.CONTACT_CLASSIFICATION_DESC\"\r\n            }\r\n        ];\r\n\r\n        this._columns = [\r\n            {\r\n                field: 'type',\r\n                nameLanguageKey: 'EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.CONTACT_TYPE',\r\n                template: '<span>{{binding.type}}</span>'\r\n            },\r\n            {\r\n                field: 'name',\r\n                nameLanguageKey: 'EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.CONTACT_NAME',\r\n                template: '<span>{{binding.resource.name}}</span>'\r\n            },\r\n            {\r\n                field: 'email',\r\n                nameLanguageKey: 'EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.CONTACT_EMAIL',\r\n                template: '<span>{{binding.resource.email}}</span>'\r\n            },\r\n            {\r\n                field: 'telephoneNumber',\r\n                nameLanguageKey: 'EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.CONTACT_TELEPHONE_NUMBER',\r\n                template: '<span>{{binding.resource.telephoneNumber}}</span>'\r\n            },\r\n            {\r\n                field: 'classification',\r\n                nameLanguageKey: 'EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.CONTACT_CLASSIFICATION',\r\n                template: '<span>{{binding.classification}}</span>'\r\n            }\r\n        ];\r\n\r\n        this._actionColumns = [{\r\n            field: 'actionButtons',\r\n            template: '<di-button ng-if=\"controller.readonly || !binding.isEditable\" image=\"view\" image-colour=\"button\" action=\"controller.viewContact(binding)\"></di-button>\\\r\n                       <di-button ng-if=\"!controller.readonly && binding.isEditable\" image=\"edit\" image-colour=\"button\" action=\"controller.viewContact(binding)\"></di-button>',\r\n            cellClass: 'cell-right'\r\n        }];\r\n    }\r\n\r\n    getSortOptions(): Promise<Array<ResourceListSortOptions>> {\r\n        return Promise.resolve(this._sortOptions);\r\n    }\r\n\r\n    getTableOptions(): Promise<ResourceListTableOptions> {\r\n        let tableOptions: ResourceListTableOptions = super.tableOptions();\r\n        tableOptions.columns = this._columns;\r\n        tableOptions.actionColumns = this._actionColumns;\t\r\n\r\n        return Promise.resolve(tableOptions);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/contacts/list/contact-list-configuration.service.ts","declare var $di: any;\r\ndeclare var _: any;\r\n\r\nlet util = $di.utility.util;\r\n\r\nimport { Component, Inject, Input, Output, EventEmitter, OnChanges } from 'ng-metadata/core';\r\n\r\n@Component({\r\n    selector: 'diContactList',\r\n    templateUrl: 'src/app/portal/parties/contacts/list/contact-list.component.html'\r\n})\r\nexport class ContactListComponent implements OnChanges {\r\n    @Input() boundToObject;\r\n    @Input() tableOptions;\r\n    @Input() sortOptions;\r\n    @Input() readonly;\r\n    @Input() selectedSortItem;\r\n\r\n    @Output() onSortByChanged = new EventEmitter<any>();\r\n    @Output() addNew = new EventEmitter<any>();\r\n    @Output() update = new EventEmitter<any>();\r\n    @Output() remove = new EventEmitter<any>();\r\n    @Output() reloadData = new EventEmitter<void>();\r\n    \r\n    public parties;\r\n    public contacts;\r\n    public sortBy;\r\n    public selectedContact;\r\n    public changed;\r\n\r\n    constructor(\r\n        @Inject('modalWindow') private modalWindow: any,\r\n        @Inject('translator') private translator: any,\r\n        @Inject('$stateParams') private stateParams: any\r\n    ) {\r\n        this.viewContact = this.viewContact.bind(this);\r\n        this.sortByChanged = this.sortByChanged.bind(this);\r\n    }\r\n\r\n    ngOnChanges(changes) {\r\n        if (changes.boundToObject && changes.boundToObject.currentValue) {\r\n            this.translator.whenReady().then(() => {\r\n                this.parties = changes.boundToObject.currentValue.parties;\r\n                this.contacts = _.map(changes.boundToObject.currentValue.items,\r\n                    item => {\r\n                        let contact = _.extend({}, item);\r\n\r\n                        contact.classification = this.getClasification(contact.isGlobal);\r\n                        contact.type = this.getType(contact.party);\r\n                        return contact;\r\n                    });\r\n            });\r\n        }\r\n\r\n        if (changes.sortOptions && changes.sortOptions.currentValue) {\r\n            if (this.stateParams.contactSortOption) {\r\n                this.sortBy = _.find(changes.sortOptions.currentValue,\r\n                    (sortBy) => {\r\n                        return sortBy.value === this.stateParams.contactSortOption;\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    getDefaultSortOption() {\r\n        return _.find(this.sortOptions,\r\n            (option) => {\r\n                return option.key === 'contactEmailAsc';\r\n            });\r\n    }\r\n\r\n    getClasification(isGlobal) {\r\n        if (isGlobal) {\r\n            return this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.PUBLIC');\r\n        } else {\r\n            return this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.PRIVATE');\r\n        }\r\n    }\r\n\r\n    getType(party) {\r\n        if (party.isAccountingCustomer) {\r\n            return this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.FINANCIAL');\r\n        } else {\r\n            return this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.CONTACTS.LIST.TABLE.ORGANISATION');\r\n        }\r\n    }\r\n\r\n    sortByChanged(value) {\r\n        if (this.sortBy && this.sortBy.value === value) {\r\n            return;\r\n        }\r\n\r\n        this.tableOptions.paginationPageNumber = 1;\r\n        this.onSortByChanged.emit(value);\r\n    }\r\n\r\n    viewContact(obj) {\r\n        let model = _.extend({}, obj);\r\n\r\n        let typeOptions = [];\r\n\r\n        if (model.party.isAccountingCustomer) {\r\n            model.party.name = 'Financial';\r\n            typeOptions.push(model.party);\r\n        } else {\r\n            model.party.name = 'Organisation';\r\n            typeOptions.push(model.party);\r\n        }\r\n\r\n        model.allowedTypes = typeOptions;\r\n\r\n        const options = {\r\n            dataModel: model,\r\n\t\t\tcontroller: \"ResourceController\",\r\n            templateUrl: 'src/app/portal/parties/contacts/contact.component.html',\r\n            onDataChanged: this.contactChanged,\r\n            title: obj.isEditable ? 'Edit contact' : 'View contact',\r\n            promptOnCancel: true\r\n        };\r\n\r\n        this.showPopup(options);\r\n    }\r\n\r\n    addContact() {\r\n        this.selectedContact = {\r\n            isUpdatable: true\r\n        }\r\n\r\n        let typeOptions = [];\r\n\r\n        let financialAdded = false;\r\n\r\n        _.each(this.parties,\r\n            (item) => {\r\n                if (item.isAccountingCustomer) {\r\n                    if (financialAdded === false) {\r\n                        item.name = 'Financial';\r\n                        typeOptions.push(item);\r\n\r\n                        financialAdded = true;\r\n                    }\r\n                } else {\r\n                    item.name = 'Organisation';\r\n                    typeOptions.push(item);\r\n                }\r\n            });\r\n\r\n        this.selectedContact.partyId = typeOptions[0].id;\r\n\r\n        const options = {\r\n            dataModel: {\r\n                isNew: true,\r\n                isEditable: true,\r\n                resource: this.selectedContact,\r\n                party: typeOptions[0],\r\n                allowedTypes: typeOptions\r\n            },\r\n\t\t\tcontroller: \"ResourceController\",\r\n            templateUrl: 'src/app/portal/parties/contacts/contact.component.html',\r\n            onDataChanged: this.contactChanged,\r\n            title: 'Add contact',\r\n            promptOnCancel: true\r\n        };\r\n\r\n        this.showPopup(options);\r\n    }\r\n\r\n    contactChanged() {\r\n        this.changed = true;\r\n    }\r\n\r\n    showPopup(options) {\r\n        this.modalWindow.show(options,\r\n            (result) => {\r\n                this.contactSaved(result);\r\n            },\r\n            () => {\r\n                if (this.changed && this.reloadData) {\r\n                    this.reloadData.emit(null);\r\n                }\r\n            },\r\n            (result) => {\r\n                this.contactDeleted(result);\r\n            });\r\n    }\r\n\r\n    contactSaved(contact) {\r\n        const resource = contact.resource;\r\n\r\n        const existing = _.find(this.contacts,\r\n            (item) => {\r\n                return item.resource.id === resource.id;\r\n\r\n            });\r\n\r\n        if (util.isUndefined(existing) === false) {\r\n            if (this.update) {\r\n                this.update.emit(resource);\r\n            }\r\n\r\n        } else {\r\n            if (this.addNew) {\r\n                this.addNew.emit(resource);\r\n            }\r\n        }\r\n    }\r\n\r\n    contactDeleted(contact) {\r\n        const resource = contact.resource;\r\n\r\n        if (this.remove) {\r\n            this.remove.emit(resource);\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/contacts/list/contact-list.component.ts","export * from './contact-list-configuration.service';\r\nexport * from './contact-list.component';\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/contacts/list/index.ts","import { ContactHandlerService, ContactProxy } from './index';\r\n\r\nexport function load(module) {\r\n    module.service('contactHandlerService', ContactHandlerService);\r\n    module.service('contactProxy', ContactProxy);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/contacts/shared/_loader.ts","import { Injectable, Inject } from 'ng-metadata/core';\r\n\r\nimport { ResourceHandlerServiceBase } from '../../shared/resource-handler-base.service';\r\n\r\n@Injectable()\r\nexport class ContactHandlerService extends ResourceHandlerServiceBase {\r\n    public type: string = \"contact\";\r\n\r\n    constructor(\r\n        @Inject('contactProxy') private contactProxy,\r\n        @Inject('contactListConfigurationService') private contactListConfigurationService\r\n    ) {\r\n        super(contactListConfigurationService);\r\n    }\r\n    \r\n    getResourceBook(partyId, forPartyId, sortBy = 1) {\r\n        return this.contactProxy.getContactBook(partyId, forPartyId, (sortBy || {}) || sortBy);\r\n    }\r\n\r\n    addNewResource(resource, forPartyId = null){\r\n        return this.contactProxy.addContactBookEntry(resource, forPartyId);\r\n    }\r\n\r\n    updateResource(resource, resourceId) {\r\n        return this.contactProxy.updateContactBookEntry(resource, resourceId);\r\n    }\r\n\r\n    removeResource(resource, resourceId) {\r\n        return this.contactProxy.removeContactBookEntry(resource, resourceId);\r\n    }\r\n}\r\n\r\nContactHandlerService.prototype.constructor.$inject = ['contactProxy', 'contactListConfigurationService'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/contacts/shared/contact-handler.service.ts","import { Injectable, Inject } from 'ng-metadata/core';\r\n\r\n@Injectable()\r\nexport class ContactProxy {\r\n    constructor(\r\n        @Inject('webApiHttp') private http,\r\n        @Inject('$q') private $q,\r\n        @Inject('urlHelper') private urlHelper\r\n    ) { }\r\n\r\n\tgetContactBook(partyId, contactBookOwnerId, sortOption) {\r\n\t\tvar requestProperties = {\r\n\t\t\tpartyId: partyId,\r\n\t\t\tcontactBookOwnerId: contactBookOwnerId,\r\n\t\t\tsortOption: sortOption\r\n\t\t};\r\n\r\n\t\tvar requestUrl = this.urlHelper.setParameters('Contact/GetContactBook', requestProperties);\r\n\r\n\t\tvar httpPromise = this.http.get(requestUrl);\r\n\t\tvar newPromise = httpPromise.then(data => {\r\n\t\t\treturn data;\r\n\t\t}, error => {\r\n\t\t\terror.failureReason = 'EINVOICING.PORTAL.PARTIES.CONTACTS.ERRORS.RECEIVE_ERROR';\r\n\t\t\treturn this.$q.reject(error);\r\n\t\t});\r\n\r\n\t\treturn newPromise;\r\n\t}\r\n\r\n\taddContactBookEntry(contact, contactBookOwnerId) {\r\n\t\tvar requestProperties = {\r\n\t\t    partyId: contact.partyId,\r\n\t\t\tcontactBookOwnerId: contactBookOwnerId\r\n\t\t};\r\n\r\n\t\tvar requestUrl = this.urlHelper.setParameters('Contact/AddContactBookEntry', requestProperties);\r\n\t\tvar httpPromise = this.http.post(requestUrl, contact)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t}, error => {\r\n\t\t\t\terror.failureReason = 'EINVOICING.PORTAL.PARTIES.CONTACTS.ERRORS.SAVE_ERROR';\r\n\t\t\t\treturn this.$q.reject(error);\r\n\t\t\t});\r\n\r\n\t\treturn httpPromise;\r\n\t}\r\n\r\n\tupdateContactBookEntry(contact, resourceId) {\r\n\t    var requestProperties = {\r\n\t        contactId: resourceId\r\n\t    };\r\n\r\n\t    var requestUrl = this.urlHelper.setParameters('Contact/UpdateContactBookEntry', requestProperties);\r\n\t    var httpPromise = this.http.post(requestUrl, contact)\r\n\t\t\t.then(data => {\r\n\t\t\t    return data;\r\n\t\t\t}, error => {\r\n\t\t\t    error.failureReason = 'EINVOICING.PORTAL.PARTIES.CONTACTS.ERRORS.UPDATE_ERROR';\r\n\t\t\t    return this.$q.reject(error);\r\n\t\t\t});\r\n\r\n\t    return httpPromise;\r\n\t}\r\n\r\n\tremoveContactBookEntry(contact, resourceId) {\r\n\t    var requestProperties = {\r\n\t        contactId: resourceId\r\n\t    };\r\n\r\n\t    var requestUrl = this.urlHelper.setParameters('Contact/RemoveContactBookEntry', requestProperties);\r\n\t    var httpPromise = this.http.post(requestUrl, contact)\r\n\t\t\t.then(data => {\r\n\t\t\t    return data;\r\n\t\t\t}, error => {\r\n\t\t\t    error.failureReason = 'EINVOICING.PORTAL.PARTIES.CONTACTS.ERRORS.REMOVE_ERROR';\r\n\t\t\t    return this.$q.reject(error);\r\n\t\t\t});\r\n\r\n\t    return httpPromise;\r\n\t}\r\n}\r\n\r\nContactProxy.prototype.constructor.$inject = ['webApiHttp', '$q', 'urlHelper'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/contacts/shared/contact-proxy.service.ts","import { PartyComponent } from './party.component';\r\nimport { AddPartyComponent } from './add-party.component';\r\n\r\nimport { provide } from 'ng-metadata/core';\r\n\r\nexport function load(module) {\r\n    module.directive(...provide(AddPartyComponent));\r\n    module.directive(...provide(PartyComponent));\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/loader.ts","import { load as sharedLoad } from './shared/_loader';\r\nimport { load as listLoad } from './list/_loader';\r\n\r\nexport function load(module) {\r\n    sharedLoad(module);\r\n    listLoad(module);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/locations/_loader.ts","import { LocationListConfigurationService, LocationListComponent } from './index';\r\nimport { provide } from 'ng-metadata/core';\r\n\r\nexport function load(module) {\r\n    module.directive(...provide(LocationListComponent));\r\n    module.service('locationListConfigurationService', LocationListConfigurationService);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/locations/list/_loader.ts","export * from './location-list-configuration.service';\r\nexport * from './location-list.component'\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/locations/list/index.ts","import {\r\n    ResourceActionColumns,\r\n    ResourceListConfigurationServiceBase,\r\n    ResourceListColumns,\r\n    ResourceListSortOptions,\r\n    ResourceListTableOptions\r\n} from '../../shared/resource-list-configuration-base.service';\r\n\r\nimport { Injectable } from 'ng-metadata/core';\r\n\r\n@Injectable()\r\nexport class LocationListConfigurationService extends ResourceListConfigurationServiceBase {\r\n    private _sortOptions: Array<ResourceListSortOptions>;\r\n    private _columns: Array<ResourceListColumns>;\r\n    private _actionColumns: Array<ResourceActionColumns>;\r\n\r\n    constructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis._sortOptions = [\r\n\t\t\t{\r\n\t\t\t\tvalue: 1,\r\n\t\t\t\tkey: \"locationTypeAsc\",\r\n\t\t\t\tlabel: \"EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.SORT_OPTIONS.LOCATION_TYPE_ASC\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: 2,\r\n\t\t\t\tkey: \"locationTypeDesc\",\r\n\t\t\t\tlabel: \"EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.SORT_OPTIONS.LOCATION_TYPE_DESC\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: 3,\r\n\t\t\t\tkey: \"addressNameAsc\",\r\n\t\t\t\tlabel: \"EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.SORT_OPTIONS.ADDRESS_NAME_ASC\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: 4,\r\n\t\t\t\tkey: \"addressNameDesc\",\r\n\t\t\t\tlabel: \"EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.SORT_OPTIONS.ADDRESS_NAME_DESC\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: 5,\r\n\t\t\t\tkey: \"addressAsc\",\r\n\t\t\t\tlabel: \"EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.SORT_OPTIONS.ADDRESS_ASC\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: 6,\r\n\t\t\t\tkey: \"addressDesc\",\r\n\t\t\t\tlabel: \"EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.SORT_OPTIONS.ADDRESS_DESC\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: 7,\r\n\t\t\t\tkey: \"addressIdentifierAsc\",\r\n\t\t\t\tlabel: \"EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.SORT_OPTIONS.ADDRESS_IDENTIFIER_ASC\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: 8,\r\n\t\t\t\tkey: \"addressIdentifierDesc\",\r\n\t\t\t\tlabel: \"EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.SORT_OPTIONS.ADDRESS_IDENTIFIER_DESC\"\r\n\t\t\t},\r\n            {\r\n                value: 9,\r\n                key: \"classificationAsc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.SORT_OPTIONS.CLASSIFICATION_ASC\"\r\n            },\r\n\t\t\t{\r\n\t\t\t    value: 10,\r\n\t\t\t    key: \"classificationDesc\",\r\n\t\t\t    label: \"EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.SORT_OPTIONS.CLASSIFICATION_DESC\"\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tthis._columns = [\r\n\t\t\t{\r\n\t\t\t\tfield: 'locationType',\r\n\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.LOCATION_TYPE',\r\n\t\t\t\ttemplate: '<span>{{binding.resource.locationTypeTranslated}}</span>'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tfield: 'name',\r\n\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.ADDRESS_NAME',\r\n\t\t\t\ttemplate: '<span>{{binding.resource.name}}</span>'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tfield: 'address',\r\n\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.FORMATTED_ADDRESS',\r\n\t\t\t\ttemplate: '<span>{{binding.resource.formatted}}</span>'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tfield: 'identifier',\r\n\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.ADDRESS_IDENTIFIER',\r\n\t\t\t\ttemplate: '<span>{{binding.resource.identifier.displayValue}}</span>'\r\n\t\t\t},\r\n            {\r\n\t\t\t    field: 'classification',\r\n\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.CLASSIFICATION',\r\n\t\t\t\ttemplate: '<span>{{binding.classification}}</span>'\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tthis._actionColumns = [{\r\n\t\t    field: 'actionButtons',\r\n\t\t    template: '<di-button ng-if=\"controller.readonly || !binding.isEditable\" image=\"view\" image-colour=\"button\" action=\"controller.viewLocation(binding)\"></di-button>\\\r\n                       <di-button ng-if=\"!controller.readonly && binding.isEditable\" image=\"edit\" image-colour=\"button\" action=\"controller.viewLocation(binding)\"></di-button>',\r\n\t\t    cellClass: 'cell-right'\r\n\t\t}];\r\n\t}\r\n\r\n    getSortOptions(): Promise<Array<ResourceListSortOptions>> {\r\n        return Promise.resolve(this._sortOptions);\r\n    }\r\n\r\n    getTableOptions(): Promise<ResourceListTableOptions> {\r\n        let tableOptions: ResourceListTableOptions = super.tableOptions();\r\n        tableOptions.columns = this._columns;\r\n        tableOptions.actionColumns = this._actionColumns;\r\n\r\n        return Promise.resolve(tableOptions);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/locations/list/location-list-configuration.service.ts","declare var $di: any;\r\ndeclare var _: any;\r\n\r\nlet util = $di.utility.util;\r\n\r\nimport { LocationComponentController } from '../location.component.controller';\r\n\r\nimport { Component, Inject, Input, Output, EventEmitter, OnInit, OnChanges } from 'ng-metadata/core';\r\n\r\n@Component({\r\n    selector: 'diLocationList',\r\n    templateUrl: 'src/app/portal/parties/locations/list/location-list.component.html'\r\n})\r\nexport class LocationListComponent implements OnInit, OnChanges {\r\n    @Input() boundToObject;\r\n    @Input() tableOptions;\r\n    @Input() sortOptions;\r\n    @Input() readonly;\r\n    @Input() selfManagement;\r\n    @Input() partyCodes;\r\n    @Input() selectedSortItem;\r\n\r\n    @Output() onSortByChanged = new EventEmitter<any>();\r\n    @Output() addNew = new EventEmitter<any>();\r\n    @Output() update = new EventEmitter<any>();\r\n    @Output() remove = new EventEmitter<any>();\r\n    @Output() addPartyCode = new EventEmitter<any>();\r\n    @Output() updatePartyCode = new EventEmitter<any>();\r\n    @Output() deletePartyCode = new EventEmitter<any>();\r\n    @Output() reloadData = new EventEmitter<void>();\r\n\r\n    public defaultOptions;\r\n    public parties;\r\n    public locations;\r\n    public sortBy;\r\n    public selectedLocation;\r\n    public typeOptions;\r\n    public canAddNewAddress;\r\n    public changed;\r\n    public countries;\r\n    public deliveryLocationIdentifiers;\r\n\r\n    constructor(\r\n        @Inject('CLIENT_ENUMS') private CLIENT_ENUMS,\r\n        @Inject('enumTranslator') private enumTranslator,\r\n        @Inject('modalWindow') private modalWindow,\r\n        @Inject('staticLookupProxy') private staticLookupProxy,\r\n        @Inject('translator') private translator,\r\n        @Inject('$stateParams') private stateParams,\r\n        @Inject('identifierFactory') private identifierFactory,\r\n        @Inject('partyProxy') private partyProxy\r\n    ) {\r\n        this.countries = [];\r\n        this.deliveryLocationIdentifiers = [];\r\n\r\n        this.viewLocation = this.viewLocation.bind(this);\r\n        this.sortByChanged = this.sortByChanged.bind(this);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.staticLookupProxy.get('Country').then((data) => { this.countries.fill(data); });\r\n\r\n        this.partyProxy.getEnabledSchemes().then((schemes) => {\r\n\r\n            this.defaultOptions = this.identifierFactory.getDefaultOptions(\r\n                schemes[this.CLIENT_ENUMS.partyCodeType.default],\r\n                'deliveryLocationIdentifiers',\r\n                'deliveryLocationIdentifier',\r\n                this.setNewItem);\r\n        });\r\n    }\r\n\r\n    ngOnChanges(changes) {\r\n        if (changes.boundToObject && changes.boundToObject.currentValue) {\r\n            this.translator.whenReady().then(() => {\r\n                this.parties = changes.boundToObject.currentValue.parties;\r\n\r\n                this.locations = _.map(changes.boundToObject.currentValue.items,\r\n                    item => {\r\n                        let location = _.extend({}, item);\r\n\r\n                        location.classification = this.getClasification(location.isGlobal);\r\n\r\n                        if (item && item.resource && item.resource.locationType) {\r\n                            location.resource.locationTypeTranslated = this.enumTranslator.instantTranslate(this.CLIENT_ENUMS.locationType, item.resource.locationType);\r\n                        }\r\n\r\n                        if (item.resource.locationType === this.CLIENT_ENUMS.locationType.Accounting && location.isEditable) {\r\n                            location.isAddressUpdateableOnly = true;\r\n                        } else {\r\n                            location.isAddressUpdateableOnly = false;\r\n                        }\r\n\r\n                        location.resource.identifier = this.identifierFactory.create(item.resource\r\n                            .locationIdentifierScheme,\r\n                            item.resource.locationIdentifierSchemeId,\r\n                            item.resource.locationIdentifier);\r\n\r\n                        return location;\r\n                    });\r\n\r\n                this.setAvailableAddressTypeOptionsToAdd();\r\n            });\r\n        }\r\n\r\n        if (changes.sortOptions && changes.sortOptions.currentValue) {\r\n            if (this.stateParams.locationSortOption) {\r\n                this.sortBy = _.find(changes.sortOptions.currentValue,\r\n                    (sortBy) => {\r\n                        return sortBy.value === this.stateParams.locationSortOption;\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    getClasification(isGlobal) {\r\n        if (isGlobal) {\r\n            return this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.PUBLIC');\r\n        } else {\r\n            return this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.TABLE.PRIVATE');\r\n        }\r\n    }\r\n\r\n    sortByChanged(value) {\r\n        if (this.sortBy && this.sortBy.value === value) {\r\n            return;\r\n        }\r\n\r\n        this.tableOptions.paginationPageNumber = 1;\r\n        this.onSortByChanged.emit(value);\r\n    }\r\n\r\n    countryChanged(country) {\r\n        this.selectedLocation.country = country;\r\n        this.selectedLocation.countryId = country.id;\r\n    }\r\n\r\n    viewLocation(obj) {\r\n        obj.party.partyId = obj.party.id;\r\n        obj.party.name = obj.resource.locationTypeTranslated;\r\n        obj.party.locationType = obj.resource.locationType;\r\n        obj.resource.party = obj.party;\r\n\r\n\r\n        let identifiers = this.defaultOptions;\r\n        obj.identifiers = _.clone(identifiers);\r\n\r\n        let exists = _.find(obj.identifiers,\r\n            (item) => {\r\n                return item.identifier === obj.resource.identifier.identifier;\r\n            });\r\n\r\n        if (util.isNullOrUndefined(exists)) {\r\n            obj.identifiers.push(obj.resource.identifier);\r\n        }\r\n\r\n        obj.partyCodes = this.setObjectIdentifiers(this.partyCodes.items);\r\n\r\n        const options = {\r\n            controller: LocationComponentController,\r\n            templateUrl: 'src/app/portal/parties/locations/location.component.html',\r\n            model: obj,\r\n            addPartyCode: this.addPartyCode,\r\n            updatePartyCode: this.updatePartyCode,\r\n            deletePartyCode: this.deletePartyCode,\r\n            onDataChanged: this.locationChanged,\r\n            onCountryChanged: this.countryChanged,\r\n            title: this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.' + (obj.isEditable ? 'EDIT' : 'VIEW')),\r\n            save: this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.SAVE'),\r\n            cancel: this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.CANCEL'),\r\n            remove: this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.REMOVE')\r\n        }\r\n\r\n        this.showPopup(options);\r\n    }\r\n\r\n    setObjectIdentifiers(items) {\r\n        let partyCodes: any = {};\r\n\r\n        partyCodes.defaultIdentifiers = this.setIdentifiers(items, this.CLIENT_ENUMS.partyCodeType.default);\r\n\r\n        partyCodes.endpointIdentifiers = this.setIdentifiers(items, this.CLIENT_ENUMS.partyCodeType.endpoint);\r\n\r\n        partyCodes.taxIdentifiers = this.setIdentifiers(items, this.CLIENT_ENUMS.partyCodeType.taxReference);\r\n\r\n        return partyCodes;\r\n    }\r\n\r\n    setIdentifiers(items, identifierType) {\r\n        return _.chain(items)\r\n            .filter((item) => {\r\n                return item.code.partyCodeType === identifierType;\r\n            })\r\n            .map((item) => {\r\n                return {\r\n                    id: item.code.id,\r\n                    code: item.code.codeValue,\r\n                    relatedParty: item.code.relatedPartyId,\r\n                    scheme: item.code.scheme,\r\n                    schemeId: item.code.schemeId,\r\n                    type: item.code.partyCodeType\r\n                };\r\n            })\r\n            .value();\r\n    }\r\n\r\n    setAvailableAddressTypeOptionsToAdd() {\r\n        this.typeOptions = [];\r\n\r\n        var isGlobal = this.selfManagement;\r\n\r\n        let businessLocation = _.find(this.locations,\r\n            location => location.isGlobal === isGlobal && location.resource.locationType === this.CLIENT_ENUMS.locationType.Business);\r\n\r\n        let businessAdded = util.isDefined(businessLocation);\r\n\r\n        let accountingLocation = _.find(this.locations,\r\n            location => location.isGlobal === isGlobal && location.resource.locationType === this.CLIENT_ENUMS.locationType.Accounting);\r\n\r\n        let accountingAdded = util.isDefined(accountingLocation);\r\n\r\n        let index = 1;\r\n\r\n        const addTypeOption = (party, locationType) => {\r\n            let partyClone = _.clone(party);\r\n\r\n            partyClone.partyId = party.id;\r\n            partyClone.id = index++;\r\n            partyClone.name = this.enumTranslator.instantTranslate(this.CLIENT_ENUMS.locationType, locationType);\r\n            partyClone.locationType = locationType;\r\n            this.typeOptions.push(partyClone);            \r\n        };\r\n\r\n        _.each(this.parties,\r\n            party => {\r\n                if (party.isAccountingCustomer) {\r\n                    if (accountingAdded === false) {\r\n                        addTypeOption(party, this.CLIENT_ENUMS.locationType.Accounting);\r\n\r\n                        accountingAdded = true;\r\n                    }\r\n                } else {\r\n                    if (party.isBuyer) {\r\n                        addTypeOption(party, this.CLIENT_ENUMS.locationType.Delivery);\r\n                    }\r\n\r\n                    if (businessAdded === false) {\r\n                        addTypeOption(party, this.CLIENT_ENUMS.locationType.Business);\r\n\r\n                        businessAdded = true;\r\n                    }\r\n                }\r\n            });\r\n\r\n        this.canAddNewAddress = this.typeOptions.length > 0;\r\n    }\r\n\r\n    addLocation() {\r\n        if (this.typeOptions.length > 0) {\r\n            this.selectedLocation = {\r\n                country: '',\r\n                countryCode: '',\r\n                countryId: 0,\r\n                isUpdatable: true\r\n            }\r\n\r\n            this.selectedLocation.locationTypeTranslated = this.typeOptions[0].name;\r\n            this.selectedLocation.locationType = this.typeOptions[0].locationType;\r\n            this.selectedLocation.party = this.typeOptions[0];\r\n\r\n            let defaultOptions = this.defaultOptions;\r\n\r\n            let identifiers = defaultOptions;\r\n\r\n            const options = {\r\n                controller: LocationComponentController,\r\n                templateUrl: 'src/app/portal/parties/locations/location.component.html',\r\n                model: {\r\n                    isNew: true,\r\n                    isEditable: true,\r\n                    resource: this.selectedLocation,\r\n                    allowedTypes: this.typeOptions,\r\n                    identifiers: identifiers,\r\n                    party: this.typeOptions[0],\r\n                    partyCodes: this.setObjectIdentifiers(this.partyCodes.items)                    \r\n                },\r\n                onDataChanged: this.locationChanged,\r\n                onCountryChanged: this.countryChanged,\r\n                title: this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.LOCATION.ADD'),\r\n                save: this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.SAVE'),\r\n                cancel: this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.CANCEL'),\r\n                remove: this.translator.instantTranslate('EINVOICING.PORTAL.PARTIES.LOCATIONS.LIST.DELETE')\r\n            }\r\n\r\n            this.showPopup(options);\r\n        }\r\n    }\r\n\r\n    getCountryById(id) {\r\n        let country = _.find(this.countries,\r\n            (country) => {\r\n                return country.id === id;\r\n            });\r\n\r\n        if (util.isUndefined(country)) {\r\n            country = {};\r\n        }\r\n\r\n        return country;\r\n    }\r\n\r\n    locationChanged() {\r\n        this.changed = true;\r\n    }\r\n\r\n    setNewItem(item, arrayName) {\r\n        this[arrayName].splice(2, 0, item);\r\n    }\r\n\r\n    showPopup(options) {\r\n        this.modalWindow.show(options,\r\n            (result) => {\r\n                this.locationSaved(result);\r\n            },\r\n            () => {\r\n                if (this.changed && this.reloadData) {\r\n                    this.reloadData.emit(null);\r\n                }\r\n            },\r\n            (result) => {\r\n                this.locationDeleted(result);\r\n            });\r\n    }\r\n\r\n    locationSaved(location) {\r\n        const resource = location.resource;\r\n\r\n        const existing = _.find(this.locations,\r\n            (item) => {\r\n                return item.resource.id === resource.id;\r\n\r\n            });\r\n\r\n        if (util.isUndefined(existing) === false) {\r\n            if (this.update) {\r\n                this.update.emit(resource);\r\n            }\r\n\r\n        } else {\r\n            if (this.addNew) {\r\n                this.addNew.emit(resource);\r\n            }\r\n        }\r\n    }\r\n\r\n    locationDeleted(location) {\r\n        const resource = location.resource;\r\n\r\n        if (this.remove) {\r\n            this.remove.emit(resource);\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/locations/list/location-list.component.ts","import { Component, Inject, Injectable } from 'ng-metadata/core';\r\nimport { ModalControllerBase } from '../../../../../lib/di.core/spa/controls/modal/modal-base.controller';\r\n\r\n@Injectable()\r\nexport class LocationComponentController extends ModalControllerBase {\r\n    public model;\r\n    public title;\r\n    public save;\r\n    public cancel;\r\n    public remove;\r\n    public options;\r\n    public partyCodeReadonly;\r\n\r\n    constructor(\r\n        @Inject('$element') $element,\r\n        @Inject('promptWindow') promptWindow,\r\n        @Inject('options') options,\r\n        @Inject('close') close\r\n    ) {\r\n        super($element, promptWindow, options, close);\r\n\r\n        this.model = options.model;\r\n        this.title = options.title;\r\n        this.save = options.save;\r\n        this.cancel = options.cancel;\r\n        this.remove = options.remove;\r\n        this.options = options;\r\n\r\n        this.partyCodeReadonly = false;\r\n\r\n        if (this.model.isEditable && this.model.isGlobal) {\r\n            this.partyCodeReadonly = true;\r\n        }\r\n    }\r\n\r\n    addPartyCode(data) {\r\n        this.options.addPartyCode.emit(data);\r\n    }\r\n\r\n    updatePartyCode(data) {\r\n        this.options.updatePartyCode.emit(data);\r\n    }\r\n\r\n    deletePartyCode(data) {\r\n        this.options.deletePartyCode.emit(data);\r\n    }\r\n\r\n    onCountryChanged(country) {\r\n        this.changed = true;\r\n\r\n        if (this.options.onCountryChanged) {\r\n            this.options.onCountryChanged(country);\r\n        }\r\n\r\n        this.onDataChanged();\r\n    }\r\n}\r\nLocationComponentController.prototype.constructor.$inject = ['$element', 'promptWindow', 'options', 'close']\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/locations/location.component.controller.ts","import { LocationProxy, LocationHandlerService } from './index';\r\n\r\nexport function load(module) {\r\n    module.service('locationHandlerService', LocationHandlerService);\r\n    module.service('locationProxy', LocationProxy);   \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/locations/shared/_loader.ts","import { Injectable, Inject } from 'ng-metadata/core';\r\n\r\nimport { ResourceHandlerServiceBase } from '../../shared/resource-handler-base.service';\r\n\r\n@Injectable()\r\nexport class LocationHandlerService extends ResourceHandlerServiceBase {\r\n    public type: string = \"location\";\r\n\r\n    constructor(\r\n        @Inject('locationProxy') private locationProxy,\r\n        @Inject('locationListConfigurationService') private locationListConfigurationService\r\n    ) {\r\n        super(locationListConfigurationService);\r\n    }\r\n\r\n    getResourceBook(partyId, forPartyId, sortBy = 1) {\r\n        return this.locationProxy.getAddressBook(partyId, forPartyId, (sortBy || {}) || sortBy);\r\n    }\r\n\r\n    addNewResource(resource, forPartyId = null) {\r\n        return this.locationProxy.addAddressBookEntry(resource, forPartyId);\r\n    }\r\n\r\n    updateResource(resource, resourceId) {\r\n        return this.locationProxy.updateAddressBookEntry(resource, resourceId);\r\n    }\r\n\r\n    removeResource(resource, resourceId) {\r\n        return this.locationProxy.removeAddressBookEntry(resource, resourceId);\r\n    }\r\n}\r\n\r\nLocationHandlerService.prototype.constructor.$inject = ['locationProxy', 'locationListConfigurationService'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/locations/shared/location-handler.service.ts","import { Injectable, Inject } from 'ng-metadata/core';\r\n\r\n@Injectable()\r\nexport class LocationProxy {\r\n    constructor(\r\n        @Inject('webApiHttp') private http,\r\n        @Inject('$q') private $q,\r\n        @Inject('urlHelper') private urlHelper\r\n    ) { }\r\n\r\n\tgetAddressBook(partyId, addressBookOwnerId, sortOption) {\r\n\t\tvar requestProperties = {\r\n\t\t\tpartyId: partyId,\r\n\t\t\taddressBookOwnerId: addressBookOwnerId,\r\n\t\t\tsortOption: sortOption\r\n\t\t};\r\n\r\n\t\tvar requestUrl = this.urlHelper.setParameters('Location/GetAddressBook', requestProperties);\r\n\r\n\t\tvar httpPromise = this.http.get(requestUrl);\r\n\t\tvar newPromise = httpPromise.then(data => {\r\n\t\t\treturn data;\r\n\t\t}, error => {\r\n\t\t\terror.failureReason = 'EINVOICING.PORTAL.PARTIES.LOCATIONS.ERRORS.RECEIVE_ERROR';\r\n\t\t\treturn this.$q.reject(error);\r\n\t\t});\r\n\r\n\t\treturn newPromise;\r\n\t}\r\n\r\n\taddAddressBookEntry(location, addressBookOwnerId) {\r\n\t    if (location.locationType === 'Accounting' && location.party.accountingCustomerForPartyId === addressBookOwnerId) {\r\n\t        addressBookOwnerId = location.party.partyId;\r\n\t    }\r\n\r\n\t\tvar requestProperties = {\r\n\t\t    partyId: location.party.partyId,\r\n\t\t\taddressBookOwnerId: addressBookOwnerId\r\n\t\t};\r\n\r\n\t\tvar requestUrl = this.urlHelper.setParameters('Location/AddAddressBookEntry', requestProperties);\r\n\t\tvar httpPromise = this.http.post(requestUrl, location)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t}, error => {\r\n\t\t\t\terror.failureReason = 'EINVOICING.PORTAL.PARTIES.LOCATIONS.ERRORS.SAVE_ERROR';\r\n\t\t\t\treturn this.$q.reject(error);\r\n\t\t\t});\r\n\r\n\t\treturn httpPromise;\r\n\t}\r\n\r\n\tupdateAddressBookEntry(location, resourceId) {\r\n\t    var requestProperties = {\r\n\t        locationId: resourceId\r\n\t    };\r\n\r\n\t    var requestUrl = this.urlHelper.setParameters('Location/UpdateAddressBookEntry', requestProperties);\r\n\t    var httpPromise = this.http.post(requestUrl, location)\r\n\t\t\t.then(data => {\r\n\t\t\t    return data;\r\n\t\t\t}, error => {\r\n\t\t\t    error.failureReason = 'EINVOICING.PORTAL.PARTIES.LOCATIONS.ERRORS.UPDATE_ERROR';\r\n\t\t\t    return this.$q.reject(error);\r\n\t\t\t});\r\n\r\n\t    return httpPromise;\r\n\t}\r\n\r\n    removeAddressBookEntry(location, resourceId) {\r\n\t    var requestProperties = {\r\n\t        locationId: resourceId\r\n\t    };\r\n\r\n\t    var requestUrl = this.urlHelper.setParameters('Location/RemoveAddressBookEntry', requestProperties);\r\n\t    var httpPromise = this.http.post(requestUrl, location)\r\n\t\t\t.then(data => {\r\n\t\t\t    return data;\r\n\t\t\t}, error => {\r\n\t\t\t    error.failureReason = 'EINVOICING.PORTAL.PARTIES.LOCATIONS.ERRORS.REMOVE_ERROR';\r\n\t\t\t    return this.$q.reject(error);\r\n\t\t\t});\r\n\r\n\t    return httpPromise;\r\n\t}\r\n}\r\n\r\nLocationProxy.prototype.constructor.$inject = ['webApiHttp', '$q', 'urlHelper'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/locations/shared/location-proxy.service.ts","export * from './party-code.component'\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/party-codes/index.ts","import { PartyCodeComponent } from './index';\r\nimport { provide } from 'ng-metadata/core';\r\n\r\nexport function load(module) {\r\n    module.directive(...provide(PartyCodeComponent));\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/party-codes/loader.ts","declare var $di: any;\r\nvar util:any = $di.utility.util;\r\ndeclare var _: any;\r\n\r\nimport { Component, Input, Output, EventEmitter, Inject } from 'ng-metadata/core';\r\n\r\n@Component({\r\n    selector: 'diPartyCode',\r\n    templateUrl: 'src/app/portal/parties/party-codes/party-code.component.html'\r\n})\r\n    export class PartyCodeComponent{\r\n        @Input() readonly:any;\r\n        @Input() partyCodes:any;\r\n        @Input() relatedParties:any;\r\n        @Input() partyCodeType:any;\r\n        @Input() partyId: any;\r\n\r\n        @Output() addNewCode:EventEmitter<any> = new EventEmitter<any>();\r\n        @Output() updatePartyCode: EventEmitter<any> = new EventEmitter<any>();\r\n        @Output() deletePartyCode: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n        public partyCodeTypeSchemes: any;\r\n        public partyCodeOptions:any;\r\n        constructor(\r\n            @Inject('partyProxy') private partyProxy,\r\n            @Inject('identifierFactory') private identifierFactory,\r\n            @Inject('CLIENT_ENUMS') private clientEnums,\r\n            @Inject('modalWindow') private modalWindow,\r\n            @Inject('elementNotifier') private elementNotifier,\r\n            @Inject('$element') private $element,\r\n            @Inject('$q') private $q)\r\n        {\r\n            this.partyProxy = partyProxy;        \r\n            this.identifierFactory = identifierFactory;\r\n            this.clientEnums = clientEnums;\r\n            this.modalWindow = modalWindow;\r\n            this.elementNotifier = elementNotifier;\r\n            this.$element = $element;\r\n            this.$q = $q;\r\n        }\r\n\r\n        $onInit() {\r\n            this.partyProxy.getEnabledSchemes().then((schemes) => {\r\n                this.partyCodeTypeSchemes = schemes[this.clientEnums.partyCodeType[this.partyCodeType]];\r\n\r\n                this.partyCodeOptions = this.identifierFactory.getDefaultOptions(\r\n                    schemes[this.clientEnums.partyCodeType[this.partyCodeType]],\r\n                    'partyCodes',\r\n                    'identifier',\r\n                    false,\r\n                    null,\r\n                    this.getButtonLabels(),\r\n                    true);\r\n            });\r\n        }\r\n        \r\n        public editPartyCode(partyCode) {\r\n            this.identifierFactory.edit(partyCode, this.partyCodeTypeSchemes, this.relatedParties, 'identifier', (data) => {\r\n                data.partyCodeType = this.clientEnums.partyCodeType[this.partyCodeType];\r\n                this.partyCodes = _.map(this.partyCodes, (partyCode) => {\r\n                    if(partyCode.id === data.id){\r\n                        partyCode.id = data.id;\r\n                        partyCode.code = data.code;\r\n                        partyCode.scheme = data.scheme;\r\n                        partyCode.schemeId = data.schemeId;\r\n                        \r\n                        if(util.isDefined(data.relatedParty)){\r\n                            partyCode.relatedPartyDetails = data.relatedParty;\r\n                            partyCode.relatedParty = data.relatedParty.id;\r\n                            data.relatedPartyId = data.relatedParty.id;                            \r\n                        }\r\n                    }\r\n    \r\n                    return partyCode;\r\n                });\r\n\r\n                this.updatePartyCode.emit({data});\r\n            },\r\n            this.getButtonLabels(),\r\n            true, \r\n            this.partyId, \r\n            this.partyCodeType);\r\n        }\r\n\r\n        public addNewPartyCode() {\r\n                this.partyCodeOptions[1].addNew((data) => {\r\n                    data.type = this.partyCodeType;\r\n                    this.addNewCode.emit({ data });\r\n\r\n                    this.partyCodes.push(data);\r\n                }, \r\n                this.partyId, \r\n                this.partyCodeType);\r\n\r\n            }\r\n\r\n        public delete(partyCode: any): void {\r\n            this.deletePartyCode.emit({partyCode});\r\n        }\r\n\r\n        getButtonLabels() {\r\n            return {\r\n                save: \"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.ACTIONS.SAVE\",\r\n                cancel: \"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.ACTIONS.CANCEL\"\r\n            };\r\n        }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/party-codes/party-code.component.ts","import { PartyCodeHandlerService } from './party-code-handler.service';\r\nimport { PartyCodeConfigurationService } from './party-code-configuration.service';\r\n\r\nexport function load(module) {\r\n    module.service('partyCodeHandlerService', PartyCodeHandlerService);\r\n    module.service('partyCodeConfigurationService', PartyCodeConfigurationService);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/party-codes/shared/_loader.ts","declare var $di: any;\r\ndeclare var _: any;\r\n\r\nlet util = $di.utility.util;\r\n\r\nimport { Component, Inject, OnInit } from 'ng-metadata/core';\r\nimport { LocationHandlerService } from './locations/shared';\r\nimport { ContactHandlerService } from './contacts/shared';\r\nimport { PartyCodeHandlerService } from './party-codes/shared/party-code-handler.service';\r\n\r\n@Component({\r\n    selector: 'diParty',\r\n    templateUrl: 'src/app/portal/parties/party.component.html',\r\n    providers: [\r\n        { provide: 'contactHandlerService', useClass: ContactHandlerService },\r\n        { provide: 'locationHandlerService', useClass: LocationHandlerService },\r\n        { provide: 'partyCodeHandlerService', useClass: PartyCodeHandlerService }\r\n    ]\r\n})\r\nexport class PartyComponent implements OnInit {\r\n    public forPartyId;\r\n    public forPartyName;\r\n    public partyId;\r\n    public parties;\r\n    public partyName;\r\n    public readonly;\r\n    public singleDetails;\r\n\r\n    public locations;\r\n    public locationSortOptions;\r\n    public locationTableOptions;\r\n    public locationListObject;\r\n\r\n    public contacts;\r\n    public contactSortOptions;\r\n    public contactTableOptions;\r\n    public contactListObject;\r\n    \r\n    public partyCodes;\r\n    public partyCodeSortOptions;\r\n    public partyCodeTableOptions;\r\n    public partyCodeListObject;\r\n\r\n    public selectedLocationSortOption;\r\n    public selectedContactSortOption;\r\n    constructor(\r\n        @Inject('locationHandlerService') private locationHandlerService: LocationHandlerService,\r\n        @Inject('contactHandlerService') private contactHandlerService: ContactHandlerService,\r\n        @Inject('partyCodeHandlerService') private partyCodeHandlerService: PartyCodeHandlerService,\r\n        @Inject('$stateParams') private stateParams,\r\n        @Inject('$q') private $q,\r\n        @Inject('notificationHandler') private notificationHandler,\r\n        @Inject('userRightsRepository') private userRightsRepository,\r\n        @Inject('diState') private diState,\r\n        @Inject('partyProxy') private partyProxy,\r\n        @Inject('listsParamsStore') private listsParamsStore\r\n    ) {\r\n        this.displayErrorNotification = this.displayErrorNotification.bind(this);\r\n    }\r\n\r\n    ngOnInit() {       \r\n        this.partyId = this.stateParams.id;\r\n        this.partyName = this.stateParams.partyName;\r\n        this.trySetPartyNameIfNotSetAsync(this.partyId, this.partyName)\r\n        this.forPartyId = this.stateParams.forPartyId;\r\n        this.singleDetails = this.stateParams.singleDetails;\r\n        this.forPartyName = this.stateParams.forPartyName;\r\n        this.trySetPartyNameIfNotSetAsync(this.forPartyId, this.forPartyName);\r\n\r\n        const locationPromises = this.initialise(this.locationHandlerService);\r\n\r\n        this.$q.all(locationPromises).then(([items, tableOptions, sortOptions, parties]) => {\r\n                this.locations = items;\r\n                this.locationSortOptions = sortOptions;\r\n                this.locationTableOptions = tableOptions;\r\n                this.parties = parties;\r\n                this.locationListObject = {\r\n                    index: 1,\r\n                    items,\r\n                    parties\r\n                };\r\n\r\n                this.selectedLocationSortOption = this.getSelectedOrDefault(sortOptions, this.locationHandlerService);\r\n            },\r\n            this.displayErrorNotification);\r\n\r\n        const contactPromises = this.initialise(this.contactHandlerService);\r\n\r\n        this.$q.all(contactPromises).then(([items, tableOptions, sortOptions, parties]) => {\r\n                this.contacts = items;\r\n                this.contactSortOptions = sortOptions;\r\n                this.contactTableOptions = tableOptions;\r\n                this.parties = parties;\r\n                this.contactListObject = {\r\n                    index: 1,\r\n                    items,\r\n                    parties\r\n                };\r\n\r\n                this.selectedContactSortOption = this.getSelectedOrDefault(sortOptions, this.contactHandlerService);\r\n            },\r\n            this.displayErrorNotification);\r\n\r\n        const partyCodePromises = this.initialise(this.partyCodeHandlerService);\r\n\r\n        this.$q.all(partyCodePromises).then(([items, tableOptions, sortOptions, parties]) => {\r\n            this.partyCodes = items;\r\n            this.partyCodeSortOptions = sortOptions;\r\n            this.partyCodeTableOptions = tableOptions;\r\n            this.parties = parties;\r\n            this.partyCodeListObject = {\r\n                index: 1,\r\n                items,\r\n                parties\r\n            };\r\n        },\r\n            this.displayErrorNotification);\r\n\r\n        this.readonly = !this.userRightsRepository.userHasRight(\"Supervisor\");\r\n    }\r\n\r\n    private initialise(handlerService) {\r\n        const savedSortOption = this.stateParams[handlerService.type + 'SortOption'];\r\n        let sortOption = 1;\r\n        if (savedSortOption) {\r\n            sortOption = savedSortOption;            \r\n        }\r\n\r\n        let promises = handlerService.init(this.partyId, this.forPartyId, sortOption);\r\n\r\n        let partiesPromise = this.partyProxy.getPartyWithAccountingCustomers(this.partyId);\r\n\r\n        promises.push(partiesPromise);\r\n\r\n        return promises;\r\n    }\r\n\r\n    private getSelectedOrDefault(sortCollection,handlerService):any{\r\n        return _.findWhere(sortCollection,\r\n            { value: this.getSortOption(handlerService) });\r\n    }\r\n    private getSortOption(handlerService):number {\r\n        const savedSortOption = this.stateParams[handlerService.type + 'SortOption'];\r\n        let sortOption:number = 1;\r\n        if (savedSortOption) {\r\n            sortOption = savedSortOption;\r\n        }\r\n        return sortOption;\r\n    }\r\n\r\n    private addNew(resource, handlerService) {\r\n        let promise = handlerService.addNewResource(resource, this.forPartyId);\r\n\r\n        this.$q.when(promise).then((data) => {\r\n                if (!data) {\r\n                    this.displayErrorNotification({ failureReason: data.message });\r\n                } else {\r\n                    this.refreshData(1, handlerService);\r\n                    this.displaySuccessNotification('EINVOICING.PORTAL.PARTIES.ACTIONS.ADDED', handlerService.type);\r\n                }\r\n            },\r\n            this.displayErrorNotification);\r\n    }\r\n\r\n    private update(resource, handlerService) {\r\n        let promise = handlerService.updateResource(resource, resource.id);\r\n        this.$q.when(promise).then((data) => {\r\n                if (!data) {\r\n                    this.refreshData(1, handlerService);\r\n                    this.displayErrorNotification({ failureReason: data.message });\r\n                } else {\r\n                    this.refreshData(1, handlerService);\r\n                    this.displaySuccessNotification('EINVOICING.PORTAL.PARTIES.ACTIONS.UPDATED',\r\n                        this.titleCase(handlerService.type));\r\n                }\r\n            },\r\n            this.displayErrorNotification);\r\n    }\r\n\r\n    private delete(resource, handlerService) {\r\n        console.log(resource, \"delete\");\r\n        //let promise = handlerService.updateResource(resource, resource.id);\r\n        //this.$q.when(promise).then((data) => {\r\n        //        if (!data) {\r\n        //            this.refreshData(1, handlerService);\r\n        //            this.displayErrorNotification({ failureReason: data.message });\r\n        //        } else {\r\n        //            this.refreshData(1, handlerService);\r\n        //            this.displaySuccessNotification('EINVOICING.PORTAL.PARTIES.ACTIONS.UPDATED',\r\n        //                this.titleCase(handlerService.type));\r\n        //        }\r\n        //    },\r\n        //    this.displayErrorNotification);\r\n    }\r\n\r\n    private remove(resource, handlerService) {\r\n        let promise = handlerService.removeResource(resource, resource.id);\r\n        this.$q.when(promise).then(() => {\r\n                this.refreshData(1, handlerService);\r\n                this.displaySuccessNotification('EINVOICING.PORTAL.PARTIES.ACTIONS.REMOVED',\r\n                    this.titleCase(handlerService.type));\r\n            },\r\n            this.displayErrorNotification);\r\n    }\r\n\r\n    titleCase(str) {\r\n        str = str.toLowerCase().split(' ').map((word) => {\r\n            return (word.charAt(0).toUpperCase() + word.slice(1));\r\n        });\r\n        return str.join(' ');\r\n    }\r\n\r\n    private refreshData(sortBy, handlerService) {\r\n        let promise = handlerService.getResourceBook(this.partyId, this.forPartyId, sortBy);\r\n        this.$q.when(promise).then(items => {\r\n                if (handlerService.type === 'location') {\r\n                    this.locations = items;\r\n                    let cloned = _.clone(this.locationListObject);\r\n                    cloned.items = items;\r\n                    this.locationListObject = cloned;\r\n                } else if (handlerService.type === 'contact') {\r\n                    this.contacts = items;\r\n                    let cloned = _.clone(this.contactListObject);\r\n                    cloned.items = items;\r\n                    this.contactListObject = cloned;\r\n                }\r\n            },\r\n            this.displayErrorNotification);\r\n    }\r\n\r\n    private sortByChanged(value, handlerService) {\r\n        let newParams = this.listsParamsStore.get(\"partyDetails\");\r\n\r\n        if (!newParams) {\r\n            newParams = [];\r\n        }\r\n\r\n        newParams[handlerService.type + 'SortOption'] = value;\r\n\r\n        const params = _.extend({}, newParams);\r\n\r\n        this.listsParamsStore.set(\"partyDetails\", params);\r\n\r\n        const redirectParams = _.extend({\r\n                id: this.partyId,\r\n                partyName: this.partyName,\r\n                forPartyId: this.forPartyId,\r\n                forPartyName: this.forPartyName\r\n\r\n            },\r\n            params);\r\n\r\n        this.diState.go(this.stateParams.ownStateName, redirectParams, { reload: true });\r\n    }\r\n\r\n    private displayErrorNotification(reason: any = {}) {\r\n        this.notificationHandler.showError(reason.failureReason);\r\n    }\r\n\r\n    private displaySuccessNotification(message, identifier) {\r\n        this.notificationHandler.showSuccess(message, identifier);\r\n    }\r\n\r\n    backToList() {\r\n        if (this.partyId === this.forPartyId) {\r\n            this.diState.go('portal.parties.mylist');\r\n        } else {\r\n            let params = this.listsParamsStore.get(\"parties\");\r\n            this.diState.go('portal.parties.list', params);\r\n        }\r\n    }\r\n\r\n    trySetPartyNameIfNotSetAsync(partyIdPropertyName, partyNamePropertyName) {\r\n        if (util.isNumber(partyIdPropertyName) && partyIdPropertyName > 0 &&\r\n            !util.isNonEmptyString(partyNamePropertyName)) {\r\n            this.partyProxy.get(partyIdPropertyName)\r\n                .then(party => {\r\n                        partyNamePropertyName = this.stateParams[partyNamePropertyName] = party.name;\r\n                    },\r\n                    error => {});\r\n        }\r\n    }\r\n\r\n    locationSortByChanged(value) {        \r\n        this.sortByChanged(value, this.locationHandlerService);       \r\n    }\r\n\r\n    locationAddNew(resource) {\r\n        this.addNew(resource, this.locationHandlerService);\r\n    }\r\n\r\n    locationUpdate(resource) {\r\n        this.update(resource, this.locationHandlerService);\r\n    }\r\n\r\n    locationRemove(resource) {\r\n        this.remove(resource, this.locationHandlerService);\r\n    }\r\n\r\n    locationReloadData() {\r\n        this.refreshData(1, this.locationHandlerService);\r\n    }\r\n\r\n    contactSortByChanged(value) {\r\n        this.sortByChanged(value, this.contactHandlerService);\r\n    }\r\n\r\n    contactAddNew(resource) {\r\n        this.addNew(resource, this.contactHandlerService);\r\n    }\r\n\r\n    contactUpdate(resource) {\r\n        this.update(resource, this.contactHandlerService);\r\n    }\r\n\r\n    contactRemove(resource) {\r\n        this.remove(resource, this.contactHandlerService);\r\n    }\r\n\r\n    contactReloadData() {\r\n        this.refreshData(1, this.contactHandlerService);\r\n    }\r\n\r\n    partyCodeSortByChanged(value) {\r\n        this.sortByChanged(value, this.partyCodeHandlerService);\r\n    }\r\n\r\n    partyCodeAddNew(resource) {\r\n        this.addNew(resource, this.partyCodeHandlerService);\r\n    }\r\n\r\n    partyCodeUpdate(resource) {\r\n        this.update(resource, this.partyCodeHandlerService);\r\n    }\r\n\r\n    partyCodeDelete(resource) {\r\n        this.delete(resource, this.partyCodeHandlerService);\r\n    }\r\n\r\n    partyCodeRemove(resource) {\r\n        this.remove(resource, this.partyCodeHandlerService);\r\n    }\r\n\r\n    partyCodeReloadData() {\r\n        this.refreshData(1, this.partyCodeHandlerService);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/party.component.ts","import { Component, Input, Output, EventEmitter } from 'ng-metadata/core';\r\n\r\n@Component({\r\n    selector: 'diDocumentStateSelector',\r\n    templateUrl: 'src/app/portal/shared/components/document-state-selector/document-state-selector.html'\r\n})\r\nexport class DocumentStateSelectorComponent{\r\n    @Input() items:Array<any>;\r\n    @Input() image;\r\n    @Input() set selectedState(a) {\r\n        this.item = a;\r\n        console.log(this.item);\r\n    }\r\n   \r\n    @Output() onChangedState = new EventEmitter<any>();\r\n\r\n    public item: any;\r\n    constructor() {\r\n\r\n    \r\n    }\r\n\r\n    public selectState(item) {\r\n        if (!item) \r\n            return;\r\n        \r\n        if (this.item === item)\r\n            return;\r\n\r\n        this.item = item;\r\n       \r\n\r\n        if (this.onChangedState) {\r\n            this.onChangedState.emit(item.value);\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/document-state-selector/document-state-selector.controller.ts","export * from './document-state-selector.controller';\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/document-state-selector/index.ts","import { DocumentStateSelectorComponent } from './index';\r\nimport { provide } from 'ng-metadata/core';\r\n\r\nexport function load(module) {\r\n    module.directive(...provide(DocumentStateSelectorComponent));\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/document-state-selector/loader.ts","//{CODE:CAU0L}\r\n// di.core\r\ndefine([\r\n\t'./spa/_loader'\r\n], function (\r\n\tspaLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        spaLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/di.core.spa.js","//{CODE:CGL01}\r\n// di.core.global\r\ndefine([\r\n    './_namespace',\r\n    './angular/_main',\r\n    './debug/_main',\r\n    './event/_main',\r\n    './exception/_main',\r\n    './prototypeExtensions/_main',\r\n    './utility/_main'\r\n], function () { });\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/_main.js","define(function () {\r\n    window.$di = window.$di || {};\r\n    window.$di.angular = window.$di.angular || {};\r\n    window.$di.debug = window.$di.debug || {};\r\n    window.$di.event = window.$di.event || {};\r\n    window.$di.exception = window.$di.exception || {};\r\n    window.$di.utility = window.$di.utility || {};\r\n    window.$di.utility.placeholders = window.$di.utility.placeholders || {};\r\n    window.$di.utility.placeholders.arguments = window.$di.utility.placeholders.arguments || {};\r\n\r\n    return;\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/_namespace.js","//{CODE:CGD02}\r\n// di.core.global.debug\r\ndefine([\r\n    './debugger'\r\n], function () { });\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/debug/_main.js","//{CODE:CGD01}\r\n// di.core.global.debug\r\ndefine([\r\n    '../utility/util'\r\n],\r\nfunction (util) {\r\n    'use strict';\r\n\r\n    /** debug helper */\r\n    window.$di.debug.debugger = {\r\n        enabled: false,\r\n        log: log,\r\n        newLogger: newLogger,\r\n        breakHere: breakHere\r\n    };\r\n\r\n    return window.$di.debug.debugger;\r\n\r\n    /**\r\n     * logs to the console\r\n     * @param data\r\n     * @returns\r\n     */\r\n    function log(data, logContext) {\r\n        if (window.$di.debug.debugger.enabled) {\r\n            var logData;\r\n\r\n            if (!logContext) {\r\n                logData = data;\r\n            } else {\r\n                logData = {\r\n                    _logContext: logContext,\r\n                    data: data\r\n                };\r\n            }\r\n\r\n            console.log(logData);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * returns a new logging object which adds context information to each log\r\n     * @param logContext\r\n     */\r\n    function newLogger(logContext) {\r\n        return {\r\n            log: function (data) {\r\n                log(data, logContext);\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * adds breakpoint\r\n     */\r\n    function breakHere(condition) {\r\n        if (this.enabled && (!util.isDefined(condition) || condition)) {\r\n            debugger;\r\n        }\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/debug/debugger.js","//{CODE:/GE01}\r\n// di.core.global.event\r\ndefine([\r\n    './jqueryEventSubscriber'\r\n], function () { });\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/event/_main.js","//{CODE:NAM01}\r\n// di.core.global.event\r\ndefine([\r\n    'jquery'\r\n],\r\nfunction ($) {\r\n    'use strict';\r\n    var valListenerAdded = false;\r\n\r\n    window.$di.event.jqueryEventSubscriber = {\r\n        listenToVal: listenToVal\r\n    };\r\n\r\n    return window.$di.event.jqueryEventSubscriber;\r\n\r\n    function listenToVal() {\r\n        if (valListenerAdded) {\r\n            return;\r\n        }\r\n\r\n        var originalVal = $.fn.val;\r\n\r\n        $.fn.val = function () {\r\n            var result = originalVal.apply(this, arguments);\r\n\r\n            if (arguments.length > 0) {\r\n                $(this).trigger('val');\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        valListenerAdded = true;\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/event/jqueryEventSubscriber.js","//{CODE:CGE01}\r\n// di.core.global.exception\r\ndefine([\r\n    './guard'\r\n], function () { });\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/exception/_main.js","//{CODE:CGP01}\r\n// di.core.global.prototypeExtensions\r\ndefine([\r\n    './arrayExtensions'\r\n], function () { });\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/prototypeExtensions/_main.js","//{CODE:CGP02}\r\n// di.core.global.prototypeExtensions\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    Array.prototype.pushArray = pushArray;\r\n    Array.prototype.clear = clear;\r\n    Array.prototype.fill = fill;\r\n    \r\n    return;\r\n\r\n    function pushArray() {\r\n        this.push.apply(this, this.concat.apply([], arguments));\r\n    }\r\n\r\n    function clear() {\r\n        this.length = 0;\r\n    }\r\n\r\n    function fill() {\r\n        this.clear();\r\n        this.pushArray.apply(this, arguments);\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/prototypeExtensions/arrayExtensions.js","//{CODE:CGU02}\r\n// di.core.global.utility\r\ndefine([\r\n    './compatability',\r\n    './util',\r\n    './placeholders/_main'\r\n], function () { });\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/utility/_main.js","//{CODE:CGU0C}\r\n// di.core.global.utility\r\ndefine([\r\n    './util'\r\n], function (util) {\r\n    'use strict';\r\n\r\n    window.$di.utility.compatability = {\r\n        transitionEndEvent: getTransitionEndEvent()\r\n    };\r\n\r\n    return window.$di.utility.compatability;\r\n\r\n    function getTransitionEndEvent() {\r\n        var transitionEndNames = {\r\n            'WebkitTransition': 'webkitTransitionEnd',\r\n            'MozTransition': 'transitionend',\r\n            'OTransition': 'oTransitionEnd',\r\n            'msTransition': 'MSTransitionEnd',\r\n            'transition': 'transitionend'\r\n        };\r\n\r\n        if (util.isDefined(window.Modernizr)) {\r\n            return transitionEndNames[window.Modernizr.prefixed('transition')];\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/utility/compatability.js","//{CODE:CGU07}\r\n// di.core.global.utility\r\ndefine([\r\n    './extract',\r\n    './replace',\r\n    './arguments/_main'\r\n], function () { });\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/utility/placeholders/_main.js","//{CODE:CGU0B}\r\n// di.core.global.utility\r\ndefine([\r\n    './map',\r\n    './split'\r\n], function () { });\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/utility/placeholders/arguments/_main.js","//{CODE:CGU08}\r\n// di.core.global.utility.placeholders.arguments\r\ndefine([\r\n    '../../../exception/guard'\r\n], function (guard) {\r\n    'use strict';\r\n\r\n    var DELIMITER = ',';\r\n    var OPEN_BRACE = '{';\r\n    var CLOSE_BRACE = '}';\r\n\r\n    window.$di.utility.placeholders.arguments.split = split;\r\n\r\n    return window.$di.utility.placeholders.arguments.split;\r\n\r\n    /**\r\n     * Provides the ability to split arguments used in conjunction with the di-translate directive.\r\n     * @param argumentString\r\n     */\r\n    function split(argumentString) {\r\n        guard.throwIfNullOrUndefined(\"CGU0801E\", argumentString, \"argumentString\");\r\n\r\n        var chunks = [];\r\n        var insideBraces = false;\r\n        var lastChunkIndex = 0;\r\n\r\n        for (var i = 0; i < argumentString.length; i++) {\r\n            if (argumentString[i] === OPEN_BRACE) {\r\n                insideBraces = true;\r\n            }\r\n\r\n            if (insideBraces && argumentString[i] == CLOSE_BRACE) {\r\n                insideBraces = false;\r\n            }\r\n\r\n            if (!insideBraces && argumentString[i] === DELIMITER) {\r\n                chunks.push(argumentString.substring(lastChunkIndex, i).trim());\r\n                lastChunkIndex = i + 1;\r\n            }\r\n        }\r\n\r\n        // whatever is remaining is unlikely to be an object - push it onto the queue\r\n        if (lastChunkIndex < i) {\r\n            chunks.push(argumentString.substring(lastChunkIndex, i).trim());\r\n        }\r\n\r\n        return chunks;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/utility/placeholders/arguments/split.js","//{CODE:CGU04}\r\n// di.core.global.utility\r\ndefine([\r\n    './extract',\r\n    './arguments/map',\r\n    '../../exception/guard',\r\n    '../util'\r\n], function (extract, map, guard, util) {\r\n    'use strict';\r\n\r\n    window.$di.utility.placeholders.replace = replace;\r\n\r\n    return window.$di.utility.placeholders.replace;\r\n\r\n    /**\r\n     * Replaces any placeholders found in a given string with the arguments provided.\r\n     * @param placeholderString\r\n     * @param args\r\n     */\r\n    function replace(placeholderString, args, argumentFilter) {\r\n        guard.throwIfNullOrUndefined(\"CGU0401E\", placeholderString, \"placeholderString\");\r\n        guard.throwIfNullOrUndefined(\"CGU0402E\", args, \"args\");\r\n\r\n        var placeholders = extract(placeholderString);\r\n        var mappedArguments;\r\n        var filteredArguments;\r\n        var replacing;\r\n\r\n        placeholders = extract(placeholderString);\r\n        mappedArguments = map(placeholders, args);\r\n\r\n        if (util.isObject(args) && !util.isArray(args)) {\r\n            mappedArguments = args;\r\n        } else {\r\n            mappedArguments = map(placeholders, args);\r\n        }\r\n\r\n        if (argumentFilter) {\r\n            filteredArguments = argumentFilter(mappedArguments);\r\n        } else {\r\n            filteredArguments = mappedArguments;\r\n        }\r\n\r\n        placeholderString = placeholderString.replace(/<%=([\\s.a-zA-Z0-9]+)%>/g, function (str) {\r\n            return str.replace(/\\./g, '_');\r\n        });\r\n\r\n        replacing = _.template(placeholderString);\r\n\r\n\r\n        return replacing(filteredArguments);\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/utility/placeholders/replace.js","//{CODE:CAN01}\r\n// di.core.angular\r\ndefine([\r\n\t'./authentication/_loader',\r\n\t'./caching/_loader',\r\n\t'./exception/_loader',\r\n\t'./http/_loader',\r\n\t'./logging/_loader',\r\n\t'./userSecurity/_loader',\r\n\t'./session/_loader',\r\n\t'./state/_loader',\r\n\t'./translation/_loader',\r\n\t'./utility/_loader',\r\n\t'./validation/_loader',\r\n    './watchers/_loader',\r\n\t'./window/_loader',\r\n\t'./currency/_loader',\r\n\t'./controls/_loader',\r\n\t'./staticLookup/_loader',\r\n\t'./date/_loader',\r\n    './file/_loader',\r\n    './url/_loader'\r\n], function (\r\n\tauthenticationLoader,\r\n\tcachingLoader,\r\n\texceptionLoader,\r\n\thttpLoader,\r\n\tloggingLoader,\r\n\tuserSecurityLoader,\r\n\tsessionLoader,\r\n\tstateLoader,\r\n\ttranslationLoader,\r\n\tutilityLoader,\r\n\tvalidationLoader,\r\n    watchersLoader,\r\n    windowLoader,\r\n\tcurrencyLoader,\r\n\tcontrolsLoader,\r\n\tstaticLookupLoader,\r\n\tdateLoader,\r\n    fileLoader,\r\n    urlLoader\r\n) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\t\t\r\n\t    authenticationLoader(module);\r\n\t    cachingLoader(module);\r\n\t    exceptionLoader(module);\r\n\t\thttpLoader(module);\r\n\t\tloggingLoader(module);\r\n\t\tuserSecurityLoader(module);\r\n\t\tsessionLoader(module);\r\n\t\tstateLoader(module);\r\n\t\ttranslationLoader(module);\r\n\t\tutilityLoader(module);\r\n\t\tvalidationLoader(module);\r\n\t    watchersLoader(module);\r\n\t    windowLoader(module);\r\n\t\tcurrencyLoader(module);\r\n\t\tcontrolsLoader(module);\r\n\t\tstaticLookupLoader(module);\r\n\t\tdateLoader(module);\r\n\t\tfileLoader(module);\r\n\t    urlLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/_loader.js","//{CODE:CAA0C}\r\n// di.core.angular.authentication\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.config(configureAuthenticationHttpInterceptor);\r\n\r\n        configureAuthenticationHttpInterceptor.$inject = ['$httpProvider'];\r\n        function configureAuthenticationHttpInterceptor($httpProvider) {\r\n            $httpProvider.interceptors.push('authenticationHttpInterceptor');\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/_config.js","//{CODE:CAA03}\r\n// di.core.angular.authentication\r\ndefine([\r\n\t'./_config',\r\n\t'./authenticationClientEventSubscriber',\r\n\t'./authenticationController',\r\n\t'./diAuthenticationDirective',\r\n\t'./authenticationHttpInterceptor',\r\n\t'./authenticationData',\r\n\t'./authenticationStore',\r\n\t'./userAuthenticationProxy',\r\n\t'./authenticationTicketValidator',\r\n\t'./authorizedObjectsFilter',\r\n\t'./userRightsRepository',\r\n\t'./authenticationPromptConfigurator',\r\n\t'./authenticationResult',\r\n\t'./loggedOutReason',\r\n    './userIdleActivityMonitor',\r\n    './activityMonitor'\r\n], function (\r\n\tconfigLoader,\r\n\tauthenticationClientEventSubscriberLoader,\r\n\tauthenticationControllerLoader,\r\n\tauthenticationDirectiveLoader,\r\n\tauthenticationHttpInterceptorLoader,\r\n\tauthenticationDataLoader,\r\n\tauthenticationStoreLoader,\r\n\tuserAuthenticationProxyLoader,\r\n\tauthenticationTicketValidatorLoader,\r\n\tauthorizedObjectsFilterLoader,\r\n\tuserRightsRepositoryLoader,\r\n\tauthenticationPromptConfiguratorLoader,\r\n\tauthenticationResultLoader,\r\n\tloggedOutReasonLoader,\r\n    userIdleActivityMonitorLoader,\r\n    activityMonitor\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    userIdleActivityMonitorLoader(module);\r\n\t\tauthenticationClientEventSubscriberLoader(module);\r\n\t\tauthenticationControllerLoader(module);\r\n\t\tauthenticationDirectiveLoader(module);\r\n\t\tauthenticationHttpInterceptorLoader(module);\r\n\t\tauthenticationDataLoader(module);\r\n\t\tauthenticationStoreLoader(module);\r\n\t\tuserAuthenticationProxyLoader(module);\r\n\t\tauthenticationTicketValidatorLoader(module);\r\n\t\tauthorizedObjectsFilterLoader(module);\r\n\t\tuserRightsRepositoryLoader(module);\r\n\t\tauthenticationPromptConfiguratorLoader(module);\r\n\t\tconfigLoader(module);\r\n\t\tauthenticationResultLoader(module);\r\n\t\tloggedOutReasonLoader(module);\r\n\t    activityMonitor(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/_loader.js","define(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n\r\n        module.provider('activityMonitor', activityMonitor);\r\n\r\n        function activityMonitor() {\r\n           \r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            }\r\n\r\n            provider.$get.$inject = [\r\n                'userIdleActivityMonitor',\r\n                'authenticationData',\r\n                'authenticationClientEventSubscriber',\r\n                'authenticationTicketValidator',\r\n                'promptWindow',\r\n                'translator',\r\n                'LOGGED_OUT_REASON'\r\n            ];\r\n\r\n            return provider;\r\n\r\n            function configure(cfg) {\r\n              \r\n            }\r\n\r\n            function $get(\r\n                userIdleActivityMonitor,\r\n                authenticationData,\r\n                authenticationClientEventSubscriber,\r\n                authenticationTicketValidator,\r\n                promptWindow,\r\n                translator,\r\n                LOGGED_OUT_REASON) {\r\n\r\n\r\n                function sessionAboutToExpiry(idle, timeout) {\r\n                    translator.translate('CORE.AUTHENTICATION.SESSION_EXPIRY_TITLE')\r\n                        .then(function(translated) {\r\n                            promptWindow.alert({\r\n                                title: translated,\r\n                                message: translator.instantTranslate('CORE.AUTHENTICATION.SESSION_EXPIRY',\r\n                                    { idle: idle / 60, timeout: timeout / 60 }),\r\n                                callback: function() {\r\n                                    if (authenticationData.userData.isAuthenticated) {\r\n                                        start();\r\n                                        authenticationTicketValidator.validateTicket(true, function() {});\r\n                                    }\r\n                                }\r\n                            });\r\n                        });\r\n                }\r\n\r\n                function sessionTimeout() {\r\n                    authenticationClientEventSubscriber.loggedOut(LOGGED_OUT_REASON.SessionTimeout);\r\n                }\r\n\r\n                return {\r\n                    start: start,\r\n                    stop: stop\r\n                };\r\n\r\n                function start() {\r\n                    userIdleActivityMonitor.start({\r\n                        idleStartedHandler: sessionAboutToExpiry,\r\n                        idleEndHandler: function () { },\r\n                        idleTimeoutHandler: sessionTimeout\r\n                    });\r\n                }\r\n\r\n                function stop() {\r\n                    userIdleActivityMonitor.stop();\r\n                }\r\n            }\r\n        }\r\n\r\n        return activityMonitor;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/activityMonitor.js","//{CODE:CAA09}\r\n/// di.core.angular.authentication\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n\t\tmodule.provider('authenticationClientEventSubscriber', authenticationClientEventSubscriberProvider);\r\n\r\n        /**\r\n\t\t * Performs actions in response to common authentication events\r\n\t\t */\r\n\t\tfunction authenticationClientEventSubscriberProvider() {\r\n\t\t\tvar config = {\r\n\t\t\t\tunauthenticatedState: 'welcome',\r\n\t\t\t\tauthenticatedState: 'portal',\r\n\t\t\t\tchangePasswordState: 'portal.account.management'\r\n\t\t\t};\r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            };\r\n\r\n\t\t\tprovider.$get.$inject = ['$rootScope','diState', 'authenticationStore', 'LOGGED_OUT_REASON', 'loggerProxy'];\r\n\r\n            return provider;\r\n\r\n            /**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n            function configure(cfg) {\r\n                guard.throwIfNotAnObject(\"CAA0901E\", cfg, \"cfg\");\r\n\r\n                config = cfg;\r\n            }\r\n\r\n            function $get(rootScope,diState, authenticationStore, LOGGED_OUT_REASON, loggerProxy) {\r\n\t\t\t\tvar loggedInEventHandlers = [];\r\n\t\t\t\tvar loggedOutEventHandlers = [];\r\n\t\t\t\tvar rightsChangedEventHandlers = [];\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tloggedIn: loggedIn,\r\n\t\t\t\t\tloggedOut: loggedOut,\r\n\t\t\t\t\tchangePasswordRequested: changePasswordRequested,\r\n\t\t\t\t\tfailedLogin: failedLogin,\r\n\t\t\t\t\tserver401: server401,\r\n\t\t\t\t\tticketExpired: ticketExpired,\r\n\t\t\t\t\tunauthorisedState: unauthorisedState,\r\n\t\t\t\t\tauthenticatedAccessToLoginState: authenticatedAccessToLoginState,\r\n\t\t\t\t\trightsChanged: rightsChanged,\r\n\t\t\t\t\taddLoggedInEventHandler: addLoggedInEventHandler,\r\n\t\t\t\t\taddLoggedOutEventHandler: addLoggedOutEventHandler,\r\n\t\t\t\t\taddRightsChangedEventHandler: addRightsChangedEventHandler\r\n\t\t\t\t};\r\n\r\n                /**\r\n\t\t\t\t * Handle user login\r\n\t\t\t\t * @param data\r\n\t\t\t\t */\r\n\t\t\t\tfunction loggedIn(data, authenticatedState) {\r\n\t\t\t\t\tauthenticationStore.setAuthenticationTicket(data);\r\n\r\n                    for (var i = 0; i < loggedInEventHandlers.length; i++) {\r\n                        loggedInEventHandlers[i]();\r\n                    }\r\n\r\n\t\t\t\t\tif (authenticatedState) {\r\n\t\t\t\t\t    diState.go(authenticatedState);\r\n\t\t\t\t\t} else if (rootScope.toState && rootScope.toParams) {\r\n\t\t\t\t\t    diState.go(rootScope.toState.name,rootScope.toParams);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t    diState.go(config.authenticatedState);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Handle a failed loginDAsyncOAuthRepository.GetClientByName('\r\n\t\t\t\t */\r\n                function failedLogin() {\r\n                }\r\n\r\n                /**\r\n\t\t\t\t * Handle user logout\r\n\t\t\t\t */\r\n\t\t\t\tfunction loggedOut(loggedOutReason) {\r\n\t\t\t\t    loggerProxy.info(\"CAA0903I\", \"User logged out.\");\r\n\r\n                    authenticationStore.clear();\r\n\r\n\t\t\t\t\tdiState.go(config.unauthenticatedState, loggedOutReason ? { reason: loggedOutReason } : undefined).then(function() {\r\n\t\t\t\t\t\tfor (var i = 0; i < loggedOutEventHandlers.length; i++) {\r\n\t\t\t\t\t\t\tloggedOutEventHandlers[i](loggedOutReason);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n                /**\r\n\t\t\t\t * Handle change of password request\r\n\t\t\t\t */\r\n\t\t\t\tfunction changePasswordRequested(data) {\r\n\t\t\t\t\tloggedIn(data, config.changePasswordState);\r\n\t\t\t\t}\r\n\r\n                /**\r\n\t\t\t\t * Handle server 401 response\r\n\t\t\t\t * @param url\r\n\t\t\t\t */\r\n\t\t\t\tfunction server401() {\r\n\t\t\t\t\tloggedOut(LOGGED_OUT_REASON.UnauthorisedServerResponse);\r\n\t\t\t\t}\r\n\r\n                /**\r\n\t\t\t\t * Handle authentication ticket expiry\r\n\t\t\t\t * @param expiryDate\r\n\t\t\t\t */\r\n\t\t\t\tfunction ticketExpired() {\r\n\t\t\t\t\tloggedOut(LOGGED_OUT_REASON.TicketExpired);\r\n\t\t\t\t}\r\n\r\n                /**\r\n\t\t\t\t * Handle attempted change to unauthorised state\r\n\t\t\t\t * @param state\r\n\t\t\t\t */\r\n\t\t\t\tfunction unauthorisedState(url) {\r\n\t\t\t\t\tloggerProxy.warning(\"CAA0902E\", \"Attempt to access unauthorised state: '\" + url + \"'\");\r\n\r\n\t\t\t\t\tloggedOut(LOGGED_OUT_REASON.UnauthorisedState);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Handle attempt to access login view when already logged in.\r\n\t\t\t\t * Redirects the user to the authenticated state\r\n\t\t\t\t */\r\n\t\t\t\tfunction authenticatedAccessToLoginState() {\r\n\t\t\t\t\tdiState.go(config.authenticatedState);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Handle change of rights\r\n\t\t\t\t * Redirects the user to the authenticated state, forcing a redraw\r\n\t\t\t\t */\r\n\t\t\t\tfunction rightsChanged() {\r\n\t\t\t\t\tfor (var i = 0; i < rightsChangedEventHandlers.length; i++) {\r\n\t\t\t\t\t\trightsChangedEventHandlers[i]();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n                /**\r\n\t\t\t\t * Add callback to run when login handled\r\n\t\t\t\t * @param eventHandler\r\n\t\t\t\t */\r\n                function addLoggedInEventHandler(eventHandler) {\r\n                    loggedInEventHandlers.push(eventHandler);\r\n                }\r\n\r\n                /**\r\n\t\t\t\t * Add callback to run when logout handled\r\n\t\t\t\t * @param eventHandler\r\n\t\t\t\t */\r\n\t\t\t\tfunction addLoggedOutEventHandler(eventHandler) {\r\n\t\t\t\t\tloggedOutEventHandlers.push(eventHandler);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Add callback to run when rightsChanged handled\r\n\t\t\t\t * @param eventHandler\r\n\t\t\t\t */\r\n\t\t\t\tfunction addRightsChangedEventHandler(eventHandler) {\r\n\t\t\t\t\trightsChangedEventHandlers.push(eventHandler);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn authenticationClientEventSubscriberProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/authenticationClientEventSubscriber.js","//{CODE:CAA06}\r\n// di.core.angular.authentication\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar debug = $di.debug.debugger.newLogger(\"AuthenticationController\");\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('AuthenticationController', AuthenticationController);\r\n\r\n\t    AuthenticationController.$inject = [\r\n\t        'userAuthenticationProxy',\r\n\t        'authenticationClientEventSubscriber',\r\n\t        'translator',\r\n\t        'promptWindow',\r\n\t        'notifier',\r\n\t        '$scope',\r\n\t        'authenticationPromptConfigurator',\r\n\t        'modalSpinner',\r\n\t        'AUTHENTICATION_RESULT',\r\n\t        '$stateParams'];\r\n\r\n\t\t/**\r\n\t\t * Controller for interacting with authentication views\r\n\t\t */\r\n\t\tfunction AuthenticationController(\r\n\t\t\tuserAuthenticationProxy,\r\n\t\t\tauthenticationClientEventSubscriber,\r\n\t\t\ttranslator,\r\n\t\t\tpromptWindow,\r\n\t\t\tnotifier,\r\n\t\t\tscope,\r\n\t\t\tauthenticationPromptConfigurator,\r\n\t\t\tmodalSpinner,\r\n\t\t\tauthenticationResult,\r\n            stateParams) {\r\n\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvm.username = '';\r\n\t\t\tvm.password = '';\r\n\t\t\tvm.login = login;\r\n\t\t\tvm.forgotPassword = scope.onForgotPasswordClick;\r\n\t\t\tvm.loginProcessing = false;\r\n\r\n\t\t\tvar spinner;\r\n\r\n\t\t    init();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\tfunction init() {\r\n\t\t\t    if (util.isNonEmptyString(stateParams.username)) {\r\n\t\t\t        autoLogin(stateParams.username, stateParams.password);\r\n\t\t\t    }\r\n\t\t\t}\r\n            /**\r\n             * auto login with credentials from url parameters            \r\n             */\r\n\t\t\tfunction autoLogin(username, password) {\r\n\t\t\t    vm.username = username;\r\n\t\t\t    vm.password = password;\r\n\t\t\t    vm.login();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Login with the given credentials\r\n\t\t\t */\r\n\t\t\tfunction login() {\r\n\t\t\t\tif (vm.loginProcessing === false) {\r\n\t\t\t\t\tshowSpinner();\r\n\t\t\t\t\tvm.loginProcessing = true;\r\n\t\t\t\t\tuserAuthenticationProxy.login(vm.username, vm.password).then(resolved, rejected);\r\n\t\t\t\t}\r\n\r\n\t\t\t    return;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t\tvar authResult = data.result;\r\n\r\n\t\t\t\t\tif (authResult.success) {\r\n\t\t\t\t\t\tif (data.changePasswordOnLogin === \"True\") {\r\n\t\t\t\t\t\t\thandleChangePasswordOnLogin(data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t    handleLoginSuccess(authResult);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t    handleLoginFailure(authResult);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction handleChangePasswordOnLogin(data) {\r\n\t\t\t\t\t\tvm.loginProcessing = false;\r\n\t\t\t\t\t\tif (scope.subscribeToFirstLogin) {\r\n\t\t\t\t\t\t\tscope.subscribeToFirstLogin(data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction handleLoginSuccess(authResult) {\r\n\t\t\t\t\t    switch (authResult.serverDescription) {\r\n\t\t\t\t\t\t    case authenticationResult.Success:\r\n\t\t\t\t\t\t\t\tvm.loginProcessing = false;\r\n\t\t\t\t\t\t\t\tauthenticationClientEventSubscriber.loggedIn(data);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t    case authenticationResult.PasswordAboutToExpire:\r\n\t\t\t\t\t\t        var config = authenticationPromptConfigurator.getPromptConfiguration(authResult.serverDescription);\r\n\t\t\t\t\t\t\t\tconfig.callback = function (result) {\r\n\t\t\t\t\t\t\t\t\tvm.loginProcessing = false;\r\n\t\t\t\t\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\t\t\t\t\tauthenticationClientEventSubscriber.changePasswordRequested(data);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tauthenticationClientEventSubscriber.loggedIn(data);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tpromptWindow.confirm(config);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t    vm.loginProcessing = false;\r\n\r\n\t\t\t\t\t\t\t    translator\r\n                                    .tryTanslate(authResult.errorMessage)\r\n                                    .then(function (translated) {\r\n                                        notifier.error(translated);\r\n                                    })\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction handleLoginFailure(authResult) {\r\n\t\t\t\t\t    switch (authResult.serverDescription) {\r\n\t\t\t\t\t\t    case authenticationResult.InvalidUsername:\r\n\t\t\t\t\t\t    case authenticationResult.InvalidPassword:\r\n\t\t\t\t\t\t    case authenticationResult.AccountDisabled:\r\n\t\t\t\t\t\t    case authenticationResult.AccountLocked:\r\n\t\t\t\t\t\t        var config = authenticationPromptConfigurator.getPromptConfiguration(authResult.serverDescription);\r\n\t\t\t\t\t\t\t\tconfig.callback = function () {\r\n\t\t\t\t\t\t\t\t\tvm.loginProcessing = false;\r\n\t\t\t\t\t\t\t\t\tif (scope.focusOn) {\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t\t\t\t\tscope.focusOn('username');\r\n\t\t\t\t\t\t\t\t\t\t}, 10);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tpromptWindow.alert(config);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t    case authenticationResult.PasswordExpired:\r\n\t\t\t\t\t\t\t\tvm.loginProcessing = false;\r\n\t\t\t\t\t\t\t\tif (scope.subscribeToPasswordExpired) {\r\n\t\t\t\t\t\t\t\t\tdata.userName = vm.username;\r\n\t\t\t\t\t\t\t\t\tscope.subscribeToPasswordExpired(data);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t    vm.loginProcessing = false;\r\n\r\n\t\t\t\t\t\t\t    translator.translate('CORE.AUTHENTICATION.ERRORS.UNKNOWNERROR')\r\n\t\t\t\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t\t\t\t            notifier.error(translated);\r\n\t\t\t\t\t\t\t        });\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t\tvar errorMessage = \"CORE.AUTHENTICATION.ERRORS.\" + error.failureReason.toUpperCase();\r\n\r\n\t\t\t\t    translator.translate(errorMessage)\r\n\t\t\t\t        .then(function (translated) {\r\n\t\t\t\t            notifier.error(translated);\r\n\t\t\t\t        });\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tvm.loginProcessing = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Adds spinner to the page\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction showSpinner() {\r\n\t\t\t\tvar opts = {\r\n\t\t\t\t\tlength: 19,\r\n\t\t\t\t\twidth: 14,\r\n\t\t\t\t\tradius: 42,\r\n\t\t\t\t\tscale: 0.25,\r\n\t\t\t\t\tcolor: '#000',\r\n\t\t\t\t\topacity: 0.25,\r\n\t\t\t\t\tzIndex: 2e9\r\n\t\t\t\t}\r\n\r\n\t\t\t\tspinner = modalSpinner.showModalSpinner(\"#spinnerHolder\", opts);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes spinner from the page\r\n\t\t\t*/\r\n\t\t\tfunction removeSpinner() {\r\n\t\t\t\tif (spinner) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn AuthenticationController;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/authenticationController.js","//{CODE:CAA0H}\r\n// di.core.angular.authentication\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        module.factory('authenticationData', authenticationData);\r\n\r\n        /**\r\n         * Repository for storing authentication data\r\n         */\r\n        function authenticationData() {\r\n            var service = {\r\n                authenticationTicket: {},\r\n                userData: {},\r\n                clear: clear\r\n            };\r\n\r\n            clear();\r\n\r\n            return service;\r\n\r\n            function clear() {\r\n                service.authenticationTicket = {};\r\n                service.userData = {};\r\n            }\r\n        }\r\n\r\n        return authenticationData;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/authenticationData.js","//{CODE:CAA05}\r\n// di.core.angular.authentication\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.factory('authenticationHttpInterceptor', authenticationHttpInterceptor);\r\n\r\n        authenticationHttpInterceptor.$inject = ['authenticationData'];\r\n\r\n        /**\r\n         * Interceptor for adding OAuth bearer token to http headers\r\n         */\r\n        function authenticationHttpInterceptor(authenticationData) {\r\n            return {\r\n                request: request\r\n            };\r\n\r\n            /**\r\n             * Intercept the request\r\n             * @param requestConfig\r\n             */\r\n            function request(requestConfig) {\r\n                var token = authenticationData.authenticationTicket.token;\r\n\r\n                if (token) {\r\n                    requestConfig.headers = (requestConfig.headers || {});\r\n\r\n                    requestConfig.headers.Authorization = \"Bearer \" + token;\r\n                }\r\n\r\n                return requestConfig;\r\n            }\r\n        }\r\n\r\n        return authenticationHttpInterceptor;\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/authenticationHttpInterceptor.js","//{CODE:/AA05}\r\n// di.core.angular.authentication\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.factory('authenticationPromptConfigurator', authenticationPromptConfigurator);\r\n\r\n        /**\r\n         * Gets the object to configure the window prompt based on the authentication result\r\n         */\r\n        function authenticationPromptConfigurator() {\r\n            var service = {\r\n                getPromptConfiguration: getPromptConfiguration\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Gets the prompt configuration\r\n             */\r\n            function getPromptConfiguration(authenticationResult) {\r\n\r\n                switch (authenticationResult) {\r\n                    case 'PasswordAboutToExpire':\r\n                        return {\r\n                            title: 'CORE.AUTHENTICATION.PASSWORD_EXPIRING',\r\n                            message: 'CORE.AUTHENTICATION.PASSWORD_EXPIRING_MESSAGE',\r\n                            okBtnText: 'CORE.PROMPT.YES',\r\n                            cancelBtnText: 'CORE.PROMPT.NO'\r\n                        };\r\n\r\n                    case 'InvalidUsername':\r\n                        return {\r\n                            title: 'CORE.AUTHENTICATION.ERRORS.INVALID_USERNAME',\r\n                            message: 'CORE.AUTHENTICATION.ERRORS.INVALID_USERNAME_MESSAGE'\r\n                        };\r\n\r\n                    case 'InvalidPassword':\r\n                        return {\r\n                            title: 'CORE.AUTHENTICATION.ERRORS.INVALID_PASSWORD',\r\n                            message: 'CORE.AUTHENTICATION.ERRORS.INVALID_PASSWORD_MESSAGE'\r\n                        };\r\n\r\n                    case 'AccountDisabled':\r\n                        return {\r\n                            title: 'CORE.AUTHENTICATION.ERRORS.ACCOUNT_DISABLED',\r\n                            message: 'CORE.AUTHENTICATION.ERRORS.ACCOUNT_DISABLED_MESSAGE'\r\n                        };\r\n\r\n                    case 'AccountLocked':\r\n                        return {\r\n                            title: 'CORE.AUTHENTICATION.ERRORS.ACCOUNT_LOCKED',\r\n                            message: 'CORE.AUTHENTICATION.ERRORS.ACCOUNT_LOCKED_MESSAGE'\r\n                        };\r\n\r\n                    default:\r\n                        return {};\r\n                }\r\n            }\r\n        };\r\n\r\n        return authenticationPromptConfigurator;\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/authenticationPromptConfigurator.js","// di.core.angular.authentication\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.constant('AUTHENTICATION_RESULT', authenticationResult());\r\n\r\n        function authenticationResult() {\r\n            return {\r\n                Success: 'Success',\r\n                PasswordAboutToExpire: 'PasswordAboutToExpire',\r\n                InvalidUsername: 'InvalidUsername',\r\n                InvalidPassword: 'InvalidPassword',\r\n                AccountDisabled: 'AccountDisabled',\r\n                AccountLocked: 'AccountLocked',\r\n                PasswordExpired: 'PasswordExpired',\r\n                ServerDown: 'ServerDown'\r\n            };\r\n        }\r\n\r\n        return authenticationResult;\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/authenticationResult.js","//{CODE:CAA08}\r\n// di.core.angular.authentication\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('authenticationStore', authenticationStore);\r\n\r\n        authenticationStore.$inject = ['sessionStore', 'authenticationData'];\r\n\r\n        /**\r\n         * Repository for storing authentication data\r\n         */\r\n        function authenticationStore(sessionStore, authenticationData) {\r\n            var storageKey = 'authenticationData';\r\n\r\n            var service = {\r\n                getAuthenticationData: getAuthenticationData,\r\n                setAuthenticationData: setAuthenticationData,\r\n                setAuthenticationTicket: setAuthenticationTicket,\r\n                clear: clear\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Gets the authentication data\r\n             */\r\n            function getAuthenticationData() {\r\n                authenticationData.clear();\r\n\r\n                var sessionData = sessionStore.get(storageKey, 'authenticationStore');\r\n\r\n                if (!sessionData ||\r\n                    !sessionData.authenticationTicket ||\r\n                    !sessionData.userData ||\r\n                    !sessionData.userData.isAuthenticated) {\r\n\r\n                    return null;\r\n                }\r\n\r\n                authenticationData.authenticationTicket = sessionData.authenticationTicket;\r\n                authenticationData.userData = sessionData.userData;\r\n\r\n                return sessionData;\r\n            }\r\n\r\n            /**\r\n             * Sets the authentication data\r\n             * @param authenticationTicket\r\n             */\r\n            function setAuthenticationData(data) {\r\n                guard.throwIfNotAnObject(\"CAA0801E\", data, \"data\");\r\n\r\n                clear();\r\n\r\n                authenticationData.authenticationTicket = data.authenticationTicket;\r\n                authenticationData.userData = data.userData;\r\n\r\n                sessionStore.set(storageKey, data, 'authenticationStore');\r\n            }\r\n\r\n            /**\r\n             * Sets the authentication data by parsing the given authenticationTicket\r\n             * @param authenticationTicket\r\n             */\r\n            function setAuthenticationTicket(authenticationTicket) {\r\n                guard.throwIfNotAnObject(\"CAA0802E\", authenticationTicket, \"authenticationTicket\");\r\n\r\n                /*jshint camelcase: false */\r\n                var data = {\r\n                    authenticationTicket: {\r\n                    \ttoken: authenticationTicket.access_token,\r\n                    \trefreshToken : authenticationTicket.refresh_token,\r\n                        issuedDate: new Date(authenticationTicket['.issued']),\r\n                        expiresDate: new Date(authenticationTicket['.expires']),\r\n                        rights: (authenticationTicket.rights ? authenticationTicket.rights.split(',') : [])\r\n                    },\r\n                    userData: {\r\n                        userId: parseInt(authenticationTicket.userId, 10),\r\n                        username: authenticationTicket.username,\r\n                        isAuthenticated: true\r\n                    }\r\n                };\r\n\r\n                setAuthenticationData(data);\r\n            }\r\n\r\n            /**\r\n             * Clears all authentication data\r\n             */\r\n            function clear() {\r\n                authenticationData.clear();\r\n\r\n                sessionStore.remove(storageKey, 'authenticationStore');\r\n            }\r\n        }\r\n\r\n        return authenticationStore;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/authenticationStore.js","//{CODE:CAA0A}\r\n// di.core.angular.authentication\r\ndefine([\r\n    'moment'\r\n], function (moment) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n        var debug = $di.debug.debugger.newLogger(\"authenticationTicketValidator\");\r\n\r\n        module.provider('authenticationTicketValidator', AuthenticationTicketValidatorProvider);\r\n\r\n        function AuthenticationTicketValidatorProvider() {\r\n            var expiryToleranceMilliseconds = 10000;\r\n            var validating = false;\r\n            var deferredActions = [];\r\n\r\n            var provider = {\r\n                $get: $get\r\n            };\r\n\r\n            provider.$get.$inject = [\r\n                'authenticationData',\r\n                'authenticationStore',\r\n                'userAuthenticationProxy',\r\n                'authenticationClientEventSubscriber',\r\n                'LOGGED_OUT_REASON',\r\n                'AUTHENTICATION_RESULT',\r\n                '$q',\r\n                'diState'\r\n            ];\r\n\r\n            return provider;\r\n\r\n            /**\r\n             * Checks the validity of the current stored authentication ticket\r\n             */\r\n            function $get(\r\n                authenticationData,\r\n                authenticationStore,\r\n                userAuthenticationProxy,\r\n                authenticationClientEventSubscriber,\r\n                LOGGED_OUT_REASON,\r\n                AUTHENTICATION_RESULT,\r\n                $q,\r\n                diState) {\r\n                var service = {\r\n                    validateTicket: validateTicket\r\n                };\r\n\r\n                return service;\r\n\r\n                function validateTicket(refresh, action) {\r\n                    var deferredAction = {\r\n                        action: action,\r\n                        deferred: $q.defer()\r\n                    };\r\n\r\n                    deferredActions.push(deferredAction);\r\n                        \r\n                    if(validating) {\r\n                        return deferredAction.deferred.promise;\r\n                    }\r\n\r\n                    validating = true;\r\n\r\n                    validateTicketInner(refresh).then(function (stillValid) {\r\n                        if (stillValid) {\r\n                            for (var i = 0; i < deferredActions.length; i++) {\r\n                                var da = deferredActions[i];\r\n                                da.deferred.resolve(da.action());\r\n                            }\r\n                        }\r\n\r\n                        deferredActions = [];\r\n\r\n                        validating = false;\r\n                    });\r\n\r\n                    return deferredAction.deferred.promise;\r\n                }\r\n\r\n                /**\r\n                 * Validates the current stored authentication ticket\r\n                 */\r\n                function validateTicketInner(refresh) {\r\n                    var deferred;\r\n\r\n                    if (!authenticationData.userData.isAuthenticated) {\r\n                        return $q.when(true);\r\n                    }\r\n\r\n                    var now = moment();\r\n                    var expiresDate = authenticationData.authenticationTicket.expiresDate;\r\n\r\n                    if (!expiresDate) {\r\n                        return $q.when();\r\n                    }\r\n\r\n                    var expiresDateMoment = moment(expiresDate);\r\n                    var difference = expiresDateMoment.diff(now);\r\n\r\n                    if (refresh && util.isDefined(authenticationData.authenticationTicket.refreshToken)) {\r\n                        if (difference <= expiryToleranceMilliseconds) {\r\n                            deferred = $q.defer();\r\n\r\n                            userAuthenticationProxy.refreshAuth(authenticationData.authenticationTicket.refreshToken)\r\n                                .then(resolved, rejected);\r\n\r\n                            return deferred.promise;\r\n                        }\r\n                    } else if (difference <= 0) {\r\n                        authenticationClientEventSubscriber.ticketExpired(expiresDateMoment);\r\n\r\n                        return $q.when(false);\r\n                    }\r\n\r\n                    return $q.when(true);\r\n\r\n                    function resolved(data) {\r\n                        var authenticationResult = data.result;\r\n\r\n                        if (authenticationResult.success) {\r\n                            if (data.changePasswordOnLogin === \"True\") {\r\n                                authenticationClientEventSubscriber.loggedOut(LOGGED_OUT_REASON.ChangePasswordOnLogin);\r\n\r\n                                deferred.resolve(true);\r\n\r\n                                return;\r\n                            }\r\n\r\n                            var oldRights = authenticationData.authenticationTicket.rights.join(',');\r\n                            var newRights = data.rights;\r\n\r\n                            authenticationStore.setAuthenticationTicket(data);\r\n\r\n                            if (oldRights !== newRights) {\r\n                                diState.reload();\r\n\r\n                                authenticationClientEventSubscriber.rightsChanged();\r\n                            }\r\n\r\n                            if (authenticationResult.serverDescription === AUTHENTICATION_RESULT.PasswordAboutToExpire) {\r\n                                //TODO: Display warning prompt?\r\n                            }\r\n\r\n                            deferred.resolve(true);\r\n                        } else {\r\n                            authenticationClientEventSubscriber.loggedOut(getLoggedOutReason());\r\n\r\n                            deferred.resolve(false);\r\n                        }\r\n\r\n                        return;\r\n\r\n                        function getLoggedOutReason() {\r\n                            switch (authenticationResult.serverDescription) {\r\n                                case AUTHENTICATION_RESULT.AccountDisabled:\r\n                                    return LOGGED_OUT_REASON.AccountDisabled;\r\n                                case AUTHENTICATION_RESULT.AccountLocked:\r\n                                    return LOGGED_OUT_REASON.AccountLocked;\r\n                                case AUTHENTICATION_RESULT.PasswordExpired:\r\n                                    return LOGGED_OUT_REASON.PasswordExpired;\r\n                                default:\r\n                                    return LOGGED_OUT_REASON.UnauthorisedServerResponse;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    function rejected(data) {\r\n                        authenticationClientEventSubscriber.loggedOut(LOGGED_OUT_REASON.UnauthorisedServerResponse);\r\n\r\n                        deferred.resolve(false);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return AuthenticationTicketValidatorProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/authenticationTicketValidator.js","//{CODE:CAA0I}\r\n// di.core.angular.authentication\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n\r\n        module.factory('authorizedObjectsFilter', authorizedObjectsFilter);\r\n\r\n        authorizedObjectsFilter.$inject = [\r\n            'authenticationData',\r\n            'associativeArrayConvertor'\r\n        ];\r\n\r\n        function authorizedObjectsFilter(\r\n            authenticationData,\r\n            associativeArrayConvertor) {\r\n            var objectsDefinitions = [],\r\n                rightsRequired = true,\r\n                requireAllRights = false;\r\n\r\n            var service = {\r\n                requireRights: requireRights,\r\n                getAuthorizedObjects: getAuthorizedObjects,\r\n                getAuthorizedObjectsAsAssociative: getAuthorizedObjectsAsAssociative\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * sets flag if object must have rights to be visible\r\n             * @param {} value \r\n             * @returns {} \r\n             */\r\n            function requireRights(value) {\r\n                rightsRequired = value;\r\n            }\r\n\r\n            /**\r\n             * Generates list of labels that match user rights\r\n             * @param {} definitions \r\n             * @returns array of objects \r\n             */\r\n            function getAuthorizedObjectsAsAssociative(data, keyPropName, valuePropName) {\r\n                guard.throwIfNotAnObject(\"CAA0I02E\", data, \"data\");\r\n\r\n                var results = getAuthorizedObjects(data);\r\n                \r\n                return associativeArrayConvertor.convert(results, keyPropName, valuePropName);\r\n            }\r\n\r\n            /**\r\n             * Generates list of objects that match user rights\r\n             * @param {} definitions \r\n             * @returns array of objects \r\n             */\r\n            function getAuthorizedObjects(definitions, requireAll) {\r\n                guard.throwIfNotAnObject(\"CAA0I01E\", definitions, \"definitions\");\r\n\r\n                if (util.isDefined(requireAll)) {\r\n                    requireAllRights = requireAll;\r\n                } else {\r\n                    requireAllRights = rightsRequired;\r\n                }\r\n\r\n                objectsDefinitions = definitions;\r\n                var userRights = authenticationData.authenticationTicket.rights;\r\n\r\n                return findObjectsWithMatchingRights(userRights);\r\n\r\n                /**\r\n                 * finds object matching user rights\r\n                 * @param {} userRights \r\n                 * @returns {} \r\n                 */\r\n                function findObjectsWithMatchingRights(userRights) {\r\n                    var objectsIndexed = [];\r\n                    var objects = [];\r\n                    var found = [];\r\n                    if (requireAllRights) {\r\n                        found = containsAll(userRights);\r\n                        var index = 1;\r\n                        _.each(found, function(obj) {\r\n                            obj.index = index;\r\n                            objectsIndexed.push(obj);\r\n                            index++;\r\n                        });\r\n                    } else {\r\n                        _.each(userRights, function(right) {\r\n                            found = containsOne(right);\r\n                            var index = 1;\r\n                            _.each(found, function(obj) {\r\n                                obj.index = index;\r\n                                objectsIndexed.push(obj);\r\n                                index++;\r\n                            });\r\n                        });\r\n                    }\r\n\r\n                    var sortedObjects = objectsIndexed.sort(compare);\r\n\r\n                    _.each(sortedObjects, function(obj) {\r\n                        if (!containsObject(obj, objects)) {\r\n                            objects.push(obj);\r\n                        };\r\n                    });\r\n\r\n                    return objects;\r\n\r\n                    /**\r\n                     * finds matching objects by all user rights\r\n                     * @param {} rights \r\n                     * @returns {} \r\n                     */\r\n                    function containsAll(rights) {\r\n                        var filtered = _.filter(objectsDefinitions, function(obj) {\r\n                            return checkAllRightsExist(obj.rights, rights);\r\n                        });\r\n\r\n                        return filtered;\r\n\r\n                        function checkAllRightsExist(needles, haystack) {\r\n                            if (!needles) {\r\n                                return !rightsRequired;\r\n                            }\r\n\r\n                            for (var i = 0, len = needles.length; i < len; i++) {\r\n                                if ($.inArray(needles[i], haystack) === -1) return false;\r\n                            }\r\n                            return true;\r\n                        }\r\n                    }\r\n\r\n                    /**\r\n                     * finds matching objects by a single user right\r\n                     * @param {} right \r\n                     * @returns {} \r\n                     */\r\n                    function containsOne(right) {\r\n                        var filtered = _.filter(objectsDefinitions, function(obj) {\r\n                            return checkRightExists(obj.rights, right);\r\n                        });\r\n\r\n                        return filtered;\r\n\r\n                        function checkRightExists(arr, val) {\r\n                            if (!arr) {\r\n                                return !rightsRequired;\r\n                            }\r\n\r\n                            var result = _.filter(arr, function(item) {\r\n                                return item === val;\r\n                            });\r\n\r\n                            return result.length > 0;\r\n                        }\r\n                    }\r\n\r\n                    /**\r\n                     * tests if array contains object\r\n                     * @param {} obj \r\n                     * @param {} list \r\n                     * @returns {} \r\n                     */\r\n                    function containsObject(obj, list) {\r\n                        var i;\r\n                        for (i = 0; i < list.length; i++) {\r\n                            if (list[i] === obj) {\r\n                                return true;\r\n                            }\r\n                        }\r\n\r\n                        return false;\r\n                    }\r\n\r\n                    /**\r\n                     * sorts array by index\r\n                     * @param {} a \r\n                     * @param {} b \r\n                     * @returns {} \r\n                     */\r\n                    function compare(a, b) {\r\n                        if (a.index < b.index)\r\n                            return -1;\r\n                        else if (a.index > b.index)\r\n                            return 1;\r\n                        else\r\n                            return 0;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return authorizedObjectsFilter;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/authorizedObjectsFilter.js","//{CODE:CAA07}\r\n// di.core.angular.authentication\r\ndefine(['angular'], function (ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diAuthentication', diAuthentication);\r\n\r\n\t\t/**\r\n\t\t * Directive encapsulating the credentials form for user authentication\r\n\t\t */\r\n\t\tfunction diAuthentication() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tcontroller: 'AuthenticationController',\r\n\t\t\t\tcontrollerAs: 'authenticationCtrl',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tonForgotPasswordClick: '&?',\r\n\t\t\t\t\tsubscribeToFirstLogin: '=',\r\n\t\t\t\t\tsubscribeToPasswordExpired: '='\r\n\t\t\t\t},\r\n\t\t\t\tlink: function (scope, element, attrs) {\r\n\t\t\t\t\tscope.focusOn = function (id) {\r\n\t\t\t\t\t\tvar focusElm = ng.element.find('#' + id);\r\n\t\t\t\t\t\tif (focusElm[0]) {\r\n\t\t\t\t\t\t\tfocusElm[0].focus();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscope.focusOn(\"username\");\r\n\t\t\t\t},\r\n\t\t\t\ttemplate: template\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tfunction template() {\r\n\t\t\tvar html =\r\n'<div\\\r\n\tid=\"authenticationpanel\">\\\r\n\t<div>\\\r\n\t\t<section\\\r\n\t\t\tclass=\"form\">\\\r\n\t\t\t<form\\\r\n\t\t\t\tdi-validate-model=\"authentication\" novalidate>\\\r\n\t\t\t\t<header\\\r\n\t\t\t\t\tclass=\"form-header\">\\\r\n\t\t\t\t\t<h1\\\r\n\t\t\t\t\t\tclass=\"title\"\\\r\n\t\t\t\t\t\tdi-translate=\"CORE.AUTHENTICATION.TITLE\">\\\r\n\t\t\t\t\t</h1>\\\r\n\t\t\t\t</header>\\\r\n\t\t\t\t<div\\\r\n\t\t\t\t\tclass=\"form-row form-group\">\\\r\n\t\t\t\t\t<di-input\\\r\n\t\t\t\t\t\tdi-input-label=\"CORE.AUTHENTICATION.USERNAME\"\\\r\n\t\t\t\t\t\tdi-input-type=\"email\"\\\r\n\t\t\t\t\t\tvalidation-property-name=\"username\"\\\r\n\t\t\t\t\t\tvalidation-model-display-name=\"CORE.AUTHENTICATION.USERNAME\"\\\r\n\t\t\t\t\t\tvalidate-on-blur=\"true\"\\\r\n\t\t\t\t\t\tng-model=\"authenticationCtrl\" \\\r\n\t\t\t\t\t\tng-model-property=\"username\">\\\r\n\t\t\t\t\t</di-input>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<div class=\"processing\" id=\"spinnerHolder\"></div>\\\r\n\t\t\t\t<div\\\r\n\t\t\t\t\tclass=\"form-row form-group\">\\\r\n\t\t\t\t\t<di-input\\\r\n\t\t\t\t\t\tdi-input-label=\"CORE.AUTHENTICATION.PASSWORD\"\\\r\n\t\t\t\t\t\tdi-input-type=\"password\"\\\r\n\t\t\t\t\t\tvalidation-property-name=\"password\"\\\r\n\t\t\t\t\t\tvalidation-model-display-name=\"CORE.AUTHENTICATION.PASSWORD\"\\\r\n\t\t\t\t\t\tng-model=\"authenticationCtrl\" \\\r\n\t\t\t\t\t\tng-model-property=\"password\">\\\r\n\t\t\t\t\t</di-input>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<div\\\r\n\t\t\t\t\tclass=\"form-row side-by-side form-group\">\\\r\n\t\t\t\t\t<a\\\r\n\t\t\t\t\t\thref=\"\"\\\r\n\t\t\t\t\t\tng-click=\"authenticationCtrl.forgotPassword()\"\\\r\n\t\t\t\t\t\tclass=\"right\"\\\r\n\t\t\t\t\t\tdi-translate=\"CORE.AUTHENTICATION.FORGOT_PASSWORD\">\\\r\n\t\t\t\t\t</a>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<div \\\r\n\t\t\t\t\tclass=\"form-row form-group\">\\\r\n\t\t\t\t\t<button\\\r\n\t\t\t\t\t\ttype=\"submit\"\\\r\n\t\t\t\t\t\tclass=\"btn center btn-success\"\\\r\n\t\t\t\t\t\tng-disabled=\"authenticationCtrl.loginProcessing\"\\\r\n\t\t\t\t\t\tdi-validate-click=\"authenticationCtrl.login()\"\\\r\n\t\t\t\t\t\tdi-translate=\"CORE.AUTHENTICATION.SUBMIT\">\\\r\n\t\t\t\t\t</button>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t</form>\\\r\n\t\t</section>\\\r\n\t</div>\\\r\n</div>';\r\n\r\n\t\t\treturn html;\r\n\t\t}\r\n\r\n\t\treturn diAuthentication;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/diAuthenticationDirective.js","// di.core.angular.authentication\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.constant('LOGGED_OUT_REASON', loggedOutReason());\r\n\r\n        function loggedOutReason() {\r\n            return {\r\n                UserLoggedOut: 'USER_LOGGED_OUT',\r\n                UnauthorisedServerResponse: 'UNAUTHORISED_SERVER_RESPONSE',\r\n                UnauthorisedState: 'UNAUTHORISED_STATE',\r\n                TicketExpired: 'TICKET_EXPIRED',\r\n                SessionTimeout: 'SESSION_TIMEOUT',\r\n                AccountDisabled: 'ACCOUNT_DISABLED',\r\n                AccountLocked: 'ACCOUNT_LOCKED',\r\n                PasswordExpired: 'PASSWORD_EXPIRED',\r\n                ChangePasswordOnLogin: 'CHANGE_PASSWORD_ON_LOGIN',\r\n                RightsChanged: 'RIGHTS_CHANGED'\r\n            };\r\n        }\r\n\r\n        return loggedOutReason;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/loggedOutReason.js","//{CODE:CAA02}\r\n// di.core.angular.authentication\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.provider('userAuthenticationProxy', UserAuthenticationProxyProvider);\r\n\r\n\t\t/**\r\n\t\t * Proxy client for authenticating credentials against the webAPI OAuth provider\r\n\t\t */\r\n\t\tfunction UserAuthenticationProxyProvider() {\r\n\t\t\tvar config = {\r\n\t\t\t\tendpoint: '',\r\n\t\t\t\turl: './token',\r\n\t\t\t\tclientId: 'website'\r\n\t\t\t};\r\n\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['dHttp', '$q', 'urlHelper', 'loggerProxy'];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"CAA0202E\", cfg, \"cfg\");\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\tfunction $get(dHttp, $q, urlHelper, loggerProxy) {\r\n\t\t\t\tvar service = {\r\n\t\t\t\t\tlogin: login,\r\n\t\t\t\t\trefreshAuth: refreshAuth\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn service;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Authenticates the given user credentials against the configured OAuth endpoint address\r\n\t\t\t\t * @param username\r\n\t\t\t\t * @param password\r\n\t\t\t\t */\r\n\t\t\t\tfunction login(username, password) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAA0207E\", username, \"username\");\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAA0208E\", password, \"password\");\r\n\r\n\t\t\t\t\tvar encodedUsername = urlHelper.encodeUriComponent(username);\r\n\t\t\t\t\tvar encodedPassword = urlHelper.encodeUriComponent(password);\r\n\t\t\t\t\tvar encodedClientId = urlHelper.encodeUriComponent(config.clientId);\r\n\r\n\t\t\t\t    loggerProxy.info(\"CAA020BI\", \"Client requesting authentication. ClientId: '\" + config.clientId + \"', Username: '\" + username + \"'\");\r\n\r\n\t\t\t\t\tvar promise = dHttp.postWithHeaders(\r\n\t\t\t\t\t\t\tconfig.url,\r\n\t\t\t\t\t\t\t'grant_type=password&username=' + encodedUsername + '&password=' + encodedPassword + '&client_id=' + encodedClientId,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tconfig.endpoint)\r\n\t\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\t\treturn promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * \trefreshes authentication data from server using refresh token and client id\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction refreshAuth(refreshToken) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAA020AE\", refreshToken, \"refreshToken\");\r\n\r\n\t\t\t\t\tvar encodedRefreshToken = urlHelper.encodeUriComponent(refreshToken);\r\n\t\t\t\t\tvar encodedClientId = urlHelper.encodeUriComponent(config.clientId);\r\n\r\n\t\t\t\t\tloggerProxy.info(\"CAA020CI\", \"Client requesting new access token. ClientId: '\" + config.clientId + \"'\");\r\n\r\n\t\t\t\t\tvar promise = dHttp.postWithHeaders(\r\n\t\t\t\t\t\t\tconfig.url,\r\n\t\t\t\t\t\t\t'grant_type=refresh_token&refresh_token=' + encodedRefreshToken + '&client_id=' + encodedClientId,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tconfig.endpoint)\r\n\t\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\t\treturn promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t    parseResult(true, data, 'authenticateUserResult');\r\n\r\n\t\t\t\t    return data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(failure) {\r\n\t\t\t\t\tvar response = failure.response;\r\n\r\n\t\t\t\t\tif (response &&\r\n\t\t\t\t\t\tresponse.status === 400 &&\r\n\t\t\t\t\t\tresponse.data &&\r\n\t\t\t\t\t\tresponse.data.error &&\r\n\t\t\t\t\t\tresponse.data.error === \"invalid_grant\") {\r\n\r\n\t\t\t\t\t\tparseResult(false, failure.response.data, 'error_description');\r\n\r\n\t\t\t\t\t\t//The http promise was rejected, but the http error is just due to failed validation.\r\n\t\t\t\t\t\t//This is not a genuine error but an expected outcome.\r\n\t\t\t\t\t\t//Therefore, we return this in the resolved callback of the promise.\r\n\t\t\t\t\t\treturn failure.response.data;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//Anything else is a genuine error\r\n\t\t\t\t\t\treturn $q.reject(failure);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction parseResult(success, data, resultPropertyName) {\r\n\t\t\t\t    var errorDetails = data[resultPropertyName];\r\n\t\t\t\t    var errorId = '0';\r\n\t\t\t\t    var errorDesc = '';\r\n\t\t\t\t    var tokenString = '';\r\n\r\n\t\t\t\t    if (util.isDefined(errorDetails)) {\r\n\t\t\t\t        var errorDetailsArr = errorDetails.split(',');\r\n\t\t\t\t        var authenticateResultParts = errorDetailsArr[0].split(':');\r\n\r\n\t\t\t\t        if (util.isDefined(authenticateResultParts[0])) {\r\n\t\t\t\t            errorId = authenticateResultParts[0];\r\n\t\t\t\t        }\r\n\r\n\t\t\t\t        if (util.isDefined(authenticateResultParts[1])) {\r\n\t\t\t\t            errorDesc = authenticateResultParts[1];\r\n\t\t\t\t        }\r\n\r\n\t\t\t\t        if (errorDetailsArr.length > 1) {\r\n\t\t\t\t            var tokenPartsArr = errorDetailsArr[1].split(':');\r\n\r\n\t\t\t\t            if (util.isDefined(tokenPartsArr[1])) {\r\n\t\t\t\t                tokenString = tokenPartsArr[1];\r\n\t\t\t\t            }\r\n\t\t\t\t        }\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    data.result = {\r\n\t\t\t\t        success: success,\r\n\t\t\t\t        id: errorId,\r\n\t\t\t\t        serverDescription: errorDesc,\r\n\t\t\t\t        token: tokenString\r\n\t\t\t\t    };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn UserAuthenticationProxyProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/userAuthenticationProxy.js","//{CODE:CAA0K}\r\n// di.core.angular.authentication\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n\r\n        module.provider('userIdleActivityMonitor', userIdleActivityMonitorProvider);\r\n\r\n        function userIdleActivityMonitorProvider() {\r\n            var config = {\r\n                timeout: 60,\r\n                idle: 60,\r\n                pageTitle: 'Data Interchange | Digital Invoice'\r\n            };\r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            }\r\n\r\n            provider.$get.$inject = ['$rootScope', 'Idle','Title'];\r\n\r\n            return provider;\r\n\r\n            function configure(cfg, idleProvider) {\r\n                guard.throwIfNotAnObject(\"CAA0K01E\", cfg, \"cfg\");\r\n                guard.throwIfNotAnObject(\"CAA0K02E\", idleProvider, \"idleProvider\");\r\n\r\n                config = cfg;\r\n\r\n                idleProvider.idle(config.idle);\r\n                idleProvider.timeout(config.timeout);\r\n                idleProvider.autoResume('notIdle');\r\n            }\r\n\r\n            function $get(rootScope, idle, Title) {\r\n\r\n                var idleStartedHandlerFn, idleEndHandlerFn, idleTimeoutHandlerFn;\r\n\r\n                rootScope.$on('IdleStart', function () {\r\n                    if (idleStartedHandlerFn && util.isFunction(idleStartedHandlerFn)) {\r\n                        idleStartedHandlerFn(config.idle, config.timeout);\r\n                    }\r\n                });\r\n\r\n                rootScope.$on('IdleEnd', function () {\r\n                    if (idleEndHandlerFn && util.isFunction(idleEndHandlerFn)) {\r\n                        idleEndHandlerFn();\r\n                    }\r\n                });\r\n\r\n                rootScope.$on('IdleTimeout', function () {\r\n                    stop();\r\n\r\n                    if (idleTimeoutHandlerFn && util.isFunction(idleTimeoutHandlerFn)) {\r\n                        idleTimeoutHandlerFn();\r\n                    }\r\n                });\r\n\r\n                return {\r\n                    start: start,\r\n                    stop: stop\r\n                };\r\n\r\n                function start(handlers) {\r\n                    Title.value(config.pageTitle);\r\n                    idleStartedHandlerFn = handlers.idleStartedHandler;\r\n                    idleEndHandlerFn = handlers.idleEndHandler;\r\n                    idleTimeoutHandlerFn = handlers.idleTimeoutHandler;\r\n\r\n                    idle.watch();\r\n                }\r\n\r\n                function stop() {\r\n                    idle.unwatch();\r\n                }\r\n            }\r\n        }\r\n\r\n        return userIdleActivityMonitorProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/userIdleActivityMonitor.js","//{CODE:CAA0J}\r\n// di.core.angular.authentication\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n\r\n        module.factory('userRightsRepository', userRightsRepository);\r\n\r\n        userRightsRepository.$inject = ['authenticationData'];\r\n\r\n        function userRightsRepository(\r\n            authenticationData) {\r\n\r\n            var service = {\r\n                userHasRight: userHasRight\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * tests if current user has specific right              \r\n             */\r\n            function userHasRight(rightName) {\r\n                guard.throwIfEmptyString(\"CAA0H01E\", rightName, \"rightName\");\r\n\r\n                var userRights = authenticationData.authenticationTicket.rights;\r\n\r\n                var hasRight = _.find(userRights, function(right) {\r\n                    return right === rightName;\r\n                });\r\n\r\n                return util.isDefined(hasRight);\r\n            }\r\n        }\r\n\r\n        return userRightsRepository;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/authentication/userRightsRepository.js","//{CODE:CAC0M}\r\n// di.core.angular.caching\r\ndefine([\r\n\t'./scopeCacheFactory'\r\n], function (\r\n\tscopeCacheFactoryLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    scopeCacheFactoryLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/caching/_loader.js","//{CODE:CAC0L}\r\n// di.core.angular.caching\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    var debug = $di.debug.debugger.newLogger('scopeCacheFactory');\r\n\r\n\t\tmodule.factory('scopeCacheFactory', scopeCacheFactory);\r\n\r\n\t    scopeCacheFactory.$inject = ['$q'];\r\n\r\n\t\t/**\r\n\t\t * Factory for creating scopeCache objects\r\n\t\t */\r\n\t\tfunction scopeCacheFactory($q) {\r\n\t\t    var guard = $di.exception.guard;\r\n\t\t    var util = $di.utility.util;\r\n\r\n\t\t\treturn {\r\n\t\t\t    create: create\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Create a new scopeCache associated with the given scope\r\n\t\t\t * @param scope\r\n\t\t\t */\r\n\t\t\tfunction create(scope) {\r\n\t\t\t    guard.throwIfNotAnObject(\"CAC0L01E\", scope, \"scope\");\r\n\r\n\t\t\t    scope.scopeCacheData = scope.scopeCacheData || {};\r\n\r\n\t\t\t    return {\r\n\t\t\t        get: get,\r\n                    clear : clear\r\n\t\t\t    };\r\n\r\n\t\t\t    function clear() {\r\n\t\t\t        scope.scopeCacheData = {};\r\n\t\t\t    }\r\n\r\n\t\t\t    /**\r\n\t\t\t     * Gets data from the scope if it exists otherwise gets data from the given delegate\r\n                 * and then stores it in scope. Always return the data in a promise.\r\n                 * @param delegateName\r\n\t\t\t     * @param delegate\r\n\t\t\t     * @param args\r\n\t\t\t     */\r\n\t\t\t    function get(delegateName, delegate, args) {\r\n\t\t\t        guard.throwIfEmptyString(\"CAC0L02E\", delegateName, \"delegateName\");\r\n\t\t\t        guard.throwIfNotAFunction(\"CAC0L03E\", delegate, \"delegate\");\r\n\r\n\t\t\t        var cacheKey = delegateName + (util.isDefined(args) ? '_' + JSON.stringify(args) : '');\r\n\t\t\t        var promise;\r\n\r\n\t\t\t        if (util.isDefined(scope.scopeCacheData[cacheKey])) {\r\n\t\t\t            promise = $q.when(scope.scopeCacheData[cacheKey]);\r\n\t\t\t        } else {\r\n\t\t\t            promise = delegate.apply(this, args).then(resolved, rejected);\r\n\r\n\t\t\t            scope.scopeCacheData[cacheKey] = promise;\r\n\r\n\t\t\t            return promise;\r\n\t\t\t        }\r\n\r\n\t\t\t        return promise;\r\n\r\n\t\t\t        function resolved(data) {\r\n\t\t\t            scope.scopeCacheData[cacheKey] = data;\r\n\r\n\t\t\t            return data;\r\n\t\t\t        }\r\n\r\n\t\t\t        function rejected(data) {\r\n\t\t\t            return $q.reject(data);\r\n\t\t\t        }\r\n\t\t\t    }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scopeCacheFactory;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/caching/scopeCacheFactory.js","//{CODE:CAC02}\r\n// di.core.angular.controls\r\ndefine([\r\n\t'./button/_loader',\r\n\t'./image/_loader',\r\n\t'./input/_loader',\r\n\t'./diTranscludeRepeatDirective',\r\n\t'./diTranscludeReplaceDirective',\r\n\t'./elementNotifier',\r\n\t'./elementNotifierStyles',\r\n\t'./notifier',\r\n\t'./promptWindow/_loader',\r\n\t'./modal/_loader',\r\n\t'./spinner/_loader',\r\n\t'./toggle/_loader',\r\n\t'./select/_loader',\r\n\t'./simpleSelect/_loader',\r\n\t'./multiSelect/_loader',\r\n\t'./diEnabledDirective',\r\n\t'./diClickDirective',\r\n\t'./dataTable/_loader',\r\n\t'./gridPaginationButtons/_loader',\r\n\t'./gridPaginationPageSize/_loader',\r\n\t'./enterKey/_loader',\r\n    './chart/_loader',\r\n\t'./diNoDirtyDirective',\r\n    './restrictions/_loader'\r\n], function (\r\n\tbuttonDirectiveLoader,\r\n\timageDirectiveLoader,\r\n\tinputLoader,\r\n\ttranscludeRepeatDirectiveLoader,\r\n\ttranscludeReplaceDirectiveLoader,\r\n    elementNotifierLoader,\r\n\telementNotifierStylesLoader,\r\n    notifierLoader,\r\n\tpromptWindowLoader,\r\n\tmodalLoader,\r\n\tspinnerLoader,\r\n\ttoggleLoader,\r\n\tselectLoader,\r\n\tsimpleSelectLoader,\r\n\tmultiSelectLoader,\r\n\tdiEnabledLoader,\r\n\tdiClickLoader,\r\n    diDataTableLoader,\r\n    gridPaginationButtonsLoader,\r\n    gridPaginationPageSizeLoader,\r\n    enterKeyLoader,\r\n    chartLoader,\r\n\tdiNoDirtyLoader,\r\n    restrictionsLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        buttonDirectiveLoader(module);\r\n        imageDirectiveLoader(module);\r\n        inputLoader(module);\r\n        transcludeRepeatDirectiveLoader(module);\r\n        transcludeReplaceDirectiveLoader(module);\r\n        elementNotifierLoader(module);\r\n        elementNotifierStylesLoader(module);\r\n        notifierLoader(module);\r\n        promptWindowLoader(module);\r\n        modalLoader(module);\r\n        spinnerLoader(module);\r\n        toggleLoader(module);\r\n        selectLoader(module);\r\n        simpleSelectLoader(module);\r\n        multiSelectLoader(module);\r\n        diEnabledLoader(module);\r\n        diClickLoader(module);\r\n        diDataTableLoader(module);\r\n        gridPaginationButtonsLoader(module);\r\n        gridPaginationPageSizeLoader(module);\r\n        enterKeyLoader(module);\r\n        chartLoader(module);\r\n        diNoDirtyLoader(module);\r\n        restrictionsLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/_loader.js","//{CODE:CAC0Y}\r\n// di.core.angular.controls.button\r\ndefine([\r\n    './diButtonController',\r\n\t'./diButtonDirective'\r\n], function (\r\n    buttonContrllerLoader,\r\n    buttonDirectiveLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        buttonContrllerLoader(module);\r\n        buttonDirectiveLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/button/_loader.js","//{CODE:CAC0Z}\r\n// di.core.angular.controls.button\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.controller('DiButtonController', DiButtonController);\r\n\r\n        DiButtonController.$inject = ['$scope', 'promptWindow'];\r\n\r\n        function DiButtonController(scope, promptWindow) {\r\n            var vm = this;\r\n\r\n            vm.clicked = clicked;\r\n            scope.blur = false;\r\n\r\n            return;\r\n\r\n            /**\r\n\t\t\t * Event handler for button click\t\t\t \r\n\t\t\t */\r\n            function clicked() {\r\n                var valid = true;\r\n\r\n                scope.blur = true;\r\n\r\n\r\n                //This is a nasty hack to make the Create New button to work! Sorry!\r\n                if (util.isDefined(scope.diToggleTrigger)) {\r\n                    scope.$parent.$parent.diToggleCtrl.toggle();\r\n                    return;\r\n                }\r\n\r\n                if (util.isDefined(scope.prompt)) {\r\n                    if (util.isDefined(scope.prePromptAction)) {\r\n                        valid = scope.prePromptAction();\r\n\r\n                        //If pre-prompt action returns falsy value other than undefined do not continue\r\n                        if (util.isDefined(valid) && !valid) {\r\n                            return;\r\n                        }\r\n                        else if (util.isObject(valid) && util.isFunction(valid.then)) {\r\n                            //promise must resolve to a configuration object for the prompt\r\n                            valid.then(displayPromptIfRequired);\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    displayPromptIfRequired();\r\n\r\n                }\r\n                else {\r\n                    scope.action();\r\n                }\r\n\r\n                /**\r\n\t\t\t\t * Function which uses the provided configuration \r\n\t\t\t\t * or defaults retrieved from the scope to display a confirmation prompt before the \r\n\t\t\t\t * action from the scope is completed\r\n\t\t\t\t * @param promptConfiguration - The configuration for the prompt\r\n\t\t\t\t */\r\n                function displayPromptIfRequired(promptConfiguration) {\r\n                    var defaultConfiguration = {\r\n                        callback: callback,\r\n                        title: scope.promptTitle,\r\n                        message: scope.promptMessage,\r\n                        condition: scope.promptCondition,\r\n                        okBtnText: scope.promptOkBtnText,\r\n                        cancelBtnText: scope.promptCancelBtnText\r\n                    };\r\n\r\n                    if (util.isNullOrUndefined(promptConfiguration)) {\r\n                        promptConfiguration = {};\r\n                    }\r\n\r\n                    _.defaults(promptConfiguration, defaultConfiguration);\r\n\r\n                    //If condition to display prompt not met, then skip prompt and trigger action\r\n                    if (util.isDefined(promptConfiguration.condition) && !promptConfiguration.condition) {\r\n                        scope.action();\r\n                    } else {\r\n                        promptWindow.confirm(promptConfiguration);\r\n                    }\r\n                }\r\n\r\n                function callback(result) {\r\n                    if (result) {\r\n                        scope.action();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return DiButtonController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/button/diButtonController.js","//{CODE:CAC0X}\r\n// di.core.angular.controls.button\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tmodule.directive('diButton', diButton);\r\n\r\n\t\tfunction diButton() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\ttemplate: template,\r\n\t\t\t\tcontroller: 'DiButtonController',\r\n\t\t\t\tcontrollerAs: 'diButtonCtrl',\r\n\t\t\t\treplace: false,\r\n\t\t\t\ttransclude: false,\r\n\t\t\t\tscope: {\r\n\t\t\t\t\ttooltip: '@',\r\n\t\t\t\t\tvalidate: '@',\r\n\t\t\t\t\tprompt: '@',\r\n\t\t\t\t\tpromptCondition: \"=\",\r\n\t\t\t\t\tpromptTitle: '@',\r\n\t\t\t\t\tpromptMessage: '@',\r\n\t\t\t\t\tpromptOkBtnText: '@',\r\n\t\t\t\t\tpromptCancelBtnText: '@',\r\n\t\t\t\t\tprePromptAction: '&?',\r\n\t\t\t\t\taction: '&',\r\n\t\t\t\t\timage: '@',\r\n\t\t\t\t\timageColour: '@',\r\n\t\t\t\t\tenabled: '@',\r\n\t\t\t\t\tbtnClass: '@',\r\n\t\t\t\t\tbtnDisabledClass: '@',\r\n\t\t\t\t\tfilled: '@',\r\n\t\t\t\t\ttext: '@',\r\n\t\t\t\t\tdiToggleTrigger: '@'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t* This should be placed in a seperate .html file - we need to provide deployment solution for this?\r\n\t\t\t* Perhaps npm - gulp-angular-templatecache?\r\n\t\t\t*/\r\n\t\t\tfunction template(element, attrs) {\r\n\t\t\t\tvar html =\r\n'<div\\\r\n\tng-if=\"text !== undefined\"\\\r\n\tclass=\"btn-container\"\\\r\n\tng-class=\"tooltip ? \\'tooltip-wrap\\' : \\'\\'\"\\>\\\r\n\t<button\\\r\n\t\tid=\"btn\"\\\r\n\t\ttype=\"button\"\\\r\n\t\tng-class=\"[\\'center\\', btnClass ? btnClass : \\'btn small\\', image ? \\'center iconed\\' : \\'\\', filled ? \\'\\' : \\'\\']\"\\\r\n\t\tdi-click=\"diButtonCtrl.clicked()\">\\\r\n\t\t<di-image\\\r\n\t\t\tng-if=\"image !== undefined\"\\\r\n\t\t\timage-colour=\"{{::imageColour}}\"\\\r\n\t\t\timage=\"{{::image}}\"\\\r\n\t\t\tclass=\"icon\">\\\r\n\t\t</di-image>\\\r\n\t\t<span\\\r\n\t\t\tid=\"span\"\\\r\n\t\t\tdi-translate=\"{{::text}}\">\\\r\n\t\t</span>\\\r\n\t</button>\\\r\n\t<div\\\r\n\t\tid=\"btnDisabled\"\\\r\n\t\tstyle=\"display: none\"\\\r\n\t\tclass=\"outline\"\\\r\n\t\tng-class=\"[btnDisabledClass ? btnDisabledClass : btnClass ? btnClass : \\'btn-disabled small\\', image ? \\'center iconed\\' : \\'\\']\">\\\r\n\t\t<di-image\\\r\n\t\t\tng-if=\"image !== undefined\"\\\r\n\t\t\tid=\"imageDisabled\"\\\r\n\t\t\timage-colour=\"offWhite\"\\\r\n\t\t\timage=\"{{::image}}\"\\\r\n\t\t\tclass=\"icon\">\\\r\n\t\t</di-image>\\\r\n\t\t<span\\\r\n\t\t\tid=\"spanDisabled\"\\\r\n\t\t\tdi-translate=\"{{::text}}\">\\\r\n\t\t</span>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tng-if=\"tooltip\"\\\r\n\t\tid=\"tooltip\"\\\r\n\t\tclass=\"tooltip\">\\\r\n\t\t<span\\\r\n\t\t\tdi-translate=\"{{::tooltip}}\"></span>\\\r\n\t</div>\\\r\n</div>\\\r\n<div\\\r\n\tng-if=\"text === undefined\"\\\r\n\tclass=\"btn-container\"\\\r\n\tng-class=\"tooltip ? \\'tooltip-wrap\\' : \\'\\'\">\\\r\n\t<button\\\r\n\t\tid=\"btn\"\\\r\n\t\ttype=\"button\"\\\r\n\t\tng-class=\"btnClass ? btnClass : \\'btn-icon\\'\"\\\r\n\t\tdi-click=\"diButtonCtrl.clicked()\">\\\r\n\t\t<di-image\\\r\n\t\t\tng-if=\"image !== undefined\"\\\r\n\t\t\tid=\"image\"\\\r\n\t\t\timage-colour=\"{{::imageColour}}\"\\\r\n\t\t\tclass=\"icon\"\\\r\n\t\t\timage=\"{{::image}}\">\\\r\n\t\t</di-image>\\\r\n\t\t<span\\\r\n\t\t\tid=\"span\"\\\r\n\t\t\tdi-translate=\"{{::text}}\">\\\r\n\t\t</span>\\\r\n\t</button>\\\r\n\t<div\\\r\n\t\tid=\"btnDisabled\"\\\r\n\t\tstyle=\"display: none\"\\\r\n\t\tng-class=\"btnDisabledClass ? btnDisabledClass : btnClass ? btnClass : \\'btn-icon-disabled\\'\">\\\r\n\t\t<di-image\\\r\n\t\t\tng-if=\"image !== undefined\"\\\r\n\t\t\tid=\"imageDisabled\"\\\r\n\t\t\timage-colour=\"offWhite\"\\\r\n\t\t\tclass=\"icon\"\\\r\n\t\t\timage=\"{{::image}}\">\\\r\n\t\t</di-image>\\\r\n\t\t<span\\\r\n\t\t\tid=\"spanDisabled\">\\\r\n\t\t</span>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tng-if=\"tooltip\"\\\r\n\t\tid=\"tooltip\"\\\r\n\t\tclass=\"tooltip\">\\\r\n\t\t<span\\\r\n\t\t\tdi-translate=\"{{::tooltip}}\"></span>\\\r\n\t</div>\\\r\n</div>';\r\n\r\n\t\t\t\tif (util.isDefined(attrs.validate)) {\r\n\t\t\t\t\thtml = html.replace('di-click', 'di-validate-click');\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn html;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diButton;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/button/diButtonDirective.js","//{CODE:DEF0G}\r\n// di.core.angular.controls.chart\r\ndefine([\r\n    './diChartController',\r\n\t'./diChartDirective',\r\n\t'./chartPlotter'\r\n], function (\r\n    diChartController,\r\n    diChartDirective,\r\n    chartPlotter) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diChartController(module);\r\n        diChartDirective(module);\r\n        chartPlotter(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/chart/_loader.js","//{CODE:DEF0D}\r\n// di.core.angular.controls.chart\r\ndefine([\r\n\t\t'plotly'\r\n], function (plotly) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('chartPlotter', chartPlotter);\r\n\r\n\t\tfunction chartPlotter() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tplot: plot,\r\n\t\t\t\trestyle: restyle,\r\n\t\t\t\trelayout: relayout,\r\n\t\t\t\taddDataSeries: addTraces,\r\n\t\t\t\tdeleteDataSeries: deleteTraces,\r\n\t\t\t\treorderDataSeries: moveTraces,\r\n\t\t\t\tredraw: redraw,\r\n\t\t\t\tonEvent: on,\r\n\t\t\t\tpurge: purge,\r\n\t\t\t\ttoImage: toImage,\r\n\t\t\t\tdownloadImage: downloadImage,\r\n\t\t\t\tresize: resize,\r\n\t\t\t\treconfigure: updatePlotConfig\r\n\t\t\t};\r\n\r\n\t\t\t//Plotly's graph description places attributes into two categories: \r\n\t\t\t//traces (objects that describe a single series of data in a graph) \r\n\t\t\t//and layout (attributes that apply to the rest of the chart, like the title, xaxis, or annotations). \r\n\t\t\t//Traces are categorized by chart type (e.g. scatter, heatmap).\r\n\r\n\t\t\t/**\r\n             * Use Plotly.newPlot to create a new plot in an empty <div> element. \r\n             * You can either supply height and width in layout, or give graphDiv a height and width in css.\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction plot(graphDiv, data, layout, config) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D01E\", graphDiv, 'graphDiv');\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D02E\", data, 'data');\r\n\r\n\t\t\t\tplotly.newPlot(graphDiv, data, layout, config);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Edit attributes with Plotly.restyle\r\n             * A more efficient means of changing parameters in the data array. \r\n             * When restyling, you may choose to have the specified changes effect as many traces as desired. \r\n             * The update is given as a single object and the traces that are effected are given as a list of traces indices. \r\n             * Leaving the trace indices unspecified assumes that you want to restyle all the traces.\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction restyle(graphDiv, update, tracesIndices) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D03E\", graphDiv, 'graphDiv');\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D04E\", update, 'update');\r\n\r\n\t\t\t\tplotly.restyle(graphDiv, update, tracesIndices);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Update layout attributes with Plotly.relayout\r\n             * A more efficient means of updating just the layout in a graphDiv.\r\n             * The call signature and arguments for relayout are similar (but simpler) to restyle. \r\n             * Because there are no indices to deal with, arrays need not be wrapped. \r\n             * Also, no argument specifying applicable trace indices is passed in.\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction relayout(graphDiv, update) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D05E\", graphDiv, 'graphDiv');\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D06E\", update, 'update');\r\n\r\n\t\t\t\tplotly.relayout(graphDiv, update);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Add Traces with Plotly.addTraces\r\n             * This allows you to add new traces to an existing graphDiv at any location in its data array.\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction addTraces(graphDiv, traces, index) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D07E\", graphDiv, 'graphDiv');\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D08E\", traces, 'traces');\r\n\r\n\t\t\t\tplotly.addTraces(graphDiv, traces, index);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Delete Traces with Plotly.deleteTraces\r\n             * This allows you to remove traces from an existing graphDiv by specifying the indices of the traces to be removed.\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction deleteTraces(graphDiv, indices) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D09E\", graphDiv, 'graphDiv');\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D0AE\", indices, 'indices');\r\n\r\n\t\t\t\tplotly.deleteTraces(graphDiv, indices);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Move Traces with Plotly.moveTraces\r\n             * This allows you to reorder traces in an existing graphDiv. \r\n             * This will change the ordering of the layering and the legend.\r\n             * oldIndex and newIndex can be arrays specifying multiple indices\r\n             * If newIndex is not specified, it will move the trace(s) to the end of the data array\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction moveTraces(graphDiv, oldIndex, newIndex) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D0BE\", graphDiv, 'graphDiv');\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D0CE\", oldIndex, 'oldIndex');\r\n\r\n\t\t\t\tplotly.moveTraces(graphDiv, oldIndex, newIndex);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Redraw with Plotly.redraw\r\n             * Use redraw to trigger a complete recalculation and redraw of the graph. \r\n             * This is not the fastest way to change single attributes, but may be the simplest way. \r\n             * You can make any arbitrary change to the data and layout objects, including completely replacing them, then call redraw.\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction redraw(graphDiv) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D0DE\", graphDiv, 'graphDiv');\r\n\r\n\t\t\t\tplotly.redraw(graphDiv);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Using Plotly events\r\n             * Plots emit events prefixed with plotly_ when clicked or hovered over, and event handlers can be bound to events using the on method that is exposed by the plot div object. \r\n             * It is possible to use jQuery events, but plotly.js no longer bundles jQuery, so we recommend using the plotly.js implementation.\r\n             * As well as plotly_click, there is plotly_beforehover, plotly_hover and plotly_unhover. \r\n             * @returns {} \r\n             */\r\n\t\t\tfunction on(graphDiv, event, handler) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D0EE\", graphDiv, 'graphDiv');\r\n\r\n\t\t\t\tgraphDiv.on('plotly_' + event, handler);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Purging plotting surface with Plotly.purge\r\n             * Using purge will clear the div, and remove any Plotly plots that have been placed in it.\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction purge(graphDiv) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D0FE\", graphDiv, 'graphDiv');\r\n\r\n\t\t\t\tplotly.purge(graphDiv);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Generating Image Strings with Plotly.toImage\r\n             * toImage will turn an existing plot into a image string, which could the be used to retrieve a copy of the image.\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction toImage(graphDiv, imageProperties) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D0GE\", graphDiv, 'graphDiv');\r\n\r\n\t\t\t\tplotly.toImage(graphDiv, imageProperties);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Downloading Images of Plots with Plotly.downloadImage\r\n             * downloadImage will trigger a request to download the image of a Plotly plot.\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction downloadImage(graphDiv, imageProperties) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D0HE\", graphDiv, 'graphDiv');\r\n\r\n\t\t\t\tplotly.downloadImage(graphDiv, imageProperties);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Resizes the given chart\r\n             * @param {} graphDiv \r\n             * @returns {} \r\n             */\r\n\t\t\tfunction resize(graphDiv) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D0IE\", graphDiv, 'graphDiv');\r\n\r\n\t\t\t\tplotly.Plots.resize(graphDiv);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Will plot the chart with the old data and layout and the new configuration\r\n\t\t\t * @param {} graphDiv \r\n\t\t\t * @param {} configObj \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction updatePlotConfig(graphDiv, configObj) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D0JE\", graphDiv, 'graphDiv');\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"DEF0D0KE\", configObj, 'configObj');\r\n\r\n\t\t\t\tplotly.plot(graphDiv, undefined, undefined, configObj);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn chartPlotter;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/chart/chartPlotter.js","//{CODE:DEF0F}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('DiChartController', DiChartController);\r\n\r\n\t\tDiChartController.$inject = ['$scope', 'chartPlotter'];\r\n\r\n\t\tfunction DiChartController(scope, chartPlotter) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tinitialise();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\tfunction initialise() {\r\n\r\n\t\t\t\tvm.config = _.extend({}, getDefaultConfigOptions(), scope.config);\r\n\t\t\t\tvm.layout = _.extend({}, getDefaultLayoutSettings(), scope.layout);\r\n\t\t\t\tvm.drawChart = drawChart;\r\n\t\t\t\tvm.resizeChart = resizeChart;\r\n\t\t\t\tvm.purgeChart = purgeChart;\r\n\r\n\t\t\t\tsetWatches();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Extends the config object defined on the scope with default properties\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction getDefaultConfigOptions() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdisplaylogo: false,\r\n\t\t\t\t\tautosizable: true,\r\n\t\t\t\t\tautosize: true,\r\n\t\t\t\t\tfillFrame: false,\r\n\t\t\t\t\tshowLink: false,\r\n\t\t\t\t\tdisplayModeBar: false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Extends the layout object defined on the scope with default properties\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction getDefaultLayoutSettings() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpaper_bgcolor: 'rgba(0,0,0,0)', //transparent background\r\n\t\t\t\t\tplot_bgcolor: 'rgba(0,0,0,0)',  //transparent background\r\n\t\t\t\t\tautosize: true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Draws the chart\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction drawChart() {\r\n\t\t\t\tif (util.isDefined(scope.getDirectiveElement)) {\r\n\t\t\t\t\tvar elem = scope.getDirectiveElement();\r\n\t\t\t\t\tchartPlotter.plot(elem, scope.data, vm.layout, vm.config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Resizes the chart\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction resizeChart() {\r\n\t\t\t\tif (util.isDefined(scope.getDirectiveElement)) {\r\n\t\t\t\t\tvar elem = scope.getDirectiveElement();\r\n\t\t\t\t\tchartPlotter.resize(elem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Removes the chart\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction purgeChart() {\r\n\t\t\t\tif (util.isDefined(scope.getDirectiveElement)) {\r\n\t\t\t\t\tvar elem = scope.getDirectiveElement();\r\n\t\t\t\t\tchartPlotter.purge(elem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Sets up watching the data, layout and config objects\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction setWatches() {\r\n\r\n\t\t\t\tscope.$watch(function () { return scope.config; }, function (update) {\r\n\t\t\t\t\tif (!util.isNullOrUndefined(update)) {\r\n\t\t\t\t\t\tvm.config = _.extend({}, getDefaultConfigOptions(), update);\r\n\r\n\t\t\t\t\t\tif (util.isDefined(scope.getDirectiveElement)) {\r\n\t\t\t\t\t\t\tchartPlotter.reconfigure(scope.getDirectiveElement(), vm.config);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tscope.$watchCollection(function () { return scope.data; }, function (data) {\r\n\t\t\t\t\tif (!util.isNullOrUndefined(data) && util.isDefined(scope.getDirectiveElement)) {\r\n\t\t\t\t\t\tchartPlotter.redraw(scope.getDirectiveElement());\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tscope.$watch(function () { return scope.layout; }, function (update) {\r\n\t\t\t\t\tif (!util.isNullOrUndefined(update)) {\r\n\t\t\t\t\t\tvm.layout = _.extend({}, getDefaultLayoutSettings(), update);\r\n\r\n\t\t\t\t\t\tif (util.isDefined(scope.getDirectiveElement)) {\r\n\t\t\t\t\t\t\tchartPlotter.relayout(scope.getDirectiveElement(), vm.layout);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn DiChartController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/chart/diChartController.js","//{CODE:DEF0E}\r\ndefine(['angular'], function (angular) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\r\n\t\tmodule.directive('diChart', diChart);\r\n\r\n\t\tdiChart.$inject = ['$window'];\r\n\r\n\t\tfunction diChart($window) {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\ttemplate: '<div></div>',\r\n\t\t\t\tcontroller: 'DiChartController',\r\n\t\t\t\tcontrollerAs: 'diChartCtrl',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tdata: '=',\r\n\t\t\t\t\tlayout: '=',\r\n\t\t\t\t\tconfig: '='\r\n\t\t\t\t},\r\n\t\t\t\tlink: link,\r\n\t\t\t\treplace: true\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope, element, attributes, controller) {\r\n\t\t\t\tscope.getDirectiveElement = function () {\r\n\t\t\t\t\treturn element[0];\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcontroller.drawChart();\r\n\r\n\t\t\t\tangular.element($window).on('resize', onResize);\r\n\t\t\t\tscope.$on('$destroy', cleanUp);\r\n\r\n\t\t\t\t/**\r\n                 * Resizes the chart\r\n                 * @returns {} \r\n                 */\r\n\t\t\t\tfunction onResize() {\r\n\t\t\t\t\tcontroller.resizeChart();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n                 *  Performs cleanup\r\n                 * @returns {} \r\n                 */\r\n\t\t\t\tfunction cleanUp() {\r\n\t\t\t\t\tangular.element($window).off('resize', onResize);\r\n\t\t\t\t\tcontroller.purgeChart();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diChart;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/chart/diChartDirective.js","//{CODE:ACD02}\r\n// di.core.angular.controls.datatable\r\ndefine([\r\n    './diDataTableDirective',\r\n    './diDataTableController',\r\n    './diTemplateCompilerDirective'\r\n], function (\r\n    diDataTableDirectiveLoader,\r\n    diDataTableControllerLoader,\r\n    diTemplateCompilerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diTemplateCompilerLoader(module);\r\n        diDataTableDirectiveLoader(module);\r\n        diDataTableControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/dataTable/_loader.js","//{CODE:CAC0Z}\r\n// di.core.angular.controls.datatable\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('DiDataTableController', DiDataTableController);\r\n\r\n\t\tDiDataTableController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'translator'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * controller for data table\r\n\t\t * @param {} scope \r\n\t\t * @param {} translator \r\n\t\t * @returns {} \r\n\t\t */\r\n\t\tfunction DiDataTableController(scope, translator) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvm.keepWatch = \"true\";\r\n\t\t\tvm.currentPage = 0;\r\n\t\t\tvm.data = [];\r\n\t\t\tvm.tableOptions = {}\r\n\r\n\t\t\tvm.clicked = clicked;\r\n\t\t\tvm.dblClicked = dblClicked;\r\n\r\n\t\t\tvm.displayData = displayData;\r\n\t\t\tvm.selectRow = selectRow;\r\n\t\t\tvm.getDataForPage = getDataForPage;\r\n\t\t\tvm.getCurrentlySelectedItems = getCurrentlySelectedItems;\r\n\t\t\tvm.getTotalPages = getTotalPages;\r\n\t\t\tvm.updatePagination = updatePagination;\r\n\t\t\tvm.changePage = changePage;\r\n\r\n\t\t\tvm.onOptionsForResizeLoaded = null;\r\n\t\t\tvm.onDataLoaded = null;\r\n\t\t\tvm.onRowClick = null;\r\n\t\t\tvm.onRowDblClick = null;\r\n\r\n\t\t\tif (util.isDefined(scope.keepWatch)) {\r\n\t\t\t\tvm.keepWatch = scope.keepWatch;\r\n\t\t\t}\r\n\r\n\t\t\tif (scope.rowClick) {\r\n\t\t\t\tvm.onRowClick = scope.rowClick;\r\n\t\t\t}\r\n\r\n\t\t\tif (scope.rowDoubleClick) {\r\n\t\t\t\tvm.onRowDblClick = scope.rowDoubleClick;\r\n\t\t\t}\r\n\r\n\t\t\tvm.onOptionsForButtonsLoaded = null;\r\n\r\n\t\t\tvm.setPaginationPageSizeButtonsOptions = function (setFunc) {\r\n\t\t\t\tvm.onOptionsForResizeLoaded = setFunc;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.dataLoaded = function (setFunc) {\r\n\t\t\t\tvm.onDataLoaded = setFunc;\r\n\t\t\t};\r\n\r\n\t\t\twatchItems();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * watcher checking if data has been changed             \r\n\t\t\t */\r\n\t\t\tfunction watchItems() {\r\n\t\t\t\tvar unwatch = function () { };\r\n\t\t\t\tvar loaded = false;\r\n\r\n\t\t\t\tif (vm.keepWatch === \"false\") {\r\n\t\t\t\t\tunwatch = scope.$watch(watchExpression, initialiseOnce);\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscope.$watchCollection('items', initialise);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction watchExpression() {\r\n\t\t\t\t\tloaded = scope.items.length > 0;\r\n\t\t\t\t\treturn scope.items.length;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction initialiseOnce() {\r\n\t\t\t\t\tif (loaded) {\r\n\t\t\t\t\t\tunwatch();\r\n\t\t\t\t\t\tinitialise();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * initializes table settings\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction initialise() {\r\n\t\t\t\tif (util.isDefined(scope.options)) {\r\n\t\t\t\t\tvm.currentPage = util.isNumber(scope.options.paginationPageNumber) ? scope.options.paginationPageNumber - 1 : 0;\r\n\t\t\t\t\tvm.tableOptions = scope.options;\r\n\r\n\t\t\t\t\tif (!util.isDefined(scope.options.data)) {\r\n\t\t\t\t\t\tvm.tableOptions.data = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvm.tableOptions.data.fill(scope.items);\r\n\r\n\t\t\t\t\tvm.tableOptions.pagination = {\r\n\t\t\t\t\t\tseek: vm.changePage,\r\n\t\t\t\t\t\tresize: vm.updatePagination\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (vm.onOptionsForButtonsLoaded) {\r\n\t\t\t\t\t\tvm.onOptionsForButtonsLoaded(vm.tableOptions);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (vm.onOptionsForResizeLoaded) {\r\n\t\t\t\t\t\tvm.onOptionsForResizeLoaded(vm.tableOptions);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (vm.onDataLoaded) {\r\n\t\t\t\t\t\tvm.onDataLoaded(vm.tableOptions);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttranslateColumnHeaders();\r\n\r\n\t\t\t\t\tdisplayData(vm.currentPage);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * translates column names\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction translateColumnHeaders() {\r\n\t\t\t    translator.whenReady()\r\n\t\t\t        .then(function() {\r\n\t\t\t            _.each(vm.tableOptions.columns, function (column) {\r\n\t\t\t                column.name = translator.instantTranslate(column.nameLanguageKey);\r\n\t\t\t                column.visible = util.isDefined(column.visible) ? column.visible : true;\r\n\t\t\t            });\r\n\t\t\t        });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * event for row mouse click\r\n\t\t\t * @param {} item \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction clicked(item) {\r\n\t\t\t\tif (vm.tableOptions.enableSelect === true) {\r\n\t\t\t\t\tselectRow(item, item.isSelected);\r\n\t\t\t\t\traiseOnSelectionChanged();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (vm.onRowClick) {\r\n\t\t\t\t\tvm.onRowClick(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * event for row mouse double click\r\n\t\t\t * @param {} item \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction dblClicked(item) {\r\n\t\t\t\tif (vm.tableOptions.enableSelect === true) {\r\n\t\t\t\t\tselectRow(item, false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (vm.onRowDblClick) {\r\n\t\t\t\t\tvm.onRowDblClick(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * marks item as selected or un-selected depending on settings and previous state\r\n\t\t\t * @param {} item \r\n\t\t\t * @param {} selected \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction selectRow(item, selected) {\r\n\t\t\t\tvar wasSelected = selected;\r\n\r\n\t\t\t\tvar multiSelect = vm.tableOptions.multiSelect;\r\n\r\n\t\t\t\tif (multiSelect === false) {\r\n\t\t\t\t\tclearSelectedRows();\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.isSelected = !wasSelected;\r\n\t\t\t}\r\n\r\n\t\t\tfunction clearSelectedRows() {\r\n\t\t\t\tvar selectedRows = vm.getCurrentlySelectedItems();\r\n\t\t\t\tselectedRows.forEach(\r\n                    function clearSelected(item) {\r\n                    \titem.isSelected = false;\r\n                    }\r\n                );\r\n\t\t\t\traiseOnSelectionChanged();\r\n\t\t\t}\r\n\r\n\t\t\tfunction raiseOnSelectionChanged() {\r\n\t\t\t\tif (scope.onSelectionChanged) {\r\n\t\t\t\t\tvar selectedItems = vm.getCurrentlySelectedItems();\r\n\t\t\t\t\tscope.onSelectionChanged(selectedItems);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * gets currently selected items\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction getCurrentlySelectedItems() {\r\n\t\t\t\tvar selectedRows = _.filter(vm.data, function (item) { return item.isSelected === true });\r\n\t\t\t\treturn selectedRows;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * changes current page to the one specified\r\n\t\t\t * @param {} pageNo \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction changePage(pageNo) {\r\n\t\t\t\tvm.tableOptions.paginationPageNumber = pageNo;\r\n\t\t\t\tvm.currentPage = pageNo - 1;\r\n\r\n\t\t\t\t//clear selected rows before vm.data gets cleared and refilled\r\n\t\t\t\tclearSelectedRows();\r\n\t\t\t\tdisplayData(vm.currentPage);\r\n\r\n\t\t\t\tif (scope.onPageNumberChanged) {\r\n\t\t\t\t\tscope.onPageNumberChanged(pageNo);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * updates settings when page size is changed\r\n\t\t\t * @param {} newSize \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction updatePagination(newSize) {\r\n\t\t\t\tvm.tableOptions.paginationPageSize = newSize.value;\r\n\t\t\t\tchangePage(1);//move to first page when size changes\r\n\t\t\t\t\r\n\t\t\t\tif (vm.onOptionsForButtonsLoaded) {\r\n\t\t\t\t\tvm.onOptionsForButtonsLoaded(vm.tableOptions);\r\n\t\t\t\t}\r\n\t\t\t\tif (scope.onPageSizeChanged) {\r\n\t\t\t\t\tscope.onPageSizeChanged(newSize.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * loads data into table\r\n\t\t\t * @param {} page \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction displayData(page) {\r\n\t\t\t\tclearDisplayedRows();\r\n\t\t\t\tif (scope.items && scope.items.length > 0) {\r\n\t\t\t\t\tsetDisplayedRows(page);\r\n\t\t\t\t}\r\n\t\t\t\tif (scope.onDataDisplayed) {\r\n\t\t\t\t\tvar displayedRows = getCurrentlyDisplayedItems();\r\n\t\t\t\t\tscope.onDataDisplayed(displayedRows);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * calculates total number of pages\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction getTotalPages() {\r\n\t\t\t\tif (vm.tableOptions.enablePaging) {\r\n\t\t\t\t\treturn Math.ceil(scope.items.length / vm.tableOptions.paginationPageSize);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * gets data for specified page\r\n\t\t\t * @param {} pageNumber \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction getDataForPage(pageNumber) {\r\n\t\t\t\tif (pageNumber !== undefined) {\r\n\t\t\t\t\tvm.currentPage = pageNumber;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvm.currentPage = 0;\r\n\t\t\t\t}\r\n\t\t\t\tvar begin = vm.currentPage * vm.tableOptions.paginationPageSize;\r\n\r\n\t\t\t\tvar end = begin + vm.tableOptions.paginationPageSize;\r\n\r\n\t\t\t\tif (end > scope.items.length) {\r\n\t\t\t\t\tend = scope.items.length;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar pagedData = scope.items.slice(begin, end);\r\n\r\n\t\t\t\tif (vm.tableOptions.fixedHeight && getTotalPages() > 1) {\r\n\r\n\t\t\t\t\taddMissingRows(pagedData);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn pagedData;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * adds hidden missing rows for last page\r\n\t\t\t * @param {} pagedData \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction addMissingRows(pagedData) {\r\n\t\t\t\tvar minRows = vm.tableOptions.paginationPageSize;\r\n\r\n\t\t\t\tif (pagedData.length < minRows) {\r\n\r\n\t\t\t\t\tvar missingRows = minRows - pagedData.length;\r\n\r\n\t\t\t\t\tfor (var i = 0; i < missingRows; i++) {\r\n\t\t\t\t\t\tpagedData.push({ isHidden: true });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Resets all items to not displayed and clears the displayed array\r\n\t\t\t */\r\n\t\t\tfunction clearDisplayedRows() {\r\n\t\t\t\tvm.data.forEach(\r\n\t\t\t\t\tfunction reset(item) {\r\n\t\t\t\t\t\tsetIsDisplayed(item, false);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tvm.data.clear();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Populates the data array with the rows to display and sets them to displayed\r\n\t\t\t */\r\n\t\t\tfunction setDisplayedRows(page) {\r\n\t\t\t\tif (vm.tableOptions.enablePaging === true) {\r\n\t\t\t\t\tvm.data.fill(getDataForPage(page));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvm.data.fill(scope.items);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.data.forEach(\r\n\t\t\t\t\tfunction set(item) {\r\n\t\t\t\t\t\tsetIsDisplayed(item, true);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Sets the isDisplayed property on the item object to the propertyValue\r\n\t\t\t */\r\n\t\t\tfunction setIsDisplayed(item, propertyValue) {\r\n\t\t\t\tif (util.isObject(item) && !item.isHidden) {\r\n\t\t\t\t\titem.isDisplayed = propertyValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Returns the currently displayed items\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction getCurrentlyDisplayedItems() {\r\n\t\t\t\tvar displayedRows = _.filter(vm.data, function (item) {\r\n\t\t\t\t\treturn item.isDisplayed;\r\n\t\t\t\t});\r\n\t\t\t\treturn displayedRows;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn DiDataTableController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/dataTable/diDataTableController.js","//{CODE:ACD01}\r\n// di.core.angular.controls.datatable\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n\r\n        module.directive('diDataTable', diDataTable);\r\n\r\n        function diDataTable() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                 transclude: {\r\n                    'leftFooter': '?diDataTableLeftFooter'\r\n                },\r\n                template: template,\r\n                controller: 'DiDataTableController',\r\n                controllerAs: 'dataTableCtrl',                \r\n                scope: {\r\n                    items: '=',\r\n                    itemsController: '=',\r\n                    options: '=',\r\n                    rowClick: '=',\r\n                    rowDoubleClick: '=',\r\n                    onSelectionChanged: '=',\r\n                    onDataDisplayed: '=',\r\n                    onPageSizeChanged: '=',\r\n                    onPageNumberChanged: '=',\r\n                    keepWatch: '@'\r\n                }                \r\n            };\r\n\r\n            function template() {\r\n                var html =\r\n                    '<section\\\r\n    class=\"table-wrap\">\\\r\n    <section\\\r\n        class=\"table-wrap-content\">\\\r\n        <table\\\r\n            class=\"table\">\\\r\n            <thead\\\r\n                class=\"table-header\">\\\r\n                <tr>\\\r\n                    <th\\\r\n                        class=\"{{column.headerCellClass || column.cellClass}}\"\\\r\n                        ng-repeat=\"column in dataTableCtrl.tableOptions.columns | filter: { visible: true }\">\\\r\n                        {{column.name}}\\\r\n                    </th>\\\r\n                    <th\\\r\n                        class=\"{{column.headerCellClass || column.cellClass}}\"\\\r\n                        ng-repeat=\"column in dataTableCtrl.tableOptions.actionColumns\">\\\r\n                    </th>\\\r\n                </tr>\\\r\n            </thead>\\\r\n            <tbody\\\r\n                class=\"table-content\"\\\r\n                ng-class=\"{\\'has-hover\\': (dataTableCtrl.tableOptions.enableSelect === true ||\\\r\n                    dataTableCtrl.onRowClick ||\\\r\n                    dataTableCtrl.onRowDblClick)\\\r\n                    && dataTableCtrl.data.length > 0}\">\\\r\n                <tr\\\r\n                    di-dbl-click=\"dataTableCtrl.dblClicked(dataItem)\"\\\r\n                    di-click=\"dataTableCtrl.clicked(dataItem)\"\\\r\n                    ng-repeat=\"dataItem in dataTableCtrl.data\"\\\r\n                    ng-class=\"{selected: dataItem.isSelected===true,hidden: dataItem.isHidden===true}\"\\\r\n                >\\\r\n                    <td\\\r\n                        class=\"{{column.cellClass}}\"\\\r\n                        ng-repeat=\"column in dataTableCtrl.tableOptions.columns | filter: { visible: true }\">\\\r\n                        <di-template-compiler\\\r\n                            template=\"column.template\"\\\r\n                            binding=\"dataItem\"\\\r\n                            controller=\"dataTableCtrl\">\\\r\n                        </di-template-compiler>\\\r\n                    </td>\\\r\n                    <td\\\r\n                        class=\"{{column.cellClass}}\"\\\r\n                        ng-repeat=\"column in dataTableCtrl.tableOptions.actionColumns\">\\\r\n                        <di-template-compiler\\\r\n                            template=\"column.template\"\\\r\n                            binding=\"dataItem\"\\\r\n                            controller=\"itemsController\">\\\r\n                        </di-template-compiler>\\\r\n                    </td>\\\r\n                </tr>\\\r\n                <tr\\\r\n                    ng-if=\"!dataTableCtrl.data.length > 0\">\\\r\n                    <td\\\r\n                        colspan=\"{{dataTableCtrl.tableOptions.columns.length + dataTableCtrl.tableOptions.actionColumns.length}}\">\\\r\n                        <span\\\r\n                            di-translate >\\\r\n                            CORE.DATA_TABLE.NO_DATA_FOUND\\\r\n                        </span>\\\r\n                    </td>\\\r\n                </tr>\\\r\n            </tbody>\\\r\n        </table>\\\r\n    </section>\\\r\n    <footer\\\r\n        class=\"table-wrap-footer\"\\\r\n        ng-if=\"dataTableCtrl.tableOptions.enablePaging\"\\\r\n        >\\\r\n        <div\\\r\n            class=\"left\"\\\r\n            ng-transclude=\"leftFooter\">\\\r\n            <di-grid-pagination-page-size\\\r\n                set-options=\"dataTableCtrl.setPaginationPageSizeButtonsOptions\"\\\r\n                bind-to-object=\"dataTableCtrl.tableOptions\"\\\r\n\t            bind-to-property=\"paginationPageSize\"\\\r\n                ng-show=\"dataTableCtrl.data.length > 0\"\\\r\n                >\\\r\n            </di-grid-pagination-page-size>\\\r\n        </div>\\\r\n        <div\\\r\n            class=\"right\">\\\r\n            <di-grid-pagination-buttons\\\r\n                options=\"dataTableCtrl.tableOptions\"\\\r\n                >\\\r\n            </di-grid-pagination-buttons>\\\r\n        </div>\\\r\n    </footer>\\\r\n</section>';\r\n\r\n                return html;\r\n            }\r\n        }\r\n\r\n        return diDataTable;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/dataTable/diDataTableDirective.js","//{CODE:EUP3J}\r\n// di.einvoicing.ui.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        guard.throwIfNotAnObject(\"EUP3J01E\", module, \"module\");\r\n\r\n        module.directive('diTemplateCompiler', diTemplateCompiler);\r\n\r\n        diTemplateCompiler.$inject = ['$compile'];\r\n\r\n        function diTemplateCompiler(compile) {\r\n            return {\r\n                restrict: 'E',\r\n                scope: {\r\n                    template: '=',\r\n                    binding: '=',\r\n                    controller: '='\r\n                },\r\n                link: doCompileTemplate\r\n            };\r\n\r\n            /**\r\n             * Compile the given template HTML.\r\n             * @param scope\r\n             * @param element\r\n             * @param attributes\r\n             */\r\n            function doCompileTemplate(scope, element) {\r\n                if (scope.template) {\r\n                    try {\r\n                        compile(scope.template)(scope, function (compiled) {\r\n                            element.parent().html(compiled);\r\n                        });\r\n                    }\r\n                    catch (ex) {\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return diTemplateCompiler;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/dataTable/diTemplateCompilerDirective.js","define(function() {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.directive('diClick', diClick);\r\n       \r\n        diClick.$inject = ['$parse'];\r\n\r\n        function diClick($parse) {\r\n            return {\r\n                restrict: 'A',\r\n                link: link\r\n            };\r\n\r\n            /**\r\n             * Detects single and double mouse clicks and executes a custom function\r\n             */\r\n            function link(scope, element, attr) {\r\n                var waitForSecondClick = false;\r\n                var delay = 300;\r\n                var singleClick = $parse(attr['diClick']);\r\n                var doubleClick = $parse(attr['diDblClick']);\r\n                var clicks = 0, timer = null;\r\n\r\n                if (util.isDefined(attr['diDblClick'])) {\r\n                    waitForSecondClick = true;\r\n                }\r\n\r\n                element.on('click', function (event) {\r\n                    if (waitForSecondClick) {\r\n                        twoClicks(event);\r\n                    } else {\r\n                        callSingle(event);\r\n                    }\r\n                });\r\n\r\n                return;\r\n\r\n                /**\r\n                 * tests if there are two or one click\r\n                 * @param {} event \r\n                 * @returns {} \r\n                 */\r\n                function twoClicks(event) {\r\n                    clicks++;\r\n                    if (clicks === 1) {\r\n                        timer = setTimeout(function () {\r\n                            callSingle(event);\r\n                            clicks = 0;\r\n                        }, delay);\r\n                    } else {\r\n                        callDouble(event);\r\n                        clearTimeout(timer);\r\n                        clicks = 0;\r\n                    }\r\n                }\r\n\r\n                /**\r\n                 * triggers single click event\r\n                 * @param {} event \r\n                 * @returns {} \r\n                 */\r\n                function callSingle(event) {\r\n                    scope.$apply(function () {\r\n                        singleClick(scope, { $event: event });\r\n                    });\r\n                }\r\n\r\n                /**\r\n                 * triggers double click event\r\n                 * @param {} event \r\n                 * @returns {} \r\n                 */\r\n                function callDouble(event) {\r\n                    scope.$apply(function () {\r\n                        doubleClick(scope, { $event: event });\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/diClickDirective.js","//{CODE:CAC10}\r\n// di.core.angular.controls\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diEnabled', diEnabled);\r\n\r\n\t\tdiEnabled.$inject = ['$animate'];\r\n\r\n\t\tfunction diEnabled($animate) {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'A',\r\n\t\t\t\tmultiElement: true,\r\n\t\t\t\tlink: link\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * adds disabled class to the element so its possible to switch to disabled state (based on ngShow directive)\t\t \r\n\t\t\t */\r\n\t\t\tfunction link(scope, element, attr) {\r\n\t\t\t\tscope.$watch(attr.diEnabled, function (value) {\r\n\r\n\t\t\t\t\t$animate[value ? 'removeClass' : 'addClass'](element, 'state-disabled', {\r\n\t\t\t\t\t\ttempClasses: 'state-disabled-animate'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diEnabled;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/diEnabledDirective.js","//{CODE:DEF0U}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diNoDirty', diNoDirty);\r\n\r\n\t\tfunction diNoDirty() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'A',\r\n\t\t\t\trequire: \"ngModel\",\r\n\t\t\t\tlink: link\r\n\t\t\t}\r\n\r\n\t\t\tfunction link(scope, element, attrs, ngModelCtrl) {\r\n\t\t\t\t//angular.noop is a function that performs no operations\r\n\t\t\t\tngModelCtrl.$setDirty = angular.noop;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diNoDirty;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/diNoDirtyDirective.js","//{CODE:CAU0I}\r\n// di.core.angular.utility\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diTranscludeRepeat', diTranscludeRepeat);\r\n\r\n\t\tfunction diTranscludeRepeat() {\r\n\t\t    return {\r\n                terminal: true,\r\n\t\t\t\trestrict: 'EA',\r\n\t\t\t\tlink: link\r\n\t\t\t};\r\n\r\n\t\t    function link(scope, element, attrs, controller, transclude) {\r\n\t\t        if (!transclude) {\r\n\t\t            $di.exception.guard.throwNew(\r\n                        \"CAU0I01E\",\r\n                        'Illegal use of diTranscludeReplace directive in the template! ' +\r\n                               'No parent directive that requires a transclusion found. ');\r\n\t\t        }\r\n\r\n\t\t        var innerScope = scope.$new();\r\n\r\n\t\t        transclude(innerScope, function (clone) {\r\n\t\t            element.empty();\r\n\t\t            element.append(clone);\r\n\t\t            element.on('$destroy', function () {\r\n\t\t                innerScope.$destroy();\r\n\t\t            });\r\n\t\t        });\r\n\t\t    }\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/diTranscludeRepeatDirective.js","//{CODE:CAU0H}\r\n// di.core.angular.utility\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diTranscludeReplace', diTranscludeReplace);\r\n\r\n\t\tfunction diTranscludeReplace() {\r\n\t\t    return {\r\n                terminal: true,\r\n\t\t\t\trestrict: 'EA',\r\n\t\t\t\tlink: link\r\n\t\t\t};\r\n\r\n\t\t    function link(scope, element, attr, ctrl, transclude) {\r\n\t\t        if (!transclude) {\r\n\t\t            $di.exception.guard.throwNew(\r\n                        \"CAU0H01E\",\r\n                        'Illegal use of diTranscludeReplace directive in the template! ' +\r\n                               'No parent directive that requires a transclusion found. ');\r\n\t\t        }\r\n\r\n\t\t        transclude(function (clone) {\r\n\t\t            if (clone.length) {\r\n\t\t                element.replaceWith(clone);\r\n\t\t            }\r\n\t\t            else {\r\n\t\t                element.remove();\r\n\t\t            }\r\n\t\t        });\r\n\t\t    }\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/diTranscludeReplaceDirective.js","//{CODE:CAC05}\r\n// di.core.angular.controls.elementNotifier\r\ndefine([\r\n    'angular',\r\n    'jquery'\r\n], function (ng, $) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n\r\n        module.provider('elementNotifier', ElementNotifierProvider);\r\n\r\n        /**\r\n         * Displays notification to the user, attached to a DOM element\r\n         */\r\n        function ElementNotifierProvider() {\r\n            var defaultOptions = {\r\n                clickToHide: true,\r\n                autoHide: true,\r\n                position: 'top left'\r\n            };\r\n\r\n            var config = {\r\n                defaultOptions: defaultOptions\r\n            };\r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            };\r\n\r\n            return provider;\r\n\r\n            /**\r\n             * Configure the service\r\n             * @param config\r\n             */\r\n            function configure(config) {\r\n                guard.throwIfNotAnObject(\"CAC0501E\", config, 'config');\r\n\r\n                config = config;\r\n            }\r\n\r\n            function $get() {\r\n                return {\r\n                    error: error,\r\n                    info: info,\r\n                    success: success,\r\n                    warning: warning\r\n                };\r\n\r\n                /**\r\n                 * Notify the user of an error\r\n                 * @param message\r\n                 * @param title\r\n                 */\r\n                function error(message, element, options) {\r\n                    var notification;\r\n\r\n                    options = options || {};\r\n\t                options.style = options.style || 'diError';\r\n                    options.className = options.className || 'error';\r\n\r\n                    notification = createNotification(element, message, options);\r\n\r\n                    return notification;\r\n                }\r\n\r\n                /**\r\n                 * Notify the user of information\r\n                 * @param message\r\n                 * @param title\r\n                 */\r\n                function info(message, element, options) {\r\n                    var notification;\r\n\r\n                    options = options || {};\r\n\t                options.style = options.style || 'diInfo';\r\n                    options.className = options.className || 'info';\r\n\r\n                    notification = createNotification(element, message, options);\r\n\r\n                    return notification;\r\n                }\r\n\r\n                /**\r\n                 * Notify the user of success\r\n                 * @param message\r\n                 * @param title\r\n                 */\r\n                function success(message, element, options) {\r\n                    var notification;\r\n\r\n                    options = options || {};\r\n                    options.style = options.style || 'diSuccess';\r\n                    options.className = options.className || 'success';\r\n\r\n                    notification = createNotification(element, message, options);\r\n\r\n                    return notification;\r\n                }\r\n\r\n                /**\r\n                 * Notify of a warning\r\n                 * @param message\r\n                 * @param title\r\n                 */\r\n                function warning(message, element, options) {\r\n                    var notification;\r\n\r\n                    options = options || {};\r\n\t                options.style = options.style || 'diWarning';\r\n                    options.className = options.className || 'warn';\r\n\r\n                    notification = createNotification(element, message, options);\r\n\r\n                    return notification;\r\n                }\r\n\r\n                function createNotification(element, message, options) {\r\n                    var notElm;\r\n\r\n                    setMessage(message);\r\n\r\n                    return {\r\n                        element: element,\r\n                        show: show,\r\n                        hide: hide,\r\n                        getMessage: getMessage,\r\n                        setMessage: setMessage,\r\n                        destroy: destroy\r\n                    };\r\n\r\n                    function show() {\r\n                        notElm.show();\r\n                        notElm.data('notifyjs').show(true);\r\n                    }\r\n\r\n                    function hide() {\r\n                        notElm.data('notifyjs').show(false, function () {\r\n                            notElm.hide();\r\n                        });\r\n                    }\r\n\r\n                    function getMessage() {\r\n                        var text = notElm.data('notifyjs').userContainer[0].firstElementChild.innerText;\r\n\r\n                        return text;\r\n                    }\r\n\r\n                    function setMessage(newMessage) {\r\n                        destroy();\r\n\r\n                        notify(newMessage);\r\n                    }\r\n\r\n                    function destroy() {\r\n                        if (notElm) {\r\n                            element.removeData('notifyjs');\r\n                            notElm.remove();\r\n                        }\r\n                    }\r\n\r\n                    function notify(msg) {\r\n                        var thirdPartyOptions = mapOptionsToThirdPartyOptions();\r\n\r\n                        $.notify(element, msg, thirdPartyOptions);\r\n\r\n                        notElm = ng.element(element.data('notifyjs'))[0].wrapper;\r\n                        notElm.css('z-index', 1000);\r\n\r\n                        return;\r\n\r\n                        function mapOptionsToThirdPartyOptions() {\r\n                            var thirdPartyOptions = {\r\n                                arrowShow: true,\r\n                                arrowSize: 5,\r\n                                style: 'bootstrap',\r\n                                showAnimation: 'slideDown',\r\n                                showDuration: 400,\r\n                                hideAnimation: 'slideUp',\r\n                                hideDuration: 400,\r\n                                gap: 2\r\n                            };\r\n\r\n                            setOption('clickToHide', 'clickToHide');\r\n                            setOption('autoHide', 'autoHide');\r\n                            setOption('position', 'elementPosition');\r\n                            setOption('className', 'className');\r\n                            setOption('style', 'style');\r\n\r\n                            return thirdPartyOptions;\r\n\r\n                            function setOption(optionName, thirdPartyOptionName, mappingFunction) {\r\n                                var option;\r\n                                var thirdPartyOption;\r\n\r\n                                if (util.isDefined(options[optionName])) {\r\n                                    option = options[optionName];\r\n                                } else if (util.isDefined(config.defaultOptions[optionName])) {\r\n                                    option = config.defaultOptions[optionName];\r\n                                } else if (util.isDefined(defaultOptions[optionName])) {\r\n                                    option = defaultOptions[optionName];\r\n                                }\r\n\r\n                                if (mappingFunction) {\r\n                                    thirdPartyOption = mappingFunction(option);\r\n                                } else {\r\n                                    thirdPartyOption = option;\r\n                                }\r\n\r\n                                thirdPartyOptions[thirdPartyOptionName] = thirdPartyOption;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return ElementNotifierProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/elementNotifier.js","//{CODE:CAC05}\r\n// di.core.angular.controls.elementNotifierStyles\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n\t'use strict';\r\n\r\n\treturn function () {\r\n\t\t$.notify.addStyle('diSuccess', {\r\n\t\t\thtml: '<div>' +\r\n\t\t\t\t'<span class=\"fa fa-check fa-lg fa-pull-left\">' +\r\n\t\t\t\t'</span>' +\r\n\t\t\t\t'<span class=\"padded-container\" data-notify-text/>' +\r\n\t\t\t\t'</div>',\r\n\t\t\tclasses: {\r\n\t\t\t\tbase: {\r\n\t\t\t\t\t\"font-weight\": \"bold\",\r\n\t\t\t\t\t\"padding\": \"8px 0px 8px 14px\",\r\n\t\t\t\t\t\"text-shadow\": \"0 1px 0 rgba(255, 255, 255, 0.5)\",\r\n\t\t\t\t\t\"border\": \"1px solid #fbeed5\",\r\n\t\t\t\t\t\"border-radius\": \"4px\",\r\n\t\t\t\t\t\"white-space\": \"nowrap\",\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: {\r\n\t\t\t\t\t\"color\": \"#468847\",\r\n\t\t\t\t\t\"background-color\": \"#DFF0D8\",\r\n\t\t\t\t\t\"border-color\": \"#D6E9C6\",\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$.notify.addStyle('diWarning', {\r\n\t\t\thtml: '<div>' +\r\n\t\t\t\t'<span class=\"fa fa-warning fa-lg fa-pull-left\">' +\r\n\t\t\t\t'</span>' +\r\n\t\t\t\t'<span class=\"padded-container\" data-notify-text/>' +\r\n\t\t\t\t'</div>',\r\n\t\t\tclasses: {\r\n\t\t\t\tbase: {\r\n\t\t\t\t\t\"font-weight\": \"bold\",\r\n\t\t\t\t\t\"padding\": \"8px 0px 8px 14px\",\r\n\t\t\t\t\t\"text-shadow\": \"0 1px 0 rgba(255, 255, 255, 0.5)\",\r\n\t\t\t\t\t\"border\": \"1px solid #fbeed5\",\r\n\t\t\t\t\t\"border-radius\": \"4px\",\r\n\t\t\t\t\t\"white-space\": \"nowrap\",\r\n\t\t\t\t},\r\n\t\t\t\twarn: {\r\n\t\t\t\t\t\"color\": \"#C09853\",\r\n\t\t\t\t\t\"background-color\": \"#FCF8E3\",\r\n\t\t\t\t\t\"border-color\": \"#FBEED5\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$.notify.addStyle('diInfo', {\r\n\t\t\thtml: '<div> ' +\r\n\t\t\t\t'<span class=\"fa fa-info-circle fa-lg fa-pull-left\">' +\r\n\t\t\t\t'</span>' +\r\n\t\t\t\t'<span class=\"padded-container\" data-notify-text/>' +\r\n\t\t\t\t'</div>',\r\n\t\t\tclasses: {\r\n\t\t\t\tbase: {\r\n\t\t\t\t\t\"font-weight\": \"bold\",\r\n\t\t\t\t\t\"padding\": \"8px 0px 8px 14px\",\r\n\t\t\t\t\t\"text-shadow\": \"0 1px 0 rgba(255, 255, 255, 0.5)\",\r\n\t\t\t\t\t\"border\": \"1px solid #fbeed5\",\r\n\t\t\t\t\t\"border-radius\": \"4px\",\r\n\t\t\t\t\t\"white-space\": \"nowrap\",\r\n\t\t\t\t},\r\n\t\t\t\tinfo: {\r\n\t\t\t\t\t\"color\": \"#3A87AD\",\r\n\t\t\t\t\t\"background-color\": \"#D9EDF7\",\r\n\t\t\t\t\t\"border-color\": \"#BCE8F1\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$.notify.addStyle('diError', {\r\n\t\t\thtml: '<div>' +\r\n\t\t\t\t'<span class=\"fa fa-times fa-lg fa-pull-left\">' +\r\n\t\t\t\t'</span>' +\r\n\t\t\t\t'<span class=\"padded-container\" data-notify-text/>' +\r\n\t\t\t\t'</div>',\r\n\t\t\tclasses: {\r\n\t\t\t\tbase: {\r\n\t\t\t\t\t\"font-weight\": \"bold\",\r\n\t\t\t\t\t\"padding\": \"8px 0px 8px 14px\",\r\n\t\t\t\t\t\"text-shadow\": \"0 1px 0 rgba(255, 255, 255, 0.5)\",\r\n\t\t\t\t\t\"border\": \"1px solid #fbeed5\",\r\n\t\t\t\t\t\"border-radius\": \"4px\",\r\n\t\t\t\t\t\"white-space\": \"nowrap\",\r\n\t\t\t\t},\r\n\t\t\t\terror: {\r\n\t\t\t\t\t\"color\": \"#B94A48\",\r\n\t\t\t\t\t\"background-color\": \"#F2DEDE\",\r\n\t\t\t\t\t\"border-color\": \"#EED3D7\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/elementNotifierStyles.js","//{CODE:CAC11}\r\n// di.core.angular.controls.enterkey\r\ndefine([\r\n\t'./diEnterDirective',\r\n\t'./enterEvents'\r\n], function (\r\n\tdiEnterDirectiveLoader,\r\n\tenterEventsLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diEnterDirectiveLoader(module);\r\n        enterEventsLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/enterKey/_loader.js","//{CODE:CAC0N}\r\n// di.core.angular.controls\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diEnter', diEnter);\r\n\t\t\r\n\t\tdiEnter.$inject = ['enterEvents'];\r\n\r\n\t\tfunction diEnter(enterEvents) {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'A',\r\n\t\t\t\tlink: link\r\n\t\t\t};\r\n            \r\n            /**\r\n             * detects keystrokes for enter key and executes dependency             \r\n             */\r\n\t\t\tfunction link(scope, element, attrs) {\r\n                 element.bind(\"keydown keypress\", function (event) {\r\n\t\t\t        if (event.which === 13) {\r\n\t\t\t            enterEvents.keyPressed(scope, element, attrs);\r\n                       }\r\n\t\t\t    });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/enterKey/diEnterDirective.js","//{CODE:CAC13}\r\n// di.core.angular.controls.enterkey\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    var util = $di.utility.util;\r\n\r\n\t    module.factory('enterEvents', enterEvents);\r\n\r\n\t    enterEvents.$inject = ['formAnalyser', '$timeout'];\r\n\r\n\t    function enterEvents(formAnalyser, $timeout) {\r\n\t\t\treturn {\r\n\t\t\t    keyPressed: keyPressed\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t *  calls custom function\r\n\t\t\t */\r\n\t        function keyPressed(scope, element, attrs) {\r\n\t            element.blur();\r\n\r\n\t            $timeout(function() {\r\n\t                if (validateForm()) {\r\n\t                    scope.$apply(function() {\r\n\t                        scope.$eval(attrs.diEnter);\r\n\t                    });\r\n\t                }\r\n\r\n\t                return;\r\n\r\n\t                function validateForm() {\r\n\t                    var form = formAnalyser.getForm(element);\r\n\t                    var skipValidation = canSkipValidation();\r\n\t                    var formIsValid = formAnalyser.isFormValid(form);\r\n\r\n\t                    return formIsValid || skipValidation;\r\n\t                }\r\n\t            }, 100);\r\n\r\n\t            event.preventDefault();\r\n\r\n\t            return;\r\n\r\n\t            /**\r\n                 * checks if form validation may be skipped                \r\n                 */\r\n\t            function canSkipValidation() {\r\n\t                if (util.isDefined(attrs.diEnterSkipValidation) && attrs.diEnterSkipValidation === \"false\") {\r\n\t                    return false;\r\n\t                }\r\n\r\n\t                return true;\r\n\t            }\r\n\t        }\r\n\t    }\r\n\r\n\t    return enterEvents;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/enterKey/enterEvents.js","//{CODE:ACG01}\r\n// di.core.angular.controls.gridpaginationbuttons\r\ndefine([\r\n    './diGridPaginationButtonsDirective',\r\n    './diGridPaginationButtonsController'\r\n], function(\r\n    diGridPaginationButtonsDirectiveLoader,\r\n    diGridPaginationButtonsControllerLoader) {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        diGridPaginationButtonsDirectiveLoader(module);\r\n        diGridPaginationButtonsControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/gridPaginationButtons/_loader.js","//{CODE:ACG03}\r\n// di.core.angular.controls.gridpaginationbuttons\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('DiGridPaginationButtonsController', DiGridPaginationButtonsController);\r\n\r\n\t\tDiGridPaginationButtonsController.$inject = [\r\n\t\t\t'$scope'];\r\n\r\n\t\t/**\r\n         * controller for pagination buttons\r\n         * @param {} $scope \r\n         * @returns {} \r\n         */\r\n\t\tfunction DiGridPaginationButtonsController(\r\n\t\t\t$scope) {\r\n\r\n\t\t\tvar vm = this;\r\n\t\t\tvar switchPage = null;\r\n\r\n\t\t\tvm.items = [];\r\n\t\t\tvm.current = 1;\r\n\t\t\tvm.total = 1;\r\n\t\t\tvm.pageSize = 1;\r\n\t\t\tvm.maxButtonsShown = 5;\r\n\r\n\t\t\tvm.goToPage = goToPage;\r\n\t\t\tvm.nextPage = nextPage;\r\n\t\t\tvm.previousPage = previousPage;\r\n\t\t\tvm.setTableOptions = setTableOptions;\r\n\r\n\t\t\tvm.tableOptions = setTableOptions($scope.options || []);//null;\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n             * initializes control's options\r\n             * @param {} options \r\n             * @returns {} \r\n             */\r\n\t\t\tfunction setTableOptions(options) {\r\n\t\t\t\tif (util.isDefined(options.data)) {\r\n\t\t\t\t\tvm.tableOptions = options;\r\n\t\t\t\t\tvm.pageSize = options.paginationPageSize;\r\n\t\t\t\t\tvm.maxButtonsShown = options.maxButtonsShown;\r\n\t\t\t\t\tswitchPage = options.pagination.seek;\r\n\t\t\t\t\tvm.current = util.isNumber(options.paginationPageNumber) ? options.paginationPageNumber : 1;\r\n\t\t\t\t\tvm.total = Math.ceil(options.data.length / vm.pageSize);\r\n\r\n\t\t\t\t\tif (vm.total > 1) {\r\n\t\t\t\t\t\tupdateItems();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * changes currently selected page to the one specified\r\n             * @param {} pageNo \r\n             * @returns {} \r\n             */\r\n\t\t\tfunction goToPage(pageNo) {\r\n\t\t\t\tif (pageNo !== '...') {\r\n\t\t\t\t\tvm.current = pageNo;\r\n\t\t\t\t\tif (switchPage) {\r\n\t\t\t\t\t\tswitchPage(vm.current);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tupdateItems();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * changes current page to next \r\n             * @returns {} \r\n             */\r\n\t\t\tfunction nextPage() {\r\n\t\t\t\tif (vm.current + 1 <= vm.total) {\r\n\t\t\t\t\tvm.current++;\r\n\t\t\t\t\tif (switchPage) {\r\n\t\t\t\t\t\tswitchPage(vm.current);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tupdateItems();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * changes current page to previous\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction previousPage() {\r\n\t\t\t\tif (vm.current - 1 > 0) {\r\n\t\t\t\t\tvm.current--;\r\n\t\t\t\t\tif (switchPage) {\r\n\t\t\t\t\t\tswitchPage(vm.current);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tupdateItems();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * updates collection of buttons based on current page\r\n             * @returns {} \r\n             */\r\n\t\t\tfunction updateItems() {\r\n\t\t\t\tvm.items = getPageNumbers(vm.total, vm.current, vm.maxButtonsShown);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * generates collection of page numbers\r\n             * @param {} count \r\n             * @param {} current \r\n             * @param {} max \r\n             * @returns {} \r\n             */\r\n\t\t\tfunction getPageNumbers(count, current, max) {\r\n\r\n\t\t\t\tvar shownPages = max;\r\n\t\t\t\tvar result = [];\r\n\r\n\t\t\t\tvar leftSide = Math.ceil((shownPages - 1) / 2);\r\n\t\t\t\tif (current === 1) {\r\n\t\t\t\t\tleftSide = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (current === 2) {\r\n\t\t\t\t\tleftSide = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar rightSide = shownPages - 1 - leftSide;\r\n\r\n\t\t\t\tif (current === count) {\r\n\t\t\t\t\tleftSide = shownPages - 1;\r\n\t\t\t\t\trightSide = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (current === count - 1) {\r\n\t\t\t\t\trightSide = 1;\r\n\t\t\t\t\tleftSide = shownPages - 1 - rightSide;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar number = 0;\r\n\r\n\t\t\t\tif (current - leftSide > 1) {\r\n\t\t\t\t\tresult.push(1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (current - leftSide > 3) {\r\n\t\t\t\t\tresult.push('...');\r\n\t\t\t\t}\r\n\t\t\t\telse if (current - leftSide > 2) {\r\n\t\t\t\t\tresult.push(2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = leftSide; i > 0; i--) {\r\n\t\t\t\t\tnumber = current - i;\r\n\t\t\t\t\tif (number > 0) {\r\n\t\t\t\t\t\tresult.push(current - i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult.push(current);\r\n\r\n\t\t\t\tfor (var j = 1; j <= rightSide; j++) {\r\n\t\t\t\t\tnumber = current + j;\r\n\t\t\t\t\tif (number <= count) {\r\n\t\t\t\t\t\tresult.push(number);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (count - number > 2) {\r\n\t\t\t\t\tresult.push('...');\r\n\t\t\t\t}\r\n\t\t\t\telse if (count - number === 2 && number + 1 !== count) {\r\n\t\t\t\t\tresult.push(number + 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (current + rightSide < count) {\r\n\t\t\t\t\tresult.push(count);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn DiGridPaginationButtonsController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/gridPaginationButtons/diGridPaginationButtonsController.js","//{CODE:ACG02}\r\n// di.core.angular.controls.gridpaginationbuttons\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diGridPaginationButtons', diGridPaginationButtons);\r\n\r\n        function diGridPaginationButtons() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                translucent: true,\r\n                scope: {\r\n                    options: '='\r\n                },\r\n                require: ['^diGridPaginationButtons', '^diDataTable'],\r\n                link: function (scope, element, attrs, ctrls) {                    \r\n                    var paginationCtrl = ctrls[0];\r\n                    var dataTableCtrl = ctrls[1];\r\n\r\n                    dataTableCtrl.onOptionsForButtonsLoaded = paginationCtrl.setTableOptions;\r\n                },\r\n                controller: 'DiGridPaginationButtonsController',\r\n                controllerAs: 'diGridPaginationButtonsCtrl',\r\n                template: '<ul\\\r\n                                class=\"pagination\"\\\r\n                                ng-show=\"diGridPaginationButtonsCtrl.total > 1\" >\\\r\n                            <li\\\r\n                                class=\"pagination-item to-prev2\">\\\r\n                                    <button type=\"button\"\\\r\n                                        class=\"pagination-button\"\\\r\n                                        ng-click=\"diGridPaginationButtonsCtrl.previousPage()\" >\\\r\n                                            <div style=\"padding-left:5px;padding-right:5px\"><</div>\\\r\n                                    </button>\\\r\n                            </li>\\\r\n                            <li\\\r\n                                class=\"pagination-item\"\\\r\n                                ng-repeat=\"item in diGridPaginationButtonsCtrl.items track by $index\"\\\r\n                                ng-class=\"{\\'is-current\\' : item == diGridPaginationButtonsCtrl.current, \\'disabled\\' : item == \\'...\\'}\" >\\\r\n                                    <button type=\"button\"\\\r\n                                        class=\"pagination-button\"\\\r\n                                        ng-click=\"diGridPaginationButtonsCtrl.goToPage(item)\" >\\\r\n                                            {{item}}\\\r\n                                    </button>\\\r\n                            </li>\\\r\n                            <li\\\r\n                                class=\"pagination-item to-next\" >\\\r\n                                <button type=\"button\"\\\r\n                                    class=\"pagination-button\"\\\r\n                                    ng-click=\"diGridPaginationButtonsCtrl.nextPage()\" >\\\r\n                                </button>\\\r\n                            </li>\\\r\n                           </ul>'\r\n            };\r\n        }\r\n\r\n        return diGridPaginationButtons;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/gridPaginationButtons/diGridPaginationButtonsDirective.js","//{CODE:ACG04}\r\n// di.core.angular.controls.gridpaginationpagesize\r\ndefine([\r\n    './diGridPaginationPageSizeDirective',\r\n    './diGridPaginationPageSizeController'\r\n], function (\r\n    diGridPaginationPageSizeDirectiveLoader,\r\n    diGridPaginationPageSizeController) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diGridPaginationPageSizeDirectiveLoader(module);\r\n        diGridPaginationPageSizeController(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/gridPaginationPageSize/_loader.js","//{CODE:ACG06}\r\n// di.core.angular.controls.gridpaginationpagesize\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.controller('DiGridPaginationPageSizeController', DiGridPaginationPageSizeController);\r\n\r\n        DiGridPaginationPageSizeController.$inject = ['$scope', 'translator'];\r\n\r\n        /**\r\n         * controller for page size control\r\n         * @param {} $scope \r\n         * @param {} translator \r\n         * @returns {} \r\n         */\r\n        function DiGridPaginationPageSizeController($scope, translator) {\r\n            var vm = this;\r\n\r\n            var resize = null;\r\n            vm.gridOptions = null;\r\n\r\n            vm.sizes = [];\r\n            vm.selectedSize = {};\r\n\r\n            vm.update = update;\r\n\r\n            initialize();\r\n\r\n            return;\r\n\r\n            /**\r\n             * initializes control settings\r\n             * @returns {} \r\n             */\r\n            function initialize() {\r\n                translator.translate(\"CORE.GRID_PAGINATION_PAGE_SIZE.SHOW\")\r\n                    .then(function(translated) {\r\n                        $scope.show = translated;\r\n                    }); \r\n                \r\n                if ($scope.setOptions) {\r\n                    $scope.setOptions(setTableOptions);\r\n                }\r\n            }\r\n\r\n            \r\n\r\n            /**\r\n             * sets control grid options\r\n             * @param {} options \r\n             * @returns {} \r\n             */\r\n            function setTableOptions(options) {\r\n                if (util.isDefined(options)) {\r\n                    vm.gridOptions = options;\r\n                    if (vm.gridOptions.paginationPageSizes) {\r\n                        \r\n                        vm.sizes.clear();\r\n                        _.each(vm.gridOptions.paginationPageSizes, function (size) {\r\n                            vm.sizes.push({\r\n                                label :$scope.show + ' ' + size ,\r\n                                value :size\r\n                            });\r\n                        });\r\n                    }\r\n                   \r\n                    if (vm.gridOptions.paginationPageSize) {\r\n                        vm.selectedSize = { label: $scope.show + ' ' + vm.gridOptions.paginationPageSize, value: vm.gridOptions.paginationPageSize };\r\n                    }\r\n\r\n                    if (vm.gridOptions.pagination && vm.gridOptions.pagination.resize) {\r\n                        resize = vm.gridOptions.pagination.resize;\r\n                    }\r\n                }\r\n            }\r\n\r\n            /**\r\n             * updates current page size\r\n             * @param {} size \r\n             * @returns {} \r\n             */\r\n            function update(size) {\r\n                var item = _.find(vm.sizes, function (item) {\r\n                    return item.value === size;\r\n                });\r\n\r\n                if (util.isDefined(item)) {\r\n                    vm.selectedSize = item;\r\n                }\r\n                \r\n                if (resize) {\r\n                    resize(size);\r\n                }\r\n            }\r\n        };\r\n\r\n        return DiGridPaginationPageSizeController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/gridPaginationPageSize/diGridPaginationPageSizeController.js","//{CODE:ACG05}\r\n// di.core.angular.controls.gridpaginationpagesize\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.directive('diGridPaginationPageSize', diGridPaginationPageSize);\r\n\r\n\t    function diGridPaginationPageSize() {\r\n\t        return {\r\n\t            restrict: 'E',\r\n\t            replace: true,\r\n\t            translucent: true,\r\n\t            scope: {\r\n\t                setOptions: '=',\r\n\t                bindToObject: '=',\r\n\t                bindToProperty: '@'\r\n\t            },\r\n\t            controller: 'DiGridPaginationPageSizeController',\r\n\t            controllerAs: 'diGridPaginationPageSizeCtrl',\r\n\t            template: template\r\n\t        };\r\n            \r\n\t        function template() {\r\n                \r\n\t        \tvar html = '<div class=\"show-entries select small\"><di-select\\\r\n                        mode=\"dropdown\"\\\r\n\t        \t\t\tng-show=\"(diGridPaginationPageSizeCtrl.sizes.length > 0)\"\\\r\n                        items=\"diGridPaginationPageSizeCtrl.sizes\"\\\r\n\t                    item-unique-property=\"value\"\\\r\n                        bind-to-object=\"diGridPaginationPageSizeCtrl\"\\\r\n\t                    bind-to-property=\"selectedSize\"\\\r\n\t                    display-property=\"label\"\\\r\n\t                    on-change-accessor=\"diGridPaginationPageSizeCtrl.update\"\\\r\n                        placeholder=\"{{show}}\">\\\r\n                        <span>{{::filteredItem.item.value}}</span>\\\r\n                    </di-select></div>';\r\n\r\n\t            return html;\r\n\t        }\r\n\t    }\r\n\r\n\t    return diGridPaginationPageSize;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/gridPaginationPageSize/diGridPaginationPageSizeDirective.js","//{CODE:CAC0O}\r\n// di.core.angular.controls.image\r\ndefine([\r\n    './diImageTemplate',\r\n    './diImageCompile',\r\n    './diImageDirective'\r\n], function (\r\n    imageTemplate,\r\n\timageCompile,\r\n    imageDirectiveLoader\r\n    ) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        imageTemplate(module);\r\n        imageCompile(module);\r\n        imageDirectiveLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/image/_loader.js","//{CODE:CAC0P}\r\n// di.core.angular.controls.image\r\ndefine([\r\n\t'angular'\r\n], function (ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('diImageCompile', diImageCompile);\r\n\r\n\t\tdiImageCompile.$inject = ['IMAGES', 'COLOUR_CLASSES', 'diImageTemplate'];\r\n\r\n\t\tfunction diImageCompile(IMAGES, COLOUR_CLASSES, diImageTemplate) {\r\n\t\t\treturn {\r\n\t\t\t\tcompile: compile,\r\n\t\t\t\tcompileHtml: compileHtml\r\n\t\t\t};\r\n\r\n\t\t\tfunction compileHtml(attrs) {\r\n\t\t\t\tvar elmTag = attrs.rootElement || 'i';\r\n\r\n\t\t\t\tvar imageHtmlTemplate = diImageTemplate.get();\r\n\r\n\t\t\t\timageHtmlTemplate = imageHtmlTemplate.replace('{ELM}', elmTag);\r\n\r\n\t\t\t\treturn compileElement(imageHtmlTemplate, attrs);\r\n\t\t\t}\r\n\r\n\t\t\tfunction compile(element, attrs) {\r\n\t\t\t\tcompileElement(element, attrs);\r\n\t\t\t}\r\n\r\n\t\t\tfunction compileElement(element, attrs) {\r\n\t\t\t\tvar rootElm = ng.element(element);\r\n\t\t\t\tvar cssClass = attrs.class || 'icon';\r\n\t\t\t\tvar imageData;\r\n\r\n\t\t\t\tif (attrs.src) {\r\n\t\t\t\t\tcompileLinked(attrs.src);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tguard.throwIfUndefined(\"CAC0P01E\", attrs.image, \"attrs.image\");\r\n\r\n\t\t\t\t\timageData = IMAGES[attrs.image];\r\n\r\n\t\t\t\t\tguard.throwIfNotAnObject(\"CAC0P02E\", imageData, \"Image constant for image '\" + attrs.image + \"'\");\r\n\r\n\t\t\t\t\tif (imageData.src) {\r\n\t\t\t\t\t\tcompileLinked(imageData.src);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcompileEmbedded();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trootElm.addClass(cssClass);\r\n\r\n\t\t\t\treturn rootElm.html();\r\n\r\n\t\t\t\tfunction compileLinked(src) {\r\n\t\t\t\t\tvar imgElm = ng.element('<img />');\r\n\r\n\t\t\t\t\timgElm.attr('src', src);\r\n\r\n\t\t\t\t\trootElm.replaceWith(imgElm);\r\n\t\t\t\t\trootElm = imgElm;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction compileEmbedded() {\r\n\t\t\t\t\tvar svgElm = findById(rootElm, 'svg');\r\n\r\n\t\t\t\t\tsetSvgAttrs();\r\n\r\n\t\t\t\t\tsetSvgPath();\r\n\r\n\t\t\t\t\t//Silly hack required to get dynamically generated SVG content to display\r\n\t\t\t\t\trootElm.html(rootElm.html());\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction findById(parent, id) {\r\n\t\t\t\t\t\tvar elm = parent.find('#' + id);\r\n\r\n\t\t\t\t\t\telm.removeAttr('id');\r\n\r\n\t\t\t\t\t\treturn elm;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction setSvgAttrs() {\r\n\t\t\t\t\t\tvar minX = imageData.minX || 0;\r\n\t\t\t\t\t\tvar minY = imageData.minY || 0;\r\n\t\t\t\t\t\tvar width = imageData.width || 0;\r\n\t\t\t\t\t\tvar height = imageData.height || 0;\r\n\t\t\t\t\t\tvar viewbox = imageData.viewBox || minX + ' ' + minY + ' ' + width + ' ' + height;\r\n\r\n\t\t\t\t\t\tif (util.isDefined(imageData.width)) {\r\n\t\t\t\t\t\t\tsvgElm.attr('width', width);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (util.isDefined(imageData.height)) {\r\n\t\t\t\t\t\t\tsvgElm.attr('height', height);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsvgElm.attr('viewbox', viewbox);\r\n\t\t\t\t\t\tsvgElm.attr('enable-background', 'new ' + viewbox);\r\n\t\t\t\t\t\tsvgElm.attr('xml:space', imageData.xmlSpace || 'preserve');\r\n\r\n\t\t\t\t\t\tif (util.isDefined(imageData.preserveAspectRatio)) {\r\n\t\t\t\t\t\t\tsvgElm.attr('preserveAspectRatio', imageData.preserveAspectRatio);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (util.isDefined(imageData.class)) {\r\n\t\t\t\t\t\t\tsvgElm.attr('class', imageData.class);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction setSvgPath() {\r\n\t\t\t\t\t\tvar pathElm = svgElm.find('path');\r\n\t\t\t\t\t\tvar colour;\r\n\r\n\t\t\t\t\t\tif (attrs.imageColour) {\r\n\t\t\t\t\t\t\tcolour = COLOUR_CLASSES[attrs.imageColour];\r\n\r\n\t\t\t\t\t\t\tif (util.isUndefined(colour)) {\r\n\t\t\t\t\t\t\t\tcolour = attrs.imageColour;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tpathElm.attr('fill', colour || 'none');\r\n\t\t\t\t\t\tpathElm.attr('d', imageData.data);\r\n\r\n\t\t\t\t\t\tif (imageData.pathStyles) {\r\n\t\t\t\t\t\t\taddElementCss(pathElm, imageData.pathStyles);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tfunction addElementCss(element, cssStyles) {\r\n\t\t\t\t\t\t\tfor (var property in cssStyles) {\r\n\t\t\t\t\t\t\t\tif (cssStyles.hasOwnProperty(property)) {\r\n\t\t\t\t\t\t\t\t\telement.css(property, cssStyles[property]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diImageCompile;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/image/diImageCompile.js","//{CODE:CAC0P}\r\n// di.core.angular.controls.image\r\ndefine([\r\n    'angular'\r\n], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n        var guard = $di.exception.guard;\r\n\r\n        module.directive('diImage', diImage);\r\n\r\n        diImage.$inject = ['diImageCompile', 'diImageTemplate'];\r\n\r\n        function diImage(imageCompile, imageTemplate) {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                template: template,\r\n                scope: {\r\n                \timage: \"@\",\r\n                \timageColour: '@'\r\n                },\r\n                link: link\r\n            };\r\n\r\n            function template(element, attrs) {\r\n                var elmTag = attrs.rootElement || 'i';\r\n                var html = imageTemplate.get();\r\n                return html.replace('{ELM}', elmTag);\r\n            }\r\n\r\n            function link(scope, element, attrs) {\r\n\r\n                if (util.isDefined(scope.image)) {\r\n                        attrs.image = scope.image;\r\n                    } else if (util.isDefined(scope.$parent.image)) {\r\n                        attrs.image = scope.$parent.image;\r\n                    }\r\n                \r\n                imageCompile.compile(element, attrs);\r\n            }\r\n        }\r\n\r\n        return diImage;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/image/diImageDirective.js","//{CODE:CAC0P}\r\n// di.core.angular.controls.image\r\ndefine([\r\n    'angular'\r\n], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n\r\n        module.factory('diImageTemplate', diImageTemplate);\r\n\r\n        var html =\r\n'<{ELM}>\\\r\n    <!--<?xml version=\"1.0\" encoding=\"utf-8\"?>-->\\\r\n    <svg\\\r\n        id=\"svg\"\\\r\n        xmlns=\"http://www.w3.org/2000/svg\"\\\r\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\\r\n        version=\"1.1\"\\\r\n        x=\"0px\" \\\r\n        y=\"0px\">\\\r\n        <path>\\\r\n        </path>\\\r\n    </svg>\\\r\n</{ELM}>'\r\n\r\n        function diImageTemplate() {\r\n            return {\r\n                get: get\r\n            };\r\n\r\n            function get() {\r\n                return html;\r\n            }\r\n        }\r\n\r\n        return diImageTemplate;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/image/diImageTemplate.js","//{CODE:CAC0Y}\r\n// di.core.angular.controls.input\r\ndefine([\r\n    './inputController',\r\n    './diInputDirective',\r\n], function (\r\n    inputControllerLoader,\r\n    inputDirectiveLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        inputControllerLoader(module);\r\n        inputDirectiveLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/input/_loader.js","//{CODE:CAC01}\r\n//di.core.ng.controls\r\ndefine([\r\n], function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diInput', diInput);\r\n\r\n\t\tdiInput.$inject = ['$interpolate', 'translator', '$q', 'controlsRestrictionManager', 'formAnalyser'];\r\n\r\n\t\tfunction diInput($interpolate, translator, $q, controlsRestrictionManager, formAnalyser) {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tbindModel: '=ngModel',\r\n\t\t\t\t\tbindModelProperty: '@ngModelProperty',\r\n\t\t\t\t\tbindModelOptions: '=ngModelOptions',\r\n\t\t\t\t    validationPropertyName :\"@\",\r\n\t\t\t\t\tonChange: '&ngChange'\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: 'InputController',\r\n\t\t\t\tcontrollerAs: 'inputCtrl',\r\n\t\t\t\ttemplate: template,\r\n\t\t\t\tlink: function (scope, element, attrs) {\r\n\t\t\t\t\tscope.inputClass = interpolate('inputClass');\r\n\t\t\t\t\tscope.diInputType = interpolate('diInputType');\r\n\r\n\t\t\t\t\tinterpolateAndTranslate('diInputLabel').then(function (translated) {\r\n\t\t\t\t        scope.diInputLabel = translated;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tscope.diShowIcon = interpolate('diShowIcon', 'true') === 'true';\r\n\r\n\t\t\t\t\tscope.validationModelDisplayName = interpolate('validationModelDisplayName');\r\n\t\t\t\t\tscope.validationMessagePosition = interpolate('validationMessagePosition');\r\n\t\t\t\t\tscope.validationMessage = interpolate('validationMessage');\r\n\t\t\t\t\tscope.validateOnBlur = interpolate('validateOnBlur', 'false') === 'true';\r\n\t\t\t\t    scope.diClass = interpolate('diClass');\r\n\r\n\t\t\t\t\tinterpolateAndTranslate('placeholder').then(function (translated) {\r\n\t\t\t\t\t    scope.placeholder = translated;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t    let modelName = getModelName();\r\n\r\n\t\t\t\t    if (scope.validationPropertyName && modelName) {\r\n\t\t\t\t        controlsRestrictionManager.addControlChangeSubscription(modelName + '.' + scope.validationPropertyName,\r\n                            (disabled) => {\r\n                                scope.disabled = disabled;\r\n                            });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t    return;\r\n\r\n                    function getModelName() {\r\n                        let elementWithValidatationModelName = formAnalyser.getElementWithValidationModel(element);\r\n                        let innerElement = elementWithValidatationModelName[0];\r\n                        if (innerElement) {\r\n                            return elementWithValidatationModelName[0].attributes['di-validate-model'].value;\r\n                        }\r\n                        return '';\r\n                    }\r\n\r\n\t\t\t\t    function interpolateAndTranslate(attr, valueIfEmpty) {\r\n\t\t\t\t        var value = interpolate(attr, valueIfEmpty);\r\n\r\n\t\t\t\t        if (value) {\r\n\t\t\t\t            return translator.translate(value);\r\n\t\t\t\t        }\r\n\r\n\t\t\t\t        return $q.when(value);\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    function interpolate(attr, valueIfEmpty) {\r\n\t\t\t\t        var value = attrs[attr];\r\n\t\t\t\t        var result = (value ? $interpolate(value)(scope) : '') || valueIfEmpty;\r\n\r\n\t\t\t\t        return result;\r\n\t\t\t\t    }\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t* This should be placed in a seperate .html file - we need to provide deployment solution for this?\r\n\t\t\t* Perhaps npm - gulp-angular-templatecache?\r\n\t\t\t*/\r\n\t\t\tfunction template() {\r\n\t\t\t\tvar html =\r\n`<div>\r\n\t<div\r\n\t\tng-if=\"::diInputType === \\'date\\'\">\r\n\t\t<label\r\n\t\t\tng-if=\"::diInputLabel\"\r\n\t\t\tclass=\"form-row-label\">\r\n\t\t\t{{::diInputLabel}}\r\n\t\t</label>\r\n\t\t<div\r\n\t\t\tclass =\"datepicker\"\r\n            ng-if=\"::diShowIcon === true\">\r\n\t\t\t<div\r\n\t\t\t\tclass=\"datepicker-input\">\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<di-image\r\n\t\t\t\t\t\tclass=\"datepicker-button\"\r\n\t\t\t\t\t\troot-element=\"button\"\r\n\t\t\t\t\t\timage=\"calendar\"\r\n\t\t\t\t\t\timage-colour=\"button\"\r\n                        tabindex=\"-1\"\r\n\t\t\t\t\t\ttype=\"button\">\r\n\t\t\t\t\t</di-image>\r\n\t\t\t\t</span>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclass=\"input form-control date-input\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tng-model=\"bindModel[bindModelProperty]\"\r\n\t\t\t\t\tng-change=\"onChange()\"\r\n                    ng-disabled=\"::disabled\"\r\n\t\t\t\t\tng-click=\"inputCtrl.showDatePicker()\"\r\n\t\t\t\t\tdi-validate=\"{{::validationPropertyName}}\"\r\n\t\t\t\t\tvalidate-on-blur=\"{{::validateOnBlur}}\"\r\n\t\t\t\t\tvalidation-model-display-name=\"{{::validationModelDisplayName}}\"\r\n\t\t\t\t\tvalidation-message-position=\"{{::validationMessagePosition}}\"\r\n\t\t\t\t\tvalidation-message=\"{{::validationMessage}}\"\r\n\t\t\t\t\tplaceholder=\"{{::placeholder}}\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n        <div\r\n\t\t\tclass =\"datepicker\"\r\n            ng-if=\"::diShowIcon !== true\">\r\n\t\t\t<div>\t\t\t\t\r\n\t\t\t\t<input\r\n\t\t\t\t\tclass =\"input form-control date-input\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tng-model=\"bindModel[bindModelProperty]\"\r\n\t\t\t\t\tng-change=\"onChange()\"\r\n                    ng-disabled=\"::disabled\"\r\n\t\t\t\t\tng-click=\"inputCtrl.showDatePicker()\"\r\n\t\t\t\t\tdi-validate=\"{{::validationPropertyName}}\"\r\n\t\t\t\t\tvalidate-on-blur=\"{{::validateOnBlur}}\"\r\n\t\t\t\t\tvalidation-model-display-name=\"{{::validationModelDisplayName}}\"\r\n\t\t\t\t\tvalidation-message-position=\"{{::validationMessagePosition}}\"\r\n\t\t\t\t\tvalidation-message=\"{{::validationMessage}}\"\r\n\t\t\t\t\tplaceholder=\"{{::placeholder}}\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div\r\n\t\tng-if=\"::diInputType === \\'number\\'\">\r\n\t\t<label\r\n\t\t\tng-if=\"::diInputLabel\"\r\n\t\t\tclass=\"form-row-label\">\r\n\t\t\t{{::diInputLabel}}\r\n\t\t</label>\r\n\t\t<input\r\n\t\t\tclass=\"input form-control\"\r\n\t\t\ttype=\"number\"\r\n\t\t\tpattern=\"/^\\\\d+$/\"\r\n\t\t\tonkeypress=\"return event.charCode >= 48 && event.charCode <= 57\"\r\n\t\t\tng-model=\"bindModel[bindModelProperty]\"\r\n\t\t\tng-model-options=\"bindModelOptions\"\r\n\t\t\tng-change=\"onChange()\"\r\n            ng-disabled=\"::disabled\"\r\n\t\t\tdi-validate=\"{{::validationPropertyName}}\"\r\n\t\t\tvalidate-on-blur=\"{{::validateOnBlur}}\"\r\n\t\t\tvalidation-model-display-name=\"{{::validationModelDisplayName}}\"\r\n\t\t\tvalidation-message-position=\"{{::validationMessagePosition}}\"\r\n\t\t\tvalidation-message=\"{{::validationMessage}}\"\r\n\t\t\tplaceholder=\"{{::placeholder}}\" />\r\n\t</div>\r\n\t<div\r\n\t\tng-if=\"::diInputType === \\'checkbox\\'\">\r\n\t\t<label\r\n\t\t\tclass=\"checkbox\">\r\n\t\t\t<input\r\n\t\t\t\tclass=\"form-control checkbox-trigger\"\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tng-model=\"bindModel\"\r\n\t\t\t\tng-change=\"onChange()\" />\r\n\t\t\t<div\r\n\t\t\t\tclass=\"checkbox-base\">\r\n\t\t\t</div>\r\n\t\t\t<span\r\n\t\t\t\tclass=\"checkbox-label\">{{::diInputLabel}}</span>\r\n\t\t</label>\r\n\t</div>\r\n\t<div\r\n\t\tng-if=\"::diInputType === \\'email\\'\">\r\n\t\t<label\r\n\t\t\tng-if=\"::diInputLabel\"\r\n\t\t\tclass=\"form-row-label\">\r\n\t\t\t{{::diInputLabel}}\r\n\t\t</label>\r\n\t\t<input\r\n\t\t\tclass=\"input form-control\"\r\n\t\t\ttype=\"email\"\r\n\t\t\tng-model=\"bindModel[bindModelProperty]\"\r\n\t\t\tng-model-options=\"bindModelOptions\"\r\n\t\t\tng-change=\"onChange()\"\r\n\t\t\tdi-validate=\"{{::validationPropertyName}}\"\r\n\t\t\tvalidate-on-blur=\"{{::validateOnBlur}}\"\r\n\t\t\tvalidation-model-display-name=\"{{::validationModelDisplayName}}\"\r\n\t\t\tvalidation-message-position=\"{{::validationMessagePosition}}\"\r\n\t\t\tvalidation-message=\"{{::validationMessage}}\"\r\n\t\t\tplaceholder=\"{{::placeholder}}\" />\r\n\t</div>\r\n\t<div\r\n\t\tng-if=\"::diInputType === \\'password\\'\">\r\n\t\t<label\r\n\t\t\tng-if=\"::diInputLabel\"\r\n\t\t\tclass=\"form-row-label\">\r\n\t\t\t{{::diInputLabel}}\r\n\t\t</label>\r\n\t\t<input\r\n\t\t\tclass=\"input form-control\"\r\n\t\t\ttype=\"password\"\r\n\t\t\tng-model=\"bindModel[bindModelProperty]\"\r\n\t\t\tng-model-options=\"bindModelOptions\"\r\n\t\t\tng-change=\"onChange()\"            \r\n\t\t\tdi-validate=\"{{::validationPropertyName}}\"\r\n\t\t\tvalidate-on-blur=\"{{::validateOnBlur}}\"\r\n\t\t\tvalidation-model-display-name=\"{{::validationModelDisplayName}}\"\r\n\t\t\tvalidation-message-position=\"{{::validationMessagePosition}}\"\r\n\t\t\tvalidation-message=\"{{::validationMessage}}\"\r\n\t\t\tplaceholder=\"{{::placeholder}}\" />\r\n\t</div>\r\n\t<div\r\n\t\tng-if=\"::diInputType === \\'decimal\\'\">\r\n\t\t<label\r\n\t\t\tng-if=\"::diInputLabel\"\r\n\t\t\tclass=\"form-row-label\">\r\n\t\t\t{{::diInputLabel}}\r\n\t\t</label>\r\n\t\t<input\r\n\t\t\tclass=\"input form-control numericcell\"\r\n\t\t\ttype=\"text\"\r\n\t\t\tng-model=\"bindModel[bindModelProperty]\"\r\n\t\t\tng-model-options=\"bindModelOptions\"\r\n            ng-disabled=\"::disabled\"\r\n\t\t\tng-change=\"onChange()\"\r\n\t\t\tdi-validate=\"{{::validationPropertyName}}\"\r\n\t\t\tvalidate-on-blur=\"{{::validateOnBlur}}\"\r\n\t\t\tvalidation-model-display-name=\"{{::validationModelDisplayName}}\"\r\n\t\t\tvalidation-message-position=\"{{::validationMessagePosition}}\"\r\n\t\t\tvalidation-message=\"{{::validationMessage}}\"\r\n\t\t\tplaceholder=\"{{::placeholder}}\" />\r\n\t</div>\r\n\t<div\r\n\t\tng-if=\"::diInputType === \\'text\\'\">\r\n        <label\r\n\t\t\tng-if=\"::diInputLabel\"\r\n\t\t\tclass=\"form-row-label\">\r\n\t\t\t{{::diInputLabel}}\r\n\t\t</label>\r\n\t\t<input\r\n\t\t\tclass=\"input form-control\"\r\n\t\t\ttype=\"text\"\r\n\t\t\tng-model=\"bindModel[bindModelProperty]\"\r\n\t\t\tng-model-options=\"bindModelOptions\"\r\n\t\t\tng-change=\"onChange()\"\r\n            ng-disabled=\"::disabled\"\r\n\t\t\tdi-validate=\"{{::validationPropertyName}}\"\r\n\t\t\tvalidate-on-blur=\"{{::validateOnBlur}}\"\r\n\t\t\tvalidation-model-display-name=\"{{::validationModelDisplayName}}\"\r\n\t\t\tvalidation-message-position=\"{{::validationMessagePosition}}\"\r\n\t\t\tvalidation-message=\"{{::validationMessage}}\"\r\n\t\t\tplaceholder=\"{{::placeholder}}\" />\r\n\t</div>\r\n    <div\r\n\t\tng-if=\"::diInputType === \\'hidden\\'\">\r\n       \r\n\t\t<input\r\n\t\t\tclass =\"input form-control\"\r\n\t\t\ttype=\"hidden\"\r\n\t\t\tng-model=\"bindModel[bindModelProperty]\"\r\n\t\t\tng-model-options=\"bindModelOptions\"\r\n\t\t\tng-change=\"onChange()\"\r\n            ng-disabled=\"::disabled\"\r\n\t\t\tdi-validate=\"{{::validationPropertyName}}\"\r\n\t\t\tvalidate-on-blur=\"{{::validateOnBlur}}\"\r\n\t\t\tplaceholder=\"{{::placeholder}}\" />\r\n\t</div>\r\n    <div\r\n\t\tng-if=\"::diInputType === \\'textarea\\'\">\r\n        <label\r\n\t\t\tng-if=\"::diInputLabel\"\r\n\t\t\tclass =\"form-row-label\">\r\n\t\t\t\t{{::diInputLabel}}\r\n\t\t</label>\r\n\t\t<textarea\r\n\t\t\tng-class =\"::diClass\"\t\t\t\r\n\t\t\tng-model=\"bindModel[bindModelProperty]\"\r\n\t\t\tng-model-options=\"bindModelOptions\"\r\n\t\t\tng-change=\"onChange()\"\r\n            ng-disabled=\"::disabled\"\r\n\t\t\tdi-validate=\"{{::validationPropertyName}}\"\r\n\t\t\tvalidate-on-blur=\"{{::validateOnBlur}}\"\r\n\t\t\tvalidation-model-display-name=\"{{::validationModelDisplayName}}\"\r\n\t\t\tvalidation-message-position=\"{{::validationMessagePosition}}\"\r\n\t\t\tvalidation-message=\"{{::validationMessage}}\"\t\t\t\r\n\t\t\tplaceholder=\"{{::placeholder}}\">\r\n        </textarea>\r\n\t</div>\r\n</div>`;\r\n\r\n\t\t\t\treturn html;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diInput;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/input/diInputDirective.js","//{CODE:CAC15}\r\n// di.core.angular.controls.input\r\ndefine(['pikaday'], function (Pikaday) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.controller('InputController', InputController);\r\n\r\n        InputController.$inject = ['$scope', '$element', 'DATE_FORMATS', '$timeout'];\r\n\r\n        function InputController(scope, element, DATE_FORMATS, $timeout) {\r\n            var vm = this;\r\n            var pikaday;\r\n\r\n            vm.showDatePicker = showDatePicker;\r\n            vm.validationModelDisplayName = scope.validationModelDisplayName;\r\n            \r\n            initialize();\r\n\r\n            return;\r\n\r\n            function initialize() {\r\n                vm.validationProperty = scope.validationModelProperty;\r\n\r\n                $timeout(function () {\r\n                    if (scope.diInputType === \"date\") {\r\n                        var inputElm = element.find('input');\r\n\r\n                        pikaday = new Pikaday({\r\n                            field: inputElm[0],\r\n                            theme: 'di-pikaday',\r\n                            format: DATE_FORMATS.supported[0],\r\n                            onSelect: function() {\r\n                                $timeout(function() {\r\n                                    inputElm.trigger('input');\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        scope.$on('$destroy', function () {\r\n                            pikaday.destroy();\r\n                            inputElm.remove();\r\n                            pikaday = undefined;\r\n                        });\r\n                    };\r\n                }, 0, false);\r\n            }\r\n\r\n            function showDatePicker() {\r\n                pikaday.show();\r\n            }\r\n        }\r\n\r\n        return InputController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/input/inputController.js","import { ModalResourceController } from './modal-resource.controller';\r\nimport { ModalWindowService } from './modal-window.service';\r\n\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.controller('ResourceController', ModalResourceController);\r\n        module.service('modalWindow', ModalWindowService);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/modal/_loader.js","//{CODE:ACS02}\r\nimport { ModalControllerBase } from './modal-base.controller';\r\nlet util = $di.utility.util;\r\n\r\nconst constants = Symbol('constants');\r\n\r\nclass ModalResourceController extends ModalControllerBase {\r\n    constructor($q, $element, translator, promptWindow, options, close, partyProxy, elementNotifier) {\r\n        super($element, promptWindow, options, close);\r\n        this.$q = $q;\r\n        this.translator = translator;\r\n        this.promptWindow = promptWindow;\r\n        this.partyProxy = partyProxy;\r\n        this.elementNotifier = elementNotifier;\r\n\r\n\r\n        this[constants] = {\r\n            save: 'EINVOICING.PORTAL.ACTIONS.GENERAL.SAVE',\r\n            cancel: 'EINVOICING.PORTAL.ACTIONS.GENERAL.CANCEL',\r\n            close: 'EINVOICING.PORTAL.ACTIONS.GENERAL.CLOSE',\r\n            remove: 'EINVOICING.PORTAL.ACTIONS.GENERAL.REMOVE'\r\n        };\r\n\r\n        this.onCountryChanged = this.onCountryChanged.bind(this);\r\n        this.validateCode = this.validateCode.bind(this);\r\n        this.validationFailed = this.validationFailed.bind(this);\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.translator.whenReady().then(() => {\r\n            if (util.isDefined(this.options.title)) {\r\n                this.title = this.translator.instantTranslate(this.options.title);\r\n            }\r\n\r\n            this.save = this.translator.instantTranslate(this.options.save || this[constants].save);\r\n            this.remove = this.translator.instantTranslate(this.options.remove || this[constants].remove);\r\n\r\n            const cancelText = this.model.isEditable\r\n                ? this.options.cancel || this[constants].cancel\r\n                : this.options.close || this[constants].close;\r\n\r\n            this.cancel = this.translator.instantTranslate(cancelText);\r\n        });\r\n    }\r\n\r\n    onCountryChanged(country) {\r\n        this.changed = true;\r\n\r\n        if (this.options.onCountryChanged) {\r\n            this.options.onCountryChanged(country);\r\n        }\r\n\r\n        this.onDataChanged();\r\n    }\r\n\r\n    onPreSave() {\r\n        if (this.options.validateOnSave && this.changed) {\r\n            this.validateCode(this.model, this.onSave);\r\n        } else {\r\n            this.onSave();\r\n        }\r\n    }\r\n\r\n      validateCode(identifier) {\r\n\r\n      var dataModel = {\r\n          id: identifier.id,\r\n          partyId: identifier.partyId,\r\n          partyCodeType: identifier.partyCodeType,\r\n          codeValue: identifier.code,\r\n          schemeId: identifier.scheme.id,\r\n          relatedPartyId: identifier.relatedParty.id\r\n        };\r\n\r\n      var promise = this.partyProxy.validatePartyCode(dataModel).then((result) => {\r\n            return {\r\n                success: result.success,\r\n                message: result.resultData\r\n            };\r\n        });\r\n\r\n        this.$q.all([promise]).then(([result]) => {\r\n            if (result.success === false) {\r\n                this.validationFailed(result);\r\n            } else {\r\n                this.onSave();\r\n            }\r\n        });\r\n    }\r\n\r\n    validationFailed(result) {\r\n        const el = this.$element[0].querySelector('#codeValue');\r\n        if (util.isNullOrUndefined(el) === false) {\r\n\r\n            var notification = this.elementNotifier.error(\r\n                result.message,\r\n                el);\r\n\r\n            notification.show();\r\n        } else {\r\n            console.log(result.message);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nModalResourceController.prototype.constructor.$inject = ['$q','$element', 'translator', 'promptWindow', 'options', 'close','partyProxy','elementNotifier'];\r\n\r\nexport { ModalResourceController }\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/modal/modal-resource.controller.js","//{CODE:CAC0A}\r\nlet util = $di.utility.util;\r\n\r\nclass ModalWindowService {\r\n    constructor(modalService) {\r\n        this.modalService = modalService;\r\n    }\r\n\r\n    show(options, saveCallback, cancelCallback, deleteCallback) {\r\n        this.modalService.showModal({\r\n            templateUrl: options.templateUrl,\r\n            controller: options.controller,\r\n            controllerAs: options.controllerAs || '$ctrl',\r\n            bodyClass: options.css || \"custom-modal-open\",\r\n            inputs: {\r\n                options: options\r\n            },\r\n            preventClose: options.preventClose || false,\r\n            preClose: (modal) => { modal.element.modal('hide'); }\r\n        }).then((modal) => {\r\n            modal.element.modal();\r\n            modal.close.then((result) => {\r\n                switch (result.state) {\r\n                    case 'saved':\r\n                        if (saveCallback && util.isFunction(saveCallback)) {\r\n                            saveCallback(result.object);\r\n                        }\r\n                        break;\r\n                    case 'deleted':\r\n                        if (deleteCallback && util.isFunction(deleteCallback)) {\r\n                            deleteCallback(result.object);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        if (cancelCallback && util.isFunction(cancelCallback)) {\r\n                            cancelCallback(result.object);\r\n                        }\r\n                        break;\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nModalWindowService.prototype.constructor.$inject = ['ModalService'];\r\n\r\nexport { ModalWindowService }\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/modal/modal-window.service.js","//{CODE:CAM03}\r\n// di.core.angular.controls.multiSelect\r\ndefine([\r\n\t'./diMultiSelectDirective'\r\n], function (\r\n\tdiMultiSelectDirectiveLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n    \tdiMultiSelectDirectiveLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/multiSelect/_loader.js","//{CODE:CAM05}\r\n// di.core.angular.controls.multiSelect\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diMultiSelect', diMultiSelect);\r\n\t\t\t\t\r\n\t\tfunction diMultiSelect() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n                replace: true,\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tselectedOptions: '=',\t\t\t\t\t\r\n\t\t\t\t\tavailableOptions: '=',\r\n\t\t\t\t\tplaceholder: '@',\r\n\t\t\t\t\tlabelText: '@',\r\n\t\t\t\t\ticon: '@',\r\n\t\t\t\t\tmultiSelect: '@',\r\n\t\t\t\t\tmaxItemsToShow: '@',\r\n\t\t\t\t\tonChange: '&'\r\n\t\t\t\t},\r\n\r\n\t\t\t\ttemplate: function (element, attrs) {\r\n\t\t\t\t\tif (attrs.multiSelect === undefined) {\r\n\t\t\t\t\t\tattrs.multiSelect = 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar labelCtrl = '<label di-translate=\"{{::labelText}}\"></label>';\r\n\r\n\t\t\t\t\tif (!attrs.labelText) {\r\n\t\t\t\t\t\tlabelCtrl = '';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!attrs.maxItemsToShow) {\r\n\t\t\t\t\t\tattrs.maxItemsToShow = 3;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar html =\r\n\t\t\t\t\t'<div>\\\r\n\t\t\t\t\t' + labelCtrl + '\\\r\n\t\t\t\t\t<div \\\r\n\t\t\t\t\t\tclass=\"input-group\">\\\r\n\t\t\t\t\t\t<span\\\r\n\t\t\t\t\t\t\tclass=\"input-group-addon\">\\\r\n\t\t\t\t\t\t\t<span\\\r\n\t\t\t\t\t\t\t\tclass=\"{{::icon}}\"></span>\\\r\n\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t<button\ttype=\"button\"\\\r\n\t\t\t\t\t\t\tclass=\"btn btn-default\"\\\r\n\t\t\t\t\t\t\tstyle=\"-webkit-border-radius: 0px; border-radius: 0px; text-align:left;\"\\\r\n\t\t\t\t\t\t\tng-model=\"selectedOptions\"\\\r\n\t\t\t\t\t\t    ng-change=\"onChange()\"\\\r\n\t\t\t\t\t\t\tdata-html=\"1\"\\\r\n\t\t\t\t\t\t\tdata-multiple=\"' + attrs.multiSelect + '\"\\\r\n\t\t\t\t\t\t\tdata-animation=\"am-flip-x\"\\\r\n\t\t\t\t\t\t\tplaceholder=\"{{::placeholder}}\"\\\r\n\t\t\t\t\t\t\tmax-length=\"{{::maxItemsToShow}}\"\\\r\n\t\t\t\t\t\t\tbs-options=\"filter.value as filter.label for filter in availableOptions\" bs-select>\\\r\n\t\t\t\t\t\t<span \\\r\n\t\t\t\t\t\t\tclass=\"caret\">\\\r\n\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t</button>\\\r\n\t\t\t\t\t</div>\\\r\n\t\t\t\t\t</div>';\r\n\r\n\t\t\t\t\treturn html;\r\n\t\t\t\t}\t\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diMultiSelect;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/multiSelect/diMultiSelectDirective.js","//{CODE:CAC03}\r\n// di.core.angular.controls.notifier\r\ndefine([\r\n    'toastr'\r\n], function (toastr) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n        module.provider('notifier', NotifierProvider);\r\n\r\n        /**\r\n         * Displays toast notifications to the user\r\n         */\r\n        function NotifierProvider() {\r\n            var config = {};\r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            };\r\n\r\n            return provider;\r\n\r\n            /**\r\n             * Configure the service\r\n             * @param config\r\n             */\r\n            function configure(cfg) {\r\n                guard.throwIfNotAnObject(\"CAL0101E\", cfg, 'cfg');\r\n\r\n                config = cfg;\r\n\r\n                toastr.options.timeOut = cfg.timeOut;\r\n                toastr.options.positionClass = cfg.positionClass;\r\n            }\r\n\r\n            function $get() {\r\n                return {\r\n                    error: error,\r\n                    info: info,\r\n                    success: success,\r\n                    warning: warning\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Notify the user of an error\r\n             * @param message\r\n             * @param title\r\n             */\r\n            function error(message, title) {\r\n                toastr.error(message, title, {\r\n                        extendedTimeOut: 0, timeOut:\r\n                        config.errorTimeOut || config.timeOut || 0\r\n                    });\r\n            }\r\n\r\n            /**\r\n             * Notify the user of information\r\n             * @param message\r\n             * @param title\r\n             */\r\n            function info(message, title) {\r\n                toastr.info(message, title, {\r\n                    timeOut: config.infoTimeOut || config.timeOut || 5000\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Notify the user of success\r\n             * @param message\r\n             * @param title\r\n             */\r\n            function success(message, title, onClick, timeOut) {\r\n                toastr.success(message, title, {\r\n                    timeOut: timeOut || config.successTimeOut || config.timeOut || 5000,\r\n                    onclick: onClick,\r\n                    closeButton: util.isFunction(onClick)\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Notify of a warning\r\n             * @param message\r\n             * @param title\r\n             */\r\n            function warning(message, title, onClick) {\r\n                toastr.warning(message, title, {\r\n                    timeOut: config.warningTimeOut || config.timeOut || 5000,\r\n                    onclick: onClick,\r\n                    closeButton: util.isFunction(onClick)\r\n            });\r\n            }\r\n        }\r\n\r\n        return NotifierProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/notifier.js","// di.core.angular.controls.prompt\r\ndefine([\r\n'./promptWindow'\r\n], function (\r\n    promptWindowLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        promptWindowLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/promptWindow/_loader.js","//{CODE:CAO01}\r\n// di.core.angular.controls.promptWindow\r\ndefine(['bootbox'],\r\n    function (bootbox) {\r\n        'use strict';\r\n\r\n        return function (module) {\r\n            var util = $di.utility.util;\r\n            var guard = $di.exception.guard;\r\n            var box;\r\n\r\n            module.factory('promptWindow', promptWindow);\r\n\r\n            promptWindow.$inject = ['translator'];\r\n\r\n            function promptWindow(translator) {\r\n                var promptConfig = {\r\n                    title: \"\",\r\n                    message: \"\",\r\n                    okBtnText: \"\",\r\n                    okBtnClass: \"\",\r\n                    cancelBtnText: \"\",\r\n                    cancelBtnClass: \"\",\r\n                    callback: undefined,\r\n                    condition: true\r\n                };\r\n\r\n                return {\r\n                    alert: alert,\r\n                    confirm: confirm,\r\n                    prompt: prompt\r\n                };\r\n\r\n                /**\r\n                * Shows a modal pop up with a message and OK button.\r\n                * @param promptConfig\r\n                */\r\n                function alert(inputPromptConfig) {\r\n                    closeIfActiveBox();\r\n\r\n                    let promptConfig = getPromptConfig(inputPromptConfig);\r\n                    validatePromptConfig(promptConfig);\r\n                    setDefaults(promptConfig);\r\n\r\n                    translator.whenReady()\r\n                        .then(function () {\r\n                            box = bootbox.alert(\r\n                                {\r\n                                    title: translator.instantTranslate(promptConfig.title.stringToTranslate, promptConfig.title.translationArguments),\r\n                                    message: translator.instantTranslate(promptConfig.message.stringToTranslate, promptConfig.message.translationArguments),\r\n                                    callback: promptConfig.callback,\r\n                                    buttons: {\r\n                                        ok: {\r\n                                            label: translator.instantTranslate(promptConfig.okBtnText.stringToTranslate, promptConfig.okBtnText.translationArguments),\r\n                                            className: promptConfig.okBtnClass\r\n                                        }\r\n                                    }\r\n                                });\r\n                        });\r\n                }\r\n\r\n                /**\r\n                * Shows a modal pop up with message and OK, Cancel buttons.\r\n                * Callback returns 'true' for OK button and 'false' otherwise.\r\n                * @param promptConfig\r\n                */\r\n                function confirm(inputPromptConfig) {\r\n                    closeIfActiveBox();\r\n\r\n                    let promptConfig = getPromptConfig(inputPromptConfig);\r\n                    validatePromptConfig(promptConfig);\r\n                    setDefaults(promptConfig);\r\n\r\n                    translator.whenReady()\r\n                        .then(function () {\r\n                            box = bootbox.confirm(\r\n                                {\r\n                                    title: translator.instantTranslate(promptConfig.title.stringToTranslate, promptConfig.title.translationArguments),\r\n                                    message: translator.instantTranslate(promptConfig.message.stringToTranslate, promptConfig.message.translationArguments),\r\n                                    callback: promptConfig.callback,\r\n                                    buttons: {\r\n                                        confirm: {\r\n                                            label: translator.instantTranslate(promptConfig.okBtnText.stringToTranslate, promptConfig.okBtnText.translationArguments),\r\n                                            className: promptConfig.okBtnClass\r\n                                        },\r\n                                        cancel: {\r\n                                            label: translator.instantTranslate(promptConfig.cancelBtnText.stringToTranslate, promptConfig.cancelBtnText.translationArguments),\r\n                                            className: promptConfig.cancelBtnClass\r\n                                        }\r\n                                    }\r\n                                });\r\n                        });\r\n                }\r\n\r\n                /**\r\n                * Shows a modal pop up with message, input control and OK, Cancel buttons.\r\n                * Callback returns text entered into the input control.\r\n                * @param promptConfig\r\n                */\r\n                function prompt(inputPromptConfig) {\r\n                    closeIfActiveBox();\r\n\r\n                    let promptConfig = getPromptConfig(inputPromptConfig);\r\n                    validatePromptConfig(promptConfig);\r\n                    setDefaults(promptConfig);\r\n\r\n                    translator.whenReady()\r\n                        .then(function () {\r\n                            box = bootbox.prompt(\r\n                                {\r\n                                    title: translator.instantTranslate(promptConfig.title.stringToTranslate, promptConfig.title.translationArguments),\r\n                                    message: translator.instantTranslate(promptConfig.message.stringToTranslate, promptConfig.message.translationArguments),\r\n                                    callback: promptConfig.callback,\r\n                                    buttons: {\r\n                                        confirm: {\r\n                                            label: translator.instantTranslate(promptConfig.okBtnText.stringToTranslate, promptConfig.okBtnText.translationArguments),\r\n                                            className: promptConfig.okBtnClass\r\n                                        },\r\n                                        cancel: {\r\n                                            label: translator.instantTranslate(promptConfig.cancelBtnText.stringToTranslate, promptConfig.cancelBtnText.translationArguments),\r\n                                            className: promptConfig.cancelBtnClass\r\n                                        }\r\n                                    }\r\n                                });\r\n                        });\r\n                }\r\n\r\n                /**\r\n                 * Closes the active bootbox window before showing another one.             \r\n                 */\r\n                function closeIfActiveBox() {\r\n                    if (box) {\r\n                        box.modal('hide');\r\n                    }\r\n                }\r\n\r\n                /**\r\n                * Validates if prompt configuration was supplied before display a modal pop up.\r\n                * @param promptConfig\r\n                */\r\n                function validatePromptConfig(promptConfig) {\r\n                    guard.throwIfNullOrUndefined(\"CAO0108E\", promptConfig, \"promptConfig\");\r\n                    guard.throwIfEmptyString(\"CAO0105E\", promptConfig.message.stringToTranslate, \"promptConfig.message\");\r\n                    guard.throwIfEmptyString(\"CAO0106E\", promptConfig.title.stringToTranslate, \"promptConfig.title\");\r\n                }\r\n\r\n                /**\r\n                 * Sets default buttons texts if not provided in config              \r\n                 */\r\n                function setDefaults(promptConfig) {\r\n                    if (util.isUndefined(promptConfig.okBtnText)) {\r\n                        promptConfig.okBtnText.stringToTranslate = \"CORE.PROMPT.OK\";\r\n                    }\r\n\r\n                    if (util.isUndefined(promptConfig.cancelBtnText)) {\r\n                        promptConfig.cancelBtnText.stringToTranslate = \"CORE.PROMPT.CANCEL\";\r\n                    }\r\n\r\n                    if (util.isUndefined(promptConfig.okBtnClass)) {\r\n                        promptConfig.okBtnClass = \"btn-primary\";\r\n                    }\r\n\r\n                    if (util.isUndefined(promptConfig.cancelBtnClass)) {\r\n                        promptConfig.cancelBtnClass = \"btn-default\";\r\n                    }\r\n                }\r\n\r\n                function getPromptConfig(inputConfig) {\r\n                    let promptConfig = {\r\n                        title: {},\r\n                        message: {},\r\n                        okBtnText: {},\r\n                        cancelBtnText: {},\r\n                    };\r\n\r\n                    for (let property of ['title', 'message', 'okBtnText', 'cancelBtnText']) {\r\n                        if (util.isObject(inputConfig[property])) {\r\n                            promptConfig[property] = inputConfig[property];\r\n                        } else {\r\n                            promptConfig[property].stringToTranslate = inputConfig[property];\r\n                        }\r\n                    }\r\n\r\n                    return _.extend(inputConfig, promptConfig);\r\n                }\r\n            }\r\n\r\n            return promptWindow;\r\n        };\r\n    });\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/promptWindow/promptWindow.js","define([\r\n    './user-edit-restrictions-proxy.service',\r\n    './controls-restriction-manager.service',\r\n    './restrictions-store.service'\r\n], function (\r\n    userEditRestrictionsProxy,\r\n    controlsRestrictionManager,\r\n    restrictionStore) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.service(\r\n            'userEditRestrictionsProxy',\r\n            userEditRestrictionsProxy.UserEditRestrictionsProxyService);\r\n\r\n        module.service(\r\n            'controlsRestrictionManager',\r\n            controlsRestrictionManager.ControlsRestrictionManager);\r\n\r\n        module.service(\r\n            'restrictionStore',\r\n            restrictionStore.RestrictionsStore);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/restrictions/_loader.js","class ControlsRestrictionManager {\r\n    constructor(restrictionStore) {\r\n        this.util = $di.utility.util;\r\n        \r\n        this._restrictionStore = restrictionStore;\r\n        this._subscriptions = new Map();\r\n        this._optionSubscriptions = [];\r\n        this._initialised = false;\r\n        this._allowAddNewLine = true;\r\n        this._allowAddAllowance = true;\r\n        this._allowAddCharge = true;\r\n    }\r\n    \r\n    initialise(invoiceId, callback) {\r\n        this._invoiceId = invoiceId;\r\n        this._allowSubscriptions = false;\r\n        this._initialised = false;\r\n        this._subscriptions = new Map();\r\n        this._optionSubscriptions = [];\r\n        \r\n        if (this.util.isNumber(invoiceId) && invoiceId > 0) {\r\n            this._allowSubscriptions = true;\r\n            this._restrictionStore.loadRestrictions(invoiceId).then(() => {\r\n                this._initialised = true;\r\n                this.loadRestrictionLevelsFromStore();\r\n                this.processSubscriptions();\r\n                \r\n                callback(this._userRestrictionLevel);\r\n            });\r\n        }\r\n    }\r\n    \r\n    loadRestrictionLevelsFromStore() {\r\n        let editRestrictions = this._restrictionStore.getEditRestrictions();\r\n\r\n        this._userRestrictionLevel = editRestrictions.userRestrictionLevel.toLowerCase();\r\n        this._entityEditRestrictions = editRestrictions.entityEditStates;\r\n        \r\n        this._allowAddNewLine = editRestrictions.allowAddNewLine;\r\n        this._allowAddAllowanceCharge = editRestrictions.allowAddAllowanceCharge;\r\n    }\r\n\r\n    addOptionsSubscription(subcriptionFunction) {\r\n        this._optionSubscriptions.push(subcriptionFunction);\r\n\r\n        if (this._initialised) {\r\n            subcriptionFunction({\r\n                allowAddNewLine: this._allowAddNewLine,\r\n                allowAddAllowanceCharge: this._allowAddAllowanceCharge\r\n            });\r\n        }\r\n    }\r\n\r\n    addControlChangeSubscription(fullName, subcriptionFunction) {\r\n        if (!this._allowSubscriptions) return;\r\n        \r\n        this._subscriptions.set(fullName, subcriptionFunction);\r\n        \r\n        if (this._initialised) {\r\n            subcriptionFunction(this.disableControl(fullName));\r\n        }\r\n    }\r\n\r\n    processSubscriptions() {\r\n        for (const [key, value] of this._subscriptions) {\r\n            value(this.disableControl(key));\r\n        }\r\n\r\n        for (const subcriptionFunction of this._optionSubscriptions) {\r\n            subcriptionFunction({\r\n                allowAddNewLine: this._allowAddNewLine,\r\n                allowAddAllowanceCharge: this._allowAddAllowanceCharge\r\n            });\r\n        }\r\n    }\r\n\r\n    disableControl(name) {\r\n        if (this._userRestrictionLevel === 'none') return false;\r\n        if (this._userRestrictionLevel === 'all') return true;\r\n        if (this._entityEditRestrictions.length === 0) return false;\r\n\r\n        let disable = false;\r\n\r\n        for (let restriction of this._entityEditRestrictions) {\r\n            let fullName = restriction.entityType.toLowerCase() + '.' + restriction.entityName.toLowerCase();\r\n            if (fullName === name.toLowerCase()) {\r\n                disable = !restriction.allowEdit;\r\n                break;\r\n            }\r\n        }\r\n        \r\n        return disable;\r\n    }\r\n}\r\n\r\nControlsRestrictionManager.prototype.constructor.$inject = ['restrictionStore'];\r\n\r\nexport { ControlsRestrictionManager }\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/restrictions/controls-restriction-manager.service.js","class RestrictionsStore {\r\n    constructor(userEditRestrictionsProxy, sessionStore) {\r\n        this._userEditRestrictionsProxy = userEditRestrictionsProxy;\r\n        this._sessionStore = sessionStore;\r\n    }\r\n\r\n    loadRestrictions(invoiceId) {\r\n        return this._userEditRestrictionsProxy.getEditRestrictions(invoiceId).then(result => {\r\n            this._sessionStore.set('editRestrictions', result, 'restrictionsStore');\r\n        });\r\n    }\r\n    \r\n    getEditRestrictions() {\r\n        return this._sessionStore.get('editRestrictions', 'restrictionsStore');\r\n    }\r\n}\r\n\r\nRestrictionsStore.prototype.constructor.$inject = ['userEditRestrictionsProxy', 'sessionStore'];\r\n\r\nexport { RestrictionsStore }\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/restrictions/restrictions-store.service.js","class UserEditRestrictionsProxyService {\r\n    constructor(webApiHttp, urlHelper) {\r\n        this._webApiHttp = webApiHttp;\r\n        this._urlHelper = urlHelper;\r\n    }\r\n\r\n    getEditRestrictions(invoiceId) {\r\n        let requestedParams = {\r\n            invoiceId: invoiceId\r\n        };\r\n\r\n        let requestedUrl = this._urlHelper.setParameters('Restrictions/GetEditRestrictions', requestedParams);\r\n\r\n        return this._webApiHttp.get(requestedUrl);\r\n    }\r\n}\r\n\r\nUserEditRestrictionsProxyService.prototype.constructor.$inject = ['webApiHttp', 'urlHelper'];\r\n\r\nexport { UserEditRestrictionsProxyService }\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/restrictions/user-edit-restrictions-proxy.service.js","//{CODE:CAC0E}\r\n// di.core.angular.controls.select\r\ndefine([\r\n\t'./diObjectFilter',\r\n\t'./diSelectController',\r\n\t'./diSelectDirective',\r\n    './diSelectUpgrade',\r\n    './diSelectUpgradeController'\r\n], function (\r\n\tobjectFilterLoader,\r\n\tselectControllerLoader,\r\n\tselectDirectiveLoader,\r\n    selectDirectiveUpgradeLoader,\r\n    selectUpgradeControllerLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    objectFilterLoader(module);\r\n\t    selectControllerLoader(module);\r\n\t    selectDirectiveLoader(module);\r\n\t    selectUpgradeControllerLoader(module);\r\n\t    selectDirectiveUpgradeLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/select/_loader.js","//{CODE:CAC0G}\r\n// di.core.angular.controls.search\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.filter('diObject', diObjectFilter);\r\n\r\n\t\tfunction diObjectFilter() {\r\n\t\t    return function (val, searchData, propertiesToSearch) {\r\n\t\t\t\tvar searchExp = new RegExp(searchData, \"i\");\r\n\t\t\t\tvar matchedObjects = [];\r\n\r\n\t\t\t\t_.each(val, function (item) {\r\n\t\t\t\t\tvar objectMatches = checkObjectMatches(item, searchExp, propertiesToSearch);\r\n\t\t\t\t\tif (objectMatches) {\r\n\t\t\t\t\t\tmatchedObjects.push(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn matchedObjects;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which checks if the any of the searchable properties on the specified object\r\n\t\t\t * are matched by the specified search expression\r\n\t\t\t * @param item\r\n\t\t\t * @param searchExp\r\n\t\t\t * @param propertiesToSearch\r\n\t\t\t */\r\n\t\t\tfunction checkObjectMatches(item, searchExp, propertiesToSearch) {\r\n\t\t\t\treturn _.some(propertiesToSearch, function (property) {\r\n\t\t\t\t\tif (item[property] !== undefined) {\r\n\t\t\t\t\t\tvar itemMatches = item[property].search(searchExp) > -1;\r\n\t\t\t\t\t\treturn itemMatches;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diObjectFilter;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/select/diObjectFilter.js","//{CODE:CAC0T}\r\n// di.core.angular.controls.select\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.controller('DiSelectController', DiSelectController);\r\n\r\n\t\tDiSelectController.$inject = ['$scope', 'promptWindow', 'controlsRestrictionManager'];\r\n\r\n\t\tfunction DiSelectController(scope, promptWindow, controlsRestrictionManager) {\r\n\t\t\tvar util = $di.utility.util;\r\n\t\t\tvar ngUtil = $di.angular.util;\r\n\r\n\t\t\tvar selectedItem = {};\r\n\t\t\tvar searchablePropertyNames;\r\n\t\t\tvar ignoreBoundObjectProperty;\r\n\t\t\tvar highlightedItem;\r\n\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvm.onItemSelected = onItemSelected;\r\n\t\t\tvm.filteredItems = [];\r\n\t\t\tvm.inputKeypress = inputKeypress;\r\n\t\t\tvm.inputKeyUp = inputKeyUp;\r\n\t\t\tvm.toggleActions = {};\r\n\t\t\tvm.selectedItem = {};\r\n\t\t\tvm.controlState = { disabled: false };\r\n\t\t\tvm.selectStyle = {};\r\n\t\t\tscope.onSearchTextChange = applySearch;\r\n            \r\n\t\t\tvm.isSelected = isSelected;\r\n\r\n\t\t\twatchBoundObjectProperty();\r\n\t\t\twatchItems();\r\n            \r\n\t\t\tif (scope.validationPropertyName && scope.diValidateModel) {\r\n\t\t\t    controlsRestrictionManager.addControlChangeSubscription(scope.diValidateModel + '.' + scope.validationPropertyName,\r\n                    (disabled) => {\r\n                        vm.controlState.disabled = disabled;\r\n                        if (disabled) {\r\n                            vm.selectStyle = { 'background-color': '#dddddd' };\r\n                        }\r\n                    });\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n            \r\n\t\t\tfunction applySearch(item) {\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\tif (canBeShown(item)) {\r\n\t\t\t\t\t\tvar filteredItem = {\r\n\t\t\t\t\t\t\titem: item,\r\n\t\t\t\t\t\t\thighlighed: false\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tif (vm.filteredItems.length == 0) {\r\n\t\t\t\t\t\t\tfilteredItem.previous = filteredItem;\r\n\t\t\t\t\t\t\tfilteredItem.next = filteredItem;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfilteredItem.previous = vm.filteredItems[vm.filteredItems.length - 1];\r\n\t\t\t\t\t\t\tfilteredItem.previous.next = filteredItem;\r\n\t\t\t\t\t\t\tfilteredItem.next = vm.filteredItems[0];\r\n\t\t\t\t\t\t\tfilteredItem.next.previous = filteredItem;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.filteredItems.push(filteredItem);\r\n\r\n\t\t\t\t\t\tfilteredItem.index = vm.filteredItems.length;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.filteredItems.clear();\r\n\t\t\t\thighlightedItem = null;\r\n\r\n\t\t\t\tif (!scope.items || scope.items.length === 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < scope.items.length; i++) {\r\n\t\t\t\t\tapplySearch(scope.items[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction inputKeyUp() {\r\n\t\t\t\tvar newItem = {};\r\n\t\t\t\tvar searchText = scope.getSearchText();\r\n\t\t\t\tnewItem = searchText;\r\n\t\t\t\tscope.bindToObject[scope.bindToProperty] = newItem;\r\n\r\n\t\t\t\tif (scope.watchBinding) {\r\n\t\t\t\t\twatchBoundObjectProperty();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isFunction(scope.onChangeAccessor)) {\r\n\t\t\t\t\tvar onChangeAccessor = scope.onChangeAccessor();\r\n\r\n\t\t\t\t\tif (util.isFunction(onChangeAccessor)) {\r\n\t\t\t\t\t\tonChangeAccessor(newItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction inputKeypress(evt) {\r\n\t\t\t\tvar keyCode = evt.keyCode;\r\n\t\t\t\tvar isHandled = false;\r\n\t\t\t\tvar toggleFunc = vm.toggleActions.show;\r\n\r\n\t\t\t\tswitch (keyCode) {\r\n\t\t\t\t\tcase 9: //Tab\r\n\r\n\t\t\t\t\t\ttoggleFunc = vm.toggleActions.hide;\r\n\r\n\t\t\t\t\t\t//we want the event to propagate\t\t\t\t\t\t\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 13: //Enter\r\n\t\t\t\t\t    isHandled = true;\r\n\t\t\t\t\t\tif (highlightedItem) {\r\n\t\t\t\t\t\t\tonItemSelected(highlightedItem.item);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttoggleFunc = vm.toggleActions.hide;\r\n\r\n\t\t\t\t\t\tstopEventPropagation(evt);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t    case 27: //Escape\r\n\t\t\t\t        isHandled = true;\r\n\t\t\t\t\t\tscope.setSearchText('');\r\n\r\n\t\t\t\t\t\tdisplaySelectedItem();\r\n\r\n\t\t\t\t\t\ttoggleFunc = vm.toggleActions.hide;\r\n\r\n\t\t\t\t\t\tstopEventPropagation(evt);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 38: //Up\r\n\t\t\t\t\t    isHandled = true;\r\n\t\t\t\t\t\tif (highlightedItem) {\r\n\t\t\t\t\t\t\thighlightedItem = highlightedItem.previous;\r\n\t\t\t\t\t\t} else if (vm.filteredItems.length > 0) {\r\n\t\t\t\t\t\t\thighlightedItem = vm.filteredItems[0];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tstopEventPropagation(evt);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 40: //Down\r\n\t\t\t\t\t    isHandled = true;\r\n\t\t\t\t\t\tif (highlightedItem) {\r\n\t\t\t\t\t\t\thighlightedItem = highlightedItem.next;\r\n\t\t\t\t\t\t} else if (vm.filteredItems.length > 0) {\r\n\t\t\t\t\t\t\thighlightedItem = vm.filteredItems[0];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tstopEventPropagation(evt);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttoggleFunc();\r\n\r\n\t\t\t\tif (isHandled && highlightedItem) {\r\n\t\t\t\t\tscope.highlightItem(highlightedItem.index);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction stopEventPropagation(evt) {\r\n\t\t\t\t\tevt.stopPropagation();\r\n\t\t\t\t\tevt.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction displaySelectedItem() {\r\n\t\t\t\tvar displayText;\r\n\r\n\t\t\t\tif (!selectedItem) {\r\n\t\t\t\t\tdisplayText = '';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdisplayText = selectedItem[scope.displayProperty];\r\n\t\t\t\t}\r\n\t\t\t\tif (!scope.allowEmptyDisplay && (displayText === '' || util.isUndefined(displayText))) {\r\n\t\t\t\t\tdisplayText = tryToDisplay(scope.searchableProperties);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.setDisplayText(displayText);\r\n\t\t\t}\r\n\r\n\t\t\tfunction tryToDisplay(properties) {\r\n\t\t\t\tvar found = '';\r\n\t\t\t\tvar values = properties.split(',');\r\n\t\t\t\t_.each(values, function (v) {\r\n\t\t\t\t\tif (util.isNonEmptyString(selectedItem[v]) && found === '') {\r\n\t\t\t\t\t\tfound = selectedItem[v];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn found;\r\n\t\t\t}\r\n\r\n\t\t\tfunction canBeShown(item) {\r\n\t\t\t\tif (!searchablePropertyNames) {\r\n\t\t\t\t\tsearchablePropertyNames = (scope.searchableProperties || '').split(',');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!searchablePropertyNames || searchablePropertyNames.length === 0) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar searchText = scope.getSearchText();\r\n\r\n\t\t\t\tif (searchText === '') {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar noMatches = searchablePropertyNames.every(function (propertyName) {\r\n\t\t\t\t\tif (util.isNullOrUndefined(item[propertyName])) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar noMatch = !isMatch(searchText, item[propertyName]);\r\n\r\n\t\t\t\t\treturn noMatch;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn !noMatches;\r\n\t\t\t}\r\n\r\n\t\t\tfunction isMatch(searchWord, propertyValue) {\r\n\t\t\t    const value = propertyValue.toLowerCase();\r\n\t\t\t    const substring = searchWord.toLowerCase();\r\n\t\t\t    return value.indexOf(substring) !== -1;\r\n\t\t\t}\r\n\r\n\t\t\tfunction watchBoundObjectProperty() {\r\n\t\t\t\tvar currentValue = undefined;\r\n\r\n\t\t\t\tif (scope.watchIncludeDefaultObj !== true) {\r\n\t\t\t\t\tcurrentValue = scope.bindToObject[scope.bindToProperty];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tignoreBoundObjectProperty = ngUtil.$watch(scope, function () {\r\n\t\t\t\t\treturn scope.bindToObject[scope.bindToProperty];\r\n\t\t\t\t}, function (item) {\r\n\t\t\t\t\titemSelected(item, false);\r\n\t\t\t\t\tvm.selectedItem = item;\r\n\t\t\t\t\tif (!scope.watchBinding) {\r\n\t\t\t\t\t\tignoreBoundObjectProperty();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, currentValue);\r\n\t\t\t}\r\n\r\n\t\t\tfunction watchItems() {\r\n\t\t\t\tvar unwatch = ngUtil.$watchCollection(scope, 'items', listener);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction listener() {\r\n\t\t\t\t\tif (!scope.watchItems) {\r\n\t\t\t\t\t\tunwatch();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (scope.items.length === 1 && scope.selectSingle) {\r\n\t\t\t\t\t    onItemSelected(scope.items[0]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tapplySearch();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction onItemSelected(item) {\r\n\t\t\t\tif (util.isDefined(scope.onItemSelectFunction) && util.isFunction(item[scope.onItemSelectFunction])) {\r\n\t\t\t\t    item[scope.onItemSelectFunction](selectOption);\r\n\t\t\t\t} else {\r\n\t\t\t\t    selectOption(item);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tfunction selectOption(item) {\r\n\t\t\t    var confirm = false;\r\n\r\n                if (util.isFunction(scope.confirm)) {\r\n                    var confirmFunc = scope.confirm(item);\r\n\r\n                    if (util.isFunction(confirmFunc)) {\r\n                        confirm = confirmFunc(item);\r\n                    } else {\r\n                        confirm = confirmFunc;\r\n                    }\r\n\r\n                }\r\n\r\n                if (confirm) {\r\n                    promptWindow.confirm({\r\n                        title: scope.confirmTitle,\r\n                        message: scope.confirmMessage,\r\n                        okBtnText: scope.confirmOkBtnText,\r\n                        cancelBtnText: scope.confirmCancelBtnText,\r\n                        callback: function (result) {\r\n                            if (result) {\r\n                                itemSelected(item, true);\r\n                                vm.selectedItem = item;\r\n                            } else {\r\n                                displaySelectedItem();\r\n                                vm.toggleActions.hide();\r\n                            }\r\n                        }\r\n                    });\r\n                } else {\r\n                    vm.selectedItem = item;\r\n                    itemSelected(item, true);\r\n                }\r\n            }\r\n\r\n\t\t\tfunction itemSelected(item, updateBoundProperty) {\r\n\t\t\t\tselectedItem = item;\r\n\r\n\t\t\t\tscope.setSearchText('');\r\n\r\n\t\t\t\tdisplaySelectedItem();\r\n\r\n\t\t\t\tapplySearch();\r\n\r\n\t\t\t\tif (updateBoundProperty) {\r\n\t\t\t\t\tignoreBoundObjectProperty();\r\n\r\n\t\t\t\t\tscope.bindToObject[scope.bindToProperty] = item;\r\n\r\n\t\t\t\t\tif (scope.watchBinding) {\r\n\t\t\t\t\t\twatchBoundObjectProperty();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isFunction(scope.onChangeAccessor)) {\r\n\t\t\t\t\t\tvar onChangeAccessor = scope.onChangeAccessor();\r\n\r\n\t\t\t\t\t\tif (util.isFunction(onChangeAccessor)) {\r\n\t\t\t\t\t\t\tonChangeAccessor(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction isSelected(item) {\r\n\t\t\t    if (util.isFunction(scope.itemCompare)) {\r\n\t\t\t        var itemCompare = scope.itemCompare();\r\n\r\n\t\t\t        if (util.isFunction(itemCompare)) {\r\n\t\t\t           return itemCompare(item, vm.selectedItem, displaySelectedItem);\r\n\t\t\t        }\r\n\t\t\t    }\r\n\r\n                return util.isDefined(vm.selectedItem) && util.isRealObject(vm.selectedItem) && _.isMatch(item, vm.selectedItem);\r\n            }\r\n\t\t}\r\n\r\n\t\treturn DiSelectController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/select/diSelectController.js","//{CODE:CAC0F}\r\n// di.core.angular.controls.select\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.directive('diSelect', diSelect);\r\n\r\n\t    diSelect.$inject = ['$interpolate', 'translator', '$q'];\r\n\r\n\t\t/**\r\n\t\t * Select directive. Functions in three modes depending on 'mode' attribute:\r\n\t\t * autoComplete, dropdown, dropdownSearch\r\n\t\t */\r\n\t\tfunction diSelect($interpolate, translator, $q) {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\ttransclude: true,\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tbindToObject: '=',\r\n\t\t\t\t\tbindToProperty: '@',\r\n\t\t\t\t\twatchIncludeDefaultObj: '=', //default:false\r\n\t\t\t\t\tonChangeAccessor: '&',\r\n\t\t\t\t\titems: '=',\r\n\t\t\t\t\tvalidationModel: '=',\r\n\t\t\t\t\tconfirm: '=',\r\n\t\t\t\t\tselectSingle: '=',\r\n\t\t\t\t\titemCompare: '&',\r\n\t\t\t\t\tonItemSelectFunction: '@'\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: 'DiSelectController',\r\n\t\t\t\tcontrollerAs: 'selectCtrl',\r\n\t\t\t\tlink: link,\r\n\t\t\t\ttemplate: template\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope, element, attrs) {\r\n\t\t\t    scope.inputClass = interpolate('inputClass');\r\n\t\t\t    scope.watchItems = interpolate('watchItems', 'false') === 'true';\r\n\t\t\t    scope.watchBinding = interpolate('watchBinding', 'false') === 'true';\r\n\t\t\t    scope.tabIndex = interpolate('tabIndex');\r\n\t\t\t    scope.searchableProperties = interpolate('searchableProperties');\r\n\r\n\t\t\t    interpolateAndTranslate('placeholder')\r\n\t\t\t        .then(function(t) {\r\n\t\t\t            scope.placeholder = t;\r\n\t\t\t        });\r\n\t\t\t     \r\n\t\t\t    scope.displayProperty = interpolate('displayProperty');\r\n\t\t\t    scope.validationName = interpolate('validationName');\r\n\r\n\t\t\t    interpolateAndTranslate('validationMessage')\r\n\t\t\t        .then(function (t) {\r\n\t\t\t            scope.validationMessage = t;\r\n\t\t\t        });\r\n\t\t\t    \r\n\t\t\t    scope.image = interpolate('image');\r\n\t\t\t    scope.imageColour = interpolate('imageColour');\r\n\t\t\t    scope.searchImage = interpolate('searchImage');\r\n\t\t\t    scope.searchImageColour = interpolate('searchImageColour');\r\n\t\t\t    scope.mode = interpolate('mode');\r\n\t\t\t    scope.confirmTitle = interpolate('confirmTitle');\r\n\t\t\t    scope.confirmMessage = interpolate('confirmMessage');\r\n\t\t\t    scope.confirmOkBtnText = interpolate('confirmOkBtnText');\r\n\t\t\t    scope.confirmCancelBtnText = interpolate('confirmCancelBtnText');\r\n\t\t\t    scope.allowEmptyDisplay = interpolate('allowEmptyDisplay', 'false') === 'true';\r\n\r\n\t\t\t\tvar listElm = element.find('#list');\r\n\t\t\t\tvar searchTextInputElm = element.find('#diSelectSearchTextInput');\r\n\t\t\t\tvar displayPropertyInputElm = element.find('#diSelectDisplayPropertyInput');\r\n\t\t\t\tvar focusElm;\r\n\t\t\t\tvar inputNeedsFocus;\r\n\t\t\t\tvar hasSearchText;\r\n                \r\n\t\t\t\tswitch (attrs.mode) {\r\n\t\t\t\t\tcase 'autoComplete':\r\n\t\t\t\t\t\tfocusElm = displayPropertyInputElm;\r\n\t\t\t\t\t\tdisplayPropertyInputElm = searchTextInputElm;\r\n\t\t\t\t\t\tinputNeedsFocus = true;\r\n\t\t\t\t\t\thasSearchText = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'dropdown':\r\n\t\t\t\t\t\tfocusElm = displayPropertyInputElm;\r\n\t\t\t\t\t\tinputNeedsFocus = true;\r\n\t\t\t\t\t\thasSearchText = false;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'dropdownSearch':\r\n\t\t\t\t\t\tfocusElm = searchTextInputElm;\r\n\t\t\t\t\t\tinputNeedsFocus = true;\r\n\t\t\t\t\t\thasSearchText = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlistElm.removeAttr('id');\r\n\t\t\t\tsearchTextInputElm.removeAttr('id');\r\n\r\n\t\t\t\tdisplayPropertyInputElm.removeAttr('id');\r\n\r\n\t\t\t\tif (inputNeedsFocus) {\r\n\t\t\t\t\tscope.onShow = function () {\r\n\t\t\t\t\t\tscope.$evalAsync(function () {\r\n\t\t\t\t\t\t\tfocusElm.focus();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (hasSearchText) {\r\n\t\t\t\t\tsearchTextInputElm.on('input', function () {\r\n\t\t\t\t\t\tscope.onSearchTextChange();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.getSearchText = function () {\r\n\t\t\t\t\tif (hasSearchText) {\r\n\t\t\t\t\t\treturn searchTextInputElm.val();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn '';\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tscope.copySearchValue = function () {\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.setSearchText = function (searchText) {\r\n\t\t\t\t\tif (hasSearchText) {\r\n\t\t\t\t\t\tsearchTextInputElm.val(searchText);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tscope.setDisplayText = function (displayText) {\r\n\t\t\t\t\tdisplayPropertyInputElm.val(displayText);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tscope.highlightItem = function (index) {\r\n\t\t\t\t\tvar itemInputElm = listElm.find('.itemInput_' + index);\r\n\t\t\t\t\tvar itemSpanElms = listElm.find('span');\r\n\t\t\t\t\tvar itemSpanElm = listElm.find('.itemSpan_' + index);\r\n\r\n\t\t\t\t\titemSpanElms.removeClass('highlighted');\r\n\t\t\t\t\titemSpanElm.addClass('highlighted');\r\n\t\t\t\t\titemInputElm.show();\r\n\t\t\t\t\titemInputElm.focus();\r\n\t\t\t\t\tsearchTextInputElm.focus();\r\n\t\t\t\t\titemInputElm.hide();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\r\n                function interpolateAndTranslate(attr, valueIfEmpty) {\r\n                    var value = interpolate(attr, valueIfEmpty);\r\n\r\n                    if (value) {\r\n                        return translator.translate(value);\r\n                    }\r\n\r\n                    return $q.when(value);\r\n                }\r\n\r\n\t\t\t\tfunction interpolate(attr, valueIfEmpty) {\r\n\t\t\t\t    var value = attrs[attr];\r\n\t\t\t\t    var result = (value ? $interpolate(value)(scope) : '') || valueIfEmpty;\r\n\r\n\t\t\t\t    return result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction template(element, attrs) {\r\n\t\t\t\tvar html = '';\r\n\t\t\t\tvar autoCompleteModeHtml =\r\n'<div\\\r\n\tvaldr-enabled=\"true\"\\\r\n\tvalidation-notification-target\\\r\n\tclass=\"form-row di-select-auto\">\\\r\n\t<di-toggle\\\r\n\t\tclose-target-on-click-away\\\r\n\t\tclose-target-on-click\\\r\n\t\tactions-hook=\"selectCtrl.toggleActions\"\\\r\n\t\twrap-class=\"select\"\\\r\n\t\ttoggle-class=\"is-active\">\\\r\n\t\t<input\\\r\n\t\t\tdi-toggle-trigger\\\r\n\t\t\ttabindex=\"0\"\\\r\n\t\t\tstyle=\"width:100%;\"\\\r\n\t\t\tvalidation-focus-target\\\r\n\t\t\tclass=\"select-label input\"\\\r\n\t\t\tng-keyup=\"selectCtrl.inputKeyUp($event)\"\\\r\n\t\t\t{SEARCH_INPUT_ATTRS}/>\\\r\n\t\t<div\\\r\n\t\t\tdi-toggle-target\\\r\n\t\t\tclass=\"select-dropdown\">\\\r\n\t\t\t{LIST}\\\r\n\t\t</div>\\\r\n\t</di-toggle>\\\r\n</div>';\r\n\r\n\t\t\t\tvar dropdownModeHtml =\r\n'<div\\\r\n\tvalidation-notification-target\\\r\n\tclass=\"form-row\">\\\r\n\t<di-toggle\\\r\n\t\tclose-target-on-click-away\\\r\n\t\tclose-target-on-click\\\r\n\t\ton-show=\"onShow\"\\\r\n\t\ton-hide=\"onHide\"\\\r\n\t\tactions-hook=\"selectCtrl.toggleActions\"\\\r\n\t\twrap-class=\"select {HAS_IMAGE}\"\\\r\n\t\ttoggle-class=\"is-active\">\\\r\n\t\t<div\\\r\n\t\t\tdi-toggle-trigger\\\r\n\t\t\ttabindex=\"0\"\\\r\n\t\t\tclass=\"select-label\">\\\r\n\t\t\t\t{IMAGE}\\\r\n\t\t\t<input\\\r\n\t\t\t\ttabindex=\"-1\"\\\r\n\t\t\t\tid=\"diSelectDisplayPropertyInput\"\\\r\n\t\t\t\tvalidation-focus-target\\\r\n\t\t\t\tclass=\"select-label-value\"\\\r\n\t\t\t\tng-keyup=\"selectCtrl.inputKeypress($event)\"\\\r\n\t\t\t\treadonly/>\\\r\n\t\t\t<button\\\r\n\t\t\t\ttabindex=\"-1\"\\\r\n\t\t\t\tclass=\"select-button\"\\\r\n\t\t\t\ttype=\"button\"\\\r\n\t\t\t</button>\\\r\n\t\t</div>\\\r\n\t\t<div\\\r\n\t\t\tdi-toggle-target\\\r\n\t\t\tclass=\"select-dropdown\">\\\r\n\t\t\t{LIST}\\\r\n\t\t</div>\\\r\n\t</di-toggle>\\\r\n</div>';\r\n\r\n\t\t\t\tvar dropdownSearchModeHtml =\r\n'<div\\\r\n\tvalidation-notification-target\\\r\n\tclass=\"form-row\">\\\r\n\t<di-toggle\\\r\n\t\tclose-target-on-click-away\\\r\n\t\tclose-target-on-click\\\r\n\t\tactions-hook=\"selectCtrl.toggleActions\"\\\r\n\t\ton-show=\"onShow\"\\\r\n\t\twrap-class=\"select has-search\"\\\r\n\t\ttoggle-class=\"is-active\">\\\r\n\t\t<div\\\r\n\t\t\tdi-toggle-trigger\\\r\n\t\t\ttabindex=\"0\"\\\r\n\t\t\tclass=\"select-label\">\\\r\n\t\t\t<input\\\r\n\t\t\t\ttabindex=\"-1\"\\\r\n\t\t\t\tclass=\"select-label-value\"\\\r\n\t\t\t\tid=\"diSelectDisplayPropertyInput\"\\\r\n\t\t\t\treadonly/>\\\r\n\t\t\t<button\\\r\n\t\t\t\ttabindex=\"-1\"\\\r\n\t\t\t\tclass=\"select-button\"\\\r\n\t\t\t\ttype=\"button\"\\\r\n\t\t\t</button>\\\r\n\t\t</div>\\\r\n\t\t<div\\\r\n\t\t\tdi-toggle-target\\\r\n\t\t\tclass=\"select-dropdown\">\\\r\n\t\t\t<div\\\r\n\t\t\t\tclass=\"select-search input-iconed\">\\\r\n\t\t\t\t<input\\\r\n\t\t\t\t\tdi-toggle-ignore\\\r\n\t\t\t\t\tid=\"diSelectSearchTextInput\"\\\r\n\t\t\t\t\tvalidation-focus-target\\\r\n\t\t\t\t\ttype=\"search\"\\\r\n\t\t\t\t\tclass=\"input small rounded dimmed\"\\\r\n\t\t\t\t\t{SEARCH_INPUT_ATTRS}/>\\\r\n\t\t\t\t<di-image\\\r\n\t\t\t\t\tclass=\"icon icon-16px\"\\\r\n\t\t\t\t\timage=\"{SEARCH_IMAGE}\"\\\r\n\t\t\t\t\timage-colour=\"{SEARCH_IMAGE_COLOUR}\"></di-image>\\\r\n\t\t\t</div>\\\r\n\t\t\t\t{LIST}\\\r\n\t\t</div>\\\r\n\t</di-toggle>\\\r\n</div>';\r\n\r\n\t\t\t\tvar trackBy = attrs.itemUniqueProperty ? ' track by ' + attrs.itemUniqueProperty : '';\r\n\t\t\t\tvar listHtml =\r\n\t\t\t\t'<div\\\r\n\t\t\t\t\tid=\"list\"\\\r\n\t\t\t\t\tclass=\"select-list\">\\\r\n\t\t\t\t\t<span\\\r\n\t\t\t\t\t\tng-repeat=\"filteredItem in selectCtrl.filteredItems\"' + trackBy + '\\\r\n\t\t\t\t\t\tclass=\"select-item\">\\\r\n\t\t\t\t\t\t<input\\\r\n\t\t\t\t\t\t\ttype=\"text\"\\\r\n\t\t\t\t\t\t\tstyle=\"display:none;height:1px;width:1px;border:0;margin:0;padding:0;\"\\\r\n\t\t\t\t\t\t\tng-keydown=\"selectCtrl.inputKeypress($event)\"\\\r\n\t\t\t\t\t\t\tclass=\"itemInput_{{::filteredItem.index}}\">\\\r\n\t\t\t\t\t\t<span\\\r\n\t\t\t\t\t\t\tclass=\"itemSpan_{{::filteredItem.index}}\"\\\r\n\t\t\t\t\t\t\tng-class=\"{\\'is-selected\\' : selectCtrl.isSelected(filteredItem.item)}\"\\\r\n\t\t\t\t\t\t\tng-click=\"selectCtrl.onItemSelected(filteredItem.item)\"\\\r\n\t\t\t\t\t\t\tdi-transclude-repeat>\\\r\n\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t</span>\\\r\n\t\t\t\t</div>';\r\n\r\n\t\t\t\tswitch (attrs.mode) {\r\n\t\t\t\t\tcase 'autoComplete':\r\n\t\t\t\t\t\thtml = autoCompleteModeHtml;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'dropdown':\r\n\t\t\t\t\t\thtml = dropdownModeHtml;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'dropdownSearch':\r\n\t\t\t\t\t\thtml = dropdownSearchModeHtml;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tguard.throwNew(\"CAC0F01E\", \"Unknown di-select mode '\" + attrs.mode + \"'\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar searchInputAttrs =\r\n\t\t\t\t\t'id=\"diSelectSearchTextInput\"\\\r\n\t\t\t\t\tng-keydown=\"selectCtrl.inputKeypress($event)\"\\\r\n\t\t\t\t\tplaceholder=\"{{::(placeholder)}}\"';\r\n\r\n\t\t\t\tif (attrs.validationName) {\r\n\t\t\t\t\tsearchInputAttrs += '\\\r\n\t\t\t\t\t\tdi-validate=\"{{::validationName}}\"\\\r\n\t\t\t\t\t\tvalidation-model=\"bindToObject[bindToProperty]\"\\\r\n\t\t\t\t\t\tvalidation-model-display-name=\"' + attrs.validationModelDisplayName + '\"';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar imageHtml =\r\n\t\t\t\t\t'<di-image\\\r\n\t\t\t\t\t\tclass=\"select-label-icon\"\\\r\n\t\t\t\t\t\timage=\"{IMAGE}\"\\\r\n\t\t\t\t\t\timage-colour=\"{IMAGE_COLOUR}\">\\\r\n\t\t\t\t\t</di-image>';\r\n\t\t\t\t\r\n\t\t\t\tif (util.isUndefined(attrs.image)) {\r\n\t\t\t\t\timageHtml = '';\r\n\t\t\t\t\thtml = html.replace('{HAS_IMAGE}', '');\r\n\t\t\t\t} else {\r\n\t\t\t\t\thtml = html.replace('{HAS_IMAGE}', 'has-icon');\r\n\t\t\t\t}\r\n\r\n\t\t\t\timageHtml = imageHtml.replace('{IMAGE}', attrs.image || 'sort');\r\n\t\t\t\timageHtml = imageHtml.replace('{IMAGE_COLOUR}', attrs.imageColour || 'button');\r\n\r\n\t\t\t\thtml = html.replace('{SEARCH_INPUT_ATTRS}', searchInputAttrs);\r\n\t\t\t\thtml = html.replace('{LIST}', listHtml);\r\n\t\t\t\thtml = html.replace('{IMAGE}', imageHtml);\r\n\r\n\r\n\t\t\t\thtml = html.replace('{SEARCH_IMAGE}', attrs.searchImage || 'search');\r\n\t\t\t\thtml = html.replace('{SEARCH_IMAGE_COLOUR}', attrs.searchImageColour || 'icon');\r\n\r\n\t\t\t\treturn html;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diSelect;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/select/diSelectDirective.js","//{CODE:ACG05}\r\n// di.core.angular.controls.diSelectUpgrade\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diSelectUpgrade', diSelectUpgrade);\r\n\r\n        function diSelectUpgrade() {\r\n            return {\r\n                restrict: 'E',\r\n                translucent: true,\r\n                scope: {\r\n                    items: '=',\r\n                    bindToObject: '=',\r\n                    bindToProperty: '@',\r\n                    onChangeAccessor: '&'\r\n                },\r\n                controller: 'DiSelectUpgradeController',\r\n                controllerAs: 'diSelectUpgradeCtrl',\r\n                template: template()\r\n            };\r\n\r\n            function template() {\r\n\r\n                var html = '<div class=\"show-entries select small\"><di-select\\\r\n                        mode=\"dropdown\"\\\r\n                        items=\"diSelectUpgradeCtrl.items\"\\\r\n\t                    item-unique-property=\"value\"\\\r\n                        bind-to-object=\"diSelectUpgradeCtrl\"\\\r\n\t                    bind-to-property=\"selectedItem\"\\\r\n\t                    display-property=\"label\"\\\r\n\t                    on-change-accessor=\"diSelectUpgradeCtrl.onChangeAccessor\"\\\r\n                        placeholder=\"{{show}}\">\\\r\n                        <span>{{::filteredItem.item.value}}</span>\\\r\n                    </di-select></div>';\r\n\r\n                return html;\r\n            }\r\n        }\r\n\r\n        return diSelectUpgrade;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/select/diSelectUpgrade.js","//{CODE:ACG06}\r\n// di.core.angular.controls.diSelectUpgradeController\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.controller('DiSelectUpgradeController', DiSelectUpgradeController);\r\n\r\n        DiSelectUpgradeController.$inject = ['$scope', 'translator'];\r\n\r\n        function DiSelectUpgradeController(scope, translator) {\r\n            var vm = this;\r\n\r\n            vm.items = [];\r\n            vm.selectedItem = {};\r\n            vm.keepWatch = \"true\";\r\n\r\n            watchItems();\r\n\r\n            return;\r\n\r\n            function watchItems() {\r\n                var unwatch = function () { };\r\n                var loaded = false;\r\n\r\n                if (vm.keepWatch === \"false\") {\r\n                    unwatch = scope.$watch(watchExpression, initialiseOnce);\r\n\r\n                } else {\r\n                    scope.$watchCollection('items', initialise);\r\n                }\r\n\r\n                return;\r\n\r\n                function watchExpression() {\r\n                    loaded = scope.items.length > 0;\r\n                    return scope.items.length;\r\n                }\r\n\r\n                function initialiseOnce() {\r\n                    if (loaded) {\r\n                        unwatch();\r\n                        initialise();\r\n                    }\r\n                }\r\n            }\r\n\r\n            function initialise() {\r\n                translator.translate(\"CORE.GRID_PAGINATION_PAGE_SIZE.SHOW\")\r\n                    .then(function(translated) {\r\n                        scope.show = translated;\r\n                    });\r\n               \r\n                vm.items.diFill(scope.items);\r\n                vm.onChangeAccessor = onChangeAccessor;\r\n            }\r\n\r\n            function onChangeAccessor(value) {\r\n                if (scope.onChangeAccessor) {\r\n                    scope.onChangeAccessor(value);\r\n                }\r\n            }\r\n        };\r\n\r\n        return DiSelectUpgradeController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/select/diSelectUpgradeController.js","//{CODE:ACS01}\r\n// di.core.angular.controls.simpleselect\r\ndefine([\r\n    './diSimpleSelectDirective',\r\n    './diSimpleSelectController'\r\n], function (\r\n    diSimpleSelectDirectiveLoader,\r\n    diSimpleSelectControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diSimpleSelectDirectiveLoader(module);\r\n        diSimpleSelectControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/simpleSelect/_loader.js","//{CODE:ACS02}\r\n// di.core.angular.controls.simpleselect\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar ngUtil = $di.angular.util;\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('DiSimpleSelectController', DiSimpleSelectController);\r\n\r\n\t\tDiSimpleSelectController.$inject = [\r\n\t\t\t'$scope', 'translator'\r\n\t\t];\r\n\r\n\t\tfunction DiSimpleSelectController(\r\n\t\t\tscope, translator) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvm.item = {};\r\n\r\n\t\t\tvm.onChangeAccessor = onChangeAccessor;\r\n\r\n\t\t\tvm.bindToObject = scope.bindToObject;\r\n\r\n\t\t\tinitialize();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n             * Event when selected option is changed.\r\n             * @param {} option \r\n             * @returns {} \r\n             */\r\n\t\t\tfunction onChangeAccessor(option) {\r\n\t\t\t\tif (scope.onChanged) {\r\n\t\t\t\t\tscope.onChanged(option.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Translate labels collection using translator service.\r\n\t\t\t * @param filters\r\n\t\t\t */\r\n\t\t\tfunction translateFilterLabels(filters) {\r\n\t\t\t    return translator.whenReady()\r\n\t\t\t        .then(function () {\t\t\t            \r\n\t\t\t            _.each(filters, function (filter) {\r\n\t\t\t                filter.label = translator.instantTranslate(filter.label);\r\n\t\t\t            });\r\n\t\t\t        });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Sets default item when options are loaded.\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction initialize() {\r\n\t\t\t\tvar unwatch = ngUtil.$watchCollection(scope, 'items', function (items) {\r\n\t\t\t\t    if (items) {\t\t\t\t        \r\n\t\t\t\t\t\tvm.items = items;\r\n\t\t\t\t\t\ttranslateFilterLabels(vm.items).then(function() {\r\n\t\t\t\t\t\t    var item = _.find(vm.items, function (option) {\r\n\t\t\t\t\t\t        return option.value === scope.defaultValue;\r\n\t\t\t\t\t\t    });\r\n\r\n\t\t\t\t\t\t    if (util.isDefined(item)) {\r\n\t\t\t\t\t\t        vm.item = item;\r\n\t\t\t\t\t\t    } else {\r\n\t\t\t\t\t\t        vm.item = items[0];\r\n\t\t\t\t\t\t    }\r\n\r\n\t\t\t\t\t\t    //unwatch();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn DiSimpleSelectController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/simpleSelect/diSimpleSelectController.js","//{CODE:ACS03}\r\n// di.core.angular.controls.simpleselect\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diSimpleSelect', diSimpleSelect);\r\n\r\n\t\tfunction diSimpleSelect() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\tscope: {\r\n\t\t\t\t\titems: '=',\r\n\t\t\t\t\tdefaultValue: '=',\r\n\t\t\t\t\tonChanged: \"=\",\r\n\t\t\t\t\tbindToObject: '=',\r\n\t\t\t\t\tbindToProperty: '@',\r\n\t\t\t\t\twatchBinding: '='\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: \"DiSimpleSelectController\",\r\n\t\t\t\tcontrollerAs: \"diSimpleSelectCtrl\",\r\n\t\t\t\ttemplate: template\r\n\t\t\t};\r\n\r\n\t\t\tfunction template(element, attrs) {\r\n\t\t\t\tvar html = '<div class=\"select\">\\\r\n                                <di-select\\\r\n                                    mode=\"dropdown\"\\\r\n                                    image=\"{ICON}\"\\\r\n                                    image-colour=\"button\"\\\r\n                                    items=\"diSimpleSelectCtrl.items\"\\\r\n                                    item-unique-property=\"value\"\\\r\n                                    {BIND_OBJECT}\\\r\n\t\t\t\t\t\t\t\t\tbind-to-property=\"{BIND_PROPERTY}\"\\\r\n\t\t\t\t\t\t\t\t\tdisplay-property=\"label\"\\\r\n                                    {WATCH_INC_DEFAULT}\\\r\n\t\t\t\t\t\t\t\t\twatch-binding=\"{WATCH_BINDING}\"\\\r\n\t\t\t\t\t\t\t\t\ton-change-accessor=\"diSimpleSelectCtrl.onChangeAccessor\">\\\r\n                                    {{::filteredItem.item.label}}\\\r\n                                </di-select>\\\r\n                             </div>';\r\n\r\n\t\t\t\thtml = html.replace('{ICON}', attrs.icon || 'sort');\r\n\r\n\t\t\t\tif (attrs.bindToObject) {\r\n\t\t\t\t\thtml = html.replace('{BIND_OBJECT}', 'bind-to-object=\"diSimpleSelectCtrl.bindToObject\"');\r\n\t\t\t\t\thtml = html.replace('{WATCH_INC_DEFAULT}', 'watch-include-default-obj=\"true\"');\r\n\t\t\t\t\thtml = html.replace('{WATCH_BINDING}', attrs.watchBinding || 'false');\r\n\t\t\t\t} else {\r\n\t\t\t\t\thtml = html.replace('{BIND_OBJECT}', 'bind-to-object=\"diSimpleSelectCtrl\"');\r\n\t\t\t\t\thtml = html.replace('{WATCH_INC_DEFAULT}', '');\r\n\t\t\t\t\thtml = html.replace('{WATCH_BINDING}', 'false')\r\n\t\t\t\t}\r\n\r\n\t\t\t\thtml = html.replace('{BIND_PROPERTY}', attrs.bindToProperty || 'item');\r\n\r\n\t\t\t\treturn html;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diSimpleSelect;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/simpleSelect/diSimpleSelectDirective.js","//{CODE:CAC0H}\r\n// di.core.angular.controls.spinner\r\ndefine([\r\n\t'./spinnerGenerator',\r\n\t'./modalSpinner'\r\n], function (\r\n\tspinnerGeneratorLoader,\r\n\tmodalSpinnerLoader\r\n    ) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tspinnerGeneratorLoader(module);\r\n\t\tmodalSpinnerLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/spinner/_loader.js","//{CODE:CAC0D}\r\n// di.core.angular.controls.spinner\r\ndefine([\r\n\t'angular'\r\n], function (ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('modalSpinner', modalSpinner);\r\n\r\n\t\tmodalSpinner.$inject = ['spinnerGenerator'];\r\n\r\n\t\tfunction modalSpinner(spinnerGenerator) {\r\n\r\n\t\t\tvar modalSpinnerClass = 'modal-spinner';\r\n\r\n\t\t\treturn {\r\n\t\t\t\tshowModalSpinner: showModalSpinner\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Places a spinner as a child of the specified element\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction showModalSpinner(key, spinnerOptions) {\r\n\t\t\t\tvar options;\r\n\t\t\t\tvar modalElement = '<div class=\"' + modalSpinnerClass + '\"></div>';\r\n\t\t\t\tvar spinner;\r\n\r\n\t\t\t\tif (key === undefined) {\r\n\t\t\t\t\tkey = \"body\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tng.element(key).prepend(modalElement);\r\n\r\n\t\t\t\tspinnerOptions = spinnerOptions || {};\r\n\t\t\t\toptions = ng.extend({}, { color: '#FFF', position: 'fixed' }, spinnerOptions);\r\n\r\n\t\t\t\tspinner = spinnerGenerator.generateNewSpinner(options).spin();\r\n\t\t\t\tng.element(key).children('.' + modalSpinnerClass).append(spinner.el);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tremove: remove\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Function to remove the spinner in an animated way\r\n\t\t\t\t */\r\n\t\t\t\tfunction remove() {\r\n\t\t\t\t\tvar elementToRemove = ng.element(key).children('.' + modalSpinnerClass);\r\n\t\t\t\t\telementToRemove.fadeOut(300, function () { elementToRemove.remove(); });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn modalSpinner;\r\n\t};\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/spinner/modalSpinner.js","//{CODE:CAC0C}\r\n// di.core.angular.controls.spinner\r\ndefine([\r\n\t\t'spin'\r\n], function (Spinner) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('spinnerGenerator', spinnerGenerator);\r\n\r\n\t\tfunction spinnerGenerator() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tgenerateNewSpinner: generateNewSpinner\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Generates a new spinnerGenerator\r\n\t\t\t * @param spinnerGeneratorOptions\r\n\t\t\t */\r\n\t\t\tfunction generateNewSpinner(spinnerOptions) {\r\n\t\t\t\treturn new Spinner(spinnerOptions);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn spinnerGenerator;\r\n\t};\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/spinner/spinnerGenerator.js","//{CODE:CAC07}\r\n// di.core.angular.controls.toggle\r\ndefine([\r\n\t'./diToggleController',\r\n\t'./diToggleDirective',\r\n    './overrideToggleFactory'\r\n], function (\r\n    toggleControllerLoader,\r\n\ttoggleDirectiveLoader,\r\n    overrideToggleFactory) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        toggleControllerLoader(module);\r\n        toggleDirectiveLoader(module);\r\n        overrideToggleFactory(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/toggle/_loader.js","//{CODE:CAC0R}\r\n// di.core.angular.controls.toggle\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.controller('DiToggleController', DiToggleController);\r\n\r\n        DiToggleController.$inject = ['$scope', '$timeout'];\r\n\r\n        function DiToggleController(scope, $timeout) {\r\n            var vm = this;\r\n\r\n            vm.toggle = toggle;\r\n            vm.show = show;\r\n            vm.hide = hide;\r\n\r\n            if (scope.actionsHook) {\r\n                scope.actionsHook.toggle = vm.toggle;\r\n                scope.actionsHook.show = vm.show;\r\n                scope.actionsHook.hide = vm.hide;\r\n            }\r\n\r\n            return;\r\n\r\n            function toggle() {\r\n                if (scope.controlState && scope.controlState.disabled) return;\r\n\r\n                if (scope.isVisible()) {\r\n                    hide();\r\n                } else {\r\n                    show();\r\n                }\r\n\r\n                whenDigestComplete(scope.onToggle);\r\n            }\r\n\r\n            function show() {\r\n                scope.setVisible(true);\r\n\r\n                whenDigestComplete(scope.onShow);\r\n            }\r\n\r\n            function hide() {\r\n                if (shouldOverrideToggleHide()) {\r\n                    return;\r\n                }\r\n\r\n                scope.setVisible(false);\r\n\r\n                whenDigestComplete(scope.onHide);\r\n            }\r\n\r\n            function whenDigestComplete(func) {\r\n                if (func) {\r\n                    var innerFunc = func();\r\n\r\n                    if (innerFunc) {\r\n                        $timeout(innerFunc);\r\n                    }\r\n                }\r\n            }\r\n\r\n            /**\r\n            * Checks if any overrides should prevent a \"toggle hide\" i.e datepicker open\r\n            */\r\n            function shouldOverrideToggleHide() {\r\n                if (scope.shouldOverrideToggleHide) {\r\n                    return scope.shouldOverrideToggleHide();\r\n                }\r\n\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return DiToggleController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/toggle/diToggleController.js","//{CODE:CAC0S}\r\n// di.core.angular.controls.toggle\r\ndefine([\r\n    'angular'\r\n], function (ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.directive('diToggle', diToggle);\r\n\r\n\t\tdiToggle.$inject = ['$compile', 'uniqueIdGenerator', 'overrideToggleFactory'];\r\n\r\n\t\tfunction diToggle($compile, uniqueIdGenerator, overrideToggleFactory) {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\ttransclude: true,\r\n\t\t\t\ttemplate:\r\n                '<div>\\\r\n    <di-transclude-replace></di-transclude-replace>\\\r\n</div>',\r\n\t\t\t\tcontroller: 'DiToggleController',\r\n\t\t\t\tcontrollerAs: 'diToggleCtrl',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\twrapClass: '@',\r\n\t\t\t\t\ttoggleClass: '@',\r\n\t\t\t\t\tonShow: '&',\r\n\t\t\t\t\tonHide: '&',\r\n\t\t\t\t\tonToggle: '&',\r\n\t\t\t\t\tactionsHook: '=',\r\n\t\t\t\t\tadjustPosition: '='\r\n\t\t\t\t},\r\n\t\t\t\tlink: link\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope, element, attrs) {\r\n\t\t\t\tvar newScope = scope.$new();\r\n\r\n\t\t\t\tscope.$on('$destroy', function () {\r\n\t\t\t\t\tnewScope.$destroy();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tscope.shouldOverrideToggleHide = overrideToggleFactory.shouldOverrideToggleHide;\r\n\r\n\t\t\t\tvar parentElm = ng.element(element);\r\n\t\t\t\tvar triggerElms = findByAttrAndRemove(parentElm, 'di-toggle-trigger');\r\n\t\t\t\tvar targetElms = findByAttrAndRemove(parentElm, 'di-toggle-target');\r\n\t\t\t\tvar ignoreElms = findByAttrAndRemove(parentElm, 'di-toggle-ignore');\r\n\t\t\t\tvar ignoreClass = uniqueIdGenerator.newId('toggle_click_away_ignore');\r\n\t\t\t\tvar adjustPosition = true;\r\n\r\n\t\t\t\tif (scope.adjustPosition === false) {\r\n\t\t\t\t\tadjustPosition = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.isVisible = function () {\r\n\t\t\t\t\treturn parentElm.hasClass(scope.toggleClass);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tscope.setVisible = function (visible) {\r\n\t\t\t\t\tif (visible) {\r\n\t\t\t\t\t\tparentElm.addClass(scope.toggleClass);\r\n\t\t\t\t\t\tif (adjustPosition) {\r\n\t\t\t\t\t\t\tmoveUp(triggerElms[0], targetElms[0]);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tparentElm.removeClass(scope.toggleClass);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tparentElm.addClass(scope.wrapClass);\r\n\r\n\t\t\t\ttriggerElms.attr('di-click', 'diToggleCtrl.toggle()');\r\n\r\n\t\t\t\t//click and enter should have the same outcome\r\n\t\t\t\tif (!triggerElms.is(\r\n                    \"a, button, details, embed, iframe, keygen, label, select, textarea, \"//element is not natively interactive\r\n                    + \"audio[controls], img[usemap], input[type!='hidden'], menu[type='toolbar'], object[usemap], video[controls]\")\r\n                    && !triggerElms.is(\"[tabindex^='-']\")//and does not have a negative tabindex\r\n                    && !triggerElms.is(\"[disabled]\")) //and is not disabled\r\n\t\t\t\t{\r\n\t\t\t\t\ttriggerElms.attr('ng-keyup', '$event.keyCode == 13 ? [diToggleCtrl.toggle(), $event.stopPropagation(), $event.preventDefault()] : undefined');\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttriggerElms.addClass(ignoreClass);\r\n\r\n\t\t\t\tif (util.isDefined(attrs.closeTargetOnClickAway)) {\r\n\t\t\t\t\ttriggerElms.attr('di-click-away', 'diToggleCtrl.hide()');\r\n\t\t\t\t\ttriggerElms.attr('di-click-away-ignore', ignoreClass);\r\n\r\n\t\t\t\t\tignoreElms.addClass(ignoreClass);\r\n\r\n\t\t\t\t\tif (util.isUndefined(attrs.closeTargetOnClick)) {\r\n\t\t\t\t\t\ttargetElms.addClass(ignoreClass);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (util.isDefined(attrs.closeTargetOnClick)) {\r\n\t\t\t\t\t\ttargetElms.attr('ng-click', 'diToggleCtrl.hide()');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$compile(triggerElms)(newScope);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction findByAttrAndRemove(parent, attr) {\r\n\t\t\t\t\tvar elms = parent.find('[' + attr + ']');\r\n\r\n\t\t\t\t\telms.removeAttr(attr);\r\n\r\n\t\t\t\t\treturn elms;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n                 * moves panel above field if not visible\r\n                 * @param {} field \r\n                 * @param {} panel                 \r\n                 */\r\n\t\t\t\tfunction moveUp(field, panel) {\r\n\t\t\t\t\tvar pEl = field,\r\n                        fieldBottom,\r\n                        panelTop;\r\n\r\n\t\t\t\t\tvar viewportHeight = window.innerHeight || document.documentElement.clientHeight;\r\n\t\t\t\t\tvar scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n\r\n\t\t\t\t\tif (util.isFunction(field.getBoundingClientRect)) {\r\n\t\t\t\t\t\tvar clientRect = field.getBoundingClientRect();\r\n\r\n\t\t\t\t\t\tfieldBottom = clientRect.bottom + window.pageYOffset;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfieldBottom = pEl.offsetTop + pEl.offsetHeight;\r\n\r\n\t\t\t\t\t\twhile ((pEl = pEl.offsetParent)) {\r\n\t\t\t\t\t\t\tfieldBottom += pEl.offsetTop;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar panelHeight = getHeight(panel);\r\n\r\n\t\t\t\t\tif (fieldBottom + panelHeight > viewportHeight + scrollTop) {\r\n\t\t\t\t\t\tvar margin = getTopMargin(panel);\r\n\r\n\t\t\t\t\t\tvar newPanelTop = fieldBottom - getHeight(field) - panelHeight - margin;\r\n\r\n\t\t\t\t\t\tpanelTop = 0 - panelHeight - margin * 2;\r\n\r\n\t\t\t\t\t\tif (newPanelTop - scrollTop > 0) {\r\n\t\t\t\t\t\t\tpanel.style.top = panelTop + 'px';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpanel.style.top = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpanel.style.top = '';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t/**\r\n                     * gets top margin value of the element\r\n                     * @param {} elm                  \r\n                     */\r\n\t\t\t\t\tfunction getTopMargin(elm) {\r\n\t\t\t\t\t\tvar current = ng.element(elm);\r\n\r\n\t\t\t\t\t\treturn parseInt(current.css(\"marginTop\"));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n                     * gets height of the element\r\n                     * @param {} elm                 \r\n                     */\r\n\t\t\t\t\tfunction getHeight(elm) {\r\n\t\t\t\t\t\tvar current = ng.element(elm);\r\n\r\n\t\t\t\t\t\treturn current.outerHeight();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diToggle;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/toggle/diToggleDirective.js","//{CODE:CAC14}\r\n// di.core.angular.controls.toggle\r\ndefine([\r\n    'angular'\r\n], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n\r\n        module.factory('overrideToggleFactory', overrideToggleFactory);\r\n\r\n        function overrideToggleFactory() {\r\n            return {\r\n                shouldOverrideToggleHide: shouldOverrideToggleHide\r\n            };\r\n\r\n            /**\r\n           * Checks if the 'pikaDay' datepicker is visible -  used for custom date selection\r\n           */\r\n            function shouldOverrideToggleHide() {\r\n                var pikadayDivs = ng.element(document).find(document.querySelectorAll('.pika-single'));\r\n\r\n                for (var i = 0; i < pikadayDivs.length; i++) {\r\n\r\n                    if (ng.element(pikadayDivs[i]).hasClass('is-hidden') === false) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return overrideToggleFactory;\r\n    };\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/controls/toggle/overrideToggleFactory.js","//{CODE:CAN02}\r\n// di.core.angular\r\ndefine([\r\n\t'./diCurrencyFilter',\r\n\t'./currencyCache'\r\n], function (\r\n  currencyFilterLoader,\r\n  currencyCacheLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        currencyFilterLoader(module);\r\n        currencyCacheLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/currency/_loader.js","//{CODE:EUP1X}\r\n// di.core.angular.currency\r\ndefine(['underscore'], function (_) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('currencyCache', currencyCache);\r\n\r\n\t\tcurrencyCache.$inject = ['$sce', 'translator', 'staticLookupProxy', 'sessionStore', '$q'];\r\n\r\n\r\n\r\n\t\tfunction currencyCache(sce, translator, staticLookup, sessionStore, q) {\r\n\t\t\tvar currencies = null;\r\n\t\t\tvar util = $di.utility.util;\r\n\t\t\tvar sessionStorageKey = 'Currency';\r\n\t\t\tvar sessionStoragePrefix = 'currencyStore';\r\n\r\n\t\t\treturn {\r\n\t\t\t\tgetCurrencies: getCurrencies,\r\n\t\t\t\tgetCurrencyByIsoCode: getCurrencyByIsoCode,\r\n\t\t\t\tgetCurrencyById: getCurrencyById\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets all available currencies defined in the system.\r\n\t\t\t */\r\n\t\t\tfunction getCurrencies() {\r\n\t\t\t\tvar defer = q.defer();\r\n\r\n\t\t\t\tif (!util.isNullOrUndefined(currencies)) {\r\n\t\t\t\t\tdefer.resolve(currencies);\r\n\t\t\t\t\treturn defer.promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar currenciesFromStore = getCurrenciesFromStore();\r\n\t\t\t\tif (!util.isNullOrUndefined(currenciesFromStore)) {\r\n\t\t\t\t\tdefer.resolve(currenciesFromStore);\r\n\t\t\t\t\treturn defer.promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar promise = staticLookup.get('Currency').then(success);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\tcurrencies = data;\r\n\r\n\t\t\t\t\t_.each(currencies, function (currency) {\r\n\t\t\t\t\t\tcurrency.label = sce.trustAsHtml(\"<i></i> \" + \"<b>\" + currency.symbol + \"</b> \" + currency.name);\r\n\t\t\t\t\t\tcurrency.value = currency.code;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcurrencies = _.sortBy(currencies, function (currency) { return currency.name });\r\n\r\n\t\t\t\t\tsessionStore.set(sessionStorageKey, currencies, sessionStoragePrefix);\r\n\r\n\t\t\t\t\treturn currencies;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction getCurrenciesFromStore() {\r\n\t\t\t\tvar sessionCurrency = sessionStore.get(sessionStorageKey, sessionStoragePrefix);\r\n\r\n\t\t\t\treturn sessionCurrency;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets currency by its ISO code.\r\n\t\t\t * @param isoCode\r\n\t\t\t */\r\n\t\t\tfunction getCurrencyByIsoCode(isoCode) {\r\n\r\n\t\t\t\tif (typeof currencies == 'undefined' || currencies == null) {\r\n\t\t\t\t\tcurrencies = getCurrenciesFromStore();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn _.find(currencies, function (currency) {\r\n\t\t\t\t\treturn isoCode === currency.value;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets currency by its database Id field.\r\n\t\t\t * @param id\r\n\t\t\t */\r\n\t\t\tfunction getCurrencyById(id) {\r\n\r\n\t\t\t\tif (typeof currencies == 'undefined' || currencies == null) {\r\n\t\t\t\t\tcurrencies = getCurrenciesFromStore();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn _.find(currencies, function (currency) {\r\n\t\t\t\t\treturn id === currency.id;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn currencyCache;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/currency/currencyCache.js","//{CODE:EUP2T}\r\n// di.core.angular.currency\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.filter('diCurrency', diCurrencyFilter);\r\n\r\n        diCurrencyFilter.$inject = ['$filter', 'currencyCache'];\r\n\r\n        function diCurrencyFilter(filter, currencyCache) {\r\n            function getCurrency(val, currencyId) {\r\n                if (util.isNullOrUndefined(currencyId)) {\r\n                    return filter('number')(val, 2);\r\n                }\r\n\r\n                var currency = currencyCache.getCurrencyById(currencyId);\r\n\r\n                if (util.isNullOrUndefined(currency)) {\r\n                    if (val < 0) {\r\n                        return \"(\" + filter('currency')(Math.abs(val), 2) + \")\";\r\n                    }\r\n                    return filter('number')(val, 2);\r\n                } else {\r\n                    if (val < 0) {\r\n                        return \"(\" + filter('currency')(Math.abs(val), currency.symbol, currency.digitsAfterDecimal) + \")\";\r\n                    }\r\n                    return filter('currency')(val, currency.symbol, currency.digitsAfterDecimal);\r\n                }\r\n\r\n            };\r\n\r\n            return getCurrency;\r\n        }\r\n\r\n\r\n        return diCurrencyFilter;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/currency/diCurrencyFilter.js","//{CODE:CAD01}\r\n// di.core.angular.date\r\ndefine([\r\n\t'./diDateFilter',\r\n\t'./diDateFormats',\r\n\t'./diMoment'\r\n], function (\r\n\tdiDateFilter,\r\n\tdiDateFormats,\r\n\tdiMoment\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tdiDateFilter(module);\r\n\t\tdiDateFormats(module);\r\n\t\tdiMoment(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/date/_loader.js","//{CODE:CAD02}\r\n// di.core.angular.date\r\ndefine(['moment'], function (moment) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.filter('diDate', diDate);\r\n\r\n\t\tdiDate.$inject = ['translator', 'diMoment', 'DATE_FORMATS'];\r\n\r\n\t\tfunction diDate(translator, diMoment, dateFormats) {\r\n\t\t\treturn function (input, format) {\r\n                if (!input) {\r\n                    return translator.instantTranslate('CORE.DATE.NOT_SPECIFIED');\r\n                }\r\n\r\n\t\t\t\tvar momentValue;\r\n\t\t\t\tif (moment.isMoment(input) && input.isValid()) {\r\n\t\t\t\t\tmomentValue = input;\r\n\t\t\t\t} else {\r\n\t\t\t\t    momentValue = moment(new Date(input));\r\n\t\t\t\t\tif (!moment.isMoment(momentValue) || !momentValue.isValid()) {\r\n\t\t\t\t\t\tmomentValue = diMoment(input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (moment.isMoment(momentValue) && momentValue.isValid()) {\r\n\t\t\t\t\treturn momentValue.format(format || dateFormats.supported[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn translator.instantTranslate('CORE.DATE.NOT_SPECIFIED');\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diDate;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/date/diDateFilter.js","//{CODE:DEF13}\r\ndefine(['moment'], function (moment) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.constant('DATE_FORMATS', dateFormats());\r\n\r\n\t\tfunction dateFormats() {\r\n\t\t    var supportedDateFormats = [\r\n                    \"DD/MM/YYYY\",\r\n\t\t\t\t\tmoment.localeData().longDateFormat('L'),\r\n\t\t\t\t\tmoment.localeData().longDateFormat('l'),\r\n\t\t\t\t\tmoment.localeData().longDateFormat('LL'),\r\n\t\t\t\t\tmoment.localeData().longDateFormat('ll'),\r\n\t\t\t\t\tmoment.localeData().longDateFormat('LLL'),\r\n\t\t\t\t\tmoment.localeData().longDateFormat('lll'),\r\n\t\t\t\t\tmoment.localeData().longDateFormat('LLLL'),\r\n\t\t\t\t\tmoment.localeData().longDateFormat('llll')\r\n\t\t\t\t]\r\n\t\t\t\t.concat([moment.ISO_8601, \"YYYY/MM/DD\"]);\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsupported: supportedDateFormats\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn dateFormats;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/date/diDateFormats.js","//{CODE:DEF14}\r\ndefine(['moment'], function (moment) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('diMoment', diMoment);\r\n\r\n\t\tdiMoment.$inject = ['DATE_FORMATS'];\r\n\r\n\t\tfunction diMoment(dateFormats) {\r\n\t\t\treturn function (input) {\r\n\r\n\t\t\t\tvar inputMoment = moment(input, dateFormats.supported, moment.locale(), true);\r\n\r\n\t\t\t\treturn inputMoment;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diMoment;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/date/diMoment.js","//{CODE:CAE06}\r\n// di.core.angular.exception\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.config(configureExceptionHandler);\r\n        module.config(configureExceptionHttpInterceptor);\r\n\r\n        configureExceptionHandler.$inject = ['$provide'];\r\n        function configureExceptionHandler($provide) {\r\n            $provide.decorator('$exceptionHandler', extendExceptionHandler);\r\n        }\r\n\r\n        extendExceptionHandler.$inject = ['$delegate', 'exceptionHandler'];\r\n        function extendExceptionHandler(delegate, exceptionHandler) {\r\n            return function (exception, cause) {\r\n                delegate(exception, cause);\r\n\r\n                exception.cause = cause;\r\n\r\n                exceptionHandler.handleException(exception);\r\n            };\r\n        }\r\n\r\n        configureExceptionHttpInterceptor.$inject = ['$httpProvider'];\r\n        function configureExceptionHttpInterceptor($httpProvider) {\r\n            $httpProvider.interceptors.push('exceptionHttpInterceptor');\r\n        }\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/exception/_config.js","//{CODE:CAE03}\r\n// di.core.angular.exception\r\ndefine([\r\n    './_config',\r\n    './exceptionHandler',\r\n    './exceptionHttpInterceptor',\r\n    './stackTrace'\r\n], function (\r\n    configLoader,\r\n    exceptionHandlerLoader,\r\n    exceptionHttpInterceptorLoader,\r\n    stackTraceLoader\r\n    ) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        exceptionHandlerLoader(module);\r\n        exceptionHttpInterceptorLoader(module);\r\n        stackTraceLoader(module);\r\n\r\n        configLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/exception/_loader.js","//{CODE:CAE01}\r\n// di.core.angular.exception\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.provider('exceptionHandler', ExceptionHandlerProvider);\r\n\r\n        /**\r\n         * Handles exceptions\r\n         */\r\n        function ExceptionHandlerProvider() {\r\n            var config = {\r\n                appErrorPrefix: undefined,\r\n                notify: true\r\n            };\r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            };\r\n\r\n            provider.$get.$inject = ['$log', 'loggerProxy', 'stackTrace'];\r\n\r\n            return provider;\r\n\r\n            /**\r\n             * Configure the service\r\n             * @param cfg\r\n             */\r\n            function configure(cfg) {\r\n                guard.throwIfNotAnObject(\"CAE0101E\", cfg, 'cfg');\r\n\r\n                config = cfg;\r\n            }\r\n\r\n            function $get($log, loggerProxy, stackTraceService) {\r\n            \tvar logger = $di.debug.debugger.newLogger(\"Error\");\r\n\r\n            \treturn {\r\n                    handleException: handleException\r\n                };\r\n\r\n                /**\r\n                 * Handles the given exception\r\n                 * @param exception\r\n                 */\r\n                function handleException(exception) {\r\n                    var appErrorPrefix = config.appErrorPrefix || '';\r\n\r\n                    if (config.notify) {\r\n                        try {\r\n                            logger.log(exception.message);\r\n                        } catch (ex) {\r\n                            ex.source = \"CAE0102E\";\r\n\r\n                            loggerProxy.error(ex);\r\n                        }\r\n                    }\r\n\r\n                    try {\r\n                        var loggedEx = new Error(appErrorPrefix + exception.message)\r\n\r\n                        loggedEx.stackTrace = stackTraceService.print({ e: exception });\r\n\r\n                        loggerProxy.error(loggedEx);\r\n                    } catch (ex) {\r\n                        ex.source = \"CAE0103E\";\r\n\r\n                        $log.error('Error: ' + ex.message);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return ExceptionHandlerProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/exception/exceptionHandler.js","//{CODE:CAE05}\r\n// di.core.angular.exception\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('exceptionHttpInterceptor', exceptionHttpInterceptor);\r\n\r\n        exceptionHttpInterceptor.$inject = ['exceptionHandler', '$q'];\r\n\r\n        /**\r\n         * Interceptor for catching http response errors\r\n         */\r\n        function exceptionHttpInterceptor(exceptionHandler, $q) {\r\n            return {\r\n                responseError: responseError\r\n            };\r\n\r\n            function responseError(httpResponse) {\r\n                if (handleResponseError(httpResponse)) {\r\n                    var exception = guard.getNewError(\"CAE0502E\", \"HTTP response error\");\r\n                    \r\n                    if (httpResponse.status) {\r\n                        exception.cause = httpResponse.status + ': ' + httpResponse.config.url;\r\n                    }\r\n\r\n                    exceptionHandler.handleException(exception);\r\n                }\r\n\r\n                return $q.reject(httpResponse);\r\n            }\r\n\r\n            /**\r\n             * Only handle/log exceptions that could not be anticipated\r\n             * @param httpResponse\r\n             */\r\n            function handleResponseError(httpResponse) {\r\n                if (httpResponse.status === 401) {\r\n                    //Ignore '401 - Unauthorised'\r\n                    return false;\r\n                }\r\n\r\n                if (httpResponse.status === 400 &&\r\n                    httpResponse.data &&\r\n                    httpResponse.data.error &&\r\n                    httpResponse.data.error === \"invalid_grant\") {\r\n                    //Ignore '400 - Bad Request' if failed login\r\n                    return false;\r\n                }\r\n\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return exceptionHttpInterceptor;\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/exception/exceptionHttpInterceptor.js","//{CODE:CAE02}\r\n// di.core.angular.exception\r\ndefine([\r\n    'stacktrace'\r\n], function (stackTrace) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.factory('stackTrace', stackTraceFactory);\r\n\r\n        /**\r\n         * Produces better exception stack traces\r\n         */\r\n        function stackTraceFactory() {\r\n            return ({\r\n                print: stackTrace\r\n            });\r\n        }\r\n\r\n        return stackTraceFactory;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/exception/stackTrace.js","//{CODE:CAF01}\r\n// di.core.angular.file\r\ndefine([\r\n    './fileDownloader'\r\n], function (\r\n\tfileDownloaderLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        fileDownloaderLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/file/_loader.js","//{CODE:CAF02}\r\n// di.core.angular.file\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.provider('fileDownloader', FileDownloaderProvider);\r\n\r\n        /**\r\n         * \r\n         */\r\n        function FileDownloaderProvider() {\r\n            var config = {\r\n                endpoint: 'webApi',\r\n                tokenParameterName: 'access_token'\r\n            };\r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            };\r\n\r\n            provider.$get.$inject = ['endpoints', 'authenticationData', 'authenticationTicketValidator', 'urlHelper', '$window'];\r\n\r\n            return provider;\r\n\r\n            /**\r\n             * Configure the service\r\n             * @param cfg\r\n             */\r\n            function configure(cfg) {\r\n                guard.throwIfNotAnObject(\"CAF0201E\", cfg, \"cfg\");\r\n                config = cfg;\r\n            }\r\n\r\n            function $get(endpoints, authenticationData, authenticationTicketValidator, urlHelper, $window) {\r\n                return {\r\n                    downloadFile: validateAuthenticationTicketAndDownloadFile\r\n                };\r\n\r\n                function validateAuthenticationTicketAndDownloadFile(relativeUrl) {\r\n                    authenticationTicketValidator.validateTicket(true, downloadFile);\r\n\r\n                    return;\r\n\r\n                    function downloadFile() {\r\n                        var url = endpoints.getUrl(relativeUrl, config.endpoint);\r\n\r\n                        var token = authenticationData.authenticationTicket.token;\r\n\r\n                        url = urlHelper.setParameter(url, config.tokenParameterName, token);\r\n\r\n                        $window.open(url);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return FileDownloaderProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/file/fileDownloader.js","//{CODE:CAH02}\r\n// di.core.angular.http\r\ndefine([\r\n    './dHttp',\r\n\t'./webApiHttp',\r\n\t'./authHttp',\r\n\t'./serverResponseHandler'\r\n], function (\r\n    dHttpLoader,\r\n\twebApiHttpLoader,\r\n    authHttpLoader,\r\n\tserverResponseHandlerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        dHttpLoader(module);\r\n        webApiHttpLoader(module);\r\n        authHttpLoader(module);\r\n\t    serverResponseHandlerLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/http/_loader.js","//{CODE:CAH03}\r\n// di.core.angular.http\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('authHttp', authHttp);\r\n\r\n\t\tauthHttp.$inject = [\r\n\t\t\t'dHttp',\r\n\t\t\t'authenticationTicketValidator'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * wrapper for dHttp service adding token expiry verification\t\t\r\n\t\t */\r\n\t\tfunction authHttp(dHttp, authenticationTicketValidator) {\r\n\t\t\tvar service = {\r\n\t\t\t\tget: get,\r\n\t\t\t\tgetWithHeaders: getWithHeaders,\r\n\t\t\t\tpost: post,\r\n\t\t\t\tpostWithHeaders: postWithHeaders,\r\n\t\t\t\tdoDelete: doDelete,\r\n\t\t\t\tdoDeleteWithHeaders: doDeleteWithHeaders\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\t/**\r\n\t\t\t* Make a get request to the given url and (optional) endpoint\r\n\t\t\t* @param relativeUrl\r\n\t\t\t* @param endpoint\r\n\t\t\t*/\r\n\t\t\tfunction get(relativeUrl, endpoint) {\r\n\t\t\t\tguard.throwIfEmptyString(\"CAH0303E\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t    return authenticationTicketValidator.validateTicket(true, function() {\r\n\t\t\t        return dHttp.get(relativeUrl, endpoint);\r\n\t\t\t    });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Make a post request to the given url and (optional) endpoint\r\n\t\t\t* @param relativeUrl\r\n\t\t\t* @param data\r\n\t\t\t* @param endpoint\r\n\t\t\t*/\r\n\t\t\tfunction post(relativeUrl, data, endpoint) {\r\n\t\t\t\tguard.throwIfEmptyString(\"CAH0307E\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t\treturn authenticationTicketValidator.validateTicket(true, function () {\r\n\t\t\t\t    return dHttp.post(relativeUrl, data, endpoint);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Make a delete request to the given url and (optional) endpoint\r\n\t\t\t* @param relativeUrl\r\n\t\t\t* @param data\r\n\t\t\t* @param endpoint\r\n\t\t\t*/\r\n\t\t\tfunction doDelete(relativeUrl, data, endpoint) {\r\n\t\t\t\tguard.throwIfEmptyString(\"CAH030AE\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t\treturn authenticationTicketValidator.validateTicket(true, function () {\r\n\t\t\t\t    return dHttp.doDelete(relativeUrl, data, endpoint);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Make a get request with headers to the given url and (optional) endpoint\r\n\t\t\t* @param relativeUrl\r\n\t\t\t* @param headers\r\n\t\t\t* @param endpoint\r\n\t\t\t*/\r\n\t\t\tfunction getWithHeaders(relativeUrl, headers, endpoint) {\r\n\t\t\t\tguard.throwIfEmptyString(\"CAH0308E\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t\treturn authenticationTicketValidator.validateTicket(true, function () {\r\n\t\t\t\t    return dHttp.getWithHeaders(relativeUrl, headers, endpoint);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Make a post request with headers to the given url and (optional) endpoint\r\n\t\t\t* @param relativeUrl\r\n\t\t\t* @param data\r\n\t\t\t* @param headers\r\n\t\t\t* @param endpoint\r\n\t\t\t*/\r\n\t\t\tfunction postWithHeaders(relativeUrl, data, headers, endpoint) {\r\n\t\t\t\tguard.throwIfEmptyString(\"CAH0309E\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t\treturn authenticationTicketValidator.validateTicket(true, function () {\r\n\t\t\t\t    return dHttp.postWithHeaders(relativeUrl, data, headers, endpoint);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Make a delete request with headers to the given url and (optional) endpoint\r\n\t\t\t* @param relativeUrl\r\n\t\t\t* @param data\r\n\t\t\t* @param headers\r\n\t\t\t* @param endpoint\r\n\t\t\t*/\r\n\t\t\tfunction doDeleteWithHeaders(relativeUrl, data, headers, endpoint) {\r\n\t\t\t\tguard.throwIfEmptyString(\"CAH030BE\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t\treturn authenticationTicketValidator.validateTicket(true, function () {\r\n\t\t\t\t    return dHttp.doDeleteWithHeaders(relativeUrl, data, headers, endpoint);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn authHttp;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/http/authHttp.js","//{CODE:CAH03}\r\n// di.core.angular.http\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n        \r\n        module.provider('dHttp', DHttpProvider);\r\n\r\n        /**\r\n         * An http service layer for communicating with named endpoints\r\n         * Endpoints are defined during config with a baseUrl.\r\n         * Requests can then be made using a relative url and the name of the\r\n         * endpoint. If no endpoint name is given then the configured\r\n         * defaultEndpoint is used.\r\n         */\r\n        function DHttpProvider() {\r\n            var provider = {\r\n                $get: $get\r\n            };\r\n\r\n            provider.$get.$inject = [\r\n                '$http',\r\n                '$q',\r\n                'authenticationClientEventSubscriber',\r\n                'endpoints'];\r\n\r\n            return provider;\r\n\r\n            function $get($http, $q, authenticationClientEventSubscriber, endpoints) {\r\n                return {\r\n                    get: get,\r\n                    getWithHeaders: getWithHeaders,\r\n                    post: post,\r\n                    postWithHeaders: postWithHeaders,\r\n                    doDelete: doDelete,\r\n                    doDeleteWithHeaders: doDeleteWithHeaders\r\n                };\r\n\r\n                /**\r\n                 * Make a get request to the given url and (optional) endpoint\r\n                 * @param relativeUrl\r\n                 * @param endpoint\r\n                 */\r\n                function get(relativeUrl, endpoint) {\r\n                    guard.throwIfEmptyString(\"CAH0303E\", relativeUrl, \"relativeUrl\");\r\n\r\n                    var promise = makeRequest(endpoint, relativeUrl, 'GET');\r\n\r\n                    return promise;\r\n                }\r\n\r\n                /**\r\n                 * Make a post request to the given url and (optional) endpoint\r\n                 * @param relativeUrl\r\n                 * @param data\r\n                 * @param endpoint\r\n                 */\r\n                function post(relativeUrl, data, endpoint) {\r\n                    guard.throwIfEmptyString(\"CAH0307E\", relativeUrl, \"relativeUrl\");\r\n\r\n                    var promise = makeRequest(endpoint, relativeUrl, 'POST', data);\r\n\r\n                    return promise;\r\n                }\r\n            \t\r\n            \t/**\r\n                 * Make a delete request to the given url and (optional) endpoint\r\n                 * @param relativeUrl\r\n                 * @param data\r\n                 * @param endpoint\r\n                 */\r\n                function doDelete(relativeUrl, data, endpoint) {\r\n                    guard.throwIfEmptyString(\"CAH030AE\", relativeUrl, \"relativeUrl\");\r\n\r\n                    var promise = makeRequest(endpoint, relativeUrl, 'DELETE', data);\r\n\r\n                    return promise;\r\n                }\r\n\r\n                /**\r\n                 * Make a get request with headers to the given url and (optional) endpoint\r\n                 * @param relativeUrl\r\n                 * @param headers\r\n                 * @param endpoint\r\n                 */\r\n                function getWithHeaders(relativeUrl, headers, endpoint) {\r\n                    guard.throwIfEmptyString(\"CAH0308E\", relativeUrl, \"relativeUrl\");\r\n\r\n                    var promise = makeRequest(endpoint, relativeUrl, 'GET', null, headers);\r\n\r\n                    return promise;\r\n                }\r\n\r\n                /**\r\n                 * Make a post request with headers to the given url and (optional) endpoint\r\n                 * @param relativeUrl\r\n                 * @param data\r\n                 * @param headers\r\n                 * @param endpoint\r\n                 */\r\n                function postWithHeaders(relativeUrl, data, headers, endpoint) {\r\n                    guard.throwIfEmptyString(\"CAH0309E\", relativeUrl, \"relativeUrl\");\r\n                    \r\n                    var promise = makeRequest(endpoint, relativeUrl, 'POST', data, headers);\r\n\r\n                    return promise;\r\n                }\r\n\r\n            \t/**\r\n                 * Make a delete request with headers to the given url and (optional) endpoint\r\n                 * @param relativeUrl\r\n                 * @param data\r\n                 * @param headers\r\n                 * @param endpoint\r\n                 */\r\n                function doDeleteWithHeaders(relativeUrl, data, headers, endpoint) {\r\n                    guard.throwIfEmptyString(\"CAH030BE\", relativeUrl, \"relativeUrl\");\r\n                    \r\n                    var promise = makeRequest(endpoint, relativeUrl, 'DELETE', data, headers);\r\n\r\n                    return promise;\r\n                }\r\n\r\n                function makeRequest(endpoint, relativeUrl, method, data, headers) {\r\n                    var url = endpoints.getUrl(relativeUrl, endpoint);\r\n\r\n                    var config = {\r\n                        url: url,\r\n                        method: method\r\n                    };\r\n\r\n                    if (headers) {\r\n                        config.headers = headers;\r\n                    }\r\n\r\n                    if (data) {\r\n                        config.data = data;\r\n                    }\r\n\r\n                    var promise = $http(config);\r\n\r\n                    var handledPromise = getHandledPromise(promise);\r\n\r\n                    return handledPromise;\r\n                }\r\n\r\n                function getHandledPromise(promise) {\r\n                    var handledPromise = promise.then(resolved, rejected);\r\n\r\n                    function resolved(response) {\r\n                        return response.data;\r\n                    }\r\n\r\n                    function rejected(response) {\r\n                        return $q.reject({\r\n                            response: response,\r\n                            failureReason: getFailureReason()\r\n                            /*\r\n                                'ServerDown'\r\n                                'Unauthorized'\r\n                                'NotFound'\r\n                                'Redirection'\r\n                                'FailedLogin'\r\n                                'ClientError'\r\n                                'ServerError'\r\n                                'UnknownError'\r\n                            */\r\n                        });\r\n\r\n                        function getFailureReason() {\r\n                            var failureReason;\r\n\r\n                            switch (response.status) {\r\n                                case -1:\r\n                                case 0:\r\n                                    failureReason = 'ServerDown';\r\n                                    break;\r\n\r\n                                case 401:\r\n                                    failureReason = 'Unauthorized';\r\n\r\n                                    authenticationClientEventSubscriber.server401(response.config.url);\r\n                                    break;\r\n\r\n                                case 404:\r\n                                    failureReason = 'NotFound';\r\n                                    break;\r\n\r\n                                default:\r\n                                    var statusPrefix = (response.status || 0).toString().substring(0, 1);\r\n\r\n                                    switch (statusPrefix) {\r\n                                        case \"3\":\r\n                                            failureReason = 'Redirection';\r\n                                            break;\r\n\r\n                                        case \"4\":\r\n                                            failureReason = 'ClientError';\r\n                                            break;\r\n\r\n                                        case \"5\":\r\n                                            failureReason = 'ServerError';\r\n                                            break;\r\n\r\n                                        default:\r\n                                            failureReason = 'UnknownError';\r\n                                    }\r\n                            }\r\n\r\n                            return failureReason;\r\n                        }\r\n                    }\r\n\r\n                    return handledPromise;\r\n                }\r\n            }\r\n        }\r\n\r\n        return DHttpProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/http/dHttp.js","// di.core.angular.http\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('serverResponseHandler', serverResponseHandler);\r\n\r\n\t\tserverResponseHandler.$inject = ['$q'];\r\n\r\n\t\t/**\r\n\t\t * Server response handler\t\t \r\n\t\t * @returns\r\n\t\t */\r\n\t\tfunction serverResponseHandler(q) {\r\n\t\t\tvar defaultErrorMessage = 'CORE.HTTP.DEFAULT_ERROR';\r\n\r\n\t\t\treturn {\r\n\t\t\t\thandleServerResponsePromise: handleServerResponsePromise\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Handles the standard server response object by ensuring the request is marked as\r\n\t\t\t * successful and that error details have been provided.\r\n\t\t\t * If the request was successful then the response content is returned\r\n\t\t\t * @param promise\r\n\t\t\t */\r\n\t\t\tfunction handleServerResponsePromise(promise) {\r\n\t\t\t\tvar newPromise = promise.then(success, failure);\r\n\r\n\t\t\t\tfunction success(responseObject) {\r\n\t\t\t\t\tif (!responseObject.success) {\r\n\t\t\t\t\t\treturn q.reject({\r\n\t\t\t\t\t\t\tresponse: responseObject,\r\n\t\t\t\t\t\t\tfailureReason: defaultErrorMessage\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn responseObject.responseContent;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction failure(rejectedPromise) {\r\n\t\t\t\t\treturn q.reject(rejectedPromise);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn serverResponseHandler;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/http/serverResponseHandler.js","//{CODE:CAH04}\r\n// di.core.angular.http\r\ndefine([\r\n\t\t'angular'\r\n], function (ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.provider('webApiHttp', WebApiHttpProvider);\r\n\r\n\t\t/**\r\n\t\t * An http service layer for communicating with a webAPI returning IServiceResponse objects\r\n\t\t * Requests are made using a relative url, via a default endpoint specified in the configuration\r\n\t\t */\r\n\t\tfunction WebApiHttpProvider() {\r\n\t\t\tvar config = {\r\n\t\t\t\tendpointName: 'webApi'\r\n\t\t\t};\r\n\r\n\t\t\tvar defaultHeaders = {\r\n\t\t\t\taccept: 'text/json; application/json'\r\n\t\t\t};\r\n\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['authHttp', 'serverResponseHandler'];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"CAH0405E\", cfg, \"cfg\");\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\tfunction $get(dHttp, serverResponseHandler) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tget: get,\r\n\t\t\t\t\tgetWithHeaders: getWithHeaders,\r\n\t\t\t\t\tpost: post,\r\n\t\t\t\t\tpostWithHeaders: postWithHeaders,\r\n\t\t\t\t\tdoDelete: doDelete,\r\n\t\t\t\t\tdoDeleteWithHeaders: doDeleteWithHeaders\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Make a get request to the given url\r\n\t\t\t\t * @param relativeUrl\r\n\t\t\t\t */\r\n\t\t\t\tfunction get(relativeUrl) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAH0401E\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t\t\tvar dHttpPromise = dHttp.getWithHeaders(relativeUrl, defaultHeaders, config.endpointName);\r\n\t\t\t\t\tvar promise = serverResponseHandler.handleServerResponsePromise(dHttpPromise);\r\n\r\n\t\t\t\t\treturn promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Make a post request to the given url\r\n\t\t\t\t * @param relativeUrl\r\n\t\t\t\t * @param data\r\n\t\t\t\t */\r\n\t\t\t\tfunction post(relativeUrl, data) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAH0402E\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t\t\tvar dHttpPromise = dHttp.postWithHeaders(relativeUrl, data, defaultHeaders, config.endpointName);\r\n\t\t\t\t\tvar promise = serverResponseHandler.handleServerResponsePromise(dHttpPromise);\r\n\r\n\t\t\t\t\treturn promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Make a delete request to the given url\r\n\t\t\t\t * @param relativeUrl\r\n\t\t\t\t * @param data\r\n\t\t\t\t */\r\n\t\t\t\tfunction doDelete(relativeUrl, data) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAH0406E\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t\t\tvar dHttpPromise = dHttp.doDeleteWithHeaders(relativeUrl, data, defaultHeaders, config.endpointName);\r\n\t\t\t\t\tvar promise = serverResponseHandler.handleServerResponsePromise(dHttpPromise);\r\n\r\n\t\t\t\t\treturn promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Make a get request with headers to the given url\r\n\t\t\t\t * @param relativeUrl\r\n\t\t\t\t * @param headers\r\n\t\t\t\t */\r\n\t\t\t\tfunction getWithHeaders(relativeUrl, headers) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAH0403E\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t\t\tvar mergedHeaders = ng.extend({}, defaultHeaders, headers);\r\n\r\n\t\t\t\t\tvar dHttpPromise = dHttp.getWithHeaders(relativeUrl, mergedHeaders, config.endpointName);\r\n\t\t\t\t\tvar promise = serverResponseHandler.handleServerResponsePromise(dHttpPromise);\r\n\r\n\t\t\t\t\treturn promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Make a post request with headers to the given url\r\n\t\t\t\t * @param relativeUrl\r\n\t\t\t\t * @param data\r\n\t\t\t\t * @param headers\r\n\t\t\t\t */\r\n\t\t\t\tfunction postWithHeaders(relativeUrl, data, headers) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAH0404E\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t\t\tvar mergedHeaders = ng.extend({}, defaultHeaders, headers);\r\n\r\n\t\t\t\t\tvar dHttpPromise = dHttp.postWithHeaders(relativeUrl, data, mergedHeaders, config.endpointName);\r\n\t\t\t\t\tvar promise = serverResponseHandler.handleServerResponsePromise(dHttpPromise);\r\n\r\n\t\t\t\t\treturn promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Make a delete request with headers to the given url\r\n\t\t\t\t * @param relativeUrl\r\n\t\t\t\t * @param data\r\n\t\t\t\t * @param headers\r\n\t\t\t\t */\r\n\t\t\t\tfunction doDeleteWithHeaders(relativeUrl, data, headers) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAH0407E\", relativeUrl, \"relativeUrl\");\r\n\r\n\t\t\t\t\tvar mergedHeaders = ng.extend({}, defaultHeaders, headers);\r\n\r\n\t\t\t\t\tvar dHttpPromise = dHttp.doDeleteWithHeaders(relativeUrl, data, mergedHeaders, config.endpointName);\r\n\t\t\t\t\tvar promise = serverResponseHandler.handleServerResponsePromise(dHttpPromise);\r\n\r\n\t\t\t\t\treturn promise;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn WebApiHttpProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/http/webApiHttp.js","//{CODE:CAL02}\r\n// di.core.angular.logging\r\ndefine([\r\n    './loggerProxy'\r\n], function (\r\n    loggerProxyLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        loggerProxyLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/logging/_loader.js","//{CODE:CAL04}\r\n// di.core.angular.logging\r\ndefine(['jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.provider('loggerProxy', LoggerProxyProvider);\r\n\r\n        /**\r\n         * Logger for posting log messages to the webAPI server\r\n         */\r\n        function LoggerProxyProvider() {\r\n            var config = {\r\n                endpoint: 'webApi',\r\n                url: 'log',\r\n                logInfoToServer: true,\r\n                logWarningToServer: true,\r\n                logErrorToServer: true\r\n            };\r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            };\r\n\r\n            provider.$get.$inject = ['$log', '$window', 'endpoints', 'authenticationData'];\r\n\r\n            return provider;\r\n\r\n            /**\r\n             * Configure the service\r\n             * @param cfg\r\n             */\r\n            function configure(cfg) {\r\n                guard.throwIfNotAnObject(\"CAL0402E\", cfg, \"cfg\");\r\n\r\n                config = cfg;\r\n            }\r\n\r\n            function $get($log, window, endpoints, authenticationData) {\r\n                var service = {\r\n                    info: info,\r\n                    warning: warning,\r\n                    error: error,\r\n                    log: log\r\n                };\r\n\r\n                return service;\r\n\r\n                /**\r\n                 * Log\r\n                 * @param {} message \r\n                 * @returns {} \r\n                 */\r\n                function log(message) {\r\n                    $log.log(message);\r\n                }\r\n\r\n                /**\r\n                 * Log information\r\n                 * @param source\r\n                 * @param message\r\n                 */\r\n                function info(source, message) {\r\n                    $log.info('Info: ' + message);\r\n\r\n                    if (config.logInfoToServer) {\r\n                        sendToServer({\r\n                            source: source,\r\n                            severity: 'Info',\r\n                            message: message,\r\n                            exception: null\r\n                        });\r\n                    }\r\n                }\r\n\r\n                /**\r\n                 * Log warning\r\n                 * @param source\r\n                 * @param message\r\n                 */\r\n                function warning(source, message) {\r\n                    $log.warn('Warning: ' + message);\r\n\r\n                    if (config.logWarningToServer) {\r\n                        sendToServer({\r\n                            source: source,\r\n                            severity: 'Warning',\r\n                            message: message,\r\n                            exception: null\r\n                        });\r\n                    }\r\n                }\r\n\r\n                /**\r\n                 * Log error\r\n                 * @param exception\r\n                 */\r\n                function error(exception) {\r\n                    $log.error('Error: ' + exception.message + '. Cause: ' + (exception.cause || '') + '. StackTrace: ' + (exception.stackTrace || ''));\r\n\r\n                    if (config.logErrorToServer) {\r\n                        sendToServer({\r\n                            source: exception.source,\r\n                            severity: 'Error',\r\n                            message: exception.message,\r\n                            exception: exception\r\n                        });\r\n                    }\r\n                }\r\n\r\n                function sendToServer(logEntry) {\r\n\r\n                    $.ajax({\r\n                        type: 'POST',\r\n                        url: endpoints.getUrl(config.url, config.endpoint),\r\n                        contentType: 'application/json',\r\n                        data: JSON.stringify({\r\n                            currentUrl: window.location.href,\r\n                            userId: authenticationData.userData.userId || 0,\r\n                            source: (logEntry.source || ''),\r\n                            severity: (logEntry.severity || 'log'),\r\n                            message: logEntry.message,\r\n                            exception: (logEntry.exception || null)\r\n                        })\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        return LoggerProxyProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/logging/loggerProxy.js","//{CODE:CAS04}\r\n// di.core.angular.session\r\ndefine([\r\n    './sessionStore'\r\n], function (\r\n    sessionStoreLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        sessionStoreLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/session/_loader.js","//{CODE:CAS05}\r\n// di.core.angular.session\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n\r\n        module.provider('sessionStore', SessionStoreProvider);\r\n\r\n        /**\r\n         * Stores data in local storage or cookies\r\n         */\r\n        function SessionStoreProvider() {\r\n            var config = {\r\n            };\r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            };\r\n\r\n            provider.$get.$inject = ['localStorageService'];\r\n\r\n            return provider;\r\n\r\n            /**\r\n             * Configure the service\r\n             * @param cfg\r\n             */\r\n            function configure(cfg) {\r\n                guard.throwIfNotAnObject(\"CAS0501E\", cfg, \"cfg\");\r\n\r\n                config = cfg;\r\n            }\r\n\r\n            function $get(localStorage) {\r\n                var items = {};\r\n\r\n                var service = {\r\n                    get: get,\r\n                    set: set,\r\n                    remove: remove\r\n                };\r\n\r\n                return service;\r\n\r\n                /**\r\n                 * Get data from storage\r\n                 * @param key\r\n                 * @param prefix\r\n                 */\r\n                function get(key, prefix) {\r\n                    var fullKey = generateKey(key, prefix);\r\n                    var item = items[fullKey];\r\n\r\n                    if (util.isNullOrUndefined(item)) {\r\n                        item = localStorage.get(fullKey);\r\n                    }\r\n\r\n                    return item;\r\n                }\r\n\r\n                /**\r\n                 * Put data to storage\r\n                 * @param key\r\n                 * @param value\r\n                 * @param prefix\r\n                 */\r\n                function set(key, value, prefix) {\r\n                    var fullKey = generateKey(key, prefix);\r\n\r\n                    items[fullKey] = value;\r\n                    localStorage.set(fullKey, value);\r\n                }\r\n\r\n                /**\r\n                 * Remove data from storage\r\n                 * @param key\r\n                 * @param prefix\r\n                 */\r\n                function remove(key, prefix) {\r\n                    var fullKey = generateKey(key, prefix);\r\n\r\n                    items[fullKey] = null;\r\n                    localStorage.remove(fullKey);\r\n                }\r\n\r\n                function generateKey(key, prefix) {\r\n                    guard.throwIfEmptyString(\"CAS0503E\", prefix, \"prefix\");\r\n                    guard.throwIfEmptyString(\"CAS0504E\", key, \"key\");\r\n\r\n                    var fullKey = prefix + '_' + key;\r\n\r\n                    return fullKey;\r\n                }\r\n            }\r\n        }\r\n\r\n        return SessionStoreProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/session/sessionStore.js","//{CODE:CAS08}\r\n// di.core.angular.state\r\ndefine([\r\n\t'./stateHelper',\r\n\t'./diState',\r\n\t'./stateAuthenticator',\r\n\t'./stateDecorator',\r\n], function (\r\n\tstateHelperLoader,\r\n\tdiStateLoader,\r\n    stateAuthenticatorLoader,\r\n    stateDecoratorLoader\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tstateHelperLoader(module);\r\n\t\tdiStateLoader(module);\r\n\t    stateAuthenticatorLoader(module);\r\n\t    stateDecoratorLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/state/_loader.js","//{CODE:CAS0A}\r\n// di.core.angular.state\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('diState', diState);\r\n\r\n\t\tdiState.$inject = ['$state', '$q'];\r\n\r\n\t\t/**\r\n\t\t * Di state manager\r\n\t\t * @param $state\r\n\t\t * @returns\r\n\t\t */\r\n\t\tfunction diState($state, $q) {\r\n\t\t\tvar stateSubscriptions = {};\r\n\r\n\t\t\treturn {\r\n\t\t\t\tgo: go,\r\n\t\t\t\tgoBack: goBack,\r\n\t\t\t\treload: reload,\r\n\t\t\t\tsubscribeToStateChange: subscribeToStateChange\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Method which transitions to the specified state\r\n\t\t\t * @param to\r\n\t\t\t * @param params\r\n\t\t\t * @param options\r\n\t\t\t */\r\n\t\t\tfunction go(to, params, options) {\r\n\t\t\t\tguard.throwIfEmptyString(\"CAS0A01E\", to, 'to');\r\n\r\n\t\t\t\tvar promise = $state.go(to, params, options);\r\n\r\n\t\t\t\tvar subscriptions = stateSubscriptions[to];\r\n\r\n\t\t\t\tif (subscriptions && subscriptions.length > 0) {\r\n\t\t\t\t\tfor (var i = 0; i < subscriptions.length; i++) {\r\n\t\t\t\t\t\tsubscriptions[i]();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn promise;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Transitions to the previous state, provided it has been stored\r\n\t\t\t * @returns {promise of the transition} \r\n\t\t\t */\r\n\t\t\tfunction goBack() {\t\t\t    \r\n\t\t\t\tif ($state.from && $state.from.name) {\r\n\t\t\t\t\tvar promise = go($state.from.name, $state.fromParams);\r\n\r\n\t\t\t\t\treturn promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn $q.reject('No previous state available.');\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Navigates to the current state and forces a reload\r\n\t\t\t */\r\n\t\t\tfunction reload() {\r\n\t\t\t\tvar currentState = getCurrentState();\r\n\r\n\t\t\t\treturn go(currentState.name, currentState.params, { reload: true });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t\t * Subscribe to the given state\r\n\t\t\t\t * @param state\r\n\t\t\t\t * @param callback\r\n\t\t\t\t */\r\n\t\t\tfunction subscribeToStateChange(state, callback) {\r\n\t\t\t\tstateSubscriptions[state] = stateSubscriptions[state] || [];\r\n\r\n\t\t\t\tstateSubscriptions[state].push(callback);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets a new object with the current state name and params\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction getCurrentState() {\r\n\t\t\t\tvar stateName = ($state.$current !== undefined && $state.$current.self !== undefined) ? $state.$current.self.name : undefined;\r\n\t\t\t\tvar currentParams = $state.params;\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: stateName,\r\n\t\t\t\t\tparams: currentParams\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/state/diState.js","//{CODE:CAA0B}\r\n// di.core.angular.authentication\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tvar util = $di.utility.util;\r\n\t\tvar debug = $di.debug.debugger.newLogger(\"stateAuthenticator\");\r\n\r\n\t\tmodule.provider('stateAuthenticator', StateAuthenticatorProvider);\r\n\r\n\t\t/**\r\n\t\t * Authenticates access to states\r\n\t\t */\r\n\t\tfunction StateAuthenticatorProvider() {\r\n\t\t\tvar config = {\r\n\t\t\t\tsecurityEnabled: true,\r\n\t\t\t\tloginState: 'welcome'\r\n\t\t\t};\r\n\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = [\r\n\t\t\t\t'authenticationData',\r\n\t\t\t\t'authenticationClientEventSubscriber'\r\n\t\t\t];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"CAA0B02E\", cfg, \"cfg\");\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\tfunction $get(authenticationData, authenticationClientEventSubscriber) {\r\n\t\t\t\tvar service = {\r\n\t\t\t\t\tauthenticateState: authenticateState\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn service;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Authenticate access to the given state\r\n\t\t\t\t * @param state\r\n\t\t\t\t */\r\n\t\t\t\tfunction authenticateState(state) {\r\n\t\t\t\t\tguard.throwIfNotAnObject(\"CAA0B06E\", state, \"state\");\r\n                    \r\n\t\t\t\t\tvar requiredRights = (state.data || {}).rights;\r\n\t\t\t\t\tvar userRights;\r\n\t\t\t\t\tvar isValid = true;\r\n\r\n\t\t\t\t\tif (state.name === config.loginState\r\n\t\t\t\t\t\t&& authenticationData.userData.isAuthenticated === true) {\r\n\t\t\t\t\t\tauthenticationClientEventSubscriber.authenticatedAccessToLoginState();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.securityEnabled && util.isArray(requiredRights) && requiredRights.length !== 0) {\r\n\t\t\t\t\t\tuserRights = authenticationData.authenticationTicket.rights;\r\n\r\n\t\t\t\t\t\tif (!userRights) {\r\n\t\t\t\t\t\t\tisValid = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trequiredRights.every(function (requiredRight) {\r\n\t\t\t\t\t\t\t\tif (!_.contains(userRights, requiredRight)) {\r\n\t\t\t\t\t\t\t\t\tisValid = false;\r\n\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isValid) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tauthenticationClientEventSubscriber.unauthorisedState(state.url);\r\n\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn StateAuthenticatorProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/state/stateAuthenticator.js","//{CODE:DEF1J}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\r\n\t\tmodule.decorator('$state', stateDecorator);\r\n\r\n\t\tstateDecorator.$inject = [\"$delegate\", \"$rootScope\"];\r\n\r\n\t\t/*\r\n\t\t * Adds the functionality of storing the previous state\r\n\t\t */\r\n\t\tfunction stateDecorator(delegate, rootScope) {\r\n\r\n\t\t\treturn decorated();\r\n\r\n\t\t\tfunction decorated() {\r\n\t\t\t\tvar state = delegate;\r\n\r\n\t\t\t\tstate.from = undefined;\r\n\t\t\t\tstate.fromParams = undefined;\r\n\r\n\t\t\t\trootScope.$on(\"$stateChangeSuccess\", function (ev, to, toParams, from, fromParams) {\r\n\t\t\t\t\tstate.from = from;\r\n\t\t\t\t\tstate.fromParams = fromParams;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn stateDecorator;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/state/stateDecorator.js","//{CODE:CAS07}\r\n// di.core.angular.state\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tvar util = $di.utility.util;\r\n\t\tvar debug = $di.debug.debugger.newLogger(\"stateHelper\");\r\n\r\n\t\tmodule.provider('stateHelper', StateHelperProvider);\r\n\r\n\t\tStateHelperProvider.$inject = ['$stateProvider'];\r\n\r\n\t\t/**\r\n\t\t * Adds states to the $stateProvider using a state object\r\n\t\t */\r\n\t\tfunction StateHelperProvider($stateProvider) {\r\n\t\t\tvar stateRights = {};\r\n\r\n\t\t\tvar provider = {\r\n\t\t\t\taddStates: addStates,\r\n\t\t\t\t$get: function () { }\r\n\t\t\t};\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\t/**\r\n\t\t\t * Adds the given state information to the $stateProvider\r\n\t\t\t * @param stateData\r\n\t\t\t */\r\n\t\t\tfunction addStates(stateData) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"CAS0702E\", stateData, \"stateData\");\r\n\r\n\t\t\t\tvar parentRights;\r\n\t\t\t\t\r\n\t\t\t\tif(stateData.parentStateName){\r\n\t\t\t\t\tparentRights = stateRights[stateData.parentStateName];\r\n\t\t\t\t}\r\n\r\n\t\t\t\taddStatesArray(\r\n\t\t\t\t\tstateData.states,\r\n\t\t\t\t\tstateData.templateBaseUrl,\r\n\t\t\t\t\tstateData.parentStateName,\r\n\t\t\t\t\tparentRights);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Adds the specified array of states to the state provider)\r\n\t\t\t * @param statesArray\r\n\t\t\t * @param templateBaseUrl\r\n\t\t\t * @param parentStateName\r\n\t\t\t * @param parentRights\r\n\t\t\t * @param templateName\r\n\t\t\t */\r\n\t\t\tfunction addStatesArray(statesArray, templateBaseUrl, parentStateName, parentRights, templateName) {\r\n\t\t\t\tfor (var i = 0; i < statesArray.length; i++) {\r\n\t\t\t\t\tvar state = statesArray[i];\r\n\r\n\t\t\t\t\tif (state.onlyCreateStateCollection && util.isNullOrUndefined(state.stateCollection)) {\r\n\t\t\t\t\t\tguard.throwNew(\"CAS0703E\", \"A state collection must be provided when onlyCreateStateCollection is true.\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!state.onlyCreateStateCollection) {\r\n\t\t\t\t\t\tcreateState(state, templateBaseUrl, parentStateName, parentRights, templateName);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (state.stateCollection) {\r\n\t\t\t\t\t\tvar newTemplateName = (util.isNonEmptyString(parentStateName) ? parentStateName + '.' : '') + state.stateName;\r\n\t\t\t\t\t\tvar rights = (state.rights || []);\r\n\r\n\t\t\t\t\t\tif (parentRights) {\r\n\t\t\t\t\t\t\trights = rights.concat(parentRights);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\taddStatesArray(state.stateCollection, templateBaseUrl, parentStateName, rights, newTemplateName);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Creates the state entry for the specified state with the specified additional rights\r\n\t\t\t * @param state\r\n\t\t\t * @param templateBaseUrl\r\n\t\t\t * @param parentStateName\r\n\t\t\t * @param parentRights\r\n\t\t\t * @param templateName\r\n\t\t\t */\r\n\t\t\tfunction createState(state, templateBaseUrl, parentStateName, parentRights, templateName) {\r\n\t\t\t\tvar qualifiedStateName = (util.isNonEmptyString(parentStateName) ? parentStateName + '.' : '') + state.stateName;\r\n\r\n\t\t\t\tvar rights = (state.rights || []);\r\n\r\n\t\t\t\tif (parentRights) {\r\n\t\t\t\t\trights = rights.concat(parentRights);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar stateObj = {\r\n\t\t\t\t\tabstract: util.isDefined(state.isAbstract) ? state.isAbstract : false,\r\n\t\t\t\t\turl: '/' + (state.url || state.stateName),\r\n\t\t\t\t\ttemplateUrl: templateBaseUrl + '/' + (templateName || qualifiedStateName) + '.html',\r\n\t\t\t\t\tparent: parentStateName,\r\n\t\t\t\t\tdata: (state.data || {}),\r\n\t\t\t\t\tparams: (state.params || {})\r\n\t\t\t\t};\r\n\r\n\t\t\t\tstateObj.data.rights = rights;\r\n                \r\n\t\t\t\t$stateProvider.state(qualifiedStateName, stateObj);\r\n\t\t\t\tstateRights[qualifiedStateName] = rights;\r\n\r\n\t\t\t\tif (state.childStates) {\r\n\t\t\t\t\taddStatesArray(state.childStates, templateBaseUrl, qualifiedStateName, rights);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn StateHelperProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/state/stateHelper.js","//{CODE:CAS0B}\r\n// di.core.angular.staticLookup\r\ndefine([\r\n\t'./staticLookupProxy'\r\n],\r\n\tfunction (\r\n\t\tstaticLookupProxyLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n    \tstaticLookupProxyLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/staticLookup/_loader.js","//{CODE:EUP1X}\r\n// di.core.angular.currency\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('staticLookupProxy', staticLookupProxy);\r\n\r\n\t\tstaticLookupProxy.$inject = ['webApiHttp', '$q', 'urlHelper'];\r\n\r\n\t\t/**\r\n\t\t * Static lookup proxy.\t\t \r\n\t\t * @returns\r\n\t\t */\r\n\t\tfunction staticLookupProxy(http, q, urlHelper) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tget: get\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Function to get all requested static data from the database.\r\n\t\t\t * @param types\r\n\t\t\t */\r\n\t\t\tfunction get(type) {\r\n\t\t\t\tvar requestParameters = {\r\n\t\t\t\t\ttype: type\r\n\t\t\t\t};\r\n\t\t\t    \r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('StaticLookup/Get', requestParameters);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = httpPromise.then(success, error);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t* Successfull callback when all promises are resolved.\r\n\t\t\t\t* @param data\r\n\t\t\t\t*/\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t* Failure callback when one of N promises failed.\r\n\t\t\t\t* @param error\r\n\t\t\t\t*/\r\n\t\t\t\tfunction error(err) {\r\n\t\t\t\t    err.failureReason = \"CORE.PROXIES.RECEIVE_ERROR\";\r\n\r\n\t\t\t\t\treturn q.reject(err);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn staticLookupProxy;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/staticLookup/staticLookupProxy.js","//{CODE:CAT0A}\r\n// di.core.angular.translation\r\ndefine([\r\n\t'./diTranslateDirective',\r\n\t'./diTranslateFilter',\r\n    './diTranslateLink',\r\n\t'./translator',\r\n], function (\r\n\tdiTranslateDirectiveLoader,\r\n\tdiTranslateFilterLoader,\r\n    diTranslateLink,\r\n\ttranslatorLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diTranslateDirectiveLoader(module);\r\n        diTranslateFilterLoader(module);\r\n        diTranslateLink(module);\r\n        translatorLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/translation/_loader.js","//{CODE:CAT06}\r\n// di.core.angular.translation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diTranslate', diTranslate);\r\n\r\n        diTranslate.$inject = ['diTranslateLink'];\r\n\r\n        function diTranslate(translateLink) {\r\n            return {\r\n                restrict: 'A',\r\n                link: link\r\n            };\r\n\r\n            /**\r\n             * Translates the value given to the directive along with replacing the arguments appropriately.\r\n             */\r\n            function link(scope, element, attrs) {\r\n                translateLink.link(scope, element, attrs);\r\n            }\r\n        }\r\n\r\n        return diTranslate;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/translation/diTranslateDirective.js","//{CODE:CAT0B}\r\n// di.core.angular.translation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.filter('diTranslate', diTranslate);\r\n\r\n        diTranslate.$inject = ['translator'];\r\n\r\n        function diTranslate(translator) {\r\n            return function (input) {\r\n                return translator.instantTranslate(input);\r\n            };\r\n        }\r\n\r\n        return diTranslate;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/translation/diTranslateFilter.js","//{CODE:CAT06}\r\n// di.core.angular.translation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.factory('diTranslateLink', diTranslateLink);\r\n\r\n        diTranslateLink.$inject = ['translator'];\r\n\r\n        function diTranslateLink(translator) {\r\n            return {\r\n                link: link\r\n            };\r\n\r\n            /**\r\n             * Translates the value given to the directive along with replacing the arguments appropriately.\r\n             */\r\n            function link(scope, element, attrs) {\r\n                var languageKey = attrs.diTranslate;\r\n                var args = attrs.translateArguments;\r\n                var targetProperty = attrs.targetProperty;\r\n\r\n                if (languageKey === \"\") {\r\n                    if (element[0].textContent) {\r\n                        languageKey = element[0].textContent;\r\n                    } else if (targetProperty) {\r\n                        languageKey = attrs[targetProperty];\r\n                    }\r\n                }\r\n\r\n                translator.translate(languageKey, args).then(function(translated) {\r\n                    if (targetProperty) {\r\n                        element[0][targetProperty] = translated;\r\n                    } else {\r\n                        if (element[0].nodeName === 'INPUT') {\r\n                            element[0].value = translated;\r\n                        } else {\r\n                            element[0].textContent = translated;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                \r\n\r\n            }\r\n        }\r\n\r\n        return diTranslateLink;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/translation/diTranslateLink.js","//{CODE:CAT08}\r\n// di.core.angular.translation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n        var debug = $di.debug.debugger.newLogger(\"translator\");\r\n\r\n        module.factory('translator', translator);\r\n\r\n        translator.$inject = ['$rootScope', '$translate', '$q'];\r\n\r\n        function translator($rootScope, $translate, $q) {\r\n            var deregisterTranslateChangeStart = $rootScope.$on('$translateChangeStart', translationChanged);\r\n            var deregisterTranslateRefreshStart = $rootScope.$on('$translateRefreshStart', translationChanged);\r\n            var deregisterTranslateChangeSuccess = $rootScope.$on('$translateChangeSuccess', translationLoaded);\r\n\r\n            var translationIsLoaded = false;\r\n            var requests = [];\r\n\r\n            tearDown();\r\n\r\n            return {\r\n                whenReady : whenReady,\r\n                translate: translate,\r\n                instantTranslate: instantTranslate,\r\n                changeLanguage: changeLanguage,\r\n                getCurrentLanguage: getCurrentLanguage\r\n            };\r\n\r\n            /**\r\n           *  Destroy all state, any event listeners and subscriptions\r\n           */\r\n            function tearDown() {\r\n                $rootScope.$on('$destroy', function () {\r\n                    deregisterTranslateChangeStart();\r\n                    deregisterTranslateRefreshStart();\r\n                    deregisterTranslateChangeSuccess();\r\n                });\r\n            }\r\n\r\n            function whenReady() {\r\n                if (translationIsLoaded) {\r\n                    return $q.when();\r\n                }\r\n\r\n                var request = {\r\n                    defferal: $q.defer()\r\n                };\r\n\r\n                requests.push(request);\r\n\r\n                return request.defferal.promise;\r\n            }\r\n\r\n            /**\r\n\t\t\t * Translate a given string while replacing any placeholders in the string with the provided arguments.\r\n\t\t\t * @param stringToTranslate\r\n\t\t\t * @param translationArguments\r\n\t\t\t */\r\n            function translate(stringToTranslate, translationArguments) {\r\n                if (translationIsLoaded) {\r\n                    return $q.when(instantTranslate(stringToTranslate, translationArguments));\r\n                }\r\n                \r\n                var request = {\r\n                    stringToTranslate: stringToTranslate,\r\n                    translationArguments: translationArguments,\r\n                    defferal: $q.defer()\r\n                };\r\n                \r\n                requests.push(request);\r\n                return request.defferal.promise;\r\n            }\r\n            \r\n            function translateMappedArguments(args) {\r\n                return _.each(args, function (value, key) {\r\n                    return args[key] = util.isString(value) ? $translate.instant(value) : value;\r\n                });\r\n            }\r\n\r\n            function translationChanged() {\r\n                translationIsLoaded = false;\r\n            }\r\n\r\n            function translationLoaded() {\r\n                translationIsLoaded = true;               \r\n                _.each(requests, function (request) {\r\n                    if (util.isDefined(request.stringToTranslate)) {\r\n                        var translated = instantTranslate(request.stringToTranslate, request.translationArguments)\r\n                        request.defferal.resolve(translated);\r\n                    } else {\r\n                        request.defferal.resolve();\r\n                    }\r\n                    \r\n                })\r\n\r\n                requests = [];\r\n            }\r\n\r\n            function instantTranslate(stringToTranslate, translationArguments) {                \r\n                var translated = $translate.instant(stringToTranslate);\r\n                var args;\r\n\r\n                if (translationArguments) {\r\n                    if (util.isObject(translationArguments)) {\r\n                        args = translationArguments;\r\n                    } else {\r\n                        args = $di.utility.placeholders.arguments.split(translationArguments);\r\n                    }\r\n\r\n                    translated = $di.utility.placeholders.replace(translated, args, translateMappedArguments);\r\n                }\r\n\r\n                return translated;\r\n            }\r\n\r\n            /**\r\n             * Changes the language resource file used throughout the application.\r\n             * @param prefix\r\n             */\r\n            function changeLanguage(prefix) {\r\n                guard.throwIfNullOrUndefined(\"CAT0807E\", prefix, \"prefix\");\r\n\r\n                $translate.use(prefix);\r\n            }\r\n\r\n            /**\r\n             * Gets the ISO code of the current language being used throughout the application.\r\n             */\r\n            function getCurrentLanguage() {\r\n                return $translate.use();\r\n            }\r\n        }\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/translation/translator.js","//{CODE:CAU02}\r\n// di.core.angular.url\r\ndefine([\r\n\t'./endpoints',\r\n\t'./urlHelper',\r\n\t'./absoluteUrl'\r\n], function (\r\n    endpointsLoader,\r\n\turlHelperLoader,\r\n\tabsoluteUrlLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    endpointsLoader(module);\r\n\t\turlHelperLoader(module);\r\n\t\tabsoluteUrlLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/url/_loader.js","//{CODE:DEF1K}\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.factory('absoluteUrl', absoluteUrl);\r\n\r\n        /*\r\n\t\t * Appends http:// to the start of a URI that does not have a URI scheme (protocol)\r\n\t\t */\r\n        function absoluteUrl() {\r\n\r\n            return {\r\n                isAbsoluteUrl: isAbsoluteUrl\r\n            };\r\n\r\n            function isAbsoluteUrl(input) {\r\n                if (util.isNonEmptyString(input)) {\r\n                    //https://tools.ietf.org/html/rfc3986#appendix-B\r\n                    var uriRegex = /^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/gi;\r\n\r\n                    var capturingGroups = uriRegex.exec(input);\r\n                    // scheme = $2\r\n                    if (util.isArray(capturingGroups) && capturingGroups.length > 2 && util.isDefined(capturingGroups[2])) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            };\r\n        }\r\n\r\n        return absoluteUrl;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/url/absoluteUrl.js","//{CODE:CAU0D}\r\n// di.core.angular.url\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n\r\n        module.provider('endpoints', EndpointsProvider);\r\n\r\n        /**\r\n         * \r\n         */\r\n        function EndpointsProvider() {\r\n            var config = {\r\n                endpoints: {\r\n                    siteOne: 'http://siteone.com',\r\n                    siteTwo: 'http://sitetwo.com'\r\n                },\r\n                defaultEndpoint: 'siteOne'\r\n            };\r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            };\r\n\r\n            provider.$get.$inject = ['urlHelper'];\r\n\r\n            return provider;\r\n\r\n            /**\r\n             * Configure the service\r\n             * @param cfg\r\n             */\r\n            function configure(cfg) {\r\n                guard.throwIfNotAnObject(\"CAH0302E\", cfg, \"cfg\");\r\n                config = cfg;\r\n            }\r\n\r\n            function $get(urlHelper) {\r\n                return {\r\n                    endpointConfig: config,\r\n                    getUrl: getUrl\r\n                };\r\n\r\n                function getUrl(relativeUrl, endpoint) {\r\n                    guard.throwIfEmptyString(\"CAU0D02E\", relativeUrl, \"relativeUrl\");\r\n\r\n                    var endpointUrl = getEndpointUrl(endpoint);\r\n                    var url;\r\n\r\n                    if (!util.isString(endpointUrl)) {\r\n                        if (config.defaultEndpoint) {\r\n                            endpointUrl = getEndpointUrl(config.defaultEndpoint);\r\n                        }\r\n                    }\r\n\r\n                    if (!util.isString(endpointUrl)) {\r\n                        endpointUrl = '';\r\n                    }\r\n\r\n                    url = urlHelper.combine(endpointUrl, relativeUrl);\r\n\r\n                    return url;\r\n                }\r\n\r\n                function getEndpointUrl(endpoint) {\r\n                    var endpointUrl = null;\r\n\r\n                    if (util.isString(endpoint)) {\r\n                        endpointUrl = config.endpoints[endpoint];\r\n\r\n                        if (!util.isString(endpointUrl)) {\r\n                            guard.throwNew(\"CAU0D01E\", \"Invalid endpoint '\" + endpoint + \"'\");\r\n                        }\r\n                    } else {\r\n                        endpointUrl = config.endpoints[config.defaultEndpoint];\r\n                    }\r\n\r\n                    return endpointUrl;\r\n                }\r\n            }\r\n        }\r\n\r\n        return EndpointsProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/url/endpoints.js","//{CODE:CAU07}\r\n// di.core.angular.url\r\ndefine([\r\n    'uri'\r\n], function (URI) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.factory('urlHelper', urlHelper);\r\n\r\n        /**\r\n\t\t * Helper to perform operations with Urls\r\n\t\t */\r\n        function urlHelper() {\r\n            return {\r\n                combine: combine,\r\n                getParameters: getParameters,\r\n                setParameter: setParameter,\r\n                setParameters: setParameters,\r\n\t\t\t\tencodeUriComponent: encodeUriComponent\r\n            };\r\n\r\n            /**\r\n\t\t\t * Combines multiple URL parts together to make a valid URL\r\n\t\t\t */\r\n            function combine() {\r\n                var protocol;\r\n                var urlParts = [];\r\n\r\n                for (var i = 0; i < arguments.length; i++) {\r\n                    var argument = arguments[i];\r\n\r\n                    if (!argument) {\r\n                        continue;\r\n                    }\r\n\r\n                    argument = argument.toString();\r\n\r\n                    if (~argument.indexOf('://') && !protocol) {\r\n                        protocol = argument.split('://')[0];\r\n                        argument = argument.split('://')[1];\r\n                    }\r\n\r\n                    var argumentUrlParts = argument.split('/');\r\n\r\n                    argumentUrlParts.forEach(function (urlPart) {\r\n                        if (urlPart === '..') {\r\n                            urlParts.pop();\r\n                        } else if (urlPart === '.' || urlPart === '') {\r\n                            return;\r\n                        } else {\r\n                            urlParts.push(urlPart);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                var url = urlParts.join('/');\r\n\r\n                if (protocol) {\r\n                    url = protocol + '://' + url;\r\n                }\r\n\r\n                return url;\r\n            }\r\n\r\n            /**\r\n             * Gets the querystring parameters for the given url\r\n             * @param url\r\n             */\r\n            function getParameters(url) {\r\n                var urlParams = new URI(url).search(true);\r\n\r\n                return urlParams;\r\n            }\r\n\r\n            /**\r\n             * Sets a querystring parameter on the given url\r\n             * @param url\r\n             * @param name\r\n             * @param value\r\n             */\r\n            function setParameter(url, name, value) {\r\n                var params = {};\r\n                params[name] = value;\r\n\r\n                url = setParameters(url, params);\r\n\r\n                return url;\r\n            }\r\n\r\n            /**\r\n             * Sets the querystring parameters on the given url\r\n             * @param url\r\n             * @param params\r\n             */\r\n            function setParameters(url, params) {\r\n                var urlObj = new URI(url);\r\n\r\n                urlObj.setSearch(params);\r\n\r\n                url = urlObj.toString();\r\n\r\n                return url;\r\n            }\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which calls the native encodeURIComponent method\r\n\t\t\t * @param value - The value to url encode\r\n\t\t\t * @returns - The url encoded value \r\n\t\t\t */\r\n\t\t\tfunction encodeUriComponent(value) {\r\n\t\t\t\treturn encodeURIComponent(value);\r\n\t\t\t}\r\n        }\r\n\r\n        return urlHelper;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/url/urlHelper.js","// di.core.angular.userSecurity\r\ndefine([\r\n\t'./diChangePasswordDirective',\r\n\t'./diSetPasswordDirective',\r\n\t'./diForgotPasswordDirective',\r\n\t'./changePasswordController',\r\n\t'./setPasswordController',\r\n\t'./forgotPasswordController',\r\n\t'./userSecurityProxy',\r\n\t'./diPasswordPolicyDirective',\r\n\t'./diGetSecurityQuestionDirective',\r\n\t'./diSecurityAnswerDirective',\r\n\t'./diResetPasswordDirective',\r\n\t'./diResetPasswordSuccessDirective'\r\n], function (\r\n\tchangePasswordDirectiveLoader,\r\n\tsetPasswordDirectiveLoader,\r\n\tforgotPasswordDirectiveLoader,\r\n\tchangePasswordController,\r\n\tsetPasswordController,\r\n\tforgotPasswordController,\r\n\tuserSecurityProxy,\r\n    passwordPolicyDirectiveLoader,\r\n\tgetSecurityQuestionDirectiveLoader,\r\n\tsecurityAnswerDirectiveLoader,\r\n\tresetPasswordDirectiveLoader,\r\n\tresetPasswordSuccessDirectiveLoader\r\n\t) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        changePasswordDirectiveLoader(module);\r\n        setPasswordDirectiveLoader(module);\r\n        forgotPasswordDirectiveLoader(module);\r\n        changePasswordController(module);\r\n        setPasswordController(module);\r\n        forgotPasswordController(module);\r\n        userSecurityProxy(module);\r\n        passwordPolicyDirectiveLoader(module);\r\n        getSecurityQuestionDirectiveLoader(module);\r\n        securityAnswerDirectiveLoader(module);\r\n        resetPasswordDirectiveLoader(module);\r\n        resetPasswordSuccessDirectiveLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/_loader.js","//{CODE:CAU08}\r\n// di.core.angular.userSecurity\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.controller('ChangePasswordController', ChangePasswordController);\r\n\r\n        ChangePasswordController.$inject = [\r\n\t\t\t'userSecurityProxy',\r\n\t\t\t'notifier',\r\n\t\t\t'elementNotifier',\r\n\t\t\t'translator',\r\n\t\t\t'$scope',\r\n\t\t    'diState',\r\n\t\t    'authenticationClientEventSubscriber',\r\n            'AUTHENTICATION_RESULT'];\r\n\r\n        function ChangePasswordController(\r\n\t\t\tuserSecurityProxy,\r\n\t\t\tnotifier,\r\n\t\t\telementNotifier,\r\n\t\t\ttranslator,\r\n\t\t\tscope,\r\n            diState,\r\n            authenticationClientEventSubscriber,\r\n            AUTHENTICATION_RESULT) {\r\n            var vm = this;\r\n\r\n            vm.username = '';\r\n            vm.oldPassword = '';\r\n            vm.newPassword = '';\r\n            vm.confirmPassword = '';\r\n            vm.changePassword = changePassword;\r\n\r\n            scope.subscribeToUsernameChange(function (username) {\r\n                vm.username = username;\r\n            });\r\n\r\n            /**\r\n\t\t\t *  Sends a request to the server to change a users password\r\n\t\t\t */\r\n            function changePassword() {\r\n                var promise = userSecurityProxy.changePassword(vm.username, vm.oldPassword, vm.newPassword);\r\n\r\n                promise.then(resolve, reject);\r\n\r\n                function resolve(data) {\r\n                    if (data.success) {\r\n                        translator.translate('CORE.USER_SECURITY.PASSWORD_CHANGED')\r\n                            .then(function(translated) {\r\n                                notifier.success(translated);\r\n                                diState.go('portal.account.management', null, { reload: true });\r\n                            });\r\n                    } else {\r\n                        if (data.passwordValidationMessage) {\r\n                            elementNotifier.error(data.passwordValidationMessage, scope.newPasswordElement);\r\n                        } else {\r\n                            translator.translate('CORE.USER_SECURITY.ERRORS.' + data.failureReason.toUpperCase())\r\n                                .then(function(translated) {\r\n                                    elementNotifier.error(translated, scope.oldPasswordElement);\r\n                                });\r\n                        }\r\n                        if (data.failureReason === AUTHENTICATION_RESULT.AccountLocked\r\n                            || data.failureReason === AUTHENTICATION_RESULT.AccountDisabled) {\r\n                            authenticationClientEventSubscriber.unauthorisedState(data.failureReason);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function reject(error) {\r\n                    translator.translate(error.failureReason)\r\n                        .then(function(translated) {\r\n                            notifier.error(translated);\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        return ChangePasswordController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/changePasswordController.js","//{CODE:CAU09}\r\n//di.core.angular.userSecurity\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diChangePassword', diChangePassword);\r\n\r\n\t\tfunction diChangePassword() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tcontroller: 'ChangePasswordController',\r\n\t\t\t\tcontrollerAs: 'changePasswordCtrl',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tsubscribeToUsernameChange: '='\r\n\t\t\t\t},\r\n\t\t\t\tlink: function (scope, element) {\r\n\t\t\t\t\tscope.oldPasswordElement = element.find('#oldPassword');\r\n\t\t\t\t\tscope.newPasswordElement = element.find('#newPassword');\r\n\t\t\t\t\tscope.confirmPasswordElement = element.find('#confirmPassword');\r\n\r\n\t\t\t\t\tscope.$on('$destroy', function () {\r\n\t\t\t\t\t\tscope.oldPasswordElement = null;\r\n\t\t\t\t\t\tscope.newPasswordElement = null;\r\n\t\t\t\t\t\tscope.confirmPasswordElement = null;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\ttemplate:\r\n'<div\\\r\n\tclass=\"panel panel-primary\">\\\r\n\t<div\\\r\n\t\tclass=\"panel-heading\">\\\r\n\t\t<h3\\\r\n            class=\"form-row-title\"\\\r\n            di-translate=\"CORE.USER_SECURITY.CHANGE_PASSWORD\">Change password</h3>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tclass=\"panel-body\">\\\r\n\t\t<form\\\r\n\t\t\tclass=\"form-horizontal\"\\\r\n\t\t\tdi-validate-model=\"changePassword\">\\\r\n\t\t\t<div\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.CHANGE_PASSWORD_INFO\"></div>\\\r\n\t\t\t<di-password-policy></di-password-policy>\\\r\n\t\t\t<div\\\r\n\t\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t\t<di-input\\\r\n\t\t\t\t\tdi-input-label=\"CORE.USER_SECURITY.OLD_PASSWORD\"\\\r\n\t\t\t\t\tdi-input-type=\"password\"\\\r\n\t\t\t\t\tid=\"oldPassword\"\\\r\n\t\t\t\t\tinput-class=\"form-control input\"\\\r\n\t\t\t\t\tvalidation-property-name=\"oldPassword\"\\\r\n\t\t\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.OLD_PASSWORD\"\\\r\n\t\t\t\t\tng-model=\"changePasswordCtrl\"\\\r\n\t\t\t\t\tng-model-property=\"oldPassword\">\\\r\n\t\t\t\t</di-input>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div\\\r\n\t\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t\t<di-input\\\r\n\t\t\t\t\tdi-input-label=\"CORE.USER_SECURITY.NEW_PASSWORD\"\\\r\n\t\t\t\t\tdi-input-type=\"password\"\\\r\n\t\t\t\t\tid=\"newPassword\"\\\r\n\t\t\t\t\tinput-class=\"form-control input\"\\\r\n\t\t\t\t\tvalidation-property-name=\"newPassword\"\\\r\n\t\t\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.NEW_PASSWORD\"\\\r\n\t\t\t\t\tng-model=\"changePasswordCtrl\"\\\r\n\t\t\t\t\tng-model-property=\"newPassword\">\\\r\n\t\t\t\t</di-input>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div\\\r\n\t\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t\t<di-input\\\r\n\t\t\t\t\tdi-input-label=\"CORE.USER_SECURITY.CONFIRM_PASSWORD\"\\\r\n\t\t\t\t\tdi-input-type=\"password\"\\\r\n\t\t\t\t\tid=\"confirmPassword\"\\\r\n\t\t\t\t\tinput-class=\"form-control input\"\\\r\n\t\t\t\t\tvalidation-property-name=\"confirmPassword\"\\\r\n\t\t\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.CONFIRM_PASSWORD\"\\\r\n\t\t\t\t\tvalidation-model-compare-display-name=\"CORE.USER_SECURITY.CONFIRM_PASSWORDS\"\\\r\n\t\t\t\t\tng-model-options=\"{ updateOn: \\'default blur\\', debounce: {\\'default\\': 1000, \\'blur\\': 0} }\"\\\r\n\t\t\t\t\tng-model=\"changePasswordCtrl\"\\\r\n\t\t\t\t\tng-model-property=\"confirmPassword\"\\\r\n                    validation-message=\"CORE.USER_SECURITY.ERRORS.PASSWORDS_DO_NOT_MATCH\">\\\r\n\t\t\t\t</di-input>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div\\\r\n\t\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t\t<div\\\r\n\t\t\t\t\tclass=\"right\">\\\r\n\t\t\t\t\t<di-button\\\r\n\t\t\t\t\t\tfilled\\\r\n\t\t\t\t\t\ttext=\"CORE.USER_SECURITY.CHANGE_PASSWORD_BUTTON\"\\\r\n\t\t\t\t\t\tvalidate\\\r\n\t\t\t\t\t\taction=\"changePasswordCtrl.changePassword()\">\\\r\n\t\t\t\t\t</di-button>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t</div>\\\r\n\t\t</form>\\\r\n\t</div>\\\r\n</div>'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diChangePassword;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/diChangePasswordDirective.js","//{CODE:CAU0A}\r\n//di.core.angular.userSecurity\r\ndefine(['angular'], function (ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diForgotPassword', diForgotPassword);\r\n\r\n\t\tfunction diForgotPassword() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tcontroller: 'ForgotPasswordController',\r\n\t\t\t\tcontrollerAs: 'forgotPasswordCtrl',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tonPasswordReset: '&?',\r\n\t\t\t\t\tonBackToLoginClick: '&?',\r\n\t\t\t\t\tsubscribeToResetTokenChange: '=',\r\n\t\t\t\t\tonForgotPasswordClick: '&?'\r\n\t\t\t\t},\r\n\t\t\t\tlink: link,\r\n\t\t\t\ttemplate:\r\n'<div\\\r\n\tclass=\"panel panel-primary\">\\\r\n\t<div\\\r\n\t\tclass=\"panel-heading\">\\\r\n\t\t<span\\\r\n\t\t<header>\\\r\n\t\t\t<h1\\\r\n\t\t\t\tclass=\"title\"\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.RESET_PASSWORD\">\\\r\n\t\t\t</h1>\\\r\n\t\t</header>\\\r\n\t\t</span>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tclass=\"panel-body\">\\\r\n\t\t<di-get-security-question\\\r\n\t\t\tng-show=\"forgotPasswordCtrl.isState(forgotPasswordCtrl.EMAIL_ADDRESS_STATE)\">\\\r\n\t\t</di-get-security-question>\\\r\n\t\t<di-security-answer\\\r\n\t\t\tng-show=\"forgotPasswordCtrl.isState(forgotPasswordCtrl.SECURITY_QUESTION_STATE)\">\\\r\n\t\t</di-security-answer>\\\r\n\t\t<di-reset-password\\\r\n\t\t\tng-show=\"forgotPasswordCtrl.isState(forgotPasswordCtrl.RESET_PASSWORD_STATE)\">\\\r\n\t\t</di-reset-password>\\\r\n\t\t<di-reset-password-success\\\r\n\t\t\tng-show=\"forgotPasswordCtrl.isState(forgotPasswordCtrl.RESET_PASSWORD_SUCCESS_STATE)\">\\\r\n\t\t</di-reset-password-sucess>\\\r\n\t</div>\\\r\n\t<div\\\r\n        class=\"processing\"\\\r\n        id=\"spinnerHolder\">\\\r\n    </div>\\\r\n</div>'\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope) {\r\n\t\t\t\tscope.showhHideControl = showhHideControl;\r\n\t\t\t\tscope.findElementById = findElementById;\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * shows or hides control by id                 \r\n\t\t\t\t */\r\n\t\t\t\tfunction showhHideControl(id, show) {\r\n\t\t\t\t\tvar element = findElementById(id);\r\n\t\t\t\t\tif (element) {\r\n\t\t\t\t\t\tif (show) {\r\n\t\t\t\t\t\t\telement.removeClass(\"buttons-hidden\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telement.addClass(\"buttons-hidden\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * finds element by id                \r\n\t\t\t\t */\r\n\t\t\t\tfunction findElementById(id) {\r\n\t\t\t\t\treturn ng.element(ng.element.find('#' + id));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diForgotPassword;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/diForgotPasswordDirective.js","//di.core.angular.userSecurity\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diGetSecurityQuestion', diGetSecurityQuestion);\r\n\r\n\t\tfunction diGetSecurityQuestion() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\trequire: '^diForgotPassword',\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tlink: function (scope, element) {\r\n\t\t\t\t\tscope.emailAddressElement = element.find('#emailAddress');\r\n\r\n\t\t\t\t\tscope.$on('$destroy', function () {\r\n\t\t\t\t\t\tscope.emailAddressElement = null;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\ttemplate:\r\n'<form\\\r\n\tdi-validate-model=\"forgotPasswordEmail\">\\\r\n\t<div\\\r\n\t\tdi-translate=\"CORE.USER_SECURITY.FORGOT_PASSWORD_INFO\"></div>\\\r\n\t<br/>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\">\\\r\n\t\t<di-input\\\r\n\t\t\tdi-input-label=\"CORE.USER_SECURITY.EMAIL\"\\\r\n\t\t\tdi-input-type=\"email\"\\\r\n\t\t\tid=\"emailAddress\"\\\r\n\t\t\tinput-class=\"input form-control\"\\\r\n\t\t\tvalidation-property-name=\"emailAddress\"\\\r\n\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.EMAIL\"\\\r\n\t\t\tng-model-options=\"{ updateOn: \\'default blur\\', debounce: {\\'default\\': 1000, \\'blur\\': 0} }\"\\\r\n\t\t\tdi-enter=\"forgotPasswordCtrl.getSecurityQuestion()\"\\\r\n\t\t\tdi-enter-skip-validation=\"false\"\\\r\n\t\t\tng-model=\"forgotPasswordCtrl\"\\\r\n\t\t\tng-model-property=\"emailAddress\">\\\r\n\t\t</di-input>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\">\\\r\n\t\t<button\\\r\n\t\t\tid=\"securityQuestionButton\"\\\r\n\t\t\tng-if=\"!forgotPasswordCtrl.processing\"\\\r\n\t\t\tclass=\"btn btn-success center\"\\\r\n\t\t\tdi-translate=\"CORE.USER_SECURITY.CONTINUE\"\\\r\n\t\t\tdi-validate-click=\"forgotPasswordCtrl.getSecurityQuestion()\"></button>\\\r\n\t\t<button\\\r\n\t\t\tng-if=\"forgotPasswordCtrl.processing\"\\\r\n\t\t\tid=\"securityQuestionButtonProcessing\"\\\r\n\t\t\tclass=\"btn-processing buttons-hidden\"\\\r\n\t\t\tdi-translate=\"CORE.USER_SECURITY.CONTINUE\"\\\r\n\t\t\tdisabled\"></button>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\">\\\r\n\t\t<a\\\r\n\t\t\thref=\"\"\\\r\n\t\t\tng-click=\"forgotPasswordCtrl.backToLogin()\"\\\r\n\t\t\tclass=\"left\"\\\r\n\t\t\tdi-translate=\"CORE.USER_SECURITY.BACK_TO_LOGIN\">\\\r\n\t\t</a>\\\r\n\t</div>\\\r\n</form>'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diGetSecurityQuestion;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/diGetSecurityQuestionDirective.js","//{CODE:CAU0K}\r\n//di.core.angular.userSecurity\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diPasswordPolicy', diPasswordPolicy);\r\n\r\n        function diPasswordPolicy() {\r\n            return {\r\n                restrict: 'E',\r\n                template:\r\n'<div>\\\r\n    <br />\\\r\n    <div\\\r\n\t    di-translate=\"CORE.USER_SECURITY.SET_PASSWORD_INFO_DETAILS.HEADER\"></div>\\\r\n    <ul>\\\r\n\t    <li\\\r\n            di-translate=\"CORE.USER_SECURITY.SET_PASSWORD_INFO_DETAILS.RULES.1\"></li>\\\r\n\t    <li\\\r\n            di-translate=\"CORE.USER_SECURITY.SET_PASSWORD_INFO_DETAILS.RULES.2\"></li>\\\r\n\t    <li\\\r\n            di-translate=\"CORE.USER_SECURITY.SET_PASSWORD_INFO_DETAILS.RULES.3\"></li>\\\r\n\t    <li\\\r\n            di-translate=\"CORE.USER_SECURITY.SET_PASSWORD_INFO_DETAILS.RULES.4\"></li>\\\r\n\t    <li\\\r\n            di-translate=\"CORE.USER_SECURITY.SET_PASSWORD_INFO_DETAILS.RULES.5\"></li>\\\r\n    </ul>\\\r\n</div>'\r\n            };\r\n        }\r\n\r\n        return diPasswordPolicy;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/diPasswordPolicyDirective.js","//di.core.angular.userSecurity\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diResetPassword', diResetPassword);\r\n\r\n\t\tfunction diResetPassword() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\trequire: '^diForgotPassword',\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tlink: function (scope, element) {\r\n\t\t\t\t\tscope.resetTokenElement = element.find('#resetToken');\r\n\t\t\t\t\tscope.newPasswordElement = element.find('#newPassword');\r\n\t\t\t\t\tscope.confirmPasswordElement = element.find('#confirmPassword');\r\n\r\n\t\t\t\t\tscope.$on('$destroy', function () {\r\n\t\t\t\t\t\tscope.resetTokenElement = null;\r\n\t\t\t\t\t\tscope.newPasswordElement = null;\r\n\t\t\t\t\t\tscope.confirmPasswordElement = null;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\ttemplate:\r\n'<form\\\r\n\tclass=\"form-horizontal\"\\\r\n\tdi-validate-model=\"resetPassword\">\\\r\n\t<di-password-policy></di-password-policy>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\" style=\"display:none\">\\\r\n\t\t<di-input\\\r\n\t\t\tdi-input-label=\"CORE.USER_SECURITY.RESET_CODE\"\\\r\n\t\t\tdi-input-type=\"text\"\\\r\n\t\t\tid=\"resetToken\"\\\r\n\t\t\tinput-class=\"form-control input\"\\\r\n\t\t\tvalidation-property-name=\"resetToken\"\\\r\n\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.RESET_CODE\"\\\r\n\t\t\tng-model=\"forgotPasswordCtrl\"\\\r\n\t\t\tng-model-property=\"resetToken\">\\\r\n\t\t</di-input>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\">\\\r\n\t\t<di-input\\\r\n\t\t\tdi-input-label=\"CORE.USER_SECURITY.NEW_PASSWORD\"\\\r\n\t\t\tdi-input-type=\"password\"\\\r\n\t\t\tid=\"newPassword\"\\\r\n\t\t\tinput-class=\"form-control input\"\\\r\n\t\t\tvalidation-property-name=\"newPassword\"\\\r\n\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.NEW_PASSWORD\"\\\r\n\t\t\tng-model=\"forgotPasswordCtrl\"\\\r\n\t\t\tng-model-property=\"newPassword\">\\\r\n\t\t</di-input>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\">\\\r\n\t\t<di-input\\\r\n\t\t\tdi-input-label=\"CORE.USER_SECURITY.CONFIRM_PASSWORD\"\\\r\n\t\t\tdi-input-type=\"password\"\\\r\n\t\t\tid=\"confirmPassword\"\\\r\n\t\t\tinput-class=\"form-control input\"\\\r\n\t\t\tvalidation-property-name=\"confirmPassword\"\\\r\n\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.CONFIRM_PASSWORD\"\\\r\n\t\t\tvalidation-model-compare-display-name=\"CORE.USER_SECURITY.CONFIRM_PASSWORDS\"\\\r\n\t\t\tng-model-options=\"{ updateOn: \\'default blur\\', debounce: {\\'default\\': 1000, \\'blur\\': 0} }\"\\\r\n\t\t\tng-model=\"forgotPasswordCtrl\"\\\r\n\t\t\tng-model-property=\"confirmPassword\"\\\r\n\t\t\tvalidation-message=\"CORE.USER_SECURITY.ERRORS.PASSWORDS_DO_NOT_MATCH\">\\\r\n\t\t</di-input>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\">\\\r\n\t\t<button\\\r\n\t\t\tid=\"resetPasswordButton\"\\\r\n\t\t\tclass=\"btn btn-success center\"\\\r\n\t\t\tdi-translate=\"CORE.USER_SECURITY.RESET_PASSWORD\"\\\r\n\t\t\tdi-validate-click=\"forgotPasswordCtrl.resetPassword()\"></button>\\\r\n\t\t\t<button\\\r\n\t\t\tid=\"resetPasswordButtonProcessing\"\\\r\n\t\t\tclass=\"btn-processing buttons-hidden\"\\\r\n\t\t\tdi-translate=\"CORE.USER_SECURITY.RESET_PASSWORD\"\\\r\n\t\t\tdisabled\"></button>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\">\\\r\n\t\t<a\\\r\n\t\t\thref=\"\"\\\r\n\t\t\tng-click=\"forgotPasswordCtrl.backToLogin()\"\\\r\n\t\t\tclass=\"left\"\\\r\n\t\t\tdi-translate=\"CORE.USER_SECURITY.BACK_TO_LOGIN\">\\\r\n\t\t</a>\\\r\n\t</div>\\\r\n</form>'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diResetPassword;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/diResetPasswordDirective.js","//di.core.angular.userSecurity\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diResetPasswordSuccess', diResetPasswordSuccess);\r\n\r\n\t\tfunction diResetPasswordSuccess() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\ttemplate:\r\n'<form\\\r\n\tclass=\"form-horizontal\">\\\r\n\t<div\\\r\n\t\tdi-translate=\"CORE.USER_SECURITY.RESET_PASSWORD_SUCCESS\">\\\r\n\t</div>\\\r\n\t</br>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\">\\\r\n\t\t<a\\\r\n\t\t\thref=\"\"\\\r\n\t\t\tng-click=\"forgotPasswordCtrl.backToLogin()\"\\\r\n\t\t\tclass=\"left\"\\\r\n\t\t\tdi-translate=\"CORE.USER_SECURITY.BACK_TO_LOGIN\">\\\r\n\t\t</a>\\\r\n\t</div>\\\r\n</form>'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diResetPasswordSuccess;\r\n\t}\r\n})\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/diResetPasswordSuccessDirective.js","//di.core.angular.userSecurity\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diSecurityAnswer', diSecurityAnswer);\r\n\r\n\t\tfunction diSecurityAnswer() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\trequire: '^diForgotPassword',\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tlink: function (scope, element) {\r\n\t\t\t\t\tscope.securityAnswerElement = element.find('#securityAnswer');\r\n\r\n\t\t\t\t\tscope.$on('$destroy', function () {\r\n\t\t\t\t\t\tscope.securityAnswerElement = null;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\ttemplate:\r\n'<form\\\r\n\tclass=\"form-horizontal\"\\\r\n\tdi-validate-model=\"forgotPasswordSecurity\">\\\r\n\t<div\\\r\n\t\tdi-translate=\"CORE.USER_SECURITY.SECURITY_QUESTION_INFO\"></div>\\\r\n\t<br/>\\\r\n\t<div\\\r\n\t\t<b\\\r\n\t\t\tng-bind=\"forgotPasswordCtrl.securityQuestion\"></b>\\\r\n\t</div>\\\r\n\t<br/>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\">\\\r\n\t\t<di-input\\\r\n\t\t\tdi-input-label=\"CORE.USER_SECURITY.ANSWER\"\\\r\n\t\t\tdi-input-type=\"password\"\\\r\n\t\t\tid=\"securityAnswer\"\\\r\n\t\t\tinput-class=\"form-control input\"\\\r\n\t\t\tvalidation-property-name=\"securityAnswer\"\\\r\n\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.SECURITY_ANSWER\"\\\r\n\t\t\tng-model=\"forgotPasswordCtrl\"\\\r\n\t\t\tng-model-property=\"securityAnswer\">\\\r\n\t\t</di-input>\\\r\n\t<br/>\\\r\n\t</div>\\\r\n    <br/>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\">\\\r\n\t\t<button\\\r\n\t\t\tid=\"requestPasswordResetButton\"\\\r\n\t\t\tclass=\"btn btn-success center\"\\\r\n\t\t\tdi-translate=\"CORE.USER_SECURITY.SEND_EMAIL\"\\\r\n\t\t\tdi-validate-click=\"forgotPasswordCtrl.requestPasswordReset()\"></button>\\\r\n\t\t<button\\\r\n\t\t\tid=\"requestPasswordResetButtonProcessing\"\\\r\n\t\t\tclass=\"btn-processing buttons-hidden\"\\\r\n\t\t\tdi-translate=\"CORE.USER_SECURITY.SEND_EMAIL\"\\\r\n\t\t\tdisabled\"></button>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tclass=\"form-group form-row\">\\\r\n\t\t<a\\\r\n\t\t\thref=\"\"\\\r\n\t\t\tng-click=\"forgotPasswordCtrl.backToLogin()\"\\\r\n\t\t\tclass=\"left\"\\\r\n\t\t\tdi-translate=\"CORE.USER_SECURITY.BACK_TO_LOGIN\">\\\r\n\t\t</a>\\\r\n\t</div>\\\r\n</form>'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diSecurityAnswer;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/diSecurityAnswerDirective.js","//{CODE:CAU0J}\r\n//di.core.angular.userSecurity\r\ndefine(['angular'], function (ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diSetPassword', diSetPassword);\r\n\r\n\t\tfunction diSetPassword() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tcontroller: 'SetPasswordController',\r\n\t\t\t\tcontrollerAs: 'setPasswordCtrl',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tonBackToLogin: '&?',\r\n\t\t\t\t\tonPasswordReset: '=',\r\n\t\t\t\t\tsubscribeToUsernameChange: '=',\r\n\t\t\t\t\tsetPassword: '='\r\n\t\t\t\t},\r\n\t\t\t\tlink: function (scope, element) {\r\n\t\t\t\t\tscope.userNameElement = element.find('#userName');\r\n\t\t\t\t\tscope.tokenElement = element.find('#token');\r\n\t\t\t\t\tscope.newPasswordElement = element.find('#newPassword');\r\n\t\t\t\t\tscope.confirmPasswordElement = element.find('#confirmPassword');\r\n\t\t\t\t\t\r\n\t\t\t\t\tscope.$on('$destroy', function () {\r\n\t\t\t\t\t\tscope.userNameElement = null;\r\n\t\t\t\t\t\tscope.tokenElement = null;\r\n\t\t\t\t\t\tscope.newPasswordElement = null;\r\n\t\t\t\t\t\tscope.confirmPasswordElement = null;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tscope.findElement = findElement;\r\n\r\n\t\t\t\t\tscope.showhHideControl = showhHideControl;\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * finds element by name                \r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction findElement(name) {\r\n\t\t\t\t\t\treturn ng.element(name);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * shows or hides control by id                 \r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction showhHideControl(id, show) {\r\n\t\t\t\t\t\tvar element = findElementById(id);\r\n\t\t\t\t\t\tif (element) {\r\n\t\t\t\t\t\t\tif (show) {\r\n\t\t\t\t\t\t\t\telement.removeClass(\"buttons-hidden\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\telement.addClass(\"buttons-hidden\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * finds element by id                \r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction findElementById(id) {\r\n\t\t\t\t\t\treturn ng.element(ng.element.find('#' + id));\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t},\r\n\t\t\t\ttemplate:\r\n'<div\\\r\n\tclass=\"panel panel-primary\">\\\r\n\t<div\\\r\n\t\tclass=\"panel-heading\">\\\r\n\t\t<span\\\r\n\t\t<header>\\\r\n\t\t\t<h1\\\r\n\t\t\t\tclass=\"title\"\\\r\n\t\t\t\tng-if=\"setPasswordCtrl.passwordExpired\"\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.PASSWORD_EXPIRED\">\\\r\n\t\t\t</h1>\\\r\n\t\t\t<h1\\\r\n\t\t\t\tclass=\"title\"\\\r\n\t\t\t\tng-if=\"!setPasswordCtrl.passwordExpired\"\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.FIRST_TIME_LOGIN\">\\\r\n\t\t\t</h1>\\\r\n\t\t</header>\\\r\n\t\t</span>\\\r\n\t</div>\\\r\n\t<div\\\r\n\t\tclass=\"panel-body\">\\\r\n\t\t<form\\\r\n\t\t\tclass=\"form-horizontal\"\\\r\n\t\t\tdi-validate-model=\"{{setPasswordCtrl.validationModel}}\">\\\r\n\t\t\t<div\\\r\n\t\t\t\tng-if=\"!setPasswordCtrl.passwordExpired\"\\\r\n\t\t\t\tclass=\"panel-heading\">\\\r\n\t\t\t\t<h3\\\r\n\t\t\t\t\tclass=\"form-row-title\"\\\r\n\t\t\t\t\tdi-translate=\"CORE.USER_SECURITY.SET_NEW_PASSWORD\">Set new password</h3>\\\r\n\t\t\t\t<div\\\r\n\t\t\t\t\tclass=\"form-group form-row\"\\\r\n\t\t\t\t\tdi-translate=\"CORE.USER_SECURITY.SET_PASSWORD_INFO\">\\\r\n\t\t\t\t</div>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div\\\r\n\t\t\t\tng-if=\"setPasswordCtrl.passwordExpired\"\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.PASSWORD_EXPIRED_INFO\">\\\r\n\t\t\t</div>\\\r\n\t\t\t<di-password-policy></di-password-policy>\\\r\n\t\t\t<br/>\\\r\n\t\t\t<input\\\r\n\t\t\t\ttype=\"hidden\"\\\r\n\t\t\t\tid=\"userName\"\\\r\n\t\t\t\tclass=\"form-control input\"\\\r\n\t\t\t\tng-model=\"setPasswordCtrl.userName\"/>\\\r\n\t\t\t<input\\\r\n\t\t\t\ttype=\"hidden\"\\\r\n\t\t\t\tid=\"token\"\\\r\n\t\t\t\tclass=\"form-control input\"\\\r\n\t\t\t\tng-model=\"setPasswordCtrl.token\"/>\\\r\n\t\t\t<div\\\r\n\t\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t\t<di-input\\\r\n\t\t\t\t\tdi-input-label=\"CORE.USER_SECURITY.NEW_PASSWORD\"\\\r\n\t\t\t\t\tdi-input-type=\"password\"\\\r\n\t\t\t\t\tid=\"newPassword\"\\\r\n\t\t\t\t\tinput-class=\"form-control input\"\\\r\n\t\t\t\t\tvalidation-property-name=\"newPassword\"\\\r\n\t\t\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.NEW_PASSWORD\"\\\r\n\t\t\t\t\tng-model=\"setPasswordCtrl\"\\\r\n\t\t\t\t\tng-model-property=\"newPassword\">\\\r\n\t\t\t\t</di-input>\\\r\n\t\t\t</div>\\\r\n\t\t<div\\\r\n\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t<di-input\\\r\n\t\t\t\tdi-input-label=\"CORE.USER_SECURITY.CONFIRM_PASSWORD\"\\\r\n\t\t\t\tdi-input-type=\"password\"\\\r\n\t\t\t\tid=\"confirmPassword\"\\\r\n\t\t\t\tinput-class=\"form-control input\"\\\r\n\t\t\t\tvalidation-property-name=\"confirmPassword\"\\\r\n\t\t\t\tng-model-options=\"{ updateOn: \\'default blur\\', debounce: {\\'default\\': 1000, \\'blur\\': 0} }\"\\\r\n\t\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.CONFIRM_PASSWORD\"\\\r\n\t\t\t\tvalidation-model-compare-display-name=\"CORE.USER_SECURITY.CONFIRM_PASSWORDS\"\\\r\n\t\t\t\tng-model=\"setPasswordCtrl\"\\\r\n\t\t\t\tng-model-property=\"confirmPassword\"\\\r\n\t\t\t\tvalidation-message=\"CORE.USER_SECURITY.ERRORS.PASSWORDS_DO_NOT_MATCH\">\\\r\n\t\t\t</di-input>\\\r\n\t\t</div>\\\r\n\t\t<div\\\r\n\t\t\tclass=\"form-group form-row\">\\\r\n\t\t</div>\\\r\n\t\t<div\\\r\n\t\t\tng-if=\"!setPasswordCtrl.passwordExpired\"\\\r\n\t\t\tclass=\"panel-heading\">\\\r\n\t\t\t<h3\\\r\n\t\t\t\tclass=\"form-row-title\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.SECURITY_QUESTION\">Security questions</h3>\\\r\n\t\t\t<div\\\r\n\t\t\t\tclass=\"form-group form-row\"\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.SET_SECURITY_QUESTION_INFO\">\\\r\n\t\t\t</div>\\\r\n\t\t\t<br />\\\r\n\t\t</div>\\\r\n\t\t<div\\\r\n\t\t\tng-if=\"!setPasswordCtrl.passwordExpired\"\\\r\n\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t<div\\\r\n\t\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t\t<label\\\r\n\t\t\t\t\tclass=\"form-row-label\"\\\r\n\t\t\t\t\tdi-translate=\"CORE.USER_SECURITY.SECURITY_QUESTION\"></label>\\\r\n\t\t\t\t<di-select\\\r\n\t\t\t\t\tmode=\"dropdown\"\\\r\n\t\t\t\t\titems=\"setPasswordCtrl.securityQuestions\"\\\r\n\t\t\t\t\titem-unique-property=\"id\"\\\r\n\t\t\t\t\tbind-to-object=\"setPasswordCtrl\"\\\r\n\t\t\t\t\tbind-to-property=\"securityQuestion\"\\\r\n\t\t\t\t\tdisplay-property=\"question\"\\\r\n\t\t\t\t\tdi-validate=\"securityQuestion\"\\\r\n\t\t\t\t\tvalidation-model=\"setPasswordCtrl.securityQuestion\"\\\r\n\t\t\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.SECURITY_QUESTION\"\\\r\n\t\t\t\t\twatch-binding=\"true\">\\\r\n\t\t\t\t\t{{::filteredItem.item.question}}\\\r\n\t\t\t\t</di-select>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div\\\r\n\t\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t\t<label\\\r\n\t\t\t\t\tclass=\"form-row-label\"\\\r\n\t\t\t\t\tdi-translate=\"CORE.USER_SECURITY.SECURITY_ANSWER\"></label>\\\r\n\t\t\t\t<input\\\r\n\t\t\t\t\tid=\"securityAnswer\"\\\r\n\t\t\t\t\ttype=\"password\"\\\r\n\t\t\t\t\tclass=\"form-control input\"\\\r\n\t\t\t\t\tdi-validate=\"securityAnswer\"\\\r\n\t\t\t\t\tvalidation-model-display-name=\"CORE.USER_SECURITY.SECURITY_ANSWER\"\\\r\n\t\t\t\t\tng-model=\"setPasswordCtrl.securityAnswer\" />\\\r\n\t\t\t</div>\\\r\n\t\t</div>\\\r\n\t\t<div\\\r\n\t\t\tng-if=\"setPasswordCtrl.passwordExpired\"\\\r\n\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t<button\\\r\n\t\t\t\tid=\"setPasswordButton\"\\\r\n\t\t\t\tclass=\"btn btn-success center\"\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.SET_PASSWORD\"\\\r\n\t\t\t\tdi-validate-click=\"setPasswordCtrl.setPassword()\"></button>\\\r\n\t\t\t<button\\\r\n\t\t\t\tid=\"setPasswordButtonProcessing\"\\\r\n\t\t\t\tclass=\"btn-processing buttons-hidden\"\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.SET_PASSWORD\"\\\r\n\t\t\t\tdisabled\"></button>\\\r\n\t\t</div>\\\r\n\t\t<div\\\r\n\t\t\tng-if=\"!setPasswordCtrl.passwordExpired\"\\\r\n\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t<button\\\r\n\t\t\t\tid=\"setPasswordQuestionButton\"\\\r\n\t\t\t\tclass=\"btn btn-success center\"\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.SET_PASSWORD_AND_SECURITY\"\\\r\n\t\t\t\tdi-validate-click=\"setPasswordCtrl.setPasswordAndQuestion()\"></button>\\\r\n\t\t\t<button\\\r\n\t\t\t\tid=\"setPasswordQuestionButtonProcessing\"\\\r\n\t\t\t\tclass=\"btn-processing buttons-hidden\"\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.SET_PASSWORD_AND_SECURITY\"\\\r\n\t\t\t\tdisabled\"></button>\\\r\n\t\t</div>\\\r\n\t\t<div\\\r\n\t\t\tclass=\"form-group form-row\">\\\r\n\t\t\t<a\\\r\n\t\t\t\thref=\"\"\\\r\n\t\t\t\tng-click=\"setPasswordCtrl.backToLogin()\"\\\r\n\t\t\t\tclass=\"left\"\\\r\n\t\t\t\tdi-translate=\"CORE.USER_SECURITY.BACK_TO_LOGIN\">\\\r\n\t\t\t</a>\\\r\n\t\t</div>\\\r\n\t</form>\\\r\n\t<div\\\r\n\t\tclass=\"processing\"\\\r\n\t\tid=\"spinnerHolder\">\\\r\n\t</div>\\\r\n</div>'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diSetPassword;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/diSetPasswordDirective.js","//{CODE:CAU0B}\r\n// di.core.angular.userSecurity\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.controller('ForgotPasswordController', ForgotPasswordController);\r\n\r\n\t\tForgotPasswordController.$inject = [\r\n\t\t\t'userSecurityProxy',\r\n\t\t\t'notifier',\r\n\t\t\t'elementNotifier',\r\n\t\t\t'translator',\r\n\t\t\t'$scope',\r\n\t\t\t'modalSpinner',\r\n\t\t\t'AUTHENTICATION_RESULT',\r\n            'promptWindow'\r\n\t\t];\r\n\r\n\t\tfunction ForgotPasswordController(\r\n\t\t\tuserSecurityProxy,\r\n\t\t\tnotifier,\r\n\t\t\telementNotifier,\r\n\t\t\ttranslator,\r\n\t\t\tscope,\r\n\t\t\tmodalSpinner,\r\n\t\t\tAUTHENTICATION_RESULT,\r\n            promptWindow) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvar spinner;\r\n\r\n\t\t\tvm.EMAIL_ADDRESS_STATE = 0;\r\n\t\t\tvm.SECURITY_QUESTION_STATE = 1;\r\n\t\t\tvm.RESET_PASSWORD_STATE = 2;\r\n\t\t\tvm.RESET_PASSWORD_SUCCESS_STATE = 3;\r\n\r\n\t\t\tvm.currentState = vm.EMAIL_ADDRESS_STATE;\r\n\t\t\tvm.emailAddress = '';\r\n\t\t\tvm.securityQuestion = '';\r\n\t\t\tvm.securityAnswer = '';\r\n\t\t\tvm.resetToken = '';\r\n\t\t\tvm.newPassword = '';\r\n\t\t\tvm.confirmPassword = '';\r\n\t\t\tvm.setResetToken = setResetToken;\r\n\t\t\tvm.isState = isState;\r\n\t\t\tvm.requestPasswordReset = requestPasswordReset;\r\n\t\t\tvm.getSecurityQuestion = getSecurityQuestion;\r\n\t\t\tvm.resetPassword = resetPassword;\r\n\t\t\tvm.forgotPassword = forgotPassword;\r\n\t\t\tvm.backToLogin = backToLogin;\r\n\r\n\t\t\tscope.subscribeToResetTokenChange(setResetToken);\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for forgot password link click\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction forgotPassword() {\r\n\t\t\t\tif (scope.onForgotPasswordClick) {\r\n\t\t\t\t\tscope.onForgotPasswordClick();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for back to login click\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction backToLogin() {\r\n\t\t\t\tif (scope.onBackToLoginClick) {\r\n\t\t\t\t\tscope.onBackToLoginClick();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Checks to see if a given state is the current state\r\n\t\t\t */\r\n\t\t\tfunction isState(state) {\r\n\t\t\t\treturn vm.currentState === state;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Sets the reset token against the view\r\n\t\t\t */\r\n\t\t\tfunction setResetToken(resetToken) {\r\n\t\t\t\tvm.resetToken = resetToken;\r\n\r\n\t\t\t\tif (vm.resetToken) {\r\n\t\t\t\t\tvm.currentState = vm.RESET_PASSWORD_STATE;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvm.currentState = vm.EMAIL_ADDRESS_STATE;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets the users security question from the server through the proxy\r\n\t\t\t */\r\n\t\t\tfunction getSecurityQuestion() {\r\n\t\t\t\tstartStopProcessing('securityQuestionButton', 'securityQuestionButtonProcessing');\r\n\r\n\t\t\t\tuserSecurityProxy.getSecurityQuestion(vm.emailAddress)\r\n\t\t\t\t\t.then(resolve, reject);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\tstartStopProcessing('securityQuestionButton', 'securityQuestionButtonProcessing', false);\r\n\r\n\t\t\t\t\tif (data.success) {\r\n\t\t\t\t\t\tvm.securityQuestion = data.securityQuestion;\r\n\r\n\t\t\t\t\t\tvm.currentState = vm.SECURITY_QUESTION_STATE;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t    if (data.failureReason !== AUTHENTICATION_RESULT.InvalidUsername) {\r\n\t\t\t\t\t        translator.translate('CORE.USER_SECURITY.ERRORS.' + data.failureReason.toUpperCase())\r\n\t\t\t\t\t            .then(function(translated) {\r\n\t\t\t\t\t                elementNotifier.error(\r\n\t\t\t\t\t                    translated,\r\n\t\t\t\t\t                    scope.emailAddressElement);\r\n\t\t\t\t\t            });\r\n\t\t\t\t\t    } else {\r\n\t\t\t\t\t        vm.currentState = vm.RESET_PASSWORD_SUCCESS_STATE;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t\tstartStopProcessing('requestPasswordResetButton', 'requestPasswordResetButtonProcessing', false);\r\n\r\n\t\t\t\t\tif (error.failureReason === AUTHENTICATION_RESULT.ServerDown) {\r\n\t\t\t\t\t    translator.translate(\"CORE.AUTHENTICATION.ERRORS.\" + error.failureReason.toUpperCase())\r\n\t\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t\t            notifier.error(translated);\r\n\t\t\t\t\t        });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvm.currentState = vm.RESET_PASSWORD_SUCCESS_STATE;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Sends a HTTP post request to the server to send an email with password reminder.\r\n\t\t\t */\r\n\t\t\tfunction requestPasswordReset() {\r\n\t\t\t\tstartStopProcessing('requestPasswordResetButton', 'requestPasswordResetButtonProcessing');\r\n\r\n\t\t\t\tvar promise = userSecurityProxy.requestPasswordReset(vm.emailAddress, vm.securityAnswer);\r\n\r\n\t\t\t\tpromise.then(resolve, reject);\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\tstartStopProcessing('requestPasswordResetButton', 'requestPasswordResetButtonProcessing', false);\r\n\t\t\t\t\tif (data.success) {\r\n\t\t\t\t\t    promptWindow.alert({ title: 'CORE.USER_SECURITY.FORGOT_PASSWORD', message: 'CORE.USER_SECURITY.RESET_PASSWORD_SUCCESS' });\r\n\t\t\t\t\t    backToLogin();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t    translator.translate('CORE.USER_SECURITY.ERRORS.' + data.failureReason.toUpperCase())\r\n\t\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t\t            elementNotifier.error(\r\n\t\t\t\t\t                translated,\r\n\t\t\t\t\t                scope.securityAnswerElement);\r\n\t\t\t\t\t        });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t    startStopProcessing('requestPasswordResetButton', 'requestPasswordResetButtonProcessing', false);\r\n\t\t\t\t    translator.translate(error.failureReason)\r\n\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t            notifier.error(translated);\r\n\t\t\t\t        });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t *  Sends a request to the server to reset a users password\r\n\t\t\t */\r\n\t\t\tfunction resetPassword() {\r\n\t\t\t\tstartStopProcessing('resetPasswordButton', 'resetPasswordButtonProcessing');\r\n\r\n\t\t\t\tvar promise = userSecurityProxy.resetPassword(vm.resetToken, vm.newPassword);\r\n\r\n\t\t\t\tpromise.then(resolve, reject);\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\tstartStopProcessing('resetPasswordButton', 'resetPasswordButtonProcessing', false);\r\n\t\t\t\t\tif (data.success) {\r\n\t\t\t\t\t    translator.translate('CORE.USER_SECURITY.PASSWORD_RESET')\r\n\t\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t\t            notifier.success(translated);\r\n\t\t\t\t\t        });\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvm.resetToken = '';\r\n\t\t\t\t\t\tvm.newPassword = '';\r\n\t\t\t\t\t\tvm.confirmPassword = '';\r\n\r\n\t\t\t\t\t\tvm.currentState = vm.EMAIL_ADDRESS_STATE;\r\n\t\t\t\t\t\tif (scope.onPasswordReset) {\r\n\t\t\t\t\t\t\tscope.onPasswordReset();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t    if (data.passwordValidationMessage) {\r\n\t\t\t\t\t\t\telementNotifier.error(data.passwordValidationMessage, scope.newPasswordElement);\r\n\t\t\t\t\t    } else {\r\n\t\t\t\t\t        translator.translate('CORE.USER_SECURITY.ERRORS.' + data.failureReason.toUpperCase())\r\n\t\t\t\t\t            .then(function(translated) {\r\n\t\t\t\t\t                elementNotifier.error(\r\n\t\t\t\t\t                    translated,\r\n\t\t\t\t\t                    scope.resetTokenElement);\r\n\t\t\t\t\t            });\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t    startStopProcessing('resetPasswordButton', 'resetPasswordButtonProcessing', false);\r\n\t\t\t\t    translator.translate(error.failureReason)\r\n\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t            notifier.error(translated);\r\n\t\t\t\t        });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * hides or shows action buttons            \r\n\t\t\t */\r\n\t\t\tfunction startStopProcessing(buttonActive, buttonInactive, startOrStop) {\r\n\t\t\t\tif (startOrStop !== false) {\r\n\t\t\t\t\tshowSpinner();\r\n\t\t\t\t\tif (scope.showhHideControl) {\r\n\t\t\t\t\t\tscope.showhHideControl(buttonActive, false);\r\n\t\t\t\t\t\tscope.showhHideControl(buttonInactive, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t\tif (scope.showhHideControl) {\r\n\t\t\t\t\t\tscope.showhHideControl(buttonActive, true);\r\n\t\t\t\t\t\tscope.showhHideControl(buttonInactive, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Adds spinner to the page\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction showSpinner() {\r\n\t\t\t\tvar opts = {\r\n\t\t\t\t\tlength: 19,\r\n\t\t\t\t\twidth: 14,\r\n\t\t\t\t\tradius: 42,\r\n\t\t\t\t\tscale: 0.25,\r\n\t\t\t\t\tcolor: '#000',\r\n\t\t\t\t\topacity: 0.25,\r\n\t\t\t\t\tzIndex: 2e9\r\n\t\t\t\t}\r\n\r\n\t\t\t\tspinner = modalSpinner.showModalSpinner(\"#spinnerHolder\", opts);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes spinner from the page\r\n\t\t\t*/\r\n\t\t\tfunction removeSpinner() {\r\n\t\t\t\tif (spinner) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ForgotPasswordController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/forgotPasswordController.js","//{CODE:CAU08}\r\n// di.core.angular.userSecurity\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.controller('SetPasswordController', SetPasswordController);\r\n\r\n\t\tSetPasswordController.$inject = [\r\n\t\t\t'userSecurityProxy',\r\n\t\t\t'notifier',\r\n\t\t\t'elementNotifier',\r\n\t\t\t'translator',\r\n\t\t\t'$scope',\r\n\t\t\t'modalSpinner'\r\n\t\t];\r\n\r\n\t\tfunction SetPasswordController(\r\n\t\t\tuserSecurityProxy,\r\n\t\t\tnotifier,\r\n\t\t\telementNotifier,\r\n\t\t\ttranslator,\r\n\t\t\tscope,\r\n\t\t\tmodalSpinner) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvar spinner;\r\n\t\t\tvm.passwordExpired = false;\r\n\t\t\tvm.validationModel = 'setPassword';\r\n\t\t\tvm.userName = '';\r\n\t\t\tvm.token = '';\r\n\t\t\tvm.newPassword = '';\r\n\t\t\tvm.confirmPassword = '';\r\n\t\t\tvm.securityQuestions = [];\r\n\t\t\tvm.securityQuestion = '';\r\n\t\t\tvm.securityAnswer = '';\r\n\t\t\tvm.setPassword = setPassword;\r\n\t\t\tvm.setPasswordAndQuestion = setPasswordAndQuestion;\r\n\t\t\tvm.backToLogin = backToLogin;\r\n\r\n\t\t\tscope.subscribeToUsernameChange(function (username, token, passwordExpired) {\r\n\t\t\t\tvm.userName = username;\r\n\t\t\t\tvm.token = token;\r\n\t\t\t\tvm.passwordExpired = passwordExpired;\r\n\t\t\t\tif (vm.passwordExpired) {\r\n\t\t\t\t\tvm.validationModel = 'passwordExpired';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgetSecurityQuestions();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads security questions\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction getSecurityQuestions() {\r\n\t\t\t\tvar promise = userSecurityProxy.getSecurityQuestions();\r\n\t\t\t\tpromise.then(resolve, reject);\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\tvar questions = [];\r\n\r\n\t\t\t\t\t_.each(data, function (item, index) {\r\n\t\t\t\t\t\tquestions.push({\r\n\t\t\t\t\t\t\tid: index,\r\n\t\t\t\t\t\t\tquestion: item\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvm.securityQuestions.fill(questions);\r\n\t\t\t\t\t\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject() {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction backToLogin() {\r\n\t\t\t\tif (scope.onBackToLogin) {\r\n\t\t\t\t\tscope.onBackToLogin();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t *  Sends a request to the server to set a users password\r\n\t\t\t */\r\n\t\t\tfunction setPassword() {\r\n\t\t\t\tstartStopProcessing('setPasswordButton', 'setPasswordButtonProcessing');\r\n\r\n\t\t\t    userSecurityProxy.setPasswordWithToken(vm.userName, vm.token, vm.newPassword)\r\n\t\t\t        .then(resolve, reject);\r\n\t\t\t}\r\n\r\n\t\t\tfunction setPasswordAndQuestion() {\r\n\t\t\t\tstartStopProcessing('setPasswordQuestionButton', 'setPasswordQuestionButtonProcessing');\r\n\t\t\t    userSecurityProxy.setPasswordAndQuestionWithToken(vm.userName,\r\n\t\t\t            vm.token,\r\n\t\t\t            vm.newPassword,\r\n\t\t\t            vm.securityQuestion.question,\r\n\t\t\t            vm.securityAnswer)\r\n\t\t\t        .then(resolve, reject);\r\n\t\t\t}\r\n\r\n\t\t\tfunction resolve(data) {\r\n\t\t\t    if (data.success) {\r\n\t\t\t        translator.translate('CORE.USER_SECURITY.PASSWORD_CHANGED')\r\n\t\t\t        .then(function(translated) {\r\n\t\t\t            notifier.success(translated);\r\n\t\t\t        });\r\n\t\t\t\t\t\r\n\t\t\t\t\tvm.token = '';\r\n\r\n\t\t\t\t\tif (scope.onPasswordReset) {\r\n\t\t\t\t\t\tscope.onPasswordReset(vm.userName, vm.newPassword);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t    if (vm.passwordExpired === true) {\r\n\t\t\t\t\t        startStopProcessing('setPasswordButton', 'setPasswordButtonProcessing', false);\r\n\t\t\t\t\t    } else {\r\n\t\t\t\t\t        startStopProcessing('setPasswordQuestionButton', 'setPasswordQuestionButtonProcessing',false);\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvm.userName = '';\r\n\t\t\t\t\t\tvm.newPassword = '';\r\n\t\t\t\t\t\tvm.confirmPassword = '';\r\n\t\t\t\t\t\tvm.securityQuestion = '';\r\n\t\t\t\t\t\tvm.securityAnswer = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (data.passwordValidationMessage) {\r\n\t\t\t\t\t\telementNotifier.error(data.passwordValidationMessage, scope.newPasswordElement);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t    translator.translate('CORE.USER_SECURITY.ERRORS.' + data.failureReason.toUpperCase())\r\n\t\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t\t            elementNotifier.error(\r\n\t\t\t\t\t                translated,\r\n\t\t\t\t\t                scope.newPasswordElement);\r\n\t\t\t\t\t        });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (vm.passwordExpired === true) {\r\n\t\t\t\t\t    startStopProcessing('setPasswordButton', 'setPasswordButtonProcessing', false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t    startStopProcessing('setPasswordQuestionButton', 'setPasswordQuestionButtonProcessing', false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t    function reject(error) {\r\n\t\t        if (vm.passwordExpired === true) {\r\n\t\t            startStopProcessing('setPasswordButton', 'setPasswordButtonProcessing', false);\r\n\t\t        } else {\r\n\t\t            startStopProcessing('setPasswordQuestionButton', 'setPasswordQuestionButtonProcessing', false);\r\n\t\t        }\r\n\t\t        translator.translate(error.failureReason)\r\n\t\t            .then(function(translated) {\r\n\t\t                notifier.error(translated);\r\n\t\t            });\r\n\t\t    }\r\n\r\n\t\t    /**\r\n             * hides or shows action buttons            \r\n             */\r\n\t\t\tfunction startStopProcessing(buttonActive, buttonInactive, startOrStop) {\r\n\t\t\t\tif (startOrStop !== false) {\r\n\t\t\t\t\tshowSpinner();\r\n\t\t\t\t\tif (scope.showhHideControl) {\r\n\t\t\t\t\t\tscope.showhHideControl(buttonActive, false);\r\n\t\t\t\t\t\tscope.showhHideControl(buttonInactive, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t\tif (scope.showhHideControl) {\r\n\t\t\t\t\t\tscope.showhHideControl(buttonActive, true);\r\n\t\t\t\t\t\tscope.showhHideControl(buttonInactive, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Adds spinner to the page\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction showSpinner() {\r\n\t\t\t\tvar opts = {\r\n\t\t\t\t\tlength: 19,\r\n\t\t\t\t\twidth: 14,\r\n\t\t\t\t\tradius: 42,\r\n\t\t\t\t\tscale: 0.25,\r\n\t\t\t\t\tcolor: '#000',\r\n\t\t\t\t\topacity: 0.25,\r\n\t\t\t\t\tzIndex: 2e9\r\n\t\t\t\t}\r\n\r\n\t\t\t\tspinner = modalSpinner.showModalSpinner(\"#spinnerHolder\", opts);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes spinner from the page\r\n\t\t\t*/\r\n\t\t\tfunction removeSpinner() {\r\n\t\t\t\tif (spinner) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn SetPasswordController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/setPasswordController.js","//{CODE:CAU0C}\r\n// di.core.angular.userSecurity\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.provider('userSecurityProxy', userSecurityProxyProvider);\r\n\r\n\t\tfunction userSecurityProxyProvider() {\r\n\t\t\tvar config = {\r\n\t\t\t\tendpoint: 'app',\r\n\t\t\t\tgetSecurityQuestionUrl: '',\r\n\t\t\t\trequestPasswordResetUrl: '',\r\n\t\t\t\tchangePasswordUrl: '',\r\n\t\t\t\tresetPasswordUrl: '',\r\n\t\t\t\tresetPasswordSiteUrl: '',\r\n\t\t\t\tgetUserUrl: '',\r\n\t\t\t\tgetQuestionsUrl: '',\r\n\t\t\t\tsetSecurityQuestionUrl: '',\r\n\t\t\t\tsetPasswordWithTokenUrl: ''\r\n\t\t\t};\r\n\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['webApiHttp', 'endpoints', 'urlHelper'];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"CAU0C01E\", cfg, \"cfg\");\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\tfunction $get(http, endpoints, urlHelper) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\trequestPasswordReset: requestPasswordReset,\r\n\t\t\t\t\tgetSecurityQuestion: getSecurityQuestion,\r\n\t\t\t\t\tchangePassword: changePassword,\r\n\t\t\t\t\tresetPassword: resetPassword,\r\n\t\t\t\t\tgetUser: getUser,\r\n\t\t\t\t\tgetSecurityQuestions: getSecurityQuestions,\r\n\t\t\t\t\tsetSecurityQuestionAndAnswer: setSecurityQuestionAndAnswer,\r\n\t\t\t\t\trequestPasswordResetOnUserBehalf: requestPasswordResetOnUserBehalf,\r\n\t\t\t\t\tsetPasswordWithToken: setPasswordWithToken,\r\n\t\t\t\t\tsetPasswordAndQuestionWithToken: setPasswordAndQuestionWithToken\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets a security question for a given username (email) from the server\r\n\t\t\t\t * @param email - Email address of the user we want the question of\r\n\t\t\t\t * @returns promise\r\n\t\t\t\t */\r\n\t\t\t\tfunction getSecurityQuestion(email) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C02E\", email, \"email\");\r\n\r\n\t\t\t\t\tvar requestParams = {\r\n\t\t\t\t\t\temail: email\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar url = urlHelper.setParameters(config.getSecurityQuestionUrl, requestParams);\r\n\r\n\t\t\t\t\treturn http.get(url);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t* Sends a HTTP post request to the server to send an email with password reminder.\r\n\t\t\t\t* @param email - Email address entered by a user in the forgot password input control.\r\n\t\t\t\t*/\r\n\t\t\t\tfunction requestPasswordReset(emailAddress, securityAnswer) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C03E\", emailAddress, \"emailAddress\");\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C04E\", securityAnswer, \"securityAnswer\");\r\n\r\n\t\t\t\t\tvar request = {\r\n\t\t\t\t\t\temailAddress: emailAddress,\r\n\t\t\t\t\t\tsecurityAnswer: securityAnswer,\r\n\t\t\t\t\t\tresetBaseUrl: endpoints.getUrl(config.resetPasswordSiteUrl, config.endpoint)\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treturn http.post(config.requestPasswordResetUrl, request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t* Sends a HTTP post request to the server to change a users password\r\n\t\t\t\t* @param username - User name to change the password of.\r\n\t\t\t\t* @param oldPassword - The users current password, used for verification\r\n\t\t\t\t* @param newPassword - The new password to set. \r\n\t\t\t\t*/\r\n\t\t\t\tfunction changePassword(username, oldPassword, newPassword) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C05E\", username, \"username\");\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C06E\", oldPassword, \"oldPassword\");\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C07E\", newPassword, \"newPassword\");\r\n\r\n\t\t\t\t\tvar request = {\r\n\t\t\t\t\t\tusername: username,\r\n\t\t\t\t\t\toldPassword: oldPassword,\r\n\t\t\t\t\t\tnewPassword: newPassword\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treturn http.post(config.changePasswordUrl, request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t* Sends a HTTP post request to the server to reset a users password\r\n\t\t\t\t* @param resetToken - Token used for password reset\r\n\t\t\t\t* @param newPassword - The new password to set. \r\n\t\t\t\t*/\r\n\t\t\t\tfunction resetPassword(resetToken, newPassword) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C08E\", resetToken, \"resetToken\");\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C09E\", newPassword, \"newPassword\");\r\n\r\n\t\t\t\t\tvar request = {\r\n\t\t\t\t\t\tresetToken: resetToken,\r\n\t\t\t\t\t\tnewPassword: newPassword\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treturn http.post(config.resetPasswordUrl, request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets a user object for a given username (email) from the server\r\n\t\t\t\t * @param email - Email address of the user to get\r\n\t\t\t\t * @returns promise\r\n\t\t\t\t */\r\n\t\t\t\tfunction getUser(username) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C0AE\", username, \"username\");\r\n\r\n\t\t\t\t\tvar requestParams = {\r\n\t\t\t\t\t\tusername: username\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar url = urlHelper.setParameters(config.getUserUrl, requestParams);\r\n\r\n\t\t\t\t\treturn http.get(url);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets a list of possible security questions from the server\r\n\t\t\t\t */\r\n\t\t\t\tfunction getSecurityQuestions() {\r\n\t\t\t\t\treturn http.get(config.getQuestionsUrl);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Sets a security question and answer against a user\r\n\t\t\t\t * @param {} username - to set the question against\r\n\t\t\t\t * @param {} securityQuestion - to set against the user\r\n\t\t\t\t * @param {} securityAnswer - to set against the user\r\n\t\t\t\t */\r\n\t\t\t\tfunction setSecurityQuestionAndAnswer(username, securityQuestion, securityAnswer) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C0BE\", username, \"username\");\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C0CE\", securityQuestion, \"securityQuestion\");\r\n\t\t\t\t\tguard.throwIfNull(\"CAU0C0DE\", securityAnswer, \"securityAnswer\");\r\n\r\n\t\t\t\t\tvar request = {\r\n\t\t\t\t\t\tusername: username,\r\n\t\t\t\t\t\tsecurityQuestion: securityQuestion,\r\n\t\t\t\t\t\tsecurityAnswer: securityAnswer\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treturn http.post(config.setSecurityQuestionUrl, request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t* Sends a HTTP post request to the server to send an email with password reminder on behalf of the user.\t\t\t\t\r\n\t\t\t\t*/\r\n\t\t\t\tfunction requestPasswordResetOnUserBehalf(id, emailAddress) {\r\n\t\t\t\t\tguard.throwIfInvalidId(\"CAU0C0EE\", id, \"id\");\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C0FE\", emailAddress, \"emailAddress\");\r\n\r\n\t\t\t\t\tvar request = {\r\n\t\t\t\t\t\tuserId: id,\r\n\t\t\t\t\t\temailAddress: emailAddress,\r\n\t\t\t\t\t\tsecurityAnswer: 'supervisor',\r\n\t\t\t\t\t\tresetBaseUrl: endpoints.getUrl(config.resetPasswordSiteUrl, config.endpoint)\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treturn http.post(config.requestPasswordResetUrlOnUserBehalf, request);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t* Sends a HTTP post request to the server to set user password using reset token.\t\t\t\t\r\n\t\t\t\t*/\r\n\t\t\t\tfunction setPasswordWithToken(username, token, newPassword) {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C0GE\", username, \"username\");\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C0HE\", token, \"token\");\r\n\t\t\t\t\tguard.throwIfEmptyString(\"CAU0C0IE\", newPassword, \"newPassword\");\r\n\r\n\t\t\t\t\tvar request = {\r\n\t\t\t\t\t\tusername: username,\r\n\t\t\t\t\t\ttoken: token,\r\n\t\t\t\t\t\tnewPassword: newPassword\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treturn http.post(config.setPasswordWithTokenUrl, request);\r\n\t\t\t\t}\r\n\r\n\t\t\t    /**\r\n\t\t\t\t* Sends a HTTP post request to the server to set user password and security question/answer using reset token.\t\t\t\t\r\n\t\t\t\t*/\r\n\t\t\t\tfunction setPasswordAndQuestionWithToken(username, token, newPassword, securityQuestion, securityAnswer) {\r\n\t\t\t\t    guard.throwIfEmptyString(\"CAU0C0JE\", username, \"username\");\r\n\t\t\t\t    guard.throwIfEmptyString(\"CAU0C0KE\", token, \"token\");\r\n\t\t\t\t    guard.throwIfEmptyString(\"CAU0C0LE\", newPassword, \"newPassword\");\r\n\t\t\t\t    guard.throwIfEmptyString(\"CAU0C0ME\", securityQuestion, \"securityQuestion\");\r\n\t\t\t\t    guard.throwIfNull(\"CAU0C0NE\", securityAnswer, \"securityAnswer\");\r\n\r\n\t\t\t\t    var request = {\r\n\t\t\t\t        username: username,\r\n\t\t\t\t        token: token,\r\n\t\t\t\t        newPassword: newPassword,\r\n\t\t\t\t        securityQuestion: securityQuestion,\r\n\t\t\t\t        securityAnswer: securityAnswer\r\n\t\t\t\t    };\r\n\r\n\t\t\t\t    return http.post(config.setPasswordAndQuestionWithTokenUrl, request);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn userSecurityProxyProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/userSecurity/userSecurityProxy.js","//{CODE:CAU02}\r\n// di.core.angular.utility\r\ndefine([\r\n\t'./associativeArrayConvertor',\r\n\t'./guardedInjector',\r\n\t'./uniqueIdGenerator',\r\n\t'./filters/_loader',\r\n    './identityIncrementor',\r\n    './randomStringGenerator'\r\n], function (\r\n    associativeArrayConvertorLoader,\r\n\tguardedInjectorLoader,\r\n\tuniqueIdGeneratorLoader,\r\n\tfiltersLoader,\r\n\tidentityIncrementorLoader,\r\n    randomStringGeneratorLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tassociativeArrayConvertorLoader(module);\r\n\t\tguardedInjectorLoader(module);\r\n\t\tuniqueIdGeneratorLoader(module);\r\n\t\tfiltersLoader(module);\r\n\t\tidentityIncrementorLoader(module);\r\n\t\trandomStringGeneratorLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/utility/_loader.js","//{CODE:CAU03}\r\n// di.core.angular.utility\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        module.factory('associativeArrayConvertor', associativeArrayConvertor);\r\n\r\n        function associativeArrayConvertor() {\r\n            var guard = $di.exception.guard;\r\n            var util = $di.utility.util;\r\n\r\n            return {\r\n                convert: convert\r\n            };\r\n\r\n            function convert(itemToConvert, indexer, property) {\r\n                if (util.isArray(itemToConvert)) {\r\n                    return convertArrayToAssociativeArray(itemToConvert, indexer, property);\r\n                } else if (util.isObject(itemToConvert)) {\r\n                    return convertAssoicativeArrayToArray(itemToConvert);\r\n                } else {\r\n                    guard.throwNew(\"CAU0301E\", \"itemToConvert must be either an Array or an Object\");\r\n                    return [];\r\n                }\r\n            }\r\n\r\n            function convertArrayToAssociativeArray(array, indexer, property) {\r\n                if (!util.isDefined(property)) {\r\n                    return _.indexBy(array, indexer);\r\n                }\r\n\r\n                var results = {};\r\n                _.each(array, function(obj) {\r\n                    results[obj[indexer]] = obj[property];\r\n                });\r\n\r\n                return results;\r\n            }\r\n\r\n            function convertAssoicativeArrayToArray(associativeArray) {\r\n                return _.values(associativeArray);\r\n            }\r\n        }\r\n\r\n        return associativeArrayConvertor;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/utility/associativeArrayConvertor.js","//{CODE:DEF0Y}\r\ndefine([\r\n\t'./diYesNoFilter'\r\n], function (\r\n    diYesNoFilterLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tdiYesNoFilterLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/utility/filters/_loader.js","//{CODE:DEF0X}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.filter('diYesNo', diYesNo);\r\n\r\n\t\tdiYesNo.$inject = ['translator'];\r\n\r\n\t\tfunction diYesNo(translator) {\r\n\t\t\treturn function (input) {\r\n\t\t\t    return (input === true) ? translator.instantTranslate('CORE.FILTERS.YES_NO.YES') : ((input === false) ? translator.instantTranslate('CORE.FILTERS.YES_NO.NO') : '');\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diYesNo;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/utility/filters/diYesNoFilter.js","//{CODE:CAU01}\r\n// di.core.angular.utility\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('guardedInjector', guardedInjector);\r\n\r\n        guardedInjector.$inject = ['$injector'];\r\n\r\n        /**\r\n         * Guarded injector that will not throw an exception when a get request\r\n         * is made for a component that cannot be resolved\r\n         */\r\n        function guardedInjector($injector) {\r\n            var service = {\r\n                get: get\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Attempts to resolve the given component from the $injector\r\n             * If the component does not exist, the given object or function is\r\n             * returned instead\r\n             * @param name\r\n             * @param valueIfNotFound\r\n             */\r\n            function get(name, valueIfNotFound) {\r\n                guard.throwIfEmptyString(\"CAU0102E\", name, \"name\");\r\n\r\n                if ($injector.has(name)) {\r\n                    return $injector.get(name);\r\n                } else {\r\n                    return valueIfNotFound;\r\n                }\r\n            }\r\n        }\r\n\r\n        return guardedInjector;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/utility/guardedInjector.js","//{CODE:DEF1P}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('identityIncrementor', identityIncrementor);\r\n\r\n\t\tfunction identityIncrementor() {\r\n\t\t\treturn {\r\n\t\t\t\treset: reset,\r\n\t\t\t\tgetNext: getNextIdentifier\r\n\t\t\t};\r\n\r\n\t\t\t/*\r\n\t\t\t * Sets an identity property named identityName on each element in the collection,\r\n\t\t\t * starting from identitySeed if specified, or 1 otherwise,\r\n\t\t\t * using an increment of identityIncrement if specified, or 1 otherwise.\r\n\t\t\t * Returns the same collection with modified elements\r\n\t\t\t */\r\n\t\t\tfunction reset(collection, identityName, identityIncrement, identitySeed) {\r\n\t\t\t\tif (util.isArray(collection) && util.isNonEmptyString(identityName)) {\r\n\t\t\t\t\t_.each(collection, function (item, index) {\r\n\t\t\t\t\t\tvar id = index * (util.isNumber(identityIncrement) ? identityIncrement : 1) + (util.isNumber(identitySeed) ? identitySeed : 1);\r\n\t\t\t\t\t\titem[identityName] = id;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn collection;\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Returns the next element to be used as identity for the given collection.\r\n\t\t\t * When the collection is empty, returns the identitySeed if specified, or 1 otherwise\r\n\t\t\t * When the collection is not empty, returns the maximum identity value incremented by identityIncrement or 1 if identityIncrement is not specified\r\n\t\t\t */\r\n\t\t\tfunction getNextIdentifier(collection, identityName, identityIncrement, identitySeed) {\r\n\t\t\t\tif (!util.isNonEmptyArray(collection) || !util.isNonEmptyString(identityName)) {\r\n\t\t\t\t\treturn (util.isNumber(identitySeed) ? identitySeed : 1);\r\n\t\t\t\t}\r\n\t\t\t\tvar max = _.max(collection, function (item) {\r\n\t\t\t\t\treturn (item[identityName] || 0);\r\n\t\t\t\t});\r\n\t\t\t\treturn (max[identityName] || 0) + (util.isNumber(identityIncrement) ? identityIncrement : 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn identityIncrementor;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/utility/identityIncrementor.js","//{CODE:CAU0G}\r\n// di.core.angular.utility\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('randomStringGenerator', randomStringGenerator);\r\n\r\n        /**\r\n         * Generates unique id for html elements\r\n         */\r\n        function randomStringGenerator() {\r\n            var MAX_LENGTH = 10;\r\n            var CHAR_ARRAY = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n\r\n            var service = {\r\n                generate: generate,\r\n                reset:reset\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Generates unique identifier\r\n             */\r\n            function generate(length) {\r\n                var maxLength = length || MAX_LENGTH;\r\n\r\n                return randomString(maxLength, CHAR_ARRAY);\r\n            }\r\n\r\n            /**\r\n             * Resets unique identifier for collection\r\n             */\r\n            function reset(collection, identityName, length) {\r\n                if (util.isArray(collection) && util.isNonEmptyString(identityName)) {\r\n                    _.each(collection,\r\n                        function(item) {\r\n                            item[identityName] = generate();\r\n                        });\r\n                }\r\n\r\n                return collection;\r\n            }\r\n\r\n            function randomString(length, chars) {\r\n                var result = '';\r\n                for (var i = length; i > 0; --i) result += chars[Math.round(Math.random() * (chars.length - 1))];\r\n                return result;\r\n            }\r\n        }\r\n\r\n        return randomStringGenerator;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/utility/randomStringGenerator.js","//{CODE:CAU0G}\r\n// di.core.angular.utility\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('uniqueIdGenerator', uniqueIdGenerator);\r\n\r\n        /**\r\n         * Generates unique id for html elements\r\n         */\r\n        function uniqueIdGenerator() {\r\n            var lastId = 0;\r\n\r\n            var service = {\r\n                newId: newId\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Generates unique id for html elements\r\n             */\r\n            function newId(prefix) {\r\n                var id = (prefix || 'element') + '_' + (++lastId);\r\n\r\n                return id;\r\n            }\r\n        }\r\n\r\n        return uniqueIdGenerator;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/utility/uniqueIdGenerator.js","//{CODE:CAV02}\r\n// di.core.angular.validation\r\ndefine([\r\n\t'./diValidateClickDirective',\r\n\t'./diValidateDirective',\r\n\t'./diValidateModelDirective',\r\n\t'./diRequireIfDirective',\r\n\t'./requireIfValidator',\r\n\t'./formAnalyser',\r\n\t'./idValidator',\r\n\t'./positiveWholeNumberValidator',\r\n\t'./ruleViolationSelector',\r\n\t'./validationMessageGenerator',\r\n\t'./validationNotifier',\r\n\t'./validationInitialiser',\r\n\t'./validationRulesProxy',\r\n\t'./validationRulesStore',\r\n    './validationRulesSetter',\r\n    './pastOrTodayValidator',\r\n    './comparers/_loader',\r\n    './greaterValidator',\r\n    './lessValidator',\r\n    './equalAlwaysValidator',\r\n    './equalIfSelfSetValidator',\r\n    './requiredIfPairSetValidator',\r\n    './requiredIfPairNotSetValidator',\r\n    './product-code-custom-validator.service'\r\n], function (\r\n\tdiValidateClickDirectiveLoader,\r\n\tdiValidateDirectiveLoader,\r\n\tdiValidateDirectiveModelLoader,\r\n\tdiRequireIfDirectiveLoader,\r\n\trequireIfValidatorLoader,\r\n\tformAnalyserLoader,\r\n\tidValidatorLoader,\r\n\tpositiveWholeNumberValidatorLoader,\r\n\truleViolationSelectorLoader,\r\n\tvalidationMessageGeneratorLoader,\r\n\tvalidationNotifierLoader,\r\n\tvalidationInitialiserLoader,\r\n\tvalidationRulesProxyLoader,\r\n\tvalidationRulesStoreLoader,\r\n    validationRulesSetterLoader,\r\n    pastOrTodayValidatorLoader,\r\n    comparersLoader,    \r\n\tgreaterValidatorLoader,\r\n\tlessValidatorLoader,\r\n\tequalAlwaysValidatorLoader,\r\n\tequalIfSelfSetValidatorLoader,\r\n\trequiredIfPairSetValidatorLoader,\r\n\trequiredIfPairNotSetValidatorLoader,\r\n    productCodeCustomValidator\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tdiValidateClickDirectiveLoader(module);\r\n\t\tdiValidateDirectiveLoader(module);\r\n\t\tdiValidateDirectiveModelLoader(module);\r\n\t\tdiRequireIfDirectiveLoader(module);\r\n\t\trequireIfValidatorLoader(module);\r\n\t\tformAnalyserLoader(module);\r\n\t\tidValidatorLoader(module);\r\n\t\tpositiveWholeNumberValidatorLoader(module);\r\n\t\truleViolationSelectorLoader(module);\r\n\t\tvalidationMessageGeneratorLoader(module);\r\n\t\tvalidationNotifierLoader(module);\r\n\t\tvalidationInitialiserLoader(module);\r\n\t\tvalidationRulesProxyLoader(module);\r\n\t\tvalidationRulesStoreLoader(module);\r\n\t    validationRulesSetterLoader(module);\r\n\t\tpastOrTodayValidatorLoader(module);\r\n\t\tcomparersLoader(module);\r\n\t\tgreaterValidatorLoader(module);\r\n\t\tlessValidatorLoader(module);\r\n\t\tequalAlwaysValidatorLoader(module);\r\n\t\tequalIfSelfSetValidatorLoader(module);\r\n\t\trequiredIfPairSetValidatorLoader(module);\r\n\t\trequiredIfPairNotSetValidatorLoader(module);\r\n\t\tmodule.service('productCodeCustomValidator', productCodeCustomValidator.ProductCodeCustomValidator);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/_loader.js","//{CODE:CAV0K}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.config(comparerRegistrarConfig);\r\n\r\n        comparerRegistrarConfig.$inject = ['comparerRegistrarProvider'];\r\n\r\n        function comparerRegistrarConfig(comparerRegistrar) {\r\n            comparerRegistrar.addComparer('momentComparer');\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/comparers/_config.js","//{CODE:CAV0J}\r\n// di.core.angular.validation\r\ndefine([\r\n\t'./_config',\r\n\t'./comparerRegistrar',\r\n\t'./defaultComparer',\r\n\t'./momentComparer'\r\n], function (\r\n\tconfigLoader,\r\n\tcomparerRegistrarLoader,\r\n\tdefaultComparerLoader,\r\n\tmomentComparerLoader\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    configLoader(module);\r\n\t    comparerRegistrarLoader(module);\r\n\t    defaultComparerLoader(module);\r\n\t    momentComparerLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/comparers/_loader.js","//{CODE:DEF07}\r\n//di.core.angular.validation.comparers\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tmodule.provider('comparerRegistrar', comparerRegistrarProvider);\r\n\r\n\t\t/**\r\n         * Provides comparers used by the custom compare validator\r\n         */\r\n\t\tfunction comparerRegistrarProvider() {\r\n\t\t\tvar comparerNames = ['defaultComparer'];\r\n\t\t\tvar comparers = [];\r\n\r\n\t\t\tvar provider = {\r\n\t\t\t\taddComparer: addComparer,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['$injector'];\r\n\t\t\treturn provider;\r\n\r\n\t\t\t/**\r\n            * Registers the comparer to the list of available comparers\r\n            * @param {} comparerName \r\n            * @returns {} \r\n            */\r\n\t\t\tfunction addComparer(comparerName) {\r\n\t\t\t\tguard.throwIfEmptyString(\"DEF0701E\", comparerName, \"comparerName\");\r\n\r\n\t\t\t\tif (comparerNames.indexOf(comparerName) === -1) {\r\n\t\t\t\t\tcomparerNames.push(comparerName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Gets the comparer proxy\r\n             * @param {} $inject \r\n             * @returns {} \r\n             */\r\n\t\t\tfunction $get($inject) {\r\n\t\t\t\tangular.forEach(comparerNames, function (comparerName) {\r\n\t\t\t\t\tvar comparer = $inject.get(comparerName);\n\t\t\t\t\tcomparers[comparer.name] = comparer;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar service = {\r\n\t\t\t\t\tcompare: compare\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn service;\r\n\r\n\t\t\t\tfunction compare(firstValue, secondValue, compareOperation, comparerName) {\r\n\t\t\t\t\tvar comparer = comparers[comparerName] || comparers['default'];\r\n\t\t\t\t\treturn comparer.compare(firstValue, secondValue, compareOperation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn comparerRegistrarProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/comparers/comparerRegistrar.js","//{CODE:DEF08}\r\n//di.core.angular.validation.comparers\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('defaultComparer', defaultComparer);\r\n\r\n\t\t/**\r\n         * Comparer to compare given values\r\n         */\r\n\t\tfunction defaultComparer() {\r\n\t\t\tvar service = {\r\n\t\t\t\tname: 'default',\r\n\t\t\t\tcompare: compare\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\t/**\r\n             * Returns the result of comparing the given values by using the specified operation\r\n             */\r\n\t\t\tfunction compare(firstValue, secondValue, compareOperation) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tswitch (compareOperation) {\r\n\t\t\t\t\t\tcase 'equalAlways':\r\n\t\t\t\t\t\t\treturn firstValue === secondValue;\r\n\r\n\t\t\t\t\t\tcase 'equalIfSelfSet':\r\n\t\t\t\t\t\t\treturn util.isNullOrUndefined(firstValue)\r\n\t\t\t\t\t\t\t\t|| firstValue === ''\r\n\t\t\t\t\t\t\t\t|| firstValue === secondValue;\r\n\r\n\t\t\t\t\t    case 'requiredIfPairSet':\t\t\t\t\t        \r\n\t\t\t\t\t\t\tif (util.isNullOrUndefined(secondValue)\r\n\t\t\t\t\t\t\t\t|| secondValue === '') {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn !util.isNullOrUndefined(firstValue)\r\n\t\t\t\t\t\t\t\t&& firstValue !== '';\r\n\r\n\t\t\t\t\t\tcase 'requiredIfPairNotSet':\r\n\t\t\t\t\t\t\tif (util.isNullOrUndefined(secondValue)\r\n\t\t\t\t\t\t\t\t|| secondValue === '') {\r\n\t\t\t\t\t\t\t\treturn !util.isNullOrUndefined(firstValue)\r\n\t\t\t\t\t\t\t\t\t&& firstValue !== '';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn defaultComparer;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/comparers/defaultComparer.js","//{CODE:DEF09}\r\n//di.core.angular.validation.comparers\r\ndefine(['moment'], function (moment) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('momentComparer', momentComparer);\r\n\r\n\t\tmomentComparer.$inject = ['diMoment'];\r\n\r\n\t\t/**\r\n         * Comparer to compare moments\r\n         */\r\n\t\tfunction momentComparer(diMoment) {\r\n\t\t\tvar service = {\r\n\t\t\t\tname: 'moment',\r\n\t\t\t\tcompare: compare\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\t/**\r\n             * Returns the result of comparing the given values by using the specified operation\r\n             */\r\n\t\t\tfunction compare(firstValue, secondValue, compareOperation) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar firstValueAsMoment = getMoment(firstValue);\r\n\t\t\t\t\tvar secondValueAsMoment = getMoment(secondValue);\r\n\r\n\t\t\t\t\tswitch (compareOperation) {\r\n\t\t\t\t\t\tcase 'equalAlways':\r\n\t\t\t\t\t\t\treturn equalAlways(firstValue, secondValue, firstValueAsMoment, secondValueAsMoment);\r\n\r\n\t\t\t\t\t\tcase 'equalIfSelfSet':\r\n\t\t\t\t\t\t\treturn util.isNullOrUndefined(firstValue)\r\n\t\t\t\t\t\t\t\t\t|| firstValue === ''\r\n\t\t\t\t\t\t\t\t\t|| !firstValueAsMoment.isValid()\r\n\t\t\t\t\t\t\t\t\t|| equalAlways(firstValue, secondValue, firstValueAsMoment, secondValueAsMoment);\r\n\r\n\t\t\t\t\t\tcase 'requiredIfPairSet':\r\n\t\t\t\t\t\t\tif (util.isNullOrUndefined(secondValue)\r\n\t\t\t\t\t\t\t\t|| secondValue === ''\r\n\t\t\t\t\t\t\t\t|| !secondValueAsMoment.isValid()) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn !util.isNullOrUndefined(firstValue)\r\n\t\t\t\t\t\t\t\t\t&& firstValue !== ''\r\n\t\t\t\t\t\t\t\t\t&& firstValueAsMoment.isValid();\r\n\r\n\t\t\t\t\t\tcase 'requiredIfPairNotSet':\r\n\t\t\t\t\t\t\tif (util.isNullOrUndefined(secondValue)\r\n\t\t\t\t\t\t\t\t|| secondValue === ''\r\n\t\t\t\t\t\t\t\t|| !secondValueAsMoment.isValid()) {\r\n\t\t\t\t\t\t\t\treturn !util.isNullOrUndefined(firstValue)\r\n\t\t\t\t\t\t\t\t\t\t&& firstValue !== ''\r\n\t\t\t\t\t\t\t\t\t\t&& firstValueAsMoment.isValid();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*Returns a moment for the given value*/\r\n\t\t\tfunction getMoment(value) {\r\n\t\t\t\tif (value instanceof moment)\r\n\t\t\t\t\treturn value;\r\n\t\t\t\treturn diMoment(value);\r\n\t\t\t}\r\n\r\n\t\t\t/* Returns true if both values are null, undefined or empty string, or one of the values is an invalid moment, or the moments are the same, and false otherwise*/\r\n\t\t\tfunction equalAlways(firstValue, secondValue, firstValueAsMoment, secondValueAsMoment) {\r\n\t\t\t\treturn firstValue === secondValue\r\n\t\t\t\t\t\t|| ((util.isNullOrUndefined(firstValue) || firstValue === '')\r\n\t\t\t\t\t\t\t&& ((util.isNullOrUndefined(secondValue)) || secondValue === ''))\r\n\t\t\t\t\t\t|| (!firstValueAsMoment.isValid() || !secondValueAsMoment.isValid())\r\n\t\t\t\t\t\t|| firstValueAsMoment.isSame(secondValueAsMoment);// equality operators do not not work correctly with moment\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn momentComparer;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/comparers/momentComparer.js","//{CODE:CAV0H}\r\n//di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diRequireIf', diRequireIf);\r\n        \r\n        diRequireIf.$inject = ['requireIfValidator'];\r\n\r\n        function diRequireIf(validator) {\r\n            return {\r\n                restrict: 'A',\r\n                require: \"ngModel\",\r\n                scope: {\r\n                    otherModelValue: \"=diRequireIf\"\r\n                },\r\n                link: function (scope, element, attributes, ngModel) {\r\n\r\n                    ngModel.$validators.requireIf = function (modelValue) {\r\n                        return validator.validate(modelValue, scope.otherModelValue);\r\n                    };\r\n\r\n                    scope.$watch(\"otherModelValue\", function () {\r\n                        ngModel.$validate();\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        return diRequireIf;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/diRequireIfDirective.js","//{CODE:CAV0C}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diValidateClick', diValidateClick);\r\n\r\n        diValidateClick.$inject = ['$parse', 'formAnalyser'];\r\n\r\n        /**\r\n         * Directive for assigning ng-click event which only fires if the form\r\n         * closest to the target element is valid\r\n         */\r\n        function diValidateClick($parse, formAnalyser) {\r\n            return {\r\n                restrict: 'A',\r\n                compile: compile\r\n            };\r\n\r\n            function compile($element, attr) {\r\n                var fn = $parse(attr.diValidateClick);\r\n\r\n                return function ngEventHandler(scope, element) {\r\n                    element.on('click', function (event) {\r\n                        var callback = function () {\r\n                            fn(scope, { $event: event });\r\n                        };\r\n\r\n                        var form = formAnalyser.getForm(element);\r\n\r\n                        formAnalyser.dirtyTrackedElements(form, true);\r\n\r\n                        var formIsValid = formAnalyser.isFormValid(form);\r\n\r\n                        // We set the form to be submitted here to set the Angular $submitted flag to true \r\n                        // as the default di-button type has been changed from \"submit\" to \"button\".\r\n                        var formInstance = formAnalyser.getFormInstance(scope);\r\n\r\n                        if (formInstance) {\r\n                            formInstance.$setSubmitted(true);\r\n                        }\r\n\r\n                        if (formIsValid) {\r\n                            scope.$apply(callback);\r\n                        }\r\n                    });\r\n                };\r\n            }\r\n        }\r\n\r\n        return diValidateClick;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/diValidateClickDirective.js","//{CODE:CAV03}\r\n// di.core.angular.validation\r\ndefine([\r\n\t'angular'\r\n], function (ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\t$di.event.jqueryEventSubscriber.listenToVal();\r\n\r\n\t\tmodule.directive('diValidate', diValidate);\r\n\r\n\t\tdiValidate.$inject = [\r\n\t\t\t'$compile',\r\n\t\t\t'$interpolate',\r\n\t\t\t'validationNotifier',\r\n\t\t\t'validationMessageGenerator',\r\n\t\t\t'translator',\r\n\t\t\t'formAnalyser',\r\n\t\t\t'ruleViolationSelector',\r\n\t\t\t'$timeout',\r\n            '$q'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * Attribute directive for validating form elements\r\n\t\t */\r\n\t\tfunction diValidate(\r\n\t\t\t$compile,\r\n\t\t\t$interpolate,\r\n\t\t\tvalidationNotifier,\r\n\t\t\tvalidationMessageGenerator,\r\n\t\t\ttranslator,\r\n\t\t\tformAnalyser,\r\n\t\t\truleViolationSelector,\r\n\t\t\t$timeout,\r\n            $q) {\r\n\t\t\treturn {\r\n\t\t\t\tpriority: 1000,\r\n\t\t\t\trestrict: 'A',\r\n\t\t\t\tterminal: true,\r\n\t\t\t\tlink: link\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope, uiElement, attrs) {\r\n\t\t\t\tvar unsubscribeErrorWatch = function () { };\r\n\t\t\t\tvar validatedElement;\r\n\t\t\t\tvar focusElement;\r\n\t\t\t\tvar notificationElement;\r\n\t\t\t\tvar form = formAnalyser.getForm(uiElement);\r\n\t\t\t\tvar elementWithValidationModel = formAnalyser.getElementWithValidationModel(uiElement);\r\n\r\n\t\t\t\tvar modelName = formAnalyser.getValidationModel(elementWithValidationModel);\r\n                if (modelName === \"{{::diValidateModel}}\") {\r\n                    modelName = interpolate(modelName);\r\n                }\r\n\r\n\t\t\t\tvar propertyName = interpolate(attrs.diValidate);\r\n\t\t\t\tvar elementWorksWithValdr = checkElementWorksWithValdr();\r\n\t\t\t\tvar elementIsBoundToValidationProperty = checkElementIsBoundToValidationProperty();\r\n\t\t\t\tvar validateOnBlur = interpolate(attrs.validateOnBlur, 'false') === 'true';\r\n\t\t\t\tvar checkCount = 0;\r\n\r\n\t\t\t\tif (elementWorksWithValdr && elementIsBoundToValidationProperty) {\r\n\t\t\t\t\tvalidatedElement = uiElement;\r\n\t\t\t\t\tfocusElement = uiElement;\r\n\t\t\t\t\tnotificationElement = uiElement;\r\n\r\n\t\t\t\t\taddFocusEvents('focus', 'blur');\r\n\r\n\t\t\t\t\tvar eventName = validateOnBlur ? 'blur' : 'input';\r\n\r\n\t\t\t\t\tuiElement.on(eventName, checkErrorState);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscope.$evalAsync(function () {\r\n\t\t\t\t\t\tvar explicitFocusElement = uiElement.find('[validation-focus-target]');\r\n\t\t\t\t\t\tvar explicitNotificationElement = uiElement.find('[validation-notification-target]');\r\n\r\n\t\t\t\t\t\tfocusElement = explicitFocusElement.length ? explicitFocusElement : uiElement.parent();\r\n\t\t\t\t\t\tnotificationElement = explicitNotificationElement.length ? explicitNotificationElement : uiElement;\r\n\r\n\t\t\t\t\t\tif (explicitFocusElement.length) {\r\n\t\t\t\t\t\t\taddFocusEvents('focus', 'blur');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\taddFocusEvents('focusin', 'focusout');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tvalidatedElement = ng.element('<input type=\"text\" style=\"display: none\" />');\r\n\t\t\t\t\tvalidatedElement.attr('ng-model', attrs.validationModel || attrs.ngModel);\r\n\r\n\t\t\t\t\tuiElement.parent().append(validatedElement);\r\n\r\n\t\t\t\t\tuiElement.change(function () {\r\n\t\t\t\t\t\tvalidatedElement.val(uiElement.val());\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tformAnalyser.trackElement(form, validatedElement);\r\n\t\t\t\t}\r\n\r\n\t\t\t\taddValdrAttributes(validatedElement);\r\n\t\t\t\t\r\n\t\t\t\tvalidatedElement.on('val', function () {\r\n\t\t\t\t\tcheckErrorState();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tformAnalyser.trackElement(form, uiElement);\r\n\r\n\t\t\t\tscope.$on('$destroy', function () {\r\n\t\t\t\t\tunsubscribeErrorWatch();\r\n\t\t\t\t\tformAnalyser.forgetElement(form, uiElement);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tuiElement.removeAttr('di-validate');\r\n\r\n\t\t\t\tif (validatedElement !== uiElement) {\r\n\t\t\t\t\t$compile(validatedElement)(scope);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$compile(uiElement)(scope);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction checkErrorState() {\r\n\t\t\t\t\tcheckCount++;\r\n\r\n\t\t\t\t\tvar currentCheckCount = checkCount;\r\n\r\n\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\tif (currentCheckCount === checkCount) {\r\n\t\t\t\t\t\t\tsetErrorState(checkIsInvalid());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction addFocusEvents(inEvent, outEvent) {\r\n\t\t\t\t\tfocusElement.on(inEvent, function () {\r\n\t\t\t\t\t\tif (getErrorState()) {\r\n\t\t\t\t\t\t\tshowNotification();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tfocusElement.on(outEvent, function () {\r\n\t\t\t\t\t\thideNotification();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction checkIsInvalid() {\r\n\t\t\t\t\tvar hasInvalid = validatedElement.hasClass('ng-invalid');\r\n\t\t\t\t\tvar warnWhenClean = attrs.validationWarnWhenClean && attrs.validationWarnWhenClean.toLowerCase() === 'true';\r\n\r\n\t\t\t\t\tvar showByCleanDirty = warnWhenClean || uiElement.hasClass('ng-dirty');\r\n\t\t\t\t\tvar isError = hasInvalid && showByCleanDirty;\r\n\r\n\t\t\t\t\treturn isError;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction setErrorState(hasError) {\r\n\t\t\t\t\tvar elementHasFocus = focusElement.is(':focus');\r\n\t\t\t\t\tvar stateHasChanged = hasError !== getErrorState();\r\n\r\n\t\t\t\t\tif (stateHasChanged) {\r\n\t\t\t\t\t\tuiElement.toggleClass('has-errors', hasError);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (elementHasFocus && hasError) {\r\n\t\t\t\t\t\tif (stateHasChanged) {\r\n\t\t\t\t\t\t\tshowNotification();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\thideNotification();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getErrorState() {\r\n\t\t\t\t\treturn uiElement.hasClass('has-errors');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction checkElementWorksWithValdr() {\r\n\t\t\t\t\tvar nodeName = uiElement[0].nodeName;\r\n\r\n\t\t\t\t\treturn nodeName === 'INPUT' ||\r\n\t\t\t\t\t\tnodeName === 'SELECT' ||\r\n\t\t\t\t\t\tnodeName === 'TEXTAREA';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction checkElementIsBoundToValidationProperty() {\r\n\t\t\t\t\treturn !attrs.validationModel || (attrs.validationModel === attrs.ngModel);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction addValdrAttributes(element) {\r\n\t\t\t\t\telement.attr('valdr-type', modelName);\r\n\t\t\t\t\telement.attr('name', propertyName);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction showNotification() {\r\n\t\t\t\t    const errorMessagePromise = getErrorMessage();\r\n\t\t\t\t    if (errorMessagePromise) {\r\n\t\t\t\t        errorMessagePromise.then(function(errorMessage) {\r\n\t\t\t\t            var validationNotificationPosition = interpolate(attrs.validationMessagePosition, 'top');\r\n\t\t\t\t            validationNotifier.showNotification(notificationElement, errorMessage, validationNotificationPosition);\r\n\t\t\t\t        });\r\n\t\t\t\t    } else {\r\n\t\t\t\t        setErrorState(false);\r\n\t\t\t\t    }\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction hideNotification() {\r\n\t\t\t\t\tvalidationNotifier.hideNotification(notificationElement);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getErrorMessage() {\r\n\t\t\t\t    var errorMessage = interpolate(attrs.validationMessage, '');\r\n\r\n\t\t\t\t    if (util.isNonEmptyString(errorMessage)) {\r\n\t\t\t\t        return translator.translate(errorMessage);\r\n\t\t\t\t    }\r\n                    \r\n\t\t\t\t\tif (util.isNonEmptyString(errorMessage)) {\r\n\t\t\t\t\t\treturn translator.translate(errorMessage);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar propertyDisplayName = interpolate(attrs.validationModelDisplayName, propertyName);\r\n\t\t\t\t\tvar propertyCompareDisplayName = interpolate(attrs.validationModelCompareDisplayName);\r\n\t\t\t\t\tvar ruleViolations = formAnalyser.getRuleViolations(validatedElement);\r\n\r\n\t\t\t\t\tif (util.isUndefined(ruleViolations)) {\r\n\t\t\t\t\t    return;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar selectedRuleViolation = ruleViolationSelector.getMostImportantRuleViolation(ruleViolations, modelName, propertyName);\r\n\r\n\t\t\t\t\terrorMessage = validationMessageGenerator.generateMessage(selectedRuleViolation, propertyDisplayName, (propertyCompareDisplayName || (selectedRuleViolation || {}).requireModelsDisplayName || propertyName));\r\n\r\n\t\t\t\t\treturn $q.when(errorMessage);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction interpolate(value, valueIfEmpty) {\r\n\t\t\t\t\tvar result = (value ? $interpolate(value)(scope) : '') || valueIfEmpty;\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diValidate;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/diValidateDirective.js","//{CODE:CAV04}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.directive('diValidateModel', diValidateModel);\r\n\r\n        /**\r\n         * Attribute directive for assiging validation model to a form\r\n         */\r\n        function diValidateModel() {\r\n            return {\r\n                restrict: 'A',\r\n                link: link\r\n            };\r\n\r\n            function link(scope, element, attrs) {\r\n                element.attr('valdr-type', attrs.diValidateModel);\r\n            }\r\n        }\r\n\r\n        return diValidateModel;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/diValidateModelDirective.js","//{CODE:/AV04}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('equalAlwaysValidator', equalAlwaysValidator);\r\n\r\n\t\tequalAlwaysValidator.$inject = ['comparerRegistrar'];\r\n\r\n\t\t/**\r\n\t\t * returns false when value is not equal to the constraint value and true otherwise\r\n\t\t */\r\n\t\tfunction equalAlwaysValidator(comparerRegistrar) {\r\n\t\t\tvar service = {\r\n\t\t\t\tname: 'equalAlways',\r\n\t\t\t\tvalidate: validate\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\tfunction validate(value, params, requiredModels) {\r\n\t\t\t\tvar propertyName = (params[\"requireModels\"] || [])[0];\r\n\t\t\t\tif (propertyName) {\r\n\t\t\t\t\tvar comparerName = params[\"clientComparerName\"] || \"default\";\r\n\r\n\t\t\t\t\tvar otherModelValue = (requiredModels || {})[propertyName];\r\n\r\n\t\t\t\t\tvar valid = comparerRegistrar.compare(value, otherModelValue, 'equalAlways', comparerName);\r\n\t\t\t\t\treturn valid;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn equalAlwaysValidator;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/equalAlwaysValidator.js","//{CODE:/AV02}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('equalIfSelfSetValidator', equalIfSelfSetValidator);\r\n\r\n\t\tequalIfSelfSetValidator.$inject = ['comparerRegistrar'];\r\n\r\n\t\t/**\r\n\t\t * returns false when value is set and not equal to the constraint value and true otherwise\r\n\t\t */\r\n\t\tfunction equalIfSelfSetValidator(comparerRegistrar) {\r\n\t\t\tvar service = {\r\n\t\t\t\tname: 'equalIfSelfSet',\r\n\t\t\t\tvalidate: validate\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\tfunction validate(value, params, requiredModels) {\r\n\t\t\t\tvar propertyName = (params[\"requireModels\"] || [])[0];\r\n\t\t\t\tif (propertyName) {\r\n\t\t\t\t\tvar comparerName = params[\"clientComparerName\"] || \"default\";\r\n\r\n\t\t\t\t\tvar otherModelValue = (requiredModels || {})[propertyName];\r\n\r\n\t\t\t\t\tvar valid = comparerRegistrar.compare(value, otherModelValue, 'equalIfSelfSet', comparerName);\r\n\t\t\t\t\treturn valid;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn equalIfSelfSetValidator;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/equalIfSelfSetValidator.js","//{CODE:CAV0D}\r\n// di.core.angular.validation\r\ndefine([\r\n    'angular'\r\n], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        $di.event.jqueryEventSubscriber.listenToVal();\r\n\r\n        module.factory('formAnalyser', formAnalyser);\r\n\r\n        formAnalyser.$inject = ['$timeout'];\r\n\r\n        /**\r\n         * Helper service for analysing form and input elements during validation\r\n         */\r\n        function formAnalyser($timeout) {\r\n            var service = {\r\n                getForm: getForm,\r\n                getFormInstance: getFormInstance,\r\n                getElementWithValidationModel: getElementWithValidationModel,\r\n                getValidationModel: getValidationModel,\r\n                isFormValid: isFormValid,\r\n                getRuleViolations: getRuleViolations,\r\n                trackElement: trackElement,\r\n                forgetElement: forgetElement,\r\n                getTrackedElements: getTrackedElements,\r\n                dirtyTrackedElements: dirtyTrackedElements,\r\n                allowCascadingDirty: allowCascadingDirty\r\n            };\r\n\r\n            return service;\r\n            \r\n            /**\r\n             * Gets the html form containing the given element\r\n             * @param element\r\n             */\r\n            function getForm(element) {\r\n                element = ng.element(element);\r\n                var form = element.closest('form, ng-form, [ng-form]');\r\n\r\n                return form;\r\n            }\r\n\r\n            /**\r\n             * Gets the angular form instance from the nearest scope object\r\n             * @param element\r\n             */\r\n            function getFormInstance(scope, formInstance) {\r\n                if (!scope) {\r\n                    return null;\r\n                }\r\n\r\n                if (formInstance) {\r\n                    return formInstance;\r\n                }\r\n\r\n                if (util.isDefined(scope.$$parentForm)) {\r\n                    return scope.$$parentForm;\r\n                }\r\n\r\n                var foundForm = _.find(scope, function (item) {\r\n                    if (util.isObject(item) && util.isDefined(item.$$parentForm)) {\r\n                        return item.$$parentForm;\r\n                    }\r\n                });\r\n\r\n                if (foundForm) {\r\n                    return foundForm;\r\n                }\r\n\r\n                return getFormInstance(scope.$parent, foundForm);\r\n            }            \r\n\r\n            function getElementWithValidationModel(element) {\r\n                var el = ng.element(ng.element(element[0]).closest(\"[di-validate-model]\"));\r\n\r\n                return el;\r\n            }\r\n\r\n            /**\r\n             * Gets validation model of the form associated with the given element\r\n             * @param element\r\n             */\r\n            function getValidationModel(form) {\r\n                var model = form.attr('di-validate-model');\r\n\r\n                return model;\r\n            }\r\n\r\n            /**\r\n             * Checks if the form associated with the given element is valid\r\n             * @param element\r\n             */\r\n            function isFormValid(form) {\r\n                form = ng.element(form);\r\n                var isValid = form.hasClass('ng-valid');\r\n\r\n                return isValid;\r\n            }\r\n\r\n            /**\r\n             * Gets the ruleViolations associated with the given element\r\n             * @param element\r\n             */\r\n            function getRuleViolations(element) {\r\n                var ngModelController = element.data('$ngModelController');\r\n                var ruleViolations = ngModelController.valdrViolations;\r\n\r\n                return ruleViolations;\r\n            }\r\n\r\n            /**\r\n             * Adds the given element to the array of validated elements stored in the form's data collection\r\n             * @param element\r\n             */\r\n            function trackElement(form, element) {\r\n                var trackedElements = getTrackedElements(form);\r\n\r\n                trackedElements.push(element);\r\n            }\r\n\r\n            /**\r\n             * Removes the given element from the array of tracked elements on the form\r\n             * @param {} form \r\n             * @param {} element \r\n             * @returns {} \r\n             */\r\n            function forgetElement(form, element) {\r\n                var trackedElements = getTrackedElements(form);\r\n\r\n                var i = trackedElements.indexOf(element);\r\n\r\n                if (i !== -1) {\r\n                    trackedElements.splice(i, 1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Gets the array of validated elements stored in the form's data collection\r\n             * @param form\r\n             */\r\n            function getTrackedElements(form) {\r\n                form = ng.element(form);\r\n\r\n                var trackedElements = form.data('trackedElements');\r\n\r\n                if (!trackedElements) {\r\n                    trackedElements = [];\r\n\r\n                    form.data('trackedElements', trackedElements);\r\n                }\r\n\r\n                return trackedElements;\r\n            }\r\n\r\n            /**\r\n             * Marks all tracked elements as dirty\r\n             * @param {} form \r\n             * @param {} dirtyChildForms \r\n             * @returns {} \r\n             */\r\n            function dirtyTrackedElements(form, dirtyChildForms) {\r\n                form = ng.element(form);\r\n\r\n                if (!dirtyChildForms) {\r\n                    $timeout(function() {\r\n                        dirtyTrackedElementsForForm(form);\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                $timeout(function () {\r\n                    var allForms = form.parent().find('form, ng-form, [ng-form]');\r\n\r\n                    for (var i = 0; i < allForms.length; i++) {\r\n                        var formToDirty = ng.element(allForms[i]);\r\n\r\n                        if (formToDirty.data('excludeFromValidationDirtying')) {\r\n                            continue;\r\n                        }\r\n\r\n                        dirtyTrackedElementsForForm(formToDirty);\r\n                    }\r\n                });\r\n\r\n                return;\r\n\r\n                function dirtyTrackedElementsForForm(formToDirty) {\r\n                    var trackedElements = getTrackedElements(formToDirty);\r\n\r\n                    if (util.isArray(trackedElements)) {\r\n                        for (var ii = 0; ii < trackedElements.length; ii++) {\r\n                            var element = trackedElements[ii];\r\n\r\n                            element.toggleClass('ng-dirty', true);\r\n                            element.trigger('val');\r\n                            element.trigger('input');\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            function allowCascadingDirty(form, allow) {\r\n                form = ng.element(form);\r\n\r\n                if (allow) {\r\n                    form.data('excludeFromValidationDirtying', 'true');\r\n                } else {                    \r\n                    form.removeData('excludeFromValidationDirtying');\r\n                }\r\n            }\r\n        }\r\n\r\n        return formAnalyser;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/formAnalyser.js","//{CODE:DEF10}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('greaterValidator', greaterValidator);\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\t/**\r\n         * Validator service for validating numbers are greater than the constraint value\r\n         */\r\n\t\tfunction greaterValidator() {\r\n\t\t\tvar service = {\r\n\t\t\t\tname: 'greater',\r\n\t\t\t\tvalidate: validate\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\t/**\r\n             * Tests that the given number is greater than the specified constraint\r\n             */\r\n\t\t\tfunction validate(value, constraint) {\r\n\t\t\t\tif (util.isNullOrUndefined(value) || value === '') {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar minValue = Number(constraint.value);\r\n\t\t\t\tvar valueAsNumber = Number(value);\r\n\r\n\t\t\t\tif (!util.isNumber(valueAsNumber)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn valueAsNumber > minValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn greaterValidator;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/greaterValidator.js","//{CODE:CAV01}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('idValidator', idValidator);\r\n\r\n        /**\r\n         * Validator service for validating Id values\r\n         */\r\n        function idValidator() {\r\n            var service = {\r\n                name: 'id',\r\n                validate: validate\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Tests that the given value is a valid Id\r\n             * @param value\r\n             * @param args\r\n             */\r\n            function validate(value, args) {\r\n                try{\r\n                    guard.throwIfInvalidId(\"\", parseFloat(value), \"value\");\r\n\r\n                    return true;\r\n                } catch (e) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return idValidator;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/idValidator.js","//{CODE:DEF11}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('lessValidator', lessValidator);\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\t/**\r\n         * Validator service for validating numbers are less than the constraint value\r\n         */\r\n\t\tfunction lessValidator() {\r\n\t\t\tvar service = {\r\n\t\t\t\tname: 'less',\r\n\t\t\t\tvalidate: validate\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\t/**\r\n             * Tests that the given number is less than the specified constraint\r\n             */\r\n\t\t\tfunction validate(value, constraint) {\r\n\t\t\t\tif (util.isNullOrUndefined(value) || value === '') {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar maxValue = Number(constraint.value);\r\n\t\t\t\tvar valueAsNumber = Number(value);\r\n\r\n\t\t\t\tif (!util.isNumber(valueAsNumber)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn valueAsNumber < maxValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn lessValidator;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/lessValidator.js","//{CODE:DEF05}\r\ndefine(['moment'], function (moment) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('pastOrTodayValidator', pastOrTodayValidator);\r\n\r\n\t\tpastOrTodayValidator.$inject = ['diMoment'];\r\n\r\n\t\t/**\r\n         * Validator service for validating dates are in the past or today\r\n         */\r\n\t\tfunction pastOrTodayValidator(diMoment) {\r\n\t\t\tvar service = {\r\n\t\t\t\tname: 'pastOrToday',\r\n\t\t\t\tvalidate: validate\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\t/**\r\n             * Tests that the given date is a date in the past or today\r\n             */\r\n\t\t\tfunction validate(value) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn isInThePastOrToday(value);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction isInThePastOrToday(value) {\r\n\t\t\t\tif (isEmpty(value))\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\tvar date = diMoment(value);\r\n\t\t\t\tif (!date.isValid()) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdate = date.startOf('day');// set to 12:00 am today\r\n\t\t\t\tvar today = moment().startOf('day');\r\n\t\t\t\treturn date <= today;\r\n\t\t\t}\r\n\r\n\t\t\tfunction isEmpty(value) {\r\n\t\t\t\treturn (value === undefined || value === null || value === '');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn pastOrTodayValidator;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/pastOrTodayValidator.js","//{CODE:CAV0F}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.factory('positiveWholeNumberValidator', positiveWholeNumberValidator);\r\n\r\n        /**\r\n         * Validator service for validating positive whole numbers values\r\n         */\r\n        function positiveWholeNumberValidator() {\r\n            var service = {\r\n                name: 'positiveWholeNumber',\r\n                validate: validate\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Tests that the given value is a valid positive whole number\r\n             */\r\n            function validate(value) {\r\n                try {\r\n                   \r\n\r\n                    return isQuantity(value);\r\n                } catch (e) {\r\n                    return false;\r\n                }\r\n\r\n                function isQuantity(value) {\r\n                    var regex = /^0$|^[1-9][0-9]*$/;\r\n                    \r\n                    return regex.test(value);\r\n                }\r\n            }\r\n        }\r\n\r\n        return positiveWholeNumberValidator;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/positiveWholeNumberValidator.js","class ProductCodeCustomValidator {\r\n    constructor(comparerRegistrar) {\r\n        this._comparerRegistrar = comparerRegistrar;\r\n        this.name = 'productCodeCustom';\r\n    }\r\n    \r\n    validate(value, params, requiredModels) {\r\n        var productType = (requiredModels || {})[\"productType\"];\r\n        var propertyName = (params[\"requireModels\"] || [])[1];\r\n\r\n        if (productType && propertyName) {\r\n            var otherModelValue = (requiredModels || {})[propertyName];\r\n            var comparerName = params[\"clientComparerName\"] || \"default\";\r\n\r\n            //first check is service product type\r\n            if (productType === 2) {\r\n                return true;\r\n            } else {\r\n                //perform a requiredIfPairNotSet comparison \r\n                var valid = this._comparerRegistrar.compare(value, otherModelValue, 'requiredIfPairNotSet', comparerName);\r\n                return valid;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\nProductCodeCustomValidator.prototype.constructor.$inject = ['comparerRegistrar'];\r\n\r\nexport { ProductCodeCustomValidator }\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/product-code-custom-validator.service.js","//{CODE:CAV0I}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.factory('requireIfValidator', requireIfValidator);\r\n\r\n        /**\r\n         * Validator service for validating conditionally required values\r\n         */\r\n        function requireIfValidator() {\r\n            var service = {\r\n                validate: validate\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Tests for required value if second value is provided            \r\n             */\r\n            function validate(firstValue, secondValue) {\r\n                if (util.isNonEmptyString(secondValue))\r\n                    return util.isNonEmptyString(firstValue);\r\n                else\r\n                    return true;\r\n            }\r\n        }\r\n\r\n        return requireIfValidator;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/requireIfValidator.js","//{CODE:/AV05}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('requiredIfPairNotSetValidator', requiredIfPairNotSetValidator);\r\n\r\n\t\trequiredIfPairNotSetValidator.$inject = ['comparerRegistrar'];\r\n\r\n\t\t/**\r\n\t\t * returns false when value is not set and constraint value is not set and true otherwise\r\n\t\t */\r\n\t\tfunction requiredIfPairNotSetValidator(comparerRegistrar) {\r\n\t\t\tvar service = {\r\n\t\t\t\tname: 'requiredIfPairNotSet',\r\n\t\t\t\tvalidate: validate\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\tfunction validate(value, params, requiredModels) {\r\n\t\t\t\tvar propertyName = (params[\"requireModels\"] || [])[0];\r\n\t\t\t\tif (propertyName) {\r\n\t\t\t\t\tvar comparerName = params[\"clientComparerName\"] || \"default\";\r\n\r\n\t\t\t\t\tvar otherModelValue = (requiredModels || {})[propertyName];\r\n\r\n\t\t\t\t\tvar valid = comparerRegistrar.compare(value, otherModelValue, 'requiredIfPairNotSet', comparerName);\r\n\t\t\t\t\treturn valid;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn requiredIfPairNotSetValidator;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/requiredIfPairNotSetValidator.js","//{CODE:/AV03}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('requiredIfPairSetValidator', requiredIfPairSetValidator);\r\n\r\n\t\trequiredIfPairSetValidator.$inject = ['comparerRegistrar'];\r\n\r\n\t\t/**\r\n\t\t * returns false when value is not set and constraint value is set and true otherwise\r\n\t\t */\r\n\t\tfunction requiredIfPairSetValidator(comparerRegistrar) {\r\n\t\t\tvar service = {\r\n\t\t\t\tname: 'requiredIfPairSet',\r\n\t\t\t\tvalidate: validate\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\tfunction validate(value, params, requiredModels) {\t\t\t    \r\n\t\t\t\tvar propertyName = (params[\"requireModels\"] || [])[0];\r\n\t\t\t\tif (propertyName) {\r\n\t\t\t\t\tvar comparerName = params[\"clientComparerName\"] || \"default\";\r\n\r\n\t\t\t\t\tvar otherModelValue = (requiredModels || {})[propertyName];\r\n\r\n\t\t\t\t\tif (otherModelValue !== null &&\r\n                        otherModelValue !== undefined &&\r\n                        otherModelValue.toString() === 'NaN') return true;\r\n\r\n\t\t\t\t\tvar valid = comparerRegistrar.compare(value, otherModelValue, 'requiredIfPairSet', comparerName);\r\n\t\t\t\t\treturn valid;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn requiredIfPairSetValidator;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/requiredIfPairSetValidator.js","//{CODE:CAV0E}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('ruleViolationSelector', ruleViolationSelector);\r\n\r\n        ruleViolationSelector.$inject = ['validationRulesStore'];\r\n\r\n        /**\r\n         * Retrieves ruleViolation entries from an array of ruleViolations\r\n         */\r\n        function ruleViolationSelector(validationRulesStore) {\r\n            var service = {\r\n                getMostImportantRuleViolation: getMostImportantRuleViolation\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Selects the rule violation with the highest priority validation rule\r\n             * @param ruleViolations\r\n             * @param modelName\r\n             * @param propertyName\r\n             */\r\n            function getMostImportantRuleViolation(ruleViolations, modelName, propertyName) {\r\n                guard.throwIfNotArray(\"CAV0E01E\", ruleViolations, \"ruleViolations\");\r\n                \r\n                var validationRules = validationRulesStore.getValidationRules();\r\n                var highestPriority = 0;\r\n                var ruleViolation;\r\n                var validationRule;\r\n                var selectedRuleViolation;\r\n\r\n                for (var i = 0; i < ruleViolations.length; i++) {\r\n                    ruleViolation = ruleViolations[i];\r\n                    validationRule = validationRules[modelName][propertyName][ruleViolation.validator];\r\n\r\n                    if (highestPriority === 0 || validationRule.priority < highestPriority) {\r\n                        highestPriority = validationRule.priority;\r\n\r\n                        selectedRuleViolation = ruleViolation;\r\n                    }\r\n                }\r\n\r\n                return selectedRuleViolation;\r\n            }\r\n        }\r\n\r\n        return ruleViolationSelector;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/ruleViolationSelector.js","//{CODE:CAV08}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.provider('validationInitialiser', ValidationInitialiserProvider);\r\n\r\n        ValidationInitialiserProvider.$inject = ['valdrProvider'];\r\n\r\n        /**\r\n         * Manages validation configuration and setup\r\n         */\r\n        function ValidationInitialiserProvider(valdrProvider) {\r\n            var definitions = {\r\n                rules: {\r\n                    size: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.SIZE'\r\n                    },\r\n                    minLength: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.MIN_LENGTH'\r\n                    },\r\n                    maxLength: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.MAX_LENGTH'\r\n                    },\r\n                    min: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.MIN'\r\n                    },\r\n                    max: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.MAX'\r\n                    },\r\n                    required: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.REQUIRED'\r\n                    },\r\n                    pattern: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.PATTERN'\r\n                    },\r\n                    email: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.EMAIL'\r\n                    },\r\n                    digits: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.DIGITS'\r\n                    },\r\n                    url: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.URL'\r\n                    },\r\n                    future: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.FUTURE'\r\n                    },\r\n                    past: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.PAST'\r\n                    },\r\n                    id: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.ID'\r\n                    },\r\n                    positiveWholeNumber: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.POSITIVE_WHOLE_NUMBER'\r\n                    },\r\n                    equalIfSelfSet: {\r\n                    \tmessageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.EQUAL_IF_SELF_SET'\r\n                    },\r\n                    equalAlways: {\r\n                    \tmessageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.EQUAL_ALWAYS'\r\n                    },\r\n                    requiredIfPairSet: {\r\n                    \tmessageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.REQUIRED_IF_PAIR_SET'\r\n                    },\r\n                    requiredIfPairNotSet: {\r\n                    \tmessageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.REQUIRED_IF_PAIR_NOT_SET'\r\n                    },\r\n                    productCodeCustom: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.REQUIRED_IF_PAIR_NOT_SET'\r\n                    },\r\n                    pastOrToday: {\r\n                        messageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.PAST_OR_TODAY'\r\n                    },\r\n                    greater: {\r\n                    \tmessageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.MIN_EXCLUSIVE'\r\n                    },\r\n                    less: {\r\n                    \tmessageMask: 'CORE.VALIDATION.RULES.MESSAGE_MASKS.MAX_EXCLUSIVE'\r\n                    },\r\n                }\r\n            };\r\n\r\n            var provider = {\r\n                addValidator: addValidator,\r\n                $get: $get\r\n            };\r\n\r\n            provider.$get.$inject = ['valdr'];\r\n\r\n            return provider;\r\n\r\n            /**\r\n             * Adds a custom validator\r\n             * @param validationRules\r\n             */\r\n            function addValidator(validatorServiceName) {\r\n                guard.throwIfEmptyString(\"CAV0801E\", validatorServiceName, \"validatorServiceName\");\r\n\r\n                valdrProvider.addValidator(validatorServiceName);\r\n            }\r\n\r\n            function $get(valdr) {\r\n                var service = {\r\n                    definitions: definitions,\r\n                    applyValidationRules: applyValidationRules\r\n                };\r\n\r\n                return service;\r\n\r\n                /**\r\n                 * Applies given validationRules\r\n                 * @param validationRules\r\n                 */\r\n                function applyValidationRules(validationRules) {\r\n                    guard.throwIfNotAnObject(\"CAV0803E\", validationRules, \"validationRules\");\r\n\r\n                    valdr.addConstraints(validationRules);\r\n                }\r\n            }\r\n        }\r\n\r\n        return ValidationInitialiserProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/validationInitialiser.js","//{CODE:CAV0B}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('validationMessageGenerator', validationMessageGenerator);\r\n\r\n        validationMessageGenerator.$inject = ['validationInitialiser', 'translator'];\r\n\r\n        /**\r\n         * Service for generating validation error messages\r\n         */\r\n        function validationMessageGenerator(validationInitialiser, translator) {\r\n            var service = {\r\n                generateMessage: generateMessage\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Genererates an error message for the given ruleViolsation and property display name\r\n             * @param ruleViolations\r\n             * @param displayName\r\n             */\r\n            function generateMessage(ruleViolation, displayName, compareDisplayName) {\r\n                guard.throwIfNotAnObject(\"CAV0B01E\", ruleViolation, \"ruleViolation\");\r\n                guard.throwIfEmptyString(\"CAV0B02E\", displayName, \"displayName\");\r\n                guard.throwIfUndefined(\r\n                    \"CAV0B04E\",\r\n                    validationInitialiser.definitions.rules[ruleViolation.validator],\r\n                    \"Unknown validation rule: '\" + ruleViolation.validator + \"'\");\r\n\r\n\t            var messageMask = validationInitialiser.definitions.rules[ruleViolation.validator].messageMask;\r\n\t            var translationArgs = {};\r\n\r\n                switch (ruleViolation.validator) {\r\n                    case 'size':\r\n                        translationArgs = { displayName: displayName, min: ruleViolation.min, max: ruleViolation.max };\r\n                        break;\r\n\r\n                    case 'minLength':\r\n                        translationArgs = { displayName: displayName, number: ruleViolation.number };\r\n                        break;\r\n\r\n                    case 'maxLength':\r\n                        translationArgs = { displayName: displayName, number: ruleViolation.number };\r\n                        break;\r\n\r\n                    case 'min':\r\n                        translationArgs = { displayName: displayName, value: ruleViolation.value };\r\n                        break;\r\n\r\n                    case 'max':\r\n                        translationArgs = { displayName: displayName, value: ruleViolation.value };\r\n                        break;\r\n\r\n                    case 'required':\r\n                        translationArgs = { displayName: displayName };\r\n                        break;\r\n\r\n                    case 'pattern':\r\n                        translationArgs = { displayName: displayName };\r\n                        break;\r\n\r\n                    case 'email':\r\n                        translationArgs = { displayName: displayName };\r\n                        break;\r\n\r\n                    case 'digits':\r\n                        translationArgs = { displayName: displayName, fraction: ruleViolation.fraction };\r\n                        break;\r\n\r\n                    case 'url':\r\n                        translationArgs = { displayName: displayName };\r\n                        break;\r\n\r\n                    case 'future':\r\n                        translationArgs = { displayName: displayName };\r\n                        break;\r\n\r\n                    case 'past':\r\n                        translationArgs = { displayName: displayName };\r\n                        break;\r\n\r\n                    case 'id':\r\n                        translationArgs = { displayName: displayName };\r\n                        break;\r\n\r\n                    case 'positiveWholeNumber':\r\n                        translationArgs = { displayName: displayName };\r\n                        break;\r\n\r\n                \tcase 'equalAlways':\r\n                        translationArgs = { displayName: displayName, compareDisplayName: compareDisplayName };\r\n                        break;\r\n\r\n                \tcase 'equalIfSelfSet':\r\n                        translationArgs = { displayName: displayName, compareDisplayName: compareDisplayName };\r\n                        break;\r\n\r\n                \tcase 'requiredIfPairSet':\r\n                        translationArgs = { displayName: displayName, compareDisplayName: compareDisplayName };\r\n                        break;\r\n\r\n                \tcase 'requiredIfPairNotSet':\r\n                        translationArgs = { displayName: displayName, compareDisplayName: compareDisplayName };\r\n                        break;\r\n                    case 'productCodeCustom':\r\n                        translationArgs = { displayName: displayName, compareDisplayName: compareDisplayName };\r\n                        break;\r\n                    case 'pastOrToday':\r\n                        translationArgs = { displayName: displayName };\r\n                        break;\r\n\r\n                \tcase 'greater':\r\n                \t\ttranslationArgs = { displayName: displayName, value: ruleViolation.value };\r\n                \t\tbreak;\r\n\r\n                \tcase 'less':\r\n                \t\ttranslationArgs = { displayName: displayName, value: ruleViolation.value };\r\n                \t\tbreak;\r\n                }\r\n\r\n                var errorMessage = translator.instantTranslate(messageMask, translationArgs);\r\n\r\n                return errorMessage;\r\n            }\r\n        }\r\n\r\n        return validationMessageGenerator;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/validationMessageGenerator.js","//{CODE:CAV0A}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('validationNotifier', validationNotifier);\r\n\r\n        validationNotifier.$inject = ['elementNotifier'];\r\n\r\n        /**\r\n         * Displays/hides validation messages for form elements\r\n         */\r\n        function validationNotifier(notifier) {\r\n            var dataKey = 'validationNotifier';\r\n\r\n            var service = {\r\n                showNotification: showNotification,\r\n                hideNotification: hideNotification\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Displays a validation message on the given element\r\n             * @param element\r\n             * @param errorMessage\r\n             * @param position\r\n             */\r\n            function showNotification(element, errorMessage, position) {\r\n                guard.throwIfNotAnObject(\"CAV0A01E\", element, \"element\");\r\n                guard.throwIfEmptyString(\"CAV0A02E\", errorMessage, \"errorMessage\");\r\n\r\n                var validationNotification = element.data(dataKey);\r\n\r\n                if (validationNotification) {\r\n                    if (validationNotification.getMessage() !== errorMessage) {\r\n                        validationNotification.setMessage(errorMessage);\r\n                    }\r\n\r\n                    validationNotification.show();\r\n                } else {\r\n                    validationNotification = notifier.error(errorMessage, element, {\r\n                        clickToHide: false,\r\n                        autoHide: false,\r\n                        position: position\r\n                    });\r\n\r\n                    element.data(dataKey, validationNotification);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Hides the validation message on the given element\r\n             * @param element\r\n             */\r\n            function hideNotification(element) {\r\n                guard.throwIfNotAnObject(\"CAV0A03E\", element, \"element\");\r\n\r\n                var validationNotification = element.data(dataKey);\r\n\r\n                if (validationNotification) {\r\n                    validationNotification.hide();\r\n                }\r\n            }\r\n        }\r\n\r\n        return validationNotifier;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/validationNotifier.js","//{CODE:CAV05}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.provider('validationRulesProxy', ValidationRulesProxyProvider);\r\n\r\n        /**\r\n         * Proxy client for retrieving validation rules from the webAPI server\r\n         */\r\n        function ValidationRulesProxyProvider() {\r\n            var config = {\r\n                url: 'EntityValidationRule/GetEntityValidationRules'\r\n            };\r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            };\r\n\r\n            provider.$get.$inject = ['webApiHttp', '$q', 'urlHelper'];\r\n\r\n            return provider;\r\n\r\n            /**\r\n             * Configure the service\r\n             * @param cfg\r\n             */\r\n            function configure(cfg) {\r\n                guard.throwIfNotAnObject(\"CAV0502E\", cfg, \"cfg\");\r\n\r\n                config = cfg;\r\n            }\r\n\r\n            function $get(webApiHttp, $q, urlHelper) {\r\n                var service = {\r\n                    getValidationRules: getValidationRules\r\n                };\r\n\r\n                return service;\r\n\r\n                /**\r\n                 * Retrieves validation rules for all entities for the given user\r\n                 * @param userId\r\n                 */\r\n                function getValidationRules(entityNames) {\r\n                    var url = config.url;\r\n                   \r\n                    var requestParameters = {\r\n                        entityNames: entityNames\r\n                    };\r\n\r\n                    var requestUrl = urlHelper.setParameters(url, requestParameters);\r\n\r\n                    var promise = webApiHttp.get(requestUrl).then(success, failure);\r\n\r\n                    function success(validationRulesString) {\r\n                        return JSON.parse(validationRulesString);\r\n                    }\r\n\r\n                    function failure(data) {\r\n                        return $q.reject(data);\r\n                    }\r\n\r\n                    return promise;\r\n                }\r\n            }\r\n        }\r\n\r\n        return ValidationRulesProxyProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/validationRulesProxy.js","//{CODE:CAV0L}\r\n// di.core.angular.validation\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('validationRulesSetter', validationRulesSetter);\r\n\r\n        validationRulesSetter.$inject = ['validationRulesProxy', 'validationRulesStore', 'validationInitialiser'];\r\n\r\n        function validationRulesSetter(validationRulesProxy, validationRulesStore, validationInitialiser) {\r\n            var service = {\r\n                setValidationRules: setValidationRules\r\n            };\r\n\r\n            return service;\r\n            \r\n            function setValidationRules(entityNames) {\r\n                guard.throwIfEmptyString(\"CAV0L01E\", entityNames, \"entityNames\");\r\n\r\n                validationRulesProxy.getValidationRules(entityNames).then(resolved, rejected);\r\n\r\n                function resolved(validationRules) {\r\n                    validationRulesStore.setValidationRules(validationRules);\r\n\r\n                    validationInitialiser.applyValidationRules(validationRules);\r\n                }\r\n\r\n                function rejected() {\r\n                }\r\n            }\r\n        }\r\n\r\n        return validationRulesSetter;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/validationRulesSetter.js","//{CODE:CAV06}\r\n// di.core.angular.validation\r\ndefine([\r\n    'angular'\r\n], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('validationRulesStore', validationRulesStore);\r\n\r\n        validationRulesStore.$inject = ['sessionStore'];\r\n\r\n        /**\r\n         * Stores and retrieves validation rules from local storage\r\n         */\r\n        function validationRulesStore(sessionStore) {\r\n            var storeKey = 'validationRules';\r\n\r\n            var service = {\r\n                getValidationRules: getValidationRules,\r\n                setValidationRules: setValidationRules,\r\n                clear: clear\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * Gets validation rules\r\n             * @param name\r\n             */\r\n            function getValidationRules() {\r\n                var validationRules = sessionStore.get(storeKey, 'validationRulesStore');\r\n\r\n                return validationRules;\r\n            }\r\n\r\n            /**\r\n             * Stores the given validation rules in local storage\r\n             * @param rules\r\n             */\r\n            function setValidationRules(validationRules) {\r\n                guard.throwIfNotAnObject(\"CAV0602E\", validationRules, \"validationRules\");\r\n                \r\n                var existingRules = sessionStore.get(storeKey, 'validationRulesStore');\r\n\r\n                var mergedRules = ng.extend({}, existingRules, validationRules);\r\n\r\n                sessionStore.set(storeKey, mergedRules, 'validationRulesStore');\r\n            }\r\n\r\n            /**\r\n             * Removes validation rules from local storage\r\n             */\r\n            function clear() {\r\n                sessionStore.remove(storeKey, 'validationRulesStore');\r\n            }\r\n        }\r\n\r\n        return validationRulesStore;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/validation/validationRulesStore.js","//{CODE:CAW04}\r\n// di.core.angular.watchers\r\ndefine([\r\n    './watcherHelper',\r\n    './watchersTogglerDirective',\r\n    './debounce'\r\n], function(\r\n    watcherHelperLoader,\r\n    watchersTogglerDirectiveLoader,\r\n    debounceLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        watcherHelperLoader(module);\r\n        watchersTogglerDirectiveLoader(module);\r\n        debounceLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/watchers/_loader.js","//{CODE:CAW06}\r\n// di.core.angular.watchers\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.factory('debounce', debounce);\r\n\r\n        debounce.$inject = ['$timeout'];\r\n\r\n        function debounce($timeout) {\r\n\r\n            return function (callback, interval) {\r\n                var timeout = null;\r\n                return function () {\r\n                    $timeout.cancel(timeout);\r\n                    var args = arguments;\r\n                    timeout = $timeout(function () {\r\n                        callback.apply(this, args);\r\n                    }, interval);\r\n                };\r\n            };\r\n        }\r\n\r\n        return debounce;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/watchers/debounce.js","//{CODE:CAW03}\r\n// di.core.angular.watchers\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n    module.factory('watcherHelper', watcherHelper);\r\n\r\n        function watcherHelper() {\r\n\r\n            //var guard = $di.exception.guard;\r\n            //var util = $di.utility.util;\r\n\r\n            return {\r\n                toggleWatchers: toggleWatchers\r\n            };\r\n\r\n\r\n\r\n            function toggleWatchers(scope, enable) {\r\n               \r\n                var digest, current, next = scope;\r\n                do {\r\n                    current = next;\r\n                    if (enable) {\r\n                        if (current.hasOwnProperty(\"$$watchersBackup\")) {\r\n                            current.$$watchers = current.$$watchersBackup;\r\n                            delete current.$$watchersBackup;\r\n                            delete current.$watch;\r\n                            digest = !scope.$root.$$phase;\r\n                        }\r\n                    } else {\r\n                        if (!current.hasOwnProperty(\"$$watchersBackup\")) {\r\n                            current.$$watchersBackup = current.$$watchers;\r\n                            current.$$watchers = null;\r\n                            current.$watch = watchDuringDisable;\r\n                        }\r\n                    }\r\n                    next = current.$$childHead;\r\n                    while (!next && current !== scope) {\r\n                        if (current.$$nextSibling) {\r\n                            next = current.$$nextSibling;\r\n                        } else {\r\n                            current = current.$parent;\r\n                        }\r\n                    }\r\n                } while (next);\r\n                if (digest) {\r\n                    scope.$digest();\r\n                }\r\n\r\n                return;\r\n\r\n                function watchDuringDisable() {\r\n                    scope.$$watchersBackup = scope.$$watchersBackup || [];\r\n                    scope.$$watchers = scope.$$watchersBackup;\r\n                    var unwatch = scope.constructor.prototype.$watch.apply(scope, arguments);\r\n                    scope.$$watchers = null;\r\n                    return unwatch;\r\n                }\r\n            }\r\n\r\n           \r\n\r\n        }\r\n\r\n        return watcherHelper;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/watchers/watcherHelper.js","//{CODE:CAW05}\r\n// di.core.angular.watchers\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.directive('diWatchersToggler', diWatchersToggler);\r\n\r\n        diWatchersToggler.$inject = ['$parse'];\r\n\r\n        function diWatchersToggler($parse) {\r\n            return {\r\n                restrict: 'EA',\r\n                link: function($scope, element, attrs) {\r\n                    var watchers = {\r\n                        suspended: false\r\n                    };\r\n                    \r\n                    var identifier = attrs.diWatchersToggler;\r\n\r\n                    $scope.$evalAsync(suspendWatchers);\r\n\r\n                    $scope.$on('suspendWatchers',\r\n                        function (event, id) {\r\n                            if (id === identifier) {\r\n                                suspendWatchers();\r\n                            }\r\n                        });\r\n\r\n                    $scope.$on('resumeWatchers',\r\n                        function (event, id) {\r\n                            if (id === identifier) {\r\n                                resumeWatchers();\r\n                            }\r\n                        });\r\n\r\n                    $scope.$on('refreshWatchers',\r\n                        function () {\r\n                            refreshSuspendedWatchers();\r\n                        });\r\n\r\n                    return;\r\n\r\n                    function suspendWatchers() {\r\n                        if (!watchers.suspended) {\r\n                            iterateScopeMembers(suspendScopeWatchers);\r\n\r\n                            watchers.suspended = true;\r\n\r\n                            return;\r\n\r\n                            function suspendScopeWatchers(scope) {\r\n                                if (!watchers[scope.$id]) {\r\n                                    watchers[scope.$id] = scope.$$watchers || [];\r\n                                    scope.$$watchers = [];\r\n                                    scope.$watch = mockScopeWatch(scope.$id);\r\n                                }\r\n\r\n                                return;\r\n\r\n                                function mockScopeWatch(scopeId) {\r\n                                    return function (watchExp, listener, objectEquality, prettyPrintExpression) {\r\n                                        watchers[scopeId].unshift({\r\n                                            fn: angular.isFunction(listener) ? listener : angular.noop,\r\n                                            last: void 0,\r\n                                            get: $parse(watchExp),\r\n                                            exp: prettyPrintExpression || watchExp,\r\n                                            eq: !!objectEquality\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    function resumeWatchers() {\r\n                        if (watchers.suspended) {\r\n                            iterateScopeMembers(resumeScopeWatchers);\r\n\r\n                            watchers.suspended = false;\r\n\r\n                            return;\r\n\r\n                            function resumeScopeWatchers(scope) {\r\n                                if (util.isDefined(watchers[scope.$id])) {\r\n                                    scope.$$watchers = watchers[scope.$id];\r\n\r\n                                    if (scope.hasOwnProperty('$watch')) {\r\n                                        delete scope.$watch;\r\n                                    }\r\n\r\n                                    delete watchers[scope.$id];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    function refreshSuspendedWatchers() {\r\n                        if (watchers.suspended) {\r\n                            resumeWatchers();\r\n                            suspendWatchers();\r\n                        }\r\n                    }\r\n\r\n                    function iterateScopeMembers(operationOnScope) {\r\n                        var root = $scope;\r\n                        var pendingChildHeads = [root.$$childHead];\r\n                        var currentScope;\r\n\r\n                        while (pendingChildHeads.length) {\r\n                            currentScope = pendingChildHeads.shift();\r\n\r\n                            while (currentScope) {\r\n                                operationOnScope(currentScope);\r\n                                pendingChildHeads.push(currentScope.$$childHead);\r\n                                currentScope = currentScope.$$nextSibling;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return diWatchersToggler;\r\n    };\r\n});\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/watchers/watchersTogglerDirective.js","//{CODE:CAU0F}\r\n// di.core.angular.window\r\ndefine([\r\n\t'./diClickAwayDirective',\r\n\t'./windowEventSubscriber'\r\n], function (\r\n    diClickAwayDirectiveLoader,\r\n    windowEventSubscriberLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    diClickAwayDirectiveLoader(module);\r\n\t    windowEventSubscriberLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/window/_loader.js","//{CODE:CAW02}\r\n// di.core.angular.window\r\ndefine([\r\n    'angular'\r\n], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var moduleName = 'diClickAway';\r\n\r\n        module.directive(moduleName, diClickAway);\r\n\r\n        diClickAway.$inject = ['$parse', 'uniqueIdGenerator', 'windowEventSubscriber'];\r\n\r\n        function diClickAway($parse, uniqueIdGenerator, windowEventSubscriber) {\r\n            return {\r\n                restrict: 'A',\r\n                link: link\r\n            };\r\n\r\n            function link(scope, element, attrs) {\r\n                var className = uniqueIdGenerator.newId(moduleName);\r\n                var callback = $parse(attrs.diClickAway);\r\n                var ignoreClass = attrs.diClickAwayIgnore;\r\n                var childElements;\r\n\r\n                element = ng.element(element);\r\n\r\n                element.addClass(className);\r\n\r\n                windowEventSubscriber.subscribeToClickAwayByClass(className, function (clickedElement) {\r\n                    if (className && ignoreClass && clickedElement.closest('.' + ignoreClass).length > 0) {\r\n                        return;\r\n                    }\r\n\r\n                    scope.$apply(callback);\r\n                }, scope);\r\n\r\n                element.removeAttr('di-click-away');\r\n            }\r\n        }\r\n\r\n        return diClickAway;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/window/diClickAwayDirective.js","//{CODE:CAW01}\r\n// di.core.angular.window\r\ndefine([\r\n    'angular'\r\n], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('windowEventSubscriber', windowEventSubscriber);\r\n\r\n        windowEventSubscriber.$inject = ['$window'];\r\n\r\n        /**\r\n         * Provides a mechanism for subscribing to window-level events\r\n         */\r\n        function windowEventSubscriber($window) {\r\n            var service = {\r\n                subscribeToClickAway: subscribeToClickAway,\r\n                subscribeToClickAwayByClass: subscribeToClickAwayByClass\r\n            };\r\n\r\n            return service;\r\n\r\n            /**\r\n             * When the window is clicked on an element without the given class\r\n             * then the given callback is called with a reference to the clicked element.\r\n             */\r\n            function subscribeToClickAwayByClass(className, callback, scope) {\r\n                subscribeToClickAway(comparer, callback, scope);\r\n\r\n                function comparer(clickedElement) {\r\n                    return clickedElement.closest('.' + className).length > 0;\r\n                }\r\n            }\r\n\r\n            /**\r\n             * When the window is clicked outside of an element\r\n             * then the given callback is called with a reference to the clicked element.\r\n             * The comparer function is used to test the clicked element\r\n             */\r\n            function subscribeToClickAway(comparer, callback, scope) {\r\n                guard.throwIfNotAFunction(\"CAU0E01E\", comparer, \"comparer\");\r\n                guard.throwIfNotAFunction(\"CAU0E02E\", callback, \"callback\");\r\n\r\n                var jqWindow = ng.element($window);\r\n\r\n                var newWindowClickFun = function (event) {\r\n                    var clickedElement = event.target;\r\n\r\n                    if (!clickedElement) {\r\n                        return;\r\n                    }\r\n\r\n                    clickedElement = ng.element(clickedElement);\r\n\r\n                    if (!comparer(clickedElement)) {\r\n                        callback(clickedElement);\r\n                    }\r\n                };\r\n\r\n                jqWindow.on('click', newWindowClickFun);\r\n\r\n                scope.$on('$destroy', function() {\r\n                    jqWindow.off('click', newWindowClickFun);\r\n                });\r\n            }\r\n        }\r\n\r\n        return windowEventSubscriber;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/spa/window/windowEventSubscriber.js","//{CODE:EUP0B}\r\n// di.einvoicing.ui.portal.core\r\n\r\ndefine(['./config'], function (configModule) {\r\n    'use strict';\r\n\r\n    var config = configModule.config;\r\n\r\n    return function (module) {\r\n        module.constant('PORTAL_CONFIG', config);\r\n\r\n        module.config(endpointsConfig);\r\n        module.config(configureLocationProvider);\r\n        module.config(httpConfig);\r\n        module.config(loggerProxyConfig);\r\n        module.config(exceptionHandlerConfig);\r\n        module.config(notifierConfig);\r\n        module.config(translationModuleConfig);\r\n        module.config(userAuthenticationProxyConfig);\r\n        module.config(stateAuthenticatorConfig);\r\n        module.config(authenticationClientEventSubscriberConfig);\r\n        module.config(validationInitialiserConfig);\r\n        module.config(configureValdrDateValidation);\r\n        module.config(invoiceListConfiguratorConfig);\r\n        module.config(auditListConfiguratorConfig);\r\n        module.config(purchaseOrderListConfiguratorConfig);\r\n        module.config(purchaseOrderViewerLinesConfiguratorConfig);\r\n        module.config(userSecurityProxyConfig);\r\n        module.config(documentAttachmentConfiguratorConfig);\r\n        module.config(relatedDocumentsConfiguratorConfig);\r\n        module.config(grnListConfiguratorConfig);\r\n        module.config(serviceStatusMonitorConfig);\r\n        module.config(userIdleActivityMonitorConfig);\r\n        module.config(forceUrlReloaderConfig);\r\n\r\n        $di.debug.debugger.enabled = config.debuggerEnabled;\r\n\r\n        endpointsConfig.$inject = ['endpointsProvider'];\r\n\r\n        function endpointsConfig(endpointsProvider) {\r\n            endpointsProvider.configure({\r\n                endpoints: {\r\n                    webApi: config.app.webApiAddress,\r\n                    app: config.app.appUrl\r\n                },\r\n                defaultEndpoint: 'webApi'\r\n            });\r\n        }\r\n\r\n        configureLocationProvider.$inject = ['$locationProvider'];\r\n\r\n        function configureLocationProvider($locationProvider) {\r\n            $locationProvider.html5Mode(true);\r\n        }\r\n\r\n        httpConfig.$inject = ['$httpProvider'];\r\n\r\n        function httpConfig($httpProvider) {\r\n            $httpProvider.defaults.useXDomain = true;\r\n\r\n            $httpProvider.defaults.headers.common['Cache-Control'] = 'no-cache';\r\n            $httpProvider.defaults.headers.common['Pragma'] = 'no-cache';\r\n            $httpProvider.defaults.headers.common['ClientVersion'] = config.app.version;\r\n\r\n            delete $httpProvider.defaults.headers.common['X-Requested-With'];\r\n        }\r\n\r\n        loggerProxyConfig.$inject = ['loggerProxyProvider'];\r\n\r\n        function loggerProxyConfig(loggerProxyProvider) {\r\n            loggerProxyProvider.configure({\r\n                endpoint: 'webApi',\r\n                url: 'log',\r\n                logInfoToServer: true,\r\n                logWarningToServer: true,\r\n                logErrorToServer: true\r\n            });\r\n        }\r\n\r\n        exceptionHandlerConfig.$inject = ['exceptionHandlerProvider'];\r\n\r\n        function exceptionHandlerConfig(exceptionHandlerProvider) {\r\n            exceptionHandlerProvider.configure({\r\n                appErrorPrefix: '[EInvoicing] ',\r\n                appTitle: 'Di.EInvoicing.Ui.Portal',\r\n                version: '1.1.0',\r\n                notify: true\r\n            });\r\n        }\r\n\r\n        notifierConfig.$inject = ['notifierProvider'];\r\n\r\n        function notifierConfig(notifierProvider) {\r\n            notifierProvider.configure({\r\n                \"closeButton\": true,\r\n                successTimeOut: 5000,\r\n                infoTimeOut: 5000,\r\n                warningTimeOut: 10000,\r\n                errorTimeOut: 0,\r\n                positionClass: 'toast-top-center'\r\n            });\r\n        }\r\n\r\n        translationModuleConfig.$inject = ['$translateProvider'];\r\n\r\n        function translationModuleConfig($translateProvider) {\r\n            $translateProvider.useStaticFilesLoader({\r\n                prefix: './src/languages/',\r\n                suffix: '.json'\r\n            });\r\n            $translateProvider.useSanitizeValueStrategy(null);\r\n        }\r\n\r\n        webApiHttpConfig.$inject = ['webApiHttpProvider'];\r\n\r\n        function webApiHttpConfig(webApiHttpProvider) {\r\n            webApiHttpProvider.configure({\r\n                endpointName: 'webApi'\r\n            });\r\n        }\r\n\r\n        userAuthenticationProxyConfig.$inject = ['userAuthenticationProxyProvider'];\r\n\r\n        function userAuthenticationProxyConfig(userAuthenticationProxyProvider) {\r\n            userAuthenticationProxyProvider.configure({\r\n                endpoint: 'webApi',\r\n                url: 'token',\r\n                clientId: 'Di.EInvoicing.Ui.Portal'\r\n            });\r\n        }\r\n\r\n        stateAuthenticatorConfig.$inject = ['stateAuthenticatorProvider'];\r\n\r\n        function stateAuthenticatorConfig(stateAuthenticatorProvider) {\r\n            stateAuthenticatorProvider.configure({\r\n                securityEnabled: true,\r\n                loginState: 'welcome'\r\n            });\r\n        }\r\n\r\n        authenticationClientEventSubscriberConfig.$inject = ['authenticationClientEventSubscriberProvider'];\r\n\r\n        function authenticationClientEventSubscriberConfig(authenticationClientEventHandlerProvider) {\r\n            authenticationClientEventHandlerProvider.configure({\r\n                unauthenticatedState: 'welcome',\r\n                authenticatedState: 'portal.dashboard',\r\n                changePasswordState: 'portal.account.management'\r\n            });\r\n        }\r\n\r\n        validationInitialiserConfig.$inject = ['validationInitialiserProvider'];\r\n\r\n        function validationInitialiserConfig(validationInitialiserProvider) {\r\n            validationInitialiserProvider.addValidator('idValidator');\r\n            validationInitialiserProvider.addValidator('positiveWholeNumberValidator');\r\n            validationInitialiserProvider.addValidator('pastOrTodayValidator');\r\n            validationInitialiserProvider.addValidator('greaterValidator');\r\n            validationInitialiserProvider.addValidator('lessValidator');\r\n            validationInitialiserProvider.addValidator('equalAlwaysValidator');\r\n            validationInitialiserProvider.addValidator('equalIfSelfSetValidator');\r\n            validationInitialiserProvider.addValidator('requiredIfPairSetValidator');\r\n            validationInitialiserProvider.addValidator('requiredIfPairNotSetValidator');\r\n            validationInitialiserProvider.addValidator('productCodeCustomValidator');\r\n        }\r\n\r\n        configureValdrDateValidation.$inject = ['$provide'];\r\n        function configureValdrDateValidation($provide) {\r\n            $provide.decorator('futureAndPastSharedValidator', futureAndPastSharedValidatorWithDiMoment);\r\n        }\r\n\r\n        futureAndPastSharedValidatorWithDiMoment.$inject = ['$delegate', 'diMoment'];\r\n        function futureAndPastSharedValidatorWithDiMoment(delegate, diMoment) {\r\n            return {\r\n                validate: function (value, comparison) {\r\n                    var valueAsDiMoment = diMoment(value);\r\n                    return delegate.validate(valueAsDiMoment, comparison);\r\n                }\r\n            };\r\n        }\r\n\r\n        invoiceListConfiguratorConfig.$inject = ['invoiceListConfiguratorProvider'];\r\n\r\n        function invoiceListConfiguratorConfig(invoiceListConfiguratorProvider) {\r\n\r\n            var cfg = {\r\n                data: [],\r\n                columns: [],\r\n                enableSelect: true,\r\n                multiSelect: true,\r\n                enablePaging: true,\r\n                fixedHeight: true,\r\n                maxItemsToShow: 500,\r\n                paginationPageSizes: [5, 10, 15, 20, 25, 50],\r\n                paginationPageSize: 10,\r\n                paginationPageNumber: 1,\r\n                maxButtonsShown: 3,\r\n                pagination: {\r\n                    seek: function () { }\r\n                }\r\n            }\r\n\r\n            invoiceListConfiguratorProvider.configure(cfg);\r\n        }\r\n\r\n        purchaseOrderListConfiguratorConfig.$inject = ['purchaseOrderListConfiguratorProvider'];\r\n\r\n        function purchaseOrderListConfiguratorConfig(purchaseOrderListConfiguratorProvider) {\r\n\r\n            var cfg = {\r\n                data: [],\r\n                columns: [],\r\n                enableSelect: true,\r\n                multiSelect: true,\r\n                enablePaging: true,\r\n                fixedHeight: true,\r\n                maxItemsToShow: 500,\r\n                paginationPageSizes: [5, 10, 15, 20, 25, 50],\r\n                paginationPageSize: 10,\r\n                paginationPageNumber: 1,\r\n                maxButtonsShown: 3,\r\n                pagination: {\r\n                    seek: function () { }\r\n                }\r\n            }\r\n\r\n            purchaseOrderListConfiguratorProvider.configure(cfg);\r\n        }\r\n\r\n        auditListConfiguratorConfig.$inject = ['auditListConfiguratorProvider'];\r\n\r\n        function auditListConfiguratorConfig(auditListConfiguratorProvider) {\r\n\r\n            var cfg = {\r\n                data: [],\r\n                columns: [],\r\n                enableSelect: true,\r\n                multiSelect: false,\r\n                enablePaging: true,\r\n                fixedHeight: true,\r\n                maxItemsToShow: 500,\r\n                paginationPageSizes: [20, 25, 50],\r\n                paginationPageSize: 20,\r\n                paginationPageNumber: 1,\r\n                maxButtonsShown: 3,\r\n                pagination: {\r\n                    seek: function () { }\r\n                }\r\n            }\r\n\r\n            auditListConfiguratorProvider.configure(cfg);\r\n        }\r\n\r\n\r\n        purchaseOrderViewerLinesConfiguratorConfig.$inject = ['purchaseOrderViewerLinesConfiguratorProvider'];\r\n\r\n        function purchaseOrderViewerLinesConfiguratorConfig(purchaseOrderViewerLinesConfiguratorProvider) {\r\n\r\n            var cfg = {\r\n                data: [],\r\n                columns: [],\r\n                enableSelect: false,\r\n                multiSelect: false,\r\n                enablePaging: false,\r\n                fixedHeight: true,\r\n                maxItemsToShow: 500\r\n            }\r\n\r\n            purchaseOrderViewerLinesConfiguratorProvider.configure(cfg);\r\n        }\r\n\r\n        userSecurityProxyConfig.$inject = ['userSecurityProxyProvider'];\r\n\r\n        function userSecurityProxyConfig(userSecurityProxyProvider) {\r\n            userSecurityProxyProvider.configure({\r\n                endpoint: 'app',\r\n                getSecurityQuestionUrl: 'UserSecurity/GetSecurityQuestion',\r\n                requestPasswordResetUrl: 'UserSecurity/RequestPasswordResetEmail',\r\n                changePasswordUrl: 'UserSecurity/ChangePassword',\r\n                resetPasswordUrl: 'UserSecurity/ResetPassword',\r\n                resetPasswordSiteUrl: '/welcome/',\r\n                getUserUrl: 'UserSecurity/GetUser',\r\n                getQuestionsUrl: 'UserSecurity/GetSecurityQuestions',\r\n                setSecurityQuestionUrl: 'UserSecurity/SetSecurityQuestion',\r\n                requestPasswordResetUrlOnUserBehalf: 'UserSecurity/RequestPasswordResetEmailOnUserBehalf',\r\n                setPasswordWithTokenUrl: 'UserSecurity/SetPasswordWithToken',\r\n                setPasswordAndQuestionWithTokenUrl: 'UserSecurity/SetPasswordAndQuestionWithToken'\r\n            });\r\n        }\r\n\r\n        documentAttachmentConfiguratorConfig.$inject = ['documentAttachmentConfiguratorProvider'];\r\n\r\n        function documentAttachmentConfiguratorConfig(documentAttachmentConfigurationProvider) {\r\n            documentAttachmentConfigurationProvider.configure({\r\n                maximumAttachmentSize: '10MB',\r\n                disallowedFileExtensions: ['ade', 'adp', 'app', 'asp', 'bas', 'bat', 'cer', 'chm', 'cmd', 'cnt', 'com', 'cpl', 'crt', 'csh', 'der', 'exe', 'fxp',\r\n\t\t\t\t\t\t\t\t\t\t'gadget', 'grp', 'hlp', 'hpj', 'hta', 'inf', 'ins', 'isp', 'its', 'jar', 'jnlp', 'js', 'jse', 'ksh', 'lnk', 'mad',\r\n\t\t\t\t\t\t\t\t\t\t'maf', 'mag', 'mam', 'maq', 'mar', 'mas', 'mat', 'mau', 'mav', 'maw', 'mcf', 'mda', 'mdb', 'mde', 'mdt', 'mdw', 'mdz',\r\n\t\t\t\t\t\t\t\t\t\t'msc', 'msh', 'msh1', 'msh2', 'mshxml', 'msh1xml', 'msh2xml', 'msi', 'msp', 'mst', 'ops', 'osd', 'pcd', 'pif', 'pl',\r\n\t\t\t\t\t\t\t\t\t\t'plg', 'prf', 'prg', 'ps1', 'ps1xml', 'ps2', 'ps2xml', 'psc1', 'psc2', 'pst', 'reg', 'scf', 'scr', 'sct', 'shb', 'shs',\r\n\t\t\t\t\t\t\t\t\t\t'tmp', 'url', 'vb', 'vbe', 'vbp', 'vbs', 'vsmacros', 'vsw', 'ws', 'wsc', 'wsf', 'wsh', 'xbap', 'xll', 'xnk']\r\n            });\r\n        }\r\n\r\n        relatedDocumentsConfiguratorConfig.$inject = ['relatedDocumentsConfiguratorProvider'];\r\n\r\n        function relatedDocumentsConfiguratorConfig(relatedDocumentsConfiguratorProvider) {\r\n            var cfg = {\r\n                data: [],\r\n                columns: [],\r\n                enableSelect: true,\r\n                multiSelect: false,\r\n                enablePaging: true,\r\n                fixedHeight: true,\r\n                maxItemsToShow: 500,\r\n                paginationPageSizes: [5, 10, 15, 20, 25, 50],\r\n                paginationPageSize: 10,\r\n                paginationPageNumber: 1,\r\n                maxButtonsShown: 3,\r\n                pagination: {\r\n                    seek: function () { }\r\n                }\r\n            }\r\n\r\n            relatedDocumentsConfiguratorProvider.configure(cfg);\r\n        }\r\n\r\n        grnListConfiguratorConfig.$inject = ['grnListConfiguratorProvider'];\r\n\r\n        function grnListConfiguratorConfig(grnListConfiguratorProvider) {\r\n            var cfg = {\r\n                data: [],\r\n                columns: [],\r\n                enableSelect: true,\r\n                multiSelect: false,\r\n                enablePaging: true,\r\n                fixedHeight: true,\r\n                maxItemsToShow: 500,\r\n                paginationPageSizes: [5, 10, 15, 20, 25, 50],\r\n                paginationPageSize: 10,\r\n                paginationPageNumber: 1,\r\n                maxButtonsShown: 3,\r\n                pagination: {\r\n                    seek: function () { }\r\n                }\r\n            }\r\n\r\n            grnListConfiguratorProvider.configure(cfg);\r\n        }\r\n\r\n        serviceStatusMonitorConfig.$inject = ['serviceStatusMonitorProvider'];\r\n\r\n        function serviceStatusMonitorConfig(serviceStatusMonitorProvider) {\r\n            var cfg = {\r\n                pollingInterval: 600000\r\n            }\r\n\r\n            serviceStatusMonitorProvider.configure(cfg);\r\n        }\r\n\r\n        userIdleActivityMonitorConfig.$inject = ['userIdleActivityMonitorProvider', 'IdleProvider'];\r\n\r\n        function userIdleActivityMonitorConfig(userIdleActivityMonitorProvider, idleProvider) {\r\n            var cfg = {\r\n                timeout: Number(config.app.sessionTimeout),\r\n                idle: Number(config.app.sessionIdle),\r\n                pageTitle: 'Data Interchange | Digital Invoice'\r\n            }\r\n\r\n            userIdleActivityMonitorProvider.configure(cfg, idleProvider);\r\n        }\r\n\r\n        forceUrlReloaderConfig.$inject = ['forceUrlReloaderProvider'];\r\n\r\n        function forceUrlReloaderConfig(forceUrlReloaderProvider) {\r\n            forceUrlReloaderProvider.configure({\r\n                enableForceUrlReload: config.app.enableForceUrlReload,\r\n                forceUrlReloadLimit: Number(config.app.forceUrlReloadLimit),\r\n                stateNames: config.app.forceUrlStateNames\r\n            });\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/_config.js","//{CODE:EUP2E}\r\n// di.einvoicing.ui.portal.core\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.run(configureInitialLanguage);\r\n\t\tmodule.run(stateChangeStartEventHandler);\r\n\t\tmodule.run(initLoginLogoutEventHandler);\r\n\t\tmodule.run(applyValidationRules);\r\n\t\tmodule.run(readAuthenticationStore);\r\n\r\n\t\tconfigureInitialLanguage.$inject = ['languageHandler'];\r\n\t\tfunction configureInitialLanguage(languageHandler) {\r\n\t\t\tlanguageHandler.applyLanguage();\r\n\t\t}\r\n\r\n\t\tstateChangeStartEventHandler.$inject = ['$rootScope', 'headerData', 'stateAuthenticator', 'forceUrlReloader'];\r\n\t\tfunction stateChangeStartEventHandler($rootScope, headerData, stateAuthenticator, forceUrlReloader) {\r\n\t\t    $rootScope.stateChangeCounter =\r\n\t\t    {\r\n\t\t        forceRefresh: false,\r\n\t\t        stateChangeCount: 0\r\n\t\t    }\r\n\r\n\t\t    $rootScope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams) {\r\n\r\n\t\t        forceUrlReloader.process($rootScope, toState, toParams, fromState, fromParams);\r\n\r\n\t\t        var authorized = stateAuthenticator.authenticateState(toState);\r\n\r\n\t\t        if (!authorized) {\r\n\t\t            $rootScope.toState = toState;\r\n\t\t            $rootScope.toParams = toParams;\r\n\t\t            event.preventDefault();\r\n\t\t            return;\r\n\t\t        } else {\r\n\t\t            $rootScope.toState = null;\r\n\t\t            $rootScope.toParams = null;\r\n\t\t        }\r\n\r\n\t\t\t\tif (toState.data && toState.data.header) {\r\n\t\t\t\t\theaderData.set(toState.data.header);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tinitLoginLogoutEventHandler.$inject = ['authenticationClientEventHandler'];\r\n\t\tfunction initLoginLogoutEventHandler(authenticationClientEventHandler) {\r\n\t\t\tauthenticationClientEventHandler.init();\r\n\t\t}\r\n\r\n\t\tapplyValidationRules.$inject = ['validationInitialiser', 'validationRulesStore'];\r\n\t\tfunction applyValidationRules(validationInitialiser, validationRulesStore) {\r\n\t\t\tvar validationRules = validationRulesStore.getValidationRules();\r\n\t\t\t\r\n\t\t\tif (validationRules) {\r\n\t\t\t\tvalidationInitialiser.applyValidationRules(validationRules);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treadAuthenticationStore.$inject = ['authenticationStore'];\r\n\t\tfunction readAuthenticationStore(authenticationStore) {\r\n\t\t    authenticationStore.getAuthenticationData();\r\n\t\t}\r\n\t};\r\n});\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/_run.js","//{CODE:EUP2D}\r\n// di.einvoicing.ui.portal\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.config(configureAppStates);\r\n\r\n        configureAppStates.$inject = ['stateHelperProvider', '$urlRouterProvider'];\r\n        function configureAppStates(stateHelperProvider, $urlRouterProvider) {\r\n            $urlRouterProvider.otherwise(function($injector) {\r\n            \tvar authenticationData = $injector.get('authenticationData');\r\n\r\n                if (authenticationData.userData.isAuthenticated === true) {\r\n                    return 'portal/dashboard';\r\n                } else {\r\n                    return 'welcome';\r\n                }\r\n            });\r\n\r\n            stateHelperProvider.addStates({\r\n                templateBaseUrl: \"src/app/_states\",\r\n                states: [\r\n                    {\r\n                    \tstateName: \"portal\",\r\n\t\t\t\t\t\tisAbstract: true,\r\n                        rights: [ \"User\" ],\r\n                        data: {\r\n                            header: { title: \"EINVOICING.PORTAL.HEADER.MESSAGE\" },\r\n                        }\r\n                    },\r\n                    {\r\n                        stateName: \"welcome\",\r\n                        url: 'welcome?{username}&{password}',\r\n                        params: {\r\n                            reason: undefined,\r\n                            username: undefined,\r\n                            password: undefined\r\n                        },\r\n                    \tonlyCreateStateCollection: false,\r\n                    \tstateCollection:\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstateName: \"resetPassword\",\r\n\t\t\t\t\t\t\t\turl: 'welcome/{resetToken}',\r\n\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t    resetToken: ''\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n                    },\r\n                    {\r\n                        stateName: \"impersonate\",\r\n                        url: 'impersonate?{username}&{password}',\r\n                        params: {\r\n                            username: undefined,\r\n                            password: undefined\r\n                        }\r\n                    }\r\n                ]\r\n            });\r\n\r\n        }\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/_states.js","export const config = {\r\n    app: {\r\n        clientLogEnabled: true,\r\n        webApiAddress: 'http://localhost:9000',\r\n        appUrl: 'http://localhost:4444/',\r\n        sessionTimeout: 300,\r\n        sessionIdle: 1200,\r\n        enableForceUrlReload: true,\r\n        forceUrlReloadLimit: 20,\r\n        forceUrlStateNames: \"['portal.invoices.editById', 'portal.invoices.viewById']\",\r\n        version:\"1.2.0.ABCD\"\r\n    },\r\n    utilities: {\r\n        integrator: {\r\n            endpointName: 'app',\r\n            configFilePath: 'integrator/clickonce.json'\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/config.js","//{CODE:EUW02}\r\n// di.einvoicing.ui.portal.impersonate\r\ndefine([\r\n\t'./impersonateController'\r\n], function (\r\n\timpersonateControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var snippetContext = $di.angular.snippetRegistrar.createContext(\r\n           module,\r\n           'src/app/impersonate');\r\n        snippetContext.registerSnippet('diImpersonate', 'impersonate.html', 'ImpersonateController');\r\n        impersonateControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/impersonate/_loader.js","//{CODE:EUW01}\r\n// di.einvoicing.ui.portal.welcome\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('ImpersonateController', ImpersonateController);\r\n\r\n\t\tImpersonateController.$inject = [\r\n\t\t\t'$stateParams',\r\n\t\t\t'diState',\r\n            'authenticationStore',\r\n\t\t\t'authenticationClientEventSubscriber'];\r\n\r\n\t\tfunction ImpersonateController(\r\n\t\t\tstateParams,\r\n\t\t\tdiState,\r\n\t\t\tauthenticationStore) {\r\n\t\t    var vm = this;\r\n\r\n\t\t    vm.autoLogin = autoLogin;\r\n\r\n\t\t\tif (util.isNonEmptyString(stateParams.username)) {\r\n\t\t\t    vm.autoLogin(stateParams.username, stateParams.password);\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\r\n\t\t    function autoLogin(u, p) {\r\n\t\t        authenticationStore.clear();\r\n\t\t        diState.go('welcome', { username: u, password: p });\r\n\t\t    }\r\n\t\t}\r\n\r\n\t\treturn ImpersonateController;\r\n\t};\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/impersonate/impersonateController.js","//{CODE:EUP04}\r\n// di.einvoicing.ui.portal\r\ndefine([\r\n    'require',\r\n    'angular',\r\n    // Non-angular libraries\r\n    'moment',\r\n    'jquery',\r\n    'bootstrap',\r\n    'underscore',\r\n    'notify',\r\n    'pikaday',\r\n    '../../lib/di.core/di.core.global'\r\n], function (r, ng, moment) {\r\n    'use strict';\r\n\r\n    //Valdr references moment globally so need to add it to the global window\r\n    window.moment = window.moment || moment;\r\n\r\n    //Set the locale for moment\r\n    if (navigator.language) {\r\n        window.moment.locale(navigator.language);\r\n    } else if (navigator.languages) {\r\n        window.moment.locale(navigator.languages);\r\n    }\r\n    else if (navigator.userLanguage) {\r\n        window.moment.locale(navigator.userLanguage);\r\n    }\r\n    \r\n    r([\r\n        'domReady',\r\n        'appModule'\r\n    ], function (document, module) {\r\n        ng.bootstrap(document, [module.name], {\r\n            strictDi: true\r\n        });\r\n    });\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.js","define([\r\n\t'./_states',\r\n\t'./shared/_loader',\r\n    '../shared/services/_loader',\r\n\t'./invoices/_loader',\r\n\t'./account/_loader',\r\n\t'./purchaseOrders/_loader',\r\n\t'./users/_loader',\r\n\t'./audit/_loader',\r\n\t'./summaries/_loader',\r\n\t'./related/_loader',\r\n\t'./grn/_loader',\r\n\t'./portalController',\r\n\t'./forceUrlReloader',\r\n\t'./utilities/_loader',\r\n\t'./parties/_loader'\r\n], function (\r\n\tstatesLoader,\r\n\tsharedLoader,\r\n    sharedServicesLoader,\r\n\tinvoicesLoader,\r\n\taccountLoader,\r\n\tpurchaseOrdersLoader,\r\n\tusersLoader,\r\n\tauditLoader,\r\n\tsummariesLoader,\r\n\trelatedLoader,\r\n\tgrnLoader,\r\n\tportalController,\r\n\tforceUrlReloaderLoader,\r\n\tutilitiesLoader,\r\n\tpartiesLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tstatesLoader(module);\r\n\t\tsharedLoader(module);\r\n\t\tsharedServicesLoader(module);\r\n\t\tinvoicesLoader(module);\r\n\t\taccountLoader(module);\r\n\t\tpurchaseOrdersLoader(module);\r\n\t\tusersLoader(module);\r\n\t\tauditLoader(module);\r\n\t\tsummariesLoader(module);\r\n\t\trelatedLoader(module);\r\n\t\tgrnLoader(module);\r\n\t\tportalController(module);\r\n\t\tforceUrlReloaderLoader(module);\r\n\t\tutilitiesLoader(module);\r\n\t\tpartiesLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/_loader.js","//{CODE:EUP2R}\r\n// di.einvoicing.ui.portal.portal.invoices\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.config(configureInvoiceStates);\r\n\r\n\t\tconfigureInvoiceStates.$inject = ['stateHelperProvider'];\r\n\r\n\t\tfunction configureInvoiceStates(stateHelperProvider) {\r\n\t\t\tstateHelperProvider.addStates({\r\n\t\t\t\ttemplateBaseUrl: \"src/app/portal/_states\",\r\n\t\t\t\tparentStateName: 'portal',\r\n\t\t\t\tstates: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"invoices\",\r\n\t\t\t\t\t\trights: [\"InvoiceReader\"],\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.INVOICES.HEADER.TITLE\" }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"orders\",\r\n\t\t\t\t\t\trights: [\"PurchaseOrderReader\"],\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.PURCHASE_ORDERS.HEADER.TITLE\" }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"users\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.USERS.HEADER.TITLE\" }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"audit\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.AUDIT.HEADER.TITLE\" }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"related\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.RELATED.HEADER.TITLE\" }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"account\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.ACCOUNT.HEADER.TITLE\" }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"grn\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.GRN.HEADER.TITLE\" }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: 'dashboard'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: 'utilities'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: 'parties'\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/_states.js","define([\r\n\t'./_states',\r\n    './account.service',\r\n\t'./settings/_loader',\r\n    './account-management/_loader',\r\n    './notifications-settings/_loader',\r\n    './security-question/_loader'\r\n], function (\r\n\tstatesLoader,\r\n    accountService,\r\n\tsettingsLoader,\r\n\taccountManagementLoader,\r\n    notificationSettingsLoader,\r\n    securityQuestionLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    statesLoader(module);\r\n\r\n\t    module.service('accountService', accountService.AccountService);\r\n\r\n\t\tsettingsLoader(module);\r\n\t\taccountManagementLoader(module);\r\n\t\tnotificationSettingsLoader(module);\r\n\t    securityQuestionLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/_loader.js","//{CODE:EUP32}\r\n// di.einvoicing.ui.portal.portal.account\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.config(configureInvoiceStates);\r\n\r\n\t\tconfigureInvoiceStates.$inject = ['stateHelperProvider'];\r\n\r\n\t\tfunction configureInvoiceStates(stateHelperProvider) {\r\n\t\t\tstateHelperProvider.addStates({\r\n\t\t\t\ttemplateBaseUrl: \"src/app/portal/account/_states\",\r\n\t\t\t\tparentStateName: 'portal.account',\r\n\t\t\t\tstates: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"settings\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.ACCOUNT.SETTINGS.HEADER.TITLE\" }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"management\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.ACCOUNT.MANAGEMENT.HEADER.TITLE\" }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"parties\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"\" }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tpageTitle: undefined,\r\n\t\t\t\t\t\t\townStateName: 'portal.account.parties'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/_states.js","define([\r\n    './account-management.component'\r\n], function (accountManagement) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            accountManagement.AccountManagementComponent.selector,\r\n            accountManagement.AccountManagementComponent);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/account-management/_loader.js","export const AccountManagementComponent = {\r\n    selector: 'diAccountManagement',\r\n    controller: class {\r\n        constructor(\r\n            accountService,\r\n            authenticationData, \r\n            modalSpinner, \r\n            notificationHandler, \r\n            diState\r\n            ) {\r\n            this.accountService = accountService;\r\n            this.authenticationData = authenticationData;\r\n            this.modalSpinner = modalSpinner;\r\n            this.notificationHandler = notificationHandler;\r\n            this.diState = diState;\r\n            \r\n            this.getUser = this.getUser.bind(this);\r\n            this.subscribeToUsernameChange = this.subscribeToUsernameChange.bind(this);\r\n        }\r\n\r\n        $onInit() {\r\n            this.currentUsername = this.authenticationData.userData.username;\r\n            this.currentUser = this.accountService.currentUser;\r\n            this.getUser();\r\n        }\r\n\r\n        getUser() {\r\n            this.showSpinner();\r\n            this.accountService.getUser(() => {\r\n                    this.removeSpinner();\r\n                },\r\n                (error) => {\r\n                    this.removeSpinner();\r\n                    if (error) {\r\n                        this.notificationHandler.showError(error);\r\n                    } else {\r\n                        this.notificationHandler.showError('EINVOICING.PORTAL.ACCOUNT.MANAGEMENT.COULD_NOT_LOAD_USER');\r\n                    }\r\n                    this.diState.goBack().catch(()=> {\r\n                        this.diState.go('portal.dashboard');\r\n                    });\r\n                });\r\n        }\r\n\r\n        subscribeToUsernameChange(subscription) {\r\n            subscription(this.currentUsername);\r\n        }\r\n        \r\n        showSpinner() {\r\n            window.spinner = this.modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n        }\r\n\r\n        removeSpinner() {\r\n            if (window.spinner) {\r\n                window.spinner.remove();\r\n            }\r\n        }\r\n    },\r\n    templateUrl: 'src/app/portal/account/account-management/account-management.component.html'\r\n}\r\n\r\nAccountManagementComponent.controller.prototype.constructor.$inject = [\r\n    'accountService',\r\n    'authenticationData', \r\n    'modalSpinner',\r\n    'notificationHandler',\r\n    'diState'\r\n];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/account-management/account-management.component.js","class AccountService {\r\n    constructor(userProxy, authenticationData) {\r\n        this.userProxy = userProxy;\r\n        this.authenticationData = authenticationData;\r\n        \r\n        this.currentUser = {};\r\n        this.notifiableEvents = [];\r\n    }\r\n\r\n    getUser(success, error) {\r\n        let promise = this.userProxy.getById(this.authenticationData.userData.userId);\r\n        promise.then(data => {\r\n                this.currentUser = data.user;\r\n                this.notifiableEvents = data.notifiableEvents;\r\n                success();\r\n            },\r\n            (message) => {\r\n                if (message && message.failureReason) {\r\n                    error(message.failureReason);\r\n                } else {\r\n                    error();\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nAccountService.prototype.constructor.$inject = ['userProxy', 'authenticationData'];\r\n\r\nexport { AccountService }\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/account.service.js","define([\r\n    './notifications-settings.component'\r\n], function (notificationsSettings) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            notificationsSettings.NotificationSettingsComponent.selector,\r\n            notificationsSettings.NotificationSettingsComponent);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/notifications-settings/_loader.js","export const NotificationSettingsComponent = {\r\n    selector: 'diNotificationSettings',\r\n    controller: class {\r\n        constructor(\r\n            accountService,\r\n            associativeArrayConvertor, \r\n            clientEnums, \r\n            enumTranslator, \r\n            notificationHandler, \r\n            userProxy\r\n            ) {\r\n            this.accountService = accountService;\r\n            this.associativeArrayConvertor = associativeArrayConvertor;\r\n            this.clientEnums = clientEnums;\r\n            this.enumTranslator = enumTranslator;\r\n            this.notificationHandler = notificationHandler;\r\n            this.userProxy = userProxy;\r\n            \r\n            this.setNotifications = this.setNotifications.bind(this);\r\n            this.saveNotifications = this.saveNotifications.bind(this);\r\n            this.setFrequencies = this.setFrequencies.bind(this);\r\n            this.allNotificationFrequencies = [];\r\n        }\r\n\r\n        $onInit() {\r\n            this.accountService.getUser(() => {\r\n                this.setFrequencies();\r\n                this.setNotifications();\r\n            }, () => {});\r\n        }\r\n\r\n        setFrequencies() {\r\n            let allFrequencies = this.associativeArrayConvertor.convert(this.clientEnums.notificationFrequency);\r\n\r\n            $.each(allFrequencies, (key, value) => {\r\n                if ($di.utility.util.isNumber(value))\r\n                    this.allNotificationFrequencies.push({\r\n                        id: value,\r\n                        name: ''\r\n                    });\r\n            });\r\n\r\n            this.enumTranslator.translateCollection(this.clientEnums.notificationFrequency, this.allNotificationFrequencies, \"id\", \"name\");\r\n        }\r\n\r\n        setNotifications() {\r\n            this.notifiableEvents = this.accountService.notifiableEvents;\r\n            _.each(this.notifiableEvents,\r\n                (item) => {\r\n                    this.enumTranslator.translate(this.clientEnums.eventType, item.notifiableEvent.eventType)\r\n                        .then(function(translated) {\r\n                            item.notifiableEvent.eventTypeName = translated;\r\n                        });\r\n                });\r\n\r\n            _.each(this.notifiableEvents, (notification) => {\r\n                notification.notifiableEvent.frequencies = [];\r\n                notification.notifiableEvent.frequencies.fill(this.allNotificationFrequencies);\r\n\r\n                _.each(notification.notifiableEvent.frequencies, (frq) => {\r\n                    frq.enabled = false;\r\n                    if (notification.notifiableEvent.notificationFrequency === frq.id) {\r\n                        frq.enabled = true;\r\n                        return;\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        saveNotifications() {\r\n            let promise = this.userProxy.saveUserNotifications(\r\n            {\r\n                user: this.accountService.currentUser,\r\n                notifiableEvents: this.notifiableEvents\r\n            });\r\n\r\n            promise.then(data => {\r\n                this.setNotifications(data);\r\n\r\n                this.notificationHandler.showSuccess('EINVOICING.PORTAL.ACCOUNT.MANAGEMENT.NOTIFICATIONS_SAVED');\r\n            }, () => {\r\n                this.notificationHandler.showError('EINVOICING.PORTAL.ACCOUNT.MANAGEMENT.NOTIFICATIONS_ERROR');\r\n            });\r\n        }\r\n    },\r\n    templateUrl: 'src/app/portal/account/notifications-settings/notifications-settings.component.html'\r\n}\r\nNotificationSettingsComponent.controller.prototype.constructor.$inject = [\r\n    'accountService',\r\n    'associativeArrayConvertor', \r\n    'CLIENT_ENUMS', \r\n    'enumTranslator',\r\n    'notificationHandler',\r\n    'userProxy'\r\n];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/notifications-settings/notifications-settings.component.js","define([\r\n    './security-question.component'\r\n], function (securityQuestion) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            securityQuestion.SecurityQuestionComponent.selector,\r\n            securityQuestion.SecurityQuestionComponent);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/security-question/_loader.js","export const SecurityQuestionComponent = {\r\n    selector: 'diSecurityQuestion',\r\n    controller: class {\r\n        constructor(\r\n            accountService,\r\n            authenticationData, \r\n            userSecurityProxy, \r\n            modalSpinner, \r\n            notificationHandler\r\n            ) {\r\n            this.accountService = accountService;\r\n            this.userSecurityProxy = userSecurityProxy;\r\n            this.modalSpinner = modalSpinner;\r\n            this.notificationHandler = notificationHandler;\r\n            \r\n            this.securityAnswer = '';\r\n            this.securityQuestions = [];\r\n            this.securityQuestion = '';\r\n            this.securityAnswerTemplate = '';\r\n            this.securityQuestionEditable = false;\r\n            this.currentUsername = authenticationData.userData.username;\r\n\r\n            this.editSecurityQuestion = this.editSecurityQuestion.bind(this);\r\n            this.cancelSecurityQuestionEdit = this.cancelSecurityQuestionEdit.bind(this);\r\n            this.setSecurityQuestionAndAnswer = this.setSecurityQuestionAndAnswer.bind(this);\r\n        }\r\n\r\n        $onInit() {\r\n            if (this.accountService.currentUser.securityAnswerHash) {\r\n                this.securityAnswerTemplate = '********';\r\n            } else {\r\n                this.securityAnswerTemplate = '';\r\n            }\r\n\r\n            this.getSecurityQuestions();\r\n        }\r\n\r\n        getSecurityQuestions() {\r\n            this.showSpinner();\r\n\r\n            let promise = this.userSecurityProxy.getSecurityQuestions();\r\n            promise.then(data => {\r\n                let questions = [];\r\n\r\n                _.each(data, function(item, index) {\r\n                    questions.push({\r\n                        id: index,\r\n                        question: item\r\n                    });\r\n                });\r\n                \r\n                this.securityQuestions.fill(questions);\r\n\r\n                this.findSelectedQuestion();\r\n\t\t\t\t\t\r\n                this.removeSpinner();\r\n            }, () => {\r\n                this.removeSpinner();\r\n            });\r\n        }\r\n\r\n        showSpinner() {\r\n            window.spinner = this.modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n        }\r\n\r\n        removeSpinner() {\r\n            if (window.spinner) {\r\n                window.spinner.remove();\r\n            }\r\n        }\r\n\r\n        findSelectedQuestion() {\r\n            let currentQuestion = _.find(this.securityQuestions, (item) => {\r\n                return item.question === this.accountService.currentUser.securityQuestion;\r\n            });\r\n\r\n            if (currentQuestion) {\r\n                this.securityQuestion = currentQuestion;\r\n            }\r\n            else if (this.accountService.currentUser.securityQuestion) {\r\n                this.securityQuestions.push({\r\n                    id: this.securityQuestions.length,\r\n                    question: this.accountService.currentUser.securityQuestion\r\n                });\r\n                this.findSelectedQuestion();\r\n            }\r\n        }\r\n        \r\n        editSecurityQuestion() {\r\n            this.securityAnswer = '';\r\n            this.securityQuestionEditable = true;\r\n        }\r\n\r\n        cancelSecurityQuestionEdit() {\r\n            this.findSelectedQuestion();\r\n            this.securityAnswer = '';\r\n\r\n            this.securityQuestionEditable = false;\r\n        }\r\n\r\n        setSecurityQuestionAndAnswer() {\r\n            let promise = this.userSecurityProxy.setSecurityQuestionAndAnswer(\r\n                this.currentUsername,\r\n                this.securityQuestion.question,\r\n                this.securityAnswer);\r\n\r\n            promise.then(() => {\r\n                this.notificationHandler.showSuccess('EINVOICING.PORTAL.ACCOUNT.MANAGEMENT.SECURITY_QUESTION_SET');\r\n\r\n                this.securityQuestionEditable = false;\r\n\r\n                this.accountService.getUser(()=>{}, ()=>{});\r\n            });\r\n        }\r\n    },\r\n    templateUrl: 'src/app/portal/account/security-question/security-question.component.html'\r\n}\r\n\r\nSecurityQuestionComponent.controller.prototype.constructor.$inject = [\r\n    'accountService',\r\n    'authenticationData',\r\n    'userSecurityProxy',\r\n    'modalSpinner',\r\n    'notificationHandler'\r\n];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/security-question/security-question.component.js","define([\r\n    './account-settings/_loader',\r\n    './language-selector/_loader'\r\n], function (accountSettingsLoader, languageSelectorLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        accountSettingsLoader(module);\r\n        languageSelectorLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/settings/_loader.js","define([\r\n    './account-settings.component'\r\n], function (accountSettings) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            accountSettings.AccountSettingsComponent.selector,\r\n            accountSettings.AccountSettingsComponent);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/settings/account-settings/_loader.js","export const AccountSettingsComponent = {\r\n    selector: 'diAccountSettings',\r\n    templateUrl: 'src/app/portal/account/settings/account-settings/account-settings.component.html',\r\n    controller: class {\r\n        constructor() {}\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/settings/account-settings/account-settings.component.js","//{CODE:EUP2X}\r\n// di.einvoicing.ui.portal.components\r\ndefine([\r\n    './language-selector.directive',\r\n    './language-selector.controller',\r\n    './language-handler.factory',\r\n    './language-data.factory'\r\n], function (\r\n    diLanguageDirectiveLoader,\r\n    languageSelectorControllerLoader,\r\n    languageHandlerLoader,\r\n    languageDataLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diLanguageDirectiveLoader(module);\r\n        languageSelectorControllerLoader(module);\r\n        languageHandlerLoader(module);\r\n        languageDataLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/settings/language-selector/_loader.js","//{CODE:EUP36}\r\n// di.einvoicing.ui.portal.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n    \tmodule.factory('languageData', languageData);\r\n\r\n    \tlanguageData.$inject = ['staticLookupProxy'];\r\n\r\n\t    var languages = null;\r\n\r\n        function languageData(staticLookup) {\r\n            return {\r\n                getLanguages: getLanguages\r\n            };\r\n\r\n            /**\r\n             * Gets a collection of languages that the application supports.\r\n             */\r\n            function getLanguages() {\r\n            \tvar promise = staticLookup.get('Language').then(success);\r\n\r\n            \treturn promise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\tlanguages = data;\r\n\r\n\t\t\t\t\tlanguages.sort(function (a, b) {\r\n\t\t\t\t\t\treturn a.name > b.name;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn languages;\r\n\t\t\t\t}\r\n            }\r\n        }\r\n\r\n        return languageData;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/settings/language-selector/language-data.factory.js","//{CODE:EUP30}\r\n// di.einvoicing.ui.portal.components\r\ndefine(['moment'],\r\n\tfunction (moment) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('languageHandler', languageHandler);\r\n\r\n\t\tlanguageHandler.$inject = ['$locale', 'translator', 'userSettingsStore'];\r\n\r\n\t\tfunction languageHandler(locale, translator, userSettingsStore) {\r\n\t\t\treturn {\r\n\t\t\t\tsetLanguage: setLanguage,\r\n\t\t\t\tapplyLanguage: applyLanguage,\r\n\t\t\t\tgetCurrentLanguage: getCurrentLanguage\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Sets the language of the site.\r\n\t\t\t * @param language\r\n\t\t\t */\r\n\t\t\tfunction setLanguage(language) {\r\n\t\t\t\tguard.throwIfNotAString(\"EUP3004E\", language, \"language\");\r\n\r\n\t\t\t\tuserSettingsStore.language.set(language);\r\n\r\n\t\t\t\tapplyLanguage();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Applies the currently selected value, defaulting to the locale service if none is defined.\r\n\t\t\t */\r\n\t\t\tfunction applyLanguage() {\r\n\t\t\t\tvar languageToApply = getCurrentLanguage();\r\n\r\n\t\t\t\tif (util.isNullOrUndefined(languageToApply) || languageToApply.length === 0) {\r\n\t\t\t\t\tlanguageToApply = locale.id;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttranslator.changeLanguage(languageToApply);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Returns the language currently in use.\r\n\t\t\t */\r\n\t\t\tfunction getCurrentLanguage() {\r\n\t\t\t\treturn userSettingsStore.language.get();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn languageHandler;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/settings/language-selector/language-handler.factory.js","//{CODE:EUP2Z}\r\n// di.einvoicing.ui.portal.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n    \tvar util = $di.utility.util;\r\n\r\n        module.controller('LanguageSelectorController', LanguageSelectorController);\r\n\r\n        LanguageSelectorController.$inject = ['languageData', 'languageHandler'];\r\n       \r\n        function LanguageSelectorController(languageData, languageHandler) {\r\n            var vm = this;\r\n\r\n            vm.selectedLanguage = languageHandler.getCurrentLanguage();\r\n\t        vm.selectableLanguages = null;\r\n\t        vm.languageChanged = languageChanged;\r\n\r\n\t        languageData.getLanguages().then(function(data) {\r\n\t        \tvm.selectableLanguages = data;\r\n\t        });\r\n\r\n            /**\r\n             * Handles the language being changed.\r\n             * @param language\r\n             */\r\n            function languageChanged() {\r\n                if (!util.isNullOrUndefined(vm.selectedLanguage) &&\r\n                    util.isNonEmptyString(vm.selectedLanguage)) {\r\n\r\n                    languageHandler.setLanguage(vm.selectedLanguage);\r\n                }\r\n            }\r\n        }\r\n\r\n        return LanguageSelectorController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/settings/language-selector/language-selector.controller.js","//{CODE:EUP2Y}\r\n// di.einvoicing.ui.portal.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diLanguageSelector', diLanguageSelector);\r\n\r\n        function diLanguageSelector() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                templateUrl: 'src/app/shared/components/language-selector/di-language-selector.html',\r\n                controller: 'LanguageSelectorController',\r\n                controllerAs: 'languageSelectorCtrl'\r\n            };\r\n        }\r\n\r\n        return diLanguageSelector;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/account/settings/language-selector/language-selector.directive.js","define([\r\n\t'./_states',\r\n\t'./audit-list/_loader',\r\n    './audit-action-buttons/_loader'\r\n], function (\r\n\tstatesLoader,\r\n\tauditListsLoader,\r\n    auditActionButtonsLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tstatesLoader(module);\r\n\t\tauditListsLoader(module);\r\n\t    auditActionButtonsLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/audit/_loader.js","define(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.config(configureAuditStates);\r\n\r\n\t\tconfigureAuditStates.$inject = ['stateHelperProvider'];\r\n\t\tfunction configureAuditStates(stateHelperProvider) {\r\n\t\t\tstateHelperProvider.addStates({\r\n\t\t\t\ttemplateBaseUrl: \"src/app/portal/audit/_states\",\r\n\t\t\t\tparentStateName: 'portal.audit',\r\n\t\t\t\tstates: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t    stateName: \"list\",\r\n\t\t\t\t\t\t\t    url: 'document/{id:int}',\r\n\t\t\t\t\t\t\t    params: {\r\n\t\t\t\t\t\t\t        id: 0\r\n\t\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/audit/_states.js","define([\r\n    './audit-action-buttons.component'\r\n], function (auditActionButtons) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            auditActionButtons.AuditActionButtonsComponent.selector,\r\n            auditActionButtons.AuditActionButtonsComponent);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/audit/audit-action-buttons/_loader.js","export const AuditActionButtonsComponent = {\r\n    selector: 'diAuditActionButtons',\r\n    templateUrl: 'src/app/portal/audit/audit-action-buttons/audit-action-buttons.component.html',\r\n    bindings: {\r\n        selectedStates: '<',\r\n        actionButtonsOptions: '<',\r\n        onViewAudit: '&'\r\n    },\r\n    controller: class {\r\n        constructor() {\r\n        }\r\n\r\n        viewAudit() {\r\n            this.onViewAudit();\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/audit/audit-action-buttons/audit-action-buttons.component.js","define([\r\n    './audit-list-configurator.provider',\r\n\t'./audit-list.controller',\r\n\t'./audit-list.directive'\r\n], function (\r\n\tauditListConfiguratorLoader,\r\n\tauditListControllerLoader,\r\n\tauditListDirectiveLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    auditListConfiguratorLoader(module);\r\n\t    auditListControllerLoader(module);\r\n\t    auditListDirectiveLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/audit/audit-list/_loader.js","//{CODE:EUP5T}\r\n// di.einvoicing.ui.portal.portal.audit.lists\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.provider('auditListConfigurator', AuditListConfiguratorProvider);\r\n\r\n\t\t/**\r\n\t\t * Manages audit list configuration and set up.\r\n\t\t */\r\n\t\tfunction AuditListConfiguratorProvider() {\r\n\t\t\tvar config = {};\r\n\r\n\t\t\tvar buttonsConfiguration = {\r\n\t\t\t\ttype: \"AUDIT\",\r\n\t\t\t\tvisibleButtons : [],\r\n\t\t\t\tbuttons: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t    rights: [\"User\"],\r\n\t\t\t\t\t    name: 'view',\r\n\t\t\t\t\t\tstatesRequired: ['VIEWABLE']\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t};\r\n\r\n\t\t\t// Grid columns configuration\r\n\t\t\tvar columnDefinitions = [\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['User'],\r\n\t\t\t\t\tfield: 'dateCreated',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.AUDIT.LISTS.COLUMN_HEADERS.DATE_CREATED',\r\n\t\t\t\t\ttemplate: '<span>{{binding.dateCreatedTz | diDate : \"DD/MM/YYYY HH:mm:ss z\"}}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['User'],\r\n\t\t\t\t\tfield: 'userDisplayName',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.AUDIT.LISTS.COLUMN_HEADERS.CREATED_BY',\r\n\t\t\t\t\ttemplate: '<span>{{binding.userDisplayName}}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['User'],\r\n\t\t\t\t\tfield: 'eventTypeName',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.AUDIT.LISTS.COLUMN_HEADERS.EVENT_TYPE',\r\n\t\t\t\t\ttemplate: '<span ng-class=\"{\\'viewable\\': binding.isDocumentVersioned || binding.documentChangedEventId > 0}\">{{binding.eventTypeName}}</span>'\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\t// Status filters configuration\r\n\t\t\tvar eventTypeFilters = [\r\n\t\t\t\t{ value: 0, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.ALL\" },\r\n\t\t\t\t{ value: 2, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.1\" },\r\n\t\t\t\t{ value: 3, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.2\" },\r\n\t\t\t\t{ value: 4, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.3\" },\r\n\t\t\t\t{ value: 5, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.4\" },\r\n\t\t\t\t{ value: 6, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.5\" },\r\n\t\t\t\t{ value: 7, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.6\" },\r\n\t\t\t\t{ value: 8, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.7\" },\r\n\t\t\t\t{ value: 9, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.8\" },\r\n\t\t\t\t{ value: 10, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.9\" },\r\n\t\t\t\t{ value: 11, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.10\" },\r\n\t\t\t\t{ value: 12, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.11\" },\r\n\t\t\t\t{ value: 13, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.12\" },\r\n                { value: 40, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.EVENT_TYPE.13\" }\r\n\t\t\t];\r\n\r\n\t\t\tvar dateTimeDefaultFilters = [\r\n\t\t\t\t{ value: \"All\", label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.DATE.ALL\" },\r\n\t\t\t\t{ value: \"Last30Days\", label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.DATE.LAST_30_DAYS\" },\r\n\t\t\t\t{ value: \"ThisMonth\", label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.DATE.THIS_MONTH\" },\r\n\t\t\t\t{ value: \"LastMonth\", label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.DATE.LAST_MONTH\" },\r\n\t\t\t\t{ value: \"Today\", label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.DATE.TODAY\" },\r\n\t\t\t\t{ value: \"Yesterday\", label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.DATE.YESTERDAY\" },\r\n\t\t\t\t{ value: \"Custom\", label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.DATE.CUSTOM\", isHidden: true }\r\n\t\t\t];\r\n\r\n\t\t\tvar dateTypesOptions = [\r\n\t\t\t\t{ value: 1, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.DATE.TYPES.CREATED\" }\r\n\t\t\t];\r\n\r\n\t\t\tvar sortOptions = [\r\n\t\t\t\t{ value: 1, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.SORT.TYPE_ASC\" },\r\n\t\t\t\t{ value: 2, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.SORT.TYPE_DESC\" },\r\n\t\t\t\t{ value: 3, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.SORT.CREATED_DATE_ASC\" },\r\n\t\t\t\t{ value: 4, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.SORT.CREATED_DATE_DESC\" },\r\n\t\t\t\t{ value: 5, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.SORT.CREATED_BY_ASC\" },\r\n\t\t\t\t{ value: 6, label: \"EINVOICING.PORTAL.AUDIT.LISTS.FILTERS.SORT.CREATED_BY_DESC\" }\r\n\t\t\t];\r\n\r\n\t\t\tvar initialEventTypeFilter = getOptionByValue(eventTypeFilters, 0);\r\n\t\t\tvar initialDateTimeFilter = getOptionByValue(dateTimeDefaultFilters, 'All');\r\n\t\t\tvar initialDateType = getOptionByValue(dateTypesOptions, 1);\r\n\t\t\tvar initialSortOption = getOptionByValue(sortOptions, 4);\r\n\r\n\t\t\t// Provider definition\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['authorizedObjectsFilter'];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\tfunction getOptionByValue(filterItems, value) {\r\n\t\t\t\tvar filterItem = _.find(filterItems, function (obj) {\r\n\t\t\t\t\treturn obj.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn filterItem;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP2H01E\", cfg, 'cfg');\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets required configuration for the grid.\r\n\t\t\t */\r\n\t\t\tfunction $get(authorizedObjectsFilter) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgetTableConfiguration: getTableConfiguration,\r\n\t\t\t\t\tgetEventTypeFilters: getEventTypeFilters,\r\n\t\t\t\t\tgetDateTimeFilters: getDateTimeFilters,\r\n\t\t\t\t\tgetDateTypesOptions: getDateTypesOptions,\r\n\t\t\t\t\tgetSortableColumns: getSortableColumns,\r\n\t\t\t\t\tgetButtonsConfiguration: getButtonsConfiguration,\r\n\r\n\t\t\t\t\tgetInitialFilter: getInitialFilter,\r\n\t\t\t\t\tgetInitialEventTypeFilter: getInitialEventTypeFilter,\r\n\t\t\t\t\tgetInitialDateTimeFilter: getInitialDateTimeFilter,\r\n\t\t\t\t\tgetInitialDateType: getInitialDateType,\r\n\t\t\t\t\tgetInitialSortOption: getInitialSortOption\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of all filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialFilter() {\r\n\t\t\t\t\tvar initialFilters = [];\r\n\r\n\t\t\t\t\tinitialFilters.push(initialEventTypeFilter);\r\n\r\n\t\t\t\t\tinitialFilters.push(initialDateTimeFilter);\r\n\r\n\t\t\t\t\treturn initialFilters;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of even type filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialEventTypeFilter() {\r\n\t\t\t\t\treturn initialEventTypeFilter;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of date time filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialDateTimeFilter() {\r\n\t\t\t\t\treturn initialDateTimeFilter;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets initial date type option\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialDateType() {\r\n\t\t\t\t\treturn initialDateType;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets grid configuration options.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getTableConfiguration() {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(true);\r\n\r\n\t\t\t\t\tconfig.columns = authorizedObjectsFilter.getAuthorizedObjects(columnDefinitions);\r\n\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getButtonsConfiguration() {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(true);\r\n\t\t\t\t\tbuttonsConfiguration.visibleButtons.fill(authorizedObjectsFilter.getAuthorizedObjects(buttonsConfiguration.buttons, true));\r\n\t\t\t\t\treturn buttonsConfiguration;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets grid default filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getEventTypeFilters() {\r\n\t\t\t\t\treturn eventTypeFilters;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets date time default filters for the grid.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getDateTimeFilters() {\r\n\t\t\t\t\treturn dateTimeDefaultFilters;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets list of available date types\r\n\t\t\t\t */\r\n\t\t\t\tfunction getDateTypesOptions() {\r\n\t\t\t\t\treturn dateTypesOptions;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets the column intially used to sort the grid results\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialSortOption() {\r\n\t\t\t\t\treturn initialSortOption;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets the columns which can be used to sort the grid\r\n\t\t\t\t */\r\n\t\t\t\tfunction getSortableColumns() {\r\n\t\t\t\t\treturn sortOptions;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn AuditListConfiguratorProvider;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/audit/audit-list/audit-list-configurator.provider.js","//{CODE:EUP5U}\r\n// di.einvoicing.ui.portal.portal.audit.lists\r\ndefine(['moment-timezone'], function (moment) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('AuditListController', AuditListController);\r\n\r\n\t\tAuditListController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'diState',\r\n\t\t\t'$stateParams',\r\n\t\t\t'translator',\r\n\t\t\t'notificationHandler',\r\n\t\t\t'auditProxy',\r\n\t\t\t'auditListConfigurator',\r\n\t\t\t'elementNotifier',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'authorizedObjectsFilter',\r\n\t\t\t'modalSpinner',\r\n\t\t\t'dateFormatter'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * Manages and configure audit list grid.\r\n\t\t */\r\n\t\tfunction AuditListController(\r\n\t\t\tscope,\r\n\t\t\tdiState,\r\n\t\t\tstateParams,\r\n\t\t\ttranslator,\r\n\t\t\tnotificationHandler,\r\n\t\t\tauditProxy,\r\n\t\t\tauditListConfigurator,\r\n\t\t\telementNotifier,\r\n\t\t\tclientEnums,\r\n\t\t\tenumTranslator,\r\n\t\t\tauthorizedObjectsFilter,\r\n\t\t\tmodalSpinner,\r\n\t\t\tdateFormatter) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvar resultsReachedNotification;\r\n\t\t\tvm.summary = {}\r\n\r\n\t\t\tvm.tableOptions = {};\r\n\t\t\tvm.actionButtonsOptions = {};\r\n\t\t\tvm.selectedFilters = {};\r\n\t\t\tvm.labels = {};\r\n\t\t\tvm.audits = [];\r\n\t\t\tvm.selectedStates = [];\r\n\t\t\tvm.sortOptions = [];\r\n\t\t\tvm.eventTypeOptions = [];\r\n\t\t\tvm.dateOptions = [];\r\n\t\t\tvm.dateTypes = [];\r\n\r\n\t\t\tvm.getAudits = getAudits;\r\n\r\n\t\t\tvm.viewAudit = viewAudit;\r\n\t\t\tvm.goToViewCurrent = goToViewCurrent;\r\n\t\t\tvm.orderChanged = orderChanged;\r\n\t\t\tvm.eventTypeChanged = eventTypeChanged;\r\n\t\t\tvm.dateChanged = dateChanged;\r\n\t\t\tvm.dateTypeChanged = dateTypeChanged;\r\n\t\t\tvm.onSelectedChanged = onSelectedChanged;\r\n\t\t\tvm.clearFilters = clearFilters;\r\n\t\t\tvar spinner;\r\n\t\t\tinitialise();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Initialises the audits table by configuring it and getting initial set of data.\r\n\t\t\t */\r\n\t\t\tfunction initialise() {\r\n\t\t\t\tsetLabels();\r\n\r\n\t\t\t\tvm.tableOptions = auditListConfigurator.getTableConfiguration();\r\n\t\t\t\tvm.actionButtonsOptions = auditListConfigurator.getButtonsConfiguration();\r\n\r\n\t\t\t\tvm.sortOptions = auditListConfigurator.getSortableColumns();\r\n\t\t\t\tvm.eventTypeOptions = auditListConfigurator.getEventTypeFilters();\r\n\t\t\t\tvm.dateOptions = auditListConfigurator.getDateTimeFilters();\r\n\t\t\t\tvm.dateTypes = auditListConfigurator.getDateTypesOptions();\r\n\r\n\t\t\t\ttranslateColumnHeaders();\r\n\t\t\t\tvm.selectedFilters.dateType = auditListConfigurator.getInitialDateType();\r\n\t\t\t\tvm.selectedFilters.dateTimeFilter = auditListConfigurator.getInitialDateTimeFilter();\r\n\t\t\t\tvm.selectedFilters.eventTypeFilter = auditListConfigurator.getInitialEventTypeFilter();\r\n\t\t\t\tvm.selectedFilters.sortOption = auditListConfigurator.getInitialSortOption();\r\n\t\t\t\tvm.selectedFilters.customDateTimeFilter = { toDate: '', fromDate: '' };\r\n\r\n\t\t\t\tgetSummary();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction getSummary() {\r\n\t\t\t\t\tif (util.isNumber(stateParams.id)) {\r\n\r\n\t\t\t\t\t\tauditProxy\r\n\t\t\t\t\t\t\t.getAuditDocummentSummaryByDocumentId(\r\n\t\t\t\t\t\t\t\tstateParams.id)\r\n\t\t\t\t\t\t\t.then(resolved, rejected);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\t\tvm.summary = data;\r\n\r\n\t\t\t\t\t    translator.translate(vm.labels[vm.summary.documentTypeName.toLowerCase()])\r\n\t\t\t\t\t        .then(function (translated) {\t\t\t\t\t            \r\n\t\t\t\t\t            vm.labels.summaryTitle = translated;\r\n\t\t\t\t\t            vm.labels.summaryTitle += ' [' + vm.summary.documentNumber + ']';\r\n\t\t\t\t\t        });\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tgetAudits();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction rejected() {\r\n\t\t\t\t\t\tnotificationHandler.showError('EINVOICING.PORTAL.AUDIT.LISTS.ERROR_GETTING_AUDITS');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * sets labels values depending on user rights\r\n\t\t\t\t */\r\n\t\t\t\tfunction setLabels() {\r\n\t\t\t\t\tvar data = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.AUDIT.LISTS.HEADER.TITLE\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"invoice\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.AUDIT.LISTS.HEADER.TYPE.SUPPLIER_INVOICE\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tkey: \"invoice\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.AUDIT.LISTS.HEADER.TYPE.BUYER_INVOICE\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"purchase order\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.AUDIT.LISTS.HEADER.TYPE.SUPPLIER_ORDER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tkey: \"purchase order\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.AUDIT.LISTS.HEADER.TYPE.BUYER_ORDER\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t    translator.whenReady()\r\n\t\t\t\t        .then(function() {\r\n\t\t\t\t            _.each(data, function (item) {\r\n\t\t\t\t                item.label = translator.instantTranslate(item.label);\r\n\t\t\t\t            });\r\n\r\n\t\t\t\t            vm.labels = authorizedObjectsFilter.getAuthorizedObjectsAsAssociative(data, 'key', 'label');\r\n\t\t\t\t        });\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Translates each column header on the grid.\r\n\t\t\t\t */\r\n\t\t\t\tfunction translateColumnHeaders() {\r\n\r\n\t\t\t\t    translator.whenReady()\r\n\t\t\t\t        .then(function () {\r\n\t\t\t\t            _.each(vm.tableOptions.columns, function (column) {\r\n\t\t\t\t                column.name = translator.instantTranslate(column.nameLanguageKey);\r\n\t\t\t\t            });\r\n\t\t\t\t        });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Reloads audits list.\r\n\t\t\t */\r\n\t\t\tfunction getAudits() {\r\n\t\t\t\tif (util.isDefined(resultsReachedNotification)) {\r\n\t\t\t\t\tresultsReachedNotification.hide();\r\n\t\t\t\t}\r\n\t\t\t\tshowSpinner();\r\n\r\n\t\t\t\tvar maxItemsToGet = vm.tableOptions.maxItemsToShow;\r\n\t\t\t\tvar eventType = vm.selectedFilters.eventTypeFilter.value;\r\n\t\t\t\tvar dateTimeFilters = vm.selectedFilters.dateTimeFilter.value;\r\n\t\t\t\tvar sortOption = vm.selectedFilters.sortOption.value;\r\n\t\t\t\tvar customDateTimeFilter = null;\r\n\r\n\t\t\t\tif (vm.selectedFilters.customDateTimeFilter.fromDate !== \"\" && vm.selectedFilters.customDateTimeFilter.toDate !== \"\") {\r\n\t\t\t\t\tcustomDateTimeFilter = vm.selectedFilters.customDateTimeFilter;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tauditProxy\r\n\t\t\t\t\t.getAuditsByDocumentId(\r\n\t\t\t\t\t\tvm.summary.documentId,\r\n\t\t\t\t\t\tmaxItemsToGet,\r\n\t\t\t\t\t\teventType,\r\n\t\t\t\t\t\tdateTimeFilters,\r\n\t\t\t\t\t\tcustomDateTimeFilter,\r\n\t\t\t\t\t\tsortOption)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t    if (data.length >= vm.tableOptions.maxItemsToShow) {\r\n\r\n\t\t\t\t        translator.translate(\"EINVOICING.PORTAL.AUDIT.LISTS.MAXIMUM_INVOICES_REACHED\")\r\n\t\t\t\t            .then(function(translated) {\r\n\t\t\t\t                resultsReachedNotification = elementNotifier.warning(\r\n\t\t\t\t                    translated,\r\n\t\t\t\t                    findElement('#auditList'),\r\n\t\t\t\t                    { clickToHide: true });\r\n\t\t\t\t                resultsReachedNotification.show();\r\n\t\t\t\t            });\r\n\t\t\t\t    }\r\n\t\t\t\t\t\r\n\t\t\t\t    _.each(data, function (item) {\r\n\t\t\t\t\t    item.dateCreatedTz = dateFormatter.toDateTimeWithZone(item.dateCreated);\r\n\t\t\t\t    });\r\n\r\n\t\t\t        if (data.length > 0) {\r\n\t\t\t            if (data[0].documentType === 3) {\r\n\t\t\t                changedEventAuditConverter(data);\r\n\t\t\t            }\r\n\r\n\t\t\t            vm.tableOptions.data.fill(data);\r\n\t\t\t            vm.audits.fill(data);\r\n\t\t\t        }\r\n\t\t\t        removeSpinner();\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t   * Finds element in DOM\r\n\t\t\t\t   */\r\n\t\t\t\t\tfunction findElement(key) {\r\n\t\t\t\t\t\tif (util.isFunction(scope.findElement)) {\r\n\t\t\t\t\t\t\tvar element = scope.findElement(key);\r\n\r\n\t\t\t\t\t\t\treturn element;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction changedEventAuditConverter(data){\r\n\t\t\t\t\t\t//TODO:- hide anything with eventTypeId 41\r\n\t\t\t\t\t\tvar sortedDataByDate = _.sortBy(data, function(item){\r\n\t\t\t\t\t\t\treturn item.dateCreated;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t_.each(sortedDataByDate, function (item, index) {\r\n\t\t\t\t\t\t    if (item.documentVersion > 1 && index > 0 && item.eventTypeId === 35) {\r\n\t\t\t\t\t\t\t    translator.translate(\"EINVOICING.PORTAL.AUDIT.LISTS.REPLACE_TEXT.ORDER_UPDATED\")\r\n\t\t\t\t\t\t\t    .then(function(translated) {\r\n\t\t\t\t\t\t\t            item.eventTypeName = translated;\r\n\t\t\t\t\t\t\t        });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected() {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t\tnotificationHandler.showError('EINVOICING.PORTAL.AUDIT.LISTS.ERROR_GETTING_AUDITS');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction viewAudit() {\r\n\t\t\t\tvar audit = getSelectedAudit();\r\n\r\n\t\t\t\tif (audit.isDocumentVersioned === false && audit.documentChangedEventId === 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch(audit.documentType) {\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tdiState.go('portal.invoices.viewByAuditId', { id: audit.headerId, aid: audit.id });\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tdiState.go('portal.orders.viewByAuditId', { id: audit.headerId, aid: ((audit.documentChangedEventId > 1) ? audit.documentChangedEventId : audit.id) });\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction goToViewCurrent() {\r\n\t\t\t\tswitch (vm.summary.documentType) {\r\n\t\t\t\t   case 2:\r\n\t\t\t\t\t\tdiState.go('portal.invoices.viewById', { id: vm.summary.headerId });\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tdiState.go('portal.orders.viewById', { id: vm.summary.headerId });\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets selected audit\r\n\t\t\t */\r\n\t\t\tfunction getSelectedAudit() {\r\n\t\t\t\tvar selectedRows = getCurrentlySelectedAudits();\r\n\r\n\t\t\t\tif (selectedRows.length <= 0 || selectedRows.length > 1) {\r\n\t\t\t\t\treturn {};\r\n\t\t\t\t}\r\n\t\t\t\treturn selectedRows[0];\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Get currently selected audits from the grid.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getCurrentlySelectedAudits() {\r\n\t\t\t\t\treturn _.filter(vm.audits, function(audit) {\r\n\t\t\t\t\t\treturn audit.isSelected === true;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * resets the search filters on the page back to the default values\r\n\t\t\t */\r\n\t\t\tfunction clearFilters() {\r\n\t\t\t\tvm.selectedFilters.dateType = auditListConfigurator.getInitialDateType();\r\n\t\t\t\tvm.selectedFilters.dateTimeFilter = auditListConfigurator.getInitialDateTimeFilter();\r\n\t\t\t\tvm.selectedFilters.eventTypeFilter = auditListConfigurator.getInitialEventTypeFilter();\r\n\t\t\t\tvm.selectedFilters.sortOption = auditListConfigurator.getInitialSortOption();\r\n\t\t\t\tvm.selectedFilters.customDateTimeFilter = { toDate: '', fromDate: '' };\r\n\r\n\t\t\t\tgetAudits();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when rows selection changes\r\n\t\t\t */\r\n\t\t\tfunction onSelectedChanged(items) {\r\n\t\t\t\tvar array = [];\r\n\t\t\t\t_.each(items, function(item) {\r\n\t\t\t\t\tif (item.isDocumentVersioned || item.documentChangedEventId > 0) {\r\n\t\t\t\t\t\tarray.push(\"VIEWABLE\");\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tarray.push(\"SELECTED\");\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvm.selectedStates.fill(array);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when order filter has changed\r\n\t\t\t */\r\n\t\t\tfunction orderChanged(value) {\r\n\t\t\t\tvar item = _.find(vm.sortOptions, function (option) {\r\n\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.sortOption = item;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when event type filter has changed\r\n\t\t\t */\r\n\t\t\tfunction eventTypeChanged(value) {\r\n\t\t\t\tvar item = _.find(vm.eventTypeOptions, function (option) {\r\n\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.eventTypeFilter = item;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * event when date filter has changed\r\n\t\t\t * @param {} value\r\n\t\t\t * @returns {}\r\n\t\t\t */\r\n\t\t\tfunction dateChanged(value, customDate) {\r\n\t\t\t\tvar item = _.find(vm.dateOptions, function (option) {\r\n\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.dateTimeFilter = item;\r\n\t\t\t\tif (customDate) {\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter = customDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when date type changes\r\n\t\t\t */\r\n\t\t\tfunction dateTypeChanged(value) {\r\n\t\t\t\tvar item = _.find(vm.dateTypes, function (option) {\r\n\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.dateType = item;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Adds spinner to the page\r\n\t\t\t*/\r\n\t\t\tfunction showSpinner() {\r\n\t\t\t\tspinner = modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes spinner from the page\r\n\t\t\t*/\r\n\t\t\tfunction removeSpinner() {\r\n\t\t\t\tif (spinner) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn AuditListController;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/audit/audit-list/audit-list.controller.js","define(['angular'], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diAuditList', diAuditList);\r\n\r\n        function diAuditList() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {},\r\n                controller: \"AuditListController\",\r\n                controllerAs: \"auditListCtrl\",\r\n                templateUrl: 'src/app/portal/audit/audit-list/audit-list.html',\r\n                link: link\r\n            };\r\n\r\n            function link(scope) {\r\n                scope.findElement = findElement;\r\n\r\n                return;\r\n\r\n                function findElement(name) {\r\n                    return ng.element(name);\r\n                }\r\n            }\r\n        }\r\n\r\n        return diAuditList;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/audit/audit-list/audit-list.directive.js","//{CODE:EUP95}\r\n// di.core.angular.forceUrlReloader\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.provider('forceUrlReloader', ForceUrlReloaderProvider);\r\n\r\n       /**\r\n       * Handles memory leak issue. Will force a window to reload once the \"forceUrlRefreshCountLimit\" is reached.\r\n       */\r\n        function ForceUrlReloaderProvider() {\r\n            var config = {\r\n                enableForceUrlReload: false,\r\n                forceUrlReloadLimit: 10,\r\n                stateNames: []\r\n            };\r\n\r\n            var provider = {\r\n                configure: configure,\r\n                $get: $get\r\n            };\r\n\r\n\r\n            return provider;\r\n\r\n            /**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n            function configure(cfg) {\r\n                guard.throwIfNotAnObject(\"EUP9501E\", cfg, \"cfg\");\r\n                config = cfg;\r\n            }\r\n\r\n            function $get() {\r\n                var service = {\r\n                    process: process\r\n                };\r\n\r\n                return service;\r\n\r\n\r\n                function process($rootScope, toState, toParams, fromState, fromParams) {\r\n                    if (config.enableForceUrlReload === true) {\r\n                        //check if moving from a known from state - aka has known memory issues!\r\n                        if (config.stateNames.indexOf(fromState.name) >= 0) {\r\n                            $rootScope.stateChangeCounter.stateChangeCount++;\r\n\r\n                            if ($rootScope.stateChangeCounter.stateChangeCount >= config.forceUrlReloadLimit) {\r\n                                $rootScope.stateChangeCounter.stateChangeCount = 0;\r\n                                $rootScope.stateChangeCounter.forceRefresh = true;\r\n                            }\r\n                        }\r\n                        //only reload from a previous state (prevent infinite refresh), check if moving from diffent state, and \"forceRefresh\" flag set.\r\n                        if (fromState.name !== '' && fromState.name !== toState.name && $rootScope.stateChangeCounter.forceRefresh === true && config.stateNames.indexOf(fromState.name) < 0) {\r\n                            $rootScope.stateChangeCounter.forceRefresh = false;\r\n                            window.location.reload();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return ForceUrlReloaderProvider;\r\n\r\n    }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/forceUrlReloader.js","define([\r\n\t'./_states',\r\n\t'./grn-repository.factory',\r\n    './grn-proxy.factory',\r\n    './grn-action-buttons/_loader',\r\n    './grn-details/_loader',\r\n    './grn-footer/_loader',\r\n    './grn-header/_loader',\r\n    './grn-lines/_loader',\r\n    './grn-list/_loader'\r\n], function(\r\n\tstatesLoader,\r\n\tgrnRepositoryLoader,\r\n    grnProxyLoader,\r\n    grnActionButtonsLoader,\r\n    grnDetailsLoader,\r\n    grnFooterLoader,\r\n    grnHeaderLoader,\r\n    grnLinesLoader,\r\n    grnListLoader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    grnProxyLoader(module);\r\n\t    statesLoader(module);\r\n\t\tgrnRepositoryLoader(module);\r\n\t\tgrnActionButtonsLoader(module);\r\n\t\tgrnDetailsLoader(module);\r\n\t\tgrnFooterLoader(module);\r\n\t\tgrnHeaderLoader(module);\r\n\t\tgrnLinesLoader(module);\r\n\t    grnListLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/_loader.js","//{CODE:EUP74}\r\n// di.einvoicing.ui.portal.portal.grn\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.config(configureGrnStates);\r\n\r\n\t\tconfigureGrnStates.$inject = ['stateHelperProvider'];\r\n\r\n\t\tfunction configureGrnStates(stateHelperProvider) {\r\n\t\t\tstateHelperProvider.addStates({\r\n\t\t\t\ttemplateBaseUrl: \"src/app/portal/grn/_states\",\r\n\t\t\t\tparentStateName: 'portal.grn',\r\n\t\t\t\tstates: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"list\",\r\n\t\t\t\t\t\turl: 'list?{dateType:int}&{dateTimeFilter}&{statusFilter:int}&{sortOption:int}&{fromDate:date}&{toDate:date}&{searchText}',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.GRN.LISTS.HEADER.TITLE\" }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tdateType: undefined,\r\n\t\t\t\t\t\t\tdateTimeFilter: undefined,\r\n\t\t\t\t\t\t\tstatusFilter: undefined,\r\n\t\t\t\t\t\t\tsortOption: undefined,\r\n\t\t\t\t\t\t\tfromDate: undefined,\r\n\t\t\t\t\t\t\ttoDate: undefined,\r\n\t\t\t\t\t\t\tsearchText: undefined,\r\n\t\t\t\t\t\t\tpageSize: undefined,\r\n\t\t\t\t\t\t\tpageNumber: undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: 'viewById',\r\n\t\t\t\t\t\turl: \"id/{id:int}\",\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tid: 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/_states.js","define([\r\n\t'./grn-action-buttons.component'\r\n], function(\r\n\tgrnActionButtons) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    module.component(\r\n            grnActionButtons.GrnActionButtonsComponent.selector,\r\n            grnActionButtons.GrnActionButtonsComponent);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-action-buttons/_loader.js","export const GrnActionButtonsComponent = {\r\n    selector: 'diGrnActionButtons',\r\n    bindings: {\r\n        selectedStates: '<',\r\n        selectedActions: '<',\r\n        selectedItemsCount: '<',\r\n        buttonsSetOneOptions: '<',\r\n        buttonsSetTwoOptions: '<',\r\n        onViewGrn: '&',\r\n        onGoToRelated: '&'\r\n    },\r\n    templateUrl: 'src/app/portal/grn/grn-action-buttons/grn-action-buttons.component.html',\r\n    controller: class {\r\n        constructor() {\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-action-buttons/grn-action-buttons.component.js","define([\r\n\t'./grn-view-configurator.provider',\r\n    './grn-view.controller',\r\n    './grn-details.directive'\r\n], function(\r\n\tgrnViewConfiguratorLoader,\r\n    grnViewControllerLoader,\r\n    grnDetailsDirectiveLoader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    grnViewConfiguratorLoader(module);\r\n\t    grnViewControllerLoader(module);\r\n\t    grnDetailsDirectiveLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-details/_loader.js","define(function(){\r\n    'use strict';\r\n\r\n    return function(module){\r\n        module.directive('diGrnDetails',diGrnDetails);\r\n\r\n        function diGrnDetails(){\r\n            return{\r\n                restrict:'E',\r\n                scope:{},\r\n                controller:'GrnViewController',\r\n                controllerAs:'grnController',\r\n                templateUrl: 'src/app/portal/grn/grn-details/grn-details.html'\r\n            }\r\n        }\r\n        return diGrnDetails;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-details/grn-details.directive.js","//{CODE:EUP7K}\r\n// di.einvoicing.ui.portal.portal.grn\r\ndefine(function () {\r\n\t'use strict';\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.provider('grnViewConfigurator', grnViewConfiguratorProvider);\r\n\r\n\t\tfunction grnViewConfiguratorProvider() {\r\n\t\t\tvar config = {\r\n\r\n\t\t\t};\r\n\t\t\tvar buttonsConfiguration = {};\r\n\r\n\t\t\tvar columnDefinitions = [\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'lineNumber',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ID',\r\n\t\t\t\t\ttemplate: '<span>{{binding.lineNumber}}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\tfield: 'suppliersProductCode',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.SUPPLIER_CODE',\r\n\t\t\t\t\ttemplate: '<span>{{ binding.suppliersProductCode }}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\tfield: 'customersProductCode',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.CUSTOMER_CODE',\r\n\t\t\t\t\ttemplate: '<span>{{ binding.customersProductCode }}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'productTypeName',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.PRODUCT_TYPE',\r\n\t\t\t\t\ttemplate: '<span>{{ binding.productTypeName }}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'itemName',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ITEM_NAME',\r\n\t\t\t\t\ttemplate: '<span>{{ binding.itemName }}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'itemDescription',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ITEM_DESCRIPTION',\r\n\t\t\t\t\ttemplate: '<span>{{ binding.itemDescription }}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'quantity',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.QUANTITY',\r\n\r\n\t\t\t\t\ttemplate: '<span>{{ binding.quantity }}</span>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'quantityUnit',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.QUANTITY_UNIT',\r\n\t\t\t\t\ttemplate: '<span>{{ binding.quantityUnit }}</span>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\t// Provider definition\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['authorizedObjectsFilter', 'CLIENT_ENUMS'];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP2H01E\", cfg, 'cfg');\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\tfunction $get(authorizedObjectsFilter,clientEnums) {\r\n\t\t\t\tbuttonsConfiguration = {\r\n\t\t\t\t\ttype: \"Grn\",\r\n\t\t\t\t\tvisibleButtons: [],\r\n\t\t\t\t\tbuttonsSetOne: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Foo\"],\r\n\t\t\t\t\t\t\tname: 'render',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.downloadGoodsReceiptNote,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\t\t\tname: 'related',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewRelatedDocumentsGoodsReceiptNote,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgetButtonsSetOneConfiguration: getButtonsSetOneConfiguration,\r\n\t\t\t\t\tgetTableConfiguration: getTableConfiguration\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction getButtonsSetOneConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetOne);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getTableConfiguration() {\r\n\t\t\t\t\tconfig.columns = authorizedObjectsFilter.getAuthorizedObjects(columnDefinitions, false);\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getConfiguration(array) {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(true);\r\n\r\n\t\t\t\t\tvar configuration = {\r\n\t\t\t\t\t\ttype: \"Grn\",\r\n\t\t\t\t\t\tvisibleButtons: []\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconfiguration.visibleButtons.fill(authorizedObjectsFilter.getAuthorizedObjects(array, true));\r\n\t\t\t\t\treturn configuration;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn grnViewConfiguratorProvider;\r\n\t}\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-details/grn-view-configurator.provider.js","//{CODE:EUP7L}\r\n// di.einvoicing.ui.portal.portal.grn.viewer\r\ndefine(function () {\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tmodule.controller('GrnViewController', GrnViewController);\r\n\r\n\t\tGrnViewController.$inject = [\r\n\t        '$scope',\r\n\t        'authorizedObjectsFilter',\r\n\t        'grnViewConfigurator',\r\n\t        'grnProxy',\r\n\t        'documentAttributeResolver',\r\n\t        'notificationHandler',\r\n\t        '$stateParams',\r\n\t        'modalSpinner',\r\n\t        'diState',\r\n\t        'documentStateResolver'\r\n\t\t];\r\n\r\n\t\tfunction GrnViewController(\r\n\t\t\tscope,\r\n\t\t\tauthorizedObjectsFilter,\r\n\t\t\tgrnViewConfigurator,\r\n\t\t\tgrnProxy,\r\n\t\t\tdocumentAttributeResolver,\r\n\t\t\tnotificationHandler,\r\n\t\t\tstateParams,\r\n\t\t\tmodalSpinner,\r\n\t\t\tdiState,\r\n\t\t\tdocumentStateResolver) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvar spinner;\r\n\r\n\t\t\tvm.grn = {\r\n\t\t\t\tlines: [],\r\n\t\t\t\tattributes: []\r\n\t\t\t};\r\n\r\n\t\t\tvar functionToGetGrn;\r\n\t\t\tvar parameterToGetGrn;\r\n\t\t\tvm.selectedStates = [];\r\n\t\t\tvm.selectedAttributes = [];\r\n\t\t\tvm.backToList = backToList;\r\n\t\t\tvm.goToRelated = goToRelated;\r\n\t\t\tvm.tableOptions = grnViewConfigurator.getTableConfiguration();\r\n\r\n\t\t\tinitialise();\r\n\r\n\t\t\tfunction initialise() {\r\n\t\t\t\tsetLabels();\r\n\t\t\t\tvm.buttonsSetOneOptions = grnViewConfigurator.getButtonsSetOneConfiguration();\r\n\r\n\t\t\t\tloadGrn();\r\n\t\t\t}\r\n\r\n\t\t\tfunction setLabels() {\r\n\t\t\t\tvar data = [{\r\n\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.VIEWER.HEADER.TITLE_SUPPLIER\"\r\n\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.VIEWER.HEADER.TITLE_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\tkey: \"notLoaded\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.VIEWER.COULD_NOT_LOAD_GRN\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\tkey: \"notLoaded\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.VIEWER.COULD_NOT_LOAD_GRN\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\tkey: \"detailsHeading\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.VIEWER.COMPONENTS.DETAILS.HEADING_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\tkey: \"detailsHeading\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.VIEWER.COMPONENTS.DETAILS.HEADING_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\tkey: \"orderNumber\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.VIEWER.COMPONENTS.DETAILS.ORDER_NUMBER_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\tkey: \"orderNumber\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.VIEWER.COMPONENTS.DETAILS.ORDER_NUMBER_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t    {\r\n\t\t\t\t    \trights: [\"Supplier\"],\r\n\t\t\t\t    \tkey: \"goodsReceiptNoteNumber\",\r\n\t\t\t\t    \tlabel: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.GRN_NUMBER\"\r\n\t\t\t\t    },\r\n                    {\r\n                    \trights: [\"Buyer\"],\r\n                    \tkey: \"goodsReceiptNoteNumber\",\r\n                    \tlabel: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.GRN_NUMBER\"\r\n                    }\r\n\t\t\t\t];\r\n\r\n\t\t\t\tvm.labels = authorizedObjectsFilter.getAuthorizedObjectsAsAssociative(data, 'key', 'label');\r\n\t\t\t}\r\n\r\n\t\t\tfunction loadGrn() {\r\n\t\t\t\tif (util.isNumber(stateParams.id)) {\r\n\t\t\t\t\tfunctionToGetGrn = grnProxy.getById;\r\n\t\t\t\t\tparameterToGetGrn = stateParams.id;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (functionToGetGrn) {\r\n\t\t\t\t\tshowSpinner();\r\n\t\t\t\t\tfunctionToGetGrn(parameterToGetGrn)\r\n\t\t\t\t\t\t.then(resolved, rejected);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t\tutil.extend(vm.grn, data);\r\n\r\n\t\t\t\t\tsetState(vm.grn.clientDocumentState);\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected() {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t\tnotificationHandler.showError(vm.labels.notLoaded, parameterToGetGrn);\r\n\r\n\t\t\t\t\tbackToList();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction setState(stateId) {\r\n\t\t\t\tvar state = documentStateResolver.getDocumentState(stateId);\r\n\t\t\t\tvm.grn.clientDocumentState = stateId;\r\n\t\t\t\tvm.selectedStates.fill(state);\r\n\r\n\t\t\t    documentStateResolver.calculateCurrentState('grn', vm.grn.clientDocumentState, true)\r\n\t\t\t        .then(function(state) {\r\n\t\t\t            vm.currentState = state;\r\n\t\t\t        });\r\n\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction goToRelated() {\r\n\t\t\t\tif (util.isDefined(vm.grn.documentId)) {\r\n\t\t\t\t\tdiState.go('portal.related.list', { id: vm.grn.documentId });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction backToList() {\r\n\t\t\t\tdiState.goBack().catch(function (reason) {\r\n\t\t\t\t\tdiState.go('portal.grn.list');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Adds spinner to the page\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction showSpinner() {\r\n\t\t\t\tif (!spinner) {\r\n\t\t\t\t\tspinner = modalSpinner.showModalSpinner(\"#spinner-container\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes spinner from the page\r\n\t\t\t*/\r\n\t\t\tfunction removeSpinner() {\r\n\t\t\t\tif (spinner) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t\tspinner = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn GrnViewController;\r\n\t}\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-details/grn-view.controller.js","define([\r\n\t'./grn-footer.component'\r\n], function(\r\n\tgrnFooter) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    module.component(\r\n            grnFooter.GrnFooterComponent.selector,\r\n            grnFooter.GrnFooterComponent);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-footer/_loader.js","export const GrnFooterComponent = {\r\n    selector: 'diGrnFooter',\r\n    bindings: {\r\n        deliveryNotes: '<'\r\n    },\r\n    templateUrl: 'src/app/portal/grn/grn-footer/grn-footer.component.html',\r\n    controller: class {\r\n        constructor() {\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-footer/grn-footer.component.js","define([\r\n\t'./grn-header.component'\r\n], function(\r\n\tgrnHeader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    module.component(\r\n            grnHeader.GrnHeaderComponent.selector,\r\n            grnHeader.GrnHeaderComponent);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-header/_loader.js","export const GrnHeaderComponent = {\r\n    selector: 'diGrnHeader',\r\n    bindings: {\r\n        grn: '<',\r\n        currentState: '<',\r\n        labels: '<'\r\n    },\r\n    templateUrl: 'src/app/portal/grn/grn-header/grn-header.component.html',\r\n    controller: class {\r\n        constructor() {\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-header/grn-header.component.js","define([\r\n\t'./grn-lines.component'\r\n], function(\r\n\tgrnLines) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    module.component(\r\n            grnLines.GrnLinesComponent.selector,\r\n            grnLines.GrnLinesComponent);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-lines/_loader.js","export const GrnLinesComponent = {\r\n    selector: 'diGrnLines',\r\n    bindings: {\r\n        lines: '<',\r\n        tableOptions: '<'\r\n    },\r\n    templateUrl: 'src/app/portal/grn/grn-lines/grn-lines.component.html',\r\n    controller: class {\r\n        constructor() {\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-lines/grn-lines.component.js","define([\r\n\t'./grn-search/_loader',\r\n    './grn-list-configurator.provider',\r\n    './grn-list.controller',\r\n    './grn-list.directive'\r\n], function(\r\n\tgrnSearchLoader,\r\n    grnListConfigurator,\r\n    grnListController,\r\n    grnListDirective) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    grnSearchLoader(module);\r\n\t    grnListConfigurator(module);\r\n\t    grnListController(module);\r\n\t    grnListDirective(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-list/_loader.js","//{CODE:EUP77}\r\n// di.einvoicing.ui.portal.portal.grn.lists\r\ndefine(function () {\r\n\t\"use strict\";\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.provider(\"grnListConfigurator\", GrnListConfiguratorProvider);\r\n\r\n\t\t/**\r\n\t\t * Manages grn list configuration and set up.\r\n\t\t */\r\n\t\tfunction GrnListConfiguratorProvider() {\r\n\t\t\tvar config = {};\r\n\r\n\t\t\tvar buttonsConfiguration = {};\r\n\r\n\t\t\t// Grid columns configuration\r\n\t\t\tvar columnDefinitions = [\r\n\t\t\t\t{\r\n\t\t\t\t\torder: 1,\r\n\t\t\t\t\trights: [\"Supplier\", \"Buyer\"],\r\n\t\t\t\t\tfield: \"goodsReceiptNoteNumber\",\r\n\t\t\t\t\tnameLanguageKey: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.GRN_NUMBER\",\r\n\t\t\t\t\ttemplate: \"<span>{{binding.goodsReceiptNoteNumber}}</span>\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\torder: 2,\r\n\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\tfield: \"purchaseOrderNumber\",\r\n\t\t\t\t\tnameLanguageKey: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.ORDER_NUMBER_SUPPLIER\",\r\n\t\t\t\t    template: '<span ng-if=\"binding.purchaseOrderId > 0\"><a ui-sref=\"portal.orders.viewById({{\\'{id : binding.purchaseOrderId}\\'}})\">{{binding.purchaseOrderNumber}}</a></span><span ng-if=\"binding.purchaseOrderId == 0\">{{binding.purchaseOrderNumber}}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\torder: 2,\r\n\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\tfield: \"purchaseOrderNumber\",\r\n\t\t\t\t\tnameLanguageKey: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.ORDER_NUMBER_BUYER\",\r\n\t\t\t\t\ttemplate: '<span ng-if=\"binding.purchaseOrderId > 0\"><a ui-sref=\"portal.orders.viewById({{\\'{id : binding.purchaseOrderId}\\'}})\">{{binding.purchaseOrderNumber}}</a></span><span ng-if=\"binding.purchaseOrderId == 0\">{{binding.purchaseOrderNumber}}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\torder: 3,\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tfield: \"createdDateTime\",\r\n\t\t\t\t\tnameLanguageKey: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.CREATED_DATE\",\r\n\t\t\t\t\ttemplate: '<span>{{ binding.createdDateTime | diDate }}</span>',\r\n\t\t\t\t\tcellClass: \"centeredcell\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\torder: 4,\r\n\t\t\t\t\trights: [\"Supplier\", \"Buyer\"],\r\n\t\t\t\t\tfield: \"issuedDateTime\",\r\n\t\t\t\t\tnameLanguageKey: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.ISSUED_DATE\",\r\n\t\t\t\t\ttemplate: '<span>{{ binding.issuedDateTime | diDate }}</span>',\r\n\t\t\t\t\tcellClass: \"centeredcell\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\torder: 5,\r\n\t\t\t\t\trights: [\"Supplier\", \"Buyer\"],\r\n\t\t\t\t\tfield: \"deliveryDateTime\",\r\n\t\t\t\t\tnameLanguageKey: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.DELIVERY_DATE\",\r\n\t\t\t\t\ttemplate: '<span>{{ binding.deliveryDateTime | diDate }}</span>',\r\n\t\t\t\t\tcellClass: \"centeredcell\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\torder: 6,\r\n\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\tfield: \"supplier\",\r\n\t\t\t\t\tnameLanguageKey: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.SUPPLIER\",\r\n\t\t\t\t\ttemplate: '<div class=\"tooltip-wrap\">\\\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-ellipsis\">{{binding.supplier}}</span>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"(binding.supplier || \\'\\').length >= 35\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-class=\"((binding.supplier || \\'\\').length > 70) ? [\\'tooltip\\', \\'tooltip-multiline\\'] : \\'tooltip\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t<span>\\\r\n\t\t\t\t\t\t\t\t\t\t\t{{ ::binding.supplier }}\\\r\n\t\t\t\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\tcellClass: 'max-width-300'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\torder: 6,\r\n\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\tfield: \"customer\",\r\n\t\t\t\t\tnameLanguageKey: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.BUYER\",\r\n\t\t\t\t\ttemplate: '<div class=\"tooltip-wrap\">\\\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-ellipsis\">{{binding.customer}}</span>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"(binding.customer || \\'\\').length >= 35\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-class=\"((binding.customer || \\'\\').length > 70) ? [\\'tooltip\\', \\'tooltip-multiline\\'] : \\'tooltip\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t<span>\\\r\n\t\t\t\t\t\t\t\t\t\t\t{{ ::binding.customer }}\\\r\n\t\t\t\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\tcellClass: 'max-width-300'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\torder: 7,\r\n\t\t\t\t\trights: [\"Supplier\", \"Buyer\"],\r\n\t\t\t\t\tfield: \"totalLines\",\r\n\t\t\t\t\tnameLanguageKey: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.LINES\",\r\n\t\t\t\t\ttemplate: \"<span>{{ binding.totalLines }}</span>\",\r\n\t\t\t\t\tcellClass: \"centeredcell\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\torder: 8,\r\n\t\t\t\t\trights: [\"Supplier\", \"Buyer\"],\r\n\t\t\t\t\tfield: \"calculatedState\",\r\n\t\t\t\t\tnameLanguageKey: \"EINVOICING.PORTAL.GRN.LISTS.COLUMN_HEADERS.STATE\",\r\n\t\t\t\t\ttemplate: \"<span>{{binding.calculatedState}}</span>\",\r\n\t\t\t\t\tcellClass: \"centeredcell\"\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\t// Status filters configuration\r\n\t\t\tvar statusFilters = [\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\torder: 1,\r\n\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.ALL_BUYER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\torder: 1,\r\n\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.ALL_SUPPLIER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\torder: 2,\r\n\t\t\t\t\tvalue: 2,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.STATE.INVALID\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\torder: 3,\r\n\t\t\t\t\tvalue: 3,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.STATE.PENDING\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\torder: 4,\r\n\t\t\t\t\tvalue: 4,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.STATE.SUBMITTED\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\torder: 5,\r\n\t\t\t\t\tvalue: 8,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.STATE.SENTRECEIVED_BUYER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\torder: 6,\r\n\t\t\t\t\tvalue: 8,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.STATE.SENTRECEIVED_SUPPLIER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\torder: 7,\r\n\t\t\t\t\tvalue: 5,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.STATE.RECONCILIATIONINVALID\"\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tvar dateTimeDefaultFilters = [\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: \"Last30Days\",\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.LAST_30_DAYS\",\r\n\t\t\t\t\tdateTypes: [1, 2, 3]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: \"LastMonth\",\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.LAST_MONTH\",\r\n\t\t\t\t\tdateTypes: [1, 2, 3]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: \"ThisMonth\",\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.THIS_MONTH\",\r\n\t\t\t\t\tdateTypes: [1, 2, 3]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: \"Yesterday\",\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.YESTERDAY\",\r\n\t\t\t\t\tdateTypes: [1, 2, 3]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: \"Today\",\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.TODAY\",\r\n\t\t\t\t\tdateTypes: [1, 2, 3]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: \"Custom\",\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.CUSTOM\",\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tdateTypes: [1, 2, 3]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: \"Tomorrow\",\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.TOMORROW\",\r\n\t\t\t\t\tdateTypes: [3]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: \"NextMonth\",\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.NEXT_MONTH\",\r\n\t\t\t\t\tdateTypes: [3]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: \"Next30Days\",\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.NEXT_30_DAYS\",\r\n\t\t\t\t\tdateTypes: [3]\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tvar dateTypesOptions = [\r\n\t\t\t\t{ value: 1, label: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.TYPES.CREATED\" },\r\n\t\t\t\t{ value: 2, label: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.TYPES.ISSUED\" },\r\n\t\t\t\t{ value: 3, label: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.DATE.TYPES.DELIVERY\" }\r\n\t\t\t];\r\n\r\n\t\t\tvar sortOptions = [\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.GRN_NUMBER_ASC\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 2,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.GRN_NUMBER_DESC\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 3,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.ORDER_NUMBER_ASC\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 4,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.ORDER_NUMBER_DESC\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 5,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.CREATED_DATE_ASC\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 6,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.CREATED_DATE_DESC\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 7,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.ISSUE_DATE_ASC\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 8,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.ISSUE_DATE_DESC\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 9,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.DELIVERY_DATE_ASC\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 10,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.DELIVERY_DATE_DESC\"\r\n\t\t\t\t},\r\n                {\r\n                \trights: [\"Supplier\"],\r\n                \tvalue: 13,\r\n                \tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.BUYER_ASC\"\r\n                },\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\tvalue: 14,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.BUYER_DESC\"\r\n\t\t\t\t},\r\n                {\r\n                \trights: [\"Buyer\"],\r\n                \tvalue: 15,\r\n                \tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.SUPPLIER_ASC\"\r\n                },\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\tvalue: 16,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.SUPPLIER_DESC\"\r\n\t\t\t\t},\r\n                {\r\n                \trights: [\"User\"],\r\n                \tvalue: 17,\r\n                \tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.LINES_ASC\"\r\n                },\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 18,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.LINES_DESC\"\r\n\t\t\t\t},\r\n                {\r\n                \trights: [\"User\"],\r\n                \tvalue: 19,\r\n                \tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.STATUS_ASC\"\r\n                },\r\n\t\t\t\t{\r\n\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\tvalue: 20,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.FILTERS.SORT.STATUS_DESC\"\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tvar initialStatusFilter = getOptionByValue(statusFilters, 1);\r\n\t\t\tvar initialDateTimeFilter = getOptionByValue(dateTimeDefaultFilters, \"Last30Days\");\r\n\t\t\tvar initialDateType = getOptionByValue(dateTypesOptions, 1);\r\n\t\t\tvar initialSortOption = getOptionByValue(sortOptions, 6);\r\n\r\n\t\t\t// Provider definition\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = [\"authorizedObjectsFilter\", 'CLIENT_ENUMS'];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\tfunction getOptionByValue(filterItems, value) {\r\n\t\t\t\tvar filterItem = _.find(filterItems, function (obj) {\r\n\t\t\t\t\treturn obj.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn filterItem;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP2H01E\", cfg, \"cfg\");\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets required configuration for the grid.\r\n\t\t\t */\r\n\t\t\tfunction $get(authorizedObjectsFilter, clientEnums) {\r\n\t\t\t\tbuttonsConfiguration = {\r\n\t\t\t\t\ttype: \"Grn\",\r\n\t\t\t\t\tvisibleButtons: [],\r\n\t\t\t\t\tbuttonsSetOne: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\t\t\tname: \"view\",\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewGoodsReceiptNote,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tbuttonsSetTwo: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Foo\"],\r\n\t\t\t\t\t\t\tname: \"render\",\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.downloadGoodsReceiptNote,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\t\t\tname: \"related\",\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewRelatedDocumentsGoodsReceiptNote,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgetTableConfiguration: getTableConfiguration,\r\n\t\t\t\t\tgetStatusFilters: getStatusFilters,\r\n\t\t\t\t\tgetDateTimeFilters: getDateTimeFilters,\r\n\t\t\t\t\tgetDateTypesOptions: getDateTypesOptions,\r\n\t\t\t\t\tgetSortableColumns: getSortableColumns,\r\n\t\t\t\t\tgetButtonsSetOneConfiguration: getButtonsSetOneConfiguration,\r\n\t\t\t\t\tgetButtonsSetTwoConfiguration: getButtonsSetTwoConfiguration,\r\n\t\t\t\t\tgetInitialFilter: getInitialFilter,\r\n\t\t\t\t\tgetInitialDateTimeFilter: getInitialDateTimeFilter,\r\n\t\t\t\t\tgetInitialDateType: getInitialDateType,\r\n\t\t\t\t\tgetInitialSortOption: getInitialSortOption,\r\n\t\t\t\t\tgetInitialStatusFilter: getInitialStatusFilter,\r\n\t\t\t\t\tgetFreeformSearchDefaultFilter: getFreeformSearchDefaultFilter\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of all filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialFilter() {\r\n\t\t\t\t\tvar initialFilters = [];\r\n\r\n\t\t\t\t\tinitialFilters.push(initialStatusFilter);\r\n\r\n\t\t\t\t\tinitialFilters.push(initialDateTimeFilter);\r\n\r\n\t\t\t\t\treturn initialFilters;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of status filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialStatusFilter() {\r\n\t\t\t\t\treturn initialStatusFilter;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of date time filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialDateTimeFilter(dateTypeId) {\r\n\t\t\t\t\tif (util.isDefined(dateTypeId) && dateTypeId === 3) {\r\n\t\t\t\t\t\tinitialDateTimeFilter = getOptionByValue(dateTimeDefaultFilters, \"Next30Days\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tinitialDateTimeFilter = getOptionByValue(dateTimeDefaultFilters, 'Last30Days');\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn initialDateTimeFilter;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets initial date type option\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialDateType() {\r\n\t\t\t\t\treturn initialDateType;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets grid configuration options.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getTableConfiguration() {\r\n\t\t\t\t\tvar columns = authorizedObjectsFilter.getAuthorizedObjects(columnDefinitions, false);\r\n\r\n\t\t\t\t\tconfig.columns = _.sortBy(columns, function (column) {\r\n\t\t\t\t\t\treturn column.order;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Returns buttons set one configuration\t\t\t\t \r\n\t\t\t\t */\r\n\t\t\t\tfunction getButtonsSetOneConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetOne);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Returns buttons set two configuration\t\t\t\t \r\n\t\t\t\t */\r\n\t\t\t\tfunction getButtonsSetTwoConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetTwo);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Returns buttons configuration\t\t\t\t \r\n\t\t\t\t */\r\n\t\t\t\tfunction getConfiguration(array) {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(true);\r\n\r\n\t\t\t\t\tvar configuration = {\r\n\t\t\t\t\t\ttype: \"Grn\",\r\n\t\t\t\t\t\tvisibleButtons: []\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconfiguration.visibleButtons.fill(authorizedObjectsFilter.getAuthorizedObjects(array, true));\r\n\t\t\t\t\treturn configuration;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets status filters\r\n\t\t\t\t */\r\n\t\t\t\tfunction getStatusFilters() {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(false);\r\n\t\t\t\t\tvar options = authorizedObjectsFilter.getAuthorizedObjects(statusFilters, false);\r\n\t\t\t\t\treturn options;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets date time default filters for the grid.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getDateTimeFilters(dateTypeId) {\r\n\t\t\t\t\tvar filters = dateTimeDefaultFilters;\r\n\r\n\t\t\t\t\tif (util.isDefined(dateTypeId)) {\r\n\r\n\t\t\t\t\t\tfilters = _.filter(dateTimeDefaultFilters, function (filter) {\r\n\t\t\t\t\t\t\treturn _.contains(filter.dateTypes, dateTypeId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn filters;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets list of available date types                     \r\n\t\t\t\t */\r\n\t\t\t\tfunction getDateTypesOptions() {\r\n\t\t\t\t\treturn dateTypesOptions;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets the column intially used to sort the grid results\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialSortOption() {\r\n\t\t\t\t\treturn initialSortOption;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets the columns which can be used to sort the grid\r\n\t\t\t\t */\r\n\t\t\t\tfunction getSortableColumns() {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(true);\r\n\t\t\t\t\tvar options = authorizedObjectsFilter.getAuthorizedObjects(sortOptions, true);\r\n\t\t\t\t\treturn options;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets the filter to use when filtering triggered by freeform search box\r\n\t\t\t\t */\r\n\t\t\t\tfunction getFreeformSearchDefaultFilter() {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tstatusFilter: getOptionByValue(getStatusFilters(), 1).value, //all\r\n\t\t\t\t\t\tsortOption: getOptionByValue(getSortableColumns(), 1).value,  //grn number asc\r\n\t\t\t\t\t\tdateType: getOptionByValue(getDateTypesOptions(), 1).value,//created\r\n\t\t\t\t\t\tdateTimeFilter: getOptionByValue(getDateTimeFilters(), \"Custom\").value,\r\n\t\t\t\t\t\tfromDate: moment.utc([1900, 0, 1]).format(),// months, hours, minutes, seconds, and milliseconds are all zero indexed\r\n\t\t\t\t\t\ttoDate: moment.utc().format()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn GrnListConfiguratorProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-list/grn-list-configurator.provider.js","//{CODE:EUP78}\r\n// di.einvoicing.ui.portal.portal.grn.lists\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('GrnListController', GrnListController);\r\n\r\n\t\tGrnListController.$inject = [\r\n\t\t\t'diState',\r\n\t\t\t'translator',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'grnRepository',\r\n\t\t\t'grnListConfigurator',\r\n\t\t\t'$scope',\r\n\t\t\t'elementNotifier',\r\n\t\t\t'authorizedObjectsFilter',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'authenticationData',\r\n\t\t\t'documentStateResolver',\r\n\t\t\t'documentAttributeResolver',\r\n\t\t\t'userRightsRepository',\r\n\t\t\t'userActionsResolver',\r\n\t\t\t'modalSpinner',\r\n\t\t\t'vmFiltersListConfigurator',\r\n            'dateFormatter',\r\n\t\t\t'$stateParams',\r\n\t\t\t'listsParamsStore'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * Manages and configure goods receipt note list table.\t\t\r\n\t\t */\r\n\t\tfunction GrnListController(\r\n\t\t\tdiState,\r\n\t\t\ttranslator,\r\n\t\t\tenumTranslator,\r\n\t\t\tgrnRepository,\r\n\t\t\tgrnListConfigurator,\r\n\t\t\tscope,\r\n\t\t\telementNotifier,\r\n\t\t\tauthorizedObjectsFilter,\r\n\t\t\tclientEnums,\r\n\t\t\tauthenticationData,\r\n\t\t\tdocumentStateResolver,\r\n\t\t\tdocumentAttributeResolver,\r\n\t\t\tuserRightsRepository,\r\n\t\t\tuserActionsResolver,\r\n\t\t\tmodalSpinner,\r\n\t\t\tvmFiltersListConfigurator,\r\n            dateFormatter,\r\n\t\t\tstateParams,\r\n\t\t\tlistsParamsStore) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvm.loading = true;\r\n\t\t\tvar resultsReachedNotification;\r\n\r\n\t\t\tvm.grns = [];\r\n\t\t\tvm.tableOptions = {};\r\n\t\t\tvm.buttonsSetOneOptions = {};\r\n\t\t\tvm.buttonsSetTwoOptions = {};\r\n\t\t\tvm.selectedStates = [];\r\n\t\t\tvm.selectedAttributes = [];\r\n\t\t\tvm.selectedActions = [];\r\n\t\t\tvm.selectedItemsCount = 0;\r\n\t\t\tvm.selectedFilters = {\r\n\t\t\t\tsearchText: \"\"\r\n\t\t\t};\r\n\t\t\tvm.labels = {};\r\n\t\t\tvm.sortOptions = [];\r\n\t\t\tvm.statusOptions = [];\r\n\t\t\tvm.dateOptions = [];\r\n\t\t\tvm.dateTypes = [];\r\n\r\n\t\t\tvm.initialiseTable = initialiseTable;\r\n\t\t\tvm.filterGrns = filterGrns;\r\n\t\t\tvm.searchGrns = searchGrns;\r\n\t\t\tvm.goToRelated = goToRelated;\r\n\r\n\t\t\tvm.getCurrentlySelectedItems = getCurrentlySelectedItems;\r\n\t\t\tvm.orderChanged = orderChanged;\r\n\t\t\tvm.dateChanged = dateChanged;\r\n\t\t\tvm.dateTypeChanged = dateTypeChanged;\r\n\t\t\tvm.onSelectedChanged = onSelectedChanged;\r\n\t\t\tvm.statusChanged = statusChanged;\r\n\t\t\tvm.onPageSizeChanged = onPageSizeChanged;\r\n\t\t\tvm.onPageNumberChanged = onPageNumberChanged;\r\n\t\t\tvm.viewGrn = viewGrn;\r\n\t\t\tvm.clearFilters = clearFilters;\r\n\t\t\tvar spinner;\r\n\r\n\t\t\tinitialiseTable();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Initialises the table by configuring it and getting initial set of data.\r\n\t\t\t */\r\n\t\t\tfunction initialiseTable() {\r\n\r\n\t\t\t\tsetLabels();\r\n\r\n\t\t\t\tvmFiltersListConfigurator.configure(stateParams, vm, grnListConfigurator);\r\n\r\n\t\t\t\tgetGrns();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Sets labels values depending on user rights           \r\n\t\t\t\t */\r\n\t\t\t\tfunction setLabels() {\r\n\t\t\t\t\tvar data = [{\r\n\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.HEADER.TITLE_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.GRN.LISTS.HEADER.TITLE_BUYER\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\tvm.labels = authorizedObjectsFilter.getAuthorizedObjectsAsAssociative(data, 'key', 'label');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Triggers the navigation to a new state with free form search applied\r\n\t\t\t * Filtering using the text search should ignore the set filters and use less restrictive filters\r\n\t\t\t */\r\n\t\t\tfunction searchGrns() {\r\n\t\t\t\tvar filters = _.extend({}, (vm.searchDefaultFilter || {}), { searchText: vm.selectedFilters.searchText });\r\n\t\t\t\tfilterGrns(filters);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Triggers the navigation to a new state with applied filters\r\n\t\t\t */\r\n\t\t\tfunction filterGrns(filterOptions) {\r\n\t\t\t\tvm.loading = true;\r\n\t\t\t\tvar params = util.isRealObject(filterOptions)\r\n\t\t\t\t\t? filterOptions\r\n\t\t\t\t\t: {\r\n\t\t\t\t\t\tdateType: vm.selectedFilters.dateType.value,\r\n\t\t\t\t\t\tdateTimeFilter: vm.selectedFilters.dateTimeFilter.value,\r\n\t\t\t\t\t\tstatusFilter: vm.selectedFilters.statusFilter.value,\r\n\t\t\t\t\t\tsortOption: vm.selectedFilters.sortOption.value,\r\n\t\t\t\t\t\tfromDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.fromDate),\r\n\t\t\t\t\t\ttoDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.toDate),\r\n\t\t\t\t\t\tsearchText: vm.selectedFilters.searchText\r\n\t\t\t\t\t};\r\n\t\t\t\t//reset page number for each filtering\r\n\t\t\t\tparams = setInitialPaginationDetails(params);\r\n\r\n\t\t\t\t//save current filters to local storage before navigating away\r\n\t\t\t\tstoreParams(params);\r\n\t\t\t\tdiState.go('.', params, { reload: true });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Starts the loading spinner and calls the GRN repository to retrieve the goods receipt notes\r\n\t\t\t */\r\n\t\t\tfunction getGrns() {\r\n\t\t\t\tif (util.isDefined(resultsReachedNotification)) {\r\n\t\t\t\t\tresultsReachedNotification.hide();\r\n\t\t\t\t}\r\n\t\t\t\tshowSpinner();\r\n\r\n\t\t\t\tvar attributes = vm.selectedFilters.attributesFilter;\r\n\t\t\t\tvar customDateTimeFilter = null;\r\n\r\n\t\t\t\tif (vm.selectedFilters.customDateTimeFilter.fromDate !== \"\" && vm.selectedFilters.customDateTimeFilter.toDate !== \"\") {\r\n\t\t\t\t\tcustomDateTimeFilter = {\r\n\t\t\t\t\t\tfromDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.fromDate),\r\n\t\t\t\t\t\ttoDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.toDate)\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgrnRepository\r\n\t\t\t\t\t.getGrns(\r\n\t\t\t\t\t\tvm.selectedFilters.searchText,\r\n\t\t\t\t\t\tvm.tableOptions.maxItemsToShow,\r\n\t\t\t\t\t\tvm.selectedFilters.dateType.value,\r\n\t\t\t\t\t\tvm.selectedFilters.dateTimeFilter.value,\r\n\t\t\t\t\t\tcustomDateTimeFilter,\r\n\t\t\t\t\t\tvm.selectedFilters.sortOption.value,\r\n\t\t\t\t\t\tvm.selectedFilters.statusFilter.value,\r\n\t\t\t\t\t\tattributes)\r\n\t\t\t\t\t.then(resolved, rejected)\r\n\t\t\t\t\t.finally(function() {\r\n\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Callback after promise resolved                \r\n\t\t\t\t */\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tif (util.isUndefined(data)) {\r\n\t\t\t\t\t\tdata = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t    if (data.length >= vm.tableOptions.maxItemsToShow) {\r\n\t\t\t\t        translator.translate(\"EINVOICING.PORTAL.GRN.LISTS.MAXIMUM_GRNS_REACHED\")\r\n\t\t\t\t            .then(function(translated) {\r\n\t\t\t\t                resultsReachedNotification = elementNotifier.warning(\r\n\t\t\t\t                    translated,\r\n\t\t\t\t                    findElement('#grnList'),\r\n\t\t\t\t                    { clickToHide: true });\r\n\t\t\t\t                resultsReachedNotification.show();\r\n\t\t\t\t            });\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    translateDocumentStates(data);\r\n\r\n\t\t\t\t\tvm.grns.fill(data);\r\n\r\n\t\t\t\t\tresetAllowedActions();\r\n\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction translateDocumentStates(array) {\r\n\t\t\t\t\t\tdocumentStateResolver.resolveDocumentStates(\"grn\", array);\r\n\r\n\t\t\t\t\t\t_.each(array, function (grn) {\r\n\r\n\t\t\t\t\t\t    getCalculatedState(grn.clientEInvoicingStateId)\r\n\t\t\t\t\t\t        .then(function(state) {\r\n\t\t\t\t\t\t            grn.calculatedState = state;\r\n\t\t\t\t\t\t        });\r\n\r\n\t\t\t\t\t\t\tgrn.attributes = setAttributes(grn);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction setAttributes(grn) {\r\n\t\t\t\t\t\tvar array = documentAttributeResolver.resolveAttributeKeys(grn.attributes);\r\n\r\n\t\t\t\t\t\tif (isUserSupplier()) {\r\n\t\t\t\t\t\t\tdocumentAttributeResolver.removeAttribute(array, clientEnums.documentAttribute.notScheduledForPayment);\r\n\t\t\t\t\t\t\tdocumentAttributeResolver.removeAttribute(array, clientEnums.documentAttribute.scheduledForPayment);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn array;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Finds element in DOM\t\t\t\t\t             \r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction findElement(key) {\r\n\t\t\t\t\t\tif (util.isFunction(scope.findElement)) {\r\n\t\t\t\t\t\t\tvar element = scope.findElement(key);\r\n\r\n\t\t\t\t\t\t\treturn element;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected() {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction goToRelated() {\r\n\t\t\t\tvar selected = getSelectedGrn();\r\n\r\n\t\t\t\tif (util.isDefined(selected.documentId)) {\r\n\t\t\t\t\tdiState.go('portal.related.list', { id: selected.documentId });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets calculated document state\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction getCalculatedState(stateId) {\r\n\t\t\t\treturn documentStateResolver.calculateCurrentState('grn', stateId, true);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event when order filter has changed            \r\n\t\t\t */\r\n\t\t\tfunction orderChanged(value) {\r\n\t\t\t\tvar item = _.find(vm.sortOptions, function (option) {\r\n\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.sortOption = item;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event when date filter has changed           \r\n\t\t\t */\r\n\t\t\tfunction dateChanged(value, customDate) {\r\n\t\t\t\tvar item = _.find(vm.dateOptions, function (option) {\r\n\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.dateTimeFilter = item;\r\n\r\n\t\t\t\tif (customDate) {\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter = customDate;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter.fromDate = '';\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter.toDate = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event when date type changed\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction dateTypeChanged(value) {\r\n\t\t\t\tvar item = _.find(vm.dateTypes, function (option) {\r\n\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.dateType = item;\r\n\r\n\t\t\t\tvm.dateOptions = grnListConfigurator.getDateTimeFilters(vm.selectedFilters.dateType.value);\r\n\t\t\t\tvm.selectedFilters.dateTimeFilter = grnListConfigurator.getInitialDateTimeFilter(vm.selectedFilters.dateType.value);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when selection changed             \r\n\t\t\t */\r\n\t\t\tfunction onSelectedChanged(items) {\r\n\t\t\t\tvm.selectedItemsCount = items.length;\r\n\r\n\t\t\t\tvar arrayStates = [];\r\n\t\t\t\tvar arrayAttributes = [];\r\n\t\t\t\tvar arrayActions = [];\r\n\r\n\t\t\t\t_.each(items, function (item) {\r\n\t\t\t\t\tarrayStates.push(item.documentStateKey);\r\n\r\n\t\t\t\t\tvar array = [];\r\n\r\n\t\t\t\t\tarray.fill(item.attributes);\r\n\r\n\t\t\t\t\tarrayActions.push(item.actions);\r\n\r\n\t\t\t\t\t_.each(array, function (attribute) {\r\n\t\t\t\t\t\tarrayAttributes.push(attribute);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar resolvedActions = userActionsResolver.resolveActions(arrayActions, true);\r\n\r\n\t\t\t\tvm.selectedAttributes.fill(arrayAttributes);\r\n\t\t\t\tvm.selectedStates.fill(arrayStates);\r\n\t\t\t\tvm.selectedActions.fill(resolvedActions);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when status filter has changed           \r\n\t\t\t */\r\n\t\t\tfunction statusChanged(value) {\r\n\t\t\t\tvar item = _.find(vm.statusOptions, function (option) {\r\n\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.statusFilter = item;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getSelectedGrn() {\r\n\t\t\t\tvar selectedRows = getCurrentlySelectedItems();\r\n\r\n\t\t\t\tif (selectedRows.length === 1) {\r\n\t\t\t\t\treturn selectedRows[0];\r\n\t\t\t\t}\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Event handler when the size of the page changes\r\n\t\t\t */\r\n\t\t\tfunction onPageSizeChanged(newSize) {\r\n\t\t\t\tupdateStoredParams({ pageSize: newSize, pageNumber: 1 });\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Event handler when the page changes\r\n\t\t\t */\r\n\t\t\tfunction onPageNumberChanged(newPageNumber) {\r\n\t\t\t\tupdateStoredParams({ pageNumber: newPageNumber });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * resets the search filters on the page back to the default values\r\n\t\t\t */\r\n\t\t\tfunction clearFilters() {\r\n\t\t\t\tvar initialFilters = {\r\n\t\t\t\t\tdateType: grnListConfigurator.getInitialDateType().value,\r\n\t\t\t\t\tdateTimeFilter: grnListConfigurator.getInitialDateTimeFilter().value,\r\n\t\t\t\t\tstatusFilter: grnListConfigurator.getInitialStatusFilter().value,\r\n\t\t\t\t\tsortOption: grnListConfigurator.getInitialSortOption().value,\r\n\t\t\t\t\tfromDate: undefined,\r\n\t\t\t\t\ttoDate: undefined,\r\n\t\t\t\t\tsearchText: \"\"\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilterGrns(initialFilters);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Get currently selected items from the table.\r\n\t\t\t */\r\n\t\t\tfunction getCurrentlySelectedItems() {\r\n\t\t\t\tvar selectedRows = [];\r\n\r\n\t\t\t\tvm.grns.forEach(\r\n\t\t\t\t\tfunction addToSelected(item) {\r\n\t\t\t\t\t\tif (item.isSelected === true) {\r\n\t\t\t\t\t\t\tselectedRows.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn selectedRows;\r\n\t\t\t}\r\n\r\n\t\t\tfunction isUserSupplier() {\r\n\t\t\t\treturn userRightsRepository.userHasRight(\"Supplier\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction viewGrn() {\r\n\t\t\t\tvar selected = getSelectedGrn();\r\n\r\n\t\t\t\tif (util.isDefined(selected.id)) {\r\n\t\t\t\t\tdiState.go('portal.grn.viewById', { id: selected.id });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * resets allowed actions             \r\n\t\t\t */\r\n\t\t\tfunction resetAllowedActions() {\r\n\t\t\t\tvm.selectedItemsCount = 0;\r\n\t\t\t\tvm.selectedActions.clear();\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t   * Adds spinner to the page\t\t\t \r\n\t\t   */\r\n\t\t\tfunction showSpinner() {\r\n\t\t\t\tspinner = modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes spinner from the page\r\n\t\t\t*/\r\n\t\t\tfunction removeSpinner() {\r\n\t\t\t\tif (spinner) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t* Stores the params in the local storage\r\n\t\t\t*/\r\n\t\t\tfunction storeParams(params) {\r\n\t\t\t\tlistsParamsStore.set(\"grns\", params);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Updates the params in the local storage\r\n\t\t\t */\r\n\t\t\tfunction updateStoredParams(params) {\r\n\t\t\t\tlistsParamsStore.update(\"grns\", params);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Extends the source object with pageSize set to the current paginationPageSize and pageNumber set to 1\r\n\t\t\t */\r\n\t\t\tfunction setInitialPaginationDetails(source) {\r\n\t\t\t\treturn _.extend(source,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpageSize: vm.tableOptions.paginationPageSize,\r\n\t\t\t\t\t\tpageNumber: 1\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn GrnListController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-list/grn-list.controller.js","//{CODE:EUP79}\r\n// di.einvoicing.ui.portal.portal.grn.lists\r\ndefine(['angular'], function(ng) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.directive('diGrnList', diGrnList);\r\n\r\n\t\tfunction diGrnList() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\tscope: {},\r\n\t\t\t\tcontroller: \"GrnListController\",\r\n\t\t\t\tcontrollerAs: \"grnListCtrl\",\r\n\t\t\t\ttemplateUrl: 'src/app/portal/grn/grn-list/grn-list.html',\r\n\t\t\t\tlink: link\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope) {\r\n\t\t\t\tscope.findElement = findElement;\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction findElement(name) {\r\n\t\t\t\t\treturn ng.element(name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diGrnList;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-list/grn-list.directive.js","define([\r\n\t'./grn-search.component'\r\n], function(\r\n\tgrnSearch) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    module.component(\r\n            grnSearch.GrnSearchComponent.selector,\r\n            grnSearch.GrnSearchComponent);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-list/grn-search/_loader.js","export const GrnSearchComponent = {\r\n    selector: 'diGrnSearch',\r\n    bindings: {\r\n    },\r\n    templateUrl: 'src/app/portal/grn/grn-list/grn-search/grn-search.component.html',\r\n    controller: class {\r\n        constructor() {\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-list/grn-search/grn-search.component.js","//{CODE:EUP76}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n\r\n        module.factory('grnProxy', grnProxy);\r\n\r\n        grnProxy.$inject = [\r\n            'webApiHttp',\r\n            '$q',\r\n            'CLIENT_ENUMS',\r\n            'enumTranslator',\r\n            'urlHelper',\r\n            'grnFormatter'\r\n        ];\r\n\r\n        function grnProxy(http,\r\n            $q,\r\n            clientEnums,\r\n            enumTranslator,\r\n            urlHelper,\r\n            grnFormatter) {\r\n            var defaultFailureReason = 'EINVOICING.PORTAL.PROXIES.GRN.DEFAULT_ERROR';\r\n\r\n            return {\r\n                getGrns: getGrns,\r\n                getById: getById\r\n            };\r\n\r\n            function getById(id) {\r\n                var requestUrl = 'GoodsReceiptNote/GetById/' + id;\r\n\r\n                var promise = http.get(requestUrl);\r\n\r\n                var newPromise = promise.then(grnFormatter.reformatServerGrnDetailsForClient, errorReceivingGrn);\r\n\r\n                return newPromise;\r\n            }\r\n\r\n            /**\r\n             * calls web api for a list of goods receipt notes\t\t\t\r\n             */\r\n            function getGrns(searchText, lastNRows, dateType, dateTimeFilters, customDateTimeFilter, sortOption, statusOption) {\r\n                guard.throwIfNotANumber(\"EUP5L01E\", lastNRows, \"lastNRows\");\r\n                guard.throwIfInvalidId(\"EUP7601E\", dateType, \"dateType\");\r\n                guard.throwIfNullOrUndefined(\"EUP7602E\", dateTimeFilters, \"dateTimeFilters\");\r\n                guard.throwIfInvalidId(\"EUP7603E\", sortOption, \"sortOption\");\r\n                guard.throwIfInvalidId(\"EUP7604E\", statusOption, \"statusOption\");\r\n\r\n                if (!customDateTimeFilter) {\r\n                    customDateTimeFilter = {\r\n                        fromDate: new Date(),\r\n                        toDate: new Date()\r\n                    };\r\n                }\r\n\r\n                var requestedParams = {\r\n                    lastNRows: lastNRows,\r\n                    dateType: dateType,\r\n                    dateTimeFilterOption: dateTimeFilters.toString(),\r\n                    fromDate: JSON.stringify(customDateTimeFilter.fromDate).replace(/\"/g, \"\"),\r\n                    toDate: JSON.stringify(customDateTimeFilter.toDate).replace(/\"/g, \"\"),\r\n                    sortOption: sortOption,\r\n                    statusOption: statusOption\r\n                };\r\n\r\n                if (util.isNonEmptyString(searchText)) {\r\n                    requestedParams.searchText = searchText;\r\n                }\r\n\r\n                var requestedUrl = urlHelper.setParameters('GoodsReceiptNote/GetGoodsReceiptNoteSearchResults', requestedParams);\r\n\r\n                var promise = http.get(requestedUrl).then(resolve, errorReceivingGrn);\r\n\r\n                return promise;\r\n\r\n                function resolve(data) {\r\n                    return data;\r\n                }\r\n            }\r\n\r\n            function errorReceivingGrn(error) {\r\n                return errorProcessingGrn(error, 'EINVOICING.PORTAL.PROXIES.GRN.RECEIVE_ERROR');\r\n            }\r\n\r\n            function errorProcessingGrn(error, failureReason) {\r\n                error.failureReason = (failureReason || defaultFailureReason);\r\n                return $q.reject(error);\r\n            }\r\n        }\r\n\r\n        return grnProxy;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-proxy.factory.js","//{CODE:EUP75}\r\n// di.einvoicing.ui.portal.portal.grn\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.factory('grnRepository', grnRepository);\r\n\r\n\t\tgrnRepository.$inject = [\r\n\t\t\t'grnProxy',\r\n\t\t\t'$q',\r\n\t\t\t'notificationHandler'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * Repository for methods on goods receipt note\t\t\r\n\t\t */\r\n\t\tfunction grnRepository(\r\n\t\t\tgrnProxy,\r\n\t\t\t$q,\r\n\t\t\tnotificationHandler) {\r\n\t\t\treturn {\r\n\t\t\t\tgetGrns: getGrns\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads list of grns from database\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction getGrns(searchText, lastNRows, dateType, dateTimeFilters, customDateTimeFilter, sortOption, statusOption) {\r\n\t\t\t\tvar promise = grnProxy\r\n\t\t\t\t\t.getGrns(searchText, lastNRows, dateType, dateTimeFilters, customDateTimeFilter, sortOption, statusOption)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\terror.failureReason = \"EINVOICING.PORTAL.GRN.ACTIONS.NOTIFICATION.ERROR.RECEIVE_ERROR\";\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, '');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * rejects promise and displays error notification\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction rejectWithErrorNotification(error, reference) {\r\n\t\t\t\tnotificationHandler.showError(error.failureReason, reference);\r\n\r\n\t\t\t    return $q.reject(error).catch(function() {});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn grnRepository;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/grn/grn-repository.factory.js","define([\r\n\t'./invoiceLinesColumnSettings',\r\n    './scrollbarResizer',\r\n    './invoiceActionVerifier'\r\n], function (\r\n\tinvoiceLinesColumnSettingsLoader,\r\n    scrollbarResizerLoader,\r\n    invoiceActionVerifierLoader) {\r\n\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tinvoiceLinesColumnSettingsLoader(module);\r\n\t\tscrollbarResizerLoader(module);\r\n\t\tinvoiceActionVerifierLoader(module); \r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/_components/_loader.js","//{CODE:EUP93}\r\n// di.einvoicing.ui.portal.portal.invoices._components\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    module.factory('invoiceActionVerifier', invoiceActionVerifier);\r\n\r\n\t    invoiceActionVerifier.$inject = ['CLIENT_ENUMS'];\r\n\r\n\t    function invoiceActionVerifier(clientEnums) {\r\n\t\t\treturn {\r\n\t\t\t    canBeEdited: canBeEdited,\r\n\t\t\t    canBeSubmitted: canBeSubmitted\r\n\t\t\t};\r\n            \r\n\t\t\t/**\r\n\t\t\t * Tests if invoice can be edited\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction canBeEdited(invoice) {\r\n\t\t\t    var editAction = _.find(invoice.actions, function (action) {\r\n\t\t\t        return action === clientEnums.userActions.editInvoice;\r\n\t\t\t    });\r\n\r\n\t\t\t    return (typeof editAction === \"undefined\" ? false : true);\r\n\t\t\t}\r\n\r\n            /**\r\n             * Tests if invoice can be submitted             \r\n             */\r\n\t\t\tfunction canBeSubmitted(invoice) {\r\n\t\t\t    var submitAction = _.find(invoice.actions, function (action) {\r\n\t\t\t        return action === clientEnums.userActions.submit;\r\n\t\t\t    });\r\n\r\n\t\t\t    return (typeof submitAction === \"undefined\" ? false : true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t    return invoiceActionVerifier;\r\n\t};\r\n});\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/_components/invoiceActionVerifier.js","//{CODE:EUP3X}\r\n// di.einvoicing.ui.portal.invoices.editor.components\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n    return function(module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        guard.throwIfNotAnObject(\"EUP3X01E\", module, \"module\");\r\n\r\n        module.factory('invoiceLinesColumnSettings', invoiceLinesColumnSettings);\r\n\r\n        function invoiceLinesColumnSettings() {\r\n            var settings = getColumnSettings();\r\n\r\n            return settings;\r\n\r\n            /**\r\n             * Returns a collection of settings for the invoice table columns.\r\n             */\r\n            function getColumnSettings() {\r\n                return {\r\n                    columns: [\r\n                        {\r\n                            heading: '#',\r\n                            headerClass: 'has-ordinal',\r\n                            cellClass: 'centeredcell',\r\n                            model: 'line.lineNumber',\r\n                            template:\r\n                                '<p ' +\r\n                                    'class=\"centeredcell readonly\" ' +\r\n                                    'ng-bind=\"binding.lineNumber\">' +\r\n                                '</p>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"centeredcell readonly\" ' +\r\n                                    'ng-bind=\"binding.lineNumber\">' +\r\n                                '</p>',\r\n                            visible: true,\r\n                            hideable: false,\r\n                            editable: false,\r\n                            tiny: true,\r\n                            isColumn: true,\r\n                            mandatory: true\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.SUPPLIER_CODE',\r\n                            model: 'line.code',\r\n                            headerClass: 'centeredcellMinWidth',\r\n                            template:\r\n                                '<di-product-selector ' +\r\n                                    'subscribe-to-invoice-details-change=\"controller.subscribeToInvoiceDetailsChange\" ' +\r\n                                    'scope-cache=\"controller.scopeCache\" ' +\r\n                                    'bind-to-object=\"binding\" ' +\r\n                                    'bind-to-property=\"code\" ' +\r\n                                    'validation-name=\"suppliersProductCode\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.SUPPLIER_CODE\" ' +\r\n                                    'property-control=\"code\" ' +\r\n                                    'on-change-accessor=\"controller.productCodeChanged\">' +\r\n                                '</di-product-selector>',\r\n                            readonlyTemplate:\r\n                                '<p class=\"readonly\">' +\r\n                                    '{{binding.code}}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.code\" ' +\r\n                                'di-validate=\"suppliersProductCode\"/>',\r\n                            visible: true,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: false,\r\n                            isHidden: false,\r\n                            isColumn: true,\r\n                            mandatory: true\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.TYPE',\r\n                            model: '(productLinesCtrl.productTypes[line.productType] || {}).name',\r\n                            headerClass: 'centeredcellMinWidth',\r\n                            template:\r\n                                '<di-product-type-selector ' +\r\n                                    'scope-cache=\"controller.scopeCache\" ' +\r\n                                    'bind-to-object=\"binding\" ' +\r\n                                    'bind-to-property=\"productType\" ' +\r\n                                    'validation-property-name=\"productType\" ' +\r\n                                    'bind-to-second-property=\"productTypeName\" ' +\r\n                                    'validation-name=\"productType\" ' +\r\n                                    'on-change-accessor=\"controller.productTypeChanged\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.TYPE\">' +\r\n                                '</di-product-type-selector>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.productTypeName}}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.productType\" ' +\r\n                                    'di-validate=\"productType\"/>',\r\n                            visible: true,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: false,\r\n                            isHidden: false,\r\n                            isColumn: true,\r\n                            mandatory: true\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ITEM_NAME',\r\n                            model: 'line.itemName',\r\n                            headerClass: 'centeredcellMinWidth',\r\n                            template:\r\n                                `<di-input\r\n                                    ng-change=\"controller.lineChanged()\"\r\n                                    ng-model=\"binding\"\r\n                                    ng-model-property=\"itemName\"\r\n                                    validation-property-name=\"itemName\"\r\n                                    validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ITEM_NAME\"\r\n                                    di-input-type=\"text\">\r\n                                </di-input>`,\r\n                            readonlyTemplate:\r\n                                '<div ' +\r\n                                    'class=\"tooltip-wrap\">' +\r\n                                    '<p ' +\r\n                                        'class=\"readonly text-ellipsis\">' +\r\n                                        '{{binding.itemName}}' +\r\n                                    '</p>' +\r\n                                    '<input ' +\r\n                                        'type=\"hidden\" ' +\r\n                                        'ng-model=\"binding.itemName\" ' +\r\n                                        'di-validate=\"itemName\"/>' +\r\n                                    '<div ' +\r\n                                        'ng-if=\"(binding.itemName || \\'\\').length >= 35\" ' +\r\n                                        'ng-class=\"((binding.itemName || \\'\\').length > 70) ? [\\'tooltip\\', \\'tooltip-multiline\\'] : \\'tooltip\\'\">' +\r\n                                        '<span>' +\r\n                                            '{{binding.itemName}}' +\r\n                                        '</span>' +\r\n                                    '</div>' +\r\n                                '</div>',\r\n                            visible: true,\r\n                            hideable: false,\r\n                            editable: true,\r\n                            isVisible: false,\r\n                            isHidden: false,\r\n                            isColumn: true,\r\n                            mandatory: true\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.DESCRIPTION',\r\n                            model: 'line.description',\r\n                            headerClass: 'centeredcellDesc',\r\n                            template:\r\n                                `<di-input\r\n                                    ng-change=\"controller.lineChanged()\"\r\n                                    ng-model=\"binding\"\r\n                                    ng-model-property=\"itemDescription\"\r\n                                    validation-property-name=\"itemDescription\"\r\n                                    validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.DESCRIPTION\"\r\n                                    di-input-type=\"text\">\r\n                                </di-input>`,\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.itemDescription}}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.itemDescription\" ' +\r\n                                    'di-validate=\"itemDescription\"/>',\r\n                            visible: true,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: false,\r\n                            isHidden: false,\r\n                            isColumn: true,\r\n                            mandatory: true\r\n                        },\r\n                        {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.UNIT_PRICE',\r\n                            headerClass: \"centeredcell\",\r\n                            cellClass: \"numericcell\",\r\n                            model: 'line.unitPrice',\r\n                            dataType: 'number',\r\n                            template:\r\n                                `<di-input                                     \r\n                                    ng-model=\"binding\"\r\n                                    ng-model-property=\"unitPrice\"\r\n                                    validation-property-name=\"unitPrice\"\r\n                                    ng-change=\"controller.lineChanged()\"\r\n                                    validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.UNIT_PRICE\"\r\n                                    di-input-type=\"text\">\r\n                                </di-input>`,\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly numericcell\">{{binding.unitPrice | diCurrency:controller.currencyId}}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.unitPrice\" ' +\r\n                                    'di-validate=\"unitPrice\"/>',\r\n                            visible: true,\r\n                            hideable: false,\r\n                            editable: true,\r\n                            isVisible: false,\r\n                            isHidden: false,\r\n                            isColumn: true,\r\n                            mandatory: true\r\n                        },\r\n                        {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.QUANTITY',\r\n                            headerClass: \"centeredcell\",\r\n                            cellClass: \"numericcell\",\r\n                            model: 'line.quantity',\r\n                            dataType: 'number',\r\n                            template:\r\n                                `<di-input\r\n                                    class=\"numericcell\"\r\n                                    ng-model=\"binding\"\r\n                                    ng-model-property=\"quantity\"\r\n                                    ng-change=\"controller.lineChanged()\"\r\n                                    validation-property-name=\"quantity\"\r\n                                    validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.QUANTITY\"\r\n                                    di-input-type=\"text\">\r\n                                </di-input>`,\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly numericcell\">' +\r\n                                    '{{binding.quantity}}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.quantity\" ' +\r\n                                    'di-validate=\"quantity\"/>',\r\n                            visible: true,\r\n                            hideable: false,\r\n                            editable: true,\r\n                            isVisible: false,\r\n                            isHidden: false,\r\n                            isColumn: true,\r\n                            mandatory: true\r\n                        },\r\n                        {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.QUANTITY_UNIT',\r\n                            model:\r\n                                'line.unitOfMeasureId ? (productLinesCtrl.unitsOfMeasure[line.unitOfMeasureId] || {}).name : \"\"',\r\n                            headerClass: 'centeredcellMinWidth',\r\n                            template:\r\n                                '<di-unit-of-measure-selector ' +\r\n                                    'scope-cache=\"controller.scopeCache\" ' +\r\n                                    'bind-to-object=\"binding\" ' +\r\n                                    'bind-to-property=\"unitOfMeasureId\" ' +\r\n                                    'bind-to-second-property=\"quantityUnit\" ' +\r\n                                    'validation-name=\"unitOfMeasureId\" ' +\r\n                                    'validation-message=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.ERRORS.QUANTITY_UNIT\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.QUANTITY_UNIT\" ' +\r\n                                    'di-validate-model=\"invoiceLine\" ' +\r\n                                    'validation-property-name=\"unitOfMeasureId\" ' +\r\n                                    'on-change-accessor=\"controller.productUnitOfMeasureChanged\">' +\r\n                                '</di-unit-of-measure-selector>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{controller.getUnitOfmeasureLabel(binding)}}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.quantityUnit\"/>',\r\n                            visible: true,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: false,\r\n                            isHidden: false,\r\n                            isColumn: true,\r\n                            mandatory: true\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.TAX_CODE',\r\n                            model: 'line.taxCodeId ? line.taxCode + \\': \\' + line.taxRate + \\'%\\' : \"\"',\r\n                            headerClass: 'centeredcellMinWidth',\r\n                            template:\r\n                                '<di-tax-code-selector ' +\r\n                                    'subscribe-to-invoice-details-change=\"controller.subscribeToInvoiceDetailsChange\" ' +\r\n                                    'scope-cache=\"controller.scopeCache\" ' +\r\n                                    'bind-to-object=\"binding\" ' +\r\n                                    'bind-to-property=\"taxCodeId\" ' +\r\n                                    'validation-name=\"taxCodeId\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.TAX_CODE\" ' +\r\n                                    'di-validate-model=\"invoiceLine\" ' +\r\n                                    'validation-property-name=\"taxCodeId\" ' +\r\n                                    'on-change-accessor=\"controller.taxCodeChanged\">' +\r\n                                '</di-tax-code-selector>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">{{binding.taxCode ? binding.taxCode + \\' (\\' + binding.taxCategory + \\'): \\' + binding.taxRate + \\'%\\' : \"\"}}</p>' +\r\n                                    '<input ' +\r\n                                        'type=\"hidden\" ' +\r\n                                        'ng-model=\"binding.taxCodeId\" ' +\r\n                                        'di-validate=\"taxCodeId\"/>',\r\n                            visible: true,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: false,\r\n                            isHidden: false,\r\n                            isColumn: true,\r\n                            mandatory: true\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.TAX_AMOUNT',\r\n                            headerClass: \"centeredcell\",\r\n                            cellClass: \"numericcell\",\r\n                            model: 'line.taxAmount | diCurrency:productLinesCtrl.currencyId',\r\n                            dataType: 'number',\r\n                            template:\r\n                                '<p ' +\r\n                                    'class=\"readonly numericcell\">' +\r\n                                    '{{binding.taxAmount | diCurrency:controller.currencyId}}' +\r\n                                '</p>',\r\n                            visible: true,\r\n                            hideable: true,\r\n                            editable: false,\r\n                            isVisible: false,\r\n                            isHidden: false,\r\n                            isColumn: true,\r\n                            mandatory: true\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.NET_AMOUNT',\r\n                            headerClass: \"centeredcell\",\r\n                            cellClass: \"numericcell\",\r\n                            model: 'line.netAmount | diCurrency:productLinesCtrl.currencyId',\r\n                            dataType: 'number',\r\n                            template:\r\n                                '<p ' +\r\n                                    'class=\"readonly numericcell\">' +\r\n                                    '{{binding.netAmount | diCurrency:controller.currencyId}}' +\r\n                                '</p>',\r\n                            visible: true,\r\n                            hideable: false,\r\n                            editable: false,\r\n                            isVisible: false,\r\n                            isHidden: false,\r\n                            isColumn: true,\r\n                            mandatory: true\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ECLASS_CODE',\r\n                            model: 'line.eClassCode',\r\n                            headerClass: 'centeredcell',\r\n                            template:\r\n                                `<di-input\r\n                                    ng-change=\"controller.lineChanged()\"\r\n                                    ng-model=\"binding\"\r\n                                    ng-model-property=\"eClassCode\"\r\n                                    validation-property-name=\"eClassCode\"\r\n                                    validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ECLASS_CODE\"\r\n                                    di-input-type=\"text\">\r\n                                </di-input>`,\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.eClassCode}}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.eClassCode\" ' +\r\n                                    'di-validate=\"eClassCode\"/>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.PRICE_BASE_QUANTITY',\r\n                            headerClass: \"centeredcell\",\r\n                            cellClass: \"numericcell\",\r\n                            model: 'line.priceBaseQuantity',\r\n                            dataType: 'number',\r\n                            template:\r\n                                `<di-input\r\n                                    class=\"numericcell\"\r\n                                    ng-model=\"binding\"\r\n                                    ng-model-property=\"priceBaseQuantity\"\r\n                                    ng-change=\"controller.lineChanged()\"\r\n                                    validation-property-name=\"priceBaseQuantity\"\r\n                                    validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.PRICE_BASE_QUANTITY\"\r\n                                    di-input-type=\"text\">\r\n                                </di-input>`,\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly numericcell\">' +\r\n                                    '{{binding.priceBaseQuantity}}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.priceBaseQuantity\" ' +\r\n                                    'di-validate=\"priceBaseQuantity\"/>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.PERIOD_START_DATE',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.periodStartDate',\r\n                            dataType: 'date',\r\n                            template:\r\n                                '<di-input ' +\r\n                                    'di-input-type=\"date\" ' +\r\n                                    'ng-model=\"binding\" ' +\r\n                                    'ng-model-property=\"periodStartDate\" ' +\r\n                                    'ng-model-options=\"{ updateOn: \\'default blur\\', debounce: {\\'default\\': 1000, \\'blur\\': 0} }\" ' +\r\n                                    'ng-change=\"controller.lineChanged()\" ' +\r\n                                    'validation-property-name=\"periodStartDate\" ' +\r\n                                    'validation-model-display-name=\"{LABEL}\">' +\r\n                                '</di-input>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.periodStartDate}}' +\r\n                                '</p>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.PERIOD_END_DATE',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.periodEndDate',\r\n                            dataType: 'date',\r\n                            template:\r\n                                '<di-input ' +\r\n                                    'di-input-type=\"date\" ' +\r\n                                    'ng-model=\"binding\" ' +\r\n                                    'ng-model-property=\"periodEndDate\" ' +\r\n                                    'ng-change=\"controller.lineChanged()\" ' +\r\n                                    'ng-model-options=\"{ updateOn: \\'default blur\\', debounce: {\\'default\\': 1000, \\'blur\\': 0} }\" ' +\r\n                                    'validation-property-name=\"periodEndDate\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.PERIOD_END_DATE\">' +\r\n                                '</di-input>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.periodEndDate}}' +\r\n                                '</p>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        }, \r\n                        {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ORDER_LINE_REFERENCE',\r\n                            model: 'line.orderLineReference',\r\n                            headerClass: 'centeredcell',\r\n                            template:\r\n                                `<di-input\r\n                                    ng-change=\"controller.lineChanged()\"\r\n                                    ng-model=\"binding\"\r\n                                    ng-model-property=\"orderLineReference\"\r\n                                    validation-property-name=\"orderLineReference\"\r\n                                    validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ORDER_LINE_REFERENCE\"\r\n                                    di-input-type=\"text\">\r\n                                </di-input>`,\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.orderLineReference}}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.orderLineReference\" ' +\r\n                                    'di-validate=\"orderLineReference\"/>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        },\r\n                        {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ACCOUNTING_COST_REFERENCE',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.accountingCostReference',\r\n                            template:\r\n                                '<di-input ' +\r\n                                    'di-input-type=\"text\" ' +\r\n                                    'ng-model=\"binding\" ' +\r\n                                    'ng-model-property=\"accountingCostReference\" ' +\r\n                                    'ng-change=\"controller.lineChanged()\" ' +\r\n                                    'validation-property-name=\"accountingCostReference\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ACCOUNTING_COST_REFERENCE\">' +\r\n                                '</di-input>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.accountingCostReference}}' +\r\n                                '</p>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.INVOICE_NOTES',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.note',\r\n                            template:\r\n                                '<di-input ' +\r\n                                    'di-input-type=\"text\" ' +\r\n                                    'ng-model=\"binding\" ' +\r\n                                    'ng-model-property=\"note\" ' +\r\n                                    'ng-change=\"controller.lineChanged()\" ' +\r\n                                    'validation-property-name=\"note\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.INVOICE_NOTES\">' +\r\n                                '</di-input>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.note}}' +\r\n                                '</p>',\r\n                            visible: false,\r\n                            hideable: false,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.STANDARD_PRODUCT_CODE_SCHEME',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.standardProductCodeScheme',\r\n                            dataType: 'date',\r\n                            template:\r\n                                '<di-input ' +\r\n                                    'di-input-type=\"text\" ' +\r\n                                    'ng-model=\"binding\" ' +\r\n                                    'ng-model-property=\"standardProductCodeScheme\" ' +\r\n                                    'ng-change=\"controller.lineChanged()\" ' +\r\n                                    'validation-property-name=\"standardProductCodeScheme\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.STANDARD_PRODUCT_CODE_SCHEME\">' +\r\n                                 '</di-input>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.standardProductCodeScheme}}' +\r\n                                '</p>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.CHARGE_REASON',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.chargeReason',\r\n                            template:\r\n                                '<di-input ' +\r\n                                    'di-input-type=\"text\" ' +\r\n                                    'ng-model=\"binding\" ' +\r\n                                    'ng-model-property=\"chargeReason\" ' +\r\n                                    'ng-change=\"controller.lineChanged()\" ' +\r\n                                    'validation-property-name=\"chargeReason\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.CHARGE_REASON\">' +\r\n                                '</di-input>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.chargeReason}}' +\r\n                                '</p>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.CHARGE_AMOUNT',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.chargeAmount  | diCurrency:controller.currencyId',\r\n                            dataType: 'number',\r\n                            template:\r\n                                '<di-input ' +\r\n                                    'di-input-type=\"text\" ' +\r\n                                    'ng-model=\"binding\" ' +\r\n                                    'ng-model-property=\"chargeAmount\" ' +\r\n                                    'ng-change=\"controller.lineChanged()\" ' +\r\n                                    'validation-property-name=\"chargeAmount\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.CHARGE_AMOUNT\">' +\r\n                                '</di-input>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.chargeAmount | diCurrency:controller.currencyId }}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.chargeAmount\" ' +\r\n                                    'di-validate=\"chargeAmount\"/>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ALLOWANCE_REASON',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.allowanceReason',\r\n                            template:\r\n                                '<di-input ' +\r\n                                    'di-input-type=\"text\" ' +\r\n                                    'ng-model=\"binding\" ' +\r\n                                    'ng-model-property=\"allowanceReason\" ' +\r\n                                    'ng-change=\"controller.lineChanged()\" ' +\r\n                                    'validation-property-name=\"allowanceReason\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ALLOWANCE_REASON\">' +\r\n                                '</di-input>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.allowanceReason}}' +\r\n                                '</p>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        }, {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ALLOWANCE_AMOUNT',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.allowanceAmount  | diCurrency:controller.currencyId',\r\n                            dataType: 'number',\r\n                            template:\r\n                                '<di-input ' +\r\n                                    'di-input-type=\"text\" ' +\r\n                                    'ng-model=\"binding\" ' +\r\n                                    'ng-model-property=\"allowanceAmount\" ' +\r\n                                    'ng-change=\"controller.lineChanged()\" ' +\r\n                                    'validation-property-name=\"allowanceAmount\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ALLOWANCE_AMOUNT\">' +\r\n                                '</di-input>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.allowanceAmount | diCurrency:controller.currencyId}}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.allowanceAmount\" ' +\r\n                                    'di-validate=\"allowanceAmount/>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        },\r\n                        {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.CUSTOMER_PRODUCT_CODE',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.customersProductCode',\r\n                            template:\r\n                                '<di-input ' +\r\n                                    'di-input-type=\"text\" ' +\r\n                                    'ng-model=\"binding\" ' +\r\n                                    'ng-model-property=\"customersProductCode\" ' +\r\n                                    'ng-change=\"controller.lineChanged()\" ' +\r\n                                    'validation-property-name=\"customersProductCode\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.CUSTOMER_PRODUCT_CODE\">' +\r\n                                '</di-input>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.customersProductCode}}' +\r\n                                '</p>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        },\r\n                        {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.STANDARD_PRODUCT_CODE',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.standardProductCode',\r\n                            template:\r\n                                '<di-product-selector ' +\r\n                                    'subscribe-to-invoice-details-change=\"controller.subscribeToInvoiceDetailsChange\" ' +\r\n                                    'scope-cache=\"scopeCache\" ' +\r\n                                    'bind-to-object=\"binding\" ' +\r\n                                    'bind-to-property=\"standardProductCode\" ' +\r\n                                    'on-change-accessor=\"controller.productStandardCodeChanged\" ' +\r\n                                    'validation-name=\"standardProductCode\" ' +\r\n                                    'property-control=\"standardCode\" ' +\r\n                                    'validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.STANDARD_PRODUCT_CODE\" ' +\r\n                                    'hideable=\"false\" ' +\r\n                                    'visible=\"true\">' +\r\n                                '</di-product-selector>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.standardProductCode}}' +\r\n                                '</p>' +\r\n                                '<input ' +\r\n                                    'type=\"hidden\" ' +\r\n                                    'ng-model=\"binding.standardProductCode\" ' +\r\n                                    'di-validate=\"standardProductCode\" />',\r\n                            visible: true,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: true\r\n                        },\r\n                        {\r\n                            heading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.ORIGIN_COUNTRY',\r\n                            headerClass: \"centeredcell\",\r\n                            model: 'line.originCountry',\r\n                            template:\r\n                                '<di-dropdown-selector ' +\r\n                                    'items=\"controller.countries\"\\ ' +\r\n                                    'bind-to-object=\"binding\" ' +\r\n                                    'bind-to-property=\"originCountryId\" ' +\r\n                                    'on-change-accessor=\"controller.onOriginCountryChanged\">' +\r\n                                '</di-dropdown-selector>',\r\n                            readonlyTemplate:\r\n                                '<p ' +\r\n                                    'class=\"readonly\">' +\r\n                                    '{{binding.originCountryName}}' +\r\n                                '</p>',\r\n                            visible: false,\r\n                            hideable: true,\r\n                            editable: true,\r\n                            isVisible: true,\r\n                            isHidden: false,\r\n                            isColumn: false,\r\n                            mandatory: false\r\n                        }\r\n                    ]\r\n                };\r\n            }\r\n        }\r\n\r\n        return invoiceLinesColumnSettings;\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/_components/invoiceLinesColumnSettings.js","//{CODE:EUP91}\r\n// di.einvoicing.ui.portal.portal.invoices._components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.factory('scrollbarResizer', scrollbarResizer);\r\n\r\n        scrollbarResizer.$inject = ['$window'];\r\n\r\n        function scrollbarResizer($window) {\r\n            return {\r\n                monitorHorizontalBrowserScrollbar: monitorHorizontalBrowserScrollbar,\r\n                resizeHorizontalScrollbar: resizeHorizontalScrollbar\r\n            };\r\n\r\n            function monitorHorizontalBrowserScrollbar() {\r\n                $(window).on(\"resize.doResize\", _.debounce(function () {\r\n                        resizeHorizontalScrollbar();\r\n                }, 100));\r\n            }\r\n\r\n\r\n            function resizeHorizontalScrollbar() {\r\n                var productTableWidth = $(\"#productLines\").width();\r\n                var leftToProductTableWidth = 340;\r\n                var innerWidth = $window.innerWidth + 15;\r\n\r\n                if (innerWidth <= leftToProductTableWidth + productTableWidth) {\r\n                    $(\"body\").css(\"width\", leftToProductTableWidth + productTableWidth);\r\n                }\r\n                else {\r\n                    $(\"body\").css(\"width\", \"100%\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/_components/scrollbarResizer.js","define([\r\n\t'./_states',\r\n\t'./_components/_loader',\r\n    './shared/_loader',\r\n\t'./editor/_loader',\r\n\t'./lists/_loader',\r\n\t'./viewer/_loader',\r\n\t'./invoiceRepository',\r\n    './unit-of-measure-selector/_loader',\r\n    './allowances-charges/_loader',\r\n    './document-issues/_loader',\r\n    './attachment-uploader/_loader',\r\n    './product-selector/_loader',\r\n    './product-type-selector/_loader',\r\n    './tax-code-selector/_loader',\r\n    './product-lines/_loader',\r\n    './invoice-proxy.factory',\r\n    './product-proxy.factory',\r\n    './tax-proxy.factory'\r\n], function(\r\n\tstatesLoader,\r\n\tcomponentsLoader,\r\n    sharedLoader,\r\n\teditorLoader,\r\n\tlistsLoader,\r\n\tviewerLoader,\r\n\tinvoiceRepositoryLoader,\r\n    unitOfMeasureSelectorLoader,\r\n    allowancesChargesLoader,\r\n    documentIssuesLoader,\r\n    attachmentsLoader,\r\n    productSelectorLoader,\r\n    productTypeSelectorLoader,\r\n    taxCodeSelectorLoader,\r\n    productLinesLoader,\r\n    invoiceProxyLoader,\r\n    productProxyLoader,\r\n    taxProxyLoader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    invoiceProxyLoader(module);\r\n\t    productProxyLoader(module);\r\n\t    taxProxyLoader(module);\r\n\t    statesLoader(module);\r\n\t    componentsLoader(module);\r\n\t    sharedLoader(module);\r\n\t\teditorLoader(module);\r\n\t\tlistsLoader(module);\r\n\t\tviewerLoader(module);\r\n\t\tinvoiceRepositoryLoader(module);\r\n\t\tunitOfMeasureSelectorLoader(module);\r\n\t\tallowancesChargesLoader(module);\r\n\t\tdocumentIssuesLoader(module);\r\n\t\tattachmentsLoader(module);\r\n\t\tproductSelectorLoader(module);\r\n\t\tproductTypeSelectorLoader(module);\r\n\t\ttaxCodeSelectorLoader(module);\r\n\t    productLinesLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/_loader.js","define(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.config(configureInvoiceStates);\r\n\r\n\t\tconfigureInvoiceStates.$inject = ['stateHelperProvider'];\r\n\t\tfunction configureInvoiceStates(stateHelperProvider) {\r\n\t\t\tstateHelperProvider.addStates({\r\n\t\t\t\ttemplateBaseUrl: \"src/app/portal/invoices/_states\",\r\n\t\t\t\tparentStateName: 'portal.invoices',\r\n\t\t\t\tstates: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"list\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.INVOICES.LISTS.HEADER.TITLE\" }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\turl: 'list?{dateType:int}&{dateTimeFilter}&{statusFilter:int}&{sortOption:int}&{fromDate:date}&{toDate:date}&{searchText}',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tdateType: undefined,\r\n\t\t\t\t\t\t\tdateTimeFilter: undefined,\r\n\t\t\t\t\t\t\tstatusFilter: undefined,\r\n\t\t\t\t\t\t\tsortOption: undefined,\r\n\t\t\t\t\t\t\tfromDate: undefined,\r\n\t\t\t\t\t\t\ttoDate: undefined,\r\n\t\t\t\t\t\t\tsearchText: undefined,\r\n\t\t\t\t\t\t\tpageSize: undefined,\r\n\t\t\t\t\t\t\tpageNumber: undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"editor\",\r\n\t\t\t\t\t\trights: [\"InvoiceWriter\"],\r\n\t\t\t\t\t\tonlyCreateStateCollection: true,\r\n\t\t\t\t\t\tstateCollection:\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t    stateName: \"new\",\r\n\t\t\t\t\t\t\t    rights: [\"InvoiceCreator\"],\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.INVOICES.EDITOR.NEW.HEADER.TITLE\" }\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstateName: \"editByInvoiceNumber\",\r\n\t\t\t\t\t\t\t\turl: '{invoiceNumber}',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.INVOICES.EDITOR.EDIT.HEADER.TITLE\" }\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstateName: \"editById\",\r\n\t\t\t\t\t\t\t\turl: 'id/{id:int}',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.INVOICES.EDITOR.EDIT.HEADER.TITLE\" }\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\tid: 0\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"viewer\",\r\n\t\t\t\t\t\trights: [\"InvoiceReader\"],\r\n\t\t\t\t\t\tonlyCreateStateCollection: true,\r\n\t\t\t\t\t\tstateCollection:\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstateName: \"viewByInvoiceNumber\",\r\n\t\t\t\t\t\t\t\turl: 'view/{invoiceNumber}',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.INVOICES.VIEWER.VIEW.HEADER.TITLE\" }\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstateName: \"viewById\",\r\n\t\t\t\t\t\t\t\turl: 'view/id/{id:int}',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\theader: { title: \"EINVOICING.PORTAL.INVOICES.VIEWER.VIEW.HEADER.TITLE\" }\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\tid: 0\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t    stateName: \"viewByAuditId\",\r\n\t\t\t\t\t\t\t    url: 'view/id/{id:int}-v{aid:int}',\r\n\t\t\t\t\t\t\t    data: {\r\n\t\t\t\t\t\t\t        header: { title: \"EINVOICING.PORTAL.INVOICES.VIEWER.VIEW.HEADER.TITLE\" }\r\n\t\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t\t    params: {\r\n\t\t\t\t\t\t\t        id: 0,\r\n\t\t\t\t\t\t\t        aid: 0\r\n\t\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/_states.js","define([\r\n    './allowance-charge.directive',\r\n    './allowance-charge.controller',\r\n    './reason-selector/_loader'\r\n], function (\r\n    diAllowanceChargeDirectiveLoader,\r\n    allowanceChargeControllerLoader,\r\n    reasonSelectorLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diAllowanceChargeDirectiveLoader(module);\r\n        allowanceChargeControllerLoader(module);\r\n        reasonSelectorLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/allowances-charges/_loader.js","//{CODE:EUP8X}\r\n// di.einvoicing.ui.portal.components.allowancesCharges.components\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.controller('AllowanceChargeController', AllowanceChargeController);\r\n\r\n\t\tAllowanceChargeController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'taxProxy',\r\n\t\t\t'filterFilter',\r\n\t\t\t'invoiceProxy',\r\n\t\t\t'staticLookupProxy',\r\n\t\t\t'notificationHandler',\r\n\t\t\t'associativeArrayConvertor',\r\n\t\t\t'scopeCacheFactory',\r\n            'debounce',\r\n            'controlsRestrictionManager'\r\n\t\t];\r\n\r\n\t\tfunction AllowanceChargeController(\r\n\t\t\tscope,\r\n\t\t\ttaxProxy,\r\n\t\t\tfilterFilter,\r\n\t\t\tinvoiceProxy,\r\n\t\t\tstaticLookupProxy,\r\n\t\t\tnotificationHandler,\r\n\t\t\tassociativeArrayConvertor,\r\n\t\t\tscopeCacheFactory,\r\n            debounce,\r\n            controlsRestrictionManager) {\r\n\r\n\t\t\tvar guard = $di.exception.guard;\r\n\t\t\tvar util = $di.utility.util;\r\n\t\t\tvar currentEditAllowanceCharge = {};\r\n\t\t    var unWatchAllowanceCharge = null;\r\n\r\n\t\t\tvar vm = this;\r\n\t\t\tvm.scopeCache = util.isDefined(scope.scopeCache) ? scope.scopeCache : scopeCacheFactory.create(scope);\r\n\t\t\tvm.readonly = util.isDefined(scope.readonly) ? scope.readonly : false;\r\n\t\t\tvm.allowancesCharges = scope.allowancesCharges;\r\n\t\t\tvm.subscribeToInvoiceDetailsChange = scope.subscribeToInvoiceDetailsChange;\r\n\t\t\tvm.allowanceChargeReasonChanged = allowanceChargeReasonChanged;\r\n\t\t\tvm.allowanceChargeChange = allowanceChargeChange;\r\n\t\t\tvm.taxCodeChanged = taxCodeChanged;\r\n\t\t\tvm.onChange = onChange;\r\n\t\t\tvm.isCharge = scope.isCharge;\r\n\t\t\tvm.currencyId = -1;\r\n\t\t\tvm.addAllowanceCharge = addAllowanceCharge;\r\n\t\t\tvm.removeAllowanceCharge = removeAllowanceCharge;\r\n\t\t\tvm.filteredItemsCount = 0;\r\n\t\t\tvm.toggleEdit = toggleEdit;\r\n\t\t    vm.allowAddAllowanceCharge = true;\r\n\r\n\t\t\tif (scope.subscribeToInvoiceDetailsChange) {\r\n\t\t\t\tscope.subscribeToInvoiceDetailsChange(setChangedInvoiceDetails);\r\n\t\t\t}\r\n\r\n\t\t\tcontrolsRestrictionManager.addOptionsSubscription((options) => {\r\n\t\t\t    vm.allowAddAllowanceCharge = options.allowAddAllowanceCharge;\r\n\t\t\t});\r\n\r\n\t\t\t/**\r\n\t\t * Processed the changed invoice details\r\n\t\t * @param invoiceDetails\r\n\t\t */\r\n\t\t\tfunction setChangedInvoiceDetails(invoiceDetails) {\r\n\t\t\t\tif (util.isDefined(invoiceDetails.supplierPartyId)) {\r\n\t\t\t\t\tsetPartyId(invoiceDetails.supplierPartyId);\r\n\t\t\t\t}\r\n\r\n                if(util.isDefined(invoiceDetails.currencyId)) {\r\n\t\t\t\t\tvm.currencyId = invoiceDetails.currencyId;\r\n                }\r\n\r\n                setFilteredItemsCount();\r\n\t\t\t}\r\n\r\n            function setFilteredItemsCount() {\r\n                var filteredAllowancesAndChagers = _.filter(vm.allowancesCharges, function (item) {\r\n                    return item.isCharge === vm.isCharge;\r\n                });\r\n\r\n                if (filteredAllowancesAndChagers) {\r\n                    vm.filteredItemsCount = _.size(filteredAllowancesAndChagers);\r\n                }\r\n            }\r\n\r\n\t\t\tfunction setPartyId(partyId) {\r\n\t\t\t\tvar taxPromise;\r\n\r\n\t\t\t\tvm.taxData = { taxes: {} };\r\n\r\n\t\t\t\tif (util.isUndefined(partyId) || partyId <= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isDefined(scope.scopeCache)) {\r\n\t\t\t\t\ttaxPromise = scope.scopeCache.get('taxProxy.getTaxesByPartyId', taxProxy.getTaxesByPartyId, [partyId]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttaxPromise = taxProxy.getTaxesByPartyId(partyId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttaxPromise.then(taxesResolved, taxesRejected);\r\n\r\n\t\t\t\tfunction taxesResolved(data) {\r\n\t\t\t\t\tvm.taxData.taxes = associativeArrayConvertor.convert(data, function (tax) { return tax.id; });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction taxesRejected(error) {\r\n\t\t\t\t\tnotificationHandler.showError(error.failureReason);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction allowanceChargeReasonChanged(item, reason) {\r\n\t\t\t    if(util.isDefined(reason.value)) {\r\n\t\t\t        item.reasonCode = reason.code;\r\n\t\t\t        item.reasonCodeId = reason.id;\r\n\t\t\t        item.reason = reason.value;\r\n\t\t\t    } else {\r\n\t\t\t        item.reasonCode = null;\r\n\t\t\t        item.reasonCodeId = 0;\r\n\t\t\t        item.reason = reason.code;\r\n\t\t\t    }\r\n\t\t\t    allowanceChargeChange();\r\n\t\t\t}\r\n\r\n            function taxCodeChanged(item, tax) {\r\n                if (util.isDefined(tax)) {\r\n                    item.taxCode = tax.code;\r\n                    item.taxRate = tax.rate;\r\n                    item.taxCodeId = tax.id;\r\n\t                item.taxCategory = tax.taxCategory;\r\n                }\r\n                allowanceChargeChange();\r\n            }\r\n\t\t\t\r\n\r\n\t\t\tfunction allowanceChargeChange() {\r\n\t\t\t\tif (scope.onAllowanceChargeChange) {\r\n\t\t\t\t\tscope.onAllowanceChargeChange();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction addAllowanceCharge() {\r\n\t\t\t\tvm.allowancesCharges.push({\r\n\t\t\t\t\tsequenceNumber: getMaxSequenceNumber() + 1,\r\n\t\t\t\t\tisCharge: scope.isCharge,\r\n\t\t\t\t\ttaxRate: 0\r\n\t\t\t\t});\r\n\t\t\t\tif (scope.onChange) {\r\n\t\t\t\t\tscope.onChange();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction getMaxSequenceNumber() {\r\n\t\t\t    if (vm.allowancesCharges.length < 1) {\r\n\t\t\t        return 0;\r\n\t\t\t    }\r\n\t\t\t    return Math.max.apply(Math, vm.allowancesCharges.map(function (v) {\r\n\t\t\t        return v.sequenceNumber;\r\n\t\t\t    }));\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeAllowanceCharge(allowanceCharge) {\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"EUP8E01E\", allowanceCharge, \"allowanceCharge\");\r\n\t\t\t\tallowanceCharge.amountPayable = 0;\r\n\r\n\t\t\t\tvm.allowancesCharges.fill(_.reject(vm.allowancesCharges, function (current) {\r\n\t\t\t\t\treturn current.sequenceNumber === allowanceCharge.sequenceNumber;\r\n\t\t\t\t}));\r\n\t\t\t\tscope.$emit('calculateInvoiceTotals');\r\n\t\t\t\tallowanceChargeChange();\r\n\t\t\t}\r\n\r\n\t\t\tfunction onChange() {\r\n\r\n\t\t\t\tvar value = scope.bindToObject[scope.bindToProperty];\r\n\t\t\t\tif (scope.onChangeAccessor && util.isFunction(scope.onChangeAccessor)) {\r\n\t\t\t\t\tscope.onChangeAccessor(scope.bindToObject, value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction toggleEdit(allowanceCharge) {\r\n\t\t\t    if (vm.readonly || allowanceCharge.editing) {\r\n\t\t\t        return;\r\n\t\t\t    }\r\n\t\t\t    currentEditAllowanceCharge.editing = false;\r\n\t\t\t    if (util.isFunction(unWatchAllowanceCharge)) {\r\n\t\t\t        unWatchAllowanceCharge();\r\n\t\t\t    }\r\n\t\t\t    allowanceCharge.editing = true;\r\n\t\t\t    currentEditAllowanceCharge = allowanceCharge;\r\n\t\t\t    unWatchAllowanceCharge = watchAllowanceCharge(allowanceCharge);\r\n\t\t\t}\r\n\r\n\t\t    /**\r\n            * Watch a single allowanceCharge and re-calculate totals\r\n            */\r\n\t\t\tfunction watchAllowanceCharge(ac) {\r\n\t\t\t    return scope.$watch(function () {\r\n\t\t\t            return ac;\r\n\t\t\t        },\r\n                    debounce(function () {\r\n                        scope.$emit('calculateInvoiceTotals');\r\n                    }, 250), true);\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\t\treturn AllowanceChargeController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/allowances-charges/allowance-charge.controller.js","//{CODE:EUP8F}\r\n// di.einvoicing.ui.portal.invoices.editor.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diAllowancesCharges', diAllowancesCharges);\r\n\r\n        function diAllowancesCharges() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {\r\n                    subscribeToInvoiceDetailsChange: '=',\r\n                    scopeCache: '=',\r\n                    onChange: '=',\r\n                    onAllowanceChargeChange: '=',\r\n                    allowancesCharges: '=',\r\n                    isCharge: '=',\r\n                    readonly: '='\r\n                },\r\n                controller: 'AllowanceChargeController',\r\n                controllerAs: 'allowanceChargeCtrl',\r\n                templateUrl: 'src/app/portal/invoices/allowances-charges/allowance-charge.html',\r\n                link: link\r\n            };\r\n\r\n            function link(scope) {\r\n                scope.findElement = findElement;\r\n\r\n                return;\r\n\r\n                function findElement(name) {\r\n                    return ng.element(name);\r\n                }\r\n            }\r\n        }\r\n\r\n        return diAllowancesCharges;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/allowances-charges/allowance-charge.directive.js","define([\r\n\t'./allowance-charge-reason-selector.directive',\r\n\t'./allowance-charge-reason.controller',\r\n\t'./allowance-charge-reason-repository.factory'\r\n], function (\r\n\tdiAllowanceChargeReasonSelectorDirectiveLoader,\r\n\tallowanceChargeReasonControllerLoader,\r\n\tallowanceChargeReasonRepositoryLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diAllowanceChargeReasonSelectorDirectiveLoader(module);\r\n        allowanceChargeReasonControllerLoader(module);\r\n        allowanceChargeReasonRepositoryLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/allowances-charges/reason-selector/_loader.js","//{CODE:EUP8R}\r\n// di.einvoicing.ui.portal.components.allowancesCharges\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.factory('allowanceChargeReasonRepository', allowanceChargeReasonRepository);\r\n\r\n        allowanceChargeReasonRepository.$inject = ['staticLookupProxy'];\r\n\r\n        function allowanceChargeReasonRepository(staticLookupProxy) {\r\n            var reasons = null;\r\n\r\n            return {\r\n                getAllowanceChargeReasons: getAllowanceChargeReasons\r\n            };\r\n\r\n            function getAllowanceChargeReasons(scopeCache) {\r\n                var promise = scopeCache.get('staticLookupProxy.getAllowanceChargeReasonCodes', staticLookupProxy.get, ['AllowanceChargeReasonCode']).then(success);\r\n\r\n                return promise;\r\n\r\n                function success(data) {\r\n                    reasons = data;\r\n\r\n                    _.each(reasons, function (reason) {\r\n\r\n                        reasons.label = reason.code;\r\n                        reasons.value = reason.value;\r\n                    });\r\n\r\n                    return reasons;\r\n                }\r\n            }\r\n        }\r\n\r\n        return allowanceChargeReasonRepository;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/allowances-charges/reason-selector/allowance-charge-reason-repository.factory.js","//{CODE:EUP8W}\r\n// di.einvoicing.ui.portal.components.allowancesCharges\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n        module.directive('diAllowanceChargeReasonSelector', diAllowanceChargeReasonSelector);\r\n\r\n        function diAllowanceChargeReasonSelector() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {\r\n                    tabIndex: '@',\r\n                    items: '=',\r\n                    scopeCache: '=',\r\n                    bindToObject: '=',\r\n                    bindToProperty: '@',\r\n                    bindToSecondProperty: '@',\r\n                    onChangeAccessor: '&',\r\n                    validationMessage: '@',\r\n                    validationName: '@',\r\n                    validationModelDisplayName: '@'\r\n                },\r\n                controller: 'AllowanceChargeReasonController',\r\n                controllerAs: 'allowanceChargeReasonCtrl',\r\n                template: template\r\n            };\r\n\r\n            /**\r\n         * Generates html template             \r\n         */\r\n            function template(element, attrs) {\r\n                var html = '<div>\\\r\n\t\t\t\t\t\t\t\t<di-select\\\r\n\t\t\t\t\t\t\t\t\tmode=\"autoComplete\"\\\r\n\t\t\t\t\t\t\t\t\titems=\"allowanceChargeReasonCtrl.items\"\\\r\n\t\t\t\t\t\t\t\t\titem-unique-property=\"id\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-object=\"allowanceChargeReasonCtrl\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-property=\"item\"\\\r\n\t\t\t\t\t\t\t\t\tdisplay-property=\"value\"\\\r\n\t\t\t\t\t\t\t\t\tsearchable-properties=\"value\"';\r\n\r\n                html += getValidationHtml(attrs);\r\n                html += 'on-change-accessor=\"allowanceChargeReasonCtrl.onChangeAccessor\"\\\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"EINVOICING.PORTAL.INVOICES.COMPONENTS.ALLOWANCES_CHARGES.REASON_SEARCH\">\\\r\n\t\t\t\t\t\t\t\t\t<b ng-if=\"filteredItem.item.code\">{{::filteredItem.item.code}}: {{::filteredItem.item.value}}\\\r\n\t\t\t\t\t\t\t\t</di-select></div>';\r\n                return html;\r\n\r\n                /**\r\n\t\t\t\t * Adds validation attributes                 \r\n\t\t\t\t */\r\n                function getValidationHtml(attrs) {\r\n                    var innerHtml = \"\";\r\n\r\n                    if (util.isDefined(attrs.validationName)) {\r\n                        var displayName = attrs.validationName;\r\n                        if (util.isDefined(attrs.validationModelDisplayName)) {\r\n                            displayName = attrs.validationModelDisplayName;\r\n                        }\r\n\r\n                        innerHtml += 'di-validate=\"{{::validationName}}\"' +\r\n\t\t\t\t\t\t\t\t\t'validation-model=\"bindToObject[bindToProperty]\"' +\r\n\t\t\t\t\t\t\t\t\t'validation-message=\"{{::validationMessage}}\"' +\r\n\t\t\t\t\t\t\t\t\t'validation-model-display-name=\"' + displayName + '\"';\r\n                    }\r\n                    return innerHtml;\r\n                }\r\n            }\r\n        }\r\n        return diAllowanceChargeReasonSelector;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/allowances-charges/reason-selector/allowance-charge-reason-selector.directive.js","//{CODE:EUP8S}\r\n//di.einvoicing.ui.portal.components.allowancesCharges\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.controller('AllowanceChargeReasonController', AllowanceChargeReasonController);\r\n\r\n        AllowanceChargeReasonController.$inject = ['$scope', 'allowanceChargeReasonRepository'];\r\n\r\n        function AllowanceChargeReasonController(scope, allowanceChargeReasonRepository) {\r\n            var vm = this;\r\n            vm.onChangeAccessor = setBoundIdFromSelectedItem;\r\n            vm.item = {};\r\n            vm.items = [];\r\n       \r\n            init();\r\n\r\n            return;\r\n\r\n            function init() {\r\n                allowanceChargeReasonRepository.getAllowanceChargeReasons(scope.scopeCache).then(function (data) {\r\n                    vm.items.fill(data);\r\n\r\n                    scope.$watch(function () {\r\n                        return scope.bindToObject[scope.bindToProperty];\r\n                    }, setSelectedItemFromBoundId);\r\n\r\n                    return;\r\n\r\n                    function setSelectedItemFromBoundId() {\r\n                        if (util.isDefined(vm.item.id) && scope.bindToObject[scope.bindToProperty] === vm.item.id) {\r\n                            return;\r\n                        }\r\n\r\n                        if (scope.bindToObject[scope.bindToProperty] === -1) {\r\n                            var unknownItem = {\r\n                                id: 0,\r\n                                reason: scope.bindToObject[scope.bindToSecondProperty],\r\n                                reasonCode: scope.bindToObject[scope.bindToSecondProperty]\r\n                            }\r\n\r\n                            var exist = _.find(vm.items, function (item) {\r\n                                return item.id === unknownItem.id;\r\n                            });\r\n\r\n                            if (util.isUndefined(exist)) {\r\n                                vm.items.push(unknownItem);\r\n                            }\r\n                            scope.bindToObject[scope.bindToProperty] = unknownItem.id;\r\n                        }\r\n\r\n                        var item = _.find(vm.items, function (item) {\r\n                            return item.value === scope.bindToObject[scope.bindToProperty];\r\n                        });\r\n\r\n                        if (util.isUndefined(item)) {\r\n                            item = {\r\n                                id: 0,\r\n                                value: scope.bindToObject[scope.bindToProperty],\r\n                                code: scope.bindToObject[scope.bindToProperty],\r\n                            };\r\n                        }\r\n                        vm.item = item;\r\n                    }\r\n                });\r\n            }\r\n\r\n            function setBoundIdFromSelectedItem() {\r\n                var accessor;\r\n\r\n                scope.bindToObject[scope.bindToProperty] = (vm.item || {}).id;\r\n\r\n                if (util.isFunction(scope.onChangeAccessor)) {\r\n                    accessor = scope.onChangeAccessor();\r\n\r\n                    if (util.isFunction(accessor)) {\r\n                        accessor(scope.bindToObject, vm.item);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return AllowanceChargeReasonController;\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/allowances-charges/reason-selector/allowance-charge-reason.controller.js","define([\r\n    './attachment-uploader.component',\r\n    './attachment-configurator.provider'\r\n], function (\r\n    attachmentUploader,\r\n    attachmentConfiguratorProviderLoader\r\n    ) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n           attachmentUploader.AttachmentUploaderComponent.selector,\r\n           attachmentUploader.AttachmentUploaderComponent);\r\n        \r\n        attachmentConfiguratorProviderLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/attachment-uploader/_loader.js","//{CODE:EUP6V}\r\n// di.einvoicing.ui.portal.components.attachmentUploader\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.provider('documentAttachmentConfigurator', documentAttachmentConfiguratorProvider);\r\n\r\n\t\t/**\r\n\t\t * Manages configuration of the attachment uploader component\r\n\t\t */\r\n\t\tfunction documentAttachmentConfiguratorProvider() {\r\n\t\t\tvar maximumAttachmentSize;\r\n\t\t\tvar disallowedFileExtensions;\r\n\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP6V01E\", cfg, 'cfg');\r\n\r\n\t\t\t\tmaximumAttachmentSize = cfg.maximumAttachmentSize;\r\n\t\t\t\tdisallowedFileExtensions = cfg.disallowedFileExtensions;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets required configuration for the document attachment controller.\r\n\t\t\t */\r\n\t\t\tfunction $get() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgetMaximumAttachmentSize: getMaximumAttachmentSize,\r\n\t\t\t\t\tgetDisallowedFileExtensions: getDisallowedFileExtensions\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction getMaximumAttachmentSize() {\r\n\t\t\t\t\treturn maximumAttachmentSize;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getDisallowedFileExtensions() {\r\n\t\t\t\t\treturn disallowedFileExtensions;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn documentAttachmentConfiguratorProvider;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/attachment-uploader/attachment-configurator.provider.js","let util = $di.utility.util;\r\n\r\nexport const AttachmentUploaderComponent = {\r\n    templateUrl: 'src/app/portal/invoices/attachment-uploader/attachment-uploader.component.html',\r\n    selector: 'diAttachmentUploader',\r\n    bindings: {\r\n        tabIndex: '@',\r\n        bindToObject: \"<\",\r\n        attachmentDataId: \"<\",\r\n        fileName: \"<\",\r\n        download: '&',\r\n        onUploadStateChanged: '&'\r\n    },\r\n    controller: class {\r\n        constructor(\r\n        $scope,\r\n        $element,\r\n        documentAttachmentConfigurator,\r\n        attachmentProxy,\r\n        notificationHandler,\r\n        elementNotifier,\r\n        translator,\r\n        fileExtensionValidator\r\n        ) {\r\n            this.$scope = $scope;\r\n            this.$element = $element;\r\n            this.documentAttachmentConfigurator = documentAttachmentConfigurator;\r\n            this.attachmentProxy = attachmentProxy;\r\n            this.notificationHandler = notificationHandler;\r\n            this.elementNotifier = elementNotifier;\r\n            this.translator = translator;\r\n            this.fileExtensionValidator = fileExtensionValidator;\r\n\r\n            this.showSpinner = false;\r\n            \r\n            this.onFileSelected = this.onFileSelected.bind(this);\r\n        }\r\n        \r\n        $onInit() {\r\n            this.removeSpinner();\r\n            \r\n            this.maxSize = this.documentAttachmentConfigurator.getMaximumAttachmentSize();\r\n\r\n            this.$scope.$watch(() => { return this.invalidFile }, this.setLanguageFailureKey());\r\n        }\r\n\r\n        $onChanges(changes) {\r\n            if (util.isNullOrUndefined(changes.fileName.currentValue) ||\r\n                util.isNullOrUndefined(changes.attachmentDataId.currentValue)) {\r\n\r\n                this.setUploadButtonVisibility(true);\r\n                this.selectedFileName = undefined;\r\n                this.selectedAttachmentDataId = undefined;\r\n            } else {\r\n                this.setUploadButtonVisibility(false);\r\n                this.selectedFileName = changes.fileName.currentValue;\r\n                this.selectedAttachmentDataId = changes.attachmentDataId.currentValue;\r\n            }\r\n        }\r\n        \r\n        onFileSelected() {\r\n            if (util.isObject(this.file)) {\r\n                this.showUploadButton = false;\r\n                this.showFileName = false;\r\n\r\n                if (this.fileExtensionValidator.isFileExtensionValid(this.file.name) === false) {\r\n                    this.notificationHandler.showInfo('EINVOICING.PORTAL.COMPONENTS.ATTACHMENTS.INVALID_FILE_TYPE');\r\n                    this.showUploadButton = true;\r\n                    return;\r\n                };\r\n\r\n                this.onUploadStarted();\r\n\r\n                this.addSpinner();\r\n\r\n                this.hideUploadErrorNotification();\r\n\r\n                this.attachmentProxy.addAttachmentData(this.file).then((data) => {\r\n                        this.setUploadButtonVisibility(false);\r\n\r\n                        this.selectedFileName = this.file.name;\r\n                        this.selectedAttachmentDataId = data;\r\n                        this.onUploadSuccessful();\r\n                    },\r\n                    () => {\r\n                        this.setUploadButtonVisibility(true);\r\n\r\n                        this.ctrl.selectedFileName = undefined;\r\n                        this.ctrl.selectedAttachmentDataId = undefined;\r\n\r\n                        this.onUploadFailed();\r\n                    }).finally(() => {\r\n                    this.file = undefined;\r\n                    this.removeSpinner();\r\n                });\r\n            }\r\n        }\r\n        \r\n        onUploadStarted() {\r\n            this.handleUploadStateChange({\r\n                lineIdentifier: this.bindToObject,\r\n                status: 'started'\r\n            });\r\n        }\r\n        \r\n        onUploadSuccessful() {\r\n            this.handleUploadStateChange({\r\n                lineIdentifier: this.bindToObject,\r\n                status: 'success',\r\n                attachmentDataId: this.selectedAttachmentDataId,\r\n                filename: this.selectedFileName\r\n            });\r\n        }\r\n        \r\n        onUploadFailed() {\r\n            this.handleUploadStateChange({\r\n                lineIdentifier: this.bindToObject,\r\n                status: 'failed'\r\n            });\r\n        }\r\n\r\n        handleUploadStateChange(state) {\r\n            if (util.isFunction(this.onUploadStateChanged)) {\r\n                this.onUploadStateChanged(state);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * event handler when file selection fails         \r\n         */\r\n        setLanguageFailureKey() {\r\n            return () => {\r\n                if (util.isObject(this.invalidFile)) {\r\n                    const failureReason = this.invalidFile.$error.replace(/([A-Z])/g, \"_$1\").toUpperCase();\r\n\r\n                    const errorKey = 'EINVOICING.PORTAL.COMPONENTS.ATTACHMENTS.FILE_ERRORS.' + failureReason;\r\n\r\n                    const translationArgs = {\r\n                        maxSize: this.maxSize\r\n                    }\r\n\r\n                    this.translator.translate(errorKey, translationArgs).then((translated) => {\r\n                        this.uploadErrorNotification = this.elementNotifier.error(\r\n                            translated,\r\n                            this.$element,\r\n                            { clickToHide: true });\r\n\r\n                        this.uploadErrorNotification.show();\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * hides error notification        \r\n         */\r\n        hideUploadErrorNotification() {\r\n            if (util.isDefined(this.uploadErrorNotification)) {\r\n                this.uploadErrorNotification.destroy();\r\n                this.uploadErrorNotification = undefined;\r\n            }\r\n        }\r\n        \r\n        setUploadButtonVisibility(visibility) {\r\n            this.showUploadButton = visibility;\r\n            this.showFileName = !visibility;\r\n        }\r\n\r\n        /**\r\n         * adds spinner to control         \r\n         */\r\n        addSpinner() {\r\n            this.showSpinner = true;\r\n        }\r\n\r\n        /**\r\n         * removes spinner         \r\n         */\r\n        removeSpinner() {\r\n            this.showSpinner = false;\r\n        }\r\n    }\r\n}\r\n\r\nAttachmentUploaderComponent.controller.prototype.constructor.$inject = [\r\n    '$scope',\r\n    '$element',\r\n    'documentAttachmentConfigurator',\r\n    'attachmentProxy',\r\n    'notificationHandler',\r\n    'elementNotifier',\r\n    'translator',\r\n    'fileExtensionValidator'\r\n];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/attachment-uploader/attachment-uploader.component.js","define([\r\n\t'./reconciliation-failure-formatter.factory',\r\n\t'./business-validation-failure-formatter.factory',\r\n\t'./document-issues-message-builder.factory'\r\n], function (\r\n\treconciliationFailureFormatterLoader,\r\n\tbusinessValidationFailureFormatterLoader,\r\n\tdocumentIssuesMessageBuilderLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    reconciliationFailureFormatterLoader(module);\r\n\t    businessValidationFailureFormatterLoader(module);\r\n\t    documentIssuesMessageBuilderLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/document-issues/_loader.js","//{CODE:ICV01}\r\n// di.einvoicing.ui.portal._components.documentIssues\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    module.factory('businessValidationFailureFormatter', businessValidationFailureFormatter);\r\n\r\n\t    businessValidationFailureFormatter.$inject = ['translator'];\r\n\r\n\t    function businessValidationFailureFormatter(translator) {\r\n\t\t\treturn {\r\n\t\t\t    format: format\r\n\t\t\t};\r\n\r\n\t\t\tfunction format(invoiceValidationType) {\r\n\t\t\t    return translator.instantTranslate('EINVOICING.PORTAL.COMPONENTS.DOCUMENT_ISSUES.VALIDATION.BUSINESS.ERRORS.' + invoiceValidationType);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/document-issues/business-validation-failure-formatter.factory.js","//{CODE:/UP0Z}\r\n// di.einvoicing.ui.portal._components.documentIssues\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    var util = $di.utility.util;\r\n\r\n\t    module.factory('documentIssuesMessageBuilder', documentIssuesMessageBuilder);\r\n\r\n\t\tdocumentIssuesMessageBuilder.$inject = [\r\n\t\t\t'reconciliationFailureFormatter',\r\n\t\t\t'businessValidationFailureFormatter',\r\n\t\t\t'translator',\r\n\t\t\t'$sce'];\r\n\r\n\t\tfunction documentIssuesMessageBuilder(reconciliationFailureFormatter, businessValidationFailureFormatter, translator, $sce) {\r\n\t\t\treturn {\r\n\t\t\t\tbuildMessage: buildMessage\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Builds a display message for the given document issues\r\n\t\t\t * @param {} documentIssuesModel \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction buildMessage(documentIssuesModel, trustAsHtml) {\r\n\t\t\t\tvar formattedMessages = buildDocumentIssuesDetails();\r\n\t\t\t\tvar html = buildHtml();\r\n\r\n\t\t\t    if (trustAsHtml) {\r\n\t\t\t        return $sce.trustAsHtml(html);\r\n\t\t\t    }\r\n\r\n\t\t\t    return html;\r\n\r\n\t\t\t    function buildDocumentIssuesDetails() {\r\n\t\t\t        var reconciliationHeaderFailureMessages = [];\r\n\t\t\t        _.each(documentIssuesModel.reconciliationHeaderFailures || [],\r\n\t\t\t            function(reconciliationResultLine) {\r\n\t\t\t                reconciliationHeaderFailureMessages.push(reconciliationFailureFormatter\r\n\t\t\t                    .format(reconciliationResultLine));\r\n\t\t\t            });\r\n\r\n\t\t\t        var reconciliationLineFailureMessages = [];\r\n\t\t\t        _.each(documentIssuesModel.reconciliationLineFailures || [],\r\n\t\t\t            function(reconciliationResultLine) {\r\n\t\t\t                reconciliationLineFailureMessages.push(reconciliationFailureFormatter\r\n\t\t\t                    .format(reconciliationResultLine));\r\n\t\t\t            });\r\n\r\n\t\t\t        var businessValidationFailureMessages = [];\r\n\r\n\r\n\t\t\t        _.each(documentIssuesModel.businessValidationFailures || [],\r\n\t\t\t            function(failureType) {\r\n\t\t\t                businessValidationFailureMessages.push(businessValidationFailureFormatter.format(failureType));\r\n\t\t\t            });\r\n\r\n\t\t\t        return {\r\n\t\t\t            reconciliationHeaderFailureMessages: reconciliationHeaderFailureMessages,\r\n\t\t\t            reconciliationLineFailureMessages: reconciliationLineFailureMessages,\r\n\t\t\t            businessValidationFailureMessages: businessValidationFailureMessages,\r\n\t\t\t            exportSchemaValidationErrorMessages: documentIssuesModel.exportSchemaValidationErrorMessages || [],\r\n\t\t\t            exportSchemaValidationWarningMessages: documentIssuesModel.exportSchemaValidationWarningMessages || [],\r\n\t\t\t            transmissionEndpointValidationMessages: documentIssuesModel.transmissionEndpointValidationMessages || []\r\n\t\t\t        };\r\n\t\t\t    }\r\n\r\n\t\t\t    function buildHtml() {\r\n\t\t\t\t\treturn '<div class=\"reconcilication-failure-details\">' + getDetailsHtml() + '</div>';\r\n\r\n\t\t\t\t\tfunction getDetailsHtml() {\r\n\t\t\t\t\t\tif (formattedMessages.reconciliationHeaderFailureMessages.length === 0 &&\r\n\t\t\t\t\t\t\tformattedMessages.reconciliationLineFailureMessages.length === 0 &&\r\n\t\t\t\t\t\t\tformattedMessages.businessValidationFailureMessages.length === 0 &&\r\n\t\t\t\t\t\t\tformattedMessages.exportSchemaValidationErrorMessages.length === 0 &&\r\n\t\t\t\t\t\t\tformattedMessages.exportSchemaValidationWarningMessages.length === 0 &&\r\n\t\t\t\t\t\t\tformattedMessages.transmissionEndpointValidationMessages.length === 0) {\r\n\t\t\t\t\t\t\treturn getTitleHtml(3, 'NO_ERRORS');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar detailsHtml = '';\r\n\r\n\t\t\t\t\t\tdetailsHtml += getSection('VALIDATION.BUSINESS.TITLE', [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tmessages: formattedMessages.businessValidationFailureMessages\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]);\r\n\r\n\t\t\t\t\t\tdetailsHtml += getSection('RECONCILIATION.TITLE', [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: 'RECONCILIATION.HEADER.TITLE',\r\n\t\t\t\t\t\t\t\tmessages: formattedMessages.reconciliationHeaderFailureMessages\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: 'RECONCILIATION.LINE.TITLE',\r\n\t\t\t\t\t\t\t\tmessages: formattedMessages.reconciliationLineFailureMessages\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]);\r\n\r\n\t\t\t\t\t\tdetailsHtml += getSection('VALIDATION.EXPORT.TITLE', [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: 'VALIDATION.EXPORT.ERRORS.TITLE',\r\n\t\t\t\t\t\t\t\tmessages: formattedMessages.exportSchemaValidationErrorMessages\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: 'VALIDATION.EXPORT.WARNINGS.TITLE',\r\n\t\t\t\t\t\t\t\tmessages: formattedMessages.exportSchemaValidationWarningMessages\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdetailsHtml += getSection('VALIDATION.TRANSMISSION.TITLE', [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tmessages: formattedMessages.transmissionEndpointValidationMessages\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]);\r\n\r\n\t\t\t\t\t\treturn detailsHtml;\r\n\r\n\t\t\t\t\t\tfunction getSection(title, subSections) {\r\n\t\t\t\t\t\t\tvar sectionHtml = '';\r\n\t\t\t\t\t\t\tvar totalLength = 0;\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < subSections.length; i++) {\r\n\t\t\t\t\t\t\t\tvar subSection = subSections[i];\r\n\r\n\t\t\t\t\t\t\t\tif (subSection.messages.length === 0) {\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\ttotalLength += subSection.length;\r\n\r\n\t\t\t\t\t\t\t\tif (subSection.title) {\r\n\t\t\t\t\t\t\t\t\tsectionHtml += getTitleHtml(3, subSection.title);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tsectionHtml += getList(subSection.messages);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (totalLength === 0) {\r\n\t\t\t\t\t\t\t\treturn '';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn getTitleHtml(2, title) + sectionHtml + '<br/>';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfunction getTitleHtml(level, languageKey) {\r\n\t\t\t\t\t\t\treturn '<h' + level + '>' + translator.instantTranslate('EINVOICING.PORTAL.COMPONENTS.DOCUMENT_ISSUES.' + languageKey) + '</h' + level + '>';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfunction getList(messages) {\r\n\t\t\t\t\t\t\tvar innerList = '';\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < messages.length; i++) {\r\n\t\t\t\t\t\t\t\tinnerList += '<li><span>' + messages[i] + '</span></li>';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn '<ul>' + innerList + '</ul>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn documentIssuesMessageBuilder;\r\n\t};\r\n});\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/document-issues/document-issues-message-builder.factory.js","//{CODE:EUP6F}\r\n// di.einvoicing.ui.portal._components.documentIssues\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    var util = $di.utility.util;\r\n\r\n\t\tmodule.factory('reconciliationFailureFormatter', reconciliationFailureFormatter);\r\n\r\n\t\treconciliationFailureFormatter.$inject = ['translator', 'userRightsRepository'];\r\n\r\n\t\tfunction reconciliationFailureFormatter(translator, userRightsRepository) {\r\n\t\t\treturn {\r\n\t\t\t\tformat: format\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Function\r\n\t\t\t * @param failures \r\n\t\t\t * @returns - The failure list formatted as HTML with \r\n\t\t\t */\r\n\t\t\tfunction format(failure) {\r\n\t\t\t\tvar isSupplier = userRightsRepository.userHasRight(\"Supplier\");\r\n\r\n\t\t\t\tvar languageKey =\r\n\t\t\t\t\t'EINVOICING.PORTAL.COMPONENTS.DOCUMENT_ISSUES.RECONCILIATION.HEADER.ERRORS.' +\r\n\t\t\t\t\tfailure.documentType +\r\n\t\t\t\t\t'.' +\r\n\t\t\t\t\tfailure.reconciliationFailureType;\r\n\r\n\t\t\t\tvar productCode;\r\n\r\n\t\t\t\tif (isSupplier) {\r\n\t\t\t\t\tproductCode = failure.supplierProductCode;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tproductCode = failure.buyerProductCode;\r\n\t\t\t\t}\r\n\r\n\t\t\t    var message = '';\r\n\r\n\t\t\t    if (util.isNonEmptyString(productCode)) {\r\n\t\t\t        message = '<b>' + productCode + '</b> - ';\r\n\t\t\t    }\r\n\r\n\t\t\t\tmessage += translator.instantTranslate(languageKey);\r\n\r\n\t\t\t\treturn message;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn reconciliationFailureFormatter;\r\n\t};\r\n});\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/document-issues/reconciliation-failure-formatter.factory.js","//{CODE:EUP0T}\r\n// di.einvoicing.ui.portal.portal.invoices\r\ndefine([\r\n    './_snippets/_loader',\r\n\t'./optionalFields/_loader',\r\n    './invoiceDetails/invoiceDetailsDirective'    \r\n], function (\r\n    snippetsLoader,\r\n\toptionalFieldsLoader,\r\n    invoiceDetailsLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        snippetsLoader(module);\r\n\t    optionalFieldsLoader(module);\r\n\t    invoiceDetailsLoader(module);\t    \r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/_components/_loader.js","//{CODE:EUP3C}\r\n// di.einvoicing.ui.portal.portal.invoices.components.snippets\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var snippetContext = $di.angular.snippetRegistrar.createContext(\r\n            module,\r\n            'src/app/portal/invoices/editor/_components/_snippets');\r\n        \r\n        snippetContext.registerSnippet('diInvoiceHeader', 'invoiceHeader.html');\r\n        snippetContext.registerSnippet('diInvoiceFooter', 'invoiceFooter.html');\r\n        snippetContext.registerSnippet('diInvoicePayee', 'invoicePayee.html');\r\n        snippetContext.registerSnippet('diInvoiceTaxRepresentative', 'invoiceTaxRepresentative.html');\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/_components/_snippets/_loader.js","//{CODE:EUP5B}\r\n// di.einvoicing.ui.portal.portal.invoices.lists\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diInvoice', diInvoice);\r\n\r\n        function diInvoice() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {},\r\n                controller: \"InvoiceController\",\r\n                controllerAs: \"invoiceCtrl\",\r\n                templateUrl: 'src/app/portal/invoices/editor/_components/invoiceDetails/invoiceDetails.html'\r\n            };\r\n        }\r\n\r\n        return diInvoice;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/_components/invoiceDetails/invoiceDetailsDirective.js","//{CODE:OFC02}\r\n// di.einvoicing.ui.portal.invoices.editor.components\r\ndefine([\r\n\t'./optionalFieldsConfiguration'\r\n], function(optionalFieldsConfigurationLoader) {\r\n\treturn function(module) {\r\n\t\toptionalFieldsConfigurationLoader(module);\r\n\t}\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/_components/optionalFields/_loader.js","//{CODE:OFC01}\r\n//di.einvoicing.ui.portal.invoices.editor.components\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.constant('OPTIONAL_FIELDS_CONFIGURATION', optionalFieldsConfiguration());\r\n\r\n\t\tfunction optionalFieldsConfiguration() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'Currency',\r\n\t\t\t\t\ttemplate: '<label\\\r\n\t\t\t\t\t\t\t\t\tclass=\"form-row-label\"\\\r\n\t\t\t\t\t\t\t\t\tdi-translate=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.CURRENCY\">\\\r\n\t\t\t\t\t\t\t\t</label>\\\r\n\t\t\t\t\t\t\t\t<div\\\r\n\t\t\t\t\t\t\t\t\tclass=\"custom-fields-input\">\\\r\n\t\t\t\t\t\t\t\t\t<di-currency-selector\\\r\n\t\t\t\t\t\t\t\t\t\tbind-to-object=\"controller.invoice\"\\\r\n\t\t\t\t\t\t\t\t\t\tbind-to-property=\"currencyId\"\\\r\n\t\t\t\t\t\t\t\t\t\tvalidation-name=\"currencyId\"\\\r\n\t\t\t\t\t\t\t\t\t\tvalidation-message=\"Currency is required\"\\\r\n\t\t\t\t\t\t\t\t\t\ton-change-accessor=\"controller.events.onCurrencyChanged\"\\\r\n                                        validation-property-name=\"currencyId\">\\\r\n\t\t\t\t\t\t\t\t\t</di-currency-selector>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\tclientName: 'CurrencyId',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'Delivery note number',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n                                    ng-model-property=\"deliveryNoteNumber\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onInvoiceChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"deliveryNoteNumber\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.DELIVERY_NOTE_NUMBER\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"text\"\\\r\n\t\t\t\t\t                di-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.DELIVERY_NOTE_NUMBER\">\\\r\n                                </di-input>',\r\n\t\t\t\t\tclientName: 'DeliveryNoteNumber',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.PERIOD_START_DATE',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n                                    ng-model-property=\"periodStartDate\"\\\r\n\t\t\t\t\t\t\t\t\tng-model-options=\"{ updateOn: \\'default blur\\', debounce: {\\'default\\': 1000, \\'blur\\': 0} }\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onInvoiceChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"periodStartDate\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.PERIOD_START_DATE\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"date\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.PERIOD_START_DATE\">\\\r\n                              </di-input>',\r\n\t\t\t\t\tclientName: 'PeriodStartDate',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.PERIOD_END_DATE',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n                                    ng-model-property=\"periodEndDate\"\\\r\n\t\t\t\t\t\t\t\t\tng-model-options=\"{ updateOn: \\'default blur\\', debounce: {\\'default\\': 1000, \\'blur\\': 0} }\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onInvoiceChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"periodEndDate\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.PERIOD_END_DATE\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"date\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.PERIOD_END_DATE\"></di-input>',\r\n\t\t\t\t\tclientName: 'PeriodEndDate',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'Accounting cost reference',\r\n\t\t\t\t\ttemplate: '\t<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n                                    ng-model-property=\"accountingCostReference\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onInvoiceChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"accountingCostReference\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.ACCOUNTING_COST_REFERENCE\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"text\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.ACCOUNTING_COST_REFERENCE\"></di-input>',\r\n\t\t\t\t\tclientName: 'AccountingCostReference',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'Delivery date',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n                                    ng-model-property=\"deliveryDate\"\\\r\n\t\t\t\t\t\t\t\t\tng-model-options=\"{ updateOn: \\'default blur\\', debounce: {\\'default\\': 1000, \\'blur\\': 0} }\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onInvoiceChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"deliveryDate\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.DELIVERY_DATE\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"date\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.DELIVERY_DATE\"></di-input>',\r\n\t\t\t\t\tclientName: 'DeliveryDate',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'Payment terms',\r\n\t\t\t\t\ttemplate: '<label\\\r\n\t\t\t\t\t\t\t\t\tclass=\"form-row-label\"\\\r\n\t\t\t\t\t\t\t\t\tdi-translate=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.PAYMENT_TERMS\">\\\r\n\t\t\t\t\t\t\t\t</label>\\\r\n\t\t\t\t\t\t\t\t<di-input di-input-type=\"textarea\" di-class=\"invoice-summary-textfield textarea\"\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n                                    ng-model-property=\"paymentTerms\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onInvoiceChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"paymentTerms\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.PAYMENT_TERMS\"/>',\r\n\t\t\t\t\tclientName: 'PaymentTerms',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'Contract reference',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n                                    ng-model-property=\"contractReference\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onInvoiceChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"contractReference\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.CONTRACT_REFERENCE\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"text\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.CONTRACT_REFERENCE\"></di-input>',\r\n\t\t\t\t\tclientName: 'ContractReference',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'Contract type code',\r\n\t\t\t\t\ttemplate: '<label\\\r\n\t\t\t\t\t\t\t\t\tclass=\"form-row-label\"\\\r\n\t\t\t\t\t\t\t\t\tdi-translate=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.CONTRACT_TYPE_CODE\">\\\r\n\t\t\t\t\t\t\t\t</label>\\\r\n\t\t\t\t\t\t\t\t<di-contract-type-code-selector\\\r\n\t\t\t\t\t\t\t\t\tscope-cache=\"controller.scopeCache\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-object=\"controller.invoice\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-property=\"contractTypeCodeId\"\\\r\n\t\t\t\t\t\t\t\t\ton-change-accessor=\"controller.events.onContractTypeCodeChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-name=\"contractTypeCode\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message=\"\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.CONTRACT_TYPE_CODE\">\\\r\n\t\t\t\t\t\t\t\t</di-contract-type-code-selector>',\r\n\t\t\t\t\tclientName: 'ContractTypeCode',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'Supplier endpoint identifier',\r\n\t\t\t\t\ttemplate: '<label class =\"form-row-label ng-scope\" di-translate=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_ENDPOINTID\">Supplier endpoint identifier</label>\\\r\n                        <div>\\\r\n                        <di-select\\\r\n                            mode=\"dropdown\"\\\r\n                            items=\"controller.supplierEndpoints\"\\\r\n                            item-unique-property=\"identifier\"\\\r\n                            watch-items=\"true\"\\\r\n                            watch-binding=\"true\"\\\r\n                            watch-include-default-obj=\"true\"\\\r\n                            bind-to-object=\"controller\"\\\r\n                            bind-to-property=\"supplierEndpointIdentifier\"\\\r\n                            display-property=\"displayValue\"\\\r\n                            allow-empty-display=\"true\"\\\r\n                            on-item-select-function=\"addNew\"\\\r\n                            di-validate=\"supplierEndpointIdentifier\"\\\r\n                            validation-model=\"controller.invoice.supplierEndpointIdentifier\"\\\r\n                            item-compare=\"controller.actions.matchSelectedEndpoint\"\\\r\n                            on-change-accessor=\"controller.events.onSupplierEndpointIdentifierChanged\">\\\r\n                            <div ng-if=\"!filteredItem.item.code\">{{::filteredItem.item.label}}</div>\\\r\n                            <div ng-if=\"filteredItem.item.code\">\\\r\n                                <strong>{{::filteredItem.item.schemeDescription}}</strong> : <span>{{::filteredItem.item.code}}</span> <span ng-if=\"filteredItem.item.codeDescription\">{{::filteredItem.item.codeDescription}}</span>\\\r\n                            </div>\\\r\n                        </di-select>\\\r\n                        </div>',\r\n\t\t\t\t\tclientName: 'SupplierEndpointIdentifier',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t    {\r\n\t\t\t        header: 'Buyer endpoint identifier',\r\n\t\t\t        template:\r\n\t\t\t            '<label class =\"form-row-label ng-scope\" di-translate=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_ENDPOINTID\">Buyer endpoint identifier</label>\\\r\n                        <div>\\\r\n                        <di-select\\\r\n\t\t\t\t\t\t\tmode=\"dropdown\"\\\r\n\t\t\t\t\t\t\tng-if=\"!controller.usingAccounting\"\\\r\n\t\t\t\t\t\t\titems=\"controller.buyerEndpoints\"\\\r\n\t\t\t\t\t\t\titem-unique-property=\"identifier\"\\\r\n\t\t\t\t\t\t\twatch-items=\"true\"\\\r\n\t\t\t\t\t\t\twatch-binding=\"true\"\\\r\n\t\t\t\t\t\t\twatch-include-default-obj=\"true\"\\\r\n\t\t\t\t\t\t\tbind-to-object=\"controller\"\\\r\n\t\t\t\t\t\t\tbind-to-property=\"buyerEndpointIdentifier\"\\\r\n\t\t\t\t\t\t\tdisplay-property=\"displayValue\"\\\r\n\t\t\t\t\t\t\tallow-empty-display=\"true\"\\\r\n\t\t\t\t\t\t\ton-item-select-function=\"addNew\"\\\r\n                            item-compare=\"controller.actions.matchSelectedEndpoint\"\\\r\n\t\t\t\t\t\t\ton-change-accessor=\"controller.events.onBuyerEndpointIdentifierChanged\">\\\r\n\t\t\t\t\t\t\t<div ng-if=\"!filteredItem.item.code\">{{::filteredItem.item.label}}</div>\\\r\n\t\t\t\t\t\t\t<div ng-if=\"filteredItem.item.code\">\\\r\n\t\t\t\t\t\t\t\t<strong>{{::filteredItem.item.schemeDescription}}</strong> : <span>{{::filteredItem.item.code}}</span> <span ng-if=\"filteredItem.item.codeDescription\">{{::filteredItem.item.codeDescription}}</span>\\\r\n\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t</di-select>\\\r\n                        <di-select\\\r\n\t\t\t\t\t\t\tmode=\"dropdown\"\\\r\n\t\t\t\t\t\t\tng-if=\"controller.usingAccounting\"\\\r\n\t\t\t\t\t\t\titems=\"controller.accountingCustomerEndpoints\"\\\r\n\t\t\t\t\t\t\titem-unique-property=\"identifier\"\\\r\n\t\t\t\t\t\t\twatch-items=\"true\"\\\r\n\t\t\t\t\t\t\twatch-binding=\"true\"\\\r\n\t\t\t\t\t\t\twatch-include-default-obj=\"true\"\\\r\n\t\t\t\t\t\t\tbind-to-object=\"controller\"\\\r\n\t\t\t\t\t\t\tbind-to-property=\"accountingCustomerEndpointIdentifier\"\\\r\n\t\t\t\t\t\t\tdisplay-property=\"displayValue\"\\\r\n\t\t\t\t\t\t\tallow-empty-display=\"true\"\\\r\n\t\t\t\t\t\t\ton-item-select-function=\"addNew\"\\\r\n                            item-compare=\"controller.actions.matchSelectedEndpoint\"\\\r\n\t\t\t\t\t\t\ton-change-accessor=\"controller.events.onAccountingCustomerEndpointIdentifierChanged\">\\\r\n\t\t\t\t\t\t\t<div ng-if=\"!filteredItem.item.code\">{{::filteredItem.item.label}}</div>\\\r\n\t\t\t\t\t\t\t<div ng-if=\"filteredItem.item.code\">\\\r\n\t\t\t\t\t\t\t\t<strong>{{::filteredItem.item.schemeDescription}}</strong> : <span>{{::filteredItem.item.code}}</span> <span ng-if=\"filteredItem.item.codeDescription\">{{::filteredItem.item.codeDescription}}</span>\\\r\n\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t</di-select>\\\r\n\t\t\t\t\t\t</div>',\r\n\t\t\t        clientName: 'BuyerEndpointIdentifier',\r\n\t\t\t        visible: false,\r\n\t\t\t        mandatory: false,\r\n\t\t\t        hideable: true,\r\n\t\t\t        typeGroup: 0,\r\n\t\t\t        isVisible: false,\r\n\t\t\t        isHidden: true,\r\n\t\t\t        isColumn: false\r\n\t\t\t    },\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_VAT_NUMBER',\r\n\t\t\t\t\ttemplate:\r\n                        '<label class =\"form-row-label ng-scope\" di-translate=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_VAT_NUMBER\">Supplier VAT number</label>\\\r\n                            <div>\\\r\n                                <di-select\\\r\n                                    mode=\"dropdown\"\\\r\n                                    items=\"controller.supplierVatNumbers\"\\\r\n                                    item-unique-property=\"identifier\"\\\r\n                                    watch-items=\"true\"\\\r\n                                    watch-binding=\"true\"\\\r\n                                    watch-include-default-obj=\"true\"\\\r\n                                    bind-to-object=\"controller\"\\\r\n                                    bind-to-property=\"supplierVatNumber\"\\\r\n                                    display-property=\"displayValue\"\\\r\n                                    allow-empty-display=\"true\"\\\r\n                                    on-item-select-function=\"addNew\"\\\r\n                                    on-change-accessor=\"controller.events.onSupplierVatNumberChanged\">\\\r\n                                    <div ng-if=\"!filteredItem.item.code\">{{::filteredItem.item.label}}</div>\\\r\n                                    <div ng-if=\"filteredItem.item.code\">\\\r\n                                        <span ng-if=\"filteredItem.item.schemeDescription\"><strong>{{::filteredItem.item.schemeDescription}}</strong> : </span><span>{{::filteredItem.item.code}}</span>\\\r\n                                    </div>\\\r\n                                </di-select>\\\r\n                        </div>',\r\n\t\t\t\t\tclientName: 'SupplierVatNumber',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_VAT_NUMBER',\r\n\t\t\t\t\ttemplate:\r\n                        '<label class =\"form-row-label ng-scope\" di-translate=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_VAT_NUMBER\">Supplier VAT number</label>\\\r\n                        <div>\\\r\n                        <di-select\\\r\n                            mode=\"dropdown\"\\\r\n                            ng-if=\"!controller.usingAccounting\"\\\r\n                            items=\"controller.buyerVatNumbers\"\\\r\n                            item-unique-property=\"identifier\"\\\r\n                            watch-items=\"true\"\\\r\n                            watch-binding=\"true\"\\\r\n                            watch-include-default-obj=\"true\"\\\r\n                            bind-to-object=\"controller\"\\\r\n                            bind-to-property=\"customerVatNumber\"\\\r\n                            display-property=\"displayValue\"\\\r\n                            allow-empty-display=\"true\"\\\r\n                            on-item-select-function=\"addNew\"\\\r\n                            on-change-accessor=\"controller.events.onBuyerVatNumberChanged\">\\\r\n                            <div ng-if=\"!filteredItem.item.code\">{{::filteredItem.item.label}}</div>\\\r\n                            <div ng-if=\"filteredItem.item.code\">\\\r\n                                <span ng-if=\"filteredItem.item.schemeDescription\"><strong>{{::filteredItem.item.schemeDescription}}</strong> : </span><span>{{::filteredItem.item.code}}</span>\\\r\n                            </div>\\\r\n                        </di-select>\\\r\n                        <di-select\\\r\n                            mode=\"dropdown\"\\\r\n                            ng-if=\"controller.usingAccounting\"\\\r\n                            items=\"controller.accountingCustomerVatNumbers\"\\\r\n                            item-unique-property=\"identifier\"\\\r\n                            watch-items=\"true\"\\\r\n                            watch-binding=\"true\"\\\r\n                            watch-include-default-obj=\"true\"\\\r\n                            bind-to-object=\"controller\"\\\r\n                            bind-to-property=\"accountingCustomerVatNumber\"\\\r\n                            display-property=\"displayValue\"\\\r\n                            allow-empty-display=\"true\"\\\r\n                            on-item-select-function=\"addNew\"\\\r\n                            on-change-accessor=\"controller.events.onAccountingCustomerVatNumberChanged\">\\\r\n                            <div ng-if=\"!filteredItem.item.code\">{{::filteredItem.item.label}}</div>\\\r\n                            <div ng-if=\"filteredItem.item.code\">\\\r\n                                <span ng-if=\"filteredItem.item.schemeDescription\"><strong>{{::filteredItem.item.schemeDescription}}</strong> : </span><span>{{::filteredItem.item.code}}</span>\\\r\n                            </div>\\\r\n                        </di-select>\\\r\n                        </div>',\r\n\t\t\t\t\tclientName: 'CustomerVatNumber',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n                {\r\n                    header: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_LEGAL_REGISTRATION_NAME',\r\n                    template: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n\t\t\t\t\t\t\t\t\tng-if=\"!controller.usingAccounting\"\\\r\n\t\t\t\t\t\t\t\t\tng-model-property=\"buyerCustomerLegalRegistrationName\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onInvoiceChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"buyerCustomerLegalRegistrationName\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_LEGAL_REGISTRATION_NAME\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"text\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_LEGAL_REGISTRATION_NAME\"></di-input>\\\r\n                             <di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n\t\t\t\t\t\t\t\t\tng-if=\"controller.usingAccounting\"\\\r\n\t\t\t\t\t\t\t\t\tng-model-property=\"accountingCustomerLegalName\"\\\r\n                                    ng-change=\"controller.events.onInvoiceChanged()\"\\\r\n                                    validation-property-name=\"accountingCustomerLegalName\"\\\r\n                                    validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_LEGAL_REGISTRATION_NAME\"\\\r\n                                    validation-message-position=\"top right\"\\\r\n                                    di-input-type=\"text\"\\\r\n                                    di-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_LEGAL_REGISTRATION_NAME\"></di-input>',\r\n                    clientName: 'BuyerCustomerLegalRegistrationName',\r\n                    visible: false,\r\n                    mandatory: false,\r\n                    hideable: true,\r\n                    typeGroup: 0,\r\n                    isVisible: false,\r\n                    isHidden: true,\r\n                    isColumn: false\r\n                },\r\n                {\r\n                    header: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_LEGAL_REGISTRATION_IDENTIFIER',\r\n                    template:\r\n                        '<label class =\"form-row-label ng-scope\" di-translate=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_LEGAL_REGISTRATION_IDENTIFIER\">Buyer legal registration identifier</label>\\\r\n                            <div>\\\r\n                                <di-select\\\r\n                                    mode=\"dropdown\"\\\r\n                                    ng-if=\"!controller.usingAccounting\"\\\r\n                                    items=\"controller.buyerCustomerLegalCompanyReferences\"\\\r\n                                    item-unique-property=\"identifier\"\\\r\n                                    watch-items=\"true\"\\\r\n                                    watch-binding=\"true\"\\\r\n                                    watch-include-default-obj=\"true\"\\\r\n                                    bind-to-object=\"controller\"\\\r\n                                    bind-to-property=\"buyerCustomerLegalCompanyReference\"\\\r\n                                    display-property=\"displayValue\"\\\r\n                                    validation-property-name=\"buyerCustomerLegalCompanyReference\"\\\r\n\t\t\t\t                    validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_LEGAL_REGISTRATION_IDENTIFIER\"\\\r\n\t\t\t\t                    validation-message-position=\"top right\"\\\r\n                                    allow-empty-display=\"true\"\\\r\n                                    on-item-select-function=\"addNew\"\\\r\n                                    on-change-accessor=\"controller.events.onBuyerCustomerLegalCompanyReferenceChanged\">\\\r\n                                    <div ng-if=\"!filteredItem.item.code\">{{::filteredItem.item.label}}</div>\\\r\n                                    <div ng-if=\"filteredItem.item.code\">\\\r\n                                        <span ng-if=\"filteredItem.item.schemeDescription\"><strong>{{::filteredItem.item.schemeDescription}}</strong> : </span><span>{{::filteredItem.item.code}}</span>\\\r\n                                    </div>\\\r\n                             </di-select>\\\r\n                             <di-select\\\r\n                                    mode=\"dropdown\"\\\r\n                                    ng-if=\"controller.usingAccounting\"\\\r\n                                    items=\"controller.accountingCustomerLegalCompanyReferences\"\\\r\n                                    item-unique-property=\"identifier\"\\\r\n                                    watch-items=\"true\"\\\r\n                                    watch-binding=\"true\"\\\r\n                                    watch-include-default-obj=\"true\"\\\r\n                                    bind-to-object=\"controller\"\\\r\n                                    bind-to-property=\"accountingCustomerLegalCompanyReference\"\\\r\n                                    display-property=\"displayValue\"\\\r\n                                    validation-property-name=\"buyerCustomerLegalCompanyReference\"\\\r\n\t\t\t\t                    validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.BUYER_LEGAL_REGISTRATION_IDENTIFIER\"\\\r\n\t\t\t\t                    validation-message-position=\"top right\"\\\r\n                                    allow-empty-display=\"true\"\\\r\n                                    on-item-select-function=\"addNew\"\\\r\n                                    on-change-accessor=\"controller.events.onAccountingCustomerLegalCompanyReferenceChanged\">\\\r\n                                    <div ng-if=\"!filteredItem.item.code\">{{::filteredItem.item.label}}</div>\\\r\n                                    <div ng-if=\"filteredItem.item.code\">\\\r\n                                        <span ng-if=\"filteredItem.item.schemeDescription\"><strong>{{::filteredItem.item.schemeDescription}}</strong> : </span><span>{{::filteredItem.item.code}}</span>\\\r\n                                    </div>\\\r\n                             </di-select>\\\r\n                        </div>',\r\n                    clientName: 'BuyerCustomerLegalCompanyReference',\r\n                    visible: false,\r\n                    mandatory: false,\r\n                    hideable: true,\r\n                    typeGroup: 0,\r\n                    isVisible: false,\r\n                    isHidden: true,\r\n                    isColumn: false\r\n                },\r\n                {\r\n                    header: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.TAX_EXEMPTION_REASON',\r\n                    template: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n                                    ng-model-property=\"taxExemptionReason\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onInvoiceChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"taxExemptionReason\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.TAX_EXEMPTION_REASON\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"text\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.TAX_EXEMPTION_REASON\"></di-input>',\r\n                    clientName: 'TaxExemptionReason',\r\n                    visible: false,\r\n                    mandatory: false,\r\n                    hideable: true,\r\n                    typeGroup: 0,\r\n                    isVisible: false,\r\n                    isHidden: true,\r\n                    isColumn: false\r\n                },\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_LEGAL_REGISTRATION_NAME',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n                                    ng-model-property=\"supplierLegalRegistrationName\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onInvoiceChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"supplierLegalRegistrationName\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_LEGAL_REGISTRATION_NAME\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"text\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_LEGAL_REGISTRATION_NAME\"></di-input>',\r\n\t\t\t\t\tclientName: 'SupplierLegalRegistrationName',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_LEGAL_REGISTRATION_IDENTIFIER',\r\n\t\t\t\t\ttemplate:\r\n                        '<label class =\"form-row-label ng-scope\" di-translate=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_LEGAL_REGISTRATION_IDENTIFIER\">Supplier legal registration identifier</label>\\\r\n                            <div>\\\r\n                                <di-select\\\r\n                                    mode=\"dropdown\"\\\r\n                                    items=\"controller.supplierLegalCompanyReferences\"\\\r\n                                    item-unique-property=\"identifier\"\\\r\n                                    watch-items=\"true\"\\\r\n                                    watch-binding=\"true\"\\\r\n                                    watch-include-default-obj=\"true\"\\\r\n                                    bind-to-object=\"controller\"\\\r\n                                    bind-to-property=\"supplierLegalCompanyReference\"\\\r\n                                    display-property=\"displayValue\"\\\r\n                                    validation-property-name=\"supplierLegalCompanyReference\"\\\r\n\t\t\t\t                    validation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_LEGAL_REGISTRATION_IDENTIFIER\"\\\r\n\t\t\t\t                    validation-message-position=\"top right\"\\\r\n                                    allow-empty-display=\"true\"\\\r\n                                    on-item-select-function=\"addNew\"\\\r\n                                    on-change-accessor=\"controller.events.onSupplierLegalCompanyReferenceChanged\">\\\r\n                                    <div ng-if=\"!filteredItem.item.code\">{{::filteredItem.item.label}}</div>\\\r\n                                    <div ng-if=\"filteredItem.item.code\">\\\r\n                                        <span ng-if=\"filteredItem.item.schemeDescription\"><strong>{{::filteredItem.item.schemeDescription}}</strong> : </span><span>{{::filteredItem.item.code}}</span>\\\r\n                                    </div>\\\r\n                             </di-select>\\\r\n                        </div>',\r\n\t\t\t\t\tclientName: 'SupplierLegalCompanyReference',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_LEGAL_REGISTRATION_TOWN',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n\t\t\t\t\t\t\t\t\tng-model-property=\"supplierLegalTown\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onInvoiceChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"supplierLegalTown\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_LEGAL_REGISTRATION_TOWN\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"text\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_LEGAL_REGISTRATION_TOWN\"></di-input>',\r\n\t\t\t\t\tclientName: 'SupplierLegalTown',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_LEGAL_REGISTRATION_COUNTRY',\r\n\t\t\t\t\ttemplate: '<label\\\r\n\t\t\t\t\t\t\t\t\tclass=\"form-row-label\"\\\r\n\t\t\t\t\t\t\t\t\tdi-translate=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SUPPLIER_LEGAL_REGISTRATION_COUNTRY\">\\\r\n\t\t\t\t\t\t\t\t</label>\\\r\n\t\t\t\t\t\t\t\t<di-dropdown-selector\\\r\n\t\t\t\t\t\t\t\t\titems=\"controller.countries\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-object=\"controller\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-property=\"supplierLegalCountryId\"\\\r\n\t\t\t\t\t\t\t\t\ton-change-accessor=\"controller.events.onSupplierLegalCountryChanged\">\\\r\n\t\t\t\t\t\t\t\t</di-dropdown-selector>',\r\n\t\t\t\t\tclientName: 'SupplierLegalCountry',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.PREPAID_AMOUNT',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"decimal\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.events.onPrepaidAmountChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"controller.invoice\"\\\r\n\t\t\t\t\t\t\t\t\tng-model-property=\"prepaidAmount\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"prepaidAmount\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.PREPAID_AMOUNT\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-label=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.PREPAID_AMOUNT\">\\\r\n\t\t\t\t\t\t\t\t</di-input>',\r\n\t\t\t\t\tclientName: 'PrepaidAmount',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 0,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'Generic text box',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"{MODEL}\"\\\r\n                                    ng-model-property=\"{FIELD}\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"{CHANGED}\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"{FIELD}\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"text\"\\\r\n                                    di-input-label=\"{LABEL}\"></di-input>',\r\n\t\t\t\t\tclientName: 'GenericTextBox',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 1,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\theader: 'Generic product line text box',\r\n\t\t\t\t\tmodel: 'line.{FIELD}',\r\n\t\t\t\t\ttemplate: '<div\\\r\n\t\t\t\t\t\t\t\t\tclass=\"full\">\\\r\n\t\t\t\t\t\t\t\t\t<di-input\\\r\n                                        di-input-type=\"text\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-model=\"binding\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-model-property=\"{FIELD}\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-change=\"controller.lineChanged\"\\\r\n\t\t\t\t\t\t\t\t\t\tvalidation-property-name=\"{FIELD}\"\\\r\n\t\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"{LABEL}>\"\\\r\n                                     </di-input>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\tclientName: 'GenericTextBox',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 1,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'Generic number box',\r\n\t\t\t\t\ttemplate: '<div\\\r\n\t\t\t\t\t\t\t\t\tclass=\"custom-fields-col full\">\\\r\n\t\t\t\t\t\t\t\t\t<label\\\r\n\t\t\t\t\t\t\t\t\t\tclass=\"custom-fields-label\"\\\r\n\t\t\t\t\t\t\t\t\t\tdi-translate=\"{LABEL}\">\\\r\n\t\t\t\t\t\t\t\t\t</label>\\\r\n\t\t\t\t\t\t\t\t\t<input\\\r\n\t\t\t\t\t\t\t\t\t\tng-model=\"{MODEL}\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-change=\"{CHANGED}\"\\\r\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"/>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\tclientName: 'GenericTextBox',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 2,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\theader: 'Generic product line number box',\r\n\t\t\t\t\tmodel: 'line.{FIELD}',\r\n\t\t\t\t\ttemplate: '<div\\\r\n\t\t\t\t\t\t\t\t\tclass=\"full\">\\\r\n\t\t\t\t\t\t\t\t\t<di-input\\\r\n                                        di-input-type=\"number\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-model=\"binding\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-model-property=\"{FIELD}\"\\\r\n\t\t\t\t\t\t\t\t\t\tvalidation-property-name=\"{FIELD}\"\\\r\n\t\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"{LABEL}\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-change=\"controller.lineChanged\">\\\r\n\t\t\t\t\t\t\t\t\t</di-input>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\tclientName: 'GenericTextBox',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 2,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theader: 'Generic decimal box',\r\n\t\t\t\t\ttemplate: '<div\\\r\n\t\t\t\t\t\t\t\t\tclass=\"custom-fields-col full\">\\\r\n\t\t\t\t\t\t\t\t\t<label\\\r\n\t\t\t\t\t\t\t\t\t\tclass=\"custom-fields-label\"\\\r\n\t\t\t\t\t\t\t\t\t\tdi-translate=\"{LABEL}\">\\\r\n\t\t\t\t\t\t\t\t\t</label>\\\r\n\t\t\t\t\t\t\t\t\t<di-input\\\r\n                                            di-input-type=\"text\"\\\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"numericcell\"\\\r\n\t\t\t\t\t\t\t\t\t\t\tng-model=\"binding\"\\\r\n\t\t\t\t\t\t\t\t\t\t\tng-model-property=\"{FIELD}}\"\\\r\n\t\t\t\t\t\t\t\t\t\t\tvalidation-property-name=\"{FIELD}\"\\\r\n\t\t\t\t\t\t\t\t\t\t\tng-change=\"controller.lineChanged\"\\\r\n\t\t\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"{LABEL}\">\\\r\n\t\t\t\t\t\t\t\t\t</di-input>\\\r\n\t\t\t\t\t\t\t\t\t<input\\\r\n\t\t\t\t\t\t\t\t\t\tng-model=\"{MODEL}\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-change=\"{CHANGED}\"\\\r\n\t\t\t\t\t\t\t\t\t\tdi-input\\\r\n\t\t\t\t\t\t\t\t\t\tdi-input-type=\"number\"/>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\tclientName: 'GenericDecimalBox',\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tmandatory: false,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\ttypeGroup: 3,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: true,\r\n\t\t\t\t\tisColumn: false\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/_components/optionalFields/optionalFieldsConfiguration.js","define([\r\n    './_components/_loader',\r\n    './contract-type-code-selector/_loader',\r\n    './currency-selector/_loader',\r\n    './location-selector/_loader',\r\n    './invoiceController',\r\n    './invoiceTotalsCalculator',\r\n    './invoiceDetailsButtonsConfigurator',\r\n    './contact-details/_loader',\r\n    './contact-selector/_loader',\r\n    './companies-selector/_loader'\r\n], function (\r\n    componentsLoader,\r\n    contractTypeCodeSelectorLoader,\r\n    currencySelectorLoader,\r\n    locationSelectorLoader,\r\n    invoiceControllerLoader,\r\n    invoiceTotalsCalculatorLoader,\r\n    invoiceDetailsButtonsConfiguratorLoader,\r\n    contactDetailsLoader,\r\n    contactSelectorLoader,\r\n    companiesSelectorLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        componentsLoader(module);\r\n        contractTypeCodeSelectorLoader(module);\r\n        currencySelectorLoader(module);\r\n        locationSelectorLoader(module);\r\n        invoiceControllerLoader(module);\r\n        invoiceTotalsCalculatorLoader(module);\r\n        invoiceDetailsButtonsConfiguratorLoader(module);\r\n        contactDetailsLoader(module);\r\n        contactSelectorLoader(module);\r\n        companiesSelectorLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/_loader.js","define([\r\n    './companies-selector.component'\r\n], (companiesSelectorComponentModule) => {\r\n    'use strict';\r\n\r\n    return (module) => {\r\n        module.component(\r\n            companiesSelectorComponentModule.CompaniesSelectorComponent.selector,\r\n            companiesSelectorComponentModule.CompaniesSelectorComponent);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/companies-selector/_loader.js","export const CompaniesSelectorComponent = {\r\n    templateUrl: 'src/app/portal/invoices/editor/companies-selector/companies-selector.component.html',\r\n    selector: 'diCompaniesSelector',\r\n    bindings: {\r\n        billFromCompanies: '<', \r\n        selectedBillFromCompanyId: '<',\r\n        selectedBillToCompanyId: '<',\r\n        onBillFromSelected: '&',\r\n        onBillToSelected: '&'\r\n    },\r\n    controllerAs: 'companiesSelectorCtrl',\r\n    controller:\r\n    class CompaniesSelectorController {\r\n\r\n        constructor(partyProxy, authenticationData) {\r\n            this.partyProxy = partyProxy;\r\n            this.authenticationData = authenticationData;\r\n\r\n            this.setBillFrom = this.setBillFrom.bind(this);\r\n            this.setBillTo = this.setBillTo.bind(this);\r\n            this.billFromSelected = this.billFromSelected.bind(this);\r\n            this.billToSelected = this.billToSelected.bind(this);\r\n        }\r\n\r\n        $onInit() {\r\n            this.selectedBillFrom = { partyId: 0};\r\n            this.selectedBillTo = { partyId: 0};\r\n            this.setBillFrom();\r\n        }\r\n\r\n        $onChanges(changes) {\r\n            this.setBillFrom();\r\n        }\r\n\r\n        setBillFrom() {\r\n\r\n            this.billFrom = this.billFromCompanies;\r\n            \r\n            if (this.billFromCompanies.length > 0) {\r\n                if (this.selectedBillFromCompanyId > 0) {\r\n                    this.selectedBillFrom = _.find(this.billFrom, (company) => {\r\n                        return company.party.id === this.selectedBillFromCompanyId;\r\n                    });\r\n\r\n                } else if (this.billFrom.length === 1) {\r\n                    this.selectedBillFrom = this.billFrom[0];\r\n                    this.onBillFromSelected({ company: this.selectedBillFrom });                          \r\n                }\r\n                \r\n                this.setBillTo();\r\n            }\r\n        }\r\n\r\n        setBillTo(){\r\n            let billFromId = this.selectedBillFrom.partyId;\r\n            this.partyProxy\r\n                .getAllUserWorkingForRelatedAllocatedToParties(this.authenticationData.userData.userId, [billFromId])\r\n                .then((data) => {\r\n                    this.billTo = data;\r\n                    if (this.selectedBillToCompanyId > 0) {\r\n                        this.selectedBillTo = _.find(this.billTo, (company) => {\r\n                            return company.party.id === this.selectedBillToCompanyId;\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n\r\n        billFromSelected(company) {\r\n            this.selectedBillFrom = company;\r\n            this.setBillFrom();\r\n            this.onBillFromSelected({ company: company });\r\n        }\r\n\r\n        billToSelected(company) {\r\n            this.selectedBillTo = company;\r\n            this.onBillToSelected({ company: company });\r\n        }\r\n    }\r\n}\r\n\r\nCompaniesSelectorComponent.controller.prototype.constructor.$inject = ['partyProxy', 'authenticationData']\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/companies-selector/companies-selector.component.js","define([\r\n    './contact-details.directive',\r\n    './contact-details.controller'\r\n], function (\r\n    contactDetailsDirectiveLoader,\r\n    contactDetailsControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        contactDetailsDirectiveLoader(module);\r\n        contactDetailsControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/contact-details/_loader.js","//{CODE:EUP8V}\r\n// di.einvoicing.ui.portal.contactDetails\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n        var ngUtil = $di.angular.util;\r\n\r\n        module.controller('ContactDetailsController', ContactDetailsController);\r\n\r\n        ContactDetailsController.$inject = ['$scope'];\r\n\r\n        function ContactDetailsController(scope) {\r\n            var vm = this;\r\n            vm.onDataChanged = onDataChanged;            \r\n\r\n            function onDataChanged() {\r\n                if (scope.onDataChanged) {\r\n                    scope.onDataChanged();\r\n                }\r\n            }\r\n        }\r\n\r\n        return ContactDetailsController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/contact-details/contact-details.controller.js","define(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diContactDetails', diContactDetails);\r\n\r\n        function diContactDetails() {\r\n            return {\r\n                restrict: 'E',\r\n                scope: {\r\n                    bindToObject: \"=\",\r\n                    onDataChanged: \"=\"                    \r\n                },                \r\n                templateUrl: 'src/app/portal/invoices/editor/contact-details/contact-details.html'\r\n            };\r\n        }\r\n\r\n        return diContactDetails;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/contact-details/contact-details.directive.js","define([\r\n    './contact-selector.directive',\r\n    './contact-selector.controller'\r\n], function (\r\n    contactSelectorDirectiveLoader,\r\n    contactSelectorControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        contactSelectorDirectiveLoader(module);\r\n        contactSelectorControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/contact-selector/_loader.js","//{CODE:EUP8H}\r\n// di.einvoicing.ui.portal.contactSelector\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {        \r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n        \r\n        module.controller('ContactSelectorController', ContactSelectorController);\r\n\r\n        ContactSelectorController.$inject = [\r\n            '$scope',\r\n            'partyProxy',\r\n            'promptWindow',\r\n            'notificationHandler',\r\n            'translator',\r\n            'CLIENT_ENUMS'\r\n        ];\r\n\r\n        function ContactSelectorController(\r\n\t\t\tscope,\r\n\t\t\tpartyProxy,\r\n\t\t\tpromptWindow,\r\n\t\t\tnotificationHandler,\r\n\t\t\ttranslator,\r\n            clientEnums) {\r\n            var vm = this;\r\n            vm.contacts = [];\r\n            vm.contact = { };\r\n            vm.onChangeAccessor = onChangeAccessor;\r\n            \r\n            if (scope.subscribeToEvents) {\r\n                scope.subscribeToEvents(reloadContactsForParty);\r\n            }\r\n\r\n            scope.$watch(function () {\r\n                return scope.referencedId;\r\n            }, function () {\r\n                if (util.isDefined(scope.referencedId)) {\r\n                    setChangedInvoiceDetails();\r\n                }\r\n            });\r\n                                                \r\n            function setChangedInvoiceDetails() {\r\n                if (scope.contactType === 'supplier') {\r\n                    getContactsForParty(scope.referencedId);\r\n                } else if (scope.contactType === 'customer') {\r\n                    getContactsForParty(scope.referencedId);\r\n                }\r\n            }\r\n\r\n            function reloadContactsForParty(event) {\r\n                if (event === clientEnums.eventType.invoiceChanged) {\r\n                    getContactsForParty(scope.referencedId);\r\n                }\r\n            }\r\n\r\n            function getContactsForParty(partyId) {\r\n                partyProxy\r\n\t\t\t\t\t.getPartyContacts(partyId)\r\n\t\t\t\t\t.then(success, failure);\r\n            }            \r\n\r\n            function success(data) {\r\n                guard.throwIfNotArray(\"EUP8H01E\", data, \"data\");\r\n                                \r\n                vm.contacts.clear();\r\n\r\n                translator.whenReady().then(function() {\r\n                    vm.contacts.push({\r\n                        id: 0,\r\n                        name: translator.instantTranslate('EINVOICING.PORTAL.COMPONENTS.CONTACTS.NEW'),\r\n                        displayName: translator.instantTranslate('EINVOICING.PORTAL.COMPONENTS.CONTACTS.NEW')\r\n                    });\r\n\r\n                    \r\n                    var fromInvoice = undefined;\r\n\r\n                    if (scope.selectedContact) {\r\n                        fromInvoice = {\r\n                            email: scope.selectedContact.billContactEmail,\r\n                            fax: scope.selectedContact.billContactFax,\r\n                            id: scope.selectedContact.billContactId,\r\n                            originalId: scope.selectedContact.originalBillContactId,\r\n                            name: scope.selectedContact.billContactName,\r\n                            partyId: scope.referencedId,\r\n                            reference: scope.selectedContact.billContactReference,\r\n                            telephoneNumber: scope.selectedContact.billContactTelephone,\r\n                            modified: translator.instantTranslate('EINVOICING.PORTAL.COMPONENTS.CONTACTS.MODIFIED')\r\n                        }\r\n\r\n                            fromInvoice.displayName = fromInvoice.name + fromInvoice.modified;\r\n                        }\r\n                        var addFromInvoice = true;\r\n\r\n                    var fromInvoiceAdded = false;\r\n                    _.each(data,\r\n                        function(dataItem) {\r\n                            dataItem.displayName = formatDisplayName(dataItem, false);\r\n\r\n\r\n                                if (fromInvoice && fromInvoice.originalId === dataItem.id) {\r\n                                    var compare1 = _.pick(\r\n                                        fromInvoice,\r\n                                        'name',\r\n                                        'email',\r\n                                        'telephoneNumber',\r\n                                        'fax',\r\n                                        'reference');\r\n                                    var compare2 = _.pick(\r\n                                        dataItem,\r\n                                        'name',\r\n                                        'email',\r\n                                        'telephoneNumber',\r\n                                        'fax',\r\n                                        'reference');\r\n\r\n                                    if (_.isMatch(compare1, compare2) === true) {\r\n                                        vm.contacts.push(dataItem);\r\n                                        addFromInvoice = false;\r\n                                        return;\r\n                                    } else {\r\n                                        fromInvoice.modified = translator.\r\n                                            instantTranslate('EINVOICING.PORTAL.COMPONENTS.CONTACTS.MODIFIED');\r\n                                        vm.contacts.push(fromInvoice);\r\n                                        addFromInvoice = false;\r\n                                        vm.contacts.push(dataItem);\r\n                                        scope.bindToObject[scope.bindToProperty] = fromInvoice.id;\r\n                                    }\r\n                                } else {\r\n                                    vm.contacts.push(dataItem);\r\n                                }\r\n                            });\r\n\r\n                        if (fromInvoice !== undefined &&\r\n                            fromInvoice.name &&\r\n                            addFromInvoice) {\r\n                            vm.contacts.push(fromInvoice);\r\n                        }\r\n\r\n                        if (newEntity()) {\r\n                            selectDummyContact();\r\n                        } else {\r\n                            setSelectedContactFromBoundId();\r\n                        }\r\n\r\n                    if (!selectedContactBelongsToCompany()) {\r\n                        selectDummyContact();\r\n                    }\r\n\r\n                    onChangeAccessor();\r\n\r\n                });\r\n            }\r\n\r\n            function isValidContact(contact) {\r\n                return util.isDefined(contact) &&\r\n                (\r\n                    util.isNonEmptyString(contact.name) ||\r\n                        util.isNonEmptyString(contact.email) ||\r\n                        util.isNonEmptyString(contact.telephoneNumber) ||\r\n                        util.isNonEmptyString(contact.fax) ||\r\n                        util.isNonEmptyString(contact.reference));\r\n            }\r\n\r\n            function formatDisplayName(contact, addModifiedSuffix) {\r\n                var output = '';\r\n                var hasName = false;\r\n                if (util.isNonEmptyString(contact.name)) {\r\n                    hasName = true;\r\n                    output += contact.name + ' ';\r\n                }\r\n\r\n                var s = '[';\r\n                var e = ']';\r\n\r\n\r\n                if (util.isNonEmptyString(contact.email)) {\r\n                    if (!hasName) {\r\n                        s = '';\r\n                        e = '';\r\n                    }\r\n                    output += `${s}${contact.email}${e} `;\r\n                }\r\n\r\n                if (addModifiedSuffix) {\r\n                    output += contact.modified + ' ';\r\n                }\r\n\r\n                return output;\r\n            }\r\n\r\n            function newEntity() {\r\n                return !scope.bindToObject['id'] || scope.bindToObject['id'] <= 0;\r\n            }\r\n\r\n            function selectDummyContact() {\r\n                vm.contact = _.find(vm.contacts, function (contact) {\r\n                    return contact.id === 0;\r\n                });\r\n            }\r\n\r\n            function selectedContactBelongsToCompany() {\r\n                var contactToUpdate = _.find(vm.contacts, function (contact) {\r\n                    return contact.id === vm.contact.id;\r\n                });\r\n\r\n                return contactToUpdate != undefined;\r\n            }\r\n\r\n            function failure(error) {\r\n            \tnotificationHandler.showError(error.failureReason);\r\n            }\r\n                        \r\n            function setSelectedContactFromBoundId() {                \r\n                if (!util.isDefined(vm.contact)) {                    \r\n                    return;\r\n                }\r\n                                \r\n                var contact = _.find(vm.contacts, function (contact) {\r\n                    return contact.id === scope.bindToObject[scope.bindToProperty];\r\n                });\r\n\r\n                if (util.isUndefined(contact)) {\r\n                    return;\r\n                }\r\n\r\n                vm.contact = contact;\r\n            }        \r\n\r\n            function onChangeAccessor() {\r\n                setBoundIdFromSelectedContact();\r\n            }\r\n            \r\n            function setBoundIdFromSelectedContact() {\r\n                var accessor;\r\n\r\n                scope.bindToObject[scope.bindToProperty] = (vm.contact || {}).id;\r\n\r\n                if (util.isFunction(scope.onChangeAccessor)) {\r\n                    accessor = scope.onChangeAccessor();\r\n\r\n                    if (util.isFunction(accessor)) {\r\n                        accessor(vm.contact);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return ContactSelectorController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/contact-selector/contact-selector.controller.js","//{CODE:EUP8I}\r\n// di.einvoicing.ui.portal.contactSelector\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {        \r\n        module.directive('diContactSelector', diContactSelector);\r\n\r\n        function diContactSelector() {\r\n            return {\r\n                restrict: 'E',                \r\n                scope: {                    \r\n                    bindToObject: '=',\r\n                    bindToProperty: '@',\r\n                    referencedId: '=',\r\n                    selectedContact:\"=\",\r\n                    contactType: '@',\r\n                    onChangeAccessor: '&',\r\n                    subscribeToEvents: '=',\r\n                    validationPropertyName: '@'\r\n                },\r\n                controller: 'ContactSelectorController',\r\n                controllerAs: 'contactSelectorCtrl',\r\n                templateUrl: 'src/app/portal/invoices/editor/contact-selector/contact-selector.html'\r\n            };            \r\n        }\r\n\r\n        return diContactSelector;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/contact-selector/contact-selector.directive.js","//{CODE:EUP88}\r\n// di.einvoicing.ui.portal.components.contractTypeCodeselector\r\ndefine([\r\n\t'./contract-type-code-selector.directive',\r\n\t'./contract-type-code.controller',\r\n\t'./contract-type-code-repository.factory'\r\n], function(\r\n\tcontractTypeCodeSeclectorDirectiveLoader,\r\n\tcontractTypeCodeControllerLoader,\r\n\tcontractTypeCodeRepositoryLoader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tcontractTypeCodeSeclectorDirectiveLoader(module);\r\n\t\tcontractTypeCodeControllerLoader(module);\r\n\t\tcontractTypeCodeRepositoryLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/contract-type-code-selector/_loader.js","//{CODE:EUP8A}\r\n// di.einvoicing.ui.portal.components.contractTypeCodeSelector\r\ndefine(['underscore'], function (_) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('contractTypeCodeRepository', contractTypeCodeRepository);\r\n\r\n\t\tcontractTypeCodeRepository.$inject = ['staticLookupProxy'];\r\n\r\n\t\tfunction contractTypeCodeRepository(staticLookupProxy) {\r\n\t\t\tvar codes = null;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tgetContractTypeCodes: getContractTypeCodes\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets all available contract type codes defined in the system.\r\n\t\t\t */\r\n\t\t\tfunction getContractTypeCodes() {\r\n\t\t\t\tvar promise = staticLookupProxy.get('ContractTypeCode').then(success);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\tcodes = data;\r\n\r\n\t\t\t\t\t_.each(codes, function (code) {\r\n\t\t\t\t\t\tcodes.id = code.id;\r\n\t\t\t\t\t\tcodes.label = code.code;\r\n\t\t\t\t\t\tcodes.value = code.value;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcodes = _.sortBy(codes, function (code) { return code.code });\r\n\r\n\t\t\t\t\treturn codes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn contractTypeCodeRepository;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/contract-type-code-selector/contract-type-code-repository.factory.js","//{CODE:EUP89}\r\n// di.einvoicing.ui.portal.components.contractTypeCodeSelector\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tmodule.directive('diContractTypeCodeSelector', diContractTypeCodeSelector);\r\n\r\n\t\tfunction diContractTypeCodeSelector() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\ttemplate: template,\r\n\t\t\t\tcontroller: 'ContractTypeCodeController',\r\n\t\t\t\tcontrollerAs: 'contractTypeCodeCtrl',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\ttabIndex: '@',\r\n\t\t\t\t\titems: '=',\r\n\t\t\t\t\tbindToObject: '=',\r\n\t\t\t\t\tbindToProperty: '@',\r\n\t\t\t\t\tbindToSecondProperty: '@',\r\n\t\t\t\t\tonChangeAccessor: '&',\r\n\t\t\t\t\tvalidationMessage: '@',\r\n\t\t\t\t\tvalidationName: '@',\r\n\t\t\t\t\tvalidationModelDisplayName: '@'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Generates html template             \r\n\t\t\t */\r\n\t\t\tfunction template(element, attrs) {\r\n\t\t\t\tvar html = '<div>\\\r\n\t\t\t\t\t\t\t\t<di-select\\\r\n\t\t\t\t\t\t\t\t\ttab-index=\"{{::tabIndex}}\"\\\r\n\t\t\t\t\t\t\t\t\tmode=\"dropdownSearch\"\\\r\n\t\t\t\t\t\t\t\t\twatch-items=\"true\"\\\r\n\t\t\t\t\t\t\t\t\titems=\"contractTypeCodeCtrl.items\"\\\r\n\t\t\t\t\t\t\t\t\titem-unique-property=\"id\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-object=\"contractTypeCodeCtrl\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-property=\"item\"\\\r\n\t\t\t\t\t\t\t\t\tdisplay-property=\"value\"\\\r\n\t\t\t\t\t\t\t\t\tsearchable-properties=\"value\"';\r\n\r\n\t\t\t\thtml += getValidationHtml(attrs);\r\n\t\t\t\thtml += '           on-change-accessor=\"contractTypeCodeCtrl.onChangeAccessor\"\\\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"EINVOICING.COMPONENTS.CONTRACT_TYPE_CODE.SEARCH\">\\\r\n\t\t\t\t\t\t\t\t\t{{::filteredItem.item.code}}: {{::filteredItem.item.value}}\\\r\n\t\t\t\t\t\t\t\t</di-select></div>';\r\n\t\t\t\treturn html;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Adds validation attributes                 \r\n\t\t\t\t */\r\n\t\t\t\tfunction getValidationHtml(attrs) {\r\n\t\t\t\t\tvar innerHtml = \"\";\r\n\r\n\t\t\t\t\tif (util.isDefined(attrs.validationName)) {\r\n\t\t\t\t\t\tvar displayName = attrs.validationName;\r\n\t\t\t\t\t\tif (util.isDefined(attrs.validationModelDisplayName)) {\r\n\t\t\t\t\t\t\tdisplayName = attrs.validationModelDisplayName;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinnerHtml += 'di-validate=\"{{::validationName}}\"' +\r\n\t\t\t\t\t\t\t\t\t'validation-model=\"bindToObject[bindToProperty]\"' +\r\n\t\t\t\t\t\t\t\t\t'validation-message=\"{{::validationMessage}}\"' +\r\n\t\t\t\t\t\t\t\t\t'validation-model-display-name=\"' + displayName + '\"';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn innerHtml;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn diContractTypeCodeSelector;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/contract-type-code-selector/contract-type-code-selector.directive.js","//{CODE:EUP8B}\r\n// di.einvoicing.ui.portal.components.contractTypeCodeSelector\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('ContractTypeCodeController', ContractTypeCodeController);\r\n\r\n\t\tContractTypeCodeController.$inject = ['$scope', 'contractTypeCodeRepository'];\r\n\r\n\t\tfunction ContractTypeCodeController(scope, contractTypeCodeRepository) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvm.items = [];\r\n\t\t\tvm.item = {};\r\n\t\t\tvm.onChangeAccessor = setBoundIdFromSelectedItem;\r\n\r\n\t\t\tinit();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t//initialise and populate the contract type code control from the repository\r\n\t\t\tfunction init() {\r\n\t\t\t\tcontractTypeCodeRepository.getContractTypeCodes().then(function (data) {\r\n\t\t\t\t\tvm.items.fill(data);\r\n\r\n\t\t\t\t\tscope.$watch(function () {\r\n\t\t\t\t\t\treturn scope.bindToObject[scope.bindToProperty];\r\n\t\t\t\t\t}, setSelectedItemFromBoundId);\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction setSelectedItemFromBoundId() {\r\n\t\t\t\t\t\tif (util.isDefined(vm.item.id) && scope.bindToObject[scope.bindToProperty] === vm.item.id) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scope.bindToObject[scope.bindToProperty] === -1) {\r\n\t\t\t\t\t\t\tvar unknownItem = {\r\n\t\t\t\t\t\t\t\tid: 0,\r\n\t\t\t\t\t\t\t\tcode: scope.bindToObject[scope.bindToSecondProperty],\r\n\t\t\t\t\t\t\t\tvalue: scope.bindToObject[scope.bindToSecondProperty]\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar exist = _.find(vm.items, function (item) {\r\n\t\t\t\t\t\t\t\treturn item.id === unknownItem.id;\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif (util.isUndefined(exist)) {\r\n\t\t\t\t\t\t\t\tvm.items.push(unknownItem);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tscope.bindToObject[scope.bindToProperty] = unknownItem.id;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar item = _.find(vm.items, function (item) {\r\n\t\t\t\t\t\t\treturn item.id === scope.bindToObject[scope.bindToProperty];\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.item = item;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction setBoundIdFromSelectedItem() {\r\n\t\t\t\tvar accessor;\r\n\r\n\t\t\t\tscope.bindToObject[scope.bindToProperty] = (vm.item || {}).id;\r\n\r\n\t\t\t\tif (util.isFunction(scope.onChangeAccessor)) {\r\n\t\t\t\t\taccessor = scope.onChangeAccessor();\r\n\r\n\t\t\t\t\tif (util.isFunction(accessor)) {\r\n\t\t\t\t\t\taccessor(vm.item);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ContractTypeCodeController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/contract-type-code-selector/contract-type-code.controller.js","//{CODE:EUP1U}\r\n// di.einvoicing.ui.portal.components\r\ndefine([\r\n    './currency-selector.directive',\r\n    './currency-selector.controller'\r\n], function (\r\n    currencySelectorDirectiveLoader,\r\n    currencySelectorControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        currencySelectorDirectiveLoader(module);\r\n        currencySelectorControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/currency-selector/_loader.js","//{CODE:EUP1V}\r\n// di.einvoicing.ui.portal.components\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.controller('CurrencySelectorController', CurrencySelectorController);\r\n\r\n        CurrencySelectorController.$inject = ['$scope', 'currencyCache'];\r\n\r\n        function CurrencySelectorController(scope, currencyCache) {\r\n            var vm = this;\r\n\r\n            vm.items = [];\r\n            vm.item = {};\r\n            vm.onChangeAccessor = setBoundIdFromSelectedItem;\r\n\r\n            init();\r\n\r\n            return;\r\n\r\n            function init() {\r\n                currencyCache.getCurrencies().then(function(data) {\r\n                    vm.items.fill(data);\r\n\r\n                    scope.$watch(function() {\r\n                        return scope.bindToObject[scope.bindToProperty];\r\n                    }, setSelectedItemFromBoundId);\r\n\r\n                    return;\r\n\r\n                    function setSelectedItemFromBoundId() {\r\n                        if (util.isDefined(vm.item) && scope.bindToObject[scope.bindToProperty] === vm.item.id) {\r\n                            return;\r\n                        }\r\n\r\n                        var item = _.find(vm.items, function(item) {\r\n                            return item.id === scope.bindToObject[scope.bindToProperty];\r\n                        });\r\n\r\n                        if (util.isUndefined(item)) {\r\n                            return;\r\n                        }\r\n\r\n                        vm.item = item;\r\n                    }\r\n                });\r\n            }\r\n\r\n            function setBoundIdFromSelectedItem() {\r\n                var accessor;\r\n\r\n                scope.bindToObject[scope.bindToProperty] = (vm.item || {}).id;\r\n\r\n                if (util.isFunction(scope.onChangeAccessor)) {\r\n                    accessor = scope.onChangeAccessor();\r\n\r\n                    if (util.isFunction(accessor)) {\r\n                        accessor(vm.item);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return CurrencySelectorController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/currency-selector/currency-selector.controller.js","//{CODE:EUP1W}\r\n// di.einvoicing.ui.portal.components\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n        module.directive('diCurrencySelector', diCurrencySelector);\r\n\r\n        function diCurrencySelector() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {\r\n                    bindToObject: '=',\r\n                    bindToProperty: '@',\r\n                    validationName: \"@\",\r\n                    validationMessage: '@',\r\n                    onChangeAccessor: '&',\r\n                    validationPropertyName: '@'\r\n                },\r\n                controller: 'CurrencySelectorController',\r\n                controllerAs: 'currencySelectorCtrl',\r\n                template: template\r\n            };\r\n\r\n            function template(element, attrs) {\r\n                var html = '<div>\\\r\n                                <di-select\\\r\n                                    mode=\"dropdown\"\\\r\n                                    items=\"currencySelectorCtrl.items\"\\\r\n                                    item-unique-property=\"id\"\\\r\n                                    bind-to-object=\"currencySelectorCtrl\"\\\r\n                                    bind-to-property=\"item\"\\\r\n                                    display-property=\"name\"\\\r\n                                    on-change-accessor=\"currencySelectorCtrl.onChangeAccessor\"\\\r\n                                    watch-binding=\"true\"\\\r\n                                    di-validate-model=\"invoice\"\\\r\n                                    validation-property-name=\"{{::validationPropertyName}}\"\\\r\n                                    placeholder=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.CURRENCY\"';\r\n                                    html += getValidationHtml(attrs);\r\n                                    html += '><strong>{{::filteredItem.item.symbol}}</strong>: {{::filteredItem.item.name}} ({{::filteredItem.item.code}})\\\r\n                                </di-select>\\\r\n                            </div>';\r\n\r\n                return html;\r\n\r\n                function getValidationHtml(attrs) {\r\n                    var innerHtml = \"\";\r\n\r\n                    if (util.isDefined(attrs.validationName)) {\r\n                        var displayName = attrs.validationName;\r\n                        if (util.isDefined(attrs.validationModelDisplayName)) {\r\n                            displayName = attrs.validationModelDisplayName;\r\n                        }\r\n\r\n                        innerHtml += 'di-validate=\"{{::validationName}}\"\\\r\n                                      validation-message=\"{{::validationMessage}}\"\\\r\n                                      validation-model=\"bindToObject[bindToProperty]\"\\\r\n                                      validation-model-display-name=\"' + displayName + '\"';\r\n                    }\r\n\r\n                    return innerHtml;\r\n                }\r\n            }\r\n        }\r\n\r\n        return diCurrencySelector;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/currency-selector/currency-selector.directive.js","//{CODE:EUP08}\r\n// di.einvoicing.ui.portal.portal.invoices.editor\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        var guard = $di.exception.guard;\r\n        var util = $di.utility.util;\r\n\r\n        module.controller('InvoiceController', InvoiceController);\r\n\r\n        InvoiceController.$inject = [\r\n            '$scope',\r\n            'headerData',\r\n            'invoiceTotalsCalculator',\r\n            'invoiceLinesColumnSettings',\r\n            'OPTIONAL_FIELDS_CONFIGURATION',\r\n            '$stateParams',\r\n            'invoiceProxy',\r\n            'partyProxy',\r\n            'taxProxy',\r\n            'diState',\r\n            'authenticationData',\r\n            'translator',\r\n            'enumTranslator',\r\n            'promptWindow',\r\n            'associativeArrayConvertor',\r\n            'modalSpinner',\r\n            'scopeCacheFactory',\r\n            'CLIENT_ENUMS',\r\n            'authorizedObjectsFilter',\r\n            'invoiceDetailsButtonsConfigurator',\r\n            'valdr',\r\n            'documentStateResolver',\r\n            'documentAttributeResolver',\r\n            'invoiceRepository',\r\n            'staticLookupProxy',\r\n            'notificationHandler',\r\n            '$q',\r\n            'userActionsResolver',\r\n            'documentDownloader',\r\n            'debounce',\r\n            'currencyCache',\r\n            'scrollbarResizer',\r\n            'documentIssuesMessageBuilder',\r\n            'validationRulesSetter',\r\n            'attachmentProxy',\r\n            'INVOICE_ADDITIONAL_DOCUMENT_REFERENCES_CONFIGURATION',\r\n            'attachmentDownloadValidator',\r\n            'randomStringGenerator',\r\n            'modalWindow',\r\n            'identifierFactory',\r\n            'controlsRestrictionManager',\r\n            'formAnalyser',\r\n            'locationProxy',\r\n            'contactProxy'\r\n        ];\r\n\r\n        function InvoiceController(\r\n            scope,\r\n            headerData,\r\n            invoiceTotalsCalculator,\r\n            invoiceLinesColumnSettings,\r\n            optionalFieldsConfiguration,\r\n            stateParams,\r\n            invoiceProxy,\r\n            partyProxy,\r\n            taxProxy,\r\n            diState,\r\n            authenticationData,\r\n            translator,\r\n            enumTranslator,\r\n            promptWindow,\r\n            associativeArrayConvertor,\r\n            modalSpinner,\r\n            scopeCacheFactory,\r\n            CLIENT_ENUMS,\r\n            authorizedObjectsFilter,\r\n            invoiceDetailsButtonsConfigurator,\r\n            valdr,\r\n            documentStateResolver,\r\n            documentAttributeResolver,\r\n            invoiceRepository,\r\n            staticLookupProxy,\r\n            notificationHandler,\r\n            $q,\r\n            userActionsResolver,\r\n            documentDownloader,\r\n            debounce,\r\n            currencyCache,\r\n            scrollbarResizer,\r\n            documentIssuesMessageBuilder,\r\n            validationRulesSetter,\r\n            attachmentProxy,\r\n            additionalDocumentReferencesTableConfiguration,\r\n            attachmentDownloadValidator,\r\n            randomStringGenerator,\r\n            modalWindow,\r\n            identifierFactory,\r\n            controlsRestrictionManager,\r\n            formAnalyser,\r\n            locationProxy,\r\n            contactProxy) {\r\n            var vm = this;\r\n            \r\n            var spinner;\r\n           \r\n            var unRegCalculateInvoiceTotals = function() {};\r\n\r\n            setUp();\r\n            \r\n            init();\r\n\r\n            tearDown();\r\n\r\n            return;\r\n\r\n            function setUp() {\r\n                vm.scopeCache = scopeCacheFactory.create(scope);\r\n                \r\n                scope.loaded = false;\r\n                scope.constraints = valdr.getConstraints();\r\n                scope.invoiceLine = {};\r\n                \r\n                vm.mode = 'edit';\r\n                vm.usingAccounting = false;\r\n                vm.currentState = '...';\r\n                vm.invoice = {\r\n                    lines: [],\r\n                    attributes: [],\r\n                    actions: [],\r\n                    allowancesCharges: [],\r\n                    invoiceTypeId: 1\r\n                };\r\n\r\n                vm.invoiceDocumentIssuesDetails = {\r\n                    visible: false,\r\n                    loaded: false,\r\n                    message: ''\r\n                };\r\n\r\n                vm.totals = {};\r\n\r\n                vm.invoiceDetailsChangeSubscriptions = [];\r\n                vm.eventsSubscriptions = [];\r\n                vm.selectedAttributes = [];\r\n                vm.selectedActions = [];\r\n                vm.selectedStates = [];\r\n                vm.uploadsInProgress = [];\r\n                \r\n                vm.settings = invoiceLinesColumnSettings;\r\n                vm.languageKey = \"EINVOICING.PORTAL.INVOICES.COMPONENTS.PRODUCT_LINES\";\r\n                vm.optionalFieldsSettings = optionalFieldsConfiguration;\r\n                vm.additionalDocumentReferencesConfiguration = additionalDocumentReferencesTableConfiguration;\r\n\r\n                vm.countOfAttachments = 0;\r\n                vm.calculateLineNet = calculateLineNet;\r\n                vm.calculateLineTax = calculateLineTax;\r\n\r\n                vm.events = getEvents();\r\n                vm.actions = getActions();\r\n\r\n                vm.revealPayeeDetails =  {\r\n                    show: function() {},\r\n                    hide: function() {}\r\n                };\r\n\r\n                vm.revealTaxRepresentativeDetails = {\r\n                    show: function() {},\r\n                    hide: function() {}\r\n                };\r\n            }\r\n\r\n            function getActions() {\r\n                return {\r\n                    subscribeToInvoiceDetailsChange: subscribeToInvoiceDetailsChange,\r\n                    subscribeToEvents: subscribeToEvents,\r\n                    resizeHorizontalScrollbar: scrollbarResizer.resizeHorizontalScrollbar,\r\n                    showBillFromChangePopup: showBillFromChangePopup,\r\n                    showBillToChangePopup: showBillToChangePopup,\r\n                    showBillToLocationChangePopup: showBillToLocationChangePopup,\r\n                    preSaveAction: preSaveAction,\r\n                    saveInvoice: saveInvoice,\r\n                    submitInvoice: submitInvoice,\r\n                    voidInvoice: voidInvoice,\r\n                    viewInvoice: viewInvoice,\r\n                    viewHistory: viewHistory,\r\n                    getRelatedDocuments: getRelatedDocuments,\r\n                    deleteInvoice: deleteInvoice,\r\n                    viewInvoiceDocumentIssues: viewInvoiceDocumentIssues,\r\n                    getRenderedInvoice: getRenderedInvoice,\r\n                    cancelChanges: cancelChanges,\r\n                    viewDocumentAttachments: viewDocumentAttachments,\r\n                    downloadAttachment: downloadAttachment,\r\n                    downloadAllAttachments: downloadAllAttachments,\r\n                    addAdditionalDocumentReference: addAdditionalDocumentReference,\r\n                    removeAdditionalDocumentReference: removeAdditionalDocumentReference,\r\n                    matchSelectedEndpoint: matchSelectedEndpoint,\r\n                    matchPartyId: matchPartyId,\r\n                    matchContactId: matchContactId,\r\n                    matchAddressId: matchAddressId\r\n                }\r\n\r\n                function subscribeToInvoiceDetailsChange(subscription) {\r\n                    vm.invoiceDetailsChangeSubscriptions.push(subscription);\r\n                    subscription({\r\n                        supplierPartyId: vm.invoice.supplierPartyId,\r\n                        customerPartyId: vm.invoice.customerPartyId,\r\n                        currencyId: vm.invoice.currencyId\r\n                    });\r\n                }\r\n\r\n                function subscribeToEvents(subscription) {\r\n                    vm.eventsSubscriptions.push(subscription);\r\n                }\r\n\r\n                function showBillFromChangePopup(item) {\r\n                    return scope.loaded &&\r\n                        item.partyId !== vm.supplier.partyId &&\r\n                        (vm.mode === 'edit' || vm.invoice.lines.length > 0 || util.isDefined(vm.customer));\r\n                }\r\n\r\n                function showBillToChangePopup(item) {\r\n                    return util.isDefined(vm.customer) &&\r\n                        item.partyId !== vm.customer.partyId;\r\n                }\r\n\r\n                function showBillToLocationChangePopup(item) {\r\n                    return util.isDefined(vm.customerBillToLocationSelected) &&\r\n                        item.party.id !== vm.customerBillToLocationSelected.party.id;\r\n                }\r\n\r\n                function preSaveAction() {\r\n                    if (vm.uploadsInProgress.length > 0) {\r\n                        notificationHandler.showWarning('EINVOICING.PORTAL.INVOICES.EDITOR.ERROR_UPLOAD_IN_PROGRESS');\r\n\r\n                        return false;\r\n                    }\r\n\r\n                    if (vm.invoice.lines.length <= 0) {\r\n                        notificationHandler.showWarning('EINVOICING.PORTAL.INVOICES.EDITOR.ERROR_NO_INVOICE_LINES');\r\n\r\n                        return false;\r\n                    }\r\n\r\n                    var invalidLineNumbers = [];\r\n\r\n                    //Validation that allowance and charge on lines must have both an amount and a reason\r\n                    _.each(vm.invoice.lines,\r\n                        function(line) {\r\n                            if (util.isNonEmptyString(line.\r\n                                    allowanceReason) &&\r\n                                isNaN(parseFloat(line.allowanceAmount))) {\r\n                                invalidLineNumbers.push(line.lineNumber);\r\n                                return;\r\n                            }\r\n\r\n                            if (!isNaN(parseFloat(line.allowanceAmount)) &&\r\n                                (!util.isString(line.allowanceReason) || line.allowanceReason === '')) {\r\n                                invalidLineNumbers.push(line.lineNumber);\r\n                                return;\r\n                            }\r\n\r\n                            if (util.isNonEmptyString(line.chargeReason) && isNaN(parseFloat(line.chargeAmount))) {\r\n                                invalidLineNumbers.push(line.lineNumber);\r\n                                return;\r\n                            }\r\n\r\n                            if (!isNaN(parseFloat(line.chargeAmount)) &&\r\n                                (!util.isString(line.chargeReason) || line.chargeReason === '')) {\r\n                                invalidLineNumbers.push(line.lineNumber);\r\n                                return;\r\n                            }\r\n                        });\r\n\r\n                    if (invalidLineNumbers.length > 0) {\r\n                        notificationHandler.showError(translator.\r\n                            instantTranslate('EINVOICING.PORTAL.INVOICES.EDITOR.ERROR_INVALID_ALLOWANCE_CHARGES',\r\n                            {\r\n                                invalidLines: invalidLineNumbers.join()\r\n                            }));\r\n\r\n                        return false;\r\n                    }\r\n\r\n                    updateModelReadyForServer();\r\n\r\n                    showSpinner();\r\n\r\n                    var testForDocumentIssuesPromise = invoiceProxy.testForInvoiceDocumentIssues(vm.invoice);\r\n\r\n                    return testForDocumentIssuesPromise.then(resolve, reject);\r\n\r\n                    function resolve(documentIssuesModel) {\r\n                        removeSpinner();\r\n\r\n                        if (documentIssuesModel.issuesLevel !== 1) {\r\n                            var message = documentIssuesMessageBuilder.buildMessage(documentIssuesModel, false);\r\n\r\n                            return {\r\n                                title: 'EINVOICING.PORTAL.INVOICES.EDITOR.DOCUMENT_ISSUES_ON_SAVE.' +\r\n                                    documentIssuesModel.issuesLevel,\r\n                                promptCondition: true,\r\n                                message: message\r\n                            };\r\n                        }\r\n\r\n                        return {};\r\n                    }\r\n\r\n                    function reject() {\r\n                        removeSpinner();\r\n                        notificationHandler.\r\n                            showError('EINVOICING.PORTAL.INVOICES.EDITOR.ERROR_WHEN_TESTING_DOCUMENT_ISSUES');\r\n                    }\r\n                }\r\n\r\n                function saveInvoice(goToInvoiceLinesScreen) {\r\n                    updateModelReadyForServer();\r\n\r\n                    invoiceProxy.commitInvoice(vm.invoice).then(commitResolved, commitRejected);\r\n\r\n                    return;\r\n\r\n                    function commitResolved(data) {\r\n                        if (data.success === true) {\r\n                            vm.scopeCache.clear();\r\n                            notificationHandler.showSuccess('EINVOICING.PORTAL.INVOICES.EDITOR.SAVED_INVOICE',\r\n                                vm.invoice.number);\r\n                            scope.invoiceForm.$setPristine();\r\n\r\n                            vm.invoice.id = data.resultData;\r\n                            if (goToInvoiceLinesScreen) {\r\n                                diState.go('portal.invoices.list');\r\n                            } else {\r\n                                if (vm.mode === 'new') {\r\n                                    diState.go('portal.invoices.editById', { id: data.resultData });\r\n                                } else {\r\n                                    loadInvoice(data.resultData);\r\n                                    setState(CLIENT_ENUMS.documentStateKey.pending);\r\n                                    setClean();\r\n                                }\r\n                            }\r\n\r\n                            notifyEventsSubscribers(CLIENT_ENUMS.eventType.invoiceChanged);\r\n                        } else {\r\n                            enumTranslator.translate(CLIENT_ENUMS.documentCreationFailureReason, data.failureReason).\r\n                                then(function(translated) {\r\n                                    notificationHandler.\r\n                                        showError('EINVOICING.PORTAL.INVOICES.EDITOR.COMMIT_REJECTED', translated);\r\n                                });\r\n                        }\r\n                    }\r\n\r\n                    function commitRejected(error) {\r\n                        notificationHandler.showError(error.failureReason);\r\n                    }\r\n                }\r\n\r\n                function submitInvoice() {\r\n                    invoiceRepository.submitInvoiceByDocumentId(vm.invoice.documentId, vm.invoice.number).then(() => {\r\n                        viewInvoice();\r\n                    });\r\n                }\r\n\r\n                function voidInvoice() {\r\n                    invoiceRepository.voidInvoice(vm.invoice.documentId, vm.invoice.number).then(() => {\r\n                        viewInvoice();\r\n                    });\r\n                }\r\n\r\n                function viewInvoice(id) {\r\n                    diState.go('portal.invoices.viewById', { id: util.isDefined(id) ? id : vm.invoice.id });\r\n                }\r\n\r\n                function viewHistory() {\r\n                    diState.go('portal.audit.list', { id: vm.invoice.documentId });\r\n                }\r\n\r\n                function getRelatedDocuments() {\r\n                    diState.go('portal.related.list', { id: vm.invoice.documentId });\r\n                }\r\n\r\n                function deleteInvoice() {\r\n                    invoiceRepository.deleteInvoice(vm.invoice.documentId, vm.invoice.number).then(() => {\r\n                        if (scope.invoiceForm) {\r\n                            scope.invoiceForm.$setPristine();\r\n                        }\r\n                        //do not goBack as this will trigger an infinite loop when navigation to edit screen was from view screen\r\n                        //limitation: does not preserve the filters\r\n                        diState.go('portal.invoices.list');\r\n                    });\r\n                }\r\n\r\n                function viewInvoiceDocumentIssues(visible) {\r\n                    vm.invoiceDocumentIssuesDetails.visible = visible;\r\n\r\n                    if (visible && vm.invoiceDocumentIssuesDetails.loaded === false) {\r\n                        invoiceProxy.getInvoiceDocumentIssues(vm.invoice.id).\r\n                            then((documentIssuesModel) => {\r\n                                vm.invoiceDocumentIssuesDetails.loaded = true;\r\n\r\n                                vm.invoiceDocumentIssuesDetails.message = documentIssuesMessageBuilder.\r\n                                    buildMessage(documentIssuesModel, true);\r\n                            },\r\n                                () => {\r\n                                    notificationHandler.\r\n                                        showError('EINVOICING.PORTAL.COMPONENTS.DOCUMENT_ISSUES.COULD_NOT_LOAD_ERROR_DETAILS');\r\n                                });\r\n                    }\r\n\r\n                    vm.invoiceDocumentIssuesDetails.visible = visible;\r\n                }\r\n\r\n                function getRenderedInvoice() {\r\n                    documentDownloader.downloadRenderedInvoice(vm.invoice.documentId);\r\n                }\r\n\r\n                function cancelChanges() {\r\n                    goBack();\r\n                }\r\n\r\n                function viewDocumentAttachments() {\r\n                    diState.go('portal.attachments.viewByDocumentId',\r\n                    {\r\n                        documentId: vm.invoice.documentId,\r\n                        invoiceId: vm.invoice.id\r\n                    });\r\n                }\r\n\r\n                function downloadAttachment(attachmentDataId, filename) {\r\n                    if (attachmentDownloadValidator.allowDownloadSingleFile(filename)) {\r\n                        attachmentProxy.downloadFile(attachmentDataId);\r\n                    }\r\n                }\r\n\r\n                function addAdditionalDocumentReference() {\r\n                    var line = {\r\n                        lineIdentifier: randomStringGenerator.generate()\r\n                    };\r\n\r\n                    vm.invoice.additionalDocumentReferences = util.isArray(vm.invoice.additionalDocumentReferences)\r\n                        ? vm.invoice.additionalDocumentReferences.concat([line])\r\n                        : [line];\r\n                    vm.events.onInvoiceChanged();\r\n                }\r\n\r\n                function removeAdditionalDocumentReference(line) {\r\n                    var beingUploaded = _.find(vm.uploadsInProgress,\r\n                        (item) => {\r\n                            return item.lineIdentifier === line.lineIdentifier;\r\n                        });\r\n\r\n                    if (util.isDefined(beingUploaded)) {\r\n                        translator.whenReady().then(() => {\r\n                            promptWindow.confirm({\r\n                                title: translator.\r\n                                    instantTranslate('EINVOICING.PORTAL.INVOICES.EDITOR.REMOVE_LINE.CONFIRM_TITLE'),\r\n                                message: translator.\r\n                                    instantTranslate('EINVOICING.PORTAL.INVOICES.EDITOR.REMOVE_LINE.REMOVE_MESSAGE'),\r\n                                okBtnText: translator.instantTranslate('CORE.PROMPT.YES'),\r\n                                cancelBtnText: translator.instantTranslate('CORE.PROMPT.NO'),\r\n                                callback: (result) => {\r\n                                    if (result) {\r\n                                        removeSingleLine();\r\n                                    }\r\n                                }\r\n                            });\r\n                        });\r\n                    } else {\r\n                        removeSingleLine();\r\n                    }\r\n\r\n                    return;\r\n\r\n                    function removeSingleLine() {\r\n                        vm.invoice.additionalDocumentReferences = _.\r\n                            without(vm.invoice.additionalDocumentReferences, line);\r\n\r\n                        vm.uploadsInProgress = _.without(vm.uploadsInProgress, line);\r\n\r\n                        vm.events.onInvoiceChanged();\r\n                    }\r\n                }\r\n\r\n                function matchSelectedEndpoint(item1, item2, display) {\r\n                    const compare1 = _.pick(item1, 'scheme', 'code', 'identifier');\r\n                    const compare2 = _.pick(item2, 'scheme', 'code', 'identifier');\r\n\r\n                    const isMatch = _.isMatch(compare1, compare2);\r\n                    if (isMatch && item2.identifier !== '') {\r\n                        item2.codeDescription = item1.codeDescription;\r\n                        item2.displayValue = item1.displayValue;\r\n                        item2.label = item1.label;\r\n                        if (util.isFunction(display)) {\r\n                            display();\r\n                        }\r\n                    }\r\n\r\n                    return isMatch;\r\n                }\r\n\r\n                function matchPartyId(party1, party2) {\r\n                    return _compareItems(party1, party2, 'partyId');\r\n                }\r\n\r\n                function matchContactId(contact1, contact2) {\r\n                    return _compareItems(contact1, contact2);\r\n                }\r\n\r\n                function matchAddressId(address1, address2) {\r\n                    return _compareItems(address1, address2);\r\n                }\r\n\r\n                function _compareItems(item1, item2, propertyName1, propertyName2) {\r\n                    if (util.isUndefined(propertyName1)) {\r\n                        propertyName1 = 'id';\r\n                    }\r\n\r\n                    if (util.isUndefined(propertyName2)) {\r\n                        propertyName2 = propertyName1;\r\n                    }\r\n\r\n                    return item1[propertyName1] === item2[propertyName2];\r\n                }\r\n            }\r\n\r\n            function getEvents() {\r\n                return {\r\n                    onInvoiceChanged : onInvoiceChanged,\r\n                    onContractTypeCodeChanged : onContractTypeCodeChanged,\r\n                    onFromCompanyChanged : onFromCompanyChanged,\r\n                    onBillToChanged : onBillToChanged,\r\n                    onBillToCountryChanged : onBillToCountryChanged,\r\n                    onDeliveryCountryChanged : onDeliveryCountryChanged,\r\n                    onSupplierLegalCountryChanged : onSupplierLegalCountryChanged,\r\n                    onBillToLocationChanged : onBillToLocationChanged,\r\n                    onDeliveryLocationChanged : onDeliveryLocationChanged,\r\n                    onCurrencyChanged : onCurrencyChanged,\r\n                    onToContactChanged : onToContactChanged,\r\n                    onFromContactChanged : onFromContactChanged,\r\n                    onPrepaidAmountChanged : onPrepaidAmountChanged,\r\n                    onInvoiceTypeChanged : onInvoiceTypeChanged,\r\n                    onAttachmentUploaded : onAttachmentUploaded,\r\n                    onAttachmentUploadStarted : onAttachmentUploadStarted,\r\n                    onAttachmentUploadFailed : onAttachmentUploadFailed,\r\n                    onSupplierCodeChanged : onSupplierCodeChanged,\r\n                    onSupplierEndpointIdentifierChanged : onSupplierEndpointIdentifierChanged,\r\n                    onCustomerCodeChanged : onCustomerCodeChanged,\r\n                    onBuyerEndpointIdentifierChanged : onBuyerEndpointIdentifierChanged,\r\n                    onAccountingCustomerEndpointIdentifierChanged : onAccountingCustomerEndpointIdentifierChanged,\r\n                    onSupplierVatNumberChanged : onSupplierVatNumberChanged,\r\n                    onBuyerVatNumberChanged : onBuyerVatNumberChanged,\r\n                    onAccountingCustomerVatNumberChanged : onAccountingCustomerVatNumberChanged,\r\n                    onPayeeVatNumberChanged : onPayeeVatNumberChanged,\r\n                    onTaxRepresentativePartyVatNumberChanged : onTaxRepresentativePartyVatNumberChanged,\r\n                    onPayeePartyIdentifierChanged : onPayeePartyIdentifierChanged,\r\n                    onBuyerCustomerLegalCompanyReferenceChanged : onBuyerCustomerLegalCompanyReferenceChanged,\r\n                    onAccountingCustomerLegalCompanyReferenceChanged : onAccountingCustomerLegalCompanyReferenceChanged,\r\n                    onSupplierLegalCompanyReferenceChanged : onSupplierLegalCompanyReferenceChanged\r\n                }\r\n\r\n                function onInvoiceChanged() {\r\n                    if ((vm.mode === 'edit' && scope.loaded === true) || vm.mode === 'new') {\r\n                        setDirty();\r\n                    }\r\n                }\r\n\r\n                function onContractTypeCodeChanged() {\r\n                    var selectedContractTypeCode = _.find(vm.contractTypeCodes,\r\n                        (contractTypeCode) =>{\r\n                            return contractTypeCode.id === vm.invoice.contractTypeCodeId;\r\n                        });\r\n\r\n                    vm.invoice.contractTypeCode = selectedContractTypeCode.code;\r\n                    vm.invoice.contractType = selectedContractTypeCode.value;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onFromCompanyChanged(company) {\r\n                    if (vm.invoice.supplierPartyId === company.partyId) {\r\n                        return;\r\n                    }\r\n\r\n                    company.party.partyId = company.partyId;\r\n\r\n                    vm.invoice.lines.clear();\r\n                    vm.customer = undefined;\r\n                    vm.customerBillToLocationSelected = undefined;\r\n                    vm.selectedCustomerContact = undefined;\r\n\r\n                    _onSupplierSelected(company.party);\r\n\r\n                    notifyInvoiceDetailsChangeSubscribers({\r\n                        supplierPartyId: company.partyId\r\n                    });\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onBillToChanged(company) {\r\n                    if (vm.invoice.customerPartyId === company.partyId) {\r\n                        return;\r\n                    }\r\n                    \r\n                    onCustomerSelected(company);\r\n\r\n                    notifyInvoiceDetailsChangeSubscribers({\r\n                        customerPartyId: company.id\r\n                    });\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onBillToCountryChanged(country) {\r\n                    vm.customerBillToLocationSelected.country = country;\r\n                    notifyInvoiceDetailsChangeSubscribers({\r\n                        countryCode: country.code\r\n                    });\r\n\r\n                    setCurrencyFromBusinessAddress();\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onDeliveryCountryChanged(country) {\r\n                    vm.customerDeliveryLocationSelected.country = country;\r\n                    \r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onSupplierLegalCountryChanged(country) {\r\n                    if (vm.invoice.supplierLegalCountry === country.code) {\r\n                        return;\r\n                    }\r\n\r\n                    vm.invoice.supplierLegalCountry = country.code;\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onBillToLocationChanged(location) {\r\n                    if (location.id < 0) {\r\n                        vm.customerBillToLocationSelected.country = { id: -1 };\r\n                    } else {\r\n                        setCustomerDetails();\r\n                    }\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onDeliveryLocationChanged(location) {\r\n                    if (location.id < 0) {\r\n                        vm.customerDeliveryLocationSelected.locationIdentifier = {\r\n                            identifier: \"\",\r\n                            code: \"\",\r\n                            scheme: \"\",\r\n                            schemeDescription: \"\",\r\n                            displayValue: \"\",\r\n                            showLabel: true,\r\n                            label: \"[None]\"\r\n                        };;\r\n                        vm.customerDeliveryLocationSelected.country = {};\r\n                    }\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onCurrencyChanged(currency) {\r\n                    setCurrency(currency.id);\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onToContactChanged() {\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onFromContactChanged() {\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onPrepaidAmountChanged() {\r\n                    invoiceTotalsCalculator.calculate(vm.invoice, vm.totals);\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onInvoiceTypeChanged(selectedId) {\r\n                    vm.invoice.invoiceTypeId = selectedId;\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onAttachmentUploaded(lineIdentifier, attachmentDataId, filename) {\r\n                    var line = _.find(vm.invoice.additionalDocumentReferences,\r\n                        (item) =>{\r\n                            return item.lineIdentifier === lineIdentifier;\r\n                        });\r\n\r\n                    if (util.isDefined(line)) {\r\n                        line.attachmentDataId = attachmentDataId;\r\n                        line.fileName = filename;\r\n\r\n                        vm.uploadsInProgress = _.without(vm.uploadsInProgress, line);\r\n\r\n                        notificationHandler.showSuccess('EINVOICING.PORTAL.COMPONENTS.ATTACHMENTS.UPLOAD_SUCCESSFUL');\r\n\r\n                        onInvoiceChanged();\r\n                    }\r\n                }\r\n\r\n                function onAttachmentUploadStarted(lineIdentifier) {\r\n                    var line = _.find(vm.invoice.additionalDocumentReferences,\r\n                        (item) =>{\r\n                            return item.lineIdentifier === lineIdentifier;\r\n                        });\r\n\r\n                    if (util.isDefined(line)) {\r\n                        vm.uploadsInProgress.push(line);\r\n                    }\r\n                }\r\n\r\n                function onAttachmentUploadFailed(lineIdentifier) {\r\n                    var line = _.find(vm.invoice.additionalDocumentReferences,\r\n                        (item) =>{\r\n                            return item.lineIdentifier === lineIdentifier;\r\n                        });\r\n\r\n                    if (util.isDefined(line)) {\r\n                        notificationHandler.showError('EINVOICING.PORTAL.COMPONENTS.ATTACHMENTS.UPLOAD_FAILED');\r\n\r\n                        vm.uploadsInProgress = _.without(vm.uploadsInProgress, line);\r\n                    }\r\n                }\r\n\r\n                function onSupplierCodeChanged(item) {\r\n                    vm.invoice.supplierCode = item.code;\r\n                    vm.invoice.supplierCodeScheme = item.scheme;\r\n                    vm.invoice.supplierCodeSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onSupplierEndpointIdentifierChanged(item) {\r\n                    vm.invoice.supplierEndpointIdentifier = item.code;\r\n                    vm.invoice.supplierEndpointIdentifierScheme = item.scheme;\r\n                    vm.invoice.supplierEndpointIdentifierSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onCustomerCodeChanged(item) {\r\n                    vm.invoice.customerCode = item.code;\r\n                    vm.invoice.customerCodeScheme = item.scheme;\r\n                    vm.invoice.customerCodeSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onBuyerEndpointIdentifierChanged(item) {\r\n                    vm.invoice.buyerEndpointIdentifier = item.code;\r\n                    vm.invoice.buyerEndpointIdentifierScheme = item.scheme;\r\n                    vm.invoice.buyerEndpointIdentifierSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onAccountingCustomerEndpointIdentifierChanged(item) {\r\n                    vm.invoice.accountingCustomerEndpointIdentifier = item.code;\r\n                    vm.invoice.accountingCustomerEndpointIdentifierScheme = item.scheme;\r\n                    vm.invoice.accountingCustomerEndpointIdentifierSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onSupplierVatNumberChanged(item) {\r\n                    vm.invoice.supplierVatNumber = item.code;\r\n                    vm.invoice.supplierVatNumberScheme = item.scheme;\r\n                    vm.invoice.supplierVatNumberSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onBuyerVatNumberChanged(item) {\r\n                    vm.invoice.customerVatNumber = item.code;\r\n                    vm.invoice.customerVatNumberScheme = item.scheme;\r\n                    vm.invoice.customerVatNumberSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onAccountingCustomerVatNumberChanged(item) {\r\n                    vm.invoice.accouningCustomerVatNumber = item.code;\r\n                    vm.invoice.accouningCustomerVatNumberScheme = item.scheme;\r\n                    vm.invoice.accouningCustomerVatNumberSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onPayeeVatNumberChanged(item) {\r\n                    vm.invoice.payeeVatNumber = item.code;\r\n                    vm.invoice.payeeVatNumberScheme = item.scheme;\r\n                    vm.invoice.payeeVatNumberSchemeId = item.schemeId;\r\n                  \r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onTaxRepresentativePartyVatNumberChanged(item) {\r\n                    vm.invoice.taxRepresentativePartyVatNumber = item.code;\r\n                    vm.invoice.taxRepresentativePartyVatNumberScheme = item.scheme;\r\n                    vm.invoice.taxRepresentativePartyVatNumberSchemeId = item.schemeId;\r\n                   \r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onPayeePartyIdentifierChanged(item) {\r\n                    vm.invoice.payeePartyIdentifier = item.code;\r\n                    vm.invoice.payeePartyIdentifierScheme = item.scheme;\r\n                    vm.invoice.payeePartyIdentifierSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onBuyerCustomerLegalCompanyReferenceChanged(item) {\r\n                    vm.invoice.buyerCustomerLegalCompanyReference = item.code;\r\n                    vm.invoice.buyerCustomerLegalCompanyReferenceScheme = item.scheme;\r\n                    vm.invoice.buyerCustomerLegalCompanyReferenceSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onAccountingCustomerLegalCompanyReferenceChanged(item) {\r\n                    vm.invoice.accountingCustomerLegalCompanyReference = item.code;\r\n                    vm.invoice.accountingCustomerLegalCompanyReferenceScheme = item.scheme;\r\n                    vm.invoice.accountingCustomerLegalCompanyReferenceSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n\r\n                function onSupplierLegalCompanyReferenceChanged(item) {\r\n                    vm.invoice.supplierLegalCompanyReference = item.code;\r\n                    vm.invoice.supplierLegalCompanyReferenceScheme = item.scheme;\r\n                    vm.invoice.supplierLegalCompanyReferenceSchemeId = item.schemeId;\r\n\r\n                    onInvoiceChanged();\r\n                }\r\n            }\r\n\r\n            /**\r\n            *  Destroy all state, watchers,  any event listeners and subscriptions\r\n            */\r\n            function tearDown() {\r\n                scope.$on('$destroy',\r\n                    function() {\r\n                        unRegCalculateInvoiceTotals();\r\n                    });\r\n            }\r\n\r\n            /**\r\n\t\t\t * Initialises UI and loads data\r\n\t\t\t */\r\n            function init() {\r\n                showSpinner();\r\n\r\n                scrollbarResizer.monitorHorizontalBrowserScrollbar();\r\n\r\n                vm.buttonsSetOneOptions = invoiceDetailsButtonsConfigurator.getButtonsOneConfiguration();\r\n                vm.buttonsSetTwoOptions = invoiceDetailsButtonsConfigurator.getButtonsTwoConfiguration();\r\n                vm.buttonsSetThreeOptions = invoiceDetailsButtonsConfigurator.getButtonsThreeConfiguration();\r\n                vm.buttonsSetFourOptions = invoiceDetailsButtonsConfigurator.getButtonsFourConfiguration();\r\n\r\n                setLabels();\r\n\r\n                validationRulesSetter.\r\n                    setValidationRules(\"Invoice,InvoiceLine,customItem,AdditionalDocumentReference,PartyCode,AllowancesCharges\");\r\n\r\n                controlsRestrictionManager.initialise(stateParams.id,\r\n                    (restrictionLevel) => {\r\n                        if (restrictionLevel === 'all') {\r\n                            vm.actions.viewInvoice(stateParams.id);\r\n                            notificationHandler.\r\n                                showWarning(\"EINVOICING.PORTAL.INVOICES.EDITOR.ACTIONS.EDIT_INVOICE_WARNING\");\r\n                            return;\r\n                        }\r\n                    });\r\n\r\n                const promises = [];\r\n\r\n                const countriesPromise = staticLookupProxy.get('Country');\r\n                const currenciesPromise = currencyCache.getCurrencies();\r\n                const contractTypesPromise = staticLookupProxy.get('ContractTypeCode');\r\n\r\n                const workingForPartiesPromise = partyProxy.getAllPartiesUserCanWorkFor(0);\r\n\r\n                promises.push(countriesPromise);\r\n                promises.push(currenciesPromise);\r\n                promises.push(contractTypesPromise);\r\n                promises.push(workingForPartiesPromise);\r\n\r\n                $q.all(promises).then(([countries, currencies, contractTypes, workingForParties]) => {\r\n                    vm.countries = countries;\r\n                    vm.currencies = currencies;\r\n                    vm.contractTypeCodes = contractTypes;\r\n                    vm.partiesUserWorksFor = workingForParties;\r\n\r\n                    loadInvoice(stateParams.id);\r\n\r\n                    unRegCalculateInvoiceTotals = scope.$on('calculateInvoiceTotals',\r\n                        () =>{\r\n                            invoiceTotalsCalculator.calculate(vm.invoice, vm.totals);\r\n                        });\r\n                });\r\n\r\n                return;\r\n\r\n                /**\r\n                 * sets labels values depending on user rights\r\n                 */\r\n                function setLabels() {\r\n                    var data = [\r\n                        {\r\n                            rights: [\"Supplier\"],\r\n                            key: \"titleEdit\",\r\n                            label: \"EINVOICING.PORTAL.INVOICES.EDITOR.EDIT.HEADER.TITLE_SUPPLIER\"\r\n                        },\r\n                        {\r\n                            rights: [\"Buyer\"],\r\n                            key: \"titleEdit\",\r\n                            label: \"EINVOICING.PORTAL.INVOICES.EDITOR.EDIT.HEADER.TITLE_BUYER\"\r\n                        },\r\n                        {\r\n                            rights: [\"Supplier\"],\r\n                            key: \"titleNew\",\r\n                            label: \"EINVOICING.PORTAL.INVOICES.EDITOR.NEW.HEADER.TITLE_SUPPLIER\"\r\n                        },\r\n                        {\r\n                            rights: [\"Buyer\"],\r\n                            key: \"titleNew\",\r\n                            label: \"EINVOICING.PORTAL.INVOICES.EDITOR.NEW.HEADER.TITLE_BUYER\"\r\n                        }\r\n                    ];\r\n\r\n                    vm.labels = authorizedObjectsFilter.getAuthorizedObjectsAsAssociative(data, 'key', 'label');\r\n\r\n                    if (vm.mode === 'edit') {\r\n                        vm.labels.title = vm.labels.titleEdit;\r\n                    } else {\r\n                        vm.labels.title = vm.labels.titleNew;\r\n                    }\r\n                }\r\n            }\r\n            \r\n            /**\r\n             * loads invoice data from db\r\n             */\r\n            function loadInvoice(id) {\r\n                var functionToGetInvoice = function (){};\r\n                var parameterToGetInvoice = {};\r\n\r\n                vm.mode = 'edit';\r\n                scope.loaded = false;\r\n                vm.supplier = undefined;\r\n                vm.customer = undefined;\r\n                vm.accountingCustomer = undefined;\r\n                vm.currentBillTo = undefined;\r\n                \r\n                vm.actions.viewInvoiceDocumentIssues(false);\r\n\r\n                if (util.isNumber(id)) {\r\n                    functionToGetInvoice = invoiceProxy.getById;\r\n                    parameterToGetInvoice = id;\r\n                } else if (util.isNonEmptyString(stateParams.invoiceNumber)) {\r\n                    functionToGetInvoice = invoiceProxy.getByInvoiceNumber;\r\n                    parameterToGetInvoice = stateParams.invoiceNumber;\r\n                } else {\r\n                    vm.mode = 'new';\r\n                    setState(CLIENT_ENUMS.documentStateKey.pending);\r\n                    vm.taxPointDateInitialValue = '';\r\n                    // set to empty as causing issues with date format on some machines, will be fixed later\r\n                    vm.selectedActions = [CLIENT_ENUMS.userActions.editInvoice, CLIENT_ENUMS.userActions.commit];\r\n                }\r\n\r\n                if (vm.mode === 'edit' && util.isFunction(functionToGetInvoice)) {\r\n                    functionToGetInvoice(parameterToGetInvoice).then(invoiceResolved, invoiceRejected);\r\n                } else {\r\n                    let promise = setIdentifiers(false, false, true);\r\n\r\n                    $q.all([promise]).then(() => {\r\n                        removeSpinner();\r\n                    });\r\n                }\r\n\r\n                return;\r\n\r\n                /**\r\n                *  Loads invoice data\r\n                */\r\n                function invoiceResolved(data) {\r\n                    var editAction = _.find(data.actions,\r\n                        function(action) {\r\n                            return action === CLIENT_ENUMS.userActions.editInvoice;\r\n                        });\r\n\r\n                    if (typeof editAction === \"undefined\") {\r\n                        viewInvoice(data.id);\r\n\r\n                        return;\r\n                    }\r\n\r\n                    setSupplierLegalCountry(data.supplierLegalCountry);\r\n\r\n                    vm.countOfAttachments = data.countOfAttachments;\r\n\r\n                    enumTranslator.translateCollection(CLIENT_ENUMS.productType,\r\n                        data.lines,\r\n                        \"productType\",\r\n                        \"productTypeName\");\r\n\r\n                    _.each(data.attributes,\r\n                        function(attribute) {\r\n                            vm.invoice.attributes.push(attribute);\r\n                        });\r\n\r\n                    util.extend(vm.invoice, _.omit(data, 'additionalDocumentReferences'));\r\n\r\n                    //components one-way bindings watch reference changes (the default of scope.$watch's third param - objectEquality - is false)\r\n                    vm.invoice.additionalDocumentReferences = randomStringGenerator.\r\n                        reset(data.additionalDocumentReferences, 'lineIdentifier');\r\n\r\n                    setTaxExemptionReasonField();\r\n                    \r\n                    validateCurrency(vm.invoice.currencyId);\r\n\r\n                    scope.invoiceLine = vm.invoice.lines[0];\r\n\r\n                    setAttributes();\r\n\r\n                    setActions();\r\n\r\n                    setState(vm.invoice.clientEInvoicingState);\r\n\r\n                    if (vm.invoice.clientEInvoicingState === CLIENT_ENUMS.documentStateKey.invalid) {\r\n                        setState(CLIENT_ENUMS.documentStateKey.pending);\r\n                        vm.selectedStates.push(documentStateResolver.getDocumentState(2));\r\n                    }\r\n\r\n                    setContactDetails();\r\n                    \r\n                    setInvoiceAddressDetails();\r\n\r\n                    setDeliveryAddressDetails();\r\n                    \r\n                    vm.actions.viewInvoiceDocumentIssues(_.find(data.attributes,\r\n                        function(attribute) {\r\n                            return attribute === CLIENT_ENUMS.documentAttribute.businessInvalid ||\r\n                                attribute === CLIENT_ENUMS.documentAttribute.reconciliationFailed ||\r\n                                attribute === CLIENT_ENUMS.documentAttribute.xsltInvalid;\r\n                        }));\r\n\r\n                    setSupplier();\r\n\r\n                    togglePayeeDetails();\r\n                    toggleTaxRepresentativeDetails();\r\n\r\n                    return;\r\n\r\n                    /**\r\n\t\t\t         * Sets invoice address details.\r\n\t\t\t         */\r\n                    function setInvoiceAddressDetails() {\r\n                        const address = {\r\n                            id: 0,\r\n                            locationId: vm.invoice.invoiceLocationId,\r\n                            name: vm.invoice.addressName,\r\n                            addressLine1: vm.invoice.addressLine1,\r\n                            addressLine2: vm.invoice.addressLine2,\r\n                            town: vm.invoice.addressTown,\r\n                            county: vm.invoice.addressCounty,\r\n                            country: vm.invoice.country,\r\n                            postCode: vm.invoice.postCode\r\n                        };\r\n\r\n                        if (address.country) {\r\n                            let country = getCountryByCode(address.country);\r\n                            address.country = country;\r\n                            address.countryId = country.id;\r\n                            address.countryName = country.name;\r\n                        }\r\n\r\n                        vm.customerBillToLocationFromInvoice = address;\r\n                    }\r\n\r\n                    /**\r\n                     * Sets delivery address details.\r\n                     */\r\n                    function setDeliveryAddressDetails() {\r\n                        const address = {\r\n                            id: 0,\r\n                            locationId: vm.invoice.deliveryLocationId,\r\n                            name: vm.invoice.deliveryAddressName,\r\n                            addressLine1: vm.invoice.deliveryAddressLine1,\r\n                            addressLine2: vm.invoice.deliveryAddressLine2,\r\n                            town: vm.invoice.deliveryAddressTown,\r\n                            county: vm.invoice.deliveryAddressCounty,\r\n                            country: vm.invoice.deliveryCountry,\r\n                            postCode: vm.invoice.deliveryPostCode,\r\n                            locationIdentifier: identifierFactory.\r\n                                create(vm.invoice.deliveryLocationIdentifierScheme,\r\n                                    vm.invoice.deliveryLocationIdentifierSchemeId,\r\n                                    vm.invoice.deliveryLocationIdentifier)\r\n                        };\r\n\r\n                        if (address.country) {\r\n                            let country = getCountryByCode(address.country);\r\n                            address.country = country;\r\n                            address.countryId = country.id;\r\n                            address.countryName = country.name;\r\n                        }\r\n\r\n                        vm.customerDeliveryLocationFromInvoice = address;\r\n                    }\r\n\r\n                    /**\r\n                     * Sets supplier and customer contact details from header.\r\n                     */\r\n                    function setContactDetails() {\r\n                        const supplierContactFromInvoice = {\r\n                            id: 0,\r\n                            contactId: vm.invoice.billFromContactId,\r\n                            name: vm.invoice.billFromContactName,\r\n                            telephoneNumber: vm.invoice.billFromContactTelephone,\r\n                            fax: vm.invoice.billFromContactFax,\r\n                            email: vm.invoice.billFromContactEmail,\r\n                            reference: vm.invoice.billFromContactReference\r\n                        }\r\n                \r\n                        vm.supplierContactFromInvoice = supplierContactFromInvoice;\r\n\r\n                        const customerContactFromInvoice = {\r\n                            id: 0,\r\n                            contactId: vm.invoice.billToContactId,\r\n                            name: vm.invoice.billToContactName,\r\n                            telephoneNumber: vm.invoice.billToContactTelephone,\r\n                            fax: vm.invoice.billToContactFax,\r\n                            email: vm.invoice.billToContactEmail,\r\n                            reference: vm.invoice.billToContactReference\r\n                        }\r\n                \r\n                        vm.customerContactFromInvoice = customerContactFromInvoice;\r\n                    }\r\n\r\n\r\n                    function setSupplier() {\r\n                        const foundSupplier = _.find(vm.partiesUserWorksFor,\r\n                        (item) => {\r\n                            return item.partyId === vm.invoice.supplierPartyId;\r\n                        });\r\n\r\n                        if (foundSupplier) {\r\n                            foundSupplier.party.partyId = foundSupplier.partyId;\r\n                            _onSupplierSelected(foundSupplier.party);\r\n                        }\r\n                    }\r\n\r\n                    function togglePayeeDetails() {\r\n                        if (util.isNonEmptyString(vm.invoice.payeeName) || util.isNonEmptyString(vm.invoice.payeePartyIdentifier)) {\r\n                            vm.revealPayeeDetails.show();\r\n                        } else {\r\n                            vm.revealPayeeDetails.hide();\r\n                        }\r\n                    }\r\n\r\n                    function toggleTaxRepresentativeDetails() {\r\n                        if (util.isNonEmptyString(vm.invoice.taxRepresentativePartyName)) {\r\n                            vm.revealTaxRepresentativeDetails.show();\r\n                        } else {\r\n                            vm.revealTaxRepresentativeDetails.hide();\r\n                        }\r\n                    }\r\n                    \r\n                    function setAttributes() {\r\n                        if (util.isNonEmptyString(vm.invoice.number) === false) {\r\n                            vm.invoice.attributes.push(CLIENT_ENUMS.documentAttribute.justFlipped);\r\n                        }\r\n\r\n                        var array = documentAttributeResolver.resolveAttributeKeys(vm.invoice.attributes);\r\n                        documentAttributeResolver.addAttributeById(array, CLIENT_ENUMS.documentAttribute.saved, false);\r\n                        documentAttributeResolver.\r\n                            addAttributeById(array, CLIENT_ENUMS.documentAttribute.hasServerId, false);\r\n\r\n\r\n                        vm.selectedAttributes.fill(array);\r\n                    }\r\n\r\n                    function setActions() {\r\n                        vm.selectedActions.fill(userActionsResolver.resolveActions(vm.invoice.actions, false));\r\n                    }\r\n\r\n                    /**\r\n\t\t\t\t\t* maps the Tax exemption reason from the relevant tax breakdown category\r\n\t\t\t\t\t*/\r\n                    function setTaxExemptionReasonField() {\r\n                        _.each(vm.invoice.taxBreakdown,\r\n                            function(taxItem) {\r\n                                if (taxItem.taxCategory && taxItem.taxCategory.toUpperCase() === \"E\") {\r\n                                    vm.invoice.taxExemptionReason = taxItem.taxExemptionReason;\r\n                                }\r\n                            });\r\n                    }\r\n                }\r\n\r\n                /**\r\n\t\t\t\t * Notifies about failure while loading invoice data\r\n\t\t\t\t */\r\n                function invoiceRejected() {\r\n                    removeSpinner();\r\n                    notificationHandler.showError('EINVOICING.PORTAL.INVOICES.EDITOR.COULD_NOT_LOAD_INVOICE',\r\n                        parameterToGetInvoice);\r\n                    goBack();\r\n                }\r\n            }\r\n\r\n            function _onSupplierSelected(selectedSupplier) {\r\n                showSpinner();\r\n                vm.supplier = selectedSupplier;\r\n                \r\n                vm.invoice.supplierPartyId = selectedSupplier.partyId;\r\n\r\n                setIdentifiers(true, false, true);\r\n\r\n                var currentUserId = authenticationData.userData.userId;\r\n\r\n                var promises = [];\r\n\r\n                var allocatedPartiesPromise = partyProxy.\r\n                    getAllUserWorkingForRelatedAllocatedToParties(currentUserId, [vm.supplier.partyId]).\r\n                    then(partiesResolved, partiesRejected);\r\n\r\n                var supplierContactsPromise = setSupplierContacts();\r\n\r\n                promises.push(allocatedPartiesPromise);\r\n                promises.push(supplierContactsPromise);\r\n\r\n                $q.all(promises).then(function() {\r\n                    if (scope.invoiceForm) {\r\n                        scope.invoiceForm.$setPristine();\r\n                    }\r\n\r\n                    if (vm.mode === 'new') {\r\n                        removeSpinner();\r\n                    }\r\n                });\r\n            }\r\n\r\n            function getContactIdentifier(contact) {\r\n                let identifier = util.isNonEmptyString(contact.email) ? contact.email : contact.name;\r\n\r\n                if (util.isUndefined(identifier)) {\r\n                    identifier = '';\r\n                }\r\n\r\n                return identifier;\r\n            }\r\n\r\n            function validateForm() {\r\n                const form = formAnalyser.getForm(angular.element('#invoiceSaveButton'));\r\n\r\n                formAnalyser.dirtyTrackedElements(form, true);\r\n\r\n                const formInstance = formAnalyser.getFormInstance(scope);\r\n\r\n                if (formInstance) {\r\n                    formInstance.$setSubmitted(true);\r\n                }\r\n            }\r\n\r\n            function setResource(\r\n                propertyName,\r\n                partyId,\r\n                getList,\r\n                getMatch,\r\n                getIdentifier,\r\n                getValid,\r\n                formatItem,\r\n                formatDisplayName,\r\n                allowDefaultOptions,\r\n                proxyParam) {\r\n                let fromInvoice = vm[propertyName + 'FromInvoice'];\r\n\r\n                if (util.isUndefined(fromInvoice)) {\r\n                    fromInvoice = {};\r\n                }\r\n\r\n                fromInvoice.identifier = getIdentifier(fromInvoice);\r\n\r\n                var promise = getList(partyId, proxyParam).then((data) => {\r\n                    var array = [];\r\n\r\n                    var fromInvoiceIsValid = getValid(fromInvoice);\r\n                    var match = 'none';\r\n                    const labelModified = translator.instantTranslate(\"EINVOICING.PORTAL.INVOICES.EDITOR.MODIFIED\");\r\n\r\n                    var selectedResource = undefined;\r\n                    vm[propertyName + 's'] = [];\r\n                    vm[propertyName + 'Selected'] = {};\r\n\r\n                    _.each(data,\r\n                        (item) => {\r\n                            let formatted = formatItem(item);\r\n                            formatted.displayName = formatDisplayName(formatted, false);\r\n\r\n                            if (fromInvoiceIsValid && match === 'none') {\r\n                                match = getMatch(formatted, fromInvoice);\r\n\r\n                                switch (match) {\r\n                                case 'partial':\r\n                                    fromInvoice.modified = labelModified;\r\n                                    fromInvoice.displayName = formatDisplayName(fromInvoice, true);\r\n                                    fromInvoice.party = formatted.party;\r\n                                    array.push(fromInvoice);\r\n                                    selectedResource = fromInvoice;\r\n                                    array.push(formatted);\r\n                                    break;\r\n                                case 'exact':\r\n                                    selectedResource = formatted;\r\n                                default:\r\n                                    array.push(formatted);\r\n                                    break;\r\n                                }\r\n                            } else {\r\n                                array.push(formatted);\r\n                            }\r\n                        });\r\n\r\n                    if (fromInvoiceIsValid && match === 'none') {\r\n                        fromInvoice.modified = labelModified;\r\n                        fromInvoice.displayName = formatDisplayName(fromInvoice, true);\r\n                        fromInvoice.party = vm.customer;\r\n                        array.unshift(fromInvoice);\r\n                        selectedResource = fromInvoice;\r\n                    }\r\n\r\n                    if (allowDefaultOptions) {\r\n                        setDefaultOptions(array);\r\n                    }\r\n\r\n                    if (util.isUndefined(selectedResource)) {\r\n                        selectedResource = array[0];\r\n                    }\r\n\r\n                    vm[propertyName + 's'] = array;\r\n                    vm[propertyName + 'Selected'] = selectedResource;\r\n                },\r\n                () => {});\r\n\r\n                return promise;\r\n\r\n                function setDefaultOptions(options) {\r\n                    const none = {\r\n                        id: -1,\r\n                        showLabel: true,\r\n                        label: \"[None]\"\r\n                    };\r\n\r\n                    options.unshift(none);\r\n                }\r\n            }\r\n\r\n            function getContactMatch(contact1, contact2) {\r\n                var match = 'none';\r\n\r\n                contact1.identifier = getContactIdentifier(contact1);\r\n                contact2.identifier = getContactIdentifier(contact2);\r\n\r\n                if (contact1.identifier === contact2.identifier) {\r\n                    match = 'partial';\r\n\r\n                    const compare1 = _.pick(\r\n                        contact1,\r\n                        'name',\r\n                        'email',\r\n                        'telephoneNumber',\r\n                        'fax',\r\n                        'reference');\r\n                    const compare2 = _.pick(\r\n                        contact2,\r\n                        'name',\r\n                        'email',\r\n                        'telephoneNumber',\r\n                        'fax',\r\n                        'reference');\r\n\r\n                    if (_.isMatch(compare1, compare2) === true) {\r\n                        match = 'exact';\r\n                    }\r\n                }\r\n\r\n                return match;\r\n            }\r\n            \r\n            function isContactValid(contact) {\r\n                return util.isDefined(contact) &&\r\n                (\r\n                    util.isNonEmptyString(contact.name) ||\r\n                        util.isNonEmptyString(contact.email) ||\r\n                        util.isNonEmptyString(contact.telephoneNumber) ||\r\n                        util.isNonEmptyString(contact.fax) ||\r\n                        util.isNonEmptyString(contact.reference));\r\n            }\r\n\r\n            function formatContact(contact) {\r\n                let formatted = {\r\n                    party : contact.party\r\n                };\r\n                util.extend(formatted, contact.resource);\r\n                 \r\n                return formatted;\r\n            }\r\n\r\n            function formatContactDisplayName(contact, addModifiedSuffix) {\r\n                var output = '';\r\n                var hasName = false;\r\n                if (util.isNonEmptyString(contact.name)) {\r\n                    hasName = true;\r\n                    output += contact.name + ' ';\r\n                }\r\n\r\n                var s = '[';\r\n                var e = ']';\r\n\r\n\r\n                if (util.isNonEmptyString(contact.email)) {\r\n                    if (!hasName) {\r\n                        s = '';\r\n                        e = '';\r\n                    }\r\n                    output += `${s}${contact.email}${e} `;\r\n                }\r\n\r\n                if (addModifiedSuffix) {\r\n                    output += contact.modified;\r\n                }\r\n\r\n                return output;\r\n            }\r\n\r\n            function setSupplierContacts() {\r\n                return setResource(\r\n                    'supplierContact',\r\n                    vm.supplier.partyId,\r\n                    getContacts,\r\n                    getContactMatch,\r\n                    getContactIdentifier,\r\n                    isContactValid,\r\n                    formatContact,\r\n                    formatContactDisplayName,\r\n                    true,\r\n                    {\r\n                        forPartyId: vm.supplier.partyId,\r\n                        sortBy: 1\r\n                    });\r\n            }\r\n\r\n\r\n            function setCustomerContacts() {\r\n                return setResource(\r\n                    'customerContact',\r\n                    vm.customer.partyId,\r\n                    getContacts,\r\n                    getContactMatch,\r\n                    getContactIdentifier,\r\n                    isContactValid,\r\n                    formatContact,\r\n                    formatContactDisplayName,\r\n                    true,\r\n                    {\r\n                        forPartyId: vm.supplier.partyId,\r\n                        sortBy: 1\r\n                    });\r\n            }\r\n\r\n            function setCustomerBillToLocations() {\r\n                return setResource(\r\n                    'customerBillToLocation',\r\n                    vm.customer.partyId,\r\n                    getAddresses,\r\n                    getAddressMatch,\r\n                    getAddressIdentifier,\r\n                    isAddressIsValid,\r\n                    formatBusinessAddress,\r\n                    formatAddressDisplayName,\r\n                    false,\r\n                    {\r\n                        types: [\r\n                            CLIENT_ENUMS.locationType.Business,\r\n                            CLIENT_ENUMS.locationType.Accounting\r\n                        ],\r\n                        forPartyId : vm.supplier.partyId,\r\n                        sortBy : 1\r\n                    });\r\n            }\r\n\r\n            function getContacts(partyId, options) {\r\n                const promise = contactProxy.\r\n                    getContactBook(partyId, options.forPartyId, (options.sortBy || {}).value || options.sortBy).\r\n                    then((data) => {\r\n                        return data;\r\n                    });\r\n\r\n                return promise;\r\n            }\r\n\r\n            function getAddresses(partyId, options) {\r\n                const promise = locationProxy.\r\n                    getAddressBook(partyId, options.forPartyId, (options.sortBy || {}).value || options.sortBy).\r\n                    then((data) => {\r\n                        return _.filter(data, (item) => {\r\n                            return  _.contains(options.types, item.resource.locationType);\r\n                        });\r\n                    });\r\n\r\n                return promise;\r\n            }\r\n\r\n            function setCustomerDeliveryLocations() {\r\n                return setResource(\r\n                    'customerDeliveryLocation',\r\n                    vm.customer.partyId,\r\n                    getAddresses,\r\n                    getAddressMatch,\r\n                    getAddressIdentifier,\r\n                    isAddressIsValid,\r\n                    formatAddress,\r\n                    formatAddressDisplayName,\r\n                    true,\r\n                    {\r\n                        types: [\r\n                            CLIENT_ENUMS.locationType.Delivery\r\n                        ],\r\n                        forPartyId : vm.supplier.partyId,\r\n                        sortBy : 1\r\n                    });\r\n            }\r\n\r\n            function getAddressMatch(address1, address2) {\r\n                var match = 'none';\r\n                \r\n                if (util.isUndefined(address1) || util.isUndefined(address2)) {\r\n                    return match;\r\n                }\r\n\r\n                address1.identifier = getAddressIdentifier(address1);\r\n                address2.identifier = getAddressIdentifier(address2);\r\n\r\n                address1.reference = getAddressReference(address1);\r\n                address2.reference = getAddressReference(address2);\r\n\r\n                if (address1.identifier === address2.identifier) {\r\n                    match = 'partial';\r\n\r\n                    const compare1 = _.pick(\r\n\t                    address1,\r\n\t                    'addressLine1',\r\n\t                    'addressLine2',\r\n\t                    'addressTown',\r\n\t                    'code',\r\n\t                    'county',\r\n\t                    'postCode',\r\n                        'reference');\r\n                   \r\n                    const compare2 = _.pick(\r\n                        address2,\r\n                        'addressLine1',\r\n                        'addressLine2',\r\n                        'addressTown',\r\n                        'code',\r\n                        'county',\r\n                        'postCode',\r\n                        'reference');\r\n                    \r\n                    if (_.isMatch(compare1, compare2) === true) {\r\n                        match = 'exact';\r\n                    }\r\n                }\r\n\r\n                return match;\r\n            }\r\n\r\n            function isAddressIsValid(address) {\r\n                return util.isDefined(address) &&\r\n                (\r\n                    util.isNonEmptyString(address.name) ||\r\n                        util.isNonEmptyString(address.addressLine1) ||\r\n                        util.isNonEmptyString(address.postCode));\r\n            }\r\n\r\n            function getAddressIdentifier(address) {\r\n                if (util.isUndefined(address)) {\r\n                    return \"\";\r\n                }\r\n                \r\n                const array = [\r\n                    address.name,\r\n                    address.addressLine1,\r\n                    address.postCode\r\n                ];\r\n\r\n                const parameters = _.filter(array, (item) => {\r\n                    return util.isNonEmptyString(item);\r\n                });\r\n\r\n                const addressDetailsIdentifier = parameters.join(' ');\r\n\r\n                if (address.locationType !== CLIENT_ENUMS.locationType.delivery) {\r\n                    return util.isNonEmptyString(address.locationIdentifier)\r\n                        ? address.locationIdentifier\r\n                        : addressDetailsIdentifier;\r\n                }\r\n\r\n                return addressDetailsIdentifier;\r\n            }\r\n\r\n            function getAddressReference(address) {\r\n                if (!util.isNullOrUndefined(address.locationIdentifier)) {\r\n                    return address.locationIdentifier.identifier;\r\n                }\r\n\r\n                return '';\r\n            }\r\n\r\n            function formatBusinessAddress(address) {\r\n                let formatted = formatAddress(address);\r\n                formatted.locationIdentifier = null;\r\n\r\n                return formatted;\r\n            }\r\n\r\n            function formatAddress(address) {\r\n                let formatted = {\r\n                    id: address.resource.id,\r\n                    locationId: address.resource.id,\r\n                    name: address.resource.name,\r\n                    addressLine1:address.resource.line1,\r\n                    addressLine2: address.resource.line2,\r\n                    town: address.resource.town,\r\n                    county: address.resource.county,\r\n                    postCode: address.resource.postCode\r\n                };\r\n\r\n                if (address.resource.locationType === CLIENT_ENUMS.locationType.Delivery) {\r\n                    formatted.locationIdentifier = identifierFactory.\r\n                        create(address.resource.locationIdentifierScheme,\r\n                            address.resource.locationIdentifierSchemeId,\r\n                            address.resource.locationIdentifier);\r\n                }\r\n\r\n                if (util.isDefined(address.resource.countryId)) {\r\n                    let country = getCountryById(address.resource.countryId);\r\n\r\n                    if (util.isDefined(country)) {\r\n                        formatted.country = country;\r\n                        formatted.countryName = country.name;\r\n                    }\r\n                }\r\n\r\n                formatted.party = address.party;\r\n\r\n                return formatted;\r\n            }\r\n\r\n            function formatAddressDisplayName(address, addModifiedSuffix) {\r\n                if (util.isUndefined(address)) {\r\n                    return \"\";\r\n                }\r\n                \r\n                var output = '';\r\n                var hasName = false;\r\n                if (util.isNonEmptyString(address.name)) {\r\n                    hasName = true;\r\n                    output += address.name;\r\n                }\r\n\r\n                const s = hasName ? ' - ' : '';\r\n                \r\n                if (util.isObject(address.locationIdentifier)) {\r\n                    \r\n                    output += `${s}${address.locationIdentifier.displayValue}`;\r\n                }\r\n                else if (util.isNonEmptyString(address.locationIdentifier)) {\r\n                    output += `${s}${address.locationIdentifier}`;\r\n                }\r\n\r\n                var countryName = '';\r\n\r\n                if (util.isNonEmptyString(address.countryName)) {\r\n                    countryName = address.countryName;\r\n                } else {\r\n                    var country = getCountryById(address.countryId);\r\n                    if (util.isDefined(country)) {\r\n                        countryName = country.name;\r\n                    }\r\n                }\r\n                \r\n                const array = [\r\n                    output,\r\n                    address.addressLine1,\r\n                    address.town,\r\n                    address.postCode,\r\n                    address.county,\r\n                    countryName\r\n                ];\r\n\r\n                const parameters = _.filter(array, (item) => {\r\n                    return util.isNonEmptyString(item);\r\n                });\r\n\r\n                let addressDetails = parameters.join(', ');\r\n                \r\n                if (addModifiedSuffix) {\r\n                    addressDetails += address.modified + ' ';\r\n                }\r\n\r\n                return addressDetails;\r\n            }\r\n\r\n            function partiesResolved(data) {\r\n                guard.throwIfNotArray(\"EUP0801E\", data, \"data\");\r\n                \r\n                var companies = [];\r\n\r\n                _.each(data,\r\n                    function(item) {\r\n                        item.party.partyId = item.partyId;\r\n                        companies.push(item.party);\r\n                    });\r\n\r\n                vm.allocatedCompanies = companies;\r\n                \r\n                const foundCustomer = _.find(vm.allocatedCompanies,\r\n                    function(item) {\r\n                        return item.id === vm.invoice.customerPartyId;\r\n                    });\r\n\r\n                if (util.isDefined(foundCustomer)) {\r\n                    onCustomerSelected(foundCustomer);\r\n                }\r\n                if (vm.mode === 'new') {\r\n                    removeSpinner();\r\n                }\r\n            }\r\n\r\n            function partiesRejected(error) {\r\n                removeSpinner();\r\n                notificationHandler.showError(error.failureReason);\r\n            }\r\n\r\n            function onCustomerSelected(selectedCustomer) {\r\n                if (util.isDefined(vm.currentBillTo) && vm.currentBillTo.partyId === selectedCustomer.partyId) {\r\n                    return;\r\n                }\r\n\r\n                if (util.isDefined(vm.currentBillTo)) {\r\n                    resetCustomerSpecificDetails();\r\n                }\r\n\r\n                showSpinner();\r\n                vm.customer = selectedCustomer;\r\n                vm.currentBillTo = selectedCustomer;\r\n\r\n                vm.invoice.customerPartyId = selectedCustomer.partyId;\r\n                \r\n                const contactsPromise = setCustomerContacts();\r\n                const billToLocationsPromise = setCustomerBillToLocations();\r\n                const deliveryLocationsPromise = setCustomerDeliveryLocations();\r\n\r\n                $q.all([contactsPromise, billToLocationsPromise, deliveryLocationsPromise]).then(() => {\r\n                    setCustomerDetails();\r\n                }).finally(() => {\r\n                    scope.loaded = true;\r\n                });\r\n            }\r\n\r\n            function resetCustomerSpecificDetails() {\r\n                vm.customerBillToLocationSelected = undefined;\r\n                vm.customerBillToLocationFromInvoice = undefined;\r\n                vm.buyerEndpointIdentifier = undefined;\r\n                vm.accountingCustomerEndpointIdentifier = undefined;\r\n                vm.buyerCustomerLegalCompanyReference = undefined;\r\n                vm.accountingCustomerLegalCompanyReference = undefined;\r\n                vm.customerVatNumber = undefined;\r\n                vm.accountingCustomerVatNumber = undefined;\r\n\r\n                vm.invoice.buyerEndpointIdentifierScheme = undefined;\r\n                vm.invoice.buyerEndpointIdentifierSchemeId = undefined;\r\n                vm.invoice.buyerEndpointIdentifier = undefined;\r\n\r\n                vm.invoice.accountingCustomerEndpointIdentifierScheme = undefined;\r\n                vm.invoice.accountingCustomerEndpointIdentifierSchemeId = undefined;\r\n                vm.invoice.accountingCustomerEndpointIdentifier = undefined;\r\n\r\n                vm.invoice.customerVatNumberScheme = '';\r\n                vm.invoice.customerVatNumberSchemeId = undefined;\r\n                vm.invoice.customerVatNumber = undefined;\r\n\r\n                vm.invoice.accountingCustomerVatNumberScheme = '';\r\n                vm.invoice.accountingCustomerVatNumberSchemeId = undefined;\r\n                vm.invoice.accountingCustomerVatNumber = undefined;\r\n\r\n                vm.invoice.buyerCustomerLegalCompanyReferenceScheme = '';\r\n                vm.invoice.buyerCustomerLegalCompanyReferenceSchemeId = undefined;\r\n                vm.invoice.buyerCustomerLegalCompanyReference = undefined;\r\n\r\n                vm.invoice.accountingCustomerCustomerLegalCompanyReferenceScheme = '';\r\n                vm.invoice.accountingCustomerCustomerLegalCompanyReferenceSchemeId = undefined;\r\n                vm.invoice.accountingCustomerCustomerLegalCompanyReference = undefined;\r\n\r\n                vm.invoice.buyerCustomerLegalRegistrationName = undefined;\r\n                vm.invoice.accountingCustomerLegalRegistrationName = undefined;\r\n            }\r\n\r\n            function setCustomerDetails() {\r\n                setCurrencyFromBusinessAddress();\r\n\r\n                var setForAccounting = false;\r\n                var setForBuyer = true;\r\n\r\n                if (vm.customerBillToLocationSelected \r\n\t\t\t\t\t&& vm.customerBillToLocationSelected.party \r\n\t\t\t\t\t&& vm.customerBillToLocationSelected.party.isAccountingCustomer) {\r\n                    setForAccounting = true;\r\n                    setForBuyer = false;\r\n\r\n                    vm.accountingCustomer = vm.customerBillToLocationSelected.party;\r\n                }\r\n\r\n                const identifiersPromise = setIdentifiers(false, setForBuyer, false, setForAccounting);\r\n                 \r\n                const propertyFieldsPromise = invoiceProxy.getVisiblePropertyFieldsForBuyer(vm.customer.partyId);\r\n\r\n                $q.all([identifiersPromise,propertyFieldsPromise]).then((data) => {\r\n                    removeSpinner();\r\n\r\n                    populateCustomPropertyFields(data[1]);\r\n\r\n                    if (vm.invoice.clientEInvoicingState === CLIENT_ENUMS.documentStateKey.invalidDraft ||\r\n                       vm.invoice.clientEInvoicingState === CLIENT_ENUMS.documentStateKey.invalid) {\r\n                        validateForm();\r\n                    }\r\n                });\r\n            }\r\n            \r\n            function setCurrencyFromBusinessAddress() {\r\n                if (vm.customerBillToLocationSelected && vm.customerBillToLocationSelected.country) {\r\n                    vm.invoice.currencyId = vm.customerBillToLocationSelected.country.currencyId;\r\n                    setCurrency(vm.invoice.currencyId);\r\n                }\r\n\r\n                validateCurrency(vm.invoice.currencyId);\r\n            }\r\n\r\n            function updateModelReadyForServer() {\r\n                if (!util.isDefined(vm.invoice.id) || vm.invoice.id <= 0) {\r\n                    vm.invoice.createdDateTime = new Date();\r\n                    vm.invoice.createdByUserId = authenticationData.userData.userId;\r\n                    vm.invoice.documentType = CLIENT_ENUMS.documentType.invoice;\r\n                    vm.invoice.documentSource = CLIENT_ENUMS.documentSource.websiteUser;\r\n\r\n                    vm.invoice.taxCurrencyId = vm.invoice.currencyId;\r\n                }\r\n\r\n                vm.invoice.lastDocumentSource = CLIENT_ENUMS.documentSource.websiteUser;\r\n                vm.invoice.lastModifiedDateTime = new Date();\r\n                vm.invoice.lastModifiedByUserId = authenticationData.userData.userId;\r\n                vm.invoice.totalLineAmounts = vm.totals.beforeTax;\r\n                vm.invoice.totalExcludingTax = vm.totals.beforeTax;\r\n                vm.invoice.totalTax = vm.totals.totalTax;\r\n                vm.invoice.totalIncludingTax = vm.totals.total;\r\n                vm.invoice.amountPayable = vm.totals.total;\r\n\r\n                updateSupplierCode();\r\n\r\n                updateCustomerCode();\r\n\r\n                updateAccountingCustomer();    \r\n\r\n                updateAddressDetails();\r\n\r\n                updateContactDetails();\r\n\r\n                _.each(vm.invoice.lines,\r\n                    function(line) {\r\n                        line.netAmount = calculateLineNet(line);\r\n                        line.taxAmount = invoiceTotalsCalculator.calculateTaxForLine(line);\r\n                    });\r\n\r\n                vm.invoice.taxBreakdown = vm.totals.taxBreakdown;\r\n\r\n                mapTaxExemptionReason();\r\n\r\n                return;\r\n\r\n                function updateAccountingCustomer() {\r\n                    if (vm.usingAccounting === true) {\r\n                        updateAccountingAddress();\r\n                        updateAccountingIdentifiers();\r\n                    } else {\r\n                        clearAccountingDetails();\r\n                    }\r\n\r\n                    return;\r\n\r\n                    function clearAccountingDetails() {\r\n                        vm.invoice.accountingCustomerPartyId = undefined;\r\n                        vm.invoice.accountingCustomerName = undefined;\r\n                        vm.invoice.accountingCustomerLocationId = undefined;\r\n                        vm.invoice.accountingCustomerAddressName = undefined;\r\n                        vm.invoice.accountingCustomerAddressLine1 = undefined;\r\n                        vm.invoice.accountingCustomerAddressLine2 = undefined;\r\n                        vm.invoice.accountingCustomerAddressTown = undefined;\r\n                        vm.invoice.accountingCustomerAddressCounty = undefined;\r\n                        vm.invoice.accountingCustomerPostCode = undefined;\r\n                        vm.invoice.accountingCustomerCountry = undefined;\r\n                        vm.invoice.accountingCustomerLocationIdentifier = undefined;\r\n\r\n                        vm.invoice.accountingCustomerCode = undefined;\r\n                        vm.invoice.accountingCustomerCodeScheme = undefined;\r\n                        vm.invoice.accountingCustomerCodeSchemeId = undefined;\r\n\r\n                        vm.invoice.accountingCustomerEndpointIdentifier = undefined;\r\n                        vm.invoice.accountingCustomerEndpointIdentifierScheme = undefined;\r\n                        vm.invoice.accountingCustomerEndpointIdentifierSchemeId = undefined;\r\n\r\n                        vm.invoice.accountingCustomerVatNumber = undefined;\r\n                        vm.invoice.accountingCustomerVatNumberScheme = undefined;\r\n                        vm.invoice.accountingCustomerVatNumberSchemeId = undefined;\r\n\r\n                        vm.invoice.accountingCustomerLegalCompanyReference = undefined;\r\n                        vm.invoice.accountingCustomerLegalCompanyReferenceScheme = undefined;\r\n                        vm.invoice.accountingCustomerLegalCompanyReferenceSchemeId = undefined;\r\n\r\n                        vm.invoice.accountingCustomerLegalName = undefined;\r\n                    }\r\n\r\n                    function updateAccountingAddress() {\r\n                        vm.invoice.accountingCustomerPartyId = vm.customerBillToLocationSelected.party.id;\r\n                        vm.invoice.accountingCustomerName = vm.customerBillToLocationSelected.party.name;\r\n                        vm.invoice.accountingCustomerLocationId = vm.customerBillToLocationSelected.locationId;\r\n                        vm.invoice.accountingCustomerAddressName = vm.customerBillToLocationSelected.name;\r\n                        vm.invoice.accountingCustomerAddressLine1 = vm.customerBillToLocationSelected.addressLine1;\r\n                        vm.invoice.accountingCustomerAddressLine2 = vm.customerBillToLocationSelected.addressLine2;\r\n                        vm.invoice.accountingCustomerAddressTown = vm.customerBillToLocationSelected.town;\r\n                        vm.invoice.accountingCustomerAddressCounty = vm.customerBillToLocationSelected.county;\r\n                        vm.invoice.accountingCustomerPostCode = vm.customerBillToLocationSelected.postCode;\r\n\r\n                        if (util.hasValue(vm.customerBillToLocationSelected.country)) {\r\n                            vm.invoice.accountingCustomerCountry = vm.customerBillToLocationSelected.country.code;\r\n                        }\r\n\r\n                        vm.invoice.accountingCustomerLocationIdentifier = vm.customerBillToLocationSelected.\r\n                            locationIdentifier;\r\n                    }\r\n\r\n                    function updateAccountingIdentifiers() {\r\n                        updateAccountingCustomerCode();\r\n                        updateAccountingCustomerEndpoint();\r\n                        updateAccountingCustomerVatNumber();\r\n\r\n                        return;\r\n\r\n                        function updateAccountingCustomerCode() {\r\n                            const item = vm.customerCode;\r\n\r\n                            if (util.isDefined(item) && util.isNonEmptyString(item.identifier)) {\r\n                                vm.invoice.accountingCustomerCode = item.code;\r\n                                vm.invoice.accountingCustomerCodeScheme = item.scheme;\r\n                                vm.invoice.accountingCustomerCodeSchemeId = item.schemeId;\r\n                            }\r\n                        }\r\n\r\n                        function updateAccountingCustomerEndpoint() {\r\n                            const item = vm.accountingCustomerEndpointIdentifier;\r\n\r\n                            if (util.isDefined(item) && util.isNonEmptyString(item.identifier)) {\r\n                                vm.invoice.accountingCustomerEndpointIdentifier = item.code;\r\n                                vm.invoice.accountingCustomerEndpointIdentifierScheme = item.scheme;\r\n                                vm.invoice.accountingCustomerEndpointIdentifierSchemeId = item.schemeId;\r\n                            }\r\n                        }\r\n\r\n                        function updateAccountingCustomerVatNumber() {\r\n                            const item = vm.accountingCustomerVatNumber;\r\n\r\n                            if (util.isDefined(item) && util.isNonEmptyString(item.identifier)) {\r\n                                vm.invoice.accountingCustomerVatNumber = item.code;\r\n                                vm.invoice.accountingCustomerVatNumberScheme = item.scheme;\r\n                                vm.invoice.accountingCustomerVatNumberSchemeId = item.schemeId;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function updateSupplierCode() {\r\n                    const item = vm.supplierCode;\r\n\r\n                    if (util.isDefined(item) && util.isNonEmptyString(item.identifier)) {\r\n                        vm.invoice.supplierCode = item.code;\r\n                        vm.invoice.supplierCodeScheme = item.scheme;\r\n                        vm.invoice.supplierCodeSchemeId = item.schemeId;\r\n                    }\r\n                }\r\n\r\n                function updateCustomerCode() {\r\n                    const item = vm.customerCode;\r\n\r\n                    if (util.isDefined(item) && util.isNonEmptyString(item.identifier)) {\r\n                        vm.invoice.customerCode = item.code;\r\n                        vm.invoice.customerCodeScheme = item.scheme;\r\n                        vm.invoice.customerCodeSchemeId = item.schemeId;\r\n                    }\r\n                }\r\n\r\n                function updateAddressDetails() {\r\n                    if (util.isDefined(vm.customerBillToLocationSelected)) {\r\n                        vm.invoice.invoiceLocationId = vm.customerBillToLocationSelected.locationId;\r\n                        vm.invoice.addressName = vm.customerBillToLocationSelected.name;\r\n                        vm.invoice.addressLine1 = vm.customerBillToLocationSelected.addressLine1;\r\n                        vm.invoice.addressLine2 = vm.customerBillToLocationSelected.addressLine2;\r\n                        vm.invoice.addressTown = vm.customerBillToLocationSelected.town;\r\n                        vm.invoice.addressCounty = vm.customerBillToLocationSelected.county;\r\n                        vm.invoice.postCode = vm.customerBillToLocationSelected.postCode;\r\n\r\n                        if (util.hasValue(vm.customerBillToLocationSelected.country)) {\r\n                            vm.invoice.country = vm.customerBillToLocationSelected.country.code;\r\n                        }\r\n                        vm.invoice.locationIdentifier = vm.customerBillToLocationSelected.locationIdentifier;\r\n                    }\r\n\r\n                    if (util.isDefined(vm.customerDeliveryLocationSelected)) {\r\n                        vm.invoice.deliveryLocationId = vm.customerDeliveryLocationSelected.locationId;\r\n                        vm.invoice.deliveryAddressName = vm.customerDeliveryLocationSelected.name;\r\n                        vm.invoice.deliveryAddressLine1 = vm.customerDeliveryLocationSelected.addressLine1;\r\n                        vm.invoice.deliveryAddressLine2 = vm.customerDeliveryLocationSelected.addressLine2;\r\n                        vm.invoice.deliveryAddressTown = vm.customerDeliveryLocationSelected.town;\r\n                        vm.invoice.deliveryAddressCounty = vm.customerDeliveryLocationSelected.county;\r\n                        if (util.hasValue(vm.customerDeliveryLocationSelected.country)) {\r\n                            vm.invoice.deliveryCountry = vm.customerDeliveryLocationSelected.country.code;\r\n                        }\r\n                        vm.invoice.deliveryPostCode = vm.customerDeliveryLocationSelected.postCode;\r\n\r\n                        if (util.isDefined(vm.customerDeliveryLocationSelected.locationIdentifier)) {\r\n                            vm.invoice.deliveryLocationIdentifier = vm.customerDeliveryLocationSelected.locationIdentifier.code;\r\n                            vm.invoice.deliveryLocationIdentifierScheme = vm.customerDeliveryLocationSelected.locationIdentifier.scheme;\r\n                            vm.invoice.deliveryLocationIdentifierSchemeId = vm.customerDeliveryLocationSelected.locationIdentifier.schemeId;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function updateContactDetails() {\r\n                    if (util.isDefined(vm.selectedSupplierContact)) {\r\n                        vm.invoice.billFromContactId = vm.selectedSupplierContact.contactId;\r\n                        vm.invoice.billFromContactName = vm.selectedSupplierContact.name;\r\n                        vm.invoice.billFromContactTelephone = vm.selectedSupplierContact.telephoneNumber;\r\n                        vm.invoice.billFromContactFax = vm.selectedSupplierContact.fax;\r\n                        vm.invoice.billFromContactEmail = vm.selectedSupplierContact.email;\r\n                        vm.invoice.billFromContactReference = vm.selectedSupplierContact.reference;\r\n                    }\r\n\r\n                    if (util.isDefined(vm.selectedCustomerContact)) {\r\n                        vm.invoice.billToContactId = vm.selectedCustomerContact.contactId;\r\n                        vm.invoice.billToContactName = vm.selectedCustomerContact.name;\r\n                        vm.invoice.billToContactTelephone = vm.selectedCustomerContact.telephoneNumber;\r\n                        vm.invoice.billToContactFax = vm.selectedCustomerContact.fax;\r\n                        vm.invoice.billToContactEmail = vm.selectedCustomerContact.email;\r\n                        vm.invoice.billToContactReference = vm.selectedCustomerContact.reference;\r\n                    }\r\n                }\r\n            }\r\n            \r\n            function setSupplierLegalCountry(code) {\r\n                var country = getCountryByCode(code, false);\r\n\r\n                if (util.hasValue(country)) {\r\n                    vm.supplierLegalCountryId = country.id;\r\n                }\r\n            }\r\n\r\n            function getCountryByCode(code, setDefault) {\r\n                var country = _.find(vm.countries,\r\n                    function(country) {\r\n                        return country.code === code;\r\n                    });\r\n\r\n                if (util.isUndefined(country)) {\r\n                    country = _.find(vm.countries,\r\n                        function(country) {\r\n                            return country.name === code;\r\n                        });\r\n                }\r\n\r\n                if (setDefault) {\r\n                    if (util.isUndefined(country)) {\r\n                        country = _.find(vm.countries,\r\n                            function(country) {\r\n                                return country.code === \"GB\";\r\n                            });\r\n                    }\r\n\r\n                    if (util.isUndefined(country)) {\r\n                        country = vm.countries[0];\r\n                    }\r\n                }\r\n\r\n                return country;\r\n            }\r\n\r\n            function getCountryById(id) {\r\n                var country = _.find(vm.countries,(country) => {\r\n                    return country.id === id;\r\n                });\r\n\r\n                return country;\r\n            }\r\n\r\n            function setCurrency(currencyId) {\r\n                vm.invoice.currencyId = currencyId;\r\n                vm.invoice.taxCurrencyId = currencyId;\r\n\r\n                notifyInvoiceDetailsChangeSubscribers({\r\n                    currencyId: currencyId\r\n                });\r\n            }\r\n\r\n            function validateCurrency(currencyId) {\r\n                var enabledCurrency = _.find(vm.currencies,\r\n                    function(item) {\r\n                        return item.id === currencyId;\r\n                    });\r\n\r\n                if (util.isUndefined(enabledCurrency)) {\r\n                    vm.invoice.currencyId = 157; // DEFAULT �\r\n                }\r\n            }\r\n\r\n            function populateCustomPropertyFields(data) {\r\n                vm.propertyFields = [];\r\n                var invoicePropertyKeyValueArray = _.pairs(vm.invoice);\r\n                var invoiceLinesPropertyKeyValueArray = [];\r\n                _.each(vm.invoice.lines,\r\n                    (line) => {\r\n                        invoiceLinesPropertyKeyValueArray.push(_.pairs(line));\r\n                    });\r\n\r\n                _.each(data,\r\n                    (item) =>{\r\n                        var customFieldSetting = _.find(vm.optionalFieldsSettings,\r\n                            (fieldSetting) => {\r\n                                return fieldSetting.clientName === item.entityPropertyClientName;\r\n                            });\r\n\r\n                        if (_.isEmpty(customFieldSetting)) {\r\n                            //use generic field\r\n                            if (item.entityTypeClientName === \"Invoice\") {\r\n                                customFieldSetting = _.find(vm.optionalFieldsSettings,\r\n                                    (fieldSetting) =>{\r\n                                        return fieldSetting.typeGroup === item.entityType;\r\n                                    });\r\n                            } else if (item.entityTypeClientName === \"InvoiceLine\") {\r\n                                customFieldSetting = _.find(vm.optionalFieldsSettings,\r\n                                    (fieldSetting) =>{\r\n                                        return fieldSetting.typeGroup === item.entityType &&\r\n                                            fieldSetting.header === \"Generic product line text box\"; //change this\r\n                                    });\r\n                            }\r\n                        }\r\n\r\n                        if (!_.isEmpty(customFieldSetting)) {\r\n\r\n                            customFieldSetting = _.clone(customFieldSetting);\r\n\r\n                            if (customFieldSetting.typeGroup > 0) {\r\n                                customFieldSetting.clientName = item.entityPropertyClientName;\r\n                                customFieldSetting.header = item.entityPropertyClientName;\r\n                                var labelValue = util.toSnakeCase(item.entityPropertyClientName).toUpperCase();\r\n\r\n                                customFieldSetting.template =\r\n                                    customFieldSetting.template.\r\n                                    replace(\"{LABEL}\",\r\n                                        \"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.\" + labelValue);\r\n\r\n                                var propertyName = item.entityPropertyClientName.charAt(0).toLowerCase() +\r\n                                    item.entityPropertyClientName.slice(1);\r\n\r\n                                //this whole section needs revising to make sure the control being populated contains the correct information\r\n                                if (item.entityTypeClientName === \"InvoiceLine\") {\r\n                                    //sets default visible settings (the value visible is handled on the line)\r\n                                    customFieldSetting = fieldIsVisible(customFieldSetting, item);\r\n                                    customFieldSetting.\r\n                                        heading = \"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.\" + labelValue;\r\n                                    customFieldSetting.model = \"line.\" + propertyName;\r\n\r\n                                    customFieldSetting.template =\r\n                                        customFieldSetting.template.\r\n                                        replace(\"{CHANGED}\", \"productLinesCtrl.onChanged()\").\r\n                                        replace(\"{VISIBLE}\", item.isVisible).\r\n                                        replace(\"{HIDDEN}\", customFieldSetting.hidden).\r\n                                        replace(/{FIELD}/g, propertyName).\r\n                                        replace(\"{MODEL}\", \"controller.invoice.invoiceLine\");\r\n                                } else if (item.entityTypeClientName === \"Invoice\") {\r\n                                    customFieldSetting.template =\r\n                                        customFieldSetting.template.\r\n                                        replace(\"{CHANGED}\", \"controller.onInvoiceChanged()\").\r\n                                        replace(/{FIELD}/g, propertyName).replace(\"{MODEL}\", \"controller.invoice\");\r\n                                }\r\n                            }\r\n\r\n                            customFieldSetting.entityTypeName = item.entityTypeClientName;\r\n\r\n                            if (item.entityTypeClientName === 'Invoice') {\r\n                                customFieldSetting = fieldIsVisible(customFieldSetting, item);\r\n\r\n                                //if the item has a value already show it in the optional fields by default\r\n                                \r\n                                const setVisibleWhenPopulated = (propertyNameAndValuePairs, propertyClientName, fieldSetting) => {\r\n                                    const propertyValue = getPropertyValue(propertyNameAndValuePairs, propertyClientName);\r\n\r\n                                    if (!util.isNullOrUndefined(propertyValue) && util.isNonEmptyString(propertyValue)) {\r\n                                        fieldSetting.visible = true;\r\n                                    }\r\n                                };\r\n\r\n                                setVisibleWhenPopulated(invoicePropertyKeyValueArray,\r\n                                    item.entityPropertyClientName,\r\n                                    customFieldSetting);\r\n\r\n                            } else if (item.entityTypeClientName === 'InvoiceLine') {\r\n                                //check through all the lines for a value similar to the above\r\n                                _.each(invoiceLinesPropertyKeyValueArray,\r\n                                    (lineKeyValueArray) =>{\r\n                                        const invoiceLineProperty = _.find(lineKeyValueArray,\r\n                                            (keyValuePair) =>{\r\n                                                return keyValuePair[0].toUpperCase() ===\r\n                                                    item.entityPropertyClientName.toUpperCase();\r\n                                            });\r\n\r\n                                        if (invoiceLineProperty) {\r\n                                            if (invoiceLineProperty[1] && invoiceLineProperty[1] !== \"\") {\r\n                                                customFieldSetting.visible = true;\r\n                                                customFieldSetting.isVisible = true;\r\n                                                customFieldSetting.isColumn = false;\r\n                                                customFieldSetting.isHidden = false;\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            }\r\n\r\n                            vm.propertyFields.push(customFieldSetting);\r\n                        }\r\n                    });\r\n            }\r\n            \r\n            /*\r\n            * Gets the value of the propertyClientName if found in the propertyNameAndValuePairs, otherwise undefined\r\n            */\r\n            function getPropertyValue(propertyNameAndValuePairs, propertyClientName) {\r\n                var propertyNameAndValue = _.find(propertyNameAndValuePairs,\r\n                    (keyValuePair) =>{\r\n                        var propertyName = keyValuePair[0];\r\n                        return propertyName.toUpperCase() === propertyClientName.toUpperCase();\r\n                    });\r\n\r\n                if (!util.isNullOrUndefined(propertyNameAndValue)) {\r\n                    return propertyNameAndValue[1];\r\n                }\r\n\r\n                return undefined;\r\n            }\r\n\r\n            /**\r\n             * states if the field should be visible mandatory, or it can be hidden\r\n             * All fields should be visible             \r\n             */\r\n            function fieldIsVisible(customFieldSetting, item) {\r\n                customFieldSetting.visible = item.isVisible;\r\n                if (item.isVisible) {\r\n                    customFieldSetting.mandatory = true;\r\n                    customFieldSetting.isHidden = false;\r\n                    customFieldSetting.isColumn = true;\r\n                } else {\r\n                    customFieldSetting.mandatory = false;\r\n                }\r\n\r\n                return customFieldSetting;\r\n            }\r\n\r\n            function setFormDirty() {\r\n                if (scope.invoiceForm) {\r\n                    scope.invoiceForm.$setDirty();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Uses the totals calculator to get the total net amount of an individual line.\r\n             */\r\n            function calculateLineNet(line) {\r\n                return invoiceTotalsCalculator.calculateLineNet(line);\r\n            }\r\n\r\n            /**\r\n             * Uses the totals calculator to get the total tax of an individual line.\r\n             */\r\n            function calculateLineTax(line) {\r\n                return invoiceTotalsCalculator.calculateLineTax(line);\r\n            }\r\n\r\n            /**\r\n             * Calls subscribers to invoice details change\r\n             */\r\n            function notifyInvoiceDetailsChangeSubscribers(notificationObject) {\r\n                for (var i = 0; i < vm.invoiceDetailsChangeSubscriptions.length; i++) {\r\n                    vm.invoiceDetailsChangeSubscriptions[i](notificationObject);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Calls subscribers to events\r\n             */\r\n            function notifyEventsSubscribers(notificationObject) {\r\n                for (var i = 0; i < vm.eventsSubscriptions.length; i++) {\r\n                    vm.eventsSubscriptions[i](notificationObject);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Sets invoice state atributes\r\n             */\r\n            function setState(stateId) {\r\n                var state = documentStateResolver.getDocumentState(stateId);\r\n                vm.invoice.clientEInvoicingState = stateId;\r\n                vm.selectedStates.fill(state);\r\n\r\n                updateCurrentState(stateId);\r\n            }\r\n\r\n            /**\r\n            * map the Tax exemption reason against the relevant tax breakdown category\r\n            */\r\n            function mapTaxExemptionReason() {\r\n                _.each(vm.invoice.taxBreakdown,\r\n                    (taxItem) =>{\r\n                        if (taxItem.taxCategory && taxItem.taxCategory.toUpperCase() === \"E\") {\r\n                            taxItem.taxExemptionReason = vm.invoice.taxExemptionReason;\r\n                        }\r\n                    });\r\n            }\r\n\r\n            /**\r\n             * sets page to dirty\r\n             */\r\n            function setDirty() {\r\n                setFormDirty();\r\n\r\n                documentAttributeResolver.removeAttribute(vm.selectedAttributes, CLIENT_ENUMS.documentAttribute.saved);\r\n                documentAttributeResolver.addAttributeById(vm.selectedAttributes,\r\n                    CLIENT_ENUMS.documentAttribute.notSaved,\r\n                    false);\r\n                \r\n                updateCurrentState();\r\n            }\r\n\r\n            /**\r\n             * sets page to clean\r\n             */\r\n            function setClean() {\r\n                documentAttributeResolver.removeAttribute(vm.\r\n                    selectedAttributes,\r\n                    CLIENT_ENUMS.documentAttribute.notSaved);\r\n                documentAttributeResolver.addAttributeById(vm.selectedAttributes,\r\n                    CLIENT_ENUMS.documentAttribute.saved,\r\n                    false);\r\n                updateCurrentState();\r\n            }\r\n\r\n            /**\r\n             * sets calculated state of invoice in edit mode\r\n             */\r\n            function updateCurrentState() {\r\n                if (vm.mode !== 'new') {\r\n                    documentStateResolver.calculateCurrentState('invoice', vm.invoice.clientEInvoicingState, true).then(\r\n                        (state) => {\r\n                            vm.currentState = state;\r\n                        });\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Adds spinner to the page\r\n             */\r\n            function showSpinner() {\r\n                if (util.isUndefined(spinner)) {\r\n                    spinner = modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Removes spinner from the page\r\n            */\r\n            function removeSpinner() {\r\n                if (spinner) {\r\n                    spinner.remove();\r\n                    spinner = undefined;\r\n                }\r\n            }\r\n            \r\n            /*\r\n             * Navigates back if possible otherwise to the invoice list\r\n             */\r\n            function goBack() {\r\n                diState.goBack().catch(() => diState.go('portal.invoices.list'));\r\n            }\r\n            \r\n            /**\r\n             * Downloads all the allowed attachments\r\n             */\r\n            function downloadAllAttachments() {\r\n                var attachmentDataIds = [];\r\n\r\n                if (attachmentDownloadValidator.\r\n                    allowDownloadMultipleFiles(vm.invoice.additionalDocumentReferences, attachmentDataIds)) {\r\n                    attachmentProxy.downloadZipFile(attachmentDataIds);\r\n                }\r\n            }\r\n            \r\n            function setIdentifiers(forSupplier, forBuyer, forOthers, forAccounting) {\r\n                return partyProxy.getEnabledSchemes().then((schemes) =>{\r\n                    var identifiers = [];\r\n                    if (forSupplier && util.isDefined(vm.supplier)) {\r\n                        identifiers = setSupplierCodes();\r\n\r\n                        var supplierEndpoints = identifiers[CLIENT_ENUMS.partyCodeType.endpoint] || [];\r\n\r\n                        var schemeOptions1 = _.clone(schemes[CLIENT_ENUMS.partyCodeType.endpoint]);\r\n\r\n                        var defaultOptions1 = getDefaultOptions(schemeOptions1,\r\n                            'supplierEndpoints',\r\n                            'supplierEndpointIdentifier');\r\n\r\n                        vm.supplierEndpoints = defaultOptions1.concat(createIdentifiersForClient(supplierEndpoints));\r\n\r\n                        setIdentifier('supplierEndpointIdentifier',\r\n                            vm.supplierEndpoints,\r\n                            vm.invoice.supplierEndpointIdentifierScheme || 'GLN',\r\n                            vm.invoice.supplierEndpointIdentifierSchemeId || 6,\r\n                            vm.invoice.supplierEndpointIdentifier,\r\n                            true,\r\n                            vm.invoice.supplierEndpointIdentifierDescription);\r\n\r\n                        var supplierVatNumbers = identifiers[CLIENT_ENUMS.partyCodeType.taxReference] || [];\r\n\r\n                        var schemeOptions2 = _.clone(schemes[CLIENT_ENUMS.partyCodeType.taxReference]);\r\n\r\n                        var defaultOptions2 = getDefaultOptions(schemeOptions2,\r\n                            'supplierVatNumbers',\r\n                            'supplierVatNumber');\r\n\r\n                        vm.supplierVatNumbers = defaultOptions2.concat(createIdentifiersForClient(supplierVatNumbers));\r\n\r\n                        setIdentifier('supplierVatNumber',\r\n                            vm.supplierVatNumbers,\r\n                            vm.invoice.supplierVatNumberScheme || 'GB:VAT',\r\n                            vm.invoice.supplierVatNumberSchemeId || 38,\r\n                            vm.invoice.supplierVatNumber);\r\n\r\n                        var schemeOptions3 = _.clone(schemes[CLIENT_ENUMS.partyCodeType.default]);\r\n\r\n                        vm.supplierLegalCompanyReferences = getDefaultOptions(schemeOptions3,\r\n                                'supplierLegalCompanyReferences',\r\n                                'supplierLegalCompanyReference');\r\n\r\n                        setIdentifier('supplierLegalCompanyReference',\r\n                            vm.supplierLegalCompanyReferences,\r\n                            vm.invoice.supplierLegalCompanyReferenceScheme || 'GLN',\r\n                            vm.invoice.supplierLegalCompanyReferenceSchemeId || 6,\r\n                            vm.invoice.supplierLegalCompanyReference);\r\n                    }\r\n\r\n                    if (forBuyer && util.isDefined(vm.customer)) {\r\n                        setSupplierCodes(vm.customer);\r\n                        vm.usingAccounting = false;\r\n\r\n                        var justCustomerCodes = _.map(vm.customer.partyCodes, item => item.code);\r\n\r\n                        if (util.isDefined(justCustomerCodes)) {\r\n                            identifiers = _.groupBy(justCustomerCodes, item => item.partyCodeType); \r\n                        }\r\n\r\n                        var customerCodes = identifiers[CLIENT_ENUMS.partyCodeType.default] || [];\r\n\r\n                        vm.customerCodes = createIdentifiersForClient(customerCodes);\r\n\r\n                        setIdentifier('customerCode',\r\n                            vm.customerCodes,\r\n                            vm.invoice.customerCodeScheme || 'GLN',\r\n                            vm.invoice.customerCodeSchemeId || 6,\r\n                            vm.invoice.customerCode,\r\n                            false);\r\n\r\n                        var buyerEndpoints = identifiers[CLIENT_ENUMS.partyCodeType.endpoint] || [];\r\n\r\n                        var schemeOptions4 = _.clone(schemes[CLIENT_ENUMS.partyCodeType.endpoint]);\r\n\r\n                        var defaultOptions3 = getDefaultOptions(schemeOptions4,\r\n                            'buyerEndpoints',\r\n                            'buyerEndpointIdentifier');\r\n\r\n                        vm.buyerEndpoints = defaultOptions3.concat(createIdentifiersForClient(buyerEndpoints));\r\n\r\n                        setIdentifier('buyerEndpointIdentifier',\r\n                            vm.buyerEndpoints,\r\n                            vm.invoice.buyerEndpointIdentifierScheme || 'GLN',\r\n                            vm.invoice.buyerEndpointIdentifierSchemeId || 6,\r\n                            vm.invoice.buyerEndpointIdentifier,\r\n                            true,\r\n                            vm.invoice.buyerEndpointIdentifierDescription);\r\n\r\n                        var buyerVatNumbers = identifiers[CLIENT_ENUMS.partyCodeType.taxReference] || [];\r\n\r\n                        var schemeOptions5 = _.clone(schemes[CLIENT_ENUMS.partyCodeType.taxReference]);\r\n\r\n                        var defaultOptions4 = getDefaultOptions(schemeOptions5,\r\n                            'buyerVatNumbers',\r\n                            'customerVatNumber');\r\n\r\n                        vm.buyerVatNumbers = defaultOptions4.concat(createIdentifiersForClient(buyerVatNumbers));\r\n\r\n                        setIdentifier('customerVatNumber',\r\n                            vm.buyerVatNumbers,\r\n                            vm.invoice.customerVatNumberScheme || 'GB:VAT',\r\n                            vm.invoice.customerVatNumberSchemeId || 38,\r\n                            vm.invoice.customerVatNumber);\r\n                        \r\n                        var schemeOptions6 = _.clone(schemes[CLIENT_ENUMS.partyCodeType.default]);\r\n\r\n                        var defaultOptions5 = getDefaultOptions(\r\n                            schemeOptions6,\r\n                            'deliveryLocationIdentifiers',\r\n                            'deliveryLocationIdentifier');\r\n\r\n                        vm.deliveryLocationIdentifiers = defaultOptions5;\r\n\r\n                        setIdentifier('deliveryLocationIdentifier',\r\n                            vm.deliveryLocationIdentifiers,\r\n                            vm.invoice.deliveryLocationIdentifierScheme  || 'GLN',\r\n                            vm.invoice.deliveryLocationIdentifierSchemeId || 6,\r\n                            vm.invoice.deliveryLocationIdentifier);\r\n\r\n                        var schemeOptions7 = _.clone(schemes[CLIENT_ENUMS.partyCodeType.default]);\r\n\r\n                        vm.buyerCustomerLegalCompanyReferences = getDefaultOptions(schemeOptions7,\r\n                                'buyerCustomerLegalCompanyReferences',\r\n                                'buyerCustomerLegalCompanyReference');\r\n\r\n                        setIdentifier('buyerCustomerLegalCompanyReference',\r\n                            vm.buyerCustomerLegalCompanyReferences,\r\n                            vm.invoice.buyerCustomerLegalCompanyReferenceScheme || 'GB:VAT',\r\n                            vm.invoice.buyerCustomerLegalCompanyReferenceSchemeId || 38,\r\n                            vm.invoice.buyerCustomerLegalCompanyReference);\r\n                    }\r\n\r\n                    if (forAccounting && util.isDefined(vm.accountingCustomer)) {\r\n                        setSupplierCodes(vm.customer);\r\n                        vm.usingAccounting = true;\r\n\r\n                        var justAccountingCustomerCodes = _.map(vm.accountingCustomer.partyCodes, (item) => {\r\n                            return item.code;\r\n                        });\r\n\r\n                        if (util.isDefined(justAccountingCustomerCodes)) {\r\n                            identifiers = _.groupBy(justAccountingCustomerCodes,\r\n                             function(item) {\r\n                                 return item.partyCodeType;\r\n                             }); \r\n                        }\r\n\r\n                        var accountingCustomerCodes = identifiers[CLIENT_ENUMS.partyCodeType.default] || [];\r\n\r\n                        vm.customerCodes = createIdentifiersForClient(accountingCustomerCodes);\r\n\r\n                        setIdentifier('customerCode',\r\n                            vm.customerCodes,\r\n                            vm.invoice.customerCodeScheme || 'GLN',\r\n                            vm.invoice.customerCodeSchemeId || 6,\r\n                            vm.invoice.customerCode,\r\n                            false);\r\n\r\n                        var accountingCustomerEndpoints = identifiers[CLIENT_ENUMS.partyCodeType.endpoint] || [];\r\n\r\n                        var schemeOptions11 = _.clone(schemes[CLIENT_ENUMS.partyCodeType.endpoint]);\r\n\r\n                        var defaultOptions11 = getDefaultOptions(schemeOptions11,\r\n                            'accountingCustomerEndpoints',\r\n                            'accountingCustomerEndpointIdentifier');\r\n\r\n                        vm.accountingCustomerEndpoints = defaultOptions11.concat(createIdentifiersForClient(accountingCustomerEndpoints));\r\n\r\n                        setIdentifier('accountingCustomerEndpointIdentifier',\r\n                            vm.accountingCustomerEndpoints,\r\n                            vm.invoice.accountingCustomerEndpointIdentifierScheme || 'GLN',\r\n                            vm.invoice.accountingCustomerEndpointIdentifierSchemeId || 6,\r\n                            vm.invoice.accountingCustomerEndpointIdentifier,\r\n                            true,\r\n                            vm.invoice.accountingCustomerEndpointIdentifierDescription);\r\n\r\n                        var accountingCustomerVatNumbers = identifiers[CLIENT_ENUMS.partyCodeType.taxReference] || [];\r\n\r\n                        var schemeOptions12 = _.clone(schemes[CLIENT_ENUMS.partyCodeType.taxReference]);\r\n\r\n                        var defaultOptions12 = getDefaultOptions(schemeOptions12,\r\n                            'accountingCustomerVatNumbers',\r\n                            'accountingCustomerVatNumber');\r\n\r\n                        vm.accountingCustomerVatNumbers = defaultOptions12.concat(createIdentifiersForClient(accountingCustomerVatNumbers));\r\n\r\n                        setIdentifier('accountingCustomerVatNumber',\r\n                            vm.accountingCustomerVatNumbers,\r\n                            vm.invoice.accountingCustomerVatNumberScheme || 'GB:VAT',\r\n                            vm.invoice.accountingCustomerVatNumberSchemeId || 38,\r\n                            vm.invoice.accountingCustomerVatNumber);\r\n                       \r\n                        var schemeOptions13 = _.clone(schemes[CLIENT_ENUMS.partyCodeType.default]);\r\n\r\n                        vm.accountingCustomerLegalCompanyReferences = getDefaultOptions(schemeOptions13,\r\n                                'accountingCustomerLegalCompanyReferences',\r\n                                'accountingCustomerLegalCompanyReference');\r\n\r\n                        setIdentifier('accountingCustomerLegalCompanyReference',\r\n                            vm.accountingCustomerLegalCompanyReferences,\r\n                            vm.invoice.accountingCustomerLegalCompanyReferenceScheme || 'GB:VAT',\r\n                            vm.invoice.accountingCustomerLegalCompanyReferenceSchemeId || 38,\r\n                            vm.invoice.accountingCustomerLegalCompanyReference);\r\n                    }\r\n\r\n                    if (forOthers) {\r\n                        vm.payeeVatNumbers = getDefaultOptions(schemes[CLIENT_ENUMS.partyCodeType.default],\r\n                            'payeeVatNumbers',\r\n                            'payeeVatNumber');\r\n\r\n                        setIdentifier('payeeVatNumber',\r\n                            vm.payeeVatNumbers,\r\n                            vm.invoice.payeeVatNumberScheme || 'GLN',\r\n                            vm.invoice.payeeVatNumberSchemeId || 6,\r\n                            vm.invoice.payeeVatNumber);\r\n\r\n                        vm.payeePartyIdentifiers =\r\n                            getDefaultOptions(schemes[CLIENT_ENUMS.partyCodeType.default],\r\n                                'payeePartyIdentifiers',\r\n                                'payeePartyIdentifier');\r\n\r\n                        setIdentifier('payeePartyIdentifier',\r\n                            vm.payeePartyIdentifiers,\r\n                            vm.invoice.payeePartyIdentifierScheme || 'GLN',\r\n                            vm.invoice.payeePartyIdentifierSchemeId || 6,\r\n                            vm.invoice.payeePartyIdentifier);\r\n\r\n                        vm.taxRepresentativePartyVatNumbers =\r\n                            getDefaultOptions(schemes[CLIENT_ENUMS.partyCodeType.taxReference],\r\n                                'taxRepresentativePartyVatNumbers',\r\n                                'taxRepresentativePartyVatNumber');\r\n\r\n                        setIdentifier('taxRepresentativePartyVatNumber',\r\n                            vm.taxRepresentativePartyVatNumbers,\r\n                            vm.invoice.taxRepresentativePartyVatNumberScheme || 'GB:VAT',\r\n                            vm.invoice.taxRepresentativePartyVatNumberSchemeId || 38,\r\n                            vm.invoice.taxRepresentativePartyVatNumber);\r\n                    }\r\n                });\r\n\r\n                function getDefaultOptions(schemeOptions, arrayName, validationPropertyname, allowBlank) {\r\n                    return identifierFactory.\r\n                        getDefaultOptions(schemeOptions, arrayName, validationPropertyname, allowBlank, setNewItem);\r\n                }\r\n\r\n                function setNewItem(item, arrayName) {\r\n                    vm[arrayName].splice(2, 0, item);\r\n                }\r\n            }\r\n\r\n            function createIdentifiersForClient(fromServer) {\r\n                var identifiers = [];\r\n\r\n                _.each(fromServer,\r\n                    function(item) {\r\n                        var scheme = partyProxy.resolveSchemeCodeFromId(item.schemeId);\r\n\r\n                        var identifier = identifierFactory.\r\n                            create(scheme, item.schemeId, item.codeValue, item.description);\r\n\r\n                        identifiers.push(identifier);\r\n                    });\r\n\r\n                return identifiers;\r\n            }\r\n\r\n            function setSupplierCodes(billTo) {\r\n                var justSupplierCodes = _.map(vm.supplier.partyCodes, (item) => {\r\n                    return item.code;\r\n                });\r\n\r\n                var partyCodes = _.clone(justSupplierCodes);\r\n\r\n                if (util.isDefined(billTo)) {\r\n                    partyCodes = _.filter(justSupplierCodes,\r\n                        (item) =>{\r\n                            return item.relatedPartyId === billTo.id ||\r\n                                util.isNullOrUndefined(item.relatedPartyId) ||\r\n                                item.relatedPartyId <= 0;\r\n                        });\r\n                }\r\n\r\n                let identifiers = _.groupBy(partyCodes,\r\n                            (item) =>{\r\n                                return item.partyCodeType;\r\n                            });\r\n\r\n                const supplierCodes = identifiers[CLIENT_ENUMS.partyCodeType.default] || [];\r\n\r\n                vm.supplierCodes = createIdentifiersForClient(supplierCodes);\r\n\r\n                if (vm.supplierCodes.length === 0) {\r\n                    vm.invoice.supplierCodeScheme = \"\";\r\n                    vm.invoice.supplierCodeSchemeId = -1;\r\n                    vm.invoice.supplierCode = \"\";\r\n                }\r\n\r\n                setIdentifier('supplierCode',\r\n                    vm.supplierCodes,\r\n                    vm.invoice.supplierCodeScheme || 'GLN',\r\n                    vm.invoice.supplierCodeSchemeId || 6,\r\n                    vm.invoice.supplierCode,\r\n                    false);\r\n\r\n                return identifiers;\r\n            }\r\n\r\n            function setIdentifier(\r\n                propertyName,\r\n                array,\r\n                scheme,\r\n                schemeId,\r\n                code,\r\n                addToListIfNotExists,\r\n                description) {\r\n                var addIfNotExists = true;\r\n                var selected = false;\r\n\r\n                if (util.isDefined(addToListIfNotExists) && !addToListIfNotExists) {\r\n                    addIfNotExists = false;\r\n                }\r\n\r\n                let temp = identifierFactory.create(scheme, schemeId, code, description);\r\n                \r\n                if (validateIdentifier(temp)) {\r\n                    var existing = _.find(array,\r\n                    function(item) {\r\n                        return item.identifier === temp['identifier'];\r\n                    });\r\n\r\n                    if (util.isDefined(existing)) {\r\n                        setIdentifier(existing);\r\n                        selected = true;\r\n                    } else if (util.isUndefined(existing) && addIfNotExists) {\r\n                        array.splice(2, 0, temp);\r\n                        setIdentifier(temp);\r\n                        selected = true;\r\n                    }\r\n                } \r\n                \r\n                if (!selected) {\r\n                    let single = _.filter(array,\r\n                        function(item) {\r\n                            return util.isNonEmptyString(item.code);\r\n                        });\r\n\r\n                    if (util.isDefined(single) && single.length === 1) {\r\n                        setIdentifier(single[0]);\r\n                        selected = true;\r\n                    } \r\n                }\r\n\r\n                if (!selected) {\r\n                    setIdentifier(array[0]);\r\n                }\r\n\r\n                return;\r\n\r\n                function setIdentifier(item) {\r\n                    if (util.isDefined(item)) {\r\n                        vm[propertyName] = item;\r\n                        \r\n                        if (validateIdentifier(item)) {\r\n                            //vm.invoice[propertyName] = item.code;\r\n                            //vm.invoice[propertyName + 'Scheme'] = item.scheme;\r\n                            //vm.invoice[propertyName + 'SchemeId'] = item.schemeId;\r\n                        }\r\n                    } else {\r\n                        vm[propertyName] = undefined;\r\n\r\n                       // vm.invoice[propertyName] = undefined;\r\n                        //vm.invoice[propertyName + 'Scheme'] = undefined;\r\n                        //vm.invoice[propertyName + 'SchemeId'] = undefined;\r\n                    }\r\n                }\r\n\r\n                function validateIdentifier(identifier) {\r\n                    return util.isNonEmptyString(identifier.code);\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n        return InvoiceController;\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/invoiceController.js","//{CODE:EUP0E}\r\n// di.einvoicing.ui.portal.portal.invoices.editor\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.provider('invoiceDetailsButtonsConfigurator', InvoiceDetailsButtonsConfiguratorProvider);\r\n\r\n\t\t/**\r\n\t\t * Manages invoice editor configuration and set up.\r\n\t\t */\r\n\t\tfunction InvoiceDetailsButtonsConfiguratorProvider() {\r\n\t\t\tvar config;\r\n\r\n\t\t\tvar buttonsConfiguration = {};\r\n\r\n\t\t\t// Provider definition\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['authorizedObjectsFilter', 'CLIENT_ENUMS'];\r\n\r\n\t\t\treturn provider;\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject('EUP2H01E', cfg, 'cfg');\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets required configuration for the grid.\r\n\t\t\t */\r\n\t\t\tfunction $get(authorizedObjectsFilter, clientEnums) {\r\n\r\n\t\t\t\tbuttonsConfiguration = {\r\n\t\t\t\t\ttype: 'Invoice',\r\n\t\t\t\t\tvisibleButtons: [],\r\n\t\t\t\t\tbuttonsSetOne: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['InvoiceReader'],\r\n\t\t\t\t\t\t\tname: 'view',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewInvoice,\r\n\t\t\t\t\t\t\tattributesRequired: ['saved']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\t\tname: 'cancelInvoice',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.cancelInvoice,\r\n\t\t\t\t\t\t\tattributesRequired: ['saved']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['InvoiceReader'],\r\n\t\t\t\t\t\t\tname: 'issues',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.showIssues\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tbuttonsSetTwo: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['InvoiceReader'],\r\n\t\t\t\t\t\t\tname: 'render',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.downloadInvoice,\r\n\t\t\t\t\t\t\tattributesRequired: ['saved']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewHistoryInvoice,\r\n\t\t\t\t\t\t\tattributesRequired: ['saved'],\r\n\t\t\t\t\t\t\tname: 'viewHistory'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['User'],\r\n\t\t\t\t\t\t\tname: 'related',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewRelatedDocumentsInvoice,\r\n\t\t\t\t\t\t\tattributesRequired: ['saved']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tbuttonsSetThree: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Supplier', 'InvoiceWriter'],\r\n\t\t\t\t\t\t\tname: 'deleteInvoice',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.remove,\r\n\t\t\t\t\t\t\tattributesRequired: ['hasServerId']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['InvoiceWriter'],\r\n\t\t\t\t\t\t\tname: 'saveInvoice',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.commit,\r\n\t\t\t\t\t\t\tattributesRequired: ['notSaved', 'justFlipped'],\r\n\t\t\t\t\t\t\tanyAttribute: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['InvoiceWriter'],\r\n\t\t\t\t\t\t\tname: 'submit',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.submit,\r\n\t\t\t\t\t\t\tattributesRequired: ['saved']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tbuttonsSetFour: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['InvoiceWriter'],\r\n\t\t\t\t\t\t\tname: 'saveInvoice',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.commit,\r\n\t\t\t\t\t\t\tattributesRequired: ['notSaved', 'justFlipped'],\r\n\t\t\t\t\t\t    anyAttribute :true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['InvoiceWriter'],\r\n\t\t\t\t\t\t\tname: 'submit',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.submit,\r\n\t\t\t\t\t\t\tattributesRequired: ['saved']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgetButtonsOneConfiguration: getButtonsOneConfiguration,\r\n\t\t\t\t\tgetButtonsTwoConfiguration: getButtonsTwoConfiguration,\r\n\t\t\t\t\tgetButtonsThreeConfiguration: getButtonsThreeConfiguration,\r\n\t\t\t\t\tgetButtonsFourConfiguration: getButtonsFourConfiguration\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tfunction getButtonsOneConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetOne);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getButtonsTwoConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetTwo);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getButtonsThreeConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetThree);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getButtonsFourConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetFour);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getConfiguration(array) {\r\n\t\t\t\t\tvar configuration = {\r\n\t\t\t\t\t\ttype: 'Invoice',\r\n\t\t\t\t\t\tvisibleButtons: []\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconfiguration.visibleButtons.fill(authorizedObjectsFilter.getAuthorizedObjects(array, true));\r\n\r\n\t\t\t\t\treturn configuration;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn InvoiceDetailsButtonsConfiguratorProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/invoiceDetailsButtonsConfigurator.js","//{CODE:EUP1E}\r\n// di.einvoicing.ui.portal.portal.invoices.editor\r\ndefine(['underscore'], function (_) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('invoiceTotalsCalculator', invoiceTotalsCalculator);\r\n\r\n\t\tfunction invoiceTotalsCalculator() {\r\n\t\t\tvar taxDetails = [];\r\n\r\n\t\t    return {\r\n\t\t        calculate: calculate,\r\n\t\t        calculateLineNet: calculateLineNet,\r\n\t\t        calculateTaxForLine: calculateTaxForLine,\r\n\t\t        calculateAllowancesCharges: calculateAllowancesCharges\r\n\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t* Calculates the totals for the current invoice\r\n\t\t\t*/\r\n\t\t\tfunction calculate(invoice, totals) {\r\n\t\t\t\tvar lines = invoice.lines;\r\n\r\n\t\t\t\ttotals.totalTax = 0;\r\n\t\t\t\ttotals.totalIncludingTax = 0;\r\n\t\t\t\ttotals.total = 0;\r\n\t\t\t\ttotals.payableAmount = 0;\r\n\t\t\t\ttotals.beforeTax = 0;\r\n\t\t\t\ttotals.prepaidAmount = invoice.prepaidAmount ? parseFloat(invoice.prepaidAmount) : 0;\r\n\t\t\t\ttotals.totalLines = 0;\r\n\t\t\t\ttotals.totalCharges = 0;\r\n\t\t\t\ttotals.totalAllowances = 0;\r\n\t\t\t\ttotals.taxBreakdown = {};\r\n\r\n\t\t\t\tgetTaxDataFromLines();\r\n\r\n\t\t\t\tvar linesTaxBreakdown = calculateLinesPerTaxCategory(lines);\r\n\r\n\t\t\t\t_.each(linesTaxBreakdown, function (taxAmount) {\r\n\t\t\t\t\ttotals.beforeTax += taxAmount.taxableAmount;\r\n\t\t\t\t\ttotals.totalTax += taxAmount.taxAmount;\r\n\t\t\t\t});\r\n\r\n\t\t\t\trecalculateTax(lines);\r\n\r\n\t\t\t\ttotals.totalLines = totals.beforeTax;\r\n                \r\n\t\t\t\tcalculateAllowancesCharges(invoice.allowancesCharges, totals);\r\n                \r\n\t\t\t\tvar allowancesChargesTaxBreakdown = calculateAllowancesChargesPerTaxCode(invoice.allowancesCharges);\r\n\r\n\t\t\t\ttotals.totalIncludingTax = totals.beforeTax + totals.totalTax;\r\n\r\n\t\t\t\ttotals.total = totals.beforeTax + totals.totalTax;\r\n\r\n\t\t\t\ttotals.taxBreakdown = combineBreakTaxBreakdowns(linesTaxBreakdown, allowancesChargesTaxBreakdown);\r\n\t\t\t\ttotals.beforeTax = round(totals.beforeTax, 2);\r\n\t\t\t\ttotals.payableAmount = totals.total - totals.prepaidAmount;\r\n\r\n\t\t\t\tif (totals.payableAmount < 0) {\r\n\t\t\t\t\ttotals.payableAmount = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Builds up tax array from lines\r\n\t\t\t\t */\r\n\t\t\t\tfunction getTaxDataFromLines() {\r\n\t\t\t\t\t_.each(lines, function (line) {\r\n\t\t\t\t\t\tline.netAmount = calculateLinePrice(line.unitPrice, line.quantity, line.allowanceAmount, line.chargeAmount, sanitizePriceBaseQuantity(line.priceBaseQuantity));\r\n\t\t\t\t\t\tif (util.isUndefined(taxDetails[line.taxCode])) {\r\n\t\t\t\t\t\t\ttaxDetails[line.taxCategory] = {\r\n\t\t\t\t\t\t\t\ttaxRate: line.taxRate,\r\n\t\t\t\t\t\t\t\ttaxCode: line.taxCode,\r\n\t\t\t\t\t\t\t\ttaxCategory: line.taxCategory\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Combines the lines and allowancesCharges tax breakdowns:\r\n\t\t\t * sums all shared tax codes, and assigns and new taxCodes\r\n\t\t\t * returns a single version\r\n\t\t\t */\r\n\t\t\tfunction combineBreakTaxBreakdowns(linesTaxBreakdown, allowancesChargesTaxBreakdown) {\r\n\t\t\t\tfor (var lineTaxCategory in linesTaxBreakdown) {\r\n\t\t\t\t\tif (!linesTaxBreakdown.hasOwnProperty(lineTaxCategory)) continue;\r\n\r\n\t\t\t\t\tif (lineTaxCategory === 'undefined') {\r\n\t\t\t\t\t\tdelete linesTaxBreakdown.undefined;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var acTaxCategory in allowancesChargesTaxBreakdown) {\r\n\t\t\t\t\t\tif (!allowancesChargesTaxBreakdown.hasOwnProperty(acTaxCategory)) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (acTaxCategory === 'undefined') {\r\n\t\t\t\t\t\t\tdelete allowancesChargesTaxBreakdown.undefined;\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (acTaxCategory === lineTaxCategory) {\r\n\t\t\t\t\t\t\tlinesTaxBreakdown[lineTaxCategory].taxAmount += allowancesChargesTaxBreakdown[lineTaxCategory].taxAmount;\r\n\t\t\t\t\t\t\tlinesTaxBreakdown[lineTaxCategory].taxableAmount += allowancesChargesTaxBreakdown[lineTaxCategory].taxableAmount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (!linesTaxBreakdown.hasOwnProperty(acTaxCategory)) {\r\n\t\t\t\t\t\t\tlinesTaxBreakdown[acTaxCategory] = allowancesChargesTaxBreakdown[acTaxCategory];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn linesTaxBreakdown;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction calculateAllowancesCharges(allowancesCharges, totals) {\r\n\t\t\t\t_.each(allowancesCharges, function (ac) {\r\n\t\t\t\t\tif (util.isUndefined(taxDetails[ac.taxCategory])) {\r\n\t\t\t\t\t\ttaxDetails[ac.taxCategory] = {\r\n\t\t\t\t\t\t\ttaxRate: ac.taxRate,\r\n\t\t\t\t\t\t\ttaxCode: ac.taxCode,\r\n\t\t\t\t\t\t\ttaxCategory: ac.taxCategory\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tac.taxAmount = 0;\r\n\r\n\t\t\t\t\tif (isNaN(ac.netAmount)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tac.taxAmount = round(netAmountChanged(ac, ac.netAmount), 2);\r\n\r\n\r\n\t\t\t\t\tvar roundedAllowanceChargeNetAmount = round(parseFloat(ac.netAmount), 2);\r\n\t\t\t\t\tvar roundedAllowanceChargeTotalAmount = roundedAllowanceChargeNetAmount + ac.taxAmount;\r\n\t\t\t\t\tac.amount = roundedAllowanceChargeTotalAmount;\r\n\r\n\t\t\t\t\tif (ac.isCharge === true) {\r\n\t\t\t\t\t\ttotals.totalCharges = (parseFloat(totals.totalCharges) + roundedAllowanceChargeNetAmount);\r\n\t\t\t\t\t\ttotals.beforeTax = (parseFloat(totals.beforeTax) + roundedAllowanceChargeNetAmount);\r\n\t\t\t\t\t\ttotals.total = (parseFloat(totals.total) + roundedAllowanceChargeTotalAmount);\r\n\t\t\t\t\t\ttotals.totalTax = (parseFloat(totals.totalTax) + parseFloat(ac.taxAmount));\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttotals.totalAllowances = (parseFloat(totals.totalAllowances) + roundedAllowanceChargeNetAmount);\r\n\t\t\t\t\t\ttotals.beforeTax = (parseFloat(totals.beforeTax) - roundedAllowanceChargeNetAmount);\r\n\t\t\t\t\t\ttotals.total = (parseFloat(totals.total) - roundedAllowanceChargeTotalAmount);\r\n\t\t\t\t\t\ttotals.totalTax = (parseFloat(totals.totalTax) - parseFloat(ac.taxAmount));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * recalculates taxes per line to add missing pennies after rounding\r\n\t\t\t * @param {} lines\r\n\t\t\t * @returns {}\r\n\t\t\t */\r\n\t\t\tfunction recalculateTax(lines) {\r\n\t\t\t\tvar sumExact = 0;\r\n\t\t\t\tvar sumRounded = 0;\r\n\r\n\t\t\t\t_.each(lines, function (line) {\r\n\t\t\t\t\tif (line.quantity == undefined || line.taxCodeId == undefined || line.unitPrice == undefined) {\r\n\t\t\t\t\t\tline.taxAmount = undefined;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (line.quantity > 0) {\r\n\t\t\t\t\t\tvar amount = calculateTaxForLine(line);\r\n\r\n\t\t\t\t\t\tline.taxAmount = round(amount, 2);\r\n\t\t\t\t\t\tsumExact += amount;\r\n\t\t\t\t\t\tsumRounded += line.taxAmount;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tline.taxAmount = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar sumExactRounded = round(sumExact, 2);\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * rounds to specified number of decimal places\r\n\t\t\t * @param {} value\r\n\t\t\t * @param {} exp\r\n\t\t\t * @returns {}\r\n\t\t\t */\r\n\t\t\tfunction round(value, exp) {\r\n\t\t\t\tif (typeof exp === 'undefined' || +exp === 0)\r\n\t\t\t\t\treturn Math.round(value);\r\n\r\n\t\t\t\tvalue = +value;\r\n\t\t\t\texp = +exp;\r\n\r\n\t\t\t\tif (isNaN(value) || !(exp % 1 === 0))\r\n\t\t\t\t\treturn NaN;\r\n\r\n\t\t\t\t// Shift\r\n\t\t\t\tvalue = value.toString().split('e');\r\n\t\t\t\tvalue = Math.round(+(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp)));\r\n\r\n\t\t\t\t// Shift back\r\n\t\t\t\tvalue = value.toString().split('e');\r\n\t\t\t\treturn +(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp));\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Ensures that the object has all necessary values to perform a calculation\r\n\t\t\t * @param line\r\n\t\t\t */\r\n\t\t\tfunction isValidLine(line) {\r\n\t\t\t\tif (line && line.unitPrice && line.quantity) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Reduces an invoice line to a specific value using a provided formula for the running total.\r\n\t\t\t * @param lines\r\n\t\t\t * @param formula\r\n\t\t\t */\r\n\t\t\tfunction performCalculation(lines, formula) {\r\n\t\t\t\tvar result = lines.reduce(function (total, current) {\r\n\t\t\t\t\tif (isValidLine(current)) {\r\n\t\t\t\t\t\treturn total + formula(current.unitPrice, current.quantity, current.taxCategory, current.allowanceAmount, current.chargeAmount);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn total;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 0);\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Callback function which calculates the tax for the specified price quantity and tax percentage\r\n\t\t\t * @param price\r\n\t\t\t * @param quantity\r\n\t\t\t * @param tax\r\n\t\t\t */\r\n\t\t\tfunction calculateLineTax(price, quantity, taxCategory, allowanceAmount, chargeAmount, priceBaseQuantity) {\r\n\t\t\t\tvar taxRate = 0;\r\n\t\t\t\tif (util.isDefined(taxDetails[taxCategory]) && util.isDefined(taxDetails[taxCategory].taxRate)) {\r\n\t\t\t\t\ttaxRate = taxDetails[taxCategory].taxRate;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar taxRatio = taxRate / 100;\r\n\r\n\t\t\t\treturn calculateLinePrice(price, quantity, allowanceAmount, chargeAmount, priceBaseQuantity) * taxRatio;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Calculates the cost of a line with the specified price and quantity\r\n\t\t\t * @param price\r\n\t\t\t * @param quantity\r\n\t\t\t */\r\n\t\t\tfunction calculateLinePrice(price, quantity, allowanceAmount, chargeAmount, priceBaseQuantity) {\r\n\t\t\t\tvar totalPrice = ((price / sanitizePriceBaseQuantity(priceBaseQuantity)) * quantity);\r\n\r\n\t\t\t\tif (allowanceAmount && allowanceAmount >= 0) {\r\n\t\t\t\t\ttotalPrice = (parseFloat(totalPrice) - parseFloat(allowanceAmount));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (chargeAmount && chargeAmount >= 0) {\r\n\t\t\t\t\ttotalPrice = (parseFloat(totalPrice) + parseFloat(chargeAmount));\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn totalPrice;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Calculates the net cost of the specified invoice line\r\n\t\t\t * @param line\r\n\t\t\t */\r\n\t\t\tfunction calculateLineNet(line) {\r\n\t\t\t\tif (!isValidLine(line)) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn calculateLinePrice(\r\n                    line.unitPrice, line.quantity, line.allowanceAmount, line.chargeAmount, sanitizePriceBaseQuantity(line.priceBaseQuantity));\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Calculates the amount of tax payable on the specified line\r\n\t\t\t * @param line\r\n\t\t\t */\r\n\t\t\tfunction calculateTaxForLine(line) {\r\n\t\t\t\tif (!isValidLine(line)) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn calculateLineTax(\r\n                    line.unitPrice,\r\n                    line.quantity,\r\n                    line.taxCategory,\r\n                    line.allowanceAmount,\r\n                    line.chargeAmount,\r\n\t\t\t\t\tsanitizePriceBaseQuantity(line.priceBaseQuantity));\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Breaks the invoice lines down by tax category and returns an object with the totals\r\n\t\t\t * stored with a key of the tax code\r\n\t\t\t * @param lines\r\n\t\t\t */\r\n\t\t\tfunction calculateLinesPerTaxCategory(lines) {\r\n\t\t\t\tvar taxCatTotals = {};\r\n\t\t\t\tvar groupedByTaxCategory = groupByTaxCategory(lines);\r\n\r\n\t\t\t\t_.each(groupedByTaxCategory, function (lines, taxCategory) {\r\n\t\t\t\t\tvar taxCategoryDetails = taxDetails[taxCategory];\r\n\r\n\t\t\t\t\tvar breakdownForTaxCat = {\r\n\t\t\t\t\t\ttaxCode: taxCategoryDetails.taxCode,\r\n\t\t\t\t\t\ttaxAmount: 0,\r\n\t\t\t\t\t\ttaxableAmount: 0,\r\n\t\t\t\t\t\ttaxCategory: taxCategoryDetails.taxCategory,\r\n\t\t\t\t\t\ttaxRate: taxCategoryDetails.taxRate\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_.each(lines, function (line) {\r\n\t\t\t\t\t\tif (isValidLine(line)) {\r\n\t\t\t\t\t\t\tbreakdownForTaxCat.taxAmount += round(calculateLineTax(line.unitPrice, line.quantity, line.taxCategory, line.allowanceAmount, line.chargeAmount, sanitizePriceBaseQuantity(line.priceBaseQuantity)), 2);\r\n\t\t\t\t\t\t\tbreakdownForTaxCat.taxableAmount += round(calculateLinePrice(line.unitPrice, line.quantity, line.allowanceAmount, line.chargeAmount, sanitizePriceBaseQuantity(line.priceBaseQuantity)), 2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\ttaxCatTotals[taxCategory] = breakdownForTaxCat;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn taxCatTotals;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Breaks the allowances & charges down by tax code and returns an object with the totals\r\n\t\t\t * stored with a key of the tax code\r\n\t\t\t * @param allowancesCharges\r\n\t\t\t */\r\n\t\t\tfunction calculateAllowancesChargesPerTaxCode(allowancesCharges) {\r\n\t\t\t\tvar taxCatTotals = {};\r\n\r\n\t\t\t\tvar groupedByTaxCategory = groupByTaxCategory(allowancesCharges);\r\n\r\n\t\t\t\t_.each(groupedByTaxCategory, function (allowancesCharges, taxCategory) {\r\n\t\t\t\t\tvar taxCatDetails = taxDetails[taxCategory];\r\n\r\n\t\t\t\t\tvar allowanceChargeBreakdown = {\r\n\t\t\t\t\t\ttaxCode: taxCatDetails.taxCode,\r\n\t\t\t\t\t\ttaxCategory: taxCatDetails.taxCategory,\r\n\t\t\t\t\t\ttaxRate: taxCatDetails.taxRate,\r\n\t\t\t\t\t\ttaxAmount: 0,\r\n\t\t\t\t\t\ttaxableAmount: 0\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t_.each(allowancesCharges, function (ac) {\r\n\t\t\t\t\t\tvar roundedNetAmount = round(ac.netAmount, 2);\r\n\r\n\t\t\t\t\t\tif (ac.isCharge === true) {\r\n\t\t\t\t\t\t\tallowanceChargeBreakdown.taxAmount += ac.taxAmount;\r\n\t\t\t\t\t\t\tallowanceChargeBreakdown.taxableAmount += roundedNetAmount;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tallowanceChargeBreakdown.taxAmount -= ac.taxAmount;\r\n\t\t\t\t\t\t\tallowanceChargeBreakdown.taxableAmount -= roundedNetAmount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\ttaxCatTotals[taxCategory] = allowanceChargeBreakdown;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn taxCatTotals;\r\n\t\t\t}\r\n\r\n\t\t\tfunction groupByTaxCategory(items) {\r\n\r\n\t\t\t\treturn _.groupBy(items, function (item) {\r\n\t\t\t\t\treturn item.taxCategory;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction netAmountChanged(item, amount) {\r\n\r\n\t\t\t\tvar taxAmount = 0;\r\n\t\t\t\tif (item.taxRate > 0) {\r\n\t\t\t\t\tvar taxRatio = (item.taxRate / 100);\r\n\t\t\t\t\ttaxAmount = Math.round((amount * taxRatio) * 10000) / 10000;\r\n\t\t\t\t\tvar result = parseFloat(amount) + parseFloat(taxAmount);\r\n\t\t\t\t\titem.amount = Math.round(result * 10000) / 10000;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\titem.amount = amount;\r\n\t\t\t\t}\r\n\t\t\t\treturn taxAmount;\r\n\t\t\t}\r\n\r\n\t\t\tfunction sanitizePriceBaseQuantity(priceBaseQuantity) {\r\n\t\t\t\tvar sanitized = priceBaseQuantity > 0 ? priceBaseQuantity : 1.0;\r\n\t\t\t\treturn sanitized;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn invoiceTotalsCalculator;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/invoiceTotalsCalculator.js","//{CODE:EUP8L}\r\n// di.einvoicing.ui.portal.components.locationselector\r\ndefine([\r\n    './location-selector.component'\r\n], function (\r\n    locationSelectorComponentModule) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            locationSelectorComponentModule.LocationSelectorComponent.selector,\r\n            locationSelectorComponentModule.LocationSelectorComponent);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/location-selector/_loader.js","export const LocationSelectorComponent = {\r\n  templateUrl: 'src/app/portal/invoices/editor/location-selector/location-selector.component.html',\r\n  selector: 'diLocationSelector',\r\n  bindings: {\r\n    partyId: '<',\r\n    locationType: '@',\r\n    preDeterminedLocation: '<',\r\n    onLocationSelected: '&'\r\n  },\r\n  controller:\r\n  class {\r\n    constructor(\r\n      partyProxy,\r\n      clientEnums\r\n    ) {\r\n      this.partyProxy = partyProxy;\r\n      this.clientEnums = clientEnums;\r\n\r\n      this.selectedPartyLocation = {};\r\n      this.partyLocations = [];\r\n      this.onLocationChanged = this.onLocationChanged.bind(this);\r\n    }\r\n\r\n    $onInit() {\r\n      this.getPartyLocations();\r\n    }\r\n\r\n    $onChanges() {\r\n      this.getPartyLocations();\r\n    }\r\n\r\n    getPartyLocations() {\r\n      if (this.partyId === 0 || this.partyId === null || 'undefined' === typeof this.partyId) {\r\n        return;\r\n      }\r\n\r\n      this.partyProxy\r\n        .getLocationsForParty(this.partyId, this.locationType)\r\n        .then((data) => {\r\n          let locationsData = data;\r\n\r\n          if (\"undefined\" !== typeof locationsData) {\r\n            this.partyLocations = locationsData;\r\n          }\r\n          else {\r\n            return;\r\n          }\r\n\r\n          if (this.preDeterminedLocation !== null\r\n            && 'undefined' !== typeof this.preDeterminedLocation) {\r\n\r\n\r\n            let preDeterminedFound = getPredeterminedLocationFromList(\r\n              this.partyLocations, \r\n              this.preDeterminedLocation, \r\n              this.selectedPartyLocation);\r\n\r\n            this.selectedPartyLocation = setSelectedLocation(\r\n              this.partyLocations, \r\n              this.selectedPartyLocation,\r\n              preDeterminedFound, \r\n              this.preDeterminedLocation);\r\n          }\r\n        });\r\n\r\n      function getPredeterminedLocationFromList(partyLocations, preDeterminedLocation, selectedPartyLocation) {\r\n        _.each(partyLocations, function (partyLocation) {\r\n          if (partyLocation.addressLine1 === preDeterminedLocation.addressLine1\r\n            && partyLocation.addressLine2 === preDeterminedLocation.addressLine2\r\n            && partyLocation.town === preDeterminedLocation.addressTown\r\n            && partyLocation.county === preDeterminedLocation.county\r\n            && partyLocation.postalCode === preDeterminedLocation.postCode) {\r\n\r\n            return partyLocation;\r\n          }\r\n        });\r\n      }\r\n\r\n      function setSelectedLocation(partyLocations, selectedPartyLocation, preDeterminedFound, preDeterminedLocation) {\r\n        if ('undefined' !== typeof preDeterminedFound) {\r\n          partyLocations.push(preDeterminedLocation);\r\n          return preDeterminedLocation;\r\n        } else {\r\n          return preDeterminedLocation;\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    onLocationChanged(selectedLocation) {\r\n      this.onLocationSelected({ value: selectedLocation });\r\n    }\r\n  }\r\n}\r\n\r\nLocationSelectorComponent.controller.prototype.constructor.$inject = ['partyProxy', 'CLIENT_ENUMS'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/editor/location-selector/location-selector.component.js","//{CODE:EUP40}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tvar util = $di.utility.util;\r\n\t\r\n\t\tmodule.factory('invoiceProxy', invoiceProxy);\r\n\r\n\t\tinvoiceProxy.$inject = [\r\n\t\t\t'webApiHttp',\r\n\t\t\t'$q',\r\n\t\t\t'invoiceFormatter',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'urlHelper',\r\n            'proxyErrorInterceptor'\r\n\t\t];\r\n\r\n\t\tfunction invoiceProxy(\r\n\t\t\thttp,\r\n\t\t\t$q,\r\n\t\t\tinvoiceFormatter,\r\n\t\t\tclientEnums,\r\n\t\t\tenumTranslator,\r\n\t\t\turlHelper,\r\n            proxyErrorInterceptor) {\r\n\t\t\tvar defaultFailureReason = 'EINVOICING.PORTAL.PROXIES.INVOICE.DEFAULT_ERROR';\r\n\r\n\t\t\treturn {\r\n\t\t\t\tgetById: getById,\r\n\t\t\t\tgetDetailsById: getDetailsById,\r\n\t\t\t\tgetDetailsByAuditId: getDetailsByAuditId,\r\n\t\t\t\tgetByInvoiceNumber: getByInvoiceNumber,\r\n\t\t\t\tgetDetailsByInvoiceNumber: getDetailsByInvoiceNumber,\r\n\t\t\t\tcommitInvoice: commitInvoice,\r\n\t\t\t\tflagInDisputeInvoice: flagInDisputeInvoice,\r\n\t\t\t\tvoidInvoice: voidInvoice,\r\n\t\t\t\tflagPaidInvoice: flagPaidInvoice,\r\n\t\t\t\tflagAsScheduledForPayment: flagAsScheduledForPayment,\r\n\t\t\t\tgetInvoices: getInvoices,\r\n\t\t\t\tsubmitInvoiceByDocumentId: submitInvoiceByDocumentId,\r\n\t\t\t\tgetInvoiceDocumentIssues: getInvoiceDocumentIssues,\r\n\t\t\t\ttestForInvoiceDocumentIssues: testForInvoiceDocumentIssues,\r\n\t\t\t\treleaseInvoice: releaseInvoice,\r\n\t\t\t\treleaseInvoices: releaseInvoices,\r\n\t\t\t\tdeleteInvoice: deleteInvoice,\r\n\t\t\t\tgetVisiblePropertyFieldsForBuyer: getVisiblePropertyFieldsForBuyer,\r\n\t\t\t\tgetAllowedActions: getAllowedActions\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t* Gets the invoice with the specified ID from the web API\r\n\t\t\t* @param id\r\n\t\t\t*/\r\n\t\t\tfunction getById(id) {\r\n\t\t\t\tvar requestUrl = 'Invoice/GetById/' + id;\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(invoiceFormatter.reformatServerInvoiceForClient, errorReceivingInvoice);\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getDetailsById(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP400HE\", id, 'id');\r\n\r\n\t\t\t\tvar requestUrl = 'Invoice/GetDetailsById/' + id;\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(invoiceFormatter.reformatServerInvoiceDetailsForClient, errorReceivingInvoice);\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getDetailsByAuditId(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP4001E\", id, 'id');\r\n\r\n\t\t\t\tvar requestUrl = 'Invoice/GetDetailsByAuditId/' + id;\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(invoiceFormatter.reformatServerInvoiceDetailsForClient, errorReceivingInvoice);\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Gets the invoice with the specified invoice number from the web API\r\n\t\t\t* @param number\r\n\t\t\t*/\r\n\t\t\tfunction getDetailsByInvoiceNumber(number) {\r\n\t\t\t\tguard.throwIfEmptyString(\"EUP4003E\", number, 'number');\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tinvoiceNumber: number\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Invoice/GetDetailsByInvoiceNumber', requestParams);\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(invoiceFormatter.reformatServerInvoiceDetailsForClient, errorReceivingInvoice);\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Gets the invoice with the specified invoice number from the web API\r\n\t\t\t* @param number\r\n\t\t\t*/\r\n\t\t\tfunction getByInvoiceNumber(number) {\r\n\t\t\t\tguard.throwIfEmptyString(\"EUP4003E\", number, 'number');\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tinvoiceNumber: number\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Invoice/GetByInvoiceNumber', requestParams);\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(invoiceFormatter.reformatServerInvoiceForClient, errorReceivingInvoice);\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets a collection of field names and if they are default visible or not based on the buyer \r\n\t\t\t * @param {} buyerPartyId \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction getVisiblePropertyFieldsForBuyer(buyerPartyId) {\r\n\t\t\t\tguard.throwIfZeroOrNegative(\"EUP400IE\", buyerPartyId, 'buyerPartyId');\r\n\t\t\t\tguard.throwIfNotANumber(\"EUP400JE\", buyerPartyId, 'buyerPartyId');\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tbuyerPartyId: buyerPartyId\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Invoice/GetVisiblePropertyFieldsForBuyer', requestParams);\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, error);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction error(errordata) {\r\n\t\t\t\t\treturn errordata;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Commits the specified invoice to the web API\r\n\t\t\t* @param invoice\r\n\t\t\t*/\r\n\t\t\tfunction commitInvoice(invoice) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP4002E\", invoice, 'invoice');\r\n\r\n\t\t\t\tvar reformattedInvoice = invoiceFormatter.reformatClientInvoiceForServer(invoice);\r\n\r\n\t\t\t\tvar promise = http.post('Invoice/CommitInvoice', reformattedInvoice);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn errorProcessingInvoice(error, 'EINVOICING.PORTAL.PROXIES.INVOICE.SAVE_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction flagInDisputeInvoice(id, reason, inDispute) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP400DE\", id, 'id');\r\n\r\n\t\t\t\tvar requestParams;\r\n\r\n\t\t\t\treason = 'not implemented';\r\n\r\n\t\t\t\tvar url = 'Invoice/FlagAsInDisputeInvoice';\r\n\r\n\t\t\t\tif (util.isDefined(inDispute) && inDispute === false) {\r\n\t\t\t\t\turl = 'Invoice/FlagAsNotInDisputeInvoice';\r\n\r\n\t\t\t\t\trequestParams = {\r\n\t\t\t\t\t\tid: id\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tguard.throwIfEmptyString(\"EUP400GE\", reason, 'reason');\r\n\r\n\t\t\t\t\trequestParams = {\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\treason : reason\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters(url, requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\tvar message = 'EINVOICING.PORTAL.PROXIES.INVOICE.END_DISPUTE_ERROR';\r\n\r\n\t\t\t\t\tif (inDispute) {\r\n\t\t\t\t\t\tmessage = 'EINVOICING.PORTAL.PROXIES.INVOICE.START_DISPUTE_ERROR';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn errorProcessingInvoice(error, message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction voidInvoice(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP400DE\", id, 'id');\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Invoice/VoidInvoice', requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn errorProcessingInvoice(error, 'EINVOICING.PORTAL.PROXIES.INVOICE.VOID_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction flagPaidInvoice(id, isPaid) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP400DE\", id, 'id');\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar url = 'Invoice/FlagPaidInvoice';\r\n\t\t\t\tif (util.isDefined(isPaid) && isPaid === false) {\r\n\t\t\t\t\turl = 'Invoice/FlagUnPaidInvoice';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters(url, requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\tvar message = 'EINVOICING.PORTAL.PROXIES.INVOICE.FLAG_PAID_ERROR';\r\n\r\n\t\t\t\t\tif (isPaid === false) {\r\n\t\t\t\t\t\tmessage = 'EINVOICING.PORTAL.PROXIES.INVOICE.FLAG_NOTPAID_ERROR';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn errorProcessingInvoice(error, message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction flagAsScheduledForPayment(id, scheduled) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP400DE\", id, 'id');\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar url = 'Invoice/FlagAsScheduledForPayment';\r\n\r\n\t\t\t\tif (util.isDefined(scheduled) && scheduled === false) {\r\n\t\t\t\t\turl = 'Invoice/FlagAsNotScheduledForPayment';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters(url, requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\tvar message = 'EINVOICING.PORTAL.PROXIES.INVOICE.FLAG_SCHEDULEDPAID_ERROR';\r\n\r\n\t\t\t\t\tif (scheduled === false) {\r\n\t\t\t\t\t\tmessage = 'EINVOICING.PORTAL.PROXIES.INVOICE.FLAG_NOT_SCHEDULEDPAID_ERROR';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn errorProcessingInvoice(error, message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Get invoices from the database\r\n\t\t\t */\r\n\t\t\tfunction getInvoices(searchText, lastNRows, dateType, dateTimeFilters, customDateTimeFilter, sortOption, statusOption) {\r\n\t\t\t\tguard.throwIfNotANumber(\"EUP4006E\", lastNRows, \"lastNRows\");\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP400AE\", dateType, \"dateType\");\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"EUP4007E\", dateTimeFilters, \"dateTimeFilters\");\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP4008E\", sortOption, \"sortOption\");\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP400BE\", statusOption, \"statusOption\");\r\n\r\n\t\t\t\tif (!customDateTimeFilter) {\r\n\t\t\t\t\tcustomDateTimeFilter = {\r\n\t\t\t\t\t\tfromDate: new Date(),\r\n\t\t\t\t\t\ttoDate: new Date()\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar requestedParams = {\r\n\t\t\t\t\tlastNRows: lastNRows,\r\n\t\t\t\t\tdateType: dateType,\r\n\t\t\t\t\tdateTimeFilterOption: dateTimeFilters.toString(),\r\n\t\t\t\t\tfromDate: JSON.stringify(customDateTimeFilter.fromDate).replace(/\"/g, \"\"),\r\n\t\t\t\t\ttoDate: JSON.stringify(customDateTimeFilter.toDate).replace(/\"/g, \"\"),\r\n\t\t\t\t\tsortOption: sortOption,\r\n\t\t\t\t\tstatusOption: statusOption\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (util.isNonEmptyString(searchText)) {\r\n\t\t\t\t    requestedParams.searchText = searchText;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar requestedUrl = urlHelper.setParameters('Invoice/GetInvoiceSearchResults', requestedParams);\r\n\r\n\t\t\t\tvar promise = http.get(requestedUrl).then(resolve, reject);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t\treturn errorProcessingInvoice(error, 'EINVOICING.PORTAL.PROXIES.INVOICE.RECEIVE_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which gets the failure details for an invoice\r\n\t\t\t * \r\n\t\t\t * @param invoiceId - The ID of the invoice to retrieve failure details for\r\n\t\t\t * @returns - Promise which resolves to the failure details for the invoice \r\n\t\t\t */\r\n\t\t\tfunction getInvoiceDocumentIssues(invoiceId) {\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tinvoiceId: invoiceId\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar requestedUrl = urlHelper.setParameters('Invoice/GetInvoiceDocumentIssues/', requestParams);\r\n\r\n\t\t\t\tvar promise = http.get(requestedUrl);\r\n\r\n\t\t\t\treturn promise;\r\n\t\t\t}\r\n\r\n\t\t    /**\r\n\t\t\t* tests the invoice for any issues\r\n\t\t\t* @param invoice\r\n\t\t\t*/\r\n\t\t\tfunction testForInvoiceDocumentIssues(invoice) {\r\n\t\t\t    guard.throwIfNotAnObject(\"EUP4002E\", invoice, 'invoice');\r\n\r\n\t\t\t    var reformattedInvoice = invoiceFormatter.reformatClientInvoiceForServer(invoice);\r\n\r\n\t\t\t    var promise = http.post('Invoice/TestForInvoiceDocumentIssues', reformattedInvoice);\r\n\r\n\t\t\t    return promise;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Submits the invoice with the given document id (flag for export and sending)\r\n\t\t\t * @param id\r\n\t\t\t */\r\n\t\t\tfunction submitInvoiceByDocumentId(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP4009E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = http.post('Invoice/SubmitInvoiceByDocumentId', id);\r\n\t\t\t\t\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn errorProcessingInvoice(error, 'EINVOICING.PORTAL.PROXIES.INVOICE.SUBMIT_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Calls web api to release mismatched single invoice\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction releaseInvoice(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP400KE\", id, 'id');\r\n\r\n\t\t\t\tvar ids = [];\r\n\r\n\t\t\t\tids.push(id);\r\n\t\t\t\t\r\n\t\t\t\treturn releaseInvoices(ids,reference);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Calls web api to release mismatched invoices\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction releaseInvoices(ids, reference) {\r\n\t\t\t\tguard.throwIfEmptyArray(\"EUP400EE\", ids, 'ids');\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tids: ids\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Invoice/ReleaseInvoices', requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(releaseResolved, releaseRejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction releaseResolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction releaseRejected(error) {\r\n\t\t\t\t\tvar errorMsg = 'EINVOICING.PORTAL.PROXIES.INVOICE.RELEASE_MULTI_ERROR';\r\n\t\t\t\t\tif (util.isNonEmptyString(reference)) {\r\n\t\t\t\t\t\terrorMsg = 'EINVOICING.PORTAL.PROXIES.INVOICE.RELEASE_ERROR';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn errorProcessingInvoice(error, errorMsg);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Marks invoice as deleted\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction deleteInvoice(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP400FE\", id, 'id');\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Invoice/RemoveInvoice', requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn errorProcessingInvoice(error, 'EINVOICING.PORTAL.PROXIES.INVOICE.DELETE_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads allowed actions for invoice\r\n\t\t\t */\r\n\t\t\tfunction getAllowedActions(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP4009E\", id, 'id');\r\n\r\n\t\t\t\tvar requestUrl = 'Invoice/GetActionsAllowed/' + id;\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn errorProcessingInvoice(error, 'EINVOICING.PORTAL.PROXIES.INVOICE.ACTIONS_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Callback function executed when an error occurs whilst receiving invoice(s)\t\t\t\r\n\t\t\t*/\r\n\t\t\tfunction errorReceivingInvoice(error) {\r\n\t\t\t\treturn errorProcessingInvoice(error, 'EINVOICING.PORTAL.PROXIES.INVOICE.RECEIVE_ERROR');\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Callback function executed when an error occurs processing the invoice\t\t\t\r\n\t\t\t*/\r\n\t\t\tfunction errorProcessingInvoice(error, failureReason) {\r\n\t\t\t    proxyErrorInterceptor.handleError(error, failureReason, defaultFailureReason);\r\n\t\t\t\treturn $q.reject(error);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn invoiceProxy;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/invoice-proxy.factory.js","//{CODE:EUP66}\r\n// di.einvoicing.ui.portal.portal.invoices\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('invoiceRepository', invoiceRepository);\r\n\r\n\t\tinvoiceRepository.$inject = [\r\n\t\t\t'invoiceProxy',\r\n\t\t\t'$q',\r\n\t\t\t'notificationHandler'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * Repository for methods on invoice\t\t\r\n\t\t */\r\n\t\tfunction invoiceRepository(\r\n\t\t\tinvoiceProxy,\r\n\t\t\t$q,\r\n\t\t\tnotificationHandler) {\r\n\t\t\treturn {\r\n\t\t\t\tgetInvoices : getInvoices,\r\n\t\t\t\tflagInDisputeInvoice: flagInDisputeInvoice,\r\n\t\t\t\tvoidInvoice: voidInvoice,\r\n\t\t\t\tflagPaidInvoice: flagPaidInvoice,\r\n\t\t\t\tflagAsScheduledForPayment: flagAsScheduledForPayment,\r\n\t\t\t\tsubmitInvoiceByDocumentId: submitInvoiceByDocumentId,\r\n\t\t\t\treleaseInvoice: releaseInvoice,\r\n\t\t\t\treleaseInvoices: releaseInvoices,\r\n\t\t\t\tdeleteInvoice: deleteInvoice,\r\n\t\t\t\tgetIndex: getIndex,\r\n\t\t\t\tgetAllowedActions: getAllowedActions\r\n\t\t\t};\r\n\r\n\r\n\t\t\tfunction getInvoices(searchText, lastNRows, dateType, dateTimeFilters, customDateTimeFilter, sortOption, statusOption) {\r\n\t\t\t\tvar promise = invoiceProxy\r\n\t\t\t\t\t.getInvoices(searchText, lastNRows, dateType, dateTimeFilters, customDateTimeFilter, sortOption, statusOption)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\t\t           \r\n\t\t\t\t\treturn rejectWithErrorNotification(error, '');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Dispute invoice\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction flagInDisputeInvoice(id, reason, inDispute, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6608E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = invoiceProxy\r\n\t\t\t\t\t.flagInDisputeInvoice(id,reason, inDispute)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tvar message = \"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.SUCCESS.DISPUTE\";\r\n\t\t\t\t\tif (!inDispute) {\r\n\t\t\t\t\t\tmessage = \"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.SUCCESS.NOTDISPUTE\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tdisplaySuccessNotification(message, reference);\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Void invoice\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction voidInvoice(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6604E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = invoiceProxy\r\n\t\t\t\t\t.voidInvoice(id)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tdisplaySuccessNotification(\"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.SUCCESS.VOID\", reference);\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * mark as paid or unpaid invoice\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction flagPaidInvoice(id, isPaid, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6603E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = invoiceProxy\r\n\t\t\t\t\t.flagPaidInvoice(id, isPaid)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tvar message = \"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.SUCCESS.PAID\";\r\n\t\t\t\t\tif (!isPaid) {\r\n\t\t\t\t\t\tmessage = \"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.SUCCESS.NOTPAID\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdisplaySuccessNotification(message, reference);\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Mark as scheduled or not scheduled for payment invoice\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction flagAsScheduledForPayment(id, isScheduled, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6602E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = invoiceProxy\r\n\t\t\t\t\t.flagAsScheduledForPayment(id, isScheduled, reference)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tvar message = \"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.SUCCESS.SCHEDULED\";\r\n\t\t\t\t\tif (!isScheduled) {\r\n\t\t\t\t\t\tmessage = \"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.SUCCESS.NOTSCHEDULED\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdisplaySuccessNotification(message, reference);\r\n\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Submit invoice by document id\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction submitInvoiceByDocumentId(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6605E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = invoiceProxy\r\n\t\t\t\t\t.submitInvoiceByDocumentId(id)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tdisplaySuccessNotification(\"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.SUCCESS.SUBMIT\", reference);\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\tif (error.response.responseText === 'SERVCONNEX') {\r\n\t\t\t\t\t\treturn displayWarningNotification(\"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.WARNING.SERVER_CONNECTION\", reference);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t    /**\r\n\t\t\t * Releases mismatched single invoice\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction releaseInvoice(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP660DE\", id, 'id');\r\n\r\n\t\t\t\tvar ids = [];\r\n\r\n\t\t\t\tids.push(id);\r\n\r\n\t\t\t\treturn releaseInvoices(ids, reference);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Releases mismatched invoices\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction releaseInvoices(ids,reference) {\r\n\t\t\t\tguard.throwIfEmptyArray(\"EUP660AE\", ids, 'ids');\r\n\r\n\t\t\t\tvar promise = invoiceProxy\r\n\t\t\t\t\t.releaseInvoices(ids, reference)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error,reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * marks invoice as deleted\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction deleteInvoice(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP660BE\", id, 'id');\r\n\r\n\t\t\t\tvar promise = invoiceProxy\r\n\t\t\t\t\t.deleteInvoice(id)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tdisplaySuccessNotification(\"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.SUCCESS.DELETED\", reference);\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * find the array index of an object with a specific key value\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction getIndex(array, keyName, keyValue) {\r\n\t\t\t\treturn _.findIndex(array, function(item) {\r\n\t\t\t\t\treturn item[keyName] === keyValue;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction getAllowedActions(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP660CE\", id, 'id');\r\n\r\n\t\t\t\tvar promise = invoiceProxy\r\n\t\t\t\t\t.getAllowedActions(id)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * rejects promise and displays error notification\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction rejectWithErrorNotification(error, reference) {\r\n\t\t\t    notificationHandler.showError(error.failureReason, reference);\r\n\t\t\t\treturn $q.reject(error).catch(function(){});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * displays success notification\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction displaySuccessNotification(message, reference) {\r\n\t\t\t    notificationHandler.showSuccess(message, reference);\r\n\t\t\t}\r\n\r\n\t\t    function displayWarningNotification(warning, reference) {\r\n\t\t        notificationHandler.showWarning(warning, reference);\r\n\t\t    }\r\n\t\t}\r\n\r\n\t\treturn invoiceRepository;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/invoiceRepository.js","//{CODE:EUP3F}\r\n// di.einvoicing.ui.portal.portal.invoices.lists.components\r\ndefine([\r\n    './_snippets/_loader',\r\n    './invoiceList/invoiceListDirective'\r\n], function (\r\n    snippetsLoader,\r\n    invoiceListDirectiveLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tsnippetsLoader(module);\r\n\t\tinvoiceListDirectiveLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/lists/_components/_loader.js","//{CODE:EUP3D}\r\n// di.einvoicing.ui.portal.portal.invoices.lists.components.snippets\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var snippetContext = $di.angular.snippetRegistrar.createContext(\r\n            module,\r\n            'src/app/portal/invoices/lists/_components/_snippets');\r\n\t\t\r\n        snippetContext.registerSnippet('diInvoicesSearch', 'invoicesSearch.html');\r\n        snippetContext.registerSnippet('diInvoicesActionButtons', 'invoicesActionButtons.html');\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/lists/_components/_snippets/_loader.js","//{CODE:EUP5B}\r\n// di.einvoicing.ui.portal.portal.invoices.lists\r\ndefine(['angular'],function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diInvoiceList', diInvoiceList);\r\n\r\n        function diInvoiceList() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {},\r\n                controller: \"InvoiceListController\",\r\n                controllerAs: \"invoiceListCtrl\",\r\n                templateUrl: 'src/app/portal/invoices/lists/_components/invoiceList/invoiceList.html',\r\n                link: link\r\n            };\r\n\r\n            function link(scope) {\r\n                scope.findElement = findElement;\r\n\r\n                return;\r\n\r\n                function findElement(name) {\r\n                   return ng.element(name);\r\n                }\r\n            }\r\n        }\r\n\r\n        return diInvoiceList;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/lists/_components/invoiceList/invoiceListDirective.js","//{CODE:EUP5P}\r\n// di.einvoicing.ui.portal.portal.invoices.lists\r\ndefine(['./_components/_loader',\r\n\t'./invoiceListController',\r\n\t'./invoiceListConfigurator'\r\n], function (\r\n\tcomponentsLoader,\r\n\tinvoiceListControllerLoader,\r\n\tinvoiceListConfiguratorLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tcomponentsLoader(module);\r\n\t\tinvoiceListConfiguratorLoader(module);\r\n\t\tinvoiceListControllerLoader(module);\t\t\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/lists/_loader.js","//{CODE:EUP2H}\r\n// di.einvoicing.ui.portal.portal.invoices.lists\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.provider('invoiceListConfigurator', InvoiceListConfiguratorProvider);\r\n\r\n\t\t/**\r\n\t\t * Manages invoice list configuration and set up.\r\n\t\t */\r\n\t\tfunction InvoiceListConfiguratorProvider() {\r\n\t\t\tvar config = {};\r\n\r\n\t\t\tvar buttonsConfiguration = {};\r\n\r\n\t\t\t// Grid columns configuration\r\n\t\t\tvar columnDefinitions = [\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\tfield: 'invoiceNumber',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.INVOICE_NUMBER_SUPPLIER',\r\n\t\t\t\t\ttemplate: '<span>{{binding.invoiceNumber}}</span>'\r\n\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\tfield: 'invoiceNumber',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.INVOICE_NUMBER_BUYER',\r\n\t\t\t\t\ttemplate: '<span>{{binding.invoiceNumber}}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\tfield: 'orderNumber',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.ORDER_NUMBER_SUPPLIER',\r\n\t\t\t\t\ttemplate: '<span ng-if=\"binding.orderId > 0\"><a ui-sref=\"portal.orders.viewById({{\\'{id : binding.orderId}\\'}})\">{{binding.orderNumber}}</a></span><span ng-if=\"binding.orderId == 0\">{{binding.orderNumber}}</span>',\r\n\t\t\t\t\tcellClass: 'wordWrap'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\tfield: 'orderNumber',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.ORDER_NUMBER_BUYER',\r\n\t\t\t\t\ttemplate: '<span ng-if=\"binding.orderId > 0\"><a ui-sref=\"portal.orders.viewById({{\\'{id : binding.orderId}\\'}})\">{{binding.orderNumber}}</a></span><span ng-if=\"binding.orderId == 0\">{{binding.orderNumber}}</span>',\r\n\t\t\t\t\tcellClass: 'wordWrap'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'createdDateTime',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.CREATED_DATE',\r\n\t\t\t\t\ttemplate: '<span>{{ binding.createdDateTime  | diDate }}</span>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'issuedDateTime',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.ISSUED_DATE',\r\n\t\t\t\t\ttemplate: '<span>{{ binding.issuedDateTime | diDate }}</span>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'paymentDueDateTime',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.PAYMENT_DUE_DATE',\r\n\t\t\t\t\ttemplate: '<span>{{ binding.paymentDueDateTime | diDate }}</span>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\tfield: 'supplier',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.BILL_FROM',\r\n\t\t\t\t\ttemplate: '<div class=\"tooltip-wrap\">\\\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-ellipsis\">{{binding.supplier}}</span>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"(binding.supplier || \\'\\').length >= 35\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-class=\"((binding.supplier || \\'\\').length > 70) ? [\\'tooltip\\', \\'tooltip-multiline\\'] : \\'tooltip\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t<span>\\\r\n\t\t\t\t\t\t\t\t\t\t\t{{ ::binding.supplier }}\\\r\n\t\t\t\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\tcellClass: 'max-width-300'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\tfield: 'customer',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.BILL_TO',\r\n\t\t\t\t\ttemplate: '<div class=\"tooltip-wrap\">\\\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-ellipsis\">{{binding.customer}}</span>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"(binding.customer || \\'\\').length >= 35\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-class=\"((binding.customer || \\'\\').length > 70) ? [\\'tooltip\\', \\'tooltip-multiline\\'] : \\'tooltip\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t<span>\\\r\n\t\t\t\t\t\t\t\t\t\t\t{{ ::binding.customer }}\\\r\n\t\t\t\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\tcellClass: 'max-width-300'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'totalLines',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.LINES',\r\n\t\t\t\t\ttemplate: '<span>{{ binding.totalLines }}</span>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'tax',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.TAX',\r\n\t\t\t\t\ttemplate: '<span>{{binding.tax | diCurrency:binding.currencyId}}</span>',\r\n\t\t\t\t\tcellClass: 'numericcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'total',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.TOTAL',\r\n\t\t\t\t\ttemplate: '<span>{{binding.total | diCurrency:binding.currencyId}}</span>',\r\n\t\t\t\t\tcellClass: 'numericcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'calculatedState',\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.INVOICES.LISTS.COLUMN_HEADERS.STATE',\r\n\t\t\t\t\ttemplate: '<span>{{binding.calculatedState}}</span>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'attachment',\r\n\t\t\t\t\tnameLanguageKey: '',\r\n\t\t\t\t\ttemplate: '<div class=\"icon-16px\" ng-if=\"binding.attachmentCount > 0\"><di-image image=\"attachment\" image-colour=\"button\"></di-image></div>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Admin'],\r\n\t\t\t\t\tfield: 'documentStateKey',\r\n\t\t\t\t\tnameLanguageKey: 'STATE KEY',\r\n\t\t\t\t\ttemplate: '<span>{{binding.documentStateKey}}</span>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t},\r\n\t\t\t    {\r\n\t\t\t        rights: ['Supplier'],\r\n\t\t\t        field: 'updated',\r\n\t\t\t        nameLanguageKey: '',\r\n\t\t\t        template:\r\n\t\t\t            '<div class=\"document-updated\" ng-if=\"binding.updated\" di-translate=\"EINVOICING.PORTAL.INVOICES.LISTS.UPDATED\"></div>',\r\n\t\t\t        cellClass: 'centeredcell'\r\n\t\t\t    }\r\n\t\t\t];\r\n\r\n\t\t\t// Status filters configuration\r\n\t\t\tvar statusFilters = [];\r\n\r\n\t\t\tvar dateTimeDefaultFilters = [\r\n\t\t        {\r\n\t\t        \tvalue: \"Last30Days\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.LAST_30_DAYS\",\r\n\t\t        \tdateTypes: [1, 2, 3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"LastMonth\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.LAST_MONTH\",\r\n\t\t        \tdateTypes: [1, 2, 3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"ThisMonth\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.THIS_MONTH\",\r\n\t\t        \tdateTypes: [1, 2, 3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"Yesterday\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.YESTERDAY\",\r\n\t\t        \tdateTypes: [1, 2, 3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"Today\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.TODAY\",\r\n\t\t        \tdateTypes: [1, 2, 3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"Custom\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.CUSTOM\",\r\n\t\t        \tisHidden: true,\r\n\t\t        \tdateTypes: [1, 2, 3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"Tomorrow\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.TOMORROW\",\r\n\t\t        \tdateTypes: [3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"NextMonth\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.NEXT_MONTH\",\r\n\t\t        \tdateTypes: [3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"Next30Days\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.NEXT_30_DAYS\",\r\n\t\t        \tdateTypes: [3]\r\n\t\t        }\r\n\t\t\t];\r\n\r\n\t\t\tvar dateTypesOptions = [\r\n\t\t\t\t{ value: 1, label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.TYPES.CREATED\" },\r\n\t\t\t\t{ value: 2, label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.TYPES.ISSUED\" },\r\n\t\t\t\t{ value: 3, label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.DATE.TYPES.PAYMENT_DUE\" }\r\n\t\t\t];\r\n\r\n\t\t    var sortOptions = [\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 1,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.INVOICE_NUMBER_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 2,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.INVOICE_NUMBER_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['Supplier'],\r\n\t\t            value: 11,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.ORDER_NUMBER_SUPPLIER_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['Buyer'],\r\n\t\t            value: 11,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.ORDER_NUMBER_BUYER_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['Supplier'],\r\n\t\t            value: 12,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.ORDER_NUMBER_SUPPLIER_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['Buyer'],\r\n\t\t            value: 12,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.ORDER_NUMBER_BUYER_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 3,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.CREATED_DATE_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 4,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.CREATED_DATE_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 5,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.ISSUE_DATE_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 6,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.ISSUE_DATE_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 7,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.PAYMENT_DUE_DATE_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 8,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.PAYMENT_DUE_DATE_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['Supplier'],\r\n\t\t            value: 13,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.BILL_TO_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['Supplier'],\r\n\t\t            value: 14,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.BILL_TO_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['Buyer'],\r\n\t\t            value: 15,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.BILL_FROM_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['Buyer'],\r\n\t\t            value: 16,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.BILL_FROM_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 17,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.LINES_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 18,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.LINES_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 19,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.TAX_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 20,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.TAX_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 9,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.TOTAL_INC_TAX_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 10,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.TOTAL_INC_TAX_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 21,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.STATE_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t            rights: ['User'],\r\n\t\t            value: 22,\r\n\t\t            label: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.SORT.STATE_DESC\"\r\n\t\t        }\r\n\t\t    ];\r\n\r\n\t\t\tvar initialStatusFilter;\r\n\t\t\tvar initialDateTimeFilter;\r\n\t\t\tvar initialDateType;\r\n\t\t\tvar initialSortOption;\r\n\r\n\t\t\t// Provider definition\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['authorizedObjectsFilter', 'CLIENT_ENUMS'];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\tfunction getOptionByValue(filterItems, value) {\r\n\t\t\t\tvar filterItem = _.find(filterItems, function (obj) {\r\n\t\t\t\t\treturn obj.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn filterItem;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP2H01E\", cfg, 'cfg');\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets required configuration for the grid.\r\n\t\t\t */\r\n\t\t\tfunction $get(authorizedObjectsFilter, clientEnums) {\r\n\t\t\t\tstatusFilters = [\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\torder: 1,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.unknown,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.ALL_BUYER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\torder: 1,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.unknown,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.ALL_SUPPLIER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\torder: 2,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.invalid,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.INVALID\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\torder: 3,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.invalidDraft,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.INVALID_DRAFT\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\torder: 4,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.pending,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.PENDING\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\torder: 5,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.sentreceived,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.SENTRECEIVED_BUYER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\torder: 6,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.sentreceived,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.SENTRECEIVED_SUPPLIER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\torder: 7,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.sendFailed,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.SEND_FAILED_SUPPLIER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\torder: 7,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.scheduled,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.SCHEDULED_FOR_PAYMENT\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['User'],\r\n\t\t\t\t\torder: 9,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.overdue,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.OVERDUE\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\torder: 8,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.paymentSent,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.PAYMENT_SENT_BUYER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\torder: 8,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.paymentSent,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.PAYMENT_SENT_SUPPLIER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\torder: 9,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.paymentReceived,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.PAYMENT_RECEIVED_BUYER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\torder: 9,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.paymentReceived,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.PAYMENT_RECEIVED_SUPPLIER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\torder: 10,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.inDispute,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.INDISPUTE_BUYER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\torder: 10,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.inDispute,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.INDISPUTE_SUPPLIER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['User'],\r\n\t\t\t\t\torder: 11,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.reconciliationInvalid,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.RECONCILIATIONINVALID\"\r\n\t\t\t\t},\r\n                {\r\n                \trights: ['Supplier'],\r\n                \torder: 12,\r\n                \tvalue: clientEnums.documentStateKey.exportFailed,\r\n                \tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.EXPORT_FAILED\"\r\n                },\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\torder: 13,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.cancelled,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.CANCELLED_BUYER\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\torder: 14,\r\n\t\t\t\t\tvalue: clientEnums.documentStateKey.cancelled,\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.FILTERS.STATE.CANCELLED_SUPPLIER\"\r\n\t\t\t\t}\r\n\t\t\t\t];\r\n\r\n\t\t\t\tbuttonsConfiguration = {\r\n\t\t\t\t\ttype: \"Invoice\",\r\n\t\t\t\t\tvisibleButtons: [],\r\n\t\t\t\t\tbuttonsSetOne: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"InvoiceWriter\", \"Supplier\"],\r\n\t\t\t\t\t\t\tname: 'edit',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.editInvoice,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"InvoiceReader\"],\r\n\t\t\t\t\t\t\tname: 'view',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewInvoice,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"InvoiceWriter\", \"Supplier\"],\r\n\t\t\t\t\t\t\tname: 'submitSmall',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.submit\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\", \"InvoiceReader\"],\r\n\t\t\t\t\t\t\tname: 'dispute',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.startDispute\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\", \"InvoiceReader\"],\r\n\t\t\t\t\t\t\tname: 'notDispute',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.endDispute\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tname: 'cancelInvoice',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.cancelInvoice\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tname: 'paid',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsPaidBuyer\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tname: 'notPaid',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsNotPaidBuyer\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tname: 'paid',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsPaidSupplier\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tname: 'notPaid',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsNotPaidSupplier\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tname: 'scheduled',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsScheduledForPayment\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tname: 'notScheduled',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsNotScheduledForPayment\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tname: 'release',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.release\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\", \"InvoiceWriter\"],\r\n\t\t\t\t\t\t\tname: 'deleteSmall',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.remove\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tbuttonsSetTwo: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"InvoiceReader\"],\r\n\t\t\t\t\t\t\tname: 'render',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.downloadInvoice,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"InvoiceReader\"],\r\n\t\t\t\t\t\t\tname: 'related',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewRelatedDocumentsInvoice,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tinitialStatusFilter = getOptionByValue(statusFilters, clientEnums.documentStateKey.unknown);\r\n\t\t\t\tinitialDateType = getOptionByValue(dateTypesOptions, 1);\r\n\t\t\t\tinitialDateTimeFilter = getOptionByValue(dateTimeDefaultFilters, 'Last30Days');\r\n\t\t\t\tinitialSortOption = getOptionByValue(sortOptions, 6);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgetTableConfiguration: getTableConfiguration,\r\n\t\t\t\t\tgetStatusFilters: getStatusFilters,\r\n\t\t\t\t\tgetDateTimeFilters: getDateTimeFilters,\r\n\t\t\t\t\tgetDateTypesOptions: getDateTypesOptions,\r\n\t\t\t\t\tgetSortableColumns: getSortableColumns,\r\n\t\t\t\t\tgetButtonsSetOneConfiguration: getButtonsSetOneConfiguration,\r\n\t\t\t\t\tgetButtonsSetTwoConfiguration: getButtonsSetTwoConfiguration,\r\n\t\t\t\t\tgetInitialFilter: getInitialFilter,\r\n\t\t\t\t\tgetInitialDateTimeFilter: getInitialDateTimeFilter,\r\n\t\t\t\t\tgetInitialDateType: getInitialDateType,\r\n\t\t\t\t\tgetInitialSortOption: getInitialSortOption,\r\n\t\t\t\t\tgetInitialStatusFilter: getInitialStatusFilter,\r\n\t\t\t\t\tgetFreeformSearchDefaultFilter: getFreeformSearchDefaultFilter\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of all filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialFilter() {\r\n\t\t\t\t\tvar initialFilters = [];\r\n\r\n\t\t\t\t\tinitialFilters.push(initialStatusFilter);\r\n\r\n\t\t\t\t\tinitialFilters.push(initialDateTimeFilter);\r\n\r\n\t\t\t\t\treturn initialFilters;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of status filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialStatusFilter() {\r\n\t\t\t\t\treturn initialStatusFilter;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of date time filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialDateTimeFilter(dateTypeId) {\r\n\t\t\t\t\tif (util.isDefined(dateTypeId) && dateTypeId === 3) {\r\n\t\t\t\t\t\tinitialDateTimeFilter = getOptionByValue(dateTimeDefaultFilters, 'Next30Days');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tinitialDateTimeFilter = getOptionByValue(dateTimeDefaultFilters, 'Last30Days');\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn initialDateTimeFilter;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets initial date type option\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialDateType() {\r\n\t\t\t\t\treturn initialDateType;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets grid configuration options.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getTableConfiguration() {\r\n\t\t\t\t\tconfig.columns = authorizedObjectsFilter.getAuthorizedObjects(columnDefinitions, false);\r\n\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Returns buttons configuration\t\t\t\t \r\n\t\t\t\t */\r\n\t\t\t\tfunction getButtonsSetOneConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetOne);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getButtonsSetTwoConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetTwo);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getConfiguration(array) {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(true);\r\n\r\n\t\t\t\t\tvar configuration = {\r\n\t\t\t\t\t\ttype: \"Invoice\",\r\n\t\t\t\t\t\tvisibleButtons: []\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconfiguration.visibleButtons.fill(authorizedObjectsFilter.getAuthorizedObjects(array, true));\r\n\t\t\t\t\treturn configuration;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets status filters\r\n\t\t\t\t */\r\n\t\t\t\tfunction getStatusFilters() {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(false);\r\n\t\t\t\t\tvar options = authorizedObjectsFilter.getAuthorizedObjects(statusFilters, false);\r\n\t\t\t\t\treturn options;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets date time default filters for the grid.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getDateTimeFilters(dateTypeId) {\r\n\t\t\t\t\tvar filters = dateTimeDefaultFilters;\r\n\r\n\t\t\t\t\tif (util.isDefined(dateTypeId)) {\r\n\r\n\t\t\t\t\t\tfilters = _.filter(dateTimeDefaultFilters, function (filter) {\r\n\t\t\t\t\t\t\treturn _.contains(filter.dateTypes, dateTypeId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn filters;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets list of available date types                     \r\n\t\t\t\t */\r\n\t\t\t\tfunction getDateTypesOptions() {\r\n\t\t\t\t\treturn dateTypesOptions;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets the column intially used to sort the grid results\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialSortOption() {\r\n\t\t\t\t\treturn initialSortOption;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets the columns which can be used to sort the grid\r\n\t\t\t\t */\r\n\t\t\t\tfunction getSortableColumns() {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(true);\r\n\t\t\t\t\tvar options = authorizedObjectsFilter.getAuthorizedObjects(sortOptions, true);\r\n\t\t\t\t\treturn options;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets the filter to use when filtering triggered by freeform search box\r\n\t\t\t\t */\r\n\t\t\t\tfunction getFreeformSearchDefaultFilter() {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tstatusFilter: getOptionByValue(getStatusFilters(), clientEnums.documentStateKey.unknown).value, //all\r\n\t\t\t\t\t\tsortOption: getOptionByValue(getSortableColumns(), 1).value,  //invoice number asc\r\n\t\t\t\t\t\tdateType: getOptionByValue(getDateTypesOptions(), 1).value,//created\r\n\t\t\t\t\t\tdateTimeFilter: getOptionByValue(getDateTimeFilters(), \"Custom\").value,\r\n\t\t\t\t\t\tfromDate: moment.utc([1900, 0, 1]).format(),// months, hours, minutes, seconds, and milliseconds are all zero indexed\r\n\t\t\t\t\t\ttoDate: moment.utc().format()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn InvoiceListConfiguratorProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/lists/invoiceListConfigurator.js","//{CODE:EUP2H}\r\n// di.einvoicing.ui.portal.portal.invoices.lists\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('InvoiceListController', InvoiceListController);\r\n\r\n\t\tInvoiceListController.$inject = [\r\n\t\t\t'diState',\r\n\t\t\t'translator',\r\n\t\t\t'notificationHandler',\r\n\t\t\t'invoiceListConfigurator',\r\n\t\t\t'$scope',\r\n\t\t\t'elementNotifier',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'currencyCache',\r\n\t\t\t'authorizedObjectsFilter',\r\n\t\t\t'authenticationData',\r\n\t\t\t'documentStateResolver',\r\n\t\t\t'userRightsRepository',\r\n\t\t\t'documentAttributeResolver',\r\n\t\t\t'invoiceRepository',\r\n\t\t\t'documentProxy',\r\n\t\t\t'$stateParams',\r\n\t\t\t'vmFiltersListConfigurator',\r\n\t\t\t'userActionsResolver',\r\n\t\t\t'modalSpinner',\r\n\t\t\t'documentDownloader',\r\n\t\t\t'invoiceActionVerifier',\r\n\t\t\t'dateFormatter',\r\n\t\t\t'listsParamsStore'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * Manages and configure invoice list grid.\r\n\t\t */\r\n\t\tfunction InvoiceListController(\r\n\t\t\tdiState,\r\n\t\t\ttranslator,\r\n\t\t\tnotificationHandler,\r\n\t\t\tinvoiceListConfigurator,\r\n\t\t\tscope,\r\n\t\t\telementNotifier,\r\n\t\t\tclientEnums,\r\n\t\t\tenumTranslator,\r\n\t\t\tcurrencyCache,\r\n\t\t\tauthorizedObjectsFilter,\r\n\t\t\tauthenticationData,\r\n\t\t\tdocumentStateResolver,\r\n\t\t\tuserRightsRepository,\r\n\t\t\tdocumentAttributeResolver,\r\n\t\t\tinvoiceRepository,\r\n\t\t\tdocumentProxy,\r\n\t\t\tstateParams,\r\n\t\t\tvmFiltersListConfigurator,\r\n\t\t\tuserActionsResolver,\r\n\t\t\tmodalSpinner,\r\n\t\t\tdocumentDownloader,\r\n\t\t\tinvoiceActionVerifier,\r\n\t\t\tdateFormatter,\r\n\t\t\tlistsParamsStore) {\r\n\r\n\t\t\tvar vm = this;\r\n\t\t\tvm.loading = true;\r\n\t\t\tvar resultsReachedNotification;\r\n\t\t\tvm.tableOptions = {};\r\n\t\t\tvm.buttonsSetOneOptions = {};\r\n\t\t\tvm.buttonsSetTwoOptions = {};\r\n\t\t\tvm.selectedFilters = {\r\n\t\t\t\tsearchText: \"\"\r\n\t\t\t};\r\n\t\t\tvm.labels = {};\r\n\t\t\tvm.invoices = [];\r\n\t\t\tvm.selectedStates = [];\r\n\t\t\tvm.selectedActions = [];\r\n\t\t\tvm.selectedAttributes = [];\r\n\t\t\tvm.selectedItemsCount = 0;\r\n\t\t\tvm.sortOptions = [];\r\n\t\t\tvm.statusOptions = [];\r\n\t\t\tvm.dateOptions = [];\r\n\t\t\tvm.dateTypes = [];\r\n\t\t\tvm.userCanEditInvoices = false;\r\n\t\t\tvm.filterInvoices = filterInvoices;\r\n\t\t\tvm.searchInvoices = searchInvoices;\r\n\r\n\t\t\tvm.goToInvoice = goToInvoice;\r\n\t\t\tvm.viewInvoice = viewInvoice;\r\n\r\n\t\t\tvm.submitInvoices = submitInvoices;\r\n\t\t\tvm.changeInvoicesDisputeFlag = changeInvoicesDisputeFlag;\r\n\t\t\tvm.voidInvoices = voidInvoices;\r\n\t\t\tvm.changeInvoicePaidStates = changeInvoicePaidStates;\r\n\t\t\tvm.flagAsScheduledForPayments = flagAsScheduledForPayments;\r\n\t\t\tvm.downloadRenderedInvoice = downloadRenderedInvoice;\r\n\t\t\tvm.releaseInvoices = releaseInvoices;\r\n\t\t\tvm.deleteInvoices = deleteInvoices;\r\n\t\t\tvm.goToRelated = goToRelated;\r\n\t\t\tvm.clearFilters = clearFilters;\r\n\r\n\t\t\tvm.orderChanged = orderChanged;\r\n\t\t\tvm.statusChanged = statusChanged;\r\n\t\t\tvm.dateChanged = dateChanged;\r\n\t\t\tvm.dateTypeChanged = dateTypeChanged;\r\n\t\t\tvm.onSelectedChanged = onSelectedChanged;\r\n\t\t\tvm.onPageSizeChanged = onPageSizeChanged;\r\n\t\t\tvm.onPageNumberChanged = onPageNumberChanged;\r\n\t\t\tvar spinner;\r\n\t\t\tinitialiseInvoicesGrid();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Initialises the invoices grid by configuring it and getting initial set of data.\r\n\t\t\t */\r\n\t\t\tfunction initialiseInvoicesGrid() {\r\n\t\t\t\tsetLabels();\r\n\t\t\t\tvmFiltersListConfigurator.configure(stateParams, vm, invoiceListConfigurator);\r\n\t\t\t\tvm.userCanEditInvoices = userHasWriteRight();\r\n\r\n\t\t\t\ttranslateColumnHeaders();\r\n\r\n\t\t\t\tcurrencyCache.getCurrencies().then(function () {\r\n\t\t\t\t\tgetInvoices();\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * sets labels values depending on user rights\r\n\t\t\t\t */\r\n\t\t\t\tfunction setLabels() {\r\n\t\t\t\t\tvar data = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.HEADER.TITLE_SUPPLIER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.LISTS.HEADER.TITLE_BUYER\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\tvm.labels = authorizedObjectsFilter.getAuthorizedObjectsAsAssociative(data, 'key', 'label');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Translates each column header on the grid.\r\n\t\t\t\t */\r\n\t\t\t\tfunction translateColumnHeaders() {\r\n\t\t\t\t    translator.whenReady()\r\n                        .then(function () {\r\n\t\t\t\t        _.each(vm.tableOptions.columns,\r\n\t\t\t\t\t\tfunction (column) {\r\n\t\t\t\t\t\t    column.name = translator.instantTranslate(column.nameLanguageKey);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t    });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Triggers the navigation to a new state with free form search applied\r\n\t\t\t * Filtering using the text search should ignore the set filters and use less restrictive filters\r\n\t\t\t */\r\n\t\t\tfunction searchInvoices() {\r\n\t\t\t\tvar filters = _.extend({}, (vm.searchDefaultFilter || {}), { searchText: vm.selectedFilters.searchText });\r\n\t\t\t\tfilterInvoices(filters);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Triggers the navigation to a new state with applied filters\r\n\t\t\t */\r\n\t\t\tfunction filterInvoices(filterOptions) {\r\n\t\t\t\tvm.loading = true;\r\n\t\t\t\tvar params = util.isRealObject(filterOptions)\r\n\t\t\t\t\t? filterOptions\r\n\t\t\t\t\t: {\r\n\t\t\t\t\t\tdateType: vm.selectedFilters.dateType.value,\r\n\t\t\t\t\t\tdateTimeFilter: vm.selectedFilters.dateTimeFilter.value,\r\n\t\t\t\t\t\tstatusFilter: vm.selectedFilters.statusFilter.value,\r\n\t\t\t\t\t\tsortOption: vm.selectedFilters.sortOption.value,\r\n\t\t\t\t\t\tfromDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.fromDate),\r\n\t\t\t\t\t\ttoDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.toDate),\r\n\t\t\t\t\t\tsearchText: vm.selectedFilters.searchText\r\n\t\t\t\t\t};\r\n\t\t\t\t//reset page number for each filtering\r\n\t\t\t\tparams = setInitialPaginationDetails(params);\r\n\r\n\t\t\t\t//save current filters to local storage before navigating away\r\n\t\t\t\tstoreParams(params);\r\n\t\t\t\tdiState.go('.', params, { reload: true });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Starts the loading spinner and calls the invoice repository to retrieve the invoices\r\n\t\t\t */\r\n\t\t\tfunction getInvoices() {\r\n\t\t\t\tif (util.isDefined(resultsReachedNotification)) {\r\n\t\t\t\t\tresultsReachedNotification.hide();\r\n\t\t\t\t}\r\n\t\t\t\tshowSpinner();\r\n\r\n\t\t\t\tvar customDateTimeFilter = null;\r\n\r\n\t\t\t\tif (vm.selectedFilters.customDateTimeFilter\r\n\t\t\t\t\t.fromDate !==\r\n\t\t\t\t\t\"\" &&\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter.toDate !== \"\") {\r\n\t\t\t\t\tcustomDateTimeFilter = {\r\n\t\t\t\t\t\tfromDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.fromDate),\r\n\t\t\t\t\t\ttoDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.toDate)\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t.getInvoices(\r\n\t\t\t\t\t\tvm.selectedFilters.searchText,\r\n\t\t\t\t\t\tvm.tableOptions.maxItemsToShow,\r\n\t\t\t\t\t\tvm.selectedFilters.dateType.value,\r\n\t\t\t\t\t\tvm.selectedFilters.dateTimeFilter.value,\r\n\t\t\t\t\t\tcustomDateTimeFilter,\r\n\t\t\t\t\t\tvm.selectedFilters.sortOption.value,\r\n\t\t\t\t\t\tvm.selectedFilters.statusFilter.value)\r\n\t\t\t\t\t.then(resolved, rejected)\r\n\t\t\t\t\t.finally(function() {\r\n\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tif (util.isUndefined(data)) {\r\n\t\t\t\t\t\tdata = [];\r\n\t\t\t\t\t}\r\n                    \r\n\t\t\t\t    if (data.length >= vm.tableOptions.maxItemsToShow) {\r\n\t\t\t\t        translator.translate(\"EINVOICING.PORTAL.INVOICES.LISTS.MAXIMUM_INVOICES_REACHED\")\r\n\t\t\t\t            .then(function(translated) {\r\n\t\t\t\t                resultsReachedNotification = elementNotifier.warning(\r\n\t\t\t\t                    translated,\r\n\t\t\t\t                    findElement('#invoicesList'),\r\n\t\t\t\t                    { clickToHide: true });\r\n\t\t\t\t                resultsReachedNotification.show();\r\n\t\t\t\t            });\r\n\t\t\t\t    }\r\n                    \r\n\t\t\t\t    if (util.isArray(data)) {\r\n\t\t\t\t\t\ttranslateDocumentData(data);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar array = [data];\r\n\t\t\t\t\t\ttranslateDocumentData(array);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvm.tableOptions.data.fill(data);\r\n\t\t\t\t\tvm.invoices.fill(data);\r\n\r\n\t\t\t\t\tresetAllowedActions();\r\n\r\n\t\t\t\t\tremoveSpinner();\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t   * Finds element in DOM\r\n\t\t\t\t   */\r\n\t\t\t\t\tfunction findElement(key) {\r\n\t\t\t\t\t\tif (util.isFunction(scope.findElement)) {\r\n\t\t\t\t\t\t\tvar element = scope.findElement(key);\r\n\r\n\t\t\t\t\t\t\treturn element;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction translateDocumentData(array) {\r\n\t\t\t\t\t\tdocumentStateResolver.resolveDocumentStates(\"invoice\", array);\r\n                        \r\n\t\t\t\t\t\t_.each(array,\r\n\t\t\t\t\t\t\tfunction (invoice) {\r\n\t\t\t\t\t\t\t    documentStateResolver\r\n\t\t\t\t\t\t\t        .calculateCurrentState('invoice', invoice.clientEInvoicingStateId, true)\r\n\t\t\t\t\t\t\t        .then(function(calculated) {\r\n\t\t\t\t\t\t\t            invoice.calculatedState = calculated;\r\n\t\t\t\t\t\t\t        });\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t    enumTranslator.translate(clientEnums.invoiceType, invoice.invoiceType)\r\n\t\t\t\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t\t\t\t            invoice.invoiceType = translated;\r\n\t\t\t\t\t\t\t        });\r\n\r\n\t\t\t\t\t\t\t    invoice.attributes = setAttributes(invoice);\r\n\t\t\t\t\t\t\t});\r\n                            \r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tfunction setAttributes(invoice) {\r\n\t\t\t\t\t\t    var array = documentAttributeResolver.resolveAttributeKeys(invoice.attributes);\r\n\r\n\t\t\t\t\t\t    if (isUserSupplier()) {\r\n\t\t\t\t\t\t        documentAttributeResolver.removeAttribute(array, clientEnums.documentAttribute.notScheduledForPayment);\r\n\t\t\t\t\t\t        documentAttributeResolver.removeAttribute(array, clientEnums.documentAttribute.scheduledForPayment);\r\n\t\t\t\t\t\t    }\r\n\r\n\t\t\t\t\t\t    return array;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t* Notifies about failure while loading invoice data\r\n\t\t\t\t*/\r\n\t\t\t\tfunction rejected() {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Edit or view selected invoice.\r\n\t\t\t */\r\n\t\t\tfunction goToInvoice() {\r\n\t\t\t\tvar selectedInvoice = getSelectedInvoice();\r\n\r\n\t\t\t\tif (util.isUndefined(selectedInvoice.id)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (vm.userCanEditInvoices && invoiceCanBeEdited(selectedInvoice)) {\r\n\t\t\t\t\tdiState.go('portal.invoices.editById', { id: selectedInvoice.id });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdiState.go('portal.invoices.viewById', { id: selectedInvoice.id });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction viewInvoice() {\r\n\t\t\t\tdiState.go('portal.invoices.viewById', { id: getSelectedInvoice().id });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Submits the invoice with the given id (flag for export and sending)\r\n\t\t\t */\r\n\t\t\tfunction submitInvoices() {\r\n\t\t\t\tvar array = getCurrentlySelectedInvoices();\r\n\r\n\t\t\t\t_.each(array,\r\n\t\t\t\t\tfunction (invoice) {\r\n\t\t\t\t\t\tsubmitInvoice(invoice);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction submitInvoice(invoice) {\r\n\r\n\t\t\t\t\tif (validPaymentDueDate(invoice) === false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t\t.submitInvoiceByDocumentId(invoice.documentId, invoice.invoiceNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\t\t\t\t\t\treloadDocumentState(invoice);\r\n\t\t\t\t\t\treloadDocumentActions(invoice);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Check the payment due date is not in the past\r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction validPaymentDueDate(invoice) {\r\n\t\t\t\t\t\tvar todaysDate = new Date();\r\n\t\t\t\t\t\tvar paymentDueDate = new Date(invoice.paymentDueDateTime);\r\n\t\t\t\t\t\tif (paymentDueDate.setHours(0, 0, 0, 0) < (todaysDate.setHours(0, 0, 0, 0))) {\r\n\t\t\t\t\t\t\tnotificationHandler\r\n\t\t\t\t\t\t\t\t.showError(\"EINVOICING.PORTAL.INVOICES.LISTS.SUBMIT_ERROR.PAYMENT_DUE_DATE\", invoice.invoiceNumber);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Downloads a rendered document for the selected invoice\r\n\t\t\t */\r\n\t\t\tfunction downloadRenderedInvoice() {\r\n\t\t\t\tvar invoice = getSelectedInvoice();\r\n\r\n\t\t\t\tif (util.isDefined(invoice)) {\r\n\t\t\t\t\tdocumentDownloader.downloadRenderedInvoice(invoice.documentId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Disputes selected invoices\r\n\t\t\t */\r\n\t\t\tfunction changeInvoicesDisputeFlag(inDispute) {\r\n\t\t\t\tvar array = getCurrentlySelectedInvoices();\r\n\r\n\t\t\t\t_.each(array,\r\n\t\t\t\t\tfunction (invoice) {\r\n\t\t\t\t\t\tchangeInvoiceDisputeFlag(invoice, inDispute);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction changeInvoiceDisputeFlag(invoice, inDispute) {\r\n\t\t\t\t\tvar disputeReason = '';\r\n\r\n\t\t\t\t\tif (inDispute) {\r\n\t\t\t\t\t\tdisputeReason = 'not implemented';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t\t.flagInDisputeInvoice(invoice.documentId, disputeReason, inDispute, invoice.invoiceNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\t\t\t\t\t\treloadDocumentState(invoice);\r\n\t\t\t\t\t\treloadDocumentActions(invoice);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Voids selected invoices\r\n\t\t\t */\r\n\t\t\tfunction voidInvoices() {\r\n\t\t\t\tvar array = getCurrentlySelectedInvoices();\r\n\r\n\t\t\t\t_.each(array,\r\n\t\t\t\t\tfunction (invoice) {\r\n\t\t\t\t\t\tvoidInvoice(invoice);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction voidInvoice(invoice) {\r\n\t\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t\t.voidInvoice(invoice.documentId, invoice.invoiceNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\t\t\t\t\t\tupdateResolvedState(invoice, clientEnums.documentStateKey.cancelled);\r\n\t\t\t\t\t\treloadDocumentActions(invoice);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Changes paid state of selected invoices\r\n\t\t\t */\r\n\t\t\tfunction changeInvoicePaidStates(isPaid) {\r\n\t\t\t\tvar array = getCurrentlySelectedInvoices();\r\n\r\n\t\t\t\t_.each(array,\r\n\t\t\t\t\tfunction (invoice) {\r\n\t\t\t\t\t\tchangeInvoicePaidState(invoice, isPaid);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction changeInvoicePaidState(invoice, isPaid) {\r\n\t\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t\t.flagPaidInvoice(invoice.documentId, isPaid, invoice.invoiceNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\t\t\t\t\t\treloadDocumentState(invoice);\r\n\t\t\t\t\t\treloadDocumentActions(invoice);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Changes scheduled state of selected invoices\r\n\t\t\t */\r\n\t\t\tfunction flagAsScheduledForPayments(isScheduled) {\r\n\t\t\t\tvar array = getCurrentlySelectedInvoices();\r\n\r\n\t\t\t\t_.each(array,\r\n\t\t\t\t\tfunction (invoice) {\r\n\t\t\t\t\t\tflagAsScheduledForPayment(invoice, isScheduled);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction flagAsScheduledForPayment(invoice, isScheduled) {\r\n\t\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t\t.flagAsScheduledForPayment(invoice.documentId, isScheduled, invoice.invoiceNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\t\t\t\t\t\treloadDocumentState(invoice);\r\n\t\t\t\t\t\treloadDocumentActions(invoice);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Releases selected mismatched invoices\r\n\t\t\t */\r\n\t\t\tfunction releaseInvoices() {\r\n\t\t\t\tvar array = getCurrentlySelectedInvoices();\r\n\r\n\t\t\t\tvar documentIds = [];\r\n\r\n\t\t\t\t_.each(array,\r\n\t\t\t\t\tfunction (invoice) {\r\n\t\t\t\t\t\tdocumentIds.push(invoice.documentId);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tvar reference = '';\r\n\r\n\t\t\t\tif (array.length === 1) {\r\n\t\t\t\t\treference = array[0].invoiceNumber;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t.releaseInvoices(documentIds, reference)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\t_.each(data,\r\n\t\t\t\t\t\tfunction (success, documentId) {\r\n\t\t\t\t\t\t\tvar foundInvoice = _.find(vm.invoices,\r\n\t\t\t\t\t\t\t\tfunction (invoice) {\r\n\t\t\t\t\t\t\t\t\treturn invoice.documentId === parseInt(documentId);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif (util.isDefined(foundInvoice)) {\r\n\r\n\t\t\t\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\t\t\t\tnotificationHandler.showSuccess(\"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.SUCCESS.RELEASED\",\r\n\t\t\t\t\t\t\t\t\t\tfoundInvoice.invoiceNumber);\r\n\r\n\t\t\t\t\t\t\t\t\treloadDocumentState(foundInvoice);\r\n\t\t\t\t\t\t\t\t\treloadDocumentActions(foundInvoice);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tnotificationHandler.showError(\"EINVOICING.PROXIES.INVOICE.RELEASE_ERROR\", foundInvoice.invoiceNumber);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * marks selected invoices as deleted\r\n\t\t\t */\r\n\t\t\tfunction deleteInvoices() {\r\n\t\t\t\tvar array = getCurrentlySelectedInvoices();\r\n\r\n\t\t\t\t_.each(array,\r\n\t\t\t\t\tfunction (invoice) {\r\n\t\t\t\t\t\tdeleteInvoice(invoice);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction deleteInvoice(invoice) {\r\n\t\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t\t.deleteInvoice(invoice.documentId, invoice.invoiceNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\t\t\t\t\t\tvar index = invoiceRepository.getIndex(vm.invoices, \"id\", invoice.id);\r\n\r\n\t\t\t\t\t\tvm.invoices.splice(index, 1);\r\n\t\t\t\t\t\tresetAllowedActions();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction goToRelated() {\r\n\t\t\t\tvar selected = getSelectedInvoice();\r\n\r\n\t\t\t\tif (util.isDefined(selected.documentId)) {\r\n\t\t\t\t\tdiState.go('portal.related.list', { id: selected.documentId });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Resets filters back to default values for the grid and reloads\r\n\t\t\t */\r\n\t\t\tfunction clearFilters() {\r\n\t\t\t\tvar initialFilters = {\r\n\t\t\t\t\tdateType: invoiceListConfigurator.getInitialDateType().value,\r\n\t\t\t\t\tdateTimeFilter: invoiceListConfigurator.getInitialDateTimeFilter().value,\r\n\t\t\t\t\tstatusFilter: invoiceListConfigurator.getInitialStatusFilter().value,\r\n\t\t\t\t\tsortOption: invoiceListConfigurator.getInitialSortOption().value,\r\n\t\t\t\t\tfromDate: undefined,\r\n\t\t\t\t\ttoDate: undefined,\r\n\t\t\t\t\tsearchText: \"\"\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilterInvoices(initialFilters);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Reloads invoice state from db\r\n\t\t\t */\r\n\t\t\tfunction reloadDocumentState(invoice) {\r\n\t\t\t\tdocumentProxy\r\n\t\t\t\t\t.getDocumentClientStateId(invoice.id, clientEnums.documentType.invoice)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(stateId) {\r\n\t\t\t\t\tupdateResolvedState(invoice, stateId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Reloads invoice allowed actions\r\n\t\t\t */\r\n\t\t\tfunction reloadDocumentActions(invoice) {\r\n\t\t\t\tinvoiceRepository.getAllowedActions(invoice.documentId, invoice.invoiceNumber)\r\n\t\t\t\t\t.then(resolved);\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tinvoice.actions = data;\r\n\t\t\t\t\tresetAllowedActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * updates invoice state attributes\r\n\t\t\t */\r\n\t\t\tfunction updateResolvedState(invoice, stateId) {\r\n\t\t\t    invoice.clientEInvoicingStateId = stateId;\r\n                \r\n\t\t\t    documentStateResolver.resolveDocumentState('invoice', stateId)\r\n\t\t\t        .then(function(resolved) {\r\n\t\t\t            invoice.clientEInvoicingState = resolved;\r\n\t\t\t        });\r\n\r\n\t\t\t\t\r\n\t\t\t\tgetCalculatedState(stateId).then(function(calculated) {\r\n\t\t\t\t    invoice.calculatedState = calculated;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets calculated state for display\r\n\t\t\t */\r\n\t\t\tfunction getCalculatedState(stateId) {\r\n\t\t\t\treturn documentStateResolver.calculateCurrentState('invoice', stateId, true);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Get currently selected invoices from the grid.\r\n\t\t\t */\r\n\t\t\tfunction getCurrentlySelectedInvoices() {\r\n\t\t\t\tvar selectedRows = [];\r\n\r\n\t\t\t\tvm.invoices.forEach(\r\n\t\t\t\t\tfunction addToSelected(item) {\r\n\t\t\t\t\t\tif (item.isSelected === true) {\r\n\t\t\t\t\t\t\tselectedRows.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn selectedRows;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets selected invoice\r\n\t\t\t */\r\n\t\t\tfunction getSelectedInvoice() {\r\n\t\t\t\tvar selectedRows = getCurrentlySelectedInvoices();\r\n\r\n\t\t\t\tif (selectedRows.length === 1) {\r\n\t\t\t\t\treturn selectedRows[0];\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Clears selected rows\r\n\t\t\t */\r\n\t\t\tfunction clearSelected() {\r\n\t\t\t\t_.each(vm.invoices,\r\n\t\t\t\t\tfunction (item) {\r\n\t\t\t\t\t\titem.isSelected = false;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tvm.selectedStates.clear();\r\n\t\t\t\tvm.selectedAttributes.clear();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when rows selection changes\r\n\t\t\t */\r\n\t\t\tfunction onSelectedChanged(items) {\r\n\t\t\t\tvm.selectedItemsCount = items.length;\r\n\r\n\t\t\t\tvar arrayStates = [];\r\n\t\t\t\tvar arrayAttributes = [];\r\n\t\t\t\tvar arrayActions = [];\r\n\t\t\t\t_.each(items,\r\n\t\t\t\t\tfunction (item) {\r\n\t\t\t\t\t\tarrayStates.push(item.documentStateKey);\r\n\r\n\t\t\t\t\t\tarrayActions.push(item.actions);\r\n\r\n\t\t\t\t\t\tvar array = [];\r\n\r\n\t\t\t\t\t\tarray.fill(item.attributes);\r\n\r\n\t\t\t\t\t\t_.each(array,\r\n\t\t\t\t\t\t\tfunction (attribute) {\r\n\t\t\t\t\t\t\t\tarrayAttributes.push(attribute);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tvar resolvedActions = userActionsResolver.resolveActions(arrayActions, true);\r\n\r\n\t\t\t\tvm.selectedAttributes.fill(arrayAttributes);\r\n\t\t\t\tvm.selectedStates.fill(arrayStates);\r\n\t\t\t\tvm.selectedActions.fill(resolvedActions);\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when order filter has changed\r\n\t\t\t */\r\n\t\t\tfunction orderChanged(value) {\t\t\t    \r\n\t\t\t\tvar item = _.find(vm.sortOptions,\r\n\t\t\t\t\tfunction (option) {\r\n\t\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.sortOption = item;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when status filter has changed\r\n\t\t\t */\r\n\t\t\tfunction statusChanged(value) {\r\n\t\t\t\tvar item = _.find(vm.statusOptions,\r\n\t\t\t\t\tfunction (option) {\r\n\t\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.statusFilter = item;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when date filter has changed\r\n\t\t\t */\r\n\t\t\tfunction dateChanged(value, customDate) {\r\n\t\t\t\tvar item;\r\n\t\t\t\tif (util.isDefined(customDate)) {\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter = customDate;\r\n\r\n\t\t\t\t\titem = _.find(vm.dateOptions,\r\n\t\t\t\t\t\tfunction (option) {\r\n\t\t\t\t\t\t\treturn option.value === 'Custom';\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (util.isDefined(item)) {\r\n\t\t\t\t\t\tvm.item = item;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\titem = _.find(vm.dateOptions,\r\n\t\t\t\t\t\tfunction (option) {\r\n\t\t\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.dateTimeFilter = item;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when date type changes\r\n\t\t\t */\r\n\t\t\tfunction dateTypeChanged(value) {\r\n\t\t\t\tvar item = _.find(vm.dateTypes,\r\n\t\t\t\t\tfunction (option) {\r\n\t\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.dateType = item;\r\n\r\n\t\t\t\tvm.dateOptions = invoiceListConfigurator.getDateTimeFilters(vm.selectedFilters.dateType.value);\r\n\r\n\t\t\t\tvm.selectedFilters.dateTimeFilter = invoiceListConfigurator\r\n\t\t\t\t\t.getInitialDateTimeFilter(vm.selectedFilters.dateType.value);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Event handler when the size of the page changes\r\n\t\t\t */\r\n\t\t\tfunction onPageSizeChanged(newSize) {\r\n\t\t\t\tupdateStoredParams({ pageSize: newSize, pageNumber: 1 });\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Event handler when the page changes\r\n\t\t\t */\r\n\t\t\tfunction onPageNumberChanged(newPageNumber) {\r\n\t\t\t\tupdateStoredParams({ pageNumber: newPageNumber });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Checks if invoice can be edited\r\n\t\t\t */\r\n\t\t\tfunction invoiceCanBeEdited(invoice) {\r\n\t\t\t\treturn invoiceActionVerifier.canBeEdited(invoice);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Checks if user has write rights\r\n\t\t\t */\r\n\t\t\tfunction userHasWriteRight() {\r\n\t\t\t\treturn userRightsRepository.userHasRight(\"InvoiceWriter\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Checks if users is a supplier\r\n\t\t\t */\r\n\t\t\tfunction isUserSupplier() {\r\n\t\t\t\treturn userRightsRepository.userHasRight(\"Supplier\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * resets allowed actions\r\n\t\t\t */\r\n\t\t\tfunction resetAllowedActions() {\r\n\t\t\t\tvm.selectedItemsCount = 0;\r\n\t\t\t\tvm.selectedActions.clear();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Adds spinner to the page\r\n\t\t\t*/\r\n\t\t\tfunction showSpinner() {\r\n\t\t\t\tspinner = modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes spinner from the page\r\n\t\t\t*/\r\n\t\t\tfunction removeSpinner() {\r\n\t\t\t\tif (spinner) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t* Stores the params in the local storage\r\n\t\t\t*/\r\n\t\t\tfunction storeParams(params) {\r\n\t\t\t\tlistsParamsStore.set(\"invoices\", params);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Updates the params in the local storage\r\n\t\t\t */\r\n\t\t\tfunction updateStoredParams(params) {\r\n\t\t\t\tlistsParamsStore.update(\"invoices\", params);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Extends the source object with pageSize set to the current paginationPageSize and pageNumber set to 1\r\n\t\t\t */\r\n\t\t\tfunction setInitialPaginationDetails(source) {\r\n\t\t\t\treturn _.extend(source,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpageSize: vm.tableOptions.paginationPageSize,\r\n\t\t\t\t\t\tpageNumber: 1\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn InvoiceListController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/lists/invoiceListController.js","define([\r\n    './product-lines.directive',\r\n    './product-lines.controller',\r\n    './column-visibility-toggle/_loader',\r\n    './item-listener.controller'\r\n], function (\r\n    diProductLinesDirectiveLoader,\r\n    productLinesControllerLoader,\r\n    columnVisibilityToggleLoader,\r\n    itemListenerControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diProductLinesDirectiveLoader(module);\r\n        productLinesControllerLoader(module);\r\n        columnVisibilityToggleLoader(module);\r\n        itemListenerControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-lines/_loader.js","define([\r\n    './column-visibility-toggle.controller',\r\n    './column-visibility-toggle.directive'\r\n], function (\r\n    columnVisibilityToggleControllerLoader,\r\n    columnVisibilityToggleDirectiveLoader\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    columnVisibilityToggleControllerLoader(module);\r\n\t    columnVisibilityToggleDirectiveLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-lines/column-visibility-toggle/_loader.js","//{CODE:CVT02}\r\n// di.einvoicing.ui.portal.components.productLines.components\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.controller('ColumnVisibilityToggleController', ColumnVisibilityToggleController);\r\n\r\n\t\tColumnVisibilityToggleController.$inject = [\r\n\t\t'$scope', '$rootScope', 'scrollbarResizer'];\r\n\r\n\t\tfunction ColumnVisibilityToggleController(scope, rootScope, scrollbarResizer) {\r\n\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvm.manageColumnVisibility = manageColumnVisibility;\r\n\t\t\t\r\n\t\t\treturn;\r\n\r\n\t\t\t//setup so that the binds are set for each object, then sets class on the button to highlight or not\r\n\t\t\tfunction manageColumnVisibility(item, buttonName) {\r\n\t\t\t\tswitch (buttonName) {\r\n\t\t\t\t\tcase 'isVisible':\r\n\t\t\t\t\t\titem.isVisible = true;\r\n\t\t\t\t\t\titem.isColumn = false;\r\n\t\t\t\t\t\titem.isHidden = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'isHidden':\r\n\t\t\t\t\t\titem.isHidden = true;\r\n\t\t\t\t\t\titem.isColumn = false;\r\n\t\t\t\t\t\titem.isVisible = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'isColumn':\r\n\t\t\t\t\t\titem.isColumn = true;\r\n\t\t\t\t\t\titem.isVisible = false;\r\n\t\t\t\t\t\titem.isHidden = false;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t}\r\n\t\t\t\trootScope.$broadcast('refreshWatchers');\r\n\t\t\t    scrollbarResizer.resizeHorizontalScrollbar();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ColumnVisibilityToggleController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-lines/column-visibility-toggle/column-visibility-toggle.controller.js","//{CODE:CVT01}\r\n// di.einvoicing.ui.portal.components.productLines.components\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.directive('diColumnVisibilityToggle', diColumnVisibilityToggle);\r\n\r\n\t\tdiColumnVisibilityToggle.$inject = ['translator'];\r\n\r\n\t\tfunction diColumnVisibilityToggle(translator) {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tbindToObject: '=',\r\n\t\t\t\t\tbindToIsVisibleProperty: '@',\r\n\t\t\t\t\tbindToIsHiddenProperty: '@',\r\n\t\t\t\t\tbindToIsColumnProperty: '@',\r\n\t\t\t\t\tbindToMandatory: '@'\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: 'ColumnVisibilityToggleController',\r\n\t\t\t\tcontrollerAs: 'columnVisibilityToggleController',\r\n\t\t\t\ttemplate: template\r\n\t\t\t};\r\n\r\n\t\t\tfunction template() {\r\n\t\t\t\tvar html = '<div style=\"display: flex; padding-bottom: 5px;\"><div class=\"btn-group small rounded\">\\\r\n\t\t\t\t\t\t<button\\\r\n\t\t\t\t\t\t\t\t\tclass=\"btn outline btn-icon small\"\\\r\n\t\t\t\t\t\t\t\t\tng-click=\"columnVisibilityToggleController.manageColumnVisibility(bindToObject, \\'isColumn\\')\"\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"bindToObject[bindToIsColumnProperty]\"\\\r\n\t\t\t\t\t\t\t\t\tng-class=\"{\\'selected\\': bindToObject[bindToIsColumnProperty] === true}\"\\\r\n\t\t\t\t\t\t\t\t\ttitle=\"' + translator.instantTranslate('EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.OPTIONAL_FIELDS.TOGGLE_BUTTONS.SHOW_AS_COLUMN') + '\">\\\r\n\t\t\t\t\t\t\t\t\t<di-image\\\r\n\t\t\t\t\t\t\t\t\t\timage=\"showAsColumns\"\\\r\n\t\t\t\t\t\t\t\t\t\timage-colour=\"button\"></di-image>\\\r\n\t\t\t\t\t\t </button>\\\r\n\t\t\t\t\t\t\t<button\\\r\n\t\t\t\t\t\t\t\t\tclass=\"btn outline btn-icon small\"\\\r\n\t\t\t\t\t\t\t\t\tng-click=\"columnVisibilityToggleController.manageColumnVisibility(bindToObject, \\'isVisible\\')\"\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"bindToObject[bindToIsVisibleProperty]\"\\\r\n\t\t\t\t\t\t\t\t\tng-class=\"{\\'selected\\': bindToObject[bindToIsVisibleProperty] === true}\"\\\r\n\t\t\t\t\t\t\t\t\timage-colour=\"button\"\\\r\n\t\t\t\t\t\t\t\t\ttitle=\"' + translator.instantTranslate('EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.OPTIONAL_FIELDS.TOGGLE_BUTTONS.SHOW_IN_DETAILS') + '\">\\\r\n\t\t\t\t\t\t\t\t\t<di-image\\\r\n\t\t\t\t\t\t\t\t\t\timage=\"showAsColumnsDetails\"\\\r\n\t\t\t\t\t\t\t\t\t\timage-colour=\"button\"></di-image>\\\r\n\t\t\t\t\t\t </button>\\\r\n\t\t\t\t\t\t <button\\\r\n\t\t\t\t\t\t\t\t\tng-if=\"!bindToObject[bindToMandatory]\"\\\r\n\t\t\t\t\t\t\t\t\tclass=\"btn outline btn-icon small\"\\\r\n\t\t\t\t\t\t\t\t\tng-click=\"columnVisibilityToggleController.manageColumnVisibility(bindToObject, \\'isHidden\\')\"\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"bindToObject[bindToIsHiddenProperty]\"\\\r\n\t\t\t\t\t\t\t\t\tng-class=\"{\\'selected\\': bindToObject[bindToIsHiddenProperty] === true}\"\\\r\n\t\t\t\t\t\t\t\t\timage-colour=\"button\"\\\r\n\t\t\t\t\t\t\t\t\ttitle=\"' + translator.instantTranslate('EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.OPTIONAL_FIELDS.TOGGLE_BUTTONS.HIDE') + '\">\\\r\n\t\t\t\t\t\t\t\t\t<di-image\\\r\n\t\t\t\t\t\t\t\t\t\timage=\"hideColumnDetails\"\\\r\n\t\t\t\t\t\t\t\t\t\timage-colour=\"button\">\\\r\n\t\t\t\t\t\t\t\t\t</di-image>\\\r\n\t\t\t\t\t\t </button>\\\r\n\t\t\t\t\t\t <button\\\r\n\t\t\t\t\t\t\t\t\tng-if=\"bindToObject[bindToMandatory]\"\\\r\n\t\t\t\t\t\t\t\t\tclass=\"btn outline btn-icon-disabled small\"\\\r\n\t\t\t\t\t\t\t\t\tdisabled=\"true\">\\\r\n\t\t\t\t\t\t\t\t\t<di-image\\\r\n\t\t\t\t\t\t\t\t\t\timage=\"hideColumnDetails\"\\\r\n\t\t\t\t\t\t\t\t\t\timage-colour=\"offWhite\">\\\r\n\t\t\t\t\t\t\t\t\t</di-image>\\\r\n\t\t\t\t\t\t </button>\\\r\n\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t<label\\\r\n\t\t\t\t\t\t\tclass=\"label\"\\\r\n\t\t\t\t\t\t\tstyle=\"padding: 5px;\" ng-bind=\"::(bindToObject.heading | diTranslate)\"></label>\\\r\n\t\t\t\t\t\t</div>';\r\n\r\n\t\t\t\treturn html;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diColumnVisibilityToggle;\r\n\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-lines/column-visibility-toggle/column-visibility-toggle.directive.js","//{CODE:EUP67}\r\n// di.einvoicing.ui.portal.components.productLines.components\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.controller('ItemListenerController', ItemListenerController);\r\n\r\n\t\tItemListenerController.$inject = [\r\n\t\t\t'$scope'];\r\n\r\n\t\tfunction ItemListenerController(\r\n\t\t\tscope) {\r\n\t\t\t\r\n\t\t\tvar util = $di.utility.util;\r\n\r\n\t\t\tvar vm = this;\r\n\t\t\tvm.onChange = onChange;\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler for on change action\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction onChange() {\t\t\t\t\r\n\t\t\t\tif (scope.onChangeAccessor && util.isFunction(scope.onChangeAccessor)) {\r\n\t\t\t\t\tscope.onChangeAccessor();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ItemListenerController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-lines/item-listener.controller.js","//{CODE:EUP44}\r\n// di.einvoicing.ui.portal.invoices.editor.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.controller('ProductLinesController', ProductLinesController);\r\n\r\n        ProductLinesController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'$rootScope',\r\n\t\t\t'taxProxy',\r\n\t\t\t'invoiceProxy',\r\n\t\t\t'staticLookupProxy',\r\n\t\t\t'notificationHandler',\r\n\t\t\t'associativeArrayConvertor',\r\n\t\t\t'scopeCacheFactory',\r\n\t\t\t'unitOfMeasureRepository',\r\n\t\t\t'$timeout',\r\n\t\t\t'debounce',\r\n\t\t\t'formAnalyser',\r\n            'controlsRestrictionManager',\r\n        ];\r\n\r\n        function ProductLinesController(\r\n\t\t\tscope,\r\n\t\t\trootScope,\r\n\t\t\ttaxProxy,\r\n\t\t\tinvoiceProxy,\r\n\t\t\tstaticLookupProxy,\r\n\t\t\tnotificationHandler,\r\n\t\t\tassociativeArrayConvertor,\r\n\t\t\tscopeCacheFactory,\r\n\t\t\tunitOfMeasureRepository,\r\n\t\t\t$timeout,\r\n\t\t\tdebounce,\r\n\t\t\tformAnalyser,\r\n            controlsRestrictionManager) {\r\n\r\n            var guard = $di.exception.guard;\r\n            var util = $di.utility.util;\r\n\r\n            var vm = this;\r\n            vm.currentEditLine = {};\r\n            var lineForms = {};\r\n\r\n            vm.readonly = util.isDefined(scope.readonly) ? scope.readonly : false;\r\n            vm.scopeCache = util.isDefined(scope.scopeCache) ? scope.scopeCache : scopeCacheFactory.create(scope);\r\n            vm.settings = scope.settings;\r\n            vm.lines = scope.lines;\r\n            vm.tableFields = _.clone(scope.settings);\r\n            vm.expanded = false;\r\n            vm.countries = [];\r\n            vm.taxData = { taxes: {} };\r\n            vm.productTypes = null;\r\n            vm.unitsOfMeasure = null;\r\n            vm.originCountryId = null;\r\n            vm.currencyId = -1;\r\n            //for an unknown reason, tooltips work only with text values (cannot use a {{}} expression)\r\n            vm.languageKeyParent = util.isDefined(scope.overrideLanguageKey) ? scope.overrideLanguageKey : 'EINVOICING.PORTAL.COMPONENTS.PRODUCT_LINES';\r\n            vm.manageColumnsLanguageKey = vm.languageKeyParent + '.MANAGE_COLUMNS';\r\n            vm.lineItemsLanguageKey = vm.languageKeyParent + '.ITEMS';\r\n            vm.addNewLineLanguageKey = vm.languageKeyParent + '.ADD_NEW_LINE';\r\n\r\n            //line methods\r\n            vm.addLine = addLine;\r\n            vm.removeLine = removeLine;\r\n            vm.selectLine = selectLine;\r\n            vm.populateOptionalFields = populateOptionalFields;\r\n            vm.getExpandedLines = getExpandedLines;\r\n            vm.getCollapsedLines = getCollapsedLines;\r\n            vm.collapseAllExpandedLines = collapseAllExpandedLines;\r\n            vm.expandAllLines = expandAllLines;\r\n            vm.getLineCount = getLineCount;\r\n            vm.getExpandedLineCount = getExpandedLineCount;\r\n            vm.getCollapsedLineCount = getCollapsedLineCount;\r\n            vm.getVisibleColumnsCount = getVisibleColumnsCount;\r\n            vm.getVisibleColumns = getVisibleColumns;\r\n            vm.getInvisibleColumns = getInvisibleColumns;\r\n            vm.getEditableColumns = getEditableColumns;\r\n            vm.getHideableColumns = getHideableColumns;\r\n            vm.toggleColumnVisibility = toggleColumnVisibility;\r\n            vm.getUnitOfmeasureLabel = getUnitOfmeasureLabel;\r\n            vm.lineFormCreated = lineFormCreated;\r\n            vm.allowAddNewLine = true;\r\n\r\n            //event handlers\r\n            vm.productCodeChanged = productCodeChanged;\r\n            vm.productStandardCodeChanged = productStandardCodeChanged;\r\n            vm.productTypeChanged = productTypeChanged;\r\n            vm.productUnitOfMeasureChanged = productUnitOfMeasureChanged;\r\n            vm.onOriginCountryChanged = onOriginCountryChanged;\r\n            vm.lineChanged = lineChanged;\r\n            vm.subscribeToInvoiceDetailsChange = scope.subscribeToInvoiceDetailsChange;\r\n            vm.taxCodeChanged = taxCodeChanged;\r\n\r\n            controlsRestrictionManager.addOptionsSubscription((options) => {\r\n                vm.allowAddNewLine = options.allowAddNewLine;\r\n            });\r\n\r\n            var unWatchLineMonetaryChanges = function () {};\r\n            var unWatchLineChanges = function() {};\r\n\r\n            init();\r\n\r\n            return;\r\n\r\n            function init() {\r\n                if (scope.subscribeToInvoiceDetailsChange) {\r\n                    scope.subscribeToInvoiceDetailsChange(setChangedInvoiceDetails);\r\n                }\r\n\r\n                scope.$on('$destroy', function () {\r\n                    tearDown();\r\n                });\r\n\r\n                if (!vm.readonly) {\r\n                    getProductTypes();\r\n                }\r\n                getUnitsOfMeasure();\r\n\r\n                staticLookupProxy\r\n\t\t\t\t\t.get('Country')\r\n\t\t\t\t\t.then(function (data) {\r\n\t\t\t\t\t    vm.countries.fill(data);\r\n\r\n\t\t\t\t\t    scope.$watchCollection(function () { return scope.lines; },\r\n\t\t\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\t\t    _.each(scope.lines, function (line) {\r\n\t\t\t\t\t\t\t        var originCountry = _.find(vm.countries, function (country) {\r\n\t\t\t\t\t\t\t            return country.code === line.originCountry;\r\n\t\t\t\t\t\t\t        });\r\n\r\n\t\t\t\t\t\t\t        line.originCountryId = (originCountry || {}).id || -1;\r\n\t\t\t\t\t\t\t        line.originCountryName = (originCountry || {}).name || null;\r\n\t\t\t\t\t\t\t    });\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n                var unwatch = scope.$watch(function () { return scope.optionalFields }, function (value) {\r\n                    if (util.isDefined(value)) {\r\n                        populateOptionalFields();\r\n                        unwatch();\r\n                    }\r\n                });\r\n            }\r\n\r\n            /**\r\n\t\t\t*  Destroy all state, watchers, any event listeners and subscriptions\r\n\t\t\t*/\r\n            function tearDown() {\r\n                unWatchLineMonetaryChanges();\r\n                unWatchLineChanges();\r\n            }\r\n\r\n            /**\r\n\t\t\t* Adds a new row to the invoice table.\r\n\t\t\t*/\r\n            function addLine() {\r\n                var newLine = {\r\n                    editing: false,\r\n                    lineNumber: vm.lines.length + 1,\r\n                    unitOfMeasureId: 1553,\r\n                    id: getNewId(),\r\n                    productType: 1\r\n                }\r\n\r\n                vm.lines.push(newLine);\r\n\r\n                if (scope.onChange) {\r\n                    scope.onChange();\r\n                }\r\n\r\n                lineChanged();\r\n\r\n                scope.$evalAsync(function () {\r\n                    selectLine(newLine, null, true);\r\n                });\r\n            }\r\n\r\n            function getNewId() {\r\n                var newId = 0;\r\n                var lastIndex = _.findLastIndex(vm.lines,\r\n\t\t\t        function (line) {\r\n\t\t\t            return line.id < 0;\r\n\t\t\t        });\r\n                if (lastIndex !== -1) {\r\n                    var lastLine = vm.lines[lastIndex];\r\n                    if (lastLine) {\r\n                        newId = lastLine.id;\r\n                    }\r\n                }\r\n\r\n                return newId - 1;\r\n            }\r\n\r\n            /**\r\n\t\t\t * Removes the given line from the collection.\r\n\t\t\t * @param line\r\n\t\t\t */\r\n            function removeLine(line, $event) {\r\n                guard.throwIfNullOrUndefined(\"EUP4404E\", line, \"line\");\r\n\r\n                if (util.isDefined($event)) {\r\n                    $event.stopPropagation();\r\n                }\r\n\r\n                line.quantity = 0;\r\n\r\n                if (line === vm.currentEditLine) {\r\n                    unWatchLineMonetaryChanges();\r\n                    unWatchLineChanges();\r\n                }\r\n\r\n                vm.lines.fill(_.reject(vm.lines, function (current) {\r\n                    return current.lineNumber === line.lineNumber;\r\n                }));\r\n\r\n                delete lineForms[line.id.toString()];\r\n\r\n                reseedLineNumbers();\r\n\r\n                refreshLines();\r\n\r\n                if (scope.onChange) {\r\n                    scope.onChange();\r\n                }\r\n            }\r\n\r\n            function lineFormCreated(lineId, form) {\r\n                lineForms[lineId.toString()] = form;\r\n\r\n                formAnalyser.allowCascadingDirty(form, false);\r\n            }\r\n\r\n            function getLineForm(line) {\r\n                var lineIdStr = line.id.toString();\r\n                var form = lineForms[lineIdStr];\r\n\r\n                return form;\r\n            }\r\n\r\n            /**\r\n\t\t\t * Selects the line\r\n\t\t\t * @param line\r\n\t\t\t */\r\n            function selectLine(line, event, isNew) {\r\n                guard.throwIfNullOrUndefined(\"EUP4401E\", line, \"line\");\r\n\r\n                if (vm.readonly) {\r\n                    line.expanded = !line.expanded;\r\n\r\n                    scope.$broadcast('refreshWatchers');\r\n                } else {\r\n                    deSelectCurrentEditLine();\r\n\r\n                    line.editing = true;\r\n                    line.expanded = true;\r\n                    \r\n                    unWatchLineMonetaryChanges = watchLineMonetaryChanges(line);\r\n                    unWatchLineChanges = watchLineChanges();\r\n\r\n                    vm.currentEditLine = line;\r\n\r\n                    var form = getLineForm(line);\r\n\r\n                    formAnalyser.allowCascadingDirty(form, true);\r\n\r\n                    if (!isNew) {\r\n                        var isValid = formAnalyser.isFormValid(form);\r\n\r\n                        if (!isValid) {\r\n                            formAnalyser.dirtyTrackedElements(form);\r\n                        }\r\n                    }\r\n\r\n                    $timeout(function () {\r\n                        scope.$broadcast('resumeWatchers', line.id.toString());\r\n                    }, 0, false);\r\n\r\n                    \r\n                }\r\n\r\n                return true;\r\n            }\r\n\r\n            function deSelectCurrentEditLine() {\r\n                if (util.isUndefined(vm.currentEditLine.id)) {\r\n                    return;\r\n                }\r\n\r\n                vm.currentEditLine.priceBaseQuantity = vm.currentEditLine.priceBaseQuantity > 0 ? vm.currentEditLine.priceBaseQuantity : 1;\r\n\r\n                vm.currentEditLine.editing = false;\r\n                vm.currentEditLine.expanded = false;\r\n\r\n                unWatchLineMonetaryChanges();\r\n                unWatchLineChanges();\r\n\r\n                var form = getLineForm(vm.currentEditLine);\r\n                var lineIdStr = vm.currentEditLine.id.toString();\r\n\r\n                formAnalyser.allowCascadingDirty(form, false);\r\n\r\n                $timeout(function () {\r\n                    scope.$broadcast('suspendWatchers', lineIdStr);\r\n                }, 0, false).then(function () {\r\n                    formAnalyser.dirtyTrackedElements(form);\r\n                });\r\n            }\r\n\r\n            function refreshLines() {\r\n                scope.$broadcast('refreshWatchers');\r\n                scope.$emit('calculateInvoiceTotals');\r\n            }\r\n\r\n            /**\r\n\t\t\t* Watch a single line for relevant monetaty changes and re-calculate totals\r\n\t\t\t* @param line\r\n\t\t\t*/\r\n            function watchLineMonetaryChanges(line) {\r\n                return scope.$watch(\r\n\t\t            function () {\r\n\t\t                return {\r\n\t\t                    'quantity': line.quantity,\r\n\t\t                    'unitPrice': line.unitPrice,\r\n\t\t                    'allowanceAmount': line.allowanceAmount,\r\n\t\t                    'chargeAmount': line.chargeAmount,\r\n\t\t                    'taxCode': line.taxCode,\r\n\t\t                    'priceBaseQuantity': line.priceBaseQuantity\r\n\t\t                }\r\n\t\t            },\r\n\t\t            debounce(\r\n\t\t                function () {\r\n\t\t                    scope.$emit('calculateInvoiceTotals');\r\n\t\t                },\r\n\t\t                250),\r\n\t\t            true);\r\n            }\r\n\r\n            /**\r\n           * Watch a single line for all changes - for dirty checking\r\n           */\r\n            function watchLineChanges() {\r\n                return scope.$watch(\r\n                   \"productLinesCtrl.currentEditLine\",\r\n                   function (newLine, oldLine) {\r\n                       oldLine.quantityUnit = newLine.quantityUnit; //keeps changing when line is selected?\r\n\r\n                       if (!angular.equals(newLine, oldLine)) {\r\n                           lineChanged();\r\n                       }\r\n                   }, true\r\n               );\r\n            }\r\n\r\n            /**\r\n             * Returns all columns that are marked as expanded\r\n             */\r\n            function getExpandedLines() {\r\n                return _.filter(vm.lines, function (line) {\r\n                    return line.expanded === true;\r\n                });\r\n            }\r\n\r\n            /**\r\n\t\t\t* Returns all columns that are not marked as expanded\r\n\t\t\t*/\r\n            function getCollapsedLines() {\r\n                return _.filter(vm.lines, function (line) {\r\n                    return line.expanded !== true;\r\n                });\r\n            }\r\n\r\n            /**\r\n\t\t\t * Any expanded lines are placed into in-line mode.\r\n\t\t\t */\r\n            function collapseAllExpandedLines() {\r\n                vm.expanded = false;\r\n\r\n                _.each(vm.getExpandedLines(), function (line) {\r\n                    if (!line.editing) {\r\n                        line.expanded = false;\r\n                    }\r\n                });\r\n\r\n                deSelectCurrentEditLine();\r\n\r\n                scope.$broadcast('refreshWatchers');\r\n            }\r\n\r\n            /**\r\n\t\t\t * Expands all collapsed invoice lines.\r\n\t\t\t */\r\n            function expandAllLines() {\r\n                vm.expanded = true;\r\n\r\n                _.each(vm.getCollapsedLines(), function (line) {\r\n                    line.expanded = true;\r\n                });\r\n\r\n                scope.$broadcast('refreshWatchers');\r\n            }\r\n\r\n            function getLineCount() {\r\n                return vm.lines.length;\r\n            }\r\n\r\n            function getCollapsedLineCount() {\r\n                return getLineCount() - getExpandedLineCount();\r\n            }\r\n\r\n            function getExpandedLineCount() {\r\n                return getExpandedLines().length;\r\n            }\r\n\r\n            /**\r\n\t\t\t * Keeps the invoice line numbers in sync when adding/removing lines.\r\n\t\t\t */\r\n            function reseedLineNumbers() {\r\n                _.each(vm.lines, function (current, index) {\r\n                    current.lineNumber = index + 1;\r\n                });\r\n            }\r\n\r\n            /**\r\n\t\t\t * Returns all columns that are marked as a column\r\n\t\t\t */\r\n            function getVisibleColumnsCount() {\r\n                return _.filter(vm.tableFields.columns, function (column) {\r\n                    return column.isColumn === true;\r\n                }).length;\r\n            }\r\n\r\n            /**\r\n\t\t\t* Returns all columns that are not marked as invisible\r\n\t\t\t*/\r\n            function getVisibleColumns() {\r\n                return _.filter(vm.tableFields.columns, function (column) {\r\n                    return column.visible !== false;\r\n                });\r\n            }\r\n\r\n            function getInvisibleColumns() {\r\n                return _.filter(vm.tableFields.columns, function (column) {\r\n                    return column.visible === false;\r\n                });\r\n            }\r\n\r\n            /**\r\n\t\t\t * Returns all columns that are marked as editable.\r\n\t\t\t */\r\n            function getEditableColumns() {\r\n                return _.filter(vm.tableFields.columns, function (column) {\r\n                    return column.editable === true;\r\n                });\r\n            }\r\n\r\n            /**\r\n\t\t\t * Returns all columns that are marked as hideable.\r\n\t\t\t */\r\n            function getHideableColumns() {\r\n                return _.filter(vm.tableFields.columns, function (column) {\r\n                    return column.hideable === true;\r\n                });\r\n            }\r\n\r\n            /**\r\n\t\t\t * Toggles the visibility of a column.\r\n\t\t\t * @param col\r\n\t\t\t */\r\n            function toggleColumnVisibility(col) {\r\n                guard.throwIfNotAnObject(\"EUP4406E\", col, \"col\");\r\n\r\n                if (col.visible === undefined || col.visible) {\r\n                    col.visible = false;\r\n                } else {\r\n                    col.visible = true;\r\n                }\r\n            }\r\n\r\n            /**\r\n\t\t\t * Event handler to react to changes to the selected FromCompany\r\n\t\t\t */\r\n            function setPartyId(partyId) {\r\n                var taxPromise;\r\n\r\n                vm.taxData = { taxes: {} };\r\n\r\n                if (util.isUndefined(partyId) || partyId <= 0) {\r\n                    return;\r\n                }\r\n\r\n                taxPromise = taxProxy.getTaxesByPartyId(partyId);\r\n\r\n                taxPromise.then(taxesResolved, taxesRejected);\r\n\r\n                function taxesResolved(data) {\r\n                    vm.taxData.taxes = associativeArrayConvertor.convert(data, function (tax) { return tax.id; });\r\n                }\r\n\r\n                function taxesRejected(error) {\r\n                    notificationHandler.showError(error.failureReason);\r\n                }\r\n            }\r\n\r\n            /**\r\n\t\t\t * Function which sets additional information on the line about the selected tax code\r\n\t\t\t * @param line\r\n\t\t\t */\r\n            function taxCodeChanged(line, tax) {\r\n                if (util.isDefined(tax)) {\r\n                    line.taxCode = tax.code;\r\n                    line.taxRate = tax.rate;\r\n                    line.taxCategory = tax.taxCategory;\r\n                } else {\r\n                    line.taxCode = undefined;\r\n                    line.taxRate = undefined;\r\n                    line.taxCategory = undefined;\r\n                }\r\n\r\n                lineChanged();\r\n            }\r\n\r\n            function productCodeChanged(line, product) {\r\n\r\n                if (util.isDefined(product.id)) {\r\n                    line.code = product.code;\r\n                    line.standardProductCode = product.standardCode;\r\n                    line.standardProductCodeScheme = product.standardCodeScheme;\r\n                    line.eClassCode = product.eClassCode;\r\n                    line.productId = product.id;\r\n                    line.itemName = product.name;\r\n                    line.itemDescription = product.description;\r\n                    line.productType = product.productType;\r\n                } else {\r\n                    line.code = product;\r\n                    line.productId = undefined;\r\n                }\r\n\r\n                lineChanged();\r\n            }\r\n\r\n            function productStandardCodeChanged(line, product) {\r\n                if (util.isDefined(product.id)) {\r\n                    line.code = product.code;\r\n                    line.standardProductCode = product.standardCode;\r\n                    line.productId = product.id;\r\n                    line.itemName = product.name;\r\n                    line.itemDescription = product.description;\r\n                    line.productType = product.productType;\r\n                } else {\r\n                    line.standardProductCode = product;\r\n                    line.productId = undefined;\r\n                }\r\n\r\n                lineChanged();\r\n            }\r\n\r\n            function productTypeChanged() {\r\n                lineChanged();\r\n            }\r\n\r\n            function productUnitOfMeasureChanged(unitOfMeasure, line) {\r\n                line.priceBaseQuantityUnit = unitOfMeasure.value;\r\n                lineChanged();\r\n            }\r\n\r\n            function onOriginCountryChanged(country) {\r\n                if (vm.currentEditLine.originCountry === country.code) {\r\n                    return;\r\n                }\r\n\r\n                vm.currentEditLine.originCountry = country.code;\r\n                vm.currentEditLine.originCountryName = country.name;\r\n                vm.lineChanged();\r\n            }\r\n\r\n            function lineChanged() {\r\n                if (scope.onLineChange) {\r\n                    scope.onLineChange();\r\n                }\r\n            }\r\n\r\n            /**\r\n\t\t\t * Function which loads the product types from the scope cache or static lookup proxy\r\n\t\t\t */\r\n            function getProductTypes() {\r\n                vm.scopeCache.get('staticLookupProxy.get', staticLookupProxy.get, ['ProductType'])\r\n\t\t\t\t\t.then(productTypesResolved, productTypesRejected);\r\n\r\n                function productTypesResolved(data) {\r\n                    vm.productTypes = associativeArrayConvertor.convert(data, function (productType) { return productType.id });\r\n                }\r\n\r\n                function productTypesRejected(error) {\r\n                    notificationHandler.showError(error.failureReason);\r\n                }\r\n            }\r\n\r\n            /**\r\n\t\t\t * Loads units of measure types from repository\r\n\t\t\t */\r\n            function getUnitsOfMeasure() {\r\n                unitOfMeasureRepository.getUnitsOfMeasure()\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n                function resolved(data) {\r\n                    vm.unitsOfMeasure = associativeArrayConvertor.convert(data, function (item) { return item.id });\r\n                }\r\n\r\n                function rejected(error) {\r\n                    notificationHandler.showError(error.failureReason);\r\n                }\r\n            }\r\n\r\n            /**\r\n\t\t\t * Set unit of measure label for readonly view\r\n\t\t\t */\r\n            function getUnitOfmeasureLabel(line) {\r\n                if (vm.unitsOfMeasure) {\r\n                    var unitFound = _.find(vm.unitsOfMeasure, function (unit) {\r\n                        return unit.id === line.unitOfMeasureId;\r\n                    });\r\n                    return util.isDefined(unitFound) ? unitFound.name : \"\";\r\n                }\r\n                return \"\";\r\n            }\r\n\r\n            /**\r\n\t\t\t * Process the changed invoice details\r\n\t\t\t * @param invoiceDetails\r\n\t\t\t */\r\n            function setChangedInvoiceDetails(invoiceDetails) {\r\n                if (util.isDefined(invoiceDetails.supplierPartyId)) {\r\n                    setPartyId(invoiceDetails.supplierPartyId);\r\n                }\r\n                if (util.isDefined(invoiceDetails.currencyId)) {\r\n                    setCurrencyId(invoiceDetails.currencyId);\r\n                    refreshLines();\r\n                }\r\n            }\r\n\r\n            /**\r\n\t\t\t * Sets the currency ID on the current controller to the provided value\r\n\t\t\t * @param currencyId\r\n\t\t\t */\r\n            function setCurrencyId(currencyId) {\r\n                vm.currencyId = currencyId;\r\n            }\r\n\r\n            /**\r\n\t\t\t * Populates optional field settings as they may not have loaded when the page firsts loads\r\n\t\t\t * @returns {}\r\n\t\t\t */\r\n            function populateOptionalFields() {\r\n                vm.tableFields = scope.settings;\r\n\r\n                if (!vm.readonly) {\r\n                    if (!vm.optionalFields) {\r\n                        vm.optionalFields = scope.optionalFields;\r\n                    }\r\n                    if (vm.optionalFields) {\r\n                        _.each(vm.optionalFields, function (optionalField) {\r\n                            var fieldExists = _.find(vm.tableFields.columns, function (field) {\r\n                                return field.clientName === optionalField.clientName;\r\n                            });\r\n                            if (!fieldExists) {\r\n                                if (optionalField.entityTypeName === \"InvoiceLine\") {\r\n                                    vm.tableFields.columns.push(optionalField);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        return ProductLinesController;\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-lines/product-lines.controller.js","//{CODE:EUP3N}\r\n// di.einvoicing.ui.portal.invoices.editor.components\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diProductLines', diProductLines);\r\n\r\n\t\tfunction diProductLines() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tsubscribeToInvoiceDetailsChange: '=',\r\n\t\t\t\t\tonChange: '=',\r\n\t\t\t\t\tonLineChange: '=',\r\n\t\t\t\t\tscopeCache: '=',\r\n\t\t\t\t\tlines: '=',\r\n\t\t\t\t\tsettings: '=',\r\n\t\t\t\t\treadonly: '=',\r\n\t\t\t\t\toptionalFields: '=',\r\n\t\t\t\t\toverrideLanguageKey: '='\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: 'ProductLinesController',\r\n\t\t\t\tcontrollerAs: 'productLinesCtrl',\r\n\t\t\t\ttemplateUrl: 'src/app/portal/invoices/product-lines/product-lines.html',\r\n\t\t\t\tlink: link\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope, element, attrs, controller) {\t\t    \r\n\t\t\t\tscope.lineInit = function (lineId) {\r\n\t\t\t\t\tif (scope.readonly) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tscope.$evalAsync(function() {\r\n\t\t\t\t\t\tvar form = element.find('#lineForm' + lineId);\r\n\r\n\t\t\t\t\t\tcontroller.lineFormCreated(lineId, form);\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diProductLines;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-lines/product-lines.directive.js","//{CODE:EUP3P}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(['underscore'], function (_) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('productProxy', productProxy);\r\n\r\n\t\tproductProxy.$inject = ['webApiHttp', '$q'];\r\n\r\n\t\tfunction productProxy(http, $q) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tgetProductsByPartyId: getProductsByPartyId,\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets the products for the specified company\r\n\t\t\t * @param partyId\r\n\t\t\t */\r\n\t\t\tfunction getProductsByPartyId(partyId) {\r\n\t\t\t\tvar httpPromise = http.get('Product/GetCollectionByPartyId/' + partyId);\r\n\t\t\t\tvar newPromise = httpPromise.then(successfullyReceivedProducts, failedToReceiveProducts);\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which allows pre-processing of product data\r\n\t\t\t * @param data\r\n\t\t\t */\r\n\t\t\tfunction successfullyReceivedProducts(data) {\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which allows processing of errors whilst receiving products\r\n\t\t\t * @param error\r\n\t\t\t */\r\n\t\t\tfunction failedToReceiveProducts(error) {\r\n\t\t\t    error.failureReason = 'EINVOICING.PORTAL.PROXIES.PRODUCT.RECEIVE_ERROR';\r\n\r\n\t\t\t\treturn $q.reject(error);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn productProxy;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-proxy.factory.js","define([\r\n    './product-selector.directive',\r\n    './product-selector.controller'\r\n], function (\r\n    diProductSelectorDirectiveLoader,\r\n    productSelectorControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diProductSelectorDirectiveLoader(module);\r\n        productSelectorControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-selector/_loader.js","//{CODE:EUP4B}\r\n// di.einvoicing.ui.portal.invoices.editor.components\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('ProductSelectorController', ProductSelectorController);\r\n\r\n\t\tProductSelectorController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'productProxy',\r\n\t\t\t'notificationHandler',\r\n\t\t\t'scopeCacheFactory'];\r\n\r\n\t\tfunction ProductSelectorController(\r\n\t\t\tscope,\r\n\t\t\tproductProxy,\r\n\t\t\tnotificationHandler,\r\n\t\t\tscopeCacheFactory) {\r\n\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvm.onChangeAccessor = setBoundIdFromSelectedItem;\r\n\t\t\tvm.item = {};\r\n\t\t\tvm.items = [];\r\n\t\t\tvm.propertyControl = scope.propertyControl;\r\n\t\t\tvm.scopeCache = util.isDefined(scope.scopeCache) ? scope.scopeCache : scopeCacheFactory.create(scope);\r\n\r\n\t\t\tscope.subscribeToInvoiceDetailsChange(setPartyId);\r\n\r\n\t\t  var unwatch;\r\n\t\t  tearDown();\r\n\r\n\t\t  return;\r\n\r\n\t\t  function tearDown() {\r\n\t\t  \tscope.$on('$destroy', function () {\r\n\t\t    \tif (util.isFunction(unwatch)) {\r\n\t\t      \tunwatch();\r\n\t\t      }\r\n\t\t    });\r\n\t\t  }\r\n\r\n\t\t    function setPartyId(changedInvoiceDetails) {\r\n\t\t        var productPromise;\r\n\r\n\t\t        var partyId = changedInvoiceDetails.supplierPartyId;\r\n\r\n\t\t        if (util.isUndefined(partyId) || partyId <= 0) {\r\n\t\t            return;\r\n\t\t        }\r\n\r\n\t\t        if (util.isDefined(scope.scopeCache)) {\t\t            \r\n\t\t            productPromise = scope.scopeCache.get('productProxy.getProductsByPartyId', productProxy.getProductsByPartyId, [partyId]);\r\n\t\t        } else {\r\n\t\t            productPromise = productProxy.getProductsByPartyId(partyId);\r\n\t\t        }\r\n\r\n\t\t        productPromise\r\n\t\t            .then(productsResolved, productsRejected);\r\n\r\n\t\t        function productsResolved(data) {\r\n\r\n\t\t            var uniqueList = _.uniq(data,\r\n\t\t                function(item) {\r\n\t\t                    return item[scope.propertyControl] + item.name;\r\n\t\t                });\r\n\r\n\t\t            vm.items.fill(uniqueList);\r\n\r\n\t\t            unwatch = scope.$watch(function() {\r\n\t\t                    return scope.bindToObject[scope.bindToProperty];\r\n\t\t                },\r\n\t\t                function() {\r\n\t\t                    setSelectedItemFromBoundId();\r\n\t\t                });\r\n\t\t        }\r\n\r\n\t\t        function productsRejected(error) {\r\n\t\t            notificationHandler.showError(error.failureReason);\r\n\t\t        }\r\n\t\t    }\r\n\r\n\t\t    function setBoundIdFromSelectedItem() {\r\n\t\t\t\tvar accessor;\r\n\r\n\t\t\t\tscope.bindToObject[scope.bindToProperty] = (vm.item || {})[scope.propertyControl];\r\n\r\n\t\t\t\tif (util.isFunction(scope.onChangeAccessor)) {\r\n\t\t\t\t\taccessor = scope.onChangeAccessor();\r\n\r\n\t\t\t\tif (util.isFunction(accessor)) {\r\n\t\t\t\t\t\taccessor(scope.bindToObject, vm.item);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction setSelectedItemFromBoundId() {\r\n\t\t\t\tif (util.isDefined(vm.item) && scope.bindToObject[scope.bindToProperty] === vm.item[scope.propertyControl]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar item = _.find(vm.items, function (item) {\r\n\t\t\t\t\treturn item[scope.propertyControl] === scope.bindToObject[scope.bindToProperty];\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.item = item;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ProductSelectorController;\r\n\t}\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-selector/product-selector.controller.js","//{CODE:EUP3Q}\r\n// di.einvoicing.ui.portal.invoices.editor.invoiceLines.components\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n        module.directive('diProductSelector', diProductSelector);\r\n\r\n        function diProductSelector() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {\r\n                    subscribeToInvoiceDetailsChange: '=',\r\n                    scopeCache: '=',\r\n                    bindToObject: '=',\r\n                    bindToProperty: '@',\r\n                    validationName: '@',\r\n                    validationMessage: '@',\r\n                    validationModelDisplayName: '@',\r\n                    propertyControl: '@',\r\n                    onChangeAccessor: '&'\r\n                },\r\n                controller: 'ProductSelectorController',\r\n                controllerAs: 'productSelectorCtrl',\r\n                template: template\r\n            };\r\n\r\n            function template(element, attrs) {\r\n                var html =\r\n'<div>\\\r\n    <di-select\\\r\n        mode=\"autoComplete\"\\\r\n        items=\"productSelectorCtrl.items\"\\\r\n        item-unique-property=\"id\"\\\r\n        bind-to-object=\"productSelectorCtrl\"\\\r\n        bind-to-property=\"item\"\\\r\n        class=\"product-select\"\\\r\n        watch-binding=\"true\"\\\r\n        display-property=\"' + attrs.propertyControl + '\"';\r\n                html += getValidationHtml(attrs);\r\n                html +=\r\n'        searchable-properties=\"' + attrs.propertyControl + ',name\"\\\r\n        on-change-accessor=\"productSelectorCtrl.onChangeAccessor\"\\\r\n        allow-empty-display=\"true\"\\\r\n        placeholder=\"EINVOICING.PORTAL.COMPONENTS.PRODUCT_SELECTOR.PRODUCT_SEARCH\">\\\r\n        <b ng-if=\"filteredItem.item.' + attrs.propertyControl + '\">{{::filteredItem.item.' + attrs.propertyControl + '}}:</b> {{::filteredItem.item.name}}\\\r\n    </di-select>\\\r\n</div>';\r\n\r\n                return html;\r\n\r\n                function getValidationHtml(attrs) {\r\n                    var validationHtml = \"\";\r\n\r\n                    if (util.isDefined(attrs.validationName)) {\r\n                        var displayName = attrs.validationName;\r\n\r\n                        if (util.isDefined(attrs.validationModelDisplayName)) {\r\n                            displayName = attrs.validationModelDisplayName;\r\n                        }\r\n\r\n                        validationHtml +=\r\n'        di-validate=\"' + attrs.validationName + '\"\\\r\n         di-validate-model=\"invoiceLine\"\\\r\n         validation-property-name=\"' + attrs.validationName + '\"\\\r\n         validation-model=\"bindToObject[bindToProperty]\"\\\r\n         validation-model-display-name=\"' + displayName + '\"';\r\n                    }\r\n\r\n                    return validationHtml;\r\n                }\r\n            }\r\n        }\r\n\r\n        return diProductSelector;\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-selector/product-selector.directive.js","define([\r\n    './product-type-selector.directive',\r\n    './product-type-selector.controller'\r\n], function (\r\n    diProductTypeSelectorDirectiveLoader,\r\n    productTypeSelectorControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diProductTypeSelectorDirectiveLoader(module);\r\n        productTypeSelectorControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-type-selector/_loader.js","//{CODE:EUP4C}\r\n// di.einvoicing.ui.portal.invoices.editor.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n    \tvar util = $di.utility.util;\r\n\r\n        module.controller('ProductTypeSelectorController', ProductTypeSelectorController);\r\n\r\n        ProductTypeSelectorController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'staticLookupProxy',\r\n\t\t\t'notificationHandler',\r\n            'scopeCacheFactory'];\r\n\r\n        function ProductTypeSelectorController(\r\n            scope,\r\n            staticLookupProxy,\r\n            notificationHandler,\r\n            scopeCacheFactory) {\r\n\r\n            var vm = this;\r\n            var productTypePromise;\r\n\r\n            vm.onChangeAccessor = setBoundIdFromSelectedItem;\r\n            vm.item = {};\r\n            vm.items = [];\r\n            vm.scopeCache = util.isDefined(scope.scopeCache) ? scope.scopeCache : scopeCacheFactory.create(scope);\r\n\r\n            if (util.isDefined(scope.scopeCache)) {\r\n                productTypePromise = scope.scopeCache.get('staticLookupProxy.get', staticLookupProxy.get, ['ProductType']);\r\n            } else {\r\n                productTypePromise = staticLookupProxy.get('ProductType');\r\n            }\r\n\r\n            productTypePromise.then(productTypesResolved, productTypesRejected);\r\n\r\n            function productTypesResolved(data) {\r\n                vm.items.fill(data);\r\n\r\n                scope.$watch(function () {\r\n                    return scope.bindToObject[scope.bindToProperty];\r\n                }, function () {\r\n                    setSelectedItemFromBoundId();\r\n                });\r\n            }\r\n\r\n            function productTypesRejected(error) {\r\n            \tnotificationHandler.showError(error.failureReason);\r\n            }\r\n\r\n            function setBoundIdFromSelectedItem() {\r\n                var accessor;\r\n\r\n                scope.bindToObject[scope.bindToProperty] = (vm.item || {}).id;\r\n                scope.bindToObject[scope.bindToSecondProperty] = (vm.item || {}).name;\r\n\r\n                if (util.isFunction(scope.onChangeAccessor)) {\r\n                    accessor = scope.onChangeAccessor();\r\n\r\n                    if (util.isFunction(accessor)) {\r\n                        accessor(scope.bindToObject, vm.item);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function setSelectedItemFromBoundId() {\r\n\r\n                if (util.isDefined(vm.item) && scope.bindToObject[scope.bindToProperty] === vm.item.id) {\r\n                    return;\r\n                }\r\n\r\n                var item = _.find(vm.items, function (item) {\r\n                    return item.id === scope.bindToObject[scope.bindToProperty];\r\n                });\r\n                \r\n                if (util.isUndefined(item)) {\r\n                    return;\r\n                }\r\n\r\n                vm.item = item;\r\n\r\n                if (util.isDefined(vm.item.name)) {\r\n                    scope.bindToObject[scope.bindToSecondProperty] = vm.item.name;\r\n                }\r\n            }\r\n        }\r\n\r\n        return ProductTypeSelectorController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-type-selector/product-type-selector.controller.js","//{CODE:EUP3R}\r\n// di.eivoicing.ui.portal.invoices.editor.components.invoiceLines.components\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tmodule.directive('diProductTypeSelector', diProductTypeSelector);\r\n\r\n\t\tfunction diProductTypeSelector() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tscopeCache: '=',\r\n\t\t\t\t\tbindToObject: '=',\r\n\t\t\t\t\tbindToProperty: '@',\r\n\t\t\t\t\tbindToSecondProperty: '@',\r\n\t\t\t\t\tvalidationName: '@',\r\n\t\t\t\t\tvalidationModelDisplayName: '@',\r\n\t\t\t\t\tonChangeAccessor: '&',\r\n\t\t\t\t\tvalidationPropertyName: '@'\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: 'ProductTypeSelectorController',\r\n\t\t\t\tcontrollerAs: 'productTypeSelectorCtrl',\r\n\t\t\t\ttemplate: template\r\n\t\t\t};\r\n\r\n\t\t\tfunction template(element, attrs) {\r\n\t\t\t\t\r\n\t\t\t\tvar html = '<div><di-select\\\r\n\t\t\t\t\t\t\t\t\tmode=\"dropdown\"\\\r\n\t\t\t\t\t\t\t\t\titems=\"productTypeSelectorCtrl.items\"\\\r\n\t\t\t\t\t\t\t\t\titem-unique-property=\"id\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-object=\"productTypeSelectorCtrl\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-property=\"item\"\\\r\n                                    di-validate-model=\"invoiceLine\"\\\r\n                                    validation-property-name=\"{{::validationPropertyName}}\"\\\r\n\t\t\t\t                    watch-binding=\"true\"\\\r\n\t\t\t\t\t\t\t\t\tdisplay-property=\"name\"';\r\n\t\t\t\thtml += getValidationHtml(attrs);\r\n\t\t\t\thtml += 'on-change-accessor=\"productTypeSelectorCtrl.onChangeAccessor\">\\\r\n\t\t\t\t\t\t\t\t\t{{::filteredItem.item.name}}\\\r\n\t\t\t\t\t\t\t\t</di-select></div>';\r\n\r\n\t\t\t\treturn html;\r\n\r\n\t\t\t\tfunction getValidationHtml(attrs) {\r\n\t\t\t\t\tvar innerHtml = \"\";\r\n\r\n\t\t\t\t\tif (util.isDefined(attrs.validationName)) {\r\n\t\t\t\t\t\tvar displayName = attrs.validationName;\r\n\r\n\t\t\t\t\t\tif (util.isDefined(attrs.validationModelDisplayName)) {\r\n\t\t\t\t\t\t\tdisplayName = attrs.validationModelDisplayName;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinnerHtml += ' di-validate=\"' + attrs.validationName + '\" ' +\r\n\t\t\t\t\t\t\t' validation-model=\"bindToObject[bindToProperty]\" ' +\r\n\t\t\t\t\t\t\t' validation-model-display-name=\"' + displayName + '\"';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn innerHtml;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diProductTypeSelector;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/product-type-selector/product-type-selector.directive.js","define([\r\n\t'./services/_loader'\r\n], function(\r\n\tservicesLoader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    servicesLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/shared/_loader.js","define([\r\n\t'./invoice-additional-document-references-configuration'\r\n], function(\r\n\tinvoiceAdditionalDocumentReferencesConfigurationLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    invoiceAdditionalDocumentReferencesConfigurationLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/shared/services/_loader.js","//{CODE:DEF1L}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.constant('INVOICE_ADDITIONAL_DOCUMENT_REFERENCES_CONFIGURATION',\r\n\t\t\tinvoiceAdditionalDocumentReferencesConfiguration());\r\n\r\n\t\tfunction invoiceAdditionalDocumentReferencesConfiguration() {\r\n\t\t    return [\r\n\t\t\t\t{\r\n\t\t\t\t\tfield: 'reference',\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.REFERENCE',\r\n\t\t\t\t\theaderClass: \"centeredcellDesc\",\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.reference }}</p>',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"binding\"\\\r\n\t\t\t\t\t\t\t\t\tng-model-property=\"reference\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.onPropertyChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"reference\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.REFERENCE\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"text\">\\\r\n\t\t\t\t\t\t\t\t</di-input>',\r\n\t\t\t\t\teditable: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tfield: 'documentType',\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.DOCUMENT_TYPE',\r\n\t\t\t\t\theaderClass: \"centeredcellDesc\",\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.documentType }}</p>',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"binding\"\\\r\n\t\t\t\t\t\t\t\t\tng-model-property=\"documentType\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.onPropertyChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"documentType\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.DOCUMENT_TYPE\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"text\">\\\r\n\t\t\t\t\t\t\t\t</di-input>',\r\n\t\t\t\t\teditable: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tfield: 'fileName',\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.FILENAME',\r\n\t\t\t\t\theaderClass: \"centeredcellDesc\",\r\n\t\t\t\t\treadonlyTemplate: '<div ng-if=\"controller.hasAttachment(binding)\"\\\r\n\t\t\t\t\t\t\t\t\t\t\tng-click=\"controller.download({attachmentDataId : binding.attachmentDataId, filename : binding.fileName })\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t<p class=\"readonly\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\">{{ binding.fileName }}</a>\\\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\\\r\n\t\t\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\ttemplate: '<di-attachment-uploader\\\r\n                                    bind-to-object=\"binding.lineIdentifier\"\\\r\n                                    file-name=\"binding.fileName\"\\\r\n\t\t\t\t\t\t\t\t\tattachment-data-id=\"binding.attachmentDataId\"\\\r\n                                    on-upload-state-changed=\"controller.onAttachmentUploadStateChanged({lineIdentifier : lineIdentifier, attachmentDataId :attachmentDataId, filename: filename,status:status})\"\\\r\n\t\t\t\t\t\t\t\t\tdownload=\"controller.download({ attachmentDataId : id, filename: filename })\">\\\r\n                                /di-attachment-uploader>',\r\n\t\t\t\t\teditable: true\r\n\t\t\t\t},\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tfield: 'uri',\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.URI',\r\n\t\t\t\t\theaderClass: \"centeredcellDesc\",\r\n\t\t\t\t\treadonlyTemplate: '<div>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"controller.isAbsoluteUrl(binding.uri)\"\\\r\n\t\t\t\t\t\t\t\t\t\ttitle=\"{{ binding.uri }}\">\\\r\n\t\t\t\t\t\t\t\t\t\t<p class=\"readonly\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t<a ng-href=\"{{ binding.uri }}\" target=\"_blank\" di-translate>EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.LINK</a>\\\r\n\t\t\t\t\t\t\t\t\t\t</p>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"!controller.isAbsoluteUrl(binding.uri)\">\\\r\n\t\t\t\t\t\t\t\t\t\t<p class=\"readonly\">{{ binding.uri }}</p>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\ttemplate: '<di-input\\\r\n\t\t\t\t\t\t\t\t\tng-model=\"binding\"\\\r\n\t\t\t\t\t\t\t\t\tng-model-property=\"uri\"\\\r\n\t\t\t\t\t\t\t\t\tng-change=\"controller.onPropertyChanged()\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-property-name=\"uri\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-model-display-name=\"EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.URI\"\\\r\n\t\t\t\t\t\t\t\t\tvalidation-message-position=\"top right\"\\\r\n\t\t\t\t\t\t\t\t\tdi-input-type=\"text\">\\\r\n\t\t\t\t\t\t\t\t</di-input>',\r\n\t\t\t\t\teditable: true\r\n\t\t\t\t},\r\n                {\r\n                    field: 'createdDateTime',\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.UPLOAD_DATE',\r\n\t\t\t\t\theaderClass: \"centeredcellDesc\",\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.createdDateTime | diDate : \"DD/MM/YYYY HH:mm:ss\" }}</p>',\r\n\t\t\t\t\ttemplate: '<p class=\"readonly\" ng-if=\"binding.createdDateTime\">{{ binding.createdDateTime | diDate : \"DD/MM/YYYY HH:mm:ss\" }}</p>',\r\n                    editable: true\r\n                }\r\n\t\t\t];\r\n\t\t}\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/shared/services/invoice-additional-document-references-configuration.js","define([\r\n    './tax-code-selector.directive',\r\n    './tax-code-selector.controller'\r\n], function (\r\n    diTaxCodeSelectorDirectiveLoader,\r\n    taxCodeSelectorControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diTaxCodeSelectorDirectiveLoader(module);\r\n        taxCodeSelectorControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/tax-code-selector/_loader.js","//{CODE:EUP49}\r\n// di.einvoicing.ui.portal.invoices.editor.components\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    var util = $di.utility.util;\r\n\r\n\t    module.controller('TaxCodeSelectorController', TaxCodeSelectorController);\r\n\r\n\t    TaxCodeSelectorController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'taxProxy',\r\n\t\t\t'notificationHandler',\r\n            'scopeCacheFactory'];\r\n\r\n\t    function TaxCodeSelectorController(\r\n\t\t\tscope,\r\n\t\t\ttaxProxy,\r\n\t\t\tnotificationHandler,\r\n            scopeCacheFactory) {\r\n\r\n\t        var vm = this;\r\n\r\n\t        vm.onChangeAccessor = setBoundIdFromSelectedItem;\r\n\t        vm.item = {};\r\n\t        vm.items = [];\r\n\t        vm.scopeCache = util.isDefined(scope.scopeCache) ? scope.scopeCache : scopeCacheFactory.create(scope);\r\n\r\n\t        scope.subscribeToInvoiceDetailsChange(setPartyId);\r\n\r\n\t        return;\r\n\r\n\t        function setPartyId(changedInvoiceDetails) {\r\n\t            var taxPromise;\r\n\r\n\t            var partyId = changedInvoiceDetails.supplierPartyId;\r\n\r\n\t            if (util.isUndefined(partyId) || partyId <= 0) {\r\n\t                return;\r\n\t            }\r\n\r\n\t            if (util.isDefined(scope.scopeCache)) {\r\n\t                taxPromise = scope.scopeCache.get('taxProxy.getTaxesByPartyId', taxProxy.getTaxesByPartyId, [partyId]);\r\n\t            } else {\r\n\t                taxPromise = taxProxy.getTaxesByPartyId(partyId);\r\n\t            }\r\n\r\n\t            taxPromise.then(taxesResolved, taxesRejected);\r\n\r\n\t            function taxesResolved(data) {\r\n\t                vm.items.fill(data);\r\n\r\n\t                setItemsDisplayText();\r\n\r\n\t                var unwatch = scope.$watch(function () {\r\n\t                    return scope.bindToObject[scope.bindToProperty];\r\n\t                }, function () {\r\n\t                    setSelectedItemFromBoundId();\r\n\t                });\r\n\t            }\r\n\r\n\t            function taxesRejected(error) {\r\n\t            \tnotificationHandler.showError(error.failureReason);\r\n\t            }\r\n\t        }\r\n\r\n\t        function setItemsDisplayText() {\r\n\t            _.each(vm.items, function (item) {\r\n\t                item.displayText = item.code + \" (\" + item.taxCategory + \") \" + item.rate + \"%\";\r\n\t            });\r\n\t        }\r\n\r\n\t        function setBoundIdFromSelectedItem() {\r\n\t            var accessor;\r\n\t            \r\n\t            scope.bindToObject[scope.bindToProperty] = (vm.item || {}).id;\r\n\r\n\t            if (util.isFunction(scope.onChangeAccessor)) {\r\n\t                accessor = scope.onChangeAccessor();\r\n\r\n\t                if (util.isFunction(accessor)) {\r\n\t                    accessor(scope.bindToObject, vm.item);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\r\n\t        function setSelectedItemFromBoundId() {\r\n\t            if (util.isDefined(vm.item) && scope.bindToObject[scope.bindToProperty] === vm.item.id) {\r\n\t                return;\r\n\t            }\r\n\r\n\t            var item = _.find(vm.items, function (item) {\r\n\t                return item.id === scope.bindToObject[scope.bindToProperty];\r\n\t            });\r\n\r\n\t            if (util.isUndefined(item)) {\r\n\t                return;\r\n\t            }\r\n\r\n\t            vm.item = item;\r\n\t        }\r\n\t    }\r\n\r\n\t    return TaxCodeSelectorController;\r\n\t}\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/tax-code-selector/tax-code-selector.controller.js","//{CODE:EUP46}\r\n// di.einvoicing.ui.portal.invoices.editor.components\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        var util = $di.utility.util;\r\n        module.directive('diTaxCodeSelector', diTaxCodeSelector);\r\n\r\n        function diTaxCodeSelector() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {\r\n                    subscribeToInvoiceDetailsChange: '=',\r\n                    scopeCache: '=',\r\n                    bindToObject: '=',\r\n                    bindToProperty: '@',\r\n                    validationName: '@',\r\n                    validationModelDisplayName: '@',\r\n                    onChangeAccessor: '&',\r\n                    validationPropertyName: '@',\r\n                    diValidateModel: '@'\r\n                },\r\n                controller: 'TaxCodeSelectorController',\r\n                controllerAs: 'taxCodeSelectorCtrl',\r\n                template: template\r\n            };\r\n\r\n            function template(element, attrs) {\r\n\r\n                var html = '<div>\\\r\n                                <di-select\\\r\n                                    mode=\"dropdown\"\\\r\n                                    items=\"taxCodeSelectorCtrl.items\"\\\r\n                                    item-unique-property=\"id\"\\\r\n                                    bind-to-object=\"taxCodeSelectorCtrl\"\\\r\n                                    bind-to-property=\"item\"\\\r\n                                    di-validate-model=\"{{::diValidateModel}}\"\\\r\n                                    validation-property-name=\"{{::validationPropertyName}}\"\\\r\n                                    display-property=\"displayText\"';\r\n                html += getValidationHtml(attrs);\r\n                html += '           on-change-accessor=\"taxCodeSelectorCtrl.onChangeAccessor\">\\\r\n                                    {{::filteredItem.item.code}} ({{::filteredItem.item.taxCategory}}): {{::filteredItem.item.rate}}%\\\r\n                                </di-select></div>';\r\n                return html;\r\n\r\n                function getValidationHtml(attrs) {\r\n                    var innerHtml = \"\";\r\n\r\n                    if (util.isDefined(attrs.validationName)) {\r\n                        var displayName = attrs.validationName;\r\n                        if (util.isDefined(attrs.validationModelDisplayName)) {\r\n                            displayName = attrs.validationModelDisplayName;\r\n                        }\r\n\r\n                        innerHtml += 'di-validate=\"{{::validationName}}\"' +\r\n                                    'validation-model=\"bindToObject[bindToProperty]\"' +\r\n                                    'validation-model-display-name=\"' + displayName + '\"';\r\n                    }\r\n\r\n                    return innerHtml;\r\n                }\r\n            }\r\n        }\r\n\r\n        return diTaxCodeSelector;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/tax-code-selector/tax-code-selector.directive.js","//{CODE:EUP01}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('taxProxy', taxProxy);\r\n\r\n\t\ttaxProxy.$inject = ['webApiHttp', '$q'];\r\n\r\n\t\tfunction taxProxy(http, $q) {\r\n\t\t\treturn {\r\n\t\t\t\tgetTaxesByPartyId: getTaxesByPartyId\r\n\t\t\t};\r\n\r\n\t\t\tfunction getTaxesByPartyId(partyId) {\r\n\t\t\t\tvar requestUrl = 'Tax/GetCollectionByPartyId/' + partyId;\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(successfullyReceivedTaxes, errorReceivingTaxes);\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which allows pre-processing of tax data\r\n\t\t\t * @param data\r\n\t\t\t */\r\n\t\t\tfunction successfullyReceivedTaxes(data) {\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which allows processing of error data\r\n\t\t\t * Must return a failed promise otherwise chained success callbacks are called\r\n\t\t\t * @param error\r\n\t\t\t */\r\n\t\t\tfunction errorReceivingTaxes(error) {\r\n\t\t\t    error.failureReason = 'EINVOICING.PORTAL.PROXIES.TAX.RECEIVE_ERROR';\r\n\t\t\t\treturn $q.reject(error);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn taxProxy;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/tax-proxy.factory.js","//{CODE:EUP7O}\r\n// di.einvoicing.ui.portal.components.unitofmeasureselector\r\ndefine([\r\n\t'./unit-of-measure-selector.directive',\r\n\t'./unit-of-measure.controller',\r\n\t './unit-of-measure-repository.factory'\r\n], function (\r\n\tunitOfMeasureSelectorDirectiveLoader,\r\n\tunitOfMeasureControllerLoader,\r\n\tunitOfMeasureRepositoryLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tunitOfMeasureSelectorDirectiveLoader(module);\r\n\t\tunitOfMeasureControllerLoader(module);\r\n\t\tunitOfMeasureRepositoryLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/unit-of-measure-selector/_loader.js","//{CODE:EUP7N}\r\n// di.einvoicing.ui.portal.components.unitofmeasure\r\ndefine(['underscore'], function (_) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    module.factory('unitOfMeasureRepository', unitOfMeasureRepository);\r\n\r\n\t    unitOfMeasureRepository.$inject = ['staticLookupProxy'];\r\n\t\t\r\n\t    function unitOfMeasureRepository(staticLookupProxy) {\r\n\t\t\tvar units = null;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tgetUnitsOfMeasure: getUnitsOfMeasure\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets all available units of measure defined in the system.\r\n\t\t\t */\r\n\t\t\tfunction getUnitsOfMeasure() {\r\n\t\t\t\tvar promise = staticLookupProxy.get('UnitOfMeasure').then(success);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\tunits = data;\r\n\r\n\t\t\t\t\t_.each(units, function (unit) {\r\n\t\t\t\t\t\tunit.label = unit.name;\r\n\t\t\t\t\t\tunit.value = unit.commonCode;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tunits = _.sortBy(units, function (unit) { return unit.name });\r\n\r\n\t\t\t\t\treturn units;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t    return unitOfMeasureRepository;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/unit-of-measure-selector/unit-of-measure-repository.factory.js","//{CODE:EUP7P}\r\n// di.einvoicing.ui.portal.components.unitofmeasureselector\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tmodule.directive('diUnitOfMeasureSelector', diUnitOfMeasureSelector);\r\n\r\n\t\tfunction diUnitOfMeasureSelector() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\ttemplate: template,\r\n\t\t\t\tcontroller: 'UnitOfMeasureController',\r\n\t\t\t\tcontrollerAs: 'unitOfMeasureCtrl',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\ttabIndex: '@',\r\n\t\t\t\t\titems:'=',\r\n\t\t\t\t\tbindToObject: '=',\r\n\t\t\t\t\tbindToProperty: '@',\r\n\t\t\t\t\tbindToSecondProperty: '@',\r\n\t\t\t\t\tonChangeAccessor: '&',\r\n\t\t\t\t\tvalidationMessage: '@',\r\n\t\t\t\t\tvalidationName: '@',\r\n\t\t\t\t\tvalidationModelDisplayName: '@',\r\n\t\t\t\t\tscopeCache: '=',\r\n\t\t\t\t\tvalidationPropertyName: '@'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Generates html template             \r\n\t\t\t */\r\n\t\t\tfunction template(element, attrs) {\r\n\t\t\t\tvar html = '<div>\\\r\n\t\t\t\t\t\t\t\t<di-select\\\r\n\t\t\t\t\t\t\t\t\ttab-index=\"{{::tabIndex}}\"\\\r\n\t\t\t\t\t\t\t\t\tmode=\"dropdownSearch\"\\\r\n\t\t\t\t\t\t\t\t\twatch-items=\"true\"\\\r\n                                    watch-include-default-obj=\"true\"\\\r\n\t\t\t\t\t\t\t\t\titems=\"unitOfMeasureCtrl.items\"\\\r\n\t\t\t\t\t\t\t\t\titem-unique-property=\"id\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-object=\"unitOfMeasureCtrl\"\\\r\n\t\t\t\t\t\t\t\t\tbind-to-property=\"item\"\\\r\n\t\t\t\t\t\t\t\t\tdisplay-property=\"name\"\\\r\n                                    di-validate-model=\"invoiceLine\"\\\r\n                                    validation-property-name=\"{{::validationPropertyName}}\"\\\r\n\t\t\t\t\t\t\t\t\tsearchable-properties=\"name,commonCode,symbol\"';\r\n\t\t\t\t\r\n\t\t\t\thtml += getValidationHtml(attrs);\r\n\t\t\t\thtml += '           on-change-accessor=\"unitOfMeasureCtrl.onChangeAccessor\"\\\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"EINVOICING.PORTAL.COMPONENTS.UNIT_OF_MEASURE.SEARCH\">\\\r\n\t\t\t\t\t\t\t\t\t{{::filteredItem.item.commonCode}}: {{::filteredItem.item.name}}\\\r\n\t\t\t\t\t\t\t\t</di-select></div>';\r\n\t\t\t\treturn html;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Adds validation attributes                 \r\n\t\t\t\t */\r\n\t\t\t\tfunction getValidationHtml(attrs) {\r\n\t\t\t\t\tvar innerHtml = \"\";\r\n\r\n\t\t\t\t\tif (util.isDefined(attrs.validationName)) {\r\n\t\t\t\t\t\tvar displayName = attrs.validationName;\r\n\t\t\t\t\t\tif (util.isDefined(attrs.validationModelDisplayName)) {\r\n\t\t\t\t\t\t\tdisplayName = attrs.validationModelDisplayName;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinnerHtml += 'di-validate=\"{{::validationName}}\"' +\r\n\t\t\t\t\t\t\t\t\t'validation-model=\"bindToObject[bindToProperty]\"' +\r\n\t\t\t\t\t\t\t\t\t'validation-message=\"{{::validationMessage}}\"' +\r\n\t\t\t\t\t\t\t\t\t'validation-model-display-name=\"' + displayName + '\"';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn innerHtml;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn diUnitOfMeasureSelector;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/unit-of-measure-selector/unit-of-measure-selector.directive.js","//{CODE:EUP7R}\r\n// di.einvoicing.ui.portal.components.unitofmeasureselector\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('UnitOfMeasureController', UnitOfMeasureController);\r\n\r\n\t\tUnitOfMeasureController.$inject = ['$scope', 'unitOfMeasureRepository'];\r\n\r\n\t\tfunction UnitOfMeasureController(scope, unitOfMeasureRepository) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvm.items = [];\r\n\t\t\tvm.item = {};\r\n\t\t\tvm.onChangeAccessor = setBoundIdFromSelectedItem;\r\n\r\n\t\t\tinit();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\tfunction init() {\r\n\t\t\t\tvar unitOfMeasurePromise;\r\n\r\n\t\t\t\tif (util.isDefined(scope.scopeCache)) {\r\n\t\t\t\t\tunitOfMeasurePromise = scope.scopeCache.get('unitOfMeasureRepository.getUnitsOfMeasure', unitOfMeasureRepository.getUnitsOfMeasure);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunitOfMeasurePromise = unitOfMeasureRepository.getUnitsOfMeasure();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tunitOfMeasurePromise.then(function (data) {\r\n\t\t\t\t\tvm.items.fill(data);\r\n\r\n\t\t\t\t\tscope.$watch(function () {\r\n\t\t\t\t\t\treturn scope.bindToObject[scope.bindToProperty];\r\n\t\t\t\t\t}, setSelectedItemFromBoundId);\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\t\t\t\t\tfunction setSelectedItemFromBoundId() {\r\n\t\t\t\t\t\tif (util.isDefined(vm.item.id) && scope.bindToObject[scope.bindToProperty] === vm.item.id) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (scope.bindToObject[scope.bindToProperty] === -1) {\r\n\t\t\t\t\t\t\tvar unknownItem = {\r\n\t\t\t\t\t\t\t\tid: 0,\r\n\t\t\t\t\t\t\t\tname: scope.bindToObject[scope.bindToSecondProperty],\r\n\t\t\t\t\t\t\t\tcommonCode: scope.bindToObject[scope.bindToSecondProperty]\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar exist = _.find(vm.items, function (item) {\r\n\t\t\t\t\t\t\t\treturn item.id === unknownItem.id;\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif (util.isUndefined(exist)) {\r\n\t\t\t\t\t\t\t\tvm.items.push(unknownItem);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tscope.bindToObject[scope.bindToProperty] = unknownItem.id;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar item = _.find(vm.items, function (item) {\r\n\t\t\t\t\t\t\treturn item.id === scope.bindToObject[scope.bindToProperty];\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.item = item;\r\n\r\n\t\t\t\t\t    if (util.isDefined(vm.item.name)) {\r\n\t\t\t\t\t        scope.bindToObject[scope.bindToSecondProperty] = vm.item.name;\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction setBoundIdFromSelectedItem() {\r\n\t\t\t\tvar accessor;\r\n\r\n\t\t\t\tscope.bindToObject[scope.bindToProperty] = (vm.item || {}).id;\r\n\t\t\t    scope.bindToObject[scope.bindToSecondProperty] = (vm.item || {}).name;\r\n\r\n\t\t\t\tif (util.isFunction(scope.onChangeAccessor)) {\r\n\t\t\t\t\taccessor = scope.onChangeAccessor();\r\n\r\n\t\t\t\t\tif (util.isFunction(accessor)) {\r\n\t\t\t\t\t\taccessor(vm.item, scope.bindToObject);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn UnitOfMeasureController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/unit-of-measure-selector/unit-of-measure.controller.js","//{CODE:EUP54}\r\n// di.einvoicing.ui.portal.portal.invoices.viewer\r\ndefine([\r\n\t'./_snippets/_loader',\r\n\t'./invoiceDetails/invoiceDetailsDirective'\r\n], function (\r\n\tsnippetsLoader,\r\n\tinvoiceDetailsDirectiveLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tsnippetsLoader(module);\r\n\t\tinvoiceDetailsDirectiveLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/viewer/_components/_loader.js","//{CODE:EUP3C}\r\n// di.einvoicing.ui.portal.portal.invoices.viewer.components.snippets\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var snippetContext = $di.angular.snippetRegistrar.createContext(\r\n            module,\r\n            'src/app/portal/invoices/viewer/_components/_snippets');\r\n        \r\n        snippetContext.registerSnippet('diInvoiceDetailsHeader', 'invoiceDetailsHeader.html');\r\n        snippetContext.registerSnippet('diInvoiceAuditSummaryHeader', 'invoiceAuditSummaryHeader.html');\r\n        snippetContext.registerSnippet('diInvoiceDetailsFooter', 'invoiceDetailsFooter.html');\r\n        snippetContext.registerSnippet('diInvoiceDetailsLines', 'invoiceDetailsLines.html');\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/viewer/_components/_snippets/_loader.js","//{CODE:EUP5I}\r\n// di.einvoicing.ui.portal.portal.invoices.viewer\r\ndefine(['angular'], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diInvoiceDetails', diInvoiceDetails);\r\n\r\n        function diInvoiceDetails() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {},\r\n                controller: \"InvoiceViewerController\",\r\n                controllerAs: \"invoiceViewerCtrl\",\r\n                templateUrl: 'src/app/portal/invoices/viewer/_components/invoiceDetails/invoiceDetails.html',\r\n                link: link\r\n            };\r\n\r\n            function link(scope) {\r\n                scope.findElement = findElement;\r\n\r\n                return;\r\n\r\n                function findElement(name) {\r\n                    return ng.element(name);\r\n                }\r\n            }\r\n        }\r\n\r\n        return diInvoiceDetails;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/viewer/_components/invoiceDetails/invoiceDetailsDirective.js","//{CODE:EUP06}\r\n// di.einvoicing.ui.portal.portal.invoices.viewer\r\ndefine([\r\n\t'./_components/_loader',\r\n\t'./invoiceViewerController' ,\r\n\t'./invoiceViewDetailsButtonsConfigurator'\r\n   \r\n], function (\r\n\tcomponentsLoader,\r\n\tinvoiceViewerControllerLoader,\r\n\tinvoiceViewDetailsButtonsConfiguratorLoader\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tcomponentsLoader(module);\r\n\t\tinvoiceViewerControllerLoader(module);\r\n\t\tinvoiceViewDetailsButtonsConfiguratorLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/viewer/_loader.js","//{CODE:EUP0E}\r\n// di.einvoicing.ui.portal.portal.invoices.viewer\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.provider('invoiceViewDetailsButtonsConfigurator', InvoiceViewDetailsButtonsConfigurator);\r\n\r\n\t\t/**\r\n\t\t * Manages invoice editor configuration and set up.\r\n\t\t */\r\n\t\tfunction InvoiceViewDetailsButtonsConfigurator() {\r\n\t\t\tvar config;\r\n\r\n\t\t\tvar buttonsConfiguration = {};\r\n\r\n\t\t\t// Provider definition\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['authorizedObjectsFilter', 'CLIENT_ENUMS'];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject('EUP2H01E', cfg, 'cfg');\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets required configuration for the grid.\r\n\t\t\t */\r\n\t\t\tfunction $get(authorizedObjectsFilter, clientEnums) {\r\n\r\n\t\t\t\tbuttonsConfiguration = {\r\n\t\t\t\t\ttype: 'Invoice',\r\n\t\t\t\t\tvisibleButtons: [],\r\n\t\t\t\t\tbuttonsSetOne: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Buyer', 'InvoiceReader'],\r\n\t\t\t\t\t\t\tname: 'dispute',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.startDispute,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Buyer', 'InvoiceReader'],\r\n\t\t\t\t\t\t\tname: 'notDispute',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.endDispute,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\t\tname: 'cancelInvoice',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.cancelInvoice,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\t\tname: 'paid',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsPaidBuyer,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\t\tname: 'notPaid',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsNotPaidBuyer,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\t\tname: 'paid',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsPaidSupplier,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\t\tname: 'notPaid',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsNotPaidSupplier,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\t\tname: 'scheduled',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsScheduledForPayment,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\t\tname: 'notScheduled',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsNotScheduledForPayment,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['InvoiceReader'],\r\n\t\t\t\t\t\t\tname: 'issues',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.showIssues,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\t\tname: 'release',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.release,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tbuttonsSetTwo: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['InvoiceReader'],\r\n\t\t\t\t\t\t\tname: 'render',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.downloadInvoice,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['InvoiceReader'],\r\n\t\t\t\t\t\t\tname: 'viewHistory',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewHistoryInvoice,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: ['InvoiceReader'],\r\n\t\t\t\t\t\t\tname: 'related',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewRelatedDocumentsInvoice,\r\n\t\t\t\t\t\t\tattributesRequired: ['current']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tbuttonsSetThree: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t    rights: ['InvoiceWriter'],\r\n\t\t\t\t\t\t    name: 'editBig',\r\n\t\t\t\t\t\t    action: clientEnums.userActions.editInvoice,\r\n\t\t\t\t\t\t    attributesRequired: ['current']\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t    rights: ['InvoiceWriter'],\r\n\t\t\t\t\t\t    name: 'submit',\r\n\t\t\t\t\t\t    action: clientEnums.userActions.submit,\r\n\t\t\t\t\t\t    attributesRequired: ['current']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgetButtonsSetOneConfiguration: getButtonsSetOneConfiguration,\r\n\t\t\t\t\tgetButtonsSetTwoConfiguration: getButtonsSetTwoConfiguration,\r\n\t\t\t\t\tgetButtonsSetThreeConfiguration: getButtonsSetThreeConfiguration\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction getButtonsSetOneConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetOne);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getButtonsSetTwoConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetTwo);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getButtonsSetThreeConfiguration() {\r\n\t\t\t\t    return getConfiguration(buttonsConfiguration.buttonsSetThree);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getConfiguration(array) {\r\n\t\t\t\t\tvar configuration = {\r\n\t\t\t\t\t\ttype: 'Invoice',\r\n\t\t\t\t\t\tvisibleButtons: []\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconfiguration.visibleButtons.fill(authorizedObjectsFilter.getAuthorizedObjects(array, true));\r\n\t\t\t\t\treturn configuration;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn InvoiceViewDetailsButtonsConfigurator;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/viewer/invoiceViewDetailsButtonsConfigurator.js","//{CODE:EUP5G}\r\n// di.einvoicing.ui.portal.portal.invoices.viewer\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('InvoiceViewerController', InvoiceViewerController);\r\n\r\n\t\tInvoiceViewerController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'$stateParams',\r\n\t\t\t'invoiceProxy',\r\n\t\t\t'partyProxy',\r\n\t\t\t'auditProxy',\r\n\t\t\t'diState',\r\n\t\t\t'authenticationData',\r\n\t\t\t'translator',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'associativeArrayConvertor',\r\n\t\t\t'scopeCacheFactory',\r\n\t\t\t'authorizedObjectsFilter',\r\n\t\t\t'invoiceViewDetailsButtonsConfigurator',\r\n\t\t\t'currencyCache',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'invoiceLinesColumnSettings',\r\n\t\t\t'documentStateResolver',\r\n\t\t\t'userRightsRepository',\r\n\t\t\t'documentAttributeResolver',\r\n\t\t\t'documentProxy',\r\n\t\t\t'invoiceRepository',\r\n\t\t\t'documentIssuesMessageBuilder',\r\n\t\t\t'staticLookupProxy',\r\n\t\t\t'notificationHandler',\r\n\t\t\t'modalSpinner',\r\n\t\t\t'userActionsResolver',\r\n\t\t\t'documentDownloader',\r\n\t\t\t'scrollbarResizer',\r\n\t\t\t'invoiceActionVerifier',\r\n\t\t\t'attachmentProxy',\r\n\t\t\t'INVOICE_ADDITIONAL_DOCUMENT_REFERENCES_CONFIGURATION',\r\n            'attachmentDownloadValidator'\r\n\t\t];\r\n\r\n\t\tfunction InvoiceViewerController(\r\n\t\t\tscope,\r\n\t\t\tstateParams,\r\n\t\t\tinvoiceProxy,\r\n\t\t\tpartyProxy,\r\n\t\t\tauditProxy,\r\n\t\t\tdiState,\r\n\t\t\tauthenticationData,\r\n\t\t\ttranslator,\r\n\t\t\tenumTranslator,\r\n\t\t\tassociativeArrayConvertor,\r\n\t\t\tscopeCacheFactory,\r\n\t\t\tauthorizedObjectsFilter,\r\n\t\t\tinvoiceViewDetailsButtonsConfigurator,\r\n\t\t\tcurrencyCache,\r\n\t\t\tclientEnums,\r\n\t\t\tinvoiceLinesColumnSettings,\r\n\t\t\tdocumentStateResolver,\r\n\t\t\tuserRightsRepository,\r\n\t\t\tdocumentAttributeResolver,\r\n\t\t\tdocumentProxy,\r\n\t\t\tinvoiceRepository,\r\n\t\t\tdocumentIssuesMessageBuilder,\r\n\t\t\tstaticLookupProxy,\r\n\t\t\tnotificationHandler,\r\n\t\t\tmodalSpinner,\r\n\t\t\tuserActionsResolver,\r\n\t\t\tdocumentDownloader,\r\n\t\t\tscrollbarResizer,\r\n\t\t\tinvoiceActionVerifier,\r\n\t\t\tattachmentProxy,\r\n\t\t\tadditionalDocumentReferencesTableConfiguration,\r\n            attachmentDownloadValidator) {\r\n\t\t    var vm = this;\r\n\r\n\t\t    var schemeTranslationPrefix = \"EINVOICING.COMPONENTS.CLIENT_ENUMS.SCHEMES.\";\r\n\r\n\t\t\tvm.mode = 'current';\r\n\t\t\tvar functionToGetInvoice;\r\n\t\t\tvar parameterToGetInvoice;\r\n\t\t    var spinner;\r\n\r\n\t\t    vm.mode = 'current';\r\n\r\n\t\t\tvm.invoice = {\r\n\t\t\t\tlines: [],\r\n\t\t\t\tattributes: [],\r\n\t\t\t\tactions: [],\r\n\t\t\t\tsupplierPartyId: {},\r\n\t\t\t\tallowancesCharges: []\r\n\t\t\t};\r\n\r\n\t\t\tvm.invoiceDocumentIssuesDetails = {\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tloaded: false,\r\n\t\t\t\tmessage: ''\r\n\t\t\t};\r\n\r\n\t\t\tvm.auditSummary = {};\r\n\r\n\t\t\tvm.productTypes = [];\r\n\t\t\tvm.scopeCache = scopeCacheFactory.create(scope);\r\n\t\t\tvm.countries = [];\r\n\t\t\tvm.currentState = '...';\r\n\t\t\tvm.selectedStates = [];\r\n\t\t\tvm.selectedAttributes = [];\r\n\t\t\tvm.selectedActions = [];\r\n\t\t\tvm.invoiceDetailsChangeSubscriptions = [];\r\n\t\t\tvm.labels = {};\r\n\t\t\tvm.invoiceCountry = {};\r\n\t\t\tvm.buttonsSetOneOptions = {};\r\n\t\t\tvm.buttonsSetTwoOptions = {};\r\n\t\t\tvm.buttonsSetThreeOptions = {};\r\n\t\t\tvm.settings = {};\r\n\t\t\tvm.submitting = false;\r\n\t\t\tvm.supplierId = {};\r\n\t\t\tvm.supplierAddress = {};\r\n\t\t\tvm.buyerAddress = {};\r\n\t\t\tvm.deliveryAddress = {};\r\n\t\t\tvm.countOfAttachments = 0;\r\n\t\t\tvm.languageKey = \"EINVOICING.PORTAL.INVOICES.COMPONENTS.PRODUCT_LINES\";\r\n\t\t\tvm.supplierContactDetails = {};\r\n\t\t\tvm.customerContactDetails = {};\r\n\t\t\tvm.hasMainActions = true;\r\n\t\t\tvm.additionalDocumentReferencesConfiguration = additionalDocumentReferencesTableConfiguration;\r\n\r\n\t\t\tvm.subscribeToInvoiceDetailsChange = subscribeToInvoiceDetailsChange;\r\n\t\t\tvm.getRenderedInvoice = getRenderedInvoice;\r\n\t\t\tvm.releaseInvoice = releaseInvoice;\r\n\t\t\tvm.changeInvoiceDisputeFlag = changeInvoiceDisputeFlag;\r\n\t\t\tvm.voidInvoice = voidInvoice;\r\n\t\t\tvm.changeInvoicePaidState = changeInvoicePaidState;\r\n\t\t\tvm.flagAsScheduledForPayment = flagAsScheduledForPayment;\r\n\t\t\tvm.backToList = backToList;\r\n\t\t\tvm.goToEdit = goToEdit;\r\n\t\t\tvm.goToHistory = goToHistory;\r\n\t\t\tvm.goToRelated = goToRelated;\r\n\t\t\tvm.goToViewCurrent = goToViewCurrent;\r\n\t\t\tvm.viewInvoiceDocumentIssues = viewInvoiceDocumentIssues;\r\n\t\t\tvm.viewDocumentAttachments = viewDocumentAttachments;\r\n\t\t\tvm.submit = submit;\r\n\t\t\tvm.resizeHorizontalScrollbar = scrollbarResizer.resizeHorizontalScrollbar;\r\n\t\t\tvm.downloadAttachment = downloadAttachment;\r\n\t\t\tvm.downloadAllAttachments = downloadAllAttachments;\r\n\r\n\t\t\tinit();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Initialises UI and loads data            \r\n\t\t\t */\r\n\t\t\tfunction init() {\r\n\t\t\t\tscrollbarResizer.monitorHorizontalBrowserScrollbar();\r\n\r\n\t\t\t\tvm.buttonsSetOneOptions = invoiceViewDetailsButtonsConfigurator.getButtonsSetOneConfiguration();\r\n\t\t\t\tvm.buttonsSetTwoOptions = invoiceViewDetailsButtonsConfigurator.getButtonsSetTwoConfiguration();\r\n\t\t\t\tvm.buttonsSetThreeOptions = invoiceViewDetailsButtonsConfigurator.getButtonsSetThreeConfiguration();\r\n\r\n\t\t\t\t_.each(invoiceLinesColumnSettings.columns, function (col) {\r\n\t\t\t\t\tcol.editable = false;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvm.settings = invoiceLinesColumnSettings;\r\n\t\t\t\tif (util.isNumber(stateParams.id)) {\r\n\t\t\t\t\tif (util.isNumber(stateParams.aid)) {\r\n\t\t\t\t\t\tvm.mode = 'audit';\r\n\t\t\t\t\t\tfunctionToGetInvoice = invoiceProxy.getDetailsByAuditId;\r\n\t\t\t\t\t\tparameterToGetInvoice = stateParams.aid;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfunctionToGetInvoice = invoiceProxy.getDetailsById;\r\n\t\t\t\t\t\tparameterToGetInvoice = stateParams.id;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if (util.isNonEmptyString(stateParams.invoiceNumber)) {\r\n\t\t\t\t\tfunctionToGetInvoice = invoiceProxy.getDetailsByInvoiceNumber;\r\n\t\t\t\t\tparameterToGetInvoice = stateParams.invoiceNumber;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnotificationHandler.showError('EINVOICING.PORTAL.INVOICES.VIEWER.');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetLabels();\r\n\r\n\t\t\t\tstaticLookupProxy\r\n\t\t\t\t\t.get('Country')\r\n\t\t\t\t\t.then(getCountriesSuccess);\r\n\r\n\t\t\t\tif (functionToGetInvoice) {\r\n\t\t\t\t\tshowSpinner();\r\n\t\t\t\t\tfunctionToGetInvoice(parameterToGetInvoice)\r\n\t\t\t\t\t\t.then(invoiceResolved, invoiceRejected);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction loadAuditSummary() {\r\n\t\t\t\t\tauditProxy\r\n\t\t\t\t\t\t.getAuditRecordForDocument(vm.invoice.documentId, stateParams.aid)\r\n\t\t\t\t\t\t.then(auditResolved, auditRejected);\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction auditResolved(data) {\r\n\t\t\t\t\t    enumTranslator.translate(clientEnums.eventType, data.eventTypeId)\r\n\t\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t\t            data.eventTypeName = translated;\r\n\r\n\t\t\t\t\t            vm.auditSummary = data;\r\n\t\t\t\t\t        });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction auditRejected() {\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getCountriesSuccess(data) {\r\n\t\t\t\t\tvm.countries.fill(data);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * sets labels values depending on user rights           \r\n\t\t\t\t */\r\n\t\t\t\tfunction setLabels() {\r\n\t\t\t\t\tvar data = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.VIEWER.HEADER.TITLE_SUPPLIER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.VIEWER.HEADER.TITLE_BUYER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"audit_title\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.VIEWER.HEADER.AUDIT_TITLE_SUPPLIER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tkey: \"audit_title\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.INVOICES.VIEWER.HEADER.AUDIT_TITLE_BUYER\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\tvm.labels = authorizedObjectsFilter.getAuthorizedObjectsAsAssociative(data, 'key', 'label');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t *  Loads invoice data     \"EUP5G01E\"\r\n\t\t\t */\r\n\t\t\t\tfunction invoiceResolved(data) {\r\n\t\t\t\t\tsetSelectedCountry(data.country);\r\n\t\t\t\t\tvm.supplierId = data.supplierPartyId;\r\n\r\n\t\t\t\t\tenumTranslator.translateCollection(clientEnums.productType, data.lines, \"productType\", \"productTypeName\");\r\n\t\t\t\t\tutil.extend(vm.invoice, _.omit(data, 'additionalDocumentReferences'));\r\n\t\t\t\t\t//components one-way bindings watch reference changes (the default of scope.$watch's third param - objectEquality - is false)\r\n\t\t\t\t\tvm.invoice.additionalDocumentReferences = data.additionalDocumentReferences;\r\n                    \r\n\t\t\t\t\tsetTaxExemptionReason();\r\n\t\t\t\t\tsetAttributes();\r\n\t\t\t\t\tsetActions();\r\n\r\n\t\t\t\t\tvm.hasMainActions = setMainActionsFlag();\r\n\r\n\t\t\t\t\tvm.invoice.allowancesCharges = data.allowancesCharges;\r\n\r\n\t\t\t\t\t_.each(vm.invoice.allowancesCharges, function (item) {\r\n\t\t\t\t\t\titem.taxAmount = item.amount - item.netAmount;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsetState(vm.invoice.clientDocumentState);\r\n\r\n\t\t\t\t\tsetCurrencies();\r\n\t\t\t\t\tif (vm.mode === \"audit\") {\r\n\t\t\t\t\t\tloadAuditSummary();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetParties();\r\n\t\t\t\t\tsetContacts();\r\n\t\t\t\t\tsetLegal();\r\n\t\t\t\t\tsetAddresses();\r\n\t\t\t\t\tsetInvoiceType();\r\n\r\n\t\t\t\t    vm.countOfAttachments = data.countOfAttachments;\r\n\r\n\t\t\t\t    viewInvoiceDocumentIssues(_.find(data.attributes, function (attribute) {\r\n\t\t\t\t        return attribute === clientEnums.documentAttribute.businessInvalid ||\r\n\t\t\t\t            attribute === clientEnums.documentAttribute.reconciliationFailed ||\r\n\t\t\t\t            attribute === clientEnums.documentAttribute.xsltInvalid;\r\n\t\t\t\t    }));\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction setInvoiceType() {\r\n\t\t\t\t\t    if (util.isDefined(vm.invoice.invoiceTypeId) === false || vm.invoice.invoiceTypeId <= 0) {\r\n\t\t\t\t\t        vm.invoice.invoiceTypeId = 1;\r\n\t\t\t\t\t    }\r\n\r\n\t\t\t\t\t    enumTranslator.translate(clientEnums.invoiceType, vm.invoice.invoiceTypeId)\r\n\t\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t\t            vm.invoice.invoiceType = translated;\r\n\t\t\t\t\t        });\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tfunction setAttributes() {\r\n\t\t\t\t\t\tvar array = documentAttributeResolver.resolveAttributeKeys(vm.invoice.attributes);\r\n\r\n\t\t\t\t\t\tvm.selectedAttributes.fill(array);\r\n\r\n\t\t\t\t\t\tif (vm.mode === 'current') {\r\n\t\t\t\t\t\t\taddAttribute(clientEnums.documentAttribute.current);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (userRightsRepository.userHasRight(\"Supplier\")) {\r\n\t\t\t\t\t\t\tremoveAttribute(clientEnums.documentAttribute.notScheduledForPayment);\r\n\t\t\t\t\t\t\tremoveAttribute(clientEnums.documentAttribute.scheduledForPayment);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction setTaxExemptionReason() {\r\n\t\t\t\t\t\t_.each(vm.invoice.taxBreakdown, function (taxItem) {\r\n\t\t\t\t\t\t\tif (taxItem.taxCategory && taxItem.taxCategory.toUpperCase() === \"E\") {\r\n\t\t\t\t\t\t\t\tvm.invoice.taxExemptionReason = taxItem.taxExemptionReason;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Sets invoice parties details for sub-directives\t\t\t\t\t\r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction setParties() {\r\n\t\t\t\t\t\t//TODO:- perform transalation before creating object\r\n\r\n\t\t\t\t\t\tvm.supplierParty = {\r\n\t\t\t\t\t\t\tpartyName: vm.invoice.supplierName,\r\n\t\t\t\t\t\t\tpartyCode: vm.invoice.supplierCode,\r\n\t\t\t\t\t\t\tpartyIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.invoice.supplierCodeScheme),\r\n\t\t\t\t\t\t\tvatNumber: vm.invoice.supplierVatNumber,\r\n\t\t\t\t\t\t\tvatNumberScheme: translator.instantTranslate(schemeTranslationPrefix + vm.invoice.supplierVatNumberScheme),\r\n\t\t\t\t\t\t\tendpointId: vm.invoice.supplierEndpointIdentifier,\r\n\t\t\t\t\t\t\tendpointIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.invoice.supplierEndpointIdentifierScheme)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.supplierParty.isVisible = checkObjectSectionIsVisible(vm.supplierParty);\r\n\r\n\t\t\t\t\t\tvm.customerParty = {\r\n\t\t\t\t\t\t\tpartyName: vm.invoice.customerName,\r\n\t\t\t\t\t\t\tpartyCode: vm.invoice.customerCode,\r\n\t\t\t\t\t\t\tpartyIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.invoice.customerCodeScheme),\r\n\t\t\t\t\t\t\tvatNumber: vm.invoice.buyerVatNumber,\r\n\t\t\t\t\t\t\tvatNumberScheme: translator.instantTranslate(schemeTranslationPrefix + vm.invoice.buyerVatNumberScheme),\r\n\t\t\t\t\t\t\tendpointId: vm.invoice.buyerEndpointIdentifier,\r\n\t\t\t\t\t\t\tendpointIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.invoice.buyerEndpointIdentifierScheme)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.customerParty.isVisible = checkObjectSectionIsVisible(vm.customerParty);\r\n\r\n\t\t\t\t\t\tvm.deliveryParty = {\r\n\t\t\t\t\t\t\tpartyName: vm.invoice.deliveryPartyName,\r\n\t\t\t\t\t\t\tpartyCode: vm.invoice.deliveryPartyCode\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.deliveryParty.isVisible = checkObjectSectionIsVisible(vm.deliveryParty);\r\n\r\n\t\t\t\t\t\tvm.payeeParty = {\r\n\t\t\t\t\t\t\tpartyName: vm.invoice.payeeName,\r\n\t\t\t\t\t\t\tregId: vm.invoice.payeeVatNumber,\r\n\t\t\t\t\t\t\tregIdScheme: translator.instantTranslate(schemeTranslationPrefix + vm.invoice.payeeVatNumberScheme),\r\n\t\t\t\t\t\t\tpartyCode: vm.invoice.payeePartyIdentifier,\r\n\t\t\t\t\t\t\tpartyIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.invoice.payeePartyIdentifierScheme)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.payeeParty.isVisible = checkObjectSectionIsVisible(vm.payeeParty, ['partyIdentifierScheme', 'regIdScheme']);\r\n\r\n\t\t\t\t\t\tvm.taxRepresentativeParty = {\r\n\t\t\t\t\t\t\tpartyName: vm.invoice.taxRepresentativePartyName,\r\n\t\t\t\t\t\t\tvatNumber: vm.invoice.taxRepresentativePartyVatNumber,\r\n\t\t\t\t\t\t\tvatNumberScheme: translator.instantTranslate(schemeTranslationPrefix + vm.invoice.taxRepresentativePartyVatNumberScheme)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.taxRepresentativeParty.isVisible = checkObjectSectionIsVisible(vm.taxRepresentativeParty, ['vatNumberScheme']);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Sets invoice parties contacts details for sub-directives\t\t\t\t\t\r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction setContacts() {\r\n\t\t\t\t\t\tvm.supplierContact = {\r\n\t\t\t\t\t\t\tName: vm.invoice.billFromContactName,\r\n\t\t\t\t\t\t\tTelephone: vm.invoice.billFromContactTelephone,\r\n\t\t\t\t\t\t\tFax: vm.invoice.billFromContactFax,\r\n\t\t\t\t\t\t\tEmail: vm.invoice.billFromContactEmail,\r\n\t\t\t\t\t\t\tReference: vm.invoice.billFromContactReference\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.supplierContact.isVisible = checkObjectSectionIsVisible(vm.supplierContact);\r\n\r\n\t\t\t\t\t\tvm.customerContact = {\r\n\t\t\t\t\t\t\tName: vm.invoice.billToContactName,\r\n\t\t\t\t\t\t\tTelephone: vm.invoice.billToContactTelephone,\r\n\t\t\t\t\t\t\tFax: vm.invoice.billToContactFax,\r\n\t\t\t\t\t\t\tEmail: vm.invoice.billToContactEmail,\r\n\t\t\t\t\t\t\tReference: vm.invoice.billToContactReference\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.customerContact.isVisible = checkObjectSectionIsVisible(vm.customerContact);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Sets invoice parties legal entity details for sub-directives\t\t\t\t\t\r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction setLegal() {\r\n\t\t\t\t\t\tvm.supplierLegal = {\r\n\t\t\t\t\t\t\tregistrationName: vm.invoice.supplierLegalRegistrationName,\r\n\t\t\t\t\t\t\tcompanyReference: vm.invoice.supplierLegalCompanyReference,\r\n\t\t\t\t\t\t\tcityName: vm.invoice.supplierLegalTown,\r\n\t\t\t\t\t\t\tcountryName: resolveCountryNameByCode(vm.invoice.supplierLegalCountry)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.supplierLegal.isVisible = checkObjectSectionIsVisible(vm.supplierLegal);\r\n\r\n\t\t\t\t\t\tvm.customerLegal = {\r\n\t\t\t\t\t\t\tregistrationName: vm.invoice.buyerCustomerLegalRegistrationName,\r\n\t\t\t\t\t\t\tcompanyReference: vm.invoice.buyerCustomerLegalCompanyReference\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.customerLegal.isVisible = checkObjectSectionIsVisible(vm.customerLegal);\r\n\r\n\t\t\t\t\t\tvm.payeeLegal = {\r\n\t\t\t\t\t\t\tregistrationName: '',\r\n\t\t\t\t\t\t\tcompanyReference: vm.invoice.payeeLegalCompanyReference\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.payeeLegal.isVisible = checkObjectSectionIsVisible(vm.payeeLegal);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Sets invoice parties addresses details for sub-directives\t\t\t\t\t\r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction setAddresses() {\r\n\t\t\t\t\t\tvm.supplierAddress = {\r\n\t\t\t\t\t\t\tName: vm.invoice.supplierAddressName,\r\n\t\t\t\t\t\t\tAddressLine1: vm.invoice.supplierAddressLine1,\r\n\t\t\t\t\t\t\tAddressLine2: vm.invoice.supplierAddressLine2,\r\n\t\t\t\t\t\t\tAddressTown: vm.invoice.supplierAddressTown,\r\n\t\t\t\t\t\t\tAddressCounty: vm.invoice.supplierAddressCounty,\r\n\t\t\t\t\t\t\tPostCode: vm.invoice.supplierPostCode,\r\n\t\t\t\t\t\t\tCountry: resolveCountryNameByCode(vm.invoice.supplierCountry),\r\n\t\t\t\t\t\t\tLocationIdentifier: vm.invoice.supplierLocationIdentifier,\r\n\t\t\t\t\t\t\tshowName: vm.invoice.supplierAddressName !== vm.invoice.supplierName\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tif (vm.supplierAddress.showName === false) {\r\n\t\t\t\t\t\t\tvm.supplierAddress.Name = '';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.supplierAddress.isVisible = checkObjectSectionIsVisible(vm.supplierAddress);\r\n\r\n\t\t\t\t\t\tvm.customerAddress = {\r\n\t\t\t\t\t\t\tName: vm.invoice.addressName,\r\n\t\t\t\t\t\t\tAddressLine1: vm.invoice.addressLine1,\r\n\t\t\t\t\t\t\tAddressLine2: vm.invoice.addressLine2,\r\n\t\t\t\t\t\t\tAddressTown: vm.invoice.addressTown,\r\n\t\t\t\t\t\t\tAddressCounty: vm.invoice.addressCounty,\r\n\t\t\t\t\t\t\tPostCode: vm.invoice.postCode,\r\n\t\t\t\t\t\t\tCountry: resolveCountryNameByCode(vm.invoice.country),\r\n\t\t\t\t\t\t\tshowName: vm.invoice.addressName !== vm.invoice.customerName\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tif (vm.customerAddress.showName === false) {\r\n\t\t\t\t\t\t\tvm.customerAddress.Name = '';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.customerAddress.isVisible = checkObjectSectionIsVisible(vm.customerAddress);\r\n\r\n\t\t\t\t\t\tvm.deliveryAddress = {\r\n\t\t\t\t\t\t\tName: vm.invoice.deliveryAddressName,\r\n\t\t\t\t\t\t\tAddressLine1: vm.invoice.deliveryAddressLine1,\r\n\t\t\t\t\t\t\tAddressLine2: vm.invoice.deliveryAddressLine2,\r\n\t\t\t\t\t\t\tAddressTown: vm.invoice.deliveryAddressTown,\r\n\t\t\t\t\t\t\tAddressCounty: vm.invoice.deliveryAddressCounty,\r\n\t\t\t\t\t\t\tPostCode: vm.invoice.deliveryPostCode,\r\n\t\t\t\t\t\t\tCountry: resolveCountryNameByCode(vm.invoice.deliveryCountry),\r\n\t\t\t\t\t\t\tLocationIdentifier: vm.invoice.deliveryLocationIdentifier,\r\n\t\t\t\t\t\t\tLocationIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.invoice.deliveryLocationIdentifierScheme),\r\n\t\t\t\t\t\t\tshowName: vm.invoice.deliveryAddressName !== vm.invoice.deliveryPartyName\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tif (vm.deliveryAddress.showName === false) {\r\n\t\t\t\t\t\t\tvm.deliveryAddress.Name = '';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.deliveryAddress.isVisible = checkObjectSectionIsVisible(vm.deliveryAddress, ['Name', 'LocationIdentifierScheme']);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction checkObjectSectionIsVisible(object, additionalIgnored) {\r\n\t\t\t\t\t\tvar ignoredProperties = ['showName'];\r\n\t\t\t\t\t\tvar ignored = [];\r\n\r\n\t\t\t\t\t\tif (util.isArray(additionalIgnored)) {\r\n\r\n\t\t\t\t\t\t\tignoredProperties = _.union(ignoredProperties, additionalIgnored);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn util.isAnyObjectPropertyDefined(object, ignoredProperties);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t* resolves country name by code                \r\n\t\t\t\t\t*/\r\n\t\t\t\t\tfunction resolveCountryNameByCode(code) {\r\n\t\t\t\t\t\tvar country = _.find(vm.countries, function (item) {\r\n\t\t\t\t\t\t\treturn item.code === code;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (util.isDefined(country)) {\r\n\t\t\t\t\t\t\treturn country.name;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn code;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Tests if main actions are visible                     \r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction setMainActionsFlag() {\r\n\t\t\t\t\t\tif (!userRightsRepository.userHasRight(\"InvoiceWriter\")) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn invoiceCanBeEdited(vm.invoice) || invoiceCanBeSubmitted(vm.invoice);\r\n\r\n\t\t\t\t\t\tfunction invoiceCanBeEdited(invoice) {\r\n\t\t\t\t\t\t\treturn invoiceActionVerifier.canBeEdited(invoice);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfunction invoiceCanBeSubmitted(invoice) {\r\n\t\t\t\t\t\t\treturn invoiceActionVerifier.canBeSubmitted(invoice);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction setCurrencies() {\r\n\t\t\t\t\t\tcurrencyCache.getCurrencies().then(resolved);\r\n\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tfunction resolved() {\t\t\t\t\t\t    \r\n\t\t\t\t\t\t    removeSpinner();\r\n\r\n\t\t\t\t\t\t\tnotifyInvoiceDetailsChangeSubscribers({\r\n\t\t\t\t\t\t\t\tcurrencyId: vm.invoice.currencyId\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvm.invoice.currency = currencyCache.getCurrencyById(vm.invoice.currencyId);\r\n\t\t\t\t\t\t\tvm.invoice.taxCurrency = currencyCache.getCurrencyById(vm.invoice.taxCurrencyId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction notifyInvoiceDetailsChangeSubscribers(notificationObject) {\r\n\t\t\t\t\t\tfor (var i = 0; i < vm.invoiceDetailsChangeSubscriptions.length; i++) {\r\n\t\t\t\t\t\t\tvm.invoiceDetailsChangeSubscriptions[i](notificationObject);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction setSelectedCountry(code) {\r\n\t\t\t\t\t\tvar country = _.find(vm.countries, function (country) {\r\n\t\t\t\t\t\t\treturn country.code === code;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (util.isUndefined(country)) {\r\n\t\t\t\t\t\t\tcountry = _.find(vm.countries, function (country) {\r\n\t\t\t\t\t\t\t\treturn country.name === code;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (util.isUndefined(country)) {\r\n\t\t\t\t\t\t\tcountry = _.find(vm.countries, function (country) {\r\n\t\t\t\t\t\t\t\treturn country.code === \"GB\";\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (util.isUndefined(country)) {\r\n\t\t\t\t\t\t\tcountry = vm.countries[0];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (util.isDefined(country)) {\r\n\t\t\t\t\t\t\tvm.invoiceCountry = country;\r\n\t\t\t\t\t\t\tvm.invoice.country = country.code;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Notifies about failure while loading invoice data\t\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction invoiceRejected() {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t\tnotificationHandler.showError('EINVOICING.PORTAL.INVOICES.EDITOR.COULD_NOT_LOAD_INVOICE', parameterToGetInvoice);\r\n\t\t\t\t\tbackToList();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * calls dependency to download rendered invoice             \r\n\t\t\t */\r\n\t\t\tfunction getRenderedInvoice() {\r\n\t\t\t\tdocumentDownloader.downloadRenderedInvoice(vm.invoice.documentId);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Releases mismatched invoice\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction releaseInvoice() {\r\n\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t.releaseInvoice(vm.invoice.documentId, vm.invoice.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(response) {\r\n\t\t\t\t\tif (response[vm.invoice.documentId]) {\r\n\t\t\t\t\t\tnotificationHandler\r\n\t\t\t\t\t\t\t.showSuccess(\"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.SUCCESS.RELEASED\", vm.invoice.number);\r\n\r\n\t\t\t\t\t\treloadDocumentState();\r\n\t\t\t\t\t\treloadDocumentActions();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnotificationHandler\r\n\t\t\t\t\t\t\t.showError(\"EINVOICING.PORTAL.INVOICES.ACTIONS.NOTIFICATION.ERROR.RELEASED\", vm.invoice.number);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction changeInvoiceDisputeFlag(inDispute) {\r\n\t\t\t\tvar disputeReason = '';\r\n\r\n\t\t\t\tif (inDispute) {\r\n\t\t\t\t\tdisputeReason = 'not implemented';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t.flagInDisputeInvoice(vm.invoice.documentId, disputeReason, inDispute, vm.invoice.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved() {\r\n\t\t\t\t\treloadDocumentState();\r\n\t\t\t\t\treloadDocumentActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * changes invoice state to voided\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction voidInvoice() {\r\n\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t.voidInvoice(vm.invoice.documentId, vm.invoice.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved() {\r\n\t\t\t\t    reloadDocumentState();\r\n\t\t\t\t    reloadDocumentActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * changes invoice state to paid or not paid\r\n\t\t\t */\r\n\t\t\tfunction changeInvoicePaidState(isPaid) {\r\n\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t.flagPaidInvoice(vm.invoice.documentId, isPaid, vm.invoice.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved() {\r\n\t\t\t\t\treloadDocumentState();\r\n\t\t\t\t\treloadDocumentActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * marks invoice as scheduled for payment or not\t\t\r\n\t\t\t */\r\n\t\t\tfunction flagAsScheduledForPayment(scheduled) {\r\n\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t.flagAsScheduledForPayment(vm.invoice.documentId, scheduled, vm.invoice.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved() {\r\n\t\t\t\t\treloadDocumentState();\r\n\t\t\t\t\treloadDocumentActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * subscribes to invoice details change event           \r\n\t\t\t */\r\n\t\t\tfunction subscribeToInvoiceDetailsChange(subscription) {\r\n\t\t\t\tvm.invoiceDetailsChangeSubscriptions.push(subscription);\r\n\r\n\t\t\t\tsubscription({ currencyId: vm.invoice.currencyId });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * navigates back to list view\r\n\t\t\t */\r\n\t\t\tfunction backToList() {\r\n\t\t\t    diState.go('portal.invoices.list');\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Goes to invoice edit screen\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction goToEdit() {\r\n\t\t\t\tdiState.go('portal.invoices.editById', { id: vm.invoice.headerId });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Navigatest to history list page\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction goToHistory() {\r\n\t\t\t\tdiState.go('portal.audit.list', { id: vm.invoice.documentId });\r\n\t\t\t}\r\n\r\n\t\t\tfunction goToRelated() {\r\n\t\t\t\tdiState.go('portal.related.list', { id: vm.invoice.documentId });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Navigates to view page for current invoice\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction goToViewCurrent() {\r\n\t\t\t\tdiState.go('portal.invoices.viewById', { id: vm.invoice.headerId });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads current document state from db\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction reloadDocumentState() {\r\n\t\t\t\tdocumentProxy\r\n\t\t\t\t\t.getDocumentClientStateId(vm.invoice.headerId, clientEnums.documentType.invoice)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(stateId) {\r\n\t\t\t\t\tsetState(stateId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Sets current state for invoice\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction setState(stateId) {\r\n\t\t\t\tvar state = documentStateResolver.getDocumentState(stateId);\r\n\r\n\t\t\t\tvm.invoice.clientDocumentState = stateId;\r\n\t\t\t\tvm.selectedStates.fill(state);\r\n\r\n\t\t\t\tupdateCurrentState(stateId);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Updates current state to calculated\t\t\t \r\n\t\t\t */\r\n\t\t    function updateCurrentState() {\r\n\t\t        documentStateResolver.calculateCurrentState('invoice', vm.invoice.clientDocumentState, true)\r\n\t\t            .then(function(calculated) {\r\n\t\t                vm.currentState = calculated;\r\n\t\t            });\r\n\t\t    }\r\n\r\n\t\t    /**\r\n             * Adds attribute\t\t\t \r\n             */\r\n\t\t\tfunction addAttribute(aId) {\r\n\t\t\t\tdocumentAttributeResolver.addAttributeById(vm.selectedAttributes, aId);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes attribute\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction removeAttribute(aId) {\r\n\t\t\t\tdocumentAttributeResolver.removeAttribute(vm.selectedAttributes, aId);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Method which sets the visibility of the errors panel \r\n\t\t\t * If not currently loaded then failure details are loaded from the invoice proxy\r\n\t\t\t * @param newVisibility - Whether the failure details panel should be visible\r\n\t\t\t */\r\n\t\t\tfunction viewInvoiceDocumentIssues(visible) {\r\n\t\t\t    vm.invoiceDocumentIssuesDetails.visible = visible;\r\n                \r\n\t\t\t    if (visible && vm.invoiceDocumentIssuesDetails.loaded === false) {\r\n\t\t\t        invoiceProxy\r\n\t\t\t            .getInvoiceDocumentIssues(vm.invoice.headerId)\r\n\t\t\t            .then(invoiceDocumentIssuesResolved, invoiceDocumentIssuesRejected);\r\n\t\t\t    }\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction invoiceDocumentIssuesResolved(documentIssuesModel) {\r\n\t\t\t\t\tvm.invoiceDocumentIssuesDetails.loaded = true;\r\n\r\n\t\t\t\t\tvm.invoiceDocumentIssuesDetails.message = documentIssuesMessageBuilder.buildMessage(documentIssuesModel, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction invoiceDocumentIssuesRejected() {\r\n\t\t\t\t\tnotificationHandler.showError('EINVOICING.PORTAL.INVOICES.COMPONENTS.ERRORS.COULD_NOT_LOAD_ERROR_DETAILS');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Changes the visibility of the attachments section\r\n\t\t\t */\r\n\t\t\tfunction viewDocumentAttachments() {\r\n\t\t\t\tdiState.go('portal.attachments.viewByDocumentId', {\r\n\t\t\t\t\tdocumentId: vm.invoice.documentId,\r\n\t\t\t\t\tinvoiceId: vm.invoice.headerId\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * submits invoice             \r\n\t\t\t */\r\n\t\t\tfunction submit() {\r\n\t\t\t\tvm.submitting = true;\r\n\t\t\t\tinvoiceRepository\r\n\t\t\t\t\t.submitInvoiceByDocumentId(vm.invoice.documentId, vm.invoice.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved() {\r\n\t\t\t\t\treloadDocumentState();\r\n\t\t\t\t\treloadDocumentActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Reloads invoice allowed actions           \r\n\t\t\t */\r\n\t\t\tfunction reloadDocumentActions() {\r\n\t\t\t\tinvoiceRepository.getAllowedActions(vm.invoice.documentId, vm.invoice.number)\r\n\t\t\t\t\t.then(resolved);\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tvm.invoice.actions.fill(data);\r\n\t\t\t\t\tsetActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction setActions() {\r\n\t\t\t\tvar resolvedActions = userActionsResolver.resolveActions(vm.invoice.actions, false);\r\n\r\n\t\t\t\tvm.selectedActions.fill(resolvedActions);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Adds spinner to the page\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction showSpinner() {\r\n\t\t\t\tspinner = modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes spinner from the page\r\n\t\t\t*/\r\n\t\t\tfunction removeSpinner() {\r\n\t\t\t    if (spinner) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Downloads the attachment for the attachment data id\r\n\t\t\t */\r\n\t\t    function downloadAttachment(attachmentDataId, filename) {\r\n\t\t        if (attachmentDownloadValidator.allowDownloadSingleFile(filename)) {\r\n\t\t            attachmentProxy.downloadFile(attachmentDataId);\r\n\t\t        }\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Downloads all the attachments\r\n\t\t\t */\r\n\t\t\tfunction downloadAllAttachments() {\r\n\t\t\t    var attachmentDataIds = [];\r\n\r\n\t\t\t    if (attachmentDownloadValidator.allowDownloadMultipleFiles(vm.invoice.additionalDocumentReferences, attachmentDataIds)) {\r\n                    attachmentProxy.downloadZipFile(attachmentDataIds);\r\n                }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn InvoiceViewerController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/invoices/viewer/invoiceViewerController.js","define([\r\n\t'./_states',\r\n\t'./shared/_loader',\r\n\t'./contacts/_loader',\r\n\t'./locations/_loader',\r\n\t'./list/_loader',\r\n\t'./discovery/_loader',\r\n\t'./party-codes/_loader',\r\n    './loader'\r\n],\r\n\tfunction (\r\n        statesLoader,\r\n\t\tsharedLoader,\r\n        contactsLoader,\r\n        locationsLoader,\r\n\t\tlistLoader,\r\n\t\tdiscoveryLoader,\r\n\t\tpartyCodesLoader,\r\n        componentsLoader) {\r\n\t\t'use strict';\r\n\r\n\t\treturn function (module) {\r\n\t\t\tstatesLoader(module);\r\n\t\t\tsharedLoader(module);\r\n\t\t\tcontactsLoader.load(module);\r\n\t\t    locationsLoader.load(module);\r\n\t\t\tlistLoader(module);\r\n\t\t\tdiscoveryLoader(module);\r\n\t\t\tpartyCodesLoader(module);\r\n\t\t    componentsLoader.load(module);\r\n\t\t};\r\n\t});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/_loader.js","define(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.config(configurePartiesStates);\r\n\r\n\t\tconfigurePartiesStates.$inject = ['stateHelperProvider'];\r\n\t\tfunction configurePartiesStates(stateHelperProvider) {\r\n\t\t\tstateHelperProvider.addStates({\r\n\t\t\t\ttemplateBaseUrl: \"src/app/portal/parties/_states\",\r\n\t\t\t\tparentStateName: 'portal.parties',\r\n\t\t\t\tstates: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"list\",\r\n\t\t\t\t\t\turl: 'list?{forPartyId:int}&{sortOption:int}&{searchText}',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tforPartyId: undefined,\r\n\t\t\t\t\t\t\tsortOption: undefined,\r\n\t\t\t\t\t\t\tsearchText: undefined,\r\n\t\t\t\t\t\t\tpageTitle: undefined,\r\n\t\t\t\t\t\t\tpageNumber: undefined,\r\n\t\t\t\t\t\t\townStateName: 'portal.parties.list'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"viewer\",\r\n\t\t\t\t\t\tonlyCreateStateCollection: true,\r\n\t\t\t\t\t\tstateCollection:\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstateName: \"viewById\",\r\n\t\t\t\t\t\t\t\turl: 'id/{id:int}?{forPartyId:int}&{locationSortOption:int}&{contactSortOption:int}&{singleDetails}',\r\n\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\tid: 0,\r\n\t\t\t\t\t\t\t\t\tforPartyId: 0,\r\n\t\t\t\t\t\t\t\t\tlocationSortOption: undefined,\r\n\t\t\t\t\t\t\t\t    contactSortOption: undefined,\r\n\t\t\t\t\t\t\t\t\tpartyName: undefined,\r\n\t\t\t\t\t\t\t\t\tforPartyName: undefined,\r\n\t\t\t\t\t\t\t\t\townStateName: 'portal.parties.viewById',\r\n\t\t\t\t\t\t\t\t    singleDetails: 'false'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\t\t\t\t\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"mylist\",\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tforPartyId: undefined,\r\n\t\t\t\t\t\t\tsortOption: undefined,\r\n\t\t\t\t\t\t\tsearchText: undefined,\r\n\t\t\t\t\t\t\tpageTitle: undefined,\r\n\t\t\t\t\t\t\tpageNumber: undefined,\r\n\t\t\t\t\t\t\townStateName: 'portal.parties.mylist'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/_states.js","define([\r\n    './discover-parties-list.component',\r\n    './discover-parties-list-configuration.service',\r\n    './discovered-party-details.component'\r\n], function (\r\n    discoverPartiesListComponentLoader,\r\n    discoverPartiesListConfigurationServiceLoader,\r\n    discoveredPartyDetailsComponentLoader) {\r\n        'use strict';\r\n\r\n        return function (module) {\r\n            module.component(\r\n                discoverPartiesListComponentLoader.DiscoverPartiesListComponent.selector,\r\n                discoverPartiesListComponentLoader.DiscoverPartiesListComponent);\r\n            module.service('discoverPartiesListConfigurationService', discoverPartiesListConfigurationServiceLoader.DiscoverPartiesListConfigurationService);\r\n            module.component(\r\n                discoveredPartyDetailsComponentLoader.DiscoveredPartyDetailsComponent.selector,\r\n                discoveredPartyDetailsComponentLoader.DiscoveredPartyDetailsComponent);\r\n        };\r\n    });\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/discovery/_loader.js","const _columns = Symbol('columns');\r\nconst _tableOptions = Symbol('tableOptions');\r\n\r\nclass DiscoverPartiesListConfigurationService {\r\n    constructor() {\r\n        this.getTableOptions = this.getTableOptions.bind(this);\r\n\r\n        this[_tableOptions] = {\r\n            enableSelect: true,\r\n            multiSelect: false,\r\n            enablePaging: true,\r\n            fixedHeight: true,\r\n            maxItemsToShow: 500,\r\n            paginationPageSize: 5,\r\n            paginationPageNumber: 1,\r\n            maxButtonsShown: 3\r\n        };\r\n\r\n        this[_columns] = [\r\n            {\r\n                field: 'nameAndFirstAddressLine',\r\n                headerCellClass: \"collapse\",\r\n                template:\r\n                `<div>\r\n                    <div>\r\n                        <span>{{binding.addressBookEntry.party.name}}</span>\r\n                    </div>\r\n                    <div>\r\n                        <span>{{binding.addressBookEntry.resource.line1 || binding.addressBookEntry.resource.country}}</span>\r\n                    </div>                    \r\n                </div>`\r\n            }\r\n        ];\r\n    }\r\n\r\n    getTableOptions() {\r\n        let tableOptions = angular.copy(this[_tableOptions]);\r\n        tableOptions.columns = this[_columns];\r\n        return Promise.resolve(tableOptions);\r\n    }\r\n}\r\n\r\nDiscoverPartiesListConfigurationService.prototype.constructor.$inject = [];\r\n\r\nexport { DiscoverPartiesListConfigurationService }\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/discovery/discover-parties-list-configuration.service.js","let util = $di.utility.util;\r\n\r\nexport const DiscoverPartiesListComponent = {\r\n    templateUrl: 'src/app/portal/parties/discovery/discover-parties-list.component.html',\r\n    selector: 'diDiscoverPartiesList',\r\n    bindings: {\r\n        partyId: \"<\",\r\n        onTradingPartyIdChanged: \"&\"\r\n    },\r\n    controllerAs: 'discoverPartiesListCtrl',\r\n    controller:\r\n    class DiscoverPartiesListController {\r\n\r\n        constructor(\r\n            partyProxy,\r\n            discoverPartiesListConfigurationService,\r\n            $q) {\r\n            this.partyProxy = partyProxy;\r\n            this.discoverPartiesListConfigurationService = discoverPartiesListConfigurationService;\r\n            this.$q = $q;\r\n\r\n            this.search = this.search.bind(this);\r\n            this.selectedItemChanged = this.selectedItemChanged.bind(this);\r\n            this.resetSelection = this.resetSelection.bind(this);\r\n        }\r\n\r\n        $onInit() {\r\n            let tableOptionsPromise = this.discoverPartiesListConfigurationService.getTableOptions()\r\n                .then(tableOptions => {\r\n                    this.tableOptions = tableOptions;\r\n                });\r\n            this.resetSelection();\r\n        }\r\n\r\n        search(withDelay) {\r\n            if (withDelay) {\r\n                if (!this.delayStarted) {\r\n                    this.delayStarted = true;\r\n                    _.debounce(this.searchNoDelay, 1000).bind(this)();\r\n                }\r\n            } else {\r\n                this.searchNoDelay();\r\n            }\r\n        }\r\n\r\n        searchNoDelay() {\r\n            this.loading = true;\r\n            if (util.isNullOrUndefined(this.searchText) || this.searchText === '') {\r\n                this.parties = [];\r\n                this.allParties = [];\r\n                this.resetSelection();\r\n                this.loading = false;\r\n                this.delayStarted = false;\r\n            } else {\r\n                this.partyProxy\r\n                    .discoverPotentialTradingRelationshipParties(this.partyId, this.searchText)\r\n                    .then(data => {\r\n                        this.allParties = data;\r\n                        this.parties = _.filter(this.allParties, (party) => {\r\n                            return party.addressBookEntry.party.isAccountingCustomer == false;\r\n                        });\r\n                        this.resetSelection();\r\n                    })\r\n                    .finally(() => {\r\n                        this.loading = false;\r\n                        this.delayStarted = false;\r\n                    });\r\n            }\r\n        }\r\n\r\n        selectedItemChanged(items) {\r\n            if (util.isNonEmptyArray(items) && items.length === 1) {\r\n\r\n                let selectedItem = items[0];\r\n\r\n                let partyId = selectedItem.addressBookEntry.party.isAccountingCustomer\r\n                    ? selectedItem.addressBookEntry.party.buyers[0].id\r\n                    : selectedItem.addressBookEntry.party.id;\r\n\r\n                this.party = selectedItem.addressBookEntry.party.id === partyId\r\n                    ? selectedItem\r\n                    : _.find(this.parties, (party) => {\r\n                        return party.addressBookEntry.party.id === partyId;\r\n                    });\r\n\r\n                var accountingCustomerForThisBuyer = _.find(this.allParties, (party) => {\r\n                    if(party.addressBookEntry.party.isAccountingCustomer){\r\n                        var selectedBuyer = _.find(party.addressBookEntry.party.buyers, (buyer) => {\r\n                            return buyer.id === this.party.addressBookEntry.party.id;\r\n                        });\r\n\r\n                        if (util.isDefined(selectedBuyer)) {\r\n                            return party;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                this.accountingParties = [accountingCustomerForThisBuyer];\r\n\r\n                this.onTradingPartyIdChanged({ tradingPartyId: this.party.addressBookEntry.party.id });\r\n            }\r\n            else {\r\n                this.resetSelection();\r\n            }\r\n        }\r\n\r\n        resetSelection() {\r\n            this.party = undefined;\r\n            this.accountingParties = undefined;\r\n\r\n            this.onTradingPartyIdChanged({ tradingPartyId: undefined });\r\n        }\r\n    }\r\n}\r\n\r\nDiscoverPartiesListComponent.controller.prototype.constructor.$inject = ['partyProxy', 'discoverPartiesListConfigurationService', '$q'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/discovery/discover-parties-list.component.js","export const DiscoveredPartyDetailsComponent = {\r\n    templateUrl: 'src/app/portal/parties/discovery/discovered-party-details.component.html',\r\n    selector: 'diDiscoveredPartyDetails',\r\n    bindings: {\r\n        partyName: '<',\r\n        address: '<',\r\n        identifiers: '<',\r\n        endpoints: '<'\r\n    },\r\n    transclude: {\r\n        'heading': '?diDiscoveredPartyDetailsHeading'\r\n    },\r\n    controllerAs: 'discoveredPartyDetailsCtrl',\r\n    controller:\r\n    class DiscoveredPartyDetailsController {\r\n        constructor() {\r\n        }\r\n    }\r\n}\r\n\r\nDiscoveredPartyDetailsComponent.controller.prototype.constructor.$inject = [];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/discovery/discovered-party-details.component.js","define([\r\n    './party-list.component.js',\r\n    './party-list-table-configuration.service.js',\r\n    './party-selector.component.js',\r\n    './allocated-to-party-list.component.js',\r\n    './working-for-party-list.component.js'\r\n], function(\r\n    partyListComponentLoader,\r\n    partyListTableConfigurationServiceLoader,\r\n    partySelectorComponentLoader,\r\n    allocatedToPartyListComponentLoader,\r\n    workingForPartyListComponentLoader) {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        module.component(\r\n            partyListComponentLoader.PartyListComponent.selector,\r\n            partyListComponentLoader.PartyListComponent);        \r\n        module.service(\r\n            'PartyListTableConfigurationService',\r\n            partyListTableConfigurationServiceLoader.PartyListTableConfigurationService);\r\n        module.component(\r\n            partySelectorComponentLoader.PartySelectorComponent.selector,\r\n            partySelectorComponentLoader.PartySelectorComponent);\r\n        module.component(\r\n            allocatedToPartyListComponentLoader.AllocatedToPartyListComponent.selector,\r\n            allocatedToPartyListComponentLoader.AllocatedToPartyListComponent);\r\n        module.component(\r\n            workingForPartyListComponentLoader.WorkingForPartyListComponent.selector,\r\n            workingForPartyListComponentLoader.WorkingForPartyListComponent);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/list/_loader.js","const _pageTitleOptions = Symbol('pageTitleOptions');\r\n\r\nexport const AllocatedToPartyListComponent = {\r\n    templateUrl: 'src/app/portal/parties/list/allocated-to-party-list.component.html',\r\n    selector: 'diAllocatedToPartyList',\r\n    controller:\r\n    class {\r\n        constructor(\r\n            partyProxy\r\n        ) {\r\n            this.partyProxy = partyProxy;\r\n\r\n            this.getSearchResults = this.getSearchResults.bind(this);\r\n\r\n            this[_pageTitleOptions] = [\r\n                {\r\n                    rights: [\"Supplier\"],\r\n                    languageKey: 'EINVOICING.PORTAL.PARTIES.LIST.PAGE_TITLE.BUYERS'\r\n                },\r\n                {\r\n                    rights: [\"Buyer\"],\r\n                    languageKey: 'EINVOICING.PORTAL.PARTIES.LIST.PAGE_TITLE.SUPPLIERS'\r\n                },\r\n            ];\r\n        }\r\n\r\n        $onInit() {\r\n            this.addEnabled = true;\r\n            this.pageTitleOptions = this[_pageTitleOptions];\r\n            this.partyProxy\r\n                .getAllPartiesUserCanWorkFor(0)\r\n                .then((data) => {\r\n                    this.relatedParties = data;\r\n                });\r\n        }\r\n\r\n        getSearchResults(searchText = \"\", relatedPartyId) {\r\n            return this.partyProxy\r\n                .getPartyManagementSearchResults(relatedPartyId, searchText)\r\n                .then((data) => {\r\n                    this.partyManagementSearchResults = data;\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\nAllocatedToPartyListComponent.controller.prototype.constructor.$inject = ['partyProxy'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/list/allocated-to-party-list.component.js","class PartyListTableConfigurationService {\r\n    constructor() { }\r\n\r\n    getTableHeaders() {\r\n        return [\r\n            {\r\n                field: 'partyName',\r\n                nameLanguageKey: 'EINVOICING.PORTAL.PARTIES.LIST.TABLE.NAME',\r\n                template: '<span>{{binding.partyName}}</span>'\r\n            },\r\n            {\r\n                field: 'partyFinancialAddress',\r\n                nameLanguageKey: 'EINVOICING.PORTAL.PARTIES.LIST.TABLE.BUSINESS_ADDRESS',\r\n                template: '<span>{{binding.partyFinancialAddress}}</span>'\r\n            },\r\n            {\r\n                field: 'taxReference',\r\n                nameLanguageKey: 'EINVOICING.PORTAL.PARTIES.LIST.TABLE.TAX_REFERENCE',\r\n                template: '<span>{{binding.taxReference}}</span>'\r\n            }];\r\n    }\r\n\r\n    getActionColumns() {\r\n        return [\r\n            {\r\n                field: 'actionButtons',\r\n                template: '<di-button image=\"view\" image-colour=\"button\" action=\"controller.viewParty(binding)\"></di-button>',\r\n                cellClass: 'cell-right'\r\n            }];\r\n    }\r\n\r\n    getSortOptions() {\r\n        return [\r\n            {\r\n                value: 1,\r\n                key: \"partyName_Asc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.LIST.SORT_BY_VALUES.NAME_ASC\"\r\n            },\r\n            {\r\n                value: 2,\r\n                key: \"partyName_Desc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.LIST.SORT_BY_VALUES.NAME_DESC\"\r\n            },\r\n            {\r\n                value: 3,\r\n                key: \"partyBusinessAddress_Asc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.LIST.SORT_BY_VALUES.BUSINESS_ADDRESS_ASC\"\r\n            },\r\n            {\r\n                value: 4,\r\n                key: \"partyBusinessAddress_Desc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.LIST.SORT_BY_VALUES.BUSINESS_ADDRESS_DESC\"\r\n            },\r\n            {\r\n                value: 5,\r\n                key: \"taxReference_Asc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.LIST.SORT_BY_VALUES.TAX_REFERENCE_ASC\"\r\n            },\r\n            {\r\n                value: 6,\r\n                key: \"taxReference_Desc\",\r\n                label: \"EINVOICING.PORTAL.PARTIES.LIST.SORT_BY_VALUES.TAX_REFERENCE_DESC\"\r\n            }\r\n        ];\r\n    }\r\n\r\n    getTableOptions() {\r\n        return {\r\n            maxItemsToShow: 500,\r\n            enablePaging: true,\r\n            enableSelect: true,\r\n            multiSelect: false,\r\n            fixedHeight: true,\r\n            paginationPageNumber: 1,\r\n            paginationPageSize: 10,\r\n            maxButtonsShown: 3\r\n        }\r\n    }\r\n\r\n    getAddConfiguration() {\r\n        //at the moment only suppliers can create new trading relationships\r\n        return [\r\n            {\r\n                rights: ['Supplier', 'Supervisor'],\r\n                addNewLanguageKey: 'EINVOICING.PORTAL.PARTIES.LIST.TABLE.ADD_NEW_BUYER',\r\n                addLanguageKey: 'EINVOICING.PORTAL.PARTIES.BUTTONS.ADD_BUYER',\r\n                partyType: 'EINVOICING.PORTAL.PARTIES.LIST.PARTY_TYPE_BUYER',\r\n            }\r\n        ];\r\n    }\r\n}\r\n\r\nexport { PartyListTableConfigurationService }\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/list/party-list-table-configuration.service.js","import { AddPartyComponentController } from '../add-party.component.controller';\r\n\r\nexport const PartyListComponent = {\r\n    templateUrl: 'src/app/portal/parties/list/party-list.component.html',\r\n    selector: 'diPartyList',\r\n    bindings: {\r\n        relatedParties: '<',\r\n        partyManagementSearchResults: '<',\r\n        getSearchResults: '&',\r\n        addEnabled: '<',\r\n        pageTitleOptions: '<'\r\n    },\r\n    controller:\r\n    class {\r\n\r\n        constructor(\r\n            partyListTableConfigurationService,\r\n            diState,\r\n            stateParams,\r\n            listsParamsStore,\r\n            modalWindow,\r\n            notificationHandler,\r\n            tradingRelationshipProxy,\r\n            authorizedObjectsFilter\r\n        ) {\r\n            this.partyListTableConfigurationService = partyListTableConfigurationService;\r\n            this.diState = diState;\r\n            this.stateParams = stateParams;\r\n            this.listsParamsStore = listsParamsStore;\r\n            this.modalWindow = modalWindow;\r\n            this.notificationHandler = notificationHandler;\r\n            this.tradingRelationshipProxy = tradingRelationshipProxy;\r\n            this.authorizedObjectsFilter = authorizedObjectsFilter;\r\n\r\n            this.onSelection = this.onSelection.bind(this);\r\n            this.viewParty = this.viewParty.bind(this);\r\n            this.onSortByChanged = this.onSortByChanged.bind(this);\r\n            this.searchPartyList = this.searchPartyList.bind(this);\r\n        }\r\n\r\n        $onInit() {\r\n            this.partyManagementTable = [];\r\n            this.dataTableOptions = {};\r\n            this.selectedParty = {};\r\n            this.searchText = \"\";\r\n\r\n            this.dataTableOptions = this.partyListTableConfigurationService.getTableOptions();\r\n            this.dataTableOptions.columns = this.partyListTableConfigurationService.getTableHeaders();\r\n            this.dataTableOptions.actionColumns = this.partyListTableConfigurationService.getActionColumns();\r\n            this.sortByOptions = this.partyListTableConfigurationService.getSortOptions();\r\n            this.sortBy = this.sortByOptions[0];\r\n\r\n            let config = this.partyListTableConfigurationService.getAddConfiguration();\r\n            let authorizedConfig = this.authorizedObjectsFilter.getAuthorizedObjects(config, true);\r\n            this.addConfiguration = (authorizedConfig && authorizedConfig.length > 0) ? authorizedConfig[0] : undefined;\r\n            \r\n            let authorizedPageTitleConfig = this.authorizedObjectsFilter.getAuthorizedObjects(this.pageTitleOptions, true);\r\n            this.pageTitle = (authorizedPageTitleConfig && authorizedPageTitleConfig.length > 0) ? authorizedPageTitleConfig[0] : undefined;\r\n\r\n            if (this.stateParams.pageNumber) {\r\n                this.dataTableOptions.paginationPageNumber = this.stateParams.pageNumber;\r\n            }\r\n            if (this.stateParams.searchText) {\r\n                this.searchText = this.stateParams.searchText;\r\n            }\r\n            if (this.stateParams.sortOption) {\r\n                this.sortBy = _.find(this.sortByOptions, (sortBy) => {\r\n                    return sortBy.value === this.stateParams.sortOption;\r\n                });\r\n            }\r\n        }\r\n\r\n        $onChanges(changes) {\r\n\r\n            if (changes.relatedParties\r\n                && !changes.relatedParties.previousValue\r\n                && changes.relatedParties.currentValue\r\n                && changes.relatedParties.currentValue.length > 0) {\r\n\r\n                this.parties = changes.relatedParties.currentValue;\r\n                this.forPartySelected = this.parties[0];\r\n\r\n                if (this.stateParams.forPartyId) {\r\n                    let party = _.find(changes.relatedParties.currentValue, (party) => {\r\n                        return party.partyId === this.stateParams.forPartyId;\r\n                    });\r\n\r\n                    if (party\r\n                        && this.forPartySelected\r\n                        && party.partyId !== this.forPartySelected.partyId) {\r\n                        this.forPartySelected = party;\r\n                    }\r\n                }\r\n\r\n                this.searchPartyList();\r\n            }\r\n\r\n            if (changes.partyManagementSearchResults\r\n                && changes.partyManagementSearchResults.currentValue) {\r\n\r\n                //split into a value/ascension array\r\n                var splitSortBy = this.sortBy.key.split('_');\r\n\r\n                var sortedByArray = _.sortBy(changes.partyManagementSearchResults.currentValue, splitSortBy[0]);\r\n\r\n                if (splitSortBy[1] === 'Desc') {\r\n                    sortedByArray = sortedByArray.reverse();\r\n                }\r\n\r\n                this.populateDataTableOptions(sortedByArray);\r\n                this.partyManagementTable.fill(sortedByArray);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Sets the party that has been selected, and re-fetches the party search data\r\n         * selectedParty = the selected party from the drop down\r\n         */\r\n        onSelection(selectedParty) {\r\n            if (selectedParty.partyId === this.forPartySelected.partyId) {\r\n                return;\r\n            }\r\n            this.forPartySelected = angular.copy(selectedParty);\r\n            this.reloadPage();\r\n        }\r\n\r\n        /**\r\n         * Triggered when the sort by is changed for this component\r\n         * value = the numeric value assigned to the sortbyOptions list\r\n         */\r\n        onSortByChanged(value) {\r\n            if (this.sortBy && this.sortBy.value === value) {\r\n                return;\r\n            }\r\n\r\n            if (!this.sortByOptions || this.sortByOptions.length === 0) {\r\n                this.sortByOptions = this.partyListTableConfigurationService.getSortOptions();\r\n            }\r\n\r\n            this.sortBy = _.find(this.sortByOptions, (sortBy) => {\r\n                return sortBy.value === value;\r\n            });\r\n\r\n            this.reloadPage();\r\n        }\r\n\r\n        /**\r\n         * Changes the state of the page to the view page for that selected party\r\n         */\r\n        viewParty(selectedParty) {\r\n            let forPartyId;\r\n            let forPartyName;\r\n\r\n            if (typeof this.forPartySelected !== 'undefined' && !_.isEmpty(this.forPartySelected)) {\r\n                forPartyId = this.forPartySelected.partyId;\r\n                forPartyName = this.forPartySelected.name;\r\n            } else {\r\n                forPartyId = selectedParty.partyId;\r\n                forPartyName = selectedParty.partyName;\r\n            }\r\n\r\n            const detailsParams = this.listsParamsStore.get('partyDetails') || {};\r\n\r\n            const pageParams = {\r\n                id: selectedParty.partyId,\r\n                forPartyId: forPartyId,\r\n                partyName: selectedParty.partyName,\r\n                forPartyName: forPartyName,\r\n                singleDetails: 'false'\r\n            }\r\n\r\n            const params = _.extend(pageParams, detailsParams);\r\n\r\n            this.diState.go('portal.parties.viewById', params);\r\n        }\r\n\r\n        /**\r\n         * Search results based on updated search text\r\n         */\r\n        searchPartyList() {\r\n            this.getSearchResults(\r\n                { relatedPartyId: this.forPartySelected.partyId, searchText: this.searchText })\r\n                .then((result) => {\r\n                    this.storeParams();\r\n                });\r\n        }\r\n\r\n        reloadPage() {\r\n            this.diState.go(this.stateParams.ownStateName, {\r\n                pageTitle: this.stateParams.pageTitle,\r\n                sortOption: this.sortBy.value,\r\n                searchText: this.searchText,\r\n                forPartyId: (this.forPartySelected || {}).partyId,\r\n                pageNumber: 1\r\n            }, { reload: true });\r\n        }\r\n\r\n        populateDataTableOptions(data) {\r\n            this.dataTableOptions.data = [];\r\n            this.dataTableOptions.data.fill(data);\r\n        }\r\n\r\n        storeParams() {\r\n            if (!this.forPartySelected\r\n                || !this.forPartySelected.partyId\r\n                || !this.sortBy\r\n                || !this.sortBy.value) {\r\n                return;\r\n            }\r\n            let params = _.extend({},\r\n                {\r\n                    sortOption: this.sortBy.value,\r\n                    searchText: this.searchText,\r\n                    pageTitle: this.stateParams.pageTitle,\r\n                    forPartyId: (this.forPartySelected || {}).partyId\r\n                });\r\n            params.pageNumber = this.dataTableOptions.paginationPageNumber = 1;\r\n            this.listsParamsStore.set(\"parties\", params);\r\n        }\r\n\r\n        addParty() {\r\n            const options = {\r\n                controller: AddPartyComponentController,\r\n                templateUrl: 'src/app/portal/parties/add-party.component.html',\r\n                partyId: (this.forPartySelected || {}).partyId,\r\n                modalTitle: (this.addConfiguration || {}).addNewLanguageKey,\r\n                saveButtonText: (this.addConfiguration || {}).addLanguageKey,\r\n            };\r\n\r\n            this.showPopup(options);\r\n        }\r\n\r\n        showPopup(options) {\r\n            this.modalWindow.show(options,\r\n                (result) => {\r\n                    this.tradingRelationshipProxy.createTradingRelationship((this.forPartySelected || {}).partyId, result)\r\n                        .then(res => {\r\n                            if (res) {\r\n                                this.getSearchResults({ relatedPartyId: this.forPartySelected.partyId, searchText: this.searchText });\r\n                                this.notificationHandler.showSuccess('EINVOICING.PORTAL.PARTIES.ACTIONS.ADDED', (this.addConfiguration || {}).partyType);\r\n                            } else {\r\n                                this.notificationHandler.showError(message, identifier);\r\n                            }\r\n                        }, (response = {}) => {\r\n                            this.notificationHandler.showError(response.failureReason);\r\n                        });\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\nPartyListComponent.controller.prototype.constructor.$inject = ['PartyListTableConfigurationService', 'diState', '$stateParams', 'listsParamsStore', 'modalWindow', 'notificationHandler', 'tradingRelationshipProxy', 'authorizedObjectsFilter'];\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/list/party-list.component.js","export const PartySelectorComponent = {\r\n    templateUrl: 'src/app/portal/parties/list/party-selector.component.html',\r\n    selector: 'diPartySelector',\r\n    bindings: {\r\n        parties: '<',\r\n        selectedId :'<',\r\n        onSelection: '&'\r\n    },\r\n    controller:\r\n    class {\r\n\r\n        constructor() {\r\n            this.partiesCollection = [];\r\n            this.selectedParty = {};\r\n\r\n            this.onSelected = this.onSelected.bind(this);\r\n        }\r\n\r\n        $onInit() {\r\n            this.init();\r\n        }\r\n\r\n        $onChanges(changes) {\r\n            if (changes.selectedId.currentValue) {\r\n                this.selectPartyById(changes.selectedId.currentValue);\r\n            }\r\n        }\r\n\r\n        init() {\r\n            this.partiesCollection = this.parties;\r\n        }\r\n\r\n        selectPartyById(id) {\r\n            this.selectedParty = _.find(this.parties, (party) => {\r\n                return party.partyId === id;\r\n\r\n            });\r\n        }\r\n\r\n        onSelected(selectedParty) {\r\n            \r\n            this.selectedParty = selectedParty;\r\n\r\n            this.onSelection({selectedParty: selectedParty});\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/list/party-selector.component.js","const _pageTitleOptions = Symbol('pageTitleOptions');\r\n\r\nexport const WorkingForPartyListComponent = {\r\n    templateUrl: 'src/app/portal/parties/list/allocated-to-party-list.component.html',\r\n    selector: 'diWorkingForPartyList',\r\n    controller:\r\n    class {\r\n        constructor(\r\n            partyProxy\r\n        ) {\r\n            this.partyProxy = partyProxy;\r\n            this.getSearchResults = this.getSearchResults.bind(this);\r\n\r\n            this[_pageTitleOptions] = [\r\n                {\r\n                    rights: [\"Buyer\"],\r\n                    languageKey: 'EINVOICING.PORTAL.PARTIES.LIST.PAGE_TITLE.PARTY_MANAGEMENT'\r\n                },\r\n                {\r\n                    rights: [\"Supplier\"],\r\n                    languageKey: 'EINVOICING.PORTAL.PARTIES.LIST.PAGE_TITLE.PARTY_MANAGEMENT'\r\n                }\r\n            ];\r\n        }\r\n\r\n        $onInit() {\r\n            this.addEnabled = false;\r\n            this.pageTitleOptions = this[_pageTitleOptions];\r\n            this.getSearchResults();\r\n        }\r\n\r\n        getSearchResults(searchText = \"\") {\r\n            return this.partyProxy\r\n                .getWorkingForPartyManagementSearchResults(searchText)\r\n                .then((data) => {\r\n                    this.partyManagementSearchResults = data;\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\nWorkingForPartyListComponent.controller.prototype.constructor.$inject = ['partyProxy'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/list/working-for-party-list.component.js","define([\r\n    './party-codes.component',\r\n    './loader',\r\n    './shared/_loader',\r\n    \r\n], function(\r\n    partyCodesComponentLoader,\r\n    partyCodeComponentLoader,\r\n    sharedLoader) {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        module.component(\r\n            partyCodesComponentLoader.PartyCodesComponent.selector,\r\n            partyCodesComponentLoader.PartyCodesComponent);\r\n        partyCodeComponentLoader.load(module);\r\n        sharedLoader.load(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/party-codes/_loader.js","export const PartyCodesComponent = {\r\n    templateUrl: 'src/app/portal/parties/party-codes/party-codes.component.html',\r\n    selector: 'diPartyCodes',\r\n    bindings: {\r\n        readonly: '<',\r\n        partyId: '<',\r\n        identifiers: '<',\r\n        endpoints: '<',\r\n        taxReferences: '<',\r\n        addNewCode: '&',\r\n        updatePartyCode: '&',\r\n        deletePartyCode: '&',\r\n    },\r\n    controllerAs: 'partyCodesCtrl',\r\n    controller:\r\n    class PartyCodesController {\r\n\r\n        constructor(partyProxy) {\r\n            this.partyProxy = partyProxy;\r\n\r\n            this.addNewPartyCode = this.addNewPartyCode.bind(this);\r\n            this.updateCode = this.updateCode.bind(this);\r\n        }\r\n\r\n        $onInit() {\r\n            this.partyProxy.getAssociatedPartiesTradingRelationshipsByParty(this.partyId).then((parties) => {\r\n                this.relatedParties = parties;\r\n                \r\n                //only working for identifiers ATM\r\n                this.identifiers = _.map(this.identifiers, (partyCode) => {\r\n                    if(partyCode.relatedParty > 0) {\r\n                        var party = _.find(this.relatedParties, (relatedParty) => {\r\n                            return partyCode.relatedParty === relatedParty.id;\r\n                        });\r\n\r\n                        partyCode.relatedPartyDetails = party;\r\n                    }\r\n\r\n                    return partyCode;\r\n                });\r\n            });\r\n        }\r\n\r\n        addNewPartyCode(data) {\r\n            data.partyId = this.partyId;\r\n            this.addNewCode({ data });\r\n        }\r\n\r\n        updateCode(data) {\r\n            data.partyId = this.partyId;            \r\n            this.updatePartyCode({data});\r\n        }\r\n\r\n        deleteCode(data) {\r\n            data.partyId = this.partyId;            \r\n            this.deletePartyCode({data});\r\n        }\r\n    }\r\n}\r\n\r\nPartyCodesComponent.controller.prototype.constructor.$inject = ['partyProxy']\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/party-codes/party-codes.component.js","define([\r\n], function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/parties/shared/_loader.js","//{CODE:EUP7L}\r\n// di.einvoicing.ui.portal.portal.grn.viewer\r\ndefine(function () {\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n        module.controller('portalController', portalController);\r\n\r\n        portalController.$inject = ['activityMonitor'];\r\n\r\n        function portalController(activityMonitor) {\r\n            activityMonitor.start();\r\n        }\r\n        return portalController;\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/portalController.js","define([\r\n\t'./_states',\r\n    './lists/_loader',\r\n    './viewer/_loader',\r\n    './purchaseOrderRepository',\r\n    './purchaseOrderLinesColumnSettings',\r\n    './purchase-order-proxy.factory',\r\n    './purchase-order-additional-document-references-configuration'\r\n], function (\r\n    statesLoader,\r\n    listsLoader,\r\n    viewerLoader,\r\n\tpurchaseOrderRepositoryLoader,\r\n    purchaseOrderLinesColumnSettingsLoader,\r\n    purchaseOrderProxyLoader,\r\n    additionalDocumentReferencesConfigurator) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tstatesLoader(module);\r\n\t\tlistsLoader(module);\r\n\t\tviewerLoader(module);\r\n\t\tpurchaseOrderRepositoryLoader(module);\r\n\t\tpurchaseOrderLinesColumnSettingsLoader(module);\r\n\t\tpurchaseOrderProxyLoader(module);\r\n\t    additionalDocumentReferencesConfigurator(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/_loader.js","//{CODE:EUP2C}\r\n// di.einvoicing.ui.portal.portal.purchaseorders\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.config(configurePurchaseOrdersStates);\r\n\r\n        configurePurchaseOrdersStates.$inject = ['stateHelperProvider'];\r\n        function configurePurchaseOrdersStates(stateHelperProvider) {\r\n            stateHelperProvider.addStates({\r\n                templateBaseUrl: \"src/app/portal/purchaseOrders/_states\",\r\n                parentStateName: 'portal.orders',\r\n                states: [\r\n                    {\r\n                        stateName: \"list\",\r\n                        url: 'list?{dateType:int}&{dateTimeFilter}&{statusFilter:int}&{sortOption:int}&{fromDate:date}&{toDate:date}&{searchText}',\r\n                        params: {\r\n                            dateType: undefined,\r\n                            dateTimeFilter: undefined,\r\n                            statusFilter: undefined,\r\n                            sortOption: undefined,\r\n                            fromDate: undefined,\r\n                            toDate: undefined,\r\n                            searchText: undefined,\r\n                            pageSize: undefined,\r\n                            pageNumber: undefined\r\n                        }\r\n                    },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t    stateName: \"viewer\",\r\n\t\t\t\t\t    rights: [\"PurchaseOrderReader\"],\r\n\t\t\t\t\t    onlyCreateStateCollection: true,\r\n\t\t\t\t\t    stateCollection:\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t    stateName: \"viewByPurchaseOrderNumber\",\r\n\t\t\t\t\t\t\t    url: '{purchaseOrderNumber}'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t    stateName: \"viewById\",\r\n\t\t\t\t\t\t\t    url: 'id/{id:int}',\r\n\t\t\t\t\t\t\t    params: {\r\n\t\t\t\t\t\t\t        id: 0\r\n\t\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t    stateName: \"viewByAuditId\",\r\n\t\t\t\t\t\t\t    url: 'view/id/{id:int}-v{aid:int}',\r\n\t\t\t\t\t\t\t    data: {\r\n\t\t\t\t\t\t\t        header: { title: \"EINVOICING.PORTAL.ORDERS.VIEWER.VIEW.HEADER.TITLE\" }\r\n\t\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t\t    params: {\r\n\t\t\t\t\t\t\t        id: 0,\r\n\t\t\t\t\t\t\t        aid: 0\r\n\t\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n                ]\r\n            });\r\n        }\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/_states.js","//{CODE:/UP07}\r\n// di.einvoicing.ui.portal.portal.purcahseorders.lists.components\r\ndefine([\r\n    './_snippets/_loader',\r\n    './purchaseOrderList/purchaseOrderListDirective'\r\n], function(\r\n    snippetsLoader,\r\n    purchaseOrderListDirectiveLoader) {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        snippetsLoader(module);\r\n        purchaseOrderListDirectiveLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/lists/_components/_loader.js","//{CODE:EUP02}\r\n// di.einvoicing.ui.portal.portal.purchaseorders.lists.components.snippets\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        var snippetContext = $di.angular.snippetRegistrar.createContext(\r\n            module,\r\n            'src/app/portal/purchaseOrders/lists/_components/_snippets');\r\n\r\n        snippetContext.registerSnippet('diPurchaseOrderActionButtons', 'purchaseOrderActionButtons.html');\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/lists/_components/_snippets/_loader.js","//{CODE:EUP5B}\r\n// di.einvoicing.ui.portal.portal.purchaseorder.lists\r\ndefine(['angular'], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diPurchaseOrderList', diPurchaseOrderList);\r\n\r\n        function diPurchaseOrderList() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {},\r\n                controller: \"PurchaseOrderListController\",\r\n                controllerAs: \"purchaseOrderListCtrl\",\r\n                templateUrl: 'src/app/portal/purchaseOrders/lists/_components/purchaseOrderList/purchaseOrderList.html',\r\n                link: link\r\n            };\r\n\r\n            function link(scope) {\r\n                scope.findElement = findElement;\r\n\r\n                return;\r\n\r\n                function findElement(name) {\r\n                    return ng.element(name);\r\n                }\r\n            }\r\n        }\r\n\r\n        return diPurchaseOrderList;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/lists/_components/purchaseOrderList/purchaseOrderListDirective.js","//{CODE:EUP5A}\r\n// di.einvoicing.ui.portal.portal.invoices.lists\r\ndefine([\r\n    './_components/_loader',\r\n\t'./purchaseOrderListFiltersController',\r\n\t'./purchaseOrderListController',\r\n    './purchaseOrderListConfigurator'\r\n], function (\r\n\tcomponentsLoader,\r\n\tpurchaseOrderListFiltersControllerLoader,\r\n\tpurchaseOrderListControllerLoader,\r\n    purchaseOrderListConfiguratorLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tcomponentsLoader(module);\r\n\t\tpurchaseOrderListFiltersControllerLoader(module);\r\n\t\tpurchaseOrderListControllerLoader(module);\r\n\t\tpurchaseOrderListConfiguratorLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/lists/_loader.js","//{CODE:EUP2H}\r\n// di.einvoicing.ui.portal.portal.purchaseorders.lists\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.provider('purchaseOrderListConfigurator', PurchaseOrderListConfiguratorProvider);\r\n\r\n\t\t/**\r\n\t\t * Manages purchase order list configuration and set up.\r\n\t\t */\r\n\t\tfunction PurchaseOrderListConfiguratorProvider() {\r\n\t\t\tvar config = {\r\n\t\t\t};\r\n\r\n\t\t\tvar buttonsConfiguration = {};\r\n\r\n\t\t\tvar columnDefinitions = [\r\n\t\t        {\r\n\t\t        \trights: ['Buyer'],\r\n\t\t        \tfield: 'purchaseOrderNumber',\r\n\t\t        \tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.COLUMN_HEADERS.PURCHASE_ORDER_NUMBER',\r\n\t\t        \ttemplate: '<span>{{binding.purchaseOrderNumber}}</span>'\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['Supplier'],\r\n\t\t        \tfield: 'purchaseOrderNumber',\r\n\t\t        \tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.COLUMN_HEADERS.SALES_ORDER_NUMBER',\r\n\t\t        \ttemplate: '<span>{{binding.purchaseOrderNumber}}</span>'\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['Supplier', 'Buyer'],\r\n\t\t        \tfield: 'orderType',\r\n\t\t        \tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.COLUMN_HEADERS.DOCUMENT_TYPE',\r\n\t\t        \ttemplate: '<span>{{binding.orderType}}</span>'\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['Supplier', 'Buyer'],\r\n\t\t        \tfield: 'createdDateTime',\r\n\t\t        \tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.COLUMN_HEADERS.CREATED_DATE',\r\n\t\t        \ttemplate: '<span>{{ binding.createdDateTime | diDate }}</span>',\r\n\t\t        \tcellClass: 'centeredcell'\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['Supplier', 'Buyer'],\r\n\t\t        \tfield: 'issuedDateTime',\r\n\t\t        \tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.COLUMN_HEADERS.ISSUED_DATE',\r\n\t\t        \ttemplate: '<span>{{ binding.issuedDateTime | diDate }}</span>',\r\n\t\t        \tcellClass: 'centeredcell'\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['Supplier', 'Buyer'],\r\n\t\t        \tfield: 'expectedDeliveryDateTime',\r\n\t\t        \tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.COLUMN_HEADERS.DELIVERY_DATE',\r\n\t\t        \ttemplate: '<span>{{ binding.expectedDeliveryDateTime | diDate }}</span>',\r\n\t\t        \tcellClass: 'centeredcell'\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['Buyer'],\r\n\t\t        \tfield: 'supplier',\r\n\t\t        \tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.COLUMN_HEADERS.SELLER',\r\n\t\t        \ttemplate: '<div class=\"tooltip-wrap\">\\\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-ellipsis\">{{binding.supplier}}</span>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"(binding.supplier || \\'\\').length >= 35\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-class=\"((binding.supplier || \\'\\').length > 70) ? [\\'tooltip\\', \\'tooltip-multiline\\'] : \\'tooltip\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t<span>\\\r\n\t\t\t\t\t\t\t\t\t\t\t{{ ::binding.supplier }}\\\r\n\t\t\t\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t        \tcellClass: 'max-width-300'\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['Supplier'],\r\n\t\t        \tfield: 'customer',\r\n\t\t        \tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.COLUMN_HEADERS.BUYER',\r\n\t\t        \ttemplate: '<div class=\"tooltip-wrap\">\\\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-ellipsis\">{{binding.customer}}</span>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"(binding.customer || \\'\\').length >= 35\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-class=\"((binding.customer || \\'\\').length > 70) ? [\\'tooltip\\', \\'tooltip-multiline\\'] : \\'tooltip\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t<span>\\\r\n\t\t\t\t\t\t\t\t\t\t\t{{ ::binding.customer }}\\\r\n\t\t\t\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t        \tcellClass: 'max-width-300'\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['Supplier', 'Buyer'],\r\n\t\t        \tfield: 'totalLines',\r\n\t\t        \tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.COLUMN_HEADERS.LINES',\r\n\t\t        \ttemplate: '<span>{{ binding.totalLines }}</span>',\r\n\t\t        \tcellClass: 'centeredcell'\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['Supplier', 'Buyer'],\r\n\t\t        \tfield: 'total',\r\n\t\t        \tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.COLUMN_HEADERS.TOTAL',\r\n\t\t        \ttemplate: '<span>{{ binding.total | diCurrency:binding.currencyId }}</span>',\r\n\t\t        \tcellClass: 'numericcell'\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['Supplier', 'Buyer'],\r\n\t\t        \tfield: 'clientEInvoicingState',\r\n\t\t        \tnameLanguageKey: 'EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.COLUMN_HEADERS.STATE',\r\n\t\t        \ttemplate: '<span>{{binding.calculatedState}}</span>',\r\n\t\t        \tcellClass: 'centeredcell'\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['Admin'],\r\n\t\t        \tfield: 'documentStateKey',\r\n\t\t        \tnameLanguageKey: 'STATE KEY',\r\n\t\t        \ttemplate: '<span>{{binding.documentStateKey}}</span>',\r\n\t\t        \tcellClass: 'centeredcell'\r\n\t\t        },\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\tfield: 'attachment',\r\n\t\t\t\t\tnameLanguageKey: '',\r\n\t\t\t\t\ttemplate: '<div class=\"icon-16px\" ng-if=\"binding.attachmentCount > 0\"><di-image image=\"attachment\" image-colour=\"button\"></di-image></div>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t},\r\n\t\t        {\r\n\t\t        \trights: ['Supplier'],\r\n\t\t        \tfield: 'updated',\r\n\t\t        \tnameLanguageKey: '',\r\n\t\t        \ttemplate:\r\n\t\t                '<div class=\"document-updated\" ng-if=\"binding.updated\" di-translate=\"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.UPDATED\"></div>',\r\n\t\t        \tcellClass: 'centeredcell'\r\n\t\t        }\r\n\t\t\t];\r\n\r\n\t\t\tvar dateTimeDefaultFilters = [\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: \"Last30Days\",\r\n\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.LAST_30_DAYS\",\r\n\t\t\t\t\tdateTypes: [1, 2, 3]\r\n\t\t\t\t},\r\n\t\t        {\r\n\t\t        \tvalue: \"LastMonth\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.LAST_MONTH\",\r\n\t\t        \tdateTypes: [1, 2, 3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"ThisMonth\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.THIS_MONTH\",\r\n\t\t        \tdateTypes: [1, 2, 3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"Yesterday\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.YESTERDAY\",\r\n\t\t        \tdateTypes: [1, 2, 3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"Today\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.TODAY\",\r\n\t\t        \tdateTypes: [1, 2, 3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"Custom\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.CUSTOM\",\r\n\t\t        \tisHidden: true,\r\n\t\t        \tdateTypes: [1, 2, 3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"Tomorrow\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.TOMORROW\",\r\n\t\t        \tdateTypes: [3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"NextMonth\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.NEXT_MONTH\",\r\n\t\t        \tdateTypes: [3]\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \tvalue: \"Next30Days\",\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.NEXT_30_DAYS\",\r\n\t\t        \tdateTypes: [3]\r\n\t\t        }\r\n\t\t\t];\r\n\r\n\t\t\tvar dateTypesOptions = [\r\n\t\t\t\t{ value: 1, label: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.TYPES.CREATED\" },\r\n\t\t\t\t{ value: 2, label: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.TYPES.ISSUED\" },\r\n\t\t\t\t{ value: 3, label: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.DATE.TYPES.DELIVERY\" }\r\n\t\t\t];\r\n\r\n\t\t\tvar sortOptions = [\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 1,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.PURCHASE_ORDER_NUMBER_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 2,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.PURCHASE_ORDER_NUMBER_DESC\"\r\n\t\t        },\r\n                {\r\n                \trights: ['User'],\r\n                \tvalue: 11,\r\n                \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.DOCUMENT_TYPE_ASC\"\r\n                },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 12,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.DOCUMENT_TYPE_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 3,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.CREATED_DATE_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 4,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.CREATED_DATE_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 5,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.ISSUED_DATE_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 6,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.ISSUED_DATE_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 7,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.DELIVERY_DATE_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 8,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.DELIVERY_DATE_DESC\"\r\n\t\t        },\r\n                {\r\n                \trights: ['Supplier'],\r\n                \tvalue: 13,\r\n                \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.BUYER_ASC\"\r\n                },\r\n\t\t        {\r\n\t\t        \trights: ['Supplier'],\r\n\t\t        \tvalue: 14,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.BUYER_DESC\"\r\n\t\t        },\r\n                {\r\n                \trights: ['Buyer'],\r\n                \tvalue: 15,\r\n                \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.SUPPLIER_ASC\"\r\n                },\r\n\t\t        {\r\n\t\t        \trights: ['Buyer'],\r\n\t\t        \tvalue: 16,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.SUPPLIER_DESC\"\r\n\t\t        },\r\n                {\r\n                \trights: ['User'],\r\n                \tvalue: 17,\r\n                \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.LINES_ASC\"\r\n                },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 18,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.LINES_DESC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 9,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.TOTAL_ASC\"\r\n\t\t        },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 10,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.TOTAL_DESC\"\r\n\t\t        },\r\n                {\r\n                \trights: ['User'],\r\n                \tvalue: 19,\r\n                \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.STATUS_ASC\"\r\n                },\r\n\t\t        {\r\n\t\t        \trights: ['User'],\r\n\t\t        \tvalue: 20,\r\n\t\t        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.SORT.STATUS_DESC\"\r\n\t\t        }\r\n\t\t\t];\r\n\r\n\t\t\t// Status filters configuration\r\n\t\t\tvar statusFilters = [];\r\n\r\n\t\t\tvar initialDateTimeFilter;\r\n\t\t\tvar initialSortOption;\r\n\t\t\tvar initialDateType;\r\n\t\t\tvar initialStatusFilter;\r\n\r\n\t\t\t// Provider definition\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['authorizedObjectsFilter', 'CLIENT_ENUMS'];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\tfunction getOptionByValue(filterItems, value) {\r\n\t\t\t\tvar filterItem = _.find(filterItems, function (obj) {\r\n\t\t\t\t\treturn obj.value === value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn filterItem;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP2H02E\", cfg, 'cfg');\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets required configuration for the grid.\r\n\t\t\t */\r\n\t\t\tfunction $get(authorizedObjectsFilter, clientEnums) {\r\n\t\t\t\tbuttonsConfiguration = {\r\n\t\t\t\t\ttype: \"Order\",\r\n\t\t\t\t\tvisibleButtons: [],\r\n\t\t\t\t\tbuttonsSetOne: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'view',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewPurchaseOrder,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"PurchaseOrderFlipper\"],\r\n\t\t\t\t\t\t\tname: 'flip',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.flip\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\", \"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'accept',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.accept\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\", \"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'reject',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.reject\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\", \"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'shipped',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsShipped\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\", \"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'notShipped',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsNotShipped\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\", \"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'invoiced',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsInvoiced\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\", \"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'delivered',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsDelivered\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\", \"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'notDelivered',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsNotDelivered\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\", \"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'close',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.close\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\", \"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'cancelOrder',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.cancelPurchaseOrder\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tbuttonsSetTwo: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'render',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.downloadPurchaseOrder,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'downloadCsv',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.downloadAsCsv,\r\n\t\t\t\t\t\t\tfallbackOnSecondaryContext: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'related',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewRelatedDocumentsPurchaseOrder,\r\n\t\t\t\t\t\t\tsingleAction: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tstatusFilters = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\torder: 1,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.unknown,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.ALL_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\torder: 1,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.unknown,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.ALL_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\torder: 2,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.invalid,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.INVALID\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\torder: 3,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.sentreceived,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.SENTRECEIVED_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\torder: 3,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.sentreceived,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.SENTRECEIVED_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\torder: 4,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.accepted,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.ACCEPTED_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\torder: 4,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.accepted,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.ACCEPTED_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\torder: 5,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.shipped,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.SHIPPED_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\torder: 5,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.shipped,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.SHIPPED_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\torder: 6,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.partiallyInvoiced,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.PARTIALLY_INVOICED_SUPPLIER\"\r\n\t\t\t\t\t},\r\n                    {\r\n                    \trights: ['Buyer'],\r\n                    \torder: 6,\r\n                    \tvalue: clientEnums.documentStateKey.partiallyInvoiced,\r\n                    \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.PARTIALLY_INVOICED_BUYER\"\r\n                    },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\t\torder: 7,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.fullyInvoiced,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.FULLY_INVOICED\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\torder: 8,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.delivered,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.DELIVERED_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\torder: 8,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.delivered,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.DELIVERED_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\torder: 9,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.rejected,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.REJECTED_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\torder: 9,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.rejected,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.REJECTED_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\torder: 10,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.closed,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.CLOSED_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\torder: 10,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.closed,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.CLOSED_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\t\torder: 11,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.cancelled,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.CANCELLED_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\t\torder: 11,\r\n\t\t\t\t\t\tvalue: clientEnums.documentStateKey.cancelled,\r\n\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.FILTERS.STATE.CANCELLED_SUPPLIER\"\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\r\n\t\t\t\tinitialDateTimeFilter = getOptionByValue(dateTimeDefaultFilters, 'Last30Days');\r\n\t\t\t\tinitialSortOption = getOptionByValue(sortOptions, 6);\r\n\t\t\t\tinitialDateType = getOptionByValue(dateTypesOptions, 1);\r\n\t\t\t\tinitialStatusFilter = getOptionByValue(statusFilters, 1);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgetTableConfiguration: getTableConfiguration,\r\n\t\t\t\t\tgetStatusFilters: getStatusFilters,\r\n\t\t\t\t\tgetDateTimeFilters: getDateTimeFilters,\r\n\t\t\t\t\tgetSortableColumns: getSortableColumns,\r\n\t\t\t\t\tgetDateTypesOptions: getDateTypesOptions,\r\n\t\t\t\t\tgetButtonsSetOneConfiguration: getButtonsSetOneConfiguration,\r\n\t\t\t\t\tgetButtonsSetTwoConfiguration: getButtonsSetTwoConfiguration,\r\n\t\t\t\t\tgetInitialFilter: getInitialFilter,\r\n\t\t\t\t\tgetInitialDateTimeFilter: getInitialDateTimeFilter,\r\n\t\t\t\t\tgetInitialSortOption: getInitialSortOption,\r\n\t\t\t\t\tgetInitialStatusFilter: getInitialStatusFilter,\r\n\t\t\t\t\tgetInitialDateType: getInitialDateType,\r\n\t\t\t\t\tgetFreeformSearchDefaultFilter: getFreeformSearchDefaultFilter\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Returns buttons configuration settings\r\n\t\t\t\t */\r\n\t\t\t\tfunction getButtonsSetOneConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetOne);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getButtonsSetTwoConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetTwo);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getConfiguration(array) {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(true);\r\n\r\n\t\t\t\t\tvar configuration = {\r\n\t\t\t\t\t\ttype: \"Invoice\",\r\n\t\t\t\t\t\tvisibleButtons: []\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconfiguration.visibleButtons.fill(authorizedObjectsFilter.getAuthorizedObjects(array, true));\r\n\t\t\t\t\treturn configuration;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of all filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialFilter() {\r\n\t\t\t\t\tvar initialFilters = [];\r\n\r\n\t\t\t\t\tinitialFilters.push(initialDateTimeFilter);\r\n\r\n\t\t\t\t\treturn initialFilters;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of date time filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialDateTimeFilter(dateTypeId) {\r\n\t\t\t\t\tif (util.isDefined(dateTypeId) && dateTypeId === 3) {\r\n\t\t\t\t\t\tinitialDateTimeFilter = getOptionByValue(dateTimeDefaultFilters, 'Next30Days');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tinitialDateTimeFilter = getOptionByValue(dateTimeDefaultFilters, 'Last30Days');\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn initialDateTimeFilter;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets grid configuration options.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getTableConfiguration() {\r\n\t\t\t\t\tconfig.columns = authorizedObjectsFilter.getAuthorizedObjects(columnDefinitions, false);\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets date time default filters for the grid.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getDateTimeFilters(dateTypeId) {\r\n\t\t\t\t\tvar filters = dateTimeDefaultFilters;\r\n\r\n\t\t\t\t\tif (util.isDefined(dateTypeId)) {\r\n\r\n\t\t\t\t\t\tfilters = _.filter(dateTimeDefaultFilters, function (filter) {\r\n\t\t\t\t\t\t\treturn _.contains(filter.dateTypes, dateTypeId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn filters;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets the column intially used to sort the grid results\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialSortOption() {\r\n\t\t\t\t\treturn initialSortOption;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets initial set of status filters.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialStatusFilter() {\r\n\t\t\t\t\treturn initialStatusFilter;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets initial date type option\r\n\t\t\t\t * @returns {}\r\n\t\t\t\t */\r\n\t\t\t\tfunction getInitialDateType() {\r\n\t\t\t\t\treturn initialDateType;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets the columns which can be used to sort the grid\r\n\t\t\t\t */\r\n\t\t\t\tfunction getSortableColumns() {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(true);\r\n\t\t\t\t\tvar options = authorizedObjectsFilter.getAuthorizedObjects(sortOptions, true);\r\n\t\t\t\t\treturn options;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets status filters\r\n\t\t\t\t */\r\n\t\t\t\tfunction getStatusFilters() {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(false);\r\n\t\t\t\t\tvar options = authorizedObjectsFilter.getAuthorizedObjects(statusFilters, false);\r\n\t\t\t\t\treturn options;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets list of available date types\r\n\t\t\t\t */\r\n\t\t\t\tfunction getDateTypesOptions() {\r\n\t\t\t\t\treturn dateTypesOptions;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets the filter to use when filtering triggered by freeform search box\r\n\t\t\t\t */\r\n\t\t\t\tfunction getFreeformSearchDefaultFilter() {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tstatusFilter: getOptionByValue(getStatusFilters(), clientEnums.documentStateKey.unknown).value, //all\r\n\t\t\t\t\t\tsortOption: getOptionByValue(getSortableColumns(), 1).value,  //po number asc\r\n\t\t\t\t\t\tdateType: getOptionByValue(getDateTypesOptions(), 1).value,//created\r\n\t\t\t\t\t\tdateTimeFilter: getOptionByValue(getDateTimeFilters(), \"Custom\").value,\r\n\t\t\t\t\t\tfromDate: moment.utc([1900, 0, 1]).format(),// months, hours, minutes, seconds, and milliseconds are all zero indexed\r\n\t\t\t\t\t\ttoDate: moment.utc().format()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn PurchaseOrderListConfiguratorProvider;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/lists/purchaseOrderListConfigurator.js","//{CODE:EUP2H}\r\n// di.einvoicing.ui.portal.portal.purchaseOrder.lists\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('PurchaseOrderListController', PurchaseOrderListController);\r\n\r\n\t\tPurchaseOrderListController.$inject = [\r\n\t\t\t'diState',\r\n\t\t\t'translator',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'notificationHandler',\r\n\t\t\t'purchaseOrderListConfigurator',\r\n\t\t\t'$scope',\r\n\t\t\t'elementNotifier',\r\n\t\t\t'currencyCache',\r\n\t\t\t'authorizedObjectsFilter',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'authenticationData',\r\n\t\t\t'documentStateResolver',\r\n\t\t\t'documentAttributeResolver',\r\n\t\t\t'userRightsRepository',\r\n\t\t\t'purchaseOrderRepository',\r\n\t\t\t'documentProxy',\r\n\t\t\t'$stateParams',\r\n\t\t\t'vmFiltersListConfigurator',\r\n\t\t\t'userActionsResolver',\r\n\t\t\t'modalSpinner',\r\n\t\t\t'documentDownloader',\r\n\t\t\t'dateFormatter',\r\n\t\t\t'listsParamsStore'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * Manages and configure purchase orders list table.\t\t\r\n\t\t */\r\n\t\tfunction PurchaseOrderListController(\r\n\t\t\tdiState,\r\n\t\t\ttranslator,\r\n\t\t\tenumTranslator,\r\n\t\t\tnotificationHandler,\r\n\t\t\tpurchaseOrderListConfigurator,\r\n\t\t\tscope,\r\n\t\t\telementNotifier,\r\n\t\t\tcurrencyCache,\r\n\t\t\tauthorizedObjectsFilter,\r\n\t\t\tclientEnums,\r\n\t\t\tauthenticationData,\r\n\t\t\tdocumentStateResolver,\r\n\t\t\tdocumentAttributeResolver,\r\n\t\t\tuserRightsRepository,\r\n\t\t\tpurchaseOrderRepository,\r\n\t\t\tdocumentProxy,\r\n\t\t\tstateParams,\r\n\t\t\tvmFiltersListConfigurator,\r\n\t\t\tuserActionsResolver,\r\n\t\t\tmodalSpinner,\r\n\t\t\tdocumentDownloader,\r\n\t\t\tdateFormatter,\r\n\t\t\tlistsParamsStore) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvm.loading = true;\r\n\t\t\tvar resultsReachedNotification;\r\n\r\n\t\t\tvm.purchaseOrders = [];\r\n\t\t\tvm.tableOptions = {};\r\n\t\t\tvm.buttonsSetOneOptions = {};\r\n\t\t\tvm.buttonsSetTwoOptions = {};\r\n\t\t\tvm.selectedStates = {\r\n\t\t\t\tprimary: [],\r\n\t\t\t\tsecondary: []\r\n\t\t\t};\r\n\t\t\tvm.selectedAttributes = {\r\n\t\t\t\tprimary: [],\r\n\t\t\t\tsecondary: []\r\n\t\t\t};\r\n\t\t\tvm.selectedActions = {\r\n\t\t\t\tprimary: [],\r\n\t\t\t\tsecondary: []\r\n\t\t\t};\r\n\t\t\tvm.selectedItemsCount = {\r\n\t\t\t\tprimary: 0,\r\n\t\t\t\tsecondary: 0\r\n\t\t\t};\r\n\t\t\tvm.selectedFilters = {\r\n\t\t\t\tsearchText: \"\"\r\n\t\t\t};\r\n\t\t\tvm.labels = {};\r\n\t\t\tvm.sortOptions = [];\r\n\t\t\tvm.statusOptions = [];\r\n\t\t\tvm.dateOptions = [];\r\n\t\t\tvm.dateTypes = [];\r\n\r\n\t\t\tvm.initialiseTable = initialiseTable;\r\n\t\t\tvm.filterPurchaseOrders = filterPurchaseOrders;\r\n\t\t\tvm.searchPurchaseOrders = searchPurchaseOrders;\r\n\t\t\tvm.viewPurchaseOrder = viewPurchaseOrder;\r\n\t\t\tvm.flipOrders = flipOrders;\r\n\t\t\tvm.acceptOrders = acceptOrders;\r\n\t\t\tvm.rejectOrders = rejectOrders;\r\n\t\t\tvm.flagAsShippedOrders = flagAsShippedOrders;\r\n\t\t\tvm.flagAsDeliveredOrders = flagAsDeliveredOrders;\r\n\t\t\tvm.cancelOrders = cancelOrders;\r\n\t\t\tvm.closeOrders = closeOrders;\r\n\t\t\tvm.goToRelated = goToRelated;\r\n\t\t\tvm.getCurrentlySelectedPurchaseOrders = getCurrentlySelectedPurchaseOrders;\r\n\t\t\tvm.orderChanged = orderChanged;\r\n\t\t\tvm.dateChanged = dateChanged;\r\n\t\t\tvm.dateTypeChanged = dateTypeChanged;\r\n\t\t\tvm.onSelectedChanged = onSelectedChanged;\r\n\t\t\tvm.onDataDisplayed = onDataDisplayed;\r\n\t\t\tvm.statusChanged = statusChanged;\r\n\t\t\tvm.onPageSizeChanged = onPageSizeChanged;\r\n\t\t\tvm.onPageNumberChanged = onPageNumberChanged;\r\n\t\t\tvm.clearFilters = clearFilters;\r\n\t\t\tvm.downloadRenderedPurchaseOrder = downloadRenderedPurchaseOrder;\r\n\t\t\tvm.downloadPurchaseOrdersAsCsv = downloadPurchaseOrdersAsCsv;\r\n\t\t\tvm.markOrdersAsInvoiced = markOrdersAsInvoiced;\r\n\t\t\tvar spinner;\r\n\r\n\t\t\tinitialiseTable();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Initialises the table by configuring it and getting initial set of data.\r\n\t\t\t */\r\n\t\t\tfunction initialiseTable() {\r\n\r\n\t\t\t\tsetLabels();\r\n\r\n\t\t\t\tvmFiltersListConfigurator.configure(stateParams, vm, purchaseOrderListConfigurator);\r\n\r\n\t\t\t\tcurrencyCache.getCurrencies().then(function () {\r\n\t\t\t\t\tgetPurchaseOrders();\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Sets labels values depending on user rights           \r\n\t\t\t\t */\r\n\t\t\t\tfunction setLabels() {\r\n\t\t\t\t\tvar data = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.HEADER.TITLE_SUPPLIER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.HEADER.TITLE_BUYER\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\tvm.labels = authorizedObjectsFilter.getAuthorizedObjectsAsAssociative(data, 'key', 'label');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Triggers the navigation to a new state with free form search applied\r\n\t\t\t * Filtering using the text search should ignore the set filters and use less restrictive filters\r\n\t\t\t */\r\n\t\t\tfunction searchPurchaseOrders() {\r\n\t\t\t\tvar filters = _.extend({}, (vm.searchDefaultFilter || {}), { searchText: vm.selectedFilters.searchText });\r\n\t\t\t\tfilterPurchaseOrders(filters);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Triggers the navigation to a new state with applied filters\r\n\t\t\t */\r\n\t\t\tfunction filterPurchaseOrders(filterOptions) {\r\n\t\t\t\tvm.loading = true;\r\n\t\t\t\tvar params = util.isRealObject(filterOptions)\r\n\t\t\t\t\t? filterOptions\r\n\t\t\t\t\t: {\r\n\t\t\t\t\t\tdateType: vm.selectedFilters.dateType.value,\r\n\t\t\t\t\t\tdateTimeFilter: vm.selectedFilters.dateTimeFilter.value,\r\n\t\t\t\t\t\tstatusFilter: vm.selectedFilters.statusFilter.value,\r\n\t\t\t\t\t\tsortOption: vm.selectedFilters.sortOption.value,\r\n\t\t\t\t\t\tfromDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.fromDate),\r\n\t\t\t\t\t\ttoDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.toDate),\r\n\t\t\t\t\t\tsearchText: vm.selectedFilters.searchText\r\n\t\t\t\t\t};\r\n\t\t\t\t//reset page number for each filtering\r\n\t\t\t\tparams = setInitialPaginationDetails(params);\r\n\r\n\t\t\t\t//save current filters to local storage before navigating away\r\n\t\t\t\tstoreParams(params);\r\n\t\t\t\tdiState.go('.', params, { reload: true });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Starts the loading spinner and calls the purchaseOrder repository to retrieve the purchase orders\r\n\t\t\t */\r\n\t\t\tfunction getPurchaseOrders() {\r\n\t\t\t\tif (util.isDefined(resultsReachedNotification)) {\r\n\t\t\t\t\tresultsReachedNotification.hide();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tshowSpinner();\r\n\r\n\t\t\t\tvar customDateTimeFilter = null;\r\n\t\t\t\tif (vm.selectedFilters.customDateTimeFilter\r\n\t\t\t\t\t.fromDate !==\r\n\t\t\t\t\t\"\" &&\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter.toDate !== \"\") {\r\n\t\t\t\t\tcustomDateTimeFilter = {\r\n\t\t\t\t\t\tfromDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.fromDate),\r\n\t\t\t\t\t\ttoDate: dateFormatter.toServerDate(vm.selectedFilters.customDateTimeFilter.toDate)\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t.getPurchaseOrders(\r\n\t\t\t\t\t\tvm.selectedFilters.searchText,\r\n\t\t\t\t\t\tvm.tableOptions.maxItemsToShow,\r\n\t\t\t\t\t\tvm.selectedFilters.dateType.value,\r\n\t\t\t\t\t\tvm.selectedFilters.dateTimeFilter.value,\r\n\t\t\t\t\t\tcustomDateTimeFilter,\r\n\t\t\t\t\t\tvm.selectedFilters.sortOption.value,\r\n\t\t\t\t\t\tvm.selectedFilters.statusFilter.value,\r\n\t\t\t\t\t\tvm.selectedFilters.attributesFilter)\r\n\t\t\t\t\t.then(resolved, rejected)\r\n\t\t\t\t\t.finally(function() {\r\n\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Callback after promise resolved\r\n\t\t\t\t */\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tif (util.isUndefined(data)) {\r\n\t\t\t\t\t\tdata = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t    if (data.length >= vm.tableOptions.maxItemsToShow) {\r\n\t\t\t\t        translator.translate(\"EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.MAXIMUM_PURCHASE_ORDERS_REACHED\")\r\n\t\t\t\t            .then(function(translated) {\r\n\t\t\t\t                resultsReachedNotification = elementNotifier.warning(\r\n\t\t\t\t                    translated,\r\n\t\t\t\t                    findElement('#purchaseOrdersList'),\r\n\t\t\t\t                    { clickToHide: true });\r\n\t\t\t\t                resultsReachedNotification.show();\r\n\t\t\t\t            });\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    translateDocumentData(data);\r\n\r\n\t\t\t\t\tvm.purchaseOrders.fill(data);\r\n\r\n\t\t\t\t\tonSelectedChanged([]);\r\n\r\n\t\t\t\t\tremoveSpinner();\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction translateDocumentData(array) {\r\n\t\t\t\t\t\tdocumentStateResolver.resolveDocumentStates(\"order\", array);\r\n\r\n\t\t\t\t\t\t_.each(array,\r\n\t\t\t\t\t\t\tfunction (order) {\r\n\t\t\t\t\t\t\t    getCalculatedState(order.clientEInvoicingStateId)\r\n\t\t\t\t\t\t\t        .then(function(calculated) {\r\n\t\t\t\t\t\t\t            order.calculatedState = calculated;\r\n\t\t\t\t\t\t\t        });\r\n\r\n\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t    enumTranslator.translate(clientEnums.orderType, order.orderType)\r\n                                .then(function (translated) {\r\n                                    order.orderType = translated;\r\n                                });\r\n\r\n\t\t\t\t\t\t\t\torder.attributes = setAttributes(order);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction setAttributes(order) {\r\n\t\t\t\t\t\tvar array = documentAttributeResolver.resolveAttributeKeys(order.attributes);\r\n\r\n\t\t\t\t\t\tif (isUserSupplier()) {\r\n\t\t\t\t\t\t\tdocumentAttributeResolver.removeAttribute(array, clientEnums.documentAttribute.notScheduledForPayment);\r\n\t\t\t\t\t\t\tdocumentAttributeResolver.removeAttribute(array, clientEnums.documentAttribute.scheduledForPayment);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn array;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Finds element in DOM\t\t\t\t\t             \r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction findElement(key) {\r\n\t\t\t\t\t\tif (util.isFunction(scope.findElement)) {\r\n\t\t\t\t\t\t\tvar element = scope.findElement(key);\r\n\r\n\t\t\t\t\t\t\treturn element;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t  * Notifies about failure while loading purchase order data\t\t\t\t\r\n\t\t\t\t  */\r\n\t\t\t\tfunction rejected() {\r\n\t\t\t\t\tremoveSpinner();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * View selected purchase order.\r\n\t\t\t */\r\n\t\t\tfunction viewPurchaseOrder() {\r\n\t\t\t\tvar selectedRows = vm.getCurrentlySelectedPurchaseOrders();\r\n\r\n\t\t\t\tif (selectedRows.length <= 0 || selectedRows.length > 1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar selectedPoIds = _.pluck(selectedRows, 'id');\r\n\r\n\t\t\t\tvar selectedPoId = selectedPoIds[0];\r\n\r\n\t\t\t\tdiState.go('portal.orders.viewById', { id: selectedPoId });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Flips order into invoice             \r\n\t\t\t */\r\n\t\t\tfunction flipOrders() {\r\n\t\t\t\tvar selectedRows = vm.getCurrentlySelectedPurchaseOrders();\r\n\r\n\t\t\t\tif (selectedRows.length <= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.each(selectedRows,\r\n\t\t\t\t\tfunction (order) {\r\n\t\t\t\t\t\tflipOrder(order);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Flips selected orders into invoices if possible                 \r\n\t\t\t\t */\r\n\t\t\t\tfunction flipOrder(order) {\r\n\t\t\t\t\tpurchaseOrderRepository.flipOrder(order.id, order.purchaseOrderNumber).then(resolved);\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Promise resolved                     \r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\t    translator.translate(\"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.FLIP_GO_TO_INVOICE_LINK\")\r\n\t\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t\t            var link = translated;\r\n                                \r\n\t\t\t\t\t            switch (data.success) {\r\n\t\t\t\t\t            case false:\r\n\t\t\t\t\t                var message = translator\r\n\t\t\t\t\t                    .instantTranslate(\"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.ERROR.FLIP_FAILURE_REASON.\" +\r\n\t\t\t\t\t                        data.failureReason);\r\n\r\n\t\t\t\t\t                var viewAction = goToViewInvoice;\r\n\r\n\t\t\t\t\t                if (data.invoiceId <= 0) {\r\n\t\t\t\t\t                    link = \"\";\r\n\t\t\t\t\t                    viewAction = null;\r\n\t\t\t\t\t                } else {\r\n\t\t\t\t\t                    link = '<br/>' + link;\r\n\t\t\t\t\t                }\r\n\r\n\t\t\t\t\t                notificationHandler.showWarning(message + link, order.purchaseOrderNumber, viewAction);\r\n\t\t\t\t\t                break;\r\n\t\t\t\t\t            default:\r\n\t\t\t\t\t                notificationHandler\r\n\t\t\t\t\t                    .showSuccess(\r\n\t\t\t\t\t                        translator\r\n\t\t\t\t\t                        .instantTranslate(\"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.FLIP_SUCCESS\") +\r\n\t\t\t\t\t                        '<br />' +\r\n\t\t\t\t\t                        link,\r\n\t\t\t\t\t                        order.purchaseOrderNumber,\r\n\t\t\t\t\t                        goToEditInvoice);\r\n\t\t\t\t\t                break;\r\n\t\t\t\t\t            }\r\n\r\n\t\t\t\t\t            reloadDocumentActions(order);\r\n\t\t\t\t\t        });\r\n\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t* Redirects to invoice details page                         \r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\tfunction goToEditInvoice() {\r\n\t\t\t\t\t\t\tif (data.invoiceId > 0) {\r\n\t\t\t\t\t\t\t\tdiState.go('portal.invoices.editById', { id: data.invoiceId });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfunction goToViewInvoice() {\r\n\t\t\t\t\t\t\tif (data.invoiceId > 0) {\r\n\t\t\t\t\t\t\t\tdiState.go('portal.invoices.viewById', { id: data.invoiceId });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for accepting orders\r\n\t\t\t */\r\n\t\t\tfunction acceptOrders() {\r\n\t\t\t\tvar selectedRows = vm.getCurrentlySelectedPurchaseOrders();\r\n\r\n\t\t\t\tif (selectedRows.length <= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.each(selectedRows,\r\n\t\t\t\t\tfunction (order) {\r\n\t\t\t\t\t\tacceptOrder(order);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Accepts single order\t\t\t \r\n\t\t\t\t */\r\n\t\t\t\tfunction acceptOrder(order) {\r\n\t\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t\t.acceptOrder(order.documentId, order.purchaseOrderNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\t\t\t\t\t\tupdateResolvedState(order, clientEnums.documentStateKey.accepted);\r\n\t\t\t\t\t\treloadDocumentActions(order);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for rejecting orders\r\n\t\t\t */\r\n\t\t\tfunction rejectOrders() {\r\n\t\t\t\tvar selectedRows = vm.getCurrentlySelectedPurchaseOrders();\r\n\r\n\t\t\t\tif (selectedRows.length <= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.each(selectedRows,\r\n\t\t\t\t\tfunction (order) {\r\n\t\t\t\t\t\trejectOrder(order);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction rejectOrder(order) {\r\n\t\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t\t.rejectOrder(order.documentId, order.purchaseOrderNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\t\t\t\t\t\tupdateResolvedState(order, clientEnums.documentStateKey.rejected);\r\n\t\t\t\t\t\treloadDocumentActions(order);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for flagging orders as shipped or not shipped\r\n\t\t\t */\r\n\t\t\tfunction flagAsShippedOrders(shipped) {\r\n\t\t\t\tvar selectedRows = vm.getCurrentlySelectedPurchaseOrders();\r\n\r\n\t\t\t\tif (selectedRows.length <= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.each(selectedRows,\r\n\t\t\t\t\tfunction (order) {\r\n\t\t\t\t\t\tflagAsShipped(order, shipped);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction flagAsShipped(order, shipped) {\r\n\t\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t\t.flagAsShipped(order.documentId, shipped, order.purchaseOrderNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\t\t\t\t\t\tif (shipped) {\r\n\t\t\t\t\t\t\tupdateResolvedState(order, clientEnums.documentStateKey.shipped);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treloadDocumentState(order);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treloadDocumentActions(order);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for flagging orders as delivered or not delivered\r\n\t\t\t */\r\n\t\t\tfunction flagAsDeliveredOrders(delivered) {\r\n\t\t\t\tvar selectedRows = vm.getCurrentlySelectedPurchaseOrders();\r\n\r\n\t\t\t\tif (selectedRows.length <= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.each(selectedRows,\r\n\t\t\t\t\tfunction (order) {\r\n\t\t\t\t\t\tflagAsDelivered(order, delivered);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction flagAsDelivered(order, delivered) {\r\n\t\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t\t.flagAsDelivered(order.documentId, delivered, order.purchaseOrderNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\r\n\t\t\t\t\t\tif (delivered) {\r\n\t\t\t\t\t\t\tupdateResolvedState(order, clientEnums.documentStateKey.delivered);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treloadDocumentState(order);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treloadDocumentActions(order);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for canceling selected orders\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction cancelOrders() {\r\n\t\t\t\tvar selectedRows = vm.getCurrentlySelectedPurchaseOrders();\r\n\r\n\t\t\t\tif (selectedRows.length <= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.each(selectedRows,\r\n\t\t\t\t\tfunction (order) {\r\n\t\t\t\t\t\tcancelOrder(order);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction cancelOrder(order) {\r\n\t\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t\t.cancelOrder(order.documentId, order.purchaseOrderNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\t\t\t\t\t\tupdateResolvedState(order, clientEnums.documentStateKey.cancelled);\r\n\t\t\t\t\t\treloadDocumentActions(order);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for closing selected orders\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction closeOrders() {\r\n\t\t\t\tvar selectedRows = vm.getCurrentlySelectedPurchaseOrders();\r\n\r\n\t\t\t\tif (selectedRows.length <= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.each(selectedRows,\r\n\t\t\t\t\tfunction (order) {\r\n\t\t\t\t\t\tclosePurchaseOrder(order);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction closePurchaseOrder(order) {\r\n\t\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t\t.closeOrder(order.documentId, order.purchaseOrderNumber)\r\n\t\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction resolved() {\r\n\t\t\t\t\t\tupdateResolvedState(order, clientEnums.documentStateKey.closed);\r\n\t\t\t\t\t\treloadDocumentActions(order);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction goToRelated() {\r\n\t\t\t\tvar selected = getSelectedPurchaseOrder();\r\n\r\n\t\t\t\tif (util.isDefined(selected.documentId)) {\r\n\t\t\t\t\tdiState.go('portal.related.list', { id: selected.documentId });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Updates document state on the list or shows error\r\n\t\t\t */\r\n\t\t\tfunction updateResolvedState(order, stateId) {\r\n\t\t\t    order.clientEInvoicingStateId = stateId;\r\n\r\n\t\t\t    documentStateResolver.resolveDocumentState('order', stateId)\r\n\t\t\t        .then(function(resolved) {\r\n\t\t\t            order.clientEInvoicingState = resolved;\r\n\r\n\t\t\t            getCalculatedState(stateId)\r\n\t\t\t                .then(function(calculated) {\r\n\t\t\t                    order.calculatedState = calculated;\r\n\t\t\t                });\r\n\t\t\t        });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Clears selected items                 \r\n\t\t\t*/\r\n\t\t\tfunction clearSelected() {\r\n\t\t\t\tvm.purchaseOrders.forEach(\r\n\t\t\t\t\tfunction clearSelected(item) {\r\n\t\t\t\t\t\titem.isSelected = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\tvm.selectedStates.primary.clear();\r\n\t\t\t\tvm.selectedAttributes.primary.clear();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets calculated document state\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction getCalculatedState(stateId) {\r\n\t\t\t\treturn documentStateResolver.calculateCurrentState('order', stateId, true);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Resets the search filters on the page back to the default values and reloads\r\n\t\t\t */\r\n\t\t\tfunction clearFilters() {\r\n\t\t\t\tvar initialFilters = {\r\n\t\t\t\t\tdateType: purchaseOrderListConfigurator.getInitialDateType().value,\r\n\t\t\t\t\tdateTimeFilter: purchaseOrderListConfigurator.getInitialDateTimeFilter().value,\r\n\t\t\t\t\tstatusFilter: purchaseOrderListConfigurator.getInitialStatusFilter().value,\r\n\t\t\t\t\tsortOption: purchaseOrderListConfigurator.getInitialSortOption().value,\r\n\t\t\t\t\tfromDate: undefined,\r\n\t\t\t\t\ttoDate: undefined,\r\n\t\t\t\t\tsearchText: \"\"\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilterPurchaseOrders(initialFilters);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Downloads a rendered document for the selected purchase order\r\n\t\t\t */\r\n\t\t\tfunction downloadRenderedPurchaseOrder() {\r\n\t\t\t\tvar purchaseOrder = getSelectedPurchaseOrder();\r\n\r\n\t\t\t\tif (util.isDefined(purchaseOrder)) {\r\n\t\t\t\t\tdocumentDownloader.downloadRenderedPurchaseOrder(purchaseOrder.documentId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Downloads a csv file containing data for the selected or displayed purchase orders\r\n\t\t\t */\r\n\t\t\tfunction downloadPurchaseOrdersAsCsv() {\r\n\t\t\t\tvar toDownload = getCurrentlySelectedPurchaseOrders();\r\n\r\n\t\t\t\tif ((!util.isArray(toDownload) || toDownload.length === 0) && vm.purchaseOrders.length > 0) {\r\n\t\t\t\t\ttoDownload = getCurrentlyDisplayedPurchaseOrders();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar purchaseOrderIds = _.reduce(toDownload,\r\n\t\t\t\t\tfunction (result, order) {\r\n\t\t\t\t\t\tif (!util.isNullOrUndefined(order.id)) {\r\n\t\t\t\t\t\t\tresult.push(order.id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[]);\r\n\r\n\t\t\t\tif (util.isArray(purchaseOrderIds) && purchaseOrderIds.length > 0) {\r\n\t\t\t\t\tdocumentDownloader.downloadPurchaseOrdersCsv(purchaseOrderIds);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which marks the currently selected purchase orders as fully invoiced\r\n\t\t\t */\r\n\t\t\tfunction markOrdersAsInvoiced() {\r\n\t\t\t\tvar toMarkAsInvoiced = getCurrentlySelectedPurchaseOrders();\r\n\r\n\t\t\t\tvar documentIdsToMarkInvoiced = _.pluck(toMarkAsInvoiced, 'documentId');\r\n\r\n\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t.markPurchaseOrdersAsInvoiced(documentIdsToMarkInvoiced)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\tclearSelected();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tif (util.isArray(data) === false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_.each(data,\r\n\t\t\t\t\t\tfunction (updatedItem) {\r\n\t\t\t\t\t\t\tvar order = _.find(vm.purchaseOrders,\r\n\t\t\t\t\t\t\t\tfunction (order) {\r\n\t\t\t\t\t\t\t\t\treturn order.documentId === updatedItem.documentId;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (util.isObject(order)) {\r\n\t\t\t\t\t\t\t\torder.actions = updatedItem.userActions;\r\n\t\t\t\t\t\t\t\tupdateResolvedState(order, updatedItem.documentState);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tresetAllowedActions();\r\n\r\n\t\t\t\t\tnotificationHandler\r\n\t\t\t\t\t\t.showSuccess('EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.ACTIONS.MARK_INVOICED.SUCCESS');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected() {\r\n\t\t\t\t\tnotificationHandler\r\n\t\t\t\t\t\t.showError('EINVOICING.PORTAL.PURCHASE_ORDERS.LISTS.ACTIONS.MARK_INVOICED.FAILURE');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event when order filter has changed            \r\n\t\t\t */\r\n\t\t\tfunction orderChanged(value) {\r\n\t\t\t\tvar item = _.find(vm.sortOptions,\r\n\t\t\t\t\tfunction (option) {\r\n\t\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.sortOption = item;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event when date filter has changed           \r\n\t\t\t */\r\n\t\t\tfunction dateChanged(value, customDate) {\r\n\t\t\t\tvar item = _.find(vm.dateOptions,\r\n\t\t\t\t\tfunction (option) {\r\n\t\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.dateTimeFilter = item;\r\n\r\n\t\t\t\tif (customDate) {\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter = customDate;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter.fromDate = '';\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter.toDate = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event when date type changed\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction dateTypeChanged(value) {\r\n\t\t\t\tvar item = _.find(vm.dateTypes,\r\n\t\t\t\t\tfunction (option) {\r\n\t\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.dateType = item;\r\n\r\n\t\t\t\tvm.dateOptions = purchaseOrderListConfigurator.getDateTimeFilters(vm.selectedFilters.dateType.value);\r\n\t\t\t\tvm.selectedFilters.dateTimeFilter = purchaseOrderListConfigurator\r\n\t\t\t\t\t.getInitialDateTimeFilter(vm.selectedFilters.dateType.value);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when selection changed             \r\n\t\t\t */\r\n\t\t\tfunction onSelectedChanged(items) {\r\n\t\t\t\tvm.selectedItemsCount.primary = items.length;\r\n\r\n\t\t\t\tvar arrayStates = [];\r\n\t\t\t\tvar arrayAttributes = [];\r\n\t\t\t\tvar arrayActions = [];\r\n\r\n\t\t\t\tpopulateStatesActionsAndAttributes(items, arrayStates, arrayActions, arrayAttributes);\r\n\r\n\t\t\t\tvar resolvedActions = userActionsResolver.resolveActions(arrayActions, true);\r\n\r\n\t\t\t\tvm.selectedAttributes.primary.fill(arrayAttributes);\r\n\t\t\t\tvm.selectedActions.primary.fill(resolvedActions);\r\n\t\t\t\tvm.selectedStates.primary.fill(arrayStates);\r\n\t\t\t}\r\n\r\n\t\t\tfunction populateStatesActionsAndAttributes(items, arrayStates, arrayActions, arrayAttributes) {\r\n\t\t\t\t_.each(items,\r\n\t\t\t\t\tfunction (item) {\r\n\t\t\t\t\t\tarrayStates.push(item.documentStateKey);\r\n\r\n\t\t\t\t\t\tarrayActions.push(item.actions);\r\n\r\n\t\t\t\t\t\tvar array = [];\r\n\r\n\t\t\t\t\t\tarray.fill(item.attributes);\r\n\r\n\t\t\t\t\t\t_.each(array,\r\n\t\t\t\t\t\t\tfunction (attribute) {\r\n\t\t\t\t\t\t\t\tarrayAttributes.push(attribute);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler after data is displayed\r\n\t\t\t */\r\n\t\t\tfunction onDataDisplayed(items) {\r\n\t\t\t\tresetSelectedSecondaryItems();\r\n\r\n\t\t\t\tvar arrayStates = [];\r\n\t\t\t\tvar arrayAttributes = [];\r\n\t\t\t\tvar arrayActions = [];\r\n\r\n\t\t\t\tpopulateStatesActionsAndAttributes(items, arrayStates, arrayActions, arrayAttributes);\r\n\r\n\t\t\t\tvar resolvedActions = userActionsResolver.resolveActions(arrayActions, true);\r\n\r\n\t\t\t\tvm.selectedItemsCount.secondary = items.length;\r\n\t\t\t\tvm.selectedAttributes.secondary.fill(arrayAttributes);\r\n\t\t\t\tvm.selectedActions.secondary.fill(resolvedActions);\r\n\t\t\t\tvm.selectedStates.secondary.fill(arrayStates);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Clears the secondary array property of selectedAttributes, selectedActions and selectedStates\r\n\t\t\t * Sets the secondary int property of selectedItemsCount to 0\r\n\t\t\t */\r\n\t\t\tfunction resetSelectedSecondaryItems() {\r\n\t\t\t\tvm.selectedItemsCount.secondary = 0;\r\n\t\t\t\tvm.selectedAttributes.secondary.clear();\r\n\t\t\t\tvm.selectedActions.secondary.clear();\r\n\t\t\t\tvm.selectedStates.secondary.clear();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when status filter has changed           \r\n\t\t\t */\r\n\t\t\tfunction statusChanged(value) {\r\n\t\t\t\tvar item = _.find(vm.statusOptions,\r\n\t\t\t\t\tfunction (option) {\r\n\t\t\t\t\t\treturn option.value === value;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isUndefined(item)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.selectedFilters.statusFilter = item;\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Event handler when the size of the page changes\r\n\t\t\t */\r\n\t\t\tfunction onPageSizeChanged(newSize) {\r\n\t\t\t\tupdateStoredParams({ pageSize: newSize, pageNumber: 1 });\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Event handler when the page changes\r\n\t\t\t */\r\n\t\t\tfunction onPageNumberChanged(newPageNumber) {\r\n\t\t\t\tupdateStoredParams({ pageNumber: newPageNumber });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Get currently selected purchase orders from the table.\r\n\t\t\t */\r\n\t\t\tfunction getCurrentlySelectedPurchaseOrders() {\r\n\t\t\t\tvar selectedRows = [];\r\n\r\n\t\t\t\tvm.purchaseOrders.forEach(\r\n\t\t\t\t\tfunction addToSelected(item) {\r\n\t\t\t\t\t\tif (item.isSelected === true) {\r\n\t\t\t\t\t\t\tselectedRows.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn selectedRows;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Returns the currently displayed purchase orders\r\n\t\t\t */\r\n\t\t\tfunction getCurrentlyDisplayedPurchaseOrders() {\r\n\t\t\t\tvar displayedRows = _.filter(vm.purchaseOrders,\r\n\t\t\t\t\tfunction (item) {\r\n\t\t\t\t\t\treturn item.isDisplayed;\r\n\t\t\t\t\t});\r\n\t\t\t\treturn displayedRows;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getSelectedPurchaseOrder() {\r\n\t\t\t\tvar selectedRows = getCurrentlySelectedPurchaseOrders();\r\n\r\n\t\t\t\tif (selectedRows.length === 1) {\r\n\t\t\t\t\treturn selectedRows[0];\r\n\t\t\t\t}\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\r\n\t\t\tfunction reloadDocumentState(order) {\r\n\t\t\t\tdocumentProxy\r\n\t\t\t\t\t.getDocumentClientStateId(order.id, clientEnums.documentType.purchaseOrder)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(stateId) {\r\n\t\t\t\t\tupdateResolvedState(order, stateId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Reloads document allowed actions           \r\n\t\t\t */\r\n\t\t\tfunction reloadDocumentActions(order) {\r\n\t\t\t\tpurchaseOrderRepository.getAllowedActions(order.documentId, order.purchaseOrderNumber)\r\n\t\t\t\t\t.then(resolved);\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\torder.actions = data;\r\n\t\t\t\t\tresetAllowedActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction isUserSupplier() {\r\n\t\t\t\treturn userRightsRepository.userHasRight(\"Supplier\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * resets allowed actions             \r\n\t\t\t */\r\n\t\t\tfunction resetAllowedActions() {\r\n\t\t\t\tvm.selectedItemsCount.primary = 0;\r\n\t\t\t\tvm.selectedActions.primary.clear();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Adds spinner to the page\t\t\t \r\n\t\t\t*/\r\n\t\t\tfunction showSpinner() {\r\n\t\t\t\tspinner = modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes spinner from the page\r\n\t\t\t*/\r\n\t\t\tfunction removeSpinner() {\r\n\t\t\t\tif (spinner) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t* Stores the params in the local storage\r\n\t\t\t*/\r\n\t\t\tfunction storeParams(params) {\r\n\t\t\t\tlistsParamsStore.set(\"orders\", params);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Updates the params in the local storage\r\n\t\t\t */\r\n\t\t\tfunction updateStoredParams(params) {\r\n\t\t\t\tlistsParamsStore.update(\"orders\", params);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Extends the source object with pageSize set to the current paginationPageSize and pageNumber set to 1\r\n\t\t\t */\r\n\t\t\tfunction setInitialPaginationDetails(source) {\r\n\t\t\t\treturn _.extend(source,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpageSize: vm.tableOptions.paginationPageSize,\r\n\t\t\t\t\t\tpageNumber: 1\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn PurchaseOrderListController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/lists/purchaseOrderListController.js","//{CODE:EUP51}\r\n// di.einvoicing.ui.portal.portal.purchaseorders.lists\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.controller('PurchaseOrderListFiltersController', PurchaseOrderListFiltersController);\r\n\r\n        PurchaseOrderListFiltersController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'purchaseOrderListConfigurator',\r\n\t\t\t'translator'\r\n        ];\r\n\r\n        /**\r\n\t\t * Manages and configure purchase orders list filter options.\r\n\t\t * @param scope\r\n\t\t * @param purchaseOrderListConfigurator\r\n\t\t * @returns\r\n\t\t */\r\n        function PurchaseOrderListFiltersController(\r\n            scope,\r\n            purchaseOrderListConfigurator,\r\n            translator) {\r\n\r\n            var vm = this;\r\n\r\n            vm.availableDateTimeFilters = [];\r\n            vm.availableSortableColumns = [];\r\n\r\n            vm.translateFilterLabels = translateFilterLabels;\r\n\r\n            getAvailableFilters();\r\n\r\n            return;\r\n\r\n            /**\r\n\t\t\t * Initialises the table filters.\r\n\t\t\t */\r\n            function getAvailableFilters() {\r\n                getAvailableDateTimeFilters();\r\n                getAvailableSortableColumns();\r\n            }\r\n\r\n            /**\r\n\t\t\t * Initialises the date time filters.\r\n\t\t\t */\r\n            function getAvailableDateTimeFilters() {\r\n                vm.availableDateTimeFilters = purchaseOrderListConfigurator.getDateTimeFilters();\r\n                vm.translateFilterLabels(vm.availableDateTimeFilters);\r\n            }\r\n\r\n            /**\r\n\t\t\t * Sets the default sortable columns based on the value in the purchase order list configurator\r\n\t\t\t */\r\n            function getAvailableSortableColumns() {\r\n                vm.availableSortableColumns = purchaseOrderListConfigurator.getSortableColumns();\r\n                vm.translateFilterLabels(vm.availableSortableColumns);\r\n            }\r\n\r\n            /**\r\n\t\t\t * Translate filter labels collection using translator service.\r\n\t\t\t * @param filters\r\n\t\t\t */\r\n            function translateFilterLabels(filters) {\r\n                translator.whenReady()\r\n                    .then(function() {\r\n                        _.each(filters,\r\n                            function(filter) {\r\n                                translator.instantTranslate(filter.label).then(function(translated) {\r\n                                    filter.label = translated;\r\n                                });\r\n                            });\r\n                    });\r\n            }\r\n        }\r\n\r\n        return PurchaseOrderListFiltersController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/lists/purchaseOrderListFiltersController.js","//{CODE:DEF1M}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.constant('PURCHASE_ORDER_ADDITIONAL_DOCUMENT_REFERENCES_CONFIGURATION',\r\n\t\t\tpurchaseOrderAdditionalDocumentReferencesConfiguration());\r\n\r\n\t\tfunction purchaseOrderAdditionalDocumentReferencesConfiguration() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tfield: 'reference',\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.REFERENCE',\r\n\t\t\t\t\theaderClass: \"centeredcellDesc\",\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.reference }}</p>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tfield: 'documentType',\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.DOCUMENT_TYPE',\r\n\t\t\t\t\theaderClass: \"centeredcellDesc\",\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.documentType }}</p>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tfield: 'fileName',\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.FILENAME',\r\n\t\t\t\t\theaderClass: \"centeredcellDesc\",\r\n\t\t\t\t\treadonlyTemplate: '<div ng-if=\"controller.hasAttachment(binding)\"\\\r\n\t\t\t\t\t\t\t\t\t\t\tng-click=\"controller.download({attachmentDataId : binding.attachmentDataId, filename: binding.fileName })\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t<p class=\"readonly\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\">{{ binding.fileName }}</a>\\\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\\\r\n\t\t\t\t\t\t\t\t\t\t</div>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tfield: 'uri',\r\n\t\t\t\t\theader: 'EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.URI',\r\n\t\t\t\t\theaderClass: \"centeredcellDesc\",\r\n\t\t\t\t\treadonlyTemplate: '<div>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"controller.isAbsoluteUrl(binding.uri)\"\\\r\n\t\t\t\t\t\t\t\t\t\ttitle=\"{{ binding.uri }}\">\\\r\n\t\t\t\t\t\t\t\t\t\t<p class=\"readonly\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t<a ng-href=\"{{ binding.uri }}\" target=\"_blank\" di-translate>EINVOICING.PORTAL.COMPONENTS.ADDITIONAL_DOCUMENT_REFERENCES.LINK</a>\\\r\n\t\t\t\t\t\t\t\t\t\t</p>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"!controller.isAbsoluteUrl(binding.uri)\">\\\r\n\t\t\t\t\t\t\t\t\t\t<p class=\"readonly\">{{ binding.uri }}</p>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>'\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/purchase-order-additional-document-references-configuration.js","//{CODE:UPP01}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('purchaseOrderProxy', purchaseOrderProxy);\r\n\r\n\t\tpurchaseOrderProxy.$inject = [\r\n\t\t\t'webApiHttp',\r\n\t\t\t'$q',\r\n\t\t\t'purchaseOrderFormatter',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'urlHelper',\r\n            'proxyErrorInterceptor'\r\n\t\t];\r\n\r\n\t\tfunction purchaseOrderProxy(\r\n\t\t\thttp,\r\n\t\t\t$q,\r\n\t\t\tpurchaseOrderFormatter,\r\n\t\t\tclientEnums,\r\n\t\t\tenumTranslator,\r\n\t\t\turlHelper,\r\n            proxyErrorInterceptor) {\r\n\t\t\tvar defaultFailureReason = 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.DEFAULT_ERROR';\r\n\r\n\t\t\treturn {\r\n\t\t\t    getById: getById,\r\n\t\t\t    getDetailsByAuditId: getDetailsByAuditId,\r\n\t\t\t\tgetByPurchaseOrderNumber: getByPurchaseOrderNumber,\r\n\t\t\t\tcommitPurchaseOrder: commitPurchaseOrder,\r\n\t\t\t\tgetPurchaseOrders: getPurchaseOrders,\r\n\t\t\t\tsubmitPurchaseOrderByDocumentId: submitPurchaseOrderByDocumentId,\r\n\t\t\t\tacceptPurchaseOrder: acceptPurchaseOrder,\r\n\t\t\t\trejectPurchaseOrder: rejectPurchaseOrder,\r\n\t\t\t\tflipPurchaseOrder: flipPurchaseOrder,\r\n\t\t\t\tflagAsShipped: flagAsShipped,\r\n\t\t\t\tflagAsDelivered: flagAsDelivered,\r\n\t\t\t\tcancelPurchaseOrder: cancelPurchaseOrder,\r\n\t\t\t\tclosePurchaseOrder: closePurchaseOrder,\r\n\t\t\t\tgetAllowedActions: getAllowedActions,\r\n\t\t\t\tmarkPurchaseOrdersAsInvoiced: markPurchaseOrdersAsInvoiced\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets the purchase order with the specified ID from the web API\r\n\t\t\t * @param id\r\n\t\t\t */\r\n\t\t\tfunction getById(id) {\r\n\t\t\t\tvar requestUrl = 'PurchaseOrder/GetById/' + id;\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(purchaseOrderFormatter.reformatServerPurchaseOrderForClient, errorReceivingPurchaseOrder);\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getDetailsByAuditId(id) {\r\n\t\t\t    guard.throwIfInvalidId(\"UPP010EE\", id, 'id');\r\n\r\n\t\t\t    var requestUrl = 'PurchaseOrder/GetDetailsByAuditId/' + id;\r\n\r\n\t\t\t    var promise = http.get(requestUrl);\r\n\r\n\t\t\t    var newPromise = promise.then(purchaseOrderFormatter.reformatServerInvoiceDetailsForClient, errorReceivingPurchaseOrder);\r\n\r\n\t\t\t    return newPromise;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets the purchase order with the specified purchase order number from the web API\r\n\t\t\t * @param number\r\n\t\t\t */\r\n\t\t\tfunction getByPurchaseOrderNumber(number) {\r\n\t\t\t\tguard.throwIfEmptyString(\"UPP0102E\", number, 'number');\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tpurchaseOrderNumber: number\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('PurchaseOrder/GetByPurchaseOrderNumber', requestParams);\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(purchaseOrderFormatter.reformatServerPurchaseOrderForClient, errorReceivingPurchaseOrder);\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Commits the specified purchase order to the web API\r\n\t\t\t * @param purchaseOrder\r\n\t\t\t */\r\n\t\t\tfunction commitPurchaseOrder(purchaseOrder) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP4002E\", purchaseOrder, 'purchaseOrder');\r\n\r\n\t\t\t\tvar reformattedPurchaseOrder = purchaseOrderFormatter.reformatClientPurchaseOrderForServer(purchaseOrder);\r\n\r\n\t\t\t\tvar promise = http.post('PurchaseOrder/CommitPurchaseOrder', reformattedPurchaseOrder);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolve, reject);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Callback when the purchase order ID is received successfully after committing a purchase order\t\r\n\t\t\t\t * @param data\r\n\t\t\t\t */\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\tguard.throwIfInvalidId(\"UPP0103E\", data, \"data\");\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Callback function executed when an error occurs saving a purchase order\t\r\n\t\t\t\t * @param error \r\n\t\t\t\t */\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.SAVE_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Get purchase orders collection from the database             \r\n\t\t\t */\r\n\t\t\tfunction getPurchaseOrders(searchText, lastNRows,dateType, dateTimeFilters, customDateTimeFilter, sortOption, statusOption, attributes) {\r\n\t\t\t\tguard.throwIfNotANumber(\"UPP0105E\", lastNRows, \"lastNRows\");\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP400AE\", dateType, \"dateType\");\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"UPP0106E\", dateTimeFilters, \"dateTimeFilters\");\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP0107E\", sortOption, \"sortOption\");\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010BE\", statusOption, \"sortOption\");\r\n\r\n\t\t\t\tif (!customDateTimeFilter) {\r\n\t\t\t\t\tcustomDateTimeFilter = {\r\n\t\t\t\t\t\tfromDate: new Date(),\r\n\t\t\t\t\t\ttoDate: new Date()\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar requestedParams = {\r\n\t\t\t\t\tlastNRows: lastNRows,\r\n\t\t\t\t\tdateType: dateType,\r\n\t\t\t\t\tdateTimeFilterOption: dateTimeFilters.toString(),\r\n\t\t\t\t\tfromDate: JSON.stringify(customDateTimeFilter.fromDate).replace(/\"/g, \"\"),\r\n\t\t\t\t\ttoDate: JSON.stringify(customDateTimeFilter.toDate).replace(/\"/g, \"\"),\r\n\t\t\t\t\tsortOption: sortOption,\r\n\t\t\t\t\tstatusOption: statusOption,\r\n\t\t\t\t\tattributes: attributes\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (util.isNonEmptyString(searchText)) {\r\n\t\t\t\t    requestedParams.searchText = searchText;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar requestedUrl = urlHelper.setParameters('PurchaseOrder/GetPurchaseOrderSearchResults', requestedParams);\r\n\r\n\t\t\t\tvar promise = http.get(requestedUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(success, failure);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction failure(error) {\r\n\t\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.RECEIVE_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Submits the purchase order with the given document id (flag for export and sending)            \r\n\t\t\t */\r\n\t\t\tfunction submitPurchaseOrderByDocumentId(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP0104E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = http.post('PurchaseOrder/SubmitPurchaseOrderByDocumentId', id);\r\n\r\n\t\t\t\tvar newPromise = promise.then(success, failure);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction failure(error) {\r\n\t\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.SHIPPED_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Callback function executed when an error occurs saving a purchase order\r\n\t\t\t * @param error\r\n\t\t\t */\r\n\t\t\tfunction errorReceivingPurchaseOrder(error) {\r\n\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.RECEIVE_ERROR');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction flagAsShipped(id, shipped) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010AE\", id, \"id\");\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar url = 'PurchaseOrder/FlagAsShipped';\r\n\r\n\t\t\t\tif (util.isDefined(shipped) && shipped === false) {\r\n\t\t\t\t\turl = 'PurchaseOrder/FlagAsNotShipped';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters(url, requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(success, failure);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction failure(error) {\r\n\t\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.SHIPPED_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction flagAsDelivered(id, delivered) {\r\n\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010AE\", id, \"id\");\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar url = 'PurchaseOrder/FlagAsDelivered';\r\n\r\n\t\t\t\tif (util.isDefined(delivered) && delivered === false) {\r\n\t\t\t\t\turl = 'PurchaseOrder/FlagAsNotDelivered';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters(url, requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\t\t\t\t\r\n\t\t\t\tvar newPromise = promise.then(success, failure);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction failure(error) {\r\n\t\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.DELIVERED_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction cancelPurchaseOrder(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010AE\", id, \"id\");\r\n\r\n\t\t\t\tvar url = 'PurchaseOrder/VoidPurchaseOrder';\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters(url, requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\t\t\t\t\r\n\t\t\t\tvar newPromise = promise.then(success, failure);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction failure(error) {\r\n\t\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.CANCELLED_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction closePurchaseOrder(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010AE\", id, \"id\");\r\n\r\n\t\t\t\tvar url = 'PurchaseOrder/ClosePurchaseOrder';\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters(url, requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\t\t\t\t\r\n\t\t\t\tvar newPromise = promise.then(success, failure);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction failure(error) {\r\n\t\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.CLOSED_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads allowed actions for purchase order\r\n\t\t\t */\r\n\t\t\tfunction getAllowedActions(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010CE\", id, 'id');\r\n\r\n\t\t\t\tvar requestUrl = 'PurchaseOrder/GetActionsAllowed/' + id;\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.ACTIONS_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction flipPurchaseOrder(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010AE\", id, \"id\");\r\n\r\n\t\t\t\tvar url = 'PurchaseOrder/FlipOrder';\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters(url, requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\t\t\t\t\r\n\t\t\t\tvar newPromise = promise.then(success, failure);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction failure(error) {\r\n\t\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.FLIP_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction acceptPurchaseOrder(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010AE\", id, \"id\");\r\n\r\n\t\t\t\tvar url = 'PurchaseOrder/AcceptPurchaseOrder';\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters(url, requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\t\t\t\t\r\n\t\t\t\tvar newPromise = promise.then(success, failure);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction failure(error) {\r\n\t\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.ACCEPTED_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction rejectPurchaseOrder(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010AE\", id, \"id\");\r\n\r\n\t\t\t\tvar url = 'PurchaseOrder/RejectPurchaseOrder';\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters(url, requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\t\t\t\t\r\n\t\t\t\tvar newPromise = promise.then(success, failure);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction success(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction failure(error) {\r\n\t\t\t\t\treturn errorProcessingPurchaseOrder(error, 'EINVOICING.PORTAL.PURCHASE_ORDERS.PROXIES.REJECTED_ERROR');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function to mark the provided array of document Ids as invoiced\r\n\t\t\t * @param documentIds - array of document Ids to mark as invoiced\r\n\t\t\t * @returns - promise which resolves when the purchase orders are marked as invoiced \r\n\t\t\t */\r\n\t\t\tfunction markPurchaseOrdersAsInvoiced(documentIds) {\r\n\t\t\t\tguard.throwIfNotArray(\"UPP010DE\", documentIds, 'documentIds');\r\n\t\t\t\t\r\n\t\t\t\tvar url = 'PurchaseOrder/MarkAsInvoiced';\r\n\r\n\t\t\t\treturn http.post(url, documentIds);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Callback function executed when an error occurs processing the purchase order\r\n\t\t\t * @param error\r\n\t\t\t */\r\n\t\t\tfunction errorProcessingPurchaseOrder(error, failureReason) {\r\n\t\t\t    proxyErrorInterceptor.handleError(error, failureReason, defaultFailureReason);\r\n\t\t\t\treturn $q.reject(error);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn purchaseOrderProxy;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/purchase-order-proxy.factory.js","//{CODE:DEF0V}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tguard.throwIfNotAnObject(\"DEF0V01E\", module, \"module\");\r\n\r\n\t\tmodule.factory('purchaseOrderLinesColumnSettings', purchaseOrderLinesColumnSettings);\r\n\r\n\t\tpurchaseOrderLinesColumnSettings.$inject = [\r\n\t\t\t'authorizedObjectsFilter'\r\n\t\t];\r\n\r\n\t\tfunction purchaseOrderLinesColumnSettings(authorizedObjectsFilter) {\r\n\t\t\tvar columnDefinitions = [\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ID',\r\n\t\t\t\t\tmodel: 'line.lineReference',\r\n\t\t\t\t\theaderClass: 'has-ordinal',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"centeredcell wordWrapBreakWord readonly\">{{ binding.lineReference }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.SUPPLIER_CODE',\r\n\t\t\t\t\tmodel: 'line.code',\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.suppliersProductCode }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\t\t\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.CUSTOMER_CODE',\r\n\t\t\t\t\tmodel: 'line.code',\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.customersProductCode }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.STANDARD_PRODUCT_CODE',\r\n\t\t\t\t\tmodel: 'line.standardProductCode',\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.standardProductCode }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.STANDARD_PRODUCT_CODE_SCHEME',\r\n\t\t\t\t\tmodel: 'line.standardProductCodeScheme',\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.standardProductCodeScheme }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.PRODUCT_TYPE',\r\n\t\t\t\t\tmodel: '(productLinesCtrl.productTypes[line.productType] || {}).name',\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{binding.productTypeName}}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ITEM_NAME',\r\n\t\t\t\t\tmodel: 'line.itemName',\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.itemName }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: false,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ITEM_DESCRIPTION',\r\n\t\t\t\t\tmodel: 'line.description',\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.itemDescription }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\t\t\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.INVOICES.COMPONENTS.TABLE.COLUMNS.UNIT_PRICE',\r\n\t\t\t\t\tmodel: 'line.unitPrice',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\tcellClass: \"numericcell\",\r\n\t\t\t\t\tdataType: 'number',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly numericcell\">{{ binding.unitPrice | diCurrency:binding.currencyId }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: false,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\t\t\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.QUANTITY',\r\n\t\t\t\t\tmodel: 'line.quantity',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\tcellClass: \"numericcell\",\r\n\t\t\t\t\tdataType: 'number',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly numericcell\">{{ binding.quantity }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: false,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.QUANTITY_UNIT',\r\n\t\t\t\t\tmodel: 'line.unitOfMeasureId ? (productLinesCtrl.unitsOfMeasure[line.unitOfMeasureId] || {}).name : \"\"',\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{binding.quantityUnit}}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.TAX_CODE',\r\n\t\t\t\t\tmodel: 'line.taxCodeId ? line.taxCode + \\': \\' + line.taxRate + \\'%\\' : \"\"',\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.taxCode ? binding.taxCode + (binding.taxCategory ? \\' (\\' + binding.taxCategory + \\')\\' : \\'\\') + \\': \\' + binding.taxRate + \\'%\\' : \"\" }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.TAX_AMOUNT',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\tcellClass: \"numericcell\",\r\n\t\t\t\t\tmodel: 'line.taxAmount',\r\n\t\t\t\t\tdataType: 'number',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly numericcell\">{{ binding.taxAmount | diCurrency:binding.currencyId }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ECLASS_CODE',\r\n\t\t\t\t\tmodel: 'line.eClassCode',\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{binding.eClassCode}}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.PRICE_BASE_QUANTITY',\r\n\t\t\t\t\tmodel: 'line.priceBaseQuantity',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\tcellClass: \"numericcell\",\r\n\t\t\t\t\tdataType: 'number',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly numericcell\">{{ binding.priceBaseQuantity }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.AMOUNT',\r\n\t\t\t\t\tmodel: 'line.quantity * line.unitPrice',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\tcellClass: \"numericcell\",\r\n\t\t\t\t\tdataType: 'number',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly numericcell\">{{ binding.lineAmount | diCurrency:binding.currencyId }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: false,\r\n\t\t\t\t\tisVisible: false,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: true,\r\n\t\t\t\t\tmandatory: true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.PRICE_ALLOWANCE_CHARGE_AMOUNT',\r\n\t\t\t\t\tmodel: 'line.allowanceChargeAmount',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\tcellClass: \"numericcell\",\r\n\t\t\t\t\tdataType: 'number',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly numericcell\">{{ binding.priceAllowanceChargeAmount | diCurrency:binding.currencyId }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.PRICE_ALLOWANCE_CHARGE_IS_CHARGE',\r\n\t\t\t\t\tmodel: 'line.allowanceChargeIsCharge',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.priceAllowanceChargeIsCharge | diYesNo }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.PRICE_ALLOWANCE_CHARGE_BASE_AMOUNT',\r\n\t\t\t\t\tmodel: 'line.allowanceChargeBaseAmount',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\tcellClass: \"numericcell\",\r\n\t\t\t\t\tdataType: 'number',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly numericcell\">{{ binding.priceAllowanceChargeBaseAmount | diCurrency:binding.currencyId }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t}, {\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ACCOUNTING_COST_REFERENCE',\r\n\t\t\t\t\tmodel: 'line.accountingCostReference',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.accountingCostReference }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ITEM_SPECIFICATION_DOCUMENT_REFERENCE',\r\n\t\t\t\t\tmodel: 'line.itemSpecificationDocumentReference',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.itemSpecificationDocumentReference }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.REQUESTED_DELIVERY_PERIOD',\r\n\t\t\t\t\tmodel: 'line.requestedDeliveryPeriod',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\treadonlyTemplate: `\r\n                        <p class=\"readonly\">\r\n                            <span>\r\n\t                            <span ng-if=\"binding.requestedDeliveryStartDate && binding.requestedDeliveryEndDate\">\r\n\t\t\t\t                {{binding.requestedDeliveryStartDate | diDate}} - {{binding.requestedDeliveryEndDate | diDate}}\r\n\t                            </span>\r\n\t                            <span ng-if=\"binding.requestedDeliveryStartDate && !binding.requestedDeliveryEndDate\">\r\n\t\t                        <span di-translate=\"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COMPONENTS.DATE_DISPLAY.FROM\">\r\n\t\t                        </span>\r\n\t\t\t\t                {{ binding.requestedDeliveryStartDate | diDate }}\r\n                                </span>\r\n\t                            <span ng-if=\"!binding.requestedDeliveryStartDate && binding.requestedDeliveryEndDate\">\r\n\t\t                        <span di-translate=\"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COMPONENTS.DATE_DISPLAY.BY\">\r\n\t\t                        </span>\r\n\t\t\t\t                {{ binding.requestedDeliveryEndDate | diDate}}\r\n\t                            </span>\r\n\t                            <span ng-if=\"!binding.requestedDeliveryStartDate && !binding.requestedDeliveryEndDate\"\r\n\t\t                              di-translate=\"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COMPONENTS.DATE_DISPLAY.NOT_SPECIFIED\">\r\n\t                            </span>\r\n                            </span>\r\n\t\t\t\t\t\t</p>`,\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ALLOW_PARTIAL_FULFILMENT',\r\n\t\t\t\t\tmodel: 'line.allowPartialFulfilment',\r\n\t\t\t\t\theaderClass: \"centeredcell\",\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\">{{ binding.allowPartialFulfilment | diYesNo }}</p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t},\r\n                {\r\n                    rights: ['Supplier', 'Buyer'],\r\n                    heading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ADDITIONAL_ITEM_PROPERTY',\r\n                    model: 'line.displayAdditionalItemProperty',\r\n                    headerClass: \"centeredcell\",\r\n                    readonlyTemplate: `\r\n                        <div>\r\n                            <div ng-repeat=\"item in ::binding.additionalItemProperties track by item.id\">\r\n                            {{item.name.toUpperCase() }}: {{item.value}} {{item.valueQuantity}} {{item.valueQuantityUnitName || item.valueQuantityUnit}} {{item.valueQualifier}}.\r\n                        </div>\r\n                        </div>`,\r\n                    visible: true,\r\n                    hideable: true,\r\n                    isVisible: true,\r\n                    isHidden: false,\r\n                    isColumn: false,\r\n                    mandatory: false\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['Supplier', 'Buyer'],\r\n\t\t\t\t\theading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ORIGINATOR_PARTY',\r\n\t\t\t\t\tmodel: 'line.originatorPartyReference',\r\n\t\t\t\t\theaderClass: 'centeredcell',\r\n\t\t\t\t\treadonlyTemplate: '<p class=\"readonly\" ng-if=\"binding.originatorPartyName\">{{binding.originatorPartyName}}\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span ng-if=\"binding.originatorPartyReference\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span ng-if=\"binding.originatorPartyName\">(</span>{{ binding.originatorPartyReference }}<span ng-if=\"binding.originatorPartyName\">)</span></span></p>',\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\thideable: true,\r\n\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\tisHidden: false,\r\n\t\t\t\t\tisColumn: false,\r\n\t\t\t\t\tmandatory: false\r\n\t\t\t\t},\r\n                {\r\n                    rights: ['Supplier', 'Buyer'],\r\n                    heading: 'EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COLUMN_HEADERS.ORDER_NOTES',\r\n                    model: 'line.orderNotes',\r\n                    headerClass: \"centeredcell\",\r\n                    readonlyTemplate: '<textarea style=\"width:500px; height: 100px; background-color: inherit;\" class=\"form-control\" ng-disabled=\"true\" ng-value=\"binding.orderNotes\"></textarea>',\r\n                    visible: true,\r\n                    hideable: false,\r\n                    isVisible: true,\r\n                    isHidden: false,\r\n                    isColumn: false,\r\n                    mandatory: false\r\n                }\r\n\t\t\t];\r\n\t\t\tvar settings = getColumnSettings();\r\n\r\n\t\t\treturn settings;\r\n\r\n\t\t\t/**\r\n\t\t\t * Returns a collection of settings for the purchase order columns\r\n\t\t\t */\r\n\t\t\tfunction getColumnSettings() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcolumns: _.map(authorizedObjectsFilter.getAuthorizedObjects(columnDefinitions, false), function (columnDefinition) {\r\n\t\t\t\t\t\treturn _.omit(columnDefinition, 'rights');\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn purchaseOrderLinesColumnSettings;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/purchaseOrderLinesColumnSettings.js","//{CODE:EUP68}\r\n// di.einvoicing.ui.portal.portal.purchaseorders\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('purchaseOrderRepository', purchaseOrderRepository);\r\n\r\n\t\tpurchaseOrderRepository.$inject = [\r\n\t\t\t'purchaseOrderProxy',\r\n\t\t\t'$q',\r\n\t\t\t'notificationHandler'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * Repository for Purchase Orders\t\t\r\n\t\t */\r\n\t\tfunction purchaseOrderRepository(\r\n\t\t\tpurchaseOrderProxy,\r\n\t\t\t$q,\r\n\t\t\tnotificationHandler) {\r\n\t\t\treturn {\r\n\t\t\t\tgetPurchaseOrders: getPurchaseOrders,\r\n\t\t\t\tacceptOrder: acceptOrder,\r\n\t\t\t\trejectOrder: rejectOrder,\r\n\t\t\t\tcloseOrder: closeOrder,\r\n\t\t\t\tcancelOrder: cancelOrder,\r\n\t\t\t\tflagAsShipped: flagAsShipped,\r\n\t\t\t\tflagAsDelivered: flagAsDelivered,\r\n\t\t\t\tflipOrder: flipOrder,\r\n\t\t\t\tgetAllowedActions: getAllowedActions,\r\n\t\t\t\tmarkPurchaseOrdersAsInvoiced: markPurchaseOrdersAsInvoiced\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads list of orders from database\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction getPurchaseOrders(searchText, lastNRows, dateType, dateTimeFilters, customDateTimeFilter, sortOption, statusOption) {\r\n\t\t\t\tvar promise = purchaseOrderProxy\r\n\t\t\t\t\t.getPurchaseOrders(searchText, lastNRows, dateType, dateTimeFilters, customDateTimeFilter, sortOption, statusOption)\r\n\t\t\t\t\t.then(resolved, rejected).catch();\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, '');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * \tFlags order as accepted\t \r\n\t\t\t */\r\n\t\t\tfunction acceptOrder(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6606E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = purchaseOrderProxy\r\n\t\t\t\t\t.acceptPurchaseOrder(id)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tdisplaySuccessNotification(\"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.ACCEPTED\", reference);\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * \tFlags order as rejected\t \r\n\t\t\t */\r\n\t\t\tfunction rejectOrder(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6801E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = purchaseOrderProxy\r\n\t\t\t\t\t.rejectPurchaseOrder(id)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tdisplaySuccessNotification(\"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.REJECTED\", reference);\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * \tFlags order as closed\t \r\n\t\t\t */\r\n\t\t\tfunction closeOrder(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6802E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = purchaseOrderProxy\r\n\t\t\t\t\t.closePurchaseOrder(id)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tdisplaySuccessNotification(\"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.CLOSED\", reference);\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * \tFlags order as cancelled \r\n\t\t\t */\r\n\t\t\tfunction cancelOrder(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6803E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = purchaseOrderProxy\r\n\t\t\t\t\t.cancelPurchaseOrder(id)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tdisplaySuccessNotification(\"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.CANCELLED\", reference);\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * \tFlags order as shipped or not\t\t \r\n\t\t\t */\r\n\t\t\tfunction flagAsShipped(id, isShipped, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6804E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = purchaseOrderProxy\r\n\t\t\t\t\t.flagAsShipped(id, isShipped)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tvar message = \"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.SHIPPED\";\r\n\t\t\t\t\tif (!isShipped) {\r\n\t\t\t\t\t\tmessage = \"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.NOTSHIPPED\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdisplaySuccessNotification(message, reference);\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * \tFlags order as delivered or not\t\t \r\n\t\t\t */\r\n\t\t\tfunction flagAsDelivered(id, isDelivered, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6805E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = purchaseOrderProxy\r\n\t\t\t\t\t.flagAsDelivered(id, isDelivered)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tvar message = \"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.DELIVERED\";\r\n\t\t\t\t\tif (!isDelivered) {\r\n\t\t\t\t\t\tmessage = \"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.NOTDELIVERED\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdisplaySuccessNotification(message, reference);\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Flips purchase order into invoice\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction flipOrder(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6807E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = purchaseOrderProxy\r\n\t\t\t\t\t.flipPurchaseOrder(id)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which marks a purchase order as invoiced\r\n\t\t\t * @param documentIds - The documents to mark as invoiced\r\n\t\t\t * @returns - Promise which resolves to the new state and available actions for the each document to update \r\n\t\t\t */\r\n\t\t\tfunction markPurchaseOrdersAsInvoiced(documentIds) {\r\n\t\t\t\tguard.throwIfNotArray(\"EUP6809E\", documentIds);\r\n\r\n\t\t\t\tvar promise =\r\n\t\t\t\t\tpurchaseOrderProxy.markPurchaseOrdersAsInvoiced(documentIds);\r\n\r\n\t\t\t\treturn promise;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads allowed actions for order            \r\n\t\t\t */\r\n\t\t\tfunction getAllowedActions(id, reference) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6808E\", id, 'id');\r\n\r\n\t\t\t\tvar promise = purchaseOrderProxy\r\n\t\t\t\t\t.getAllowedActions(id, reference)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn rejectWithErrorNotification(error, reference);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * rejects promise and displays error notification\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction rejectWithErrorNotification(error, reference) {\r\n\t\t\t\tnotificationHandler.showError(error.failureReason, reference);\r\n\r\n\t\t\t    return $q.reject(error).catch(function() {});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Displays success notification\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction displaySuccessNotification(message, reference) {\r\n\t\t\t\tnotificationHandler.showSuccess(message, reference);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn purchaseOrderRepository;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/purchaseOrderRepository.js","//{CODE:EUP54}\r\n// di.einvoicing.ui.portal.portal.purchaseOrders.viewer\r\ndefine([\r\n\t'./_snippets/_loader',\r\n\t'./purchaseOrderDetails/purchaseOrderDetailsDirective',\r\n\t'./dateRangeDisplay/_loader'\r\n], function (\r\n\tsnippetsLoader,\r\n\tpurchaseOrderDetailsDirectiveLoader,\r\n\tdateRangeDisplayLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tsnippetsLoader(module);\r\n\t\tpurchaseOrderDetailsDirectiveLoader(module);\r\n\t\tdateRangeDisplayLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/viewer/_components/_loader.js","//{CODE:EUP3C}\r\n// di.einvoicing.ui.portal.purchaseOrders.components.snippets\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var snippetContext = $di.angular.snippetRegistrar.createContext(\r\n            module,\r\n            'src/app/portal/purchaseOrders/viewer/_components/_snippets');\r\n        \r\n        snippetContext.registerSnippet('diPurchaseOrderHeader', 'purchaseOrderHeader.html');\r\n        snippetContext.registerSnippet('diPurchaseOrderFooter', 'purchaseOrderFooter.html');\r\n        snippetContext.registerSnippet('diPurchaseOrderLines', 'purchaseOrderLines.html');\r\n        snippetContext.registerSnippet('diPurchaseOrderAllowancesCharges', 'purchaseOrderAllowancesCharges.html');\r\n        snippetContext.registerSnippet('diPurchaseOrderSummaryHeader', 'purchaseOrderAuditSummaryHeader.html');\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/viewer/_components/_snippets/_loader.js","//{CODE:EUP92}\r\n// di.einvoicing.ui.portal.dateRangeDisplay\r\ndefine([\r\n\t'./diDateRangeDisplayDirective'\r\n], function (\r\n\tdiDateRangeDisplayDirectiveLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tdiDateRangeDisplayDirectiveLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/viewer/_components/dateRangeDisplay/_loader.js","// di.einvoicing.ui.portal.dateRangeDisplay\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diDateRangeDisplay', diDateRangeDisplay);\r\n\r\n\t\tfunction diDateRangeDisplay() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tstartDate: '=',\r\n\t\t\t\t\tendDate: '='\r\n\t\t\t\t},\r\n\t\t\t\ttemplateUrl: 'src/app/portal/purchaseOrders/viewer/_components/dateRangeDisplay/dateRangeDisplay.html'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diDateRangeDisplay;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/viewer/_components/dateRangeDisplay/diDateRangeDisplayDirective.js","//{CODE:EUP5C}\r\n// di.einvoicing.ui.portal.portal.purchaseOrders.viewer\r\ndefine(['angular'], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diPurchaseOrderDetails', diPurchaseOrderDetails);\r\n\r\n        function diPurchaseOrderDetails() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {},\r\n                controller: \"PurchaseOrderViewerController\",\r\n                controllerAs: \"purchaseOrderViewerCtrl\",\r\n                templateUrl: 'src/app/portal/purchaseOrders/viewer/_components/purchaseOrderDetails/purchaseOrderDetails.html',\r\n                link: link\r\n            };\r\n\r\n            function link(scope) {\r\n                scope.findElement = findElement;\r\n\r\n                return;\r\n\r\n                function findElement(name) {\r\n                    return ng.element(name);\r\n                }\r\n            }\r\n        }\r\n\r\n        return diPurchaseOrderDetails;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/viewer/_components/purchaseOrderDetails/purchaseOrderDetailsDirective.js","//{CODE:EUP53}\r\n// di.einvoicing.ui.portal.portal.purchaseOrders.viewer\r\ndefine([\r\n    './_components/_loader',\r\n    './purchaseOrderViewerLinesConfigurator',\r\n\t'./purchaseOrderViewerController'\r\n], function (\r\n\tcomponentsLoader,\r\n    purchaseOrderViewerLinesConfiguratorLoader,\r\n\tpurchaseOrderViewerControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        componentsLoader(module);\r\n        purchaseOrderViewerLinesConfiguratorLoader(module);\r\n        purchaseOrderViewerControllerLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/viewer/_loader.js","//{CODE:EUP52}\r\n// di.einvoicing.ui.portal.portal.purchaseOrders.viewer\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\t\r\n\t\tmodule.controller('PurchaseOrderViewerController', PurchaseOrderViewerController);\r\n\r\n\t\tPurchaseOrderViewerController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'headerData',\r\n\t\t\t'$stateParams',\r\n\t\t\t'purchaseOrderProxy',\r\n\t\t\t'diState',\r\n\t\t\t'translator',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'promptWindow',\r\n\t\t\t'purchaseOrderViewerLinesConfigurator',\r\n\t\t\t'currencyCache',\r\n\t\t\t'authorizedObjectsFilter',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'documentStateResolver',\r\n\t\t\t'documentAttributeResolver',\r\n\t\t\t'documentProxy',\r\n\t\t\t'purchaseOrderRepository',\r\n\t\t\t'notificationHandler',\r\n\t\t\t'modalSpinner',\r\n\t\t\t'userActionsResolver',\r\n\t\t\t'purchaseOrderLinesColumnSettings',\r\n\t\t\t'scopeCacheFactory',\r\n\t\t\t'documentDownloader',\r\n\t\t\t'staticLookupProxy',\r\n\t\t\t'attachmentProxy',\r\n\t\t\t'$q',\r\n\t\t\t'auditProxy',\r\n\t\t\t'PURCHASE_ORDER_ADDITIONAL_DOCUMENT_REFERENCES_CONFIGURATION',\r\n            'attachmentDownloadValidator'\r\n\t\t];\r\n\r\n\t\tfunction PurchaseOrderViewerController(\r\n\t\t\tscope,\r\n\t\t\theaderData,\r\n\t\t\tstateParams,\r\n\t\t\tpurchaseOrderProxy,\r\n\t\t\tdiState,\r\n\t\t\ttranslator,\r\n\t\t\tenumTranslator,\r\n\t\t\tdiPrompt,\r\n\t\t\tpurchaseOrderViewerLinesConfigurator,\r\n\t\t\tcurrencyCache,\r\n\t\t\tauthorizedObjectsFilter,\r\n\t\t\tclientEnums,\r\n\t\t\tdocumentStateResolver,\r\n\t\t\tdocumentAttributeResolver,\r\n\t\t\tdocumentProxy,\r\n\t\t\tpurchaseOrderRepository,\r\n\t\t\tnotificationHandler,\r\n\t\t\tmodalSpinner,\r\n\t\t\tuserActionsResolver,\r\n\t\t\tpurchaseOrderLinesColumnSettings,\r\n\t\t\tscopeCacheFactory,\r\n\t\t\tdocumentDownloader,\r\n\t\t\tstaticLookupProxy,\r\n\t\t\tattachmentProxy,\r\n\t\t\t$q,\r\n            auditProxy,\r\n\t\t\tpurchaseOrderAdditionalDocumentReferencesConfiguration,\r\n            attachmentDownloadValidator) {\r\n\r\n\t\t\tvar vm = this;\r\n\t\t\tvar functionToGetPurchaseOrder;\r\n\t\t\tvar parameterToGetPurchaseOrder;\r\n\r\n\t\t\tvar schemeTranslationPrefix = \"EINVOICING.COMPONENTS.CLIENT_ENUMS.SCHEMES.\";\r\n\r\n\t\t\tvm.mode = 'current';\r\n\t\t\tvm.auditSummary = {};\r\n\r\n\t\t\tvm.canFlip = false;\r\n\t\t\tvm.purchaseOrder = {\r\n\t\t\t\tlines: [],\r\n\t\t\t\tattributes: [],\r\n\t\t\t\tactions: [],\r\n\t\t\t\tallowanceCharges: []\r\n\t\t\t};\r\n\t\t\tvm.countries = [];\r\n\t\t\tvm.currentState = '...';\r\n\t\t\tvm.selectedStates = [];\r\n\t\t\tvm.selectedAttributes = [];\r\n\t\t\tvm.selectedActions = [];\r\n\t\t\tvm.labels = {};\r\n\t\t\tvm.buttonsSetOneOptions = {};\r\n\t\t\tvm.buttonsSetTwoOptions = {};\r\n\t\t\tvm.buttonsSetThreeOptions = {};\r\n\t\t\tvm.scopeCache = scopeCacheFactory.create(scope);\r\n\t\t\tvm.settings = purchaseOrderLinesColumnSettings;\r\n\t\t\tvm.languageKey = \"EINVOICING.PORTAL.PURCHASE_ORDERS.COMPONENTS.PRODUCT_LINES\";\r\n\t\t\tvm.additionalDocumentReferencesConfiguration = purchaseOrderAdditionalDocumentReferencesConfiguration;\r\n\r\n\t\t\tvm.billFromContact = {};\r\n\t\t\tvm.billToContact = {};\r\n\t\t\tvm.deliveryContact = {};\r\n\t\t\tvm.originatorCustomer = {};\r\n\r\n\t\t\tvm.supplierAddress = {};\r\n\t\t\tvm.buyerAddress = {};\r\n\t\t\tvm.deliveryAddress = {};\r\n\t\t\tvm.accountingCustomerAddress = {};\r\n\r\n\t\t\tvm.backToList = backToList;\r\n\t\t\tvm.flipOrder = flipOrder;\r\n\t\t\tvm.acceptOrder = acceptOrder;\r\n\t\t\tvm.rejectOrder = rejectOrder;\r\n\t\t\tvm.flagAsShipped = flagAsShipped;\r\n\t\t\tvm.flagAsDelivered = flagAsDelivered;\r\n\t\t\tvm.cancelOrder = cancelOrder;\r\n\t\t\tvm.closeOrder = closeOrder;\r\n\t\t\tvm.getRenderedOrder = getRenderedOrder;\r\n\t\t\tvm.downloadPurchaseOrderAsCsv = downloadPurchaseOrderAsCsv;\r\n\t\t\tvm.getRelatedDocuments = getRelatedDocuments;\r\n\t\t\tvm.downloadAttachment = downloadAttachment;\r\n\t\t\tvm.downloadAllAttachments = downloadAllAttachments;\r\n\t\t\tvm.markAsInvoiced = markAsInvoiced;\r\n\t\t\tvm.goToHistory = goToHistory;\r\n\t\t\tvm.goToViewCurrent = goToViewCurrent;\r\n\r\n\t\t\tvm.allowances = [];\r\n\t\t\tvm.charges = [];\r\n\t\t\tvar spinner;\r\n\r\n\t\t\tinitialise();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Initialises loading purchase order details\r\n\t\t\t * @returns {}\r\n\t\t\t */\r\n\t\t\tfunction initialise() {\r\n\t\t\t\tshowSpinner();\r\n\t\t\t\tsetLabels();\r\n\t\t\t\tvm.canFlip = util.isDefined(vm.labels.flipOrder);\r\n\r\n\t\t\t\tvm.buttonsSetOneOptions = purchaseOrderViewerLinesConfigurator.getButtonsSetOneConfiguration();\r\n\t\t\t\tvm.buttonsSetTwoOptions = purchaseOrderViewerLinesConfigurator.getButtonsSetTwoConfiguration();\r\n\t\t\t\tvm.buttonsSetThreeOptions = purchaseOrderViewerLinesConfigurator.getButtonsSetThreeConfiguration();\r\n\r\n\t\t\t\tstaticLookupProxy\r\n\t\t\t\t\t.get('Country')\r\n\t\t\t\t\t.then(function (data) {\r\n\t\t\t\t\t\tvm.countries.fill(data);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tcurrencyCache.getCurrencies().then(function () {\r\n\t\t\t\t});\r\n\r\n\t\t\t\tloadPurchaseOrder();\r\n                \r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * loads purchase order details\r\n\t\t\t\t */\r\n\t\t\t\tfunction loadPurchaseOrder() {\r\n\t\t\t\t\tif (util.isNumber(stateParams.id)) {\r\n\t\t\t\t\t\tif (util.isNumber(stateParams.aid)) {\r\n\t\t\t\t\t\t\tvm.mode = 'audit';\r\n\t\t\t\t\t\t\tfunctionToGetPurchaseOrder = purchaseOrderProxy.getDetailsByAuditId;\r\n\t\t\t\t\t\t\tparameterToGetPurchaseOrder = stateParams.aid;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfunctionToGetPurchaseOrder = purchaseOrderProxy.getById;\r\n\t\t\t\t\t\t\tparameterToGetPurchaseOrder = stateParams.id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (util.isNonEmptyString(stateParams.purchaseOrderNumber)) {\r\n\t\t\t\t\t\tfunctionToGetPurchaseOrder = purchaseOrderProxy.getByPurchaseOrderNumber;\r\n\t\t\t\t\t\tparameterToGetPurchaseOrder = stateParams.purchaseOrderNumber;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (functionToGetPurchaseOrder) {\r\n\t\t\t\t\t\tfunctionToGetPurchaseOrder(parameterToGetPurchaseOrder)\r\n\t\t\t\t\t\t\t.then(resolved, rejected);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * resolved promise handler\r\n\t\t\t\t\t */\r\n\t\t\t\t    function resolved(data) {\r\n\t\t\t\t        removeSpinner();\r\n\t\t\t\t        util.extend(vm.purchaseOrder, data);\r\n\r\n\t\t\t\t        if (vm.mode === \"audit\") {\r\n\t\t\t\t            loadAuditSummary();\r\n\t\t\t\t        }\r\n\r\n\t\t\t\t        setAttributes();\r\n\t\t\t\t        setActions();\r\n\t\t\t\t        setParties();\r\n\t\t\t\t        setContacts();\r\n\t\t\t\t        setLegal();\r\n\t\t\t\t        setAddresses();\r\n\r\n\t\t\t\t        setState(vm.purchaseOrder.clientDocumentState);\r\n\t\t\t\t        setAllowancesCharges();\r\n\t\t\t\t        setOrderType();\r\n\t\t\t\t        return;\r\n\r\n\t\t\t\t        function loadAuditSummary() {\r\n\t\t\t\t            auditProxy\r\n\t\t\t\t                .getAuditRecordForDocument(\r\n\t\t\t\t                    vm.purchaseOrder.documentId,\r\n\t\t\t\t                    stateParams.aid)\r\n\t\t\t\t                .then(auditResolved, auditRejected);\r\n\r\n\r\n\t\t\t\t            return;\r\n\r\n\t\t\t\t            function auditResolved(data) {\r\n\t\t\t\t                enumTranslator.translate(clientEnums.eventType, data.eventTypeId)\r\n\t\t\t\t                    .then(function(translated) {\r\n\t\t\t\t                        data.eventTypeName = translated;\r\n\t\t\t\t                        vm.auditSummary = data;\r\n\t\t\t\t                    });\r\n\t\t\t\t            }\r\n\r\n\t\t\t\t            function auditRejected() {\r\n\r\n\t\t\t\t            }\r\n\t\t\t\t        }\r\n\r\n\r\n\t\t\t\t        function setAttributes() {\r\n\t\t\t\t            var array = documentAttributeResolver.resolveAttributeKeys(vm.purchaseOrder.attributes);\r\n\t\t\t\t            vm.selectedAttributes.fill(array);\r\n\r\n\r\n\t\t\t\t            if (vm.mode === 'current') {\r\n\t\t\t\t                documentAttributeResolver\r\n\t\t\t\t                    .addAttributeById(vm.selectedAttributes, clientEnums.documentAttribute.current);\r\n\t\t\t\t            }\r\n\t\t\t\t        }\r\n\r\n\t\t\t\t        function setOrderType() {\r\n\t\t\t\t            if (util.isDefined(vm.purchaseOrder.orderTypeId)) {\r\n\t\t\t\t                if (vm.purchaseOrder.orderTypeId <= 0) {\r\n\t\t\t\t                    vm.purchaseOrder.orderTypeId = 1;\r\n\t\t\t\t                }\r\n\t\t\t\t                enumTranslator.translate(clientEnums.orderType, vm.purchaseOrder.orderTypeId)\r\n\t\t\t\t                    .then(function(translated) {\r\n\t\t\t\t                        vm.purchaseOrder.orderType = translated;\r\n\t\t\t\t                    });\r\n\t\t\t\t            }\r\n\t\t\t\t        }\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    /**\r\n                     * rejected promise handler\r\n                     */\r\n\t\t\t\t\tfunction rejected() {\r\n\t\t\t\t\t\tremoveSpinner();\r\n\r\n\t\t\t\t\t\tnotificationHandler.showError(vm.labels.notLoaded, parameterToGetPurchaseOrder);\r\n\t\t\t\t\t\tbackToList();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t* sets labels values depending on user rights\r\n\t\t\t\t*/\r\n\t\t\t\tfunction setLabels() {\r\n\t\t\t\t\tvar data = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.VIEW.HEADER.TITLE_SUPPLIER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.VIEW.HEADER.TITLE_BUYER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"orderNumber\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COMPONENTS.DETAILS.PURCHASE_ORDER_NUMBER_SUPPLIER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tkey: \"orderNumber\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COMPONENTS.DETAILS.PURCHASE_ORDER_NUMBER_BUYER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"detailsHeading\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COMPONENTS.DETAILS.HEADING_SUPPLIER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tkey: \"detailsHeading\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COMPONENTS.DETAILS.HEADING_BUYER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"notLoaded\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COULD_NOT_LOAD_PURCHASE_ORDER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tkey: \"notLoaded\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.COULD_NOT_LOAD_SALES_ORDER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"PurchaseOrderFlipper\"],\r\n\t\t\t\t\t\t\tkey: \"flipOrder\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.ACTIONS.FLIP_ORDER_BUYER\"\r\n\t\t\t\t\t\t},\r\n                        {\r\n                        \trights: [\"Supplier\"],\r\n                        \tkey: \"audit_title\",\r\n                        \tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.VIEW.HEADER.AUDIT_TITLE_SUPPLIER\"\r\n                        },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tkey: \"audit_title\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.VIEW.HEADER.AUDIT_TITLE_BUYER\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\tvm.labels = authorizedObjectsFilter.getAuthorizedObjectsAsAssociative(data, 'key', 'label');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * redirection to list view\r\n\t\t\t */\r\n\t\t\tfunction backToList() {\r\n\t\t\t\tdiState.goBack().catch(function () {\r\n\t\t\t\t\tif (vm.mode === 'current') {\r\n\t\t\t\t\t\tdiState.go('portal.orders.list');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdiState.go('portal.audit.list', { id: vm.purchaseOrder.documentId });\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * calls repository to create invoice from current order\r\n\t\t\t */\r\n\t\t\tfunction flipOrder() {\r\n\t\t\t    translator.whenReady().then(function() {\r\n\t\t\t        purchaseOrderRepository\r\n\t\t\t\t\t.flipOrder(vm.purchaseOrder.id, vm.purchaseOrder.number)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\t\t\t    });\r\n\t\t\t    \r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t    \r\n\t\t\t\t            var link = translator.instantTranslate(\"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.FLIP_GO_TO_INVOICE_LINK\");\r\n\r\n\t\t\t\t            switch (data.success) {\r\n\t\t\t\t                case false:\r\n\t\t\t\t                    var message = translator.instantTranslate(\"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.ERROR.FLIP_FAILURE_REASON.\" + data.failureReason);\r\n\t\t\t\t                    var viewAction = goToViewInvoice;\r\n\r\n\t\t\t\t                    if (data.invoiceId <= 0) {\r\n\t\t\t\t                        link = \"\";\r\n\t\t\t\t                        viewAction = null;\r\n\t\t\t\t                    } else {\r\n\t\t\t\t                        link = '<br/>' + link;\r\n\t\t\t\t                    }\r\n\r\n\t\t\t\t                    notificationHandler.showWarning(message + link, vm.purchaseOrder.number, viewAction);\r\n\t\t\t\t                    break;\r\n\t\t\t\t                default:\r\n\t\t\t\t                    notificationHandler\r\n                                        .showSuccess(\r\n                                            \"EINVOICING.PORTAL.PURCHASE_ORDERS.ACTIONS.NOTIFICATION.SUCCESS.FLIP_SUCCESS\",\r\n                                            vm.purchaseOrder.number);\r\n\t\t\t\t                    goToEditInvoice();\r\n\t\t\t\t                    break;\r\n\t\t\t\t            }\r\n\r\n\t\t\t\t            reloadDocumentActions();\r\n\t\t\t\t        \r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction goToEditInvoice() {\r\n\t\t\t\t\t\tif (data.invoiceId > 0) {\r\n\t\t\t\t\t\t\tdiState.go('portal.invoices.editById', { id: data.invoiceId });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction goToViewInvoice() {\r\n\t\t\t\t\t\tif (data.invoiceId > 0) {\r\n\t\t\t\t\t\t\tdiState.go('portal.invoices.viewById', { id: data.invoiceId });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\tnotificationHandler.showError(error.failureReason);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * calls repository to accept order\r\n\t\t\t */\r\n\t\t\tfunction acceptOrder() {\r\n\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t.acceptOrder(vm.purchaseOrder.documentId, vm.purchaseOrder.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved() {\r\n\t\t\t\t\tsetState(clientEnums.documentStateKey.accepted);\r\n\t\t\t\t\treloadDocumentActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * calls repository to reject order\r\n\t\t\t */\r\n\t\t\tfunction rejectOrder() {\r\n\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t.rejectOrder(vm.purchaseOrder.documentId, vm.purchaseOrder.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved() {\r\n\t\t\t\t\tsetState(clientEnums.documentStateKey.rejected);\r\n\t\t\t\t\treloadDocumentActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * calls repository to cancel order\r\n\t\t\t */\r\n\t\t\tfunction cancelOrder() {\r\n\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t.cancelOrder(vm.purchaseOrder.documentId, vm.purchaseOrder.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved() {\r\n\t\t\t\t\tsetState(clientEnums.documentStateKey.cancelled);\r\n\t\t\t\t\treloadDocumentActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * calls repository to close order\r\n\t\t\t */\r\n\t\t\tfunction closeOrder() {\r\n\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t.closeOrder(vm.purchaseOrder.documentId, vm.purchaseOrder.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved() {\r\n\t\t\t\t\tsetState(clientEnums.documentStateKey.closed);\r\n\t\t\t\t\treloadDocumentActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * calls repository to flag as shipped or not shipped order\r\n\t\t\t */\r\n\t\t\tfunction flagAsShipped(shipped) {\r\n\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t.flagAsShipped(vm.purchaseOrder.documentId, shipped, vm.purchaseOrder.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(result) {\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\tsetState(clientEnums.documentStateKey.shipped);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treloadDocumentState();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treloadDocumentActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * calls repository to flag as delivered or not delivered order\r\n\t\t\t */\r\n\t\t\tfunction flagAsDelivered(delivered) {\r\n\t\t\t\tpurchaseOrderRepository\r\n\t\t\t\t\t.flagAsDelivered(vm.purchaseOrder.documentId, delivered, vm.purchaseOrder.number)\r\n\t\t\t\t\t.then(resolved);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(result) {\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\tsetState(clientEnums.documentStateKey.delivered);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treloadDocumentState();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treloadDocumentActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Marks the current purchase order as invoiced\r\n\t\t\t */\r\n\t\t\tfunction markAsInvoiced() {\r\n\t\t\t\tpurchaseOrderRepository.markPurchaseOrdersAsInvoiced([vm.purchaseOrder.documentId]).then(resolved, rejected);\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tif (util.isArray(data) === false || data.length === 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar poState = data[0];\r\n\r\n\t\t\t\t\tvm.purchaseOrder.actions.fill(poState.userActions);\r\n\t\t\t\t\tsetActions();\r\n\r\n\t\t\t\t\tsetState(poState.documentState);\r\n\r\n\t\t\t\t\tnotificationHandler.showSuccess('EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.ACTIONS.MARK_INVOICED.SUCCESS', vm.purchaseOrder.number);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected() {\r\n\t\t\t\t\tnotificationHandler.showError('EINVOICING.PORTAL.PURCHASE_ORDERS.VIEWER.ACTIONS.MARK_INVOICED.FAILED', vm.purchaseOrder.number);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Downloads order as pdf\r\n\t\t\t */\r\n\t\t\tfunction getRenderedOrder() {\r\n\t\t\t\tvar documentId = vm.purchaseOrder.documentId;\r\n\t\t\t\tdocumentDownloader\r\n\t\t\t\t\t.downloadRenderedPurchaseOrder(documentId);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Downloads a csv file containing data for the selected purchase orders\r\n\t\t\t */\r\n\t\t\tfunction downloadPurchaseOrderAsCsv() {\r\n\t\t\t\tif (!util.isNullOrUndefined(vm.purchaseOrder.id)) {\r\n\t\t\t\t\tvar purchaseOrderIds = [vm.purchaseOrder.id];\r\n\t\t\t\t\tdocumentDownloader.downloadPurchaseOrdersCsv(purchaseOrderIds);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Downloads the attachment of the additionalDocumentReference\r\n\t\t\t */\r\n\t\t\tfunction downloadAttachment(attachmentDataId, filename) {\r\n\t\t\t    if (attachmentDownloadValidator.allowDownloadSingleFile(filename)) {\r\n\t\t\t        attachmentProxy.downloadFile(attachmentDataId);\r\n\t\t\t    }\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Downloads all the attachments of the PO\r\n\t\t\t */\r\n\t\t\tfunction downloadAllAttachments() {\r\n\t\t\t    var attachmentDataIds = [];\r\n\r\n\t\t\t    if (attachmentDownloadValidator.allowDownloadMultipleFiles(vm.purchaseOrder.additionalDocumentReferences, attachmentDataIds)) {\r\n\t\t\t        attachmentProxy.downloadZipFile(attachmentDataIds);\r\n\t\t\t    }\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Navigates to related documents page\r\n\t\t\t */\r\n\t\t\tfunction getRelatedDocuments() {\r\n\t\t\t\tdiState.go('portal.related.list', { id: vm.purchaseOrder.documentId });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Navigatest to history list page\r\n\t\t\t */\r\n\t\t\tfunction goToHistory() {\r\n\t\t\t\tdiState.go('portal.audit.list', { id: vm.purchaseOrder.documentId });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Navigates to view page for current order\r\n\t\t\t */\r\n\t\t\tfunction goToViewCurrent() {\r\n\t\t\t\tdiState.go('portal.orders.viewById', { id: vm.purchaseOrder.id });\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * sets current order state\r\n\t\t\t */\r\n\t\t\tfunction setState(stateId) {\r\n\t\t\t\tvar state = documentStateResolver.getDocumentState(stateId);\r\n\t\t\t\tvm.purchaseOrder.clientDocumentState = stateId;\r\n\t\t\t\tvm.selectedStates.fill(state);\r\n\r\n\t\t\t\tupdateCurrentState(stateId);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * updates current\r\n\t\t\t */\r\n\t\t\tfunction updateCurrentState() {\r\n\t\t\t    documentStateResolver.calculateCurrentState('order', vm.purchaseOrder.clientDocumentState, true)\r\n\t\t\t        .then(function(calculated) {\r\n\t\t\t            vm.currentState = calculated;\r\n\t\t\t        });\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * reloads document state\r\n\t\t\t */\r\n\t\t\tfunction reloadDocumentState() {\r\n\t\t\t\tdocumentProxy\r\n\t\t\t\t\t.getDocumentClientStateId(vm.purchaseOrder.id, clientEnums.documentType.purchaseOrder)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(stateId) {\r\n\t\t\t\t\tsetState(stateId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected() {\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Reloads document allowed actions\r\n\t\t\t */\r\n\t\t\tfunction reloadDocumentActions() {\r\n\t\t\t\tpurchaseOrderRepository.getAllowedActions(vm.purchaseOrder.documentId, vm.purchaseOrder.number)\r\n\t\t\t\t\t   .then(resolved);\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tvm.purchaseOrder.actions.fill(data);\r\n\t\t\t\t\tsetActions();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t *  resolves allowed actions\r\n\t\t\t */\r\n\t\t\tfunction setActions() {\r\n\t\t\t\tvar resolvedActions = userActionsResolver.resolveActions(vm.purchaseOrder.actions, false);\r\n\t\t\t\tvm.selectedActions.fill(resolvedActions);\r\n\t\t\t}\r\n\r\n\t\t\tfunction setParties() {\r\n\t\t\t\tvm.supplierParty = {\r\n\t\t\t\t\tpartyName: vm.purchaseOrder.supplierName,\r\n\t\t\t\t\tpartyCode: vm.purchaseOrder.supplierCode,\r\n\t\t\t\t\tpartyIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.supplierPartyIdentifierScheme),\r\n\t\t\t\t\tendpointId: vm.purchaseOrder.supplierEndpointIdentifier,\r\n\t\t\t\t\tendpointIdenfitierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.supplierEndpointIdentifierScheme)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.supplierParty.isVisible = checkObjectSectionIsVisible(vm.supplierParty);\r\n\r\n\t\t\t\tvm.customerParty = {\r\n\t\t\t\t\tpartyName: vm.purchaseOrder.customerName,\r\n\t\t\t\t\tpartyCode: vm.purchaseOrder.customerCode,\r\n\t\t\t\t\tpartyIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.customerPartyIdentifierScheme),\r\n\t\t\t\t\tvatNumber: vm.purchaseOrder.buyerVatNumber,\r\n\t\t\t\t\tvatNumberScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.buyerVatNumberScheme),\r\n\t\t\t\t\tendpointId: vm.purchaseOrder.buyerEndpointIdentifier,\r\n\t\t\t\t\tendpointIdenfitierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.buyerEndpointIdentifierScheme)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.customerParty.isVisible = checkObjectSectionIsVisible(vm.customerParty);\r\n\r\n\t\t\t\tvm.deliveryParty = {\r\n\t\t\t\t\tpartyName: vm.purchaseOrder.deliveryPartyName,\r\n\t\t\t\t\tpartyCode: vm.purchaseOrder.deliveryPartyCode,\r\n\t\t\t\t\tpartyIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.deliveryPartyIdentifierScheme)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.deliveryParty.isVisible = checkObjectSectionIsVisible(vm.deliveryParty, ['partyIdentifierScheme']);\r\n\r\n\t\t\t\tvm.accountingParty = {\r\n\t\t\t\t\tpartyName: vm.purchaseOrder.accountingCustomerName,\r\n\t\t\t\t\tpartyCode: vm.purchaseOrder.accountingCustomerCode,\r\n\t\t\t\t\tpartyIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.accountingCustomerPartyIdentifierScheme),\r\n\t\t\t\t\tvatNumber: vm.purchaseOrder.accountingCustomerVatNumber,\r\n\t\t\t\t\tvatNumberScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.accountingCustomerVatNumberScheme),\r\n\t\t\t\t\tendpointId: vm.purchaseOrder.accountingCustomerEndpointIdentifier,\r\n\t\t\t\t\tendpointIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.accountingCustomerEndpointIdentifierScheme)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.accountingParty.isVisible = checkObjectSectionIsVisible(vm.accountingParty, ['endpointIdentifierScheme', 'partyIdentifierScheme', 'vatNumberScheme']);\r\n\r\n\t\t\t\tvm.originatorParty = {\r\n\t\t\t\t\tpartyName: vm.purchaseOrder.originatorCustomerPartyName,\r\n\t\t\t\t\tpartyCode: vm.purchaseOrder.originatorCustomerPartyReference,\r\n\t\t\t\t\tpartyIdentifierScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.originatorCustomerPartyIdentifierScheme)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.originatorParty.isVisible = checkObjectSectionIsVisible(vm.originatorParty, ['partyIdentifierScheme']);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t\t* populates contacts variables for use on the UI\r\n\t\t\t\t*/\r\n\t\t\tfunction setContacts() {\r\n\t\t\t\tvm.billFromContact = {\r\n\t\t\t\t\tName: vm.purchaseOrder.billFromContactName,\r\n\t\t\t\t\tTelephone: vm.purchaseOrder.billFromContactTelephone,\r\n\t\t\t\t\tEmail: vm.purchaseOrder.billFromContactEmail,\r\n\t\t\t\t\tFax: vm.purchaseOrder.billFromContactFax,\r\n\t\t\t\t\tReference: vm.purchaseOrder.billFromContactReference\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.billFromContact.isVisible = checkObjectSectionIsVisible(vm.billFromContact);\r\n\r\n\t\t\t\tvm.billToContact = {\r\n\t\t\t\t\tName: vm.purchaseOrder.billToContactName,\r\n\t\t\t\t\tTelephone: vm.purchaseOrder.billToContactTelephone,\r\n\t\t\t\t\tEmail: vm.purchaseOrder.billToContactEmail,\r\n\t\t\t\t\tFax: vm.purchaseOrder.billToContactFax,\r\n\t\t\t\t\tReference: vm.purchaseOrder.billToContactReference\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.billToContact.isVisible = checkObjectSectionIsVisible(vm.billToContact);\r\n\r\n\t\t\t\tvm.deliveryContact = {\r\n\t\t\t\t\tName: vm.purchaseOrder.deliveryContactName,\r\n\t\t\t\t\tTelephone: vm.purchaseOrder.deliveryContactTelephone,\r\n\t\t\t\t\tEmail: vm.purchaseOrder.deliveryContactEmail,\r\n\t\t\t\t\tFax: vm.purchaseOrder.deliveryContactFax,\r\n\t\t\t\t\tReference: vm.purchaseOrder.deliveryContactReference\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.deliveryContact.isVisible = checkObjectSectionIsVisible(vm.deliveryContact);\r\n\r\n\t\t\t\tvm.accountingCustomerContact = {\r\n\t\t\t\t\tReference: vm.purchaseOrder.accountingCustomerContactReference\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.accountingCustomerContact.isVisible = checkObjectSectionIsVisible(vm.accountingCustomerContact);\r\n\r\n\t\t\t\tvm.originatorCustomerContact = {\r\n\t\t\t\t\tName: vm.purchaseOrder.originatorCustomerContactName,\r\n\t\t\t\t\tTelephone: vm.purchaseOrder.originatorCustomerContactTelephone,\r\n\t\t\t\t\tEmail: vm.purchaseOrder.originatorCustomerContactEmail,\r\n\t\t\t\t\tFax: vm.purchaseOrder.originatorCustomerContactFax\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.originatorCustomerContact.isVisible = checkObjectSectionIsVisible(vm.originatorCustomerContact);\r\n\t\t\t}\r\n\r\n\t\t\tfunction setLegal() {\r\n\t\t\t\tvm.accountingLegal = {\r\n\t\t\t\t\tregistrationName: vm.purchaseOrder.accountingCustomerLegalName,\r\n\t\t\t\t\tcompanyReference: vm.purchaseOrder.accountingCustomerLegalCompanyReference,\r\n\t\t\t\t\tcompanyReferenceScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.accountingCustomerLegalCompanyReferenceScheme),\r\n\t\t\t\t\tcityName: vm.purchaseOrder.accountingCustomerLegalTown,\r\n\t\t\t\t\tcountryName: resolveCountryNameByCode(vm.purchaseOrder.accountingCustomerLegalCountry)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.accountingLegal.isVisible = checkObjectSectionIsVisible(vm.accountingLegal, ['companyReferenceScheme']);\r\n\r\n\t\t\t\tvm.buyerLegal = {\r\n\t\t\t\t\tregistrationName: vm.purchaseOrder.buyerLegalRegistrationName,\r\n\t\t\t\t\tcompanyReference: vm.purchaseOrder.buyerLegalCompanyReference,\r\n\t\t\t\t\tcompanyReferenceScheme: translator.instantTranslate(schemeTranslationPrefix + vm.purchaseOrder.buyerLegalCompanyReferenceScheme),\r\n\t\t\t\t\tcityName: vm.purchaseOrder.buyerLegalTown,\r\n\t\t\t\t\tcountryName: resolveCountryNameByCode(vm.purchaseOrder.buyerLegalCountry)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.buyerLegal.isVisible = checkObjectSectionIsVisible(vm.buyerLegal, ['companyReferenceScheme']);\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfunction setAddresses() {\r\n\t\t\t\tvm.supplierAddress = {\r\n\t\t\t\t\tName: vm.purchaseOrder.supplierDetailsName,\r\n\t\t\t\t\tAddressLine1: vm.purchaseOrder.supplierDetailsAddressLine1,\r\n\t\t\t\t\tAddressLine2: vm.purchaseOrder.supplierDetailsAddressLine2,\r\n\t\t\t\t\tAddressTown: vm.purchaseOrder.supplierDetailsAddressTown,\r\n\t\t\t\t\tAddressCounty: vm.purchaseOrder.supplierDetailsAddressCounty,\r\n\t\t\t\t\tPostCode: vm.purchaseOrder.supplierDetailsPostCode,\r\n\t\t\t\t\tCountry: resolveCountryNameByCode(vm.purchaseOrder.supplierDetailsCountry),\r\n\t\t\t\t\tLocationIdentifier: vm.purchaseOrder.supplierLocationIdentifier,\r\n\t\t\t\t\tshowName: vm.purchaseOrder.supplierDetailsName !== vm.purchaseOrder.supplierName\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (vm.supplierAddress.showName === false) {\r\n\t\t\t\t\tvm.supplierAddress.Name = '';\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvm.supplierAddress.isVisible = checkObjectSectionIsVisible(vm.supplierAddress);\r\n\r\n\t\t\t\tvm.buyerAddress = {\r\n\t\t\t\t\tName: vm.purchaseOrder.invoiceAddressName,\r\n\t\t\t\t\tAddressLine1: vm.purchaseOrder.invoiceAddressLine1,\r\n\t\t\t\t\tAddressLine2: vm.purchaseOrder.invoiceAddressLine2,\r\n\t\t\t\t\tAddressTown: vm.purchaseOrder.invoiceAddressTown,\r\n\t\t\t\t\tAddressCounty: vm.purchaseOrder.invoiceAddressCounty,\r\n\t\t\t\t\tPostCode: vm.purchaseOrder.invoiceAddressPostCode,\r\n\t\t\t\t\tCountry: resolveCountryNameByCode(vm.purchaseOrder.invoiceAddressCountry),\r\n\t\t\t\t\tLocationIdentifier: vm.purchaseOrder.invoiceLocationIdentifier,\r\n\t\t\t\t\tshowName: vm.purchaseOrder.invoiceAddressName !== vm.purchaseOrder.customerName\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (vm.buyerAddress.showName === false) {\r\n\t\t\t\t\tvm.buyerAddress.Name = '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.buyerAddress.isVisible = checkObjectSectionIsVisible(vm.buyerAddress);\r\n\r\n\t\t\t\tvm.deliveryAddress = {\r\n\t\t\t\t\tName: vm.purchaseOrder.deliveryAddressName,\r\n\t\t\t\t\tAddressLine1: vm.purchaseOrder.deliveryAddressLine1,\r\n\t\t\t\t\tAddressLine2: vm.purchaseOrder.deliveryAddressLine2,\r\n\t\t\t\t\tAddressTown: vm.purchaseOrder.deliveryAddressTown,\r\n\t\t\t\t\tAddressCounty: vm.purchaseOrder.deliveryAddressCounty,\r\n\t\t\t\t\tPostCode: vm.purchaseOrder.deliveryAddressPostCode,\r\n\t\t\t\t\tCountry: resolveCountryNameByCode(vm.purchaseOrder.deliveryAddressCountry),\r\n\t\t\t\t\tLocationIdentifier: vm.purchaseOrder.deliveryLocationIdentifier,\r\n\t\t\t\t\tLocationIdentifierScheme: vm.purchaseOrder.deliveryLocationIdentifierScheme,\r\n\t\t\t\t\tshowName: vm.purchaseOrder.deliveryAddressName !== vm.purchaseOrder.deliveryPartyName\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (vm.deliveryAddress.showName === false) {\r\n\t\t\t\t\tvm.deliveryAddress.Name = '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.deliveryAddress.isVisible = checkObjectSectionIsVisible(vm.deliveryAddress, ['Name', 'LocationIdentifierScheme']);\r\n\r\n\t\t\t\tvm.accountingCustomerAddress = {\r\n\t\t\t\t\tName: vm.purchaseOrder.accountingCustomerAddressName,\r\n\t\t\t\t\tAddressLine1: vm.purchaseOrder.accountingCustomerAddressLine1,\r\n\t\t\t\t\tAddressLine2: vm.purchaseOrder.accountingCustomerAddressLine2,\r\n\t\t\t\t\tAddressTown: vm.purchaseOrder.accountingCustomerAddressTown,\r\n\t\t\t\t\tAddressCounty: vm.purchaseOrder.accountingCustomerAddressCounty,\r\n\t\t\t\t\tPostCode: vm.purchaseOrder.accountingCustomerAddressPostCode,\r\n\t\t\t\t\tCountry: resolveCountryNameByCode(vm.purchaseOrder.accountingCustomerAddressCountry),\r\n\t\t\t\t\tLocationIdentifier: vm.purchaseOrder.accountingCustomerLocationIdentifier,\r\n\t\t\t\t\tshowName: vm.purchaseOrder.accountingCustomerAddressName !== vm.purchaseOrder.accountingCustomerName\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (vm.accountingCustomerAddress.showName === false) {\r\n\t\t\t\t\tvm.accountingCustomerAddress.Name = '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.accountingCustomerAddress.isVisible = checkObjectSectionIsVisible(vm.accountingCustomerAddress, ['Name']);\r\n\t\t\t}\r\n\r\n\t\t\tfunction checkObjectSectionIsVisible(object, additionalIgnored) {\r\n\r\n\t\t\t\tvar ignoredProperties = ['showName'];\r\n\r\n\t\t\t\tif (util.isArray(additionalIgnored)) {\r\n\r\n\t\t\t\t\tignoredProperties = _.union(ignoredProperties, additionalIgnored);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn util.isAnyObjectPropertyDefined(object, ignoredProperties);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* resolves country name by code\r\n\t\t\t*/\r\n\t\t\tfunction resolveCountryNameByCode(code) {\r\n\t\t\t\tvar country = _.find(vm.countries, function (item) {\r\n\t\t\t\t\treturn item.code === code;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (util.isDefined(country)) {\r\n\t\t\t\t\treturn country.name;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn code;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Splits the header allowancesCharges into two arrays\r\n\t\t\t*/\r\n\t\t\tfunction setAllowancesCharges() {\r\n\t\t\t\tvar results = _.partition(vm.purchaseOrder.allowanceCharges, function (ac) {\r\n\t\t\t\t\treturn ac.isCharge;\r\n\t\t\t\t});\r\n\t\t\t\tvm.charges = results[0];\r\n\t\t\t\tvm.allowances = results[1];\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t* Adds spinner to the page\r\n\t\t\t*/\r\n\t\t\tfunction showSpinner() {\r\n\t\t\t\tspinner = modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes spinner from the page\r\n\t\t\t*/\r\n\t\t\tfunction removeSpinner() {\r\n\t\t\t\tif (spinner) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn PurchaseOrderViewerController;\r\n\t}\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/viewer/purchaseOrderViewerController.js","//{CODE:EUP2H}\r\n// di.einvoicing.ui.portal.portal.purchaseOrders.viewer\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.provider('purchaseOrderViewerLinesConfigurator', PurchaseOrderViewerLinesConfiguratorProvider);\r\n\r\n\t\t/**\r\n\t\t * Manages purchase order details configuration and set up.\r\n\t\t */\r\n\t\tfunction PurchaseOrderViewerLinesConfiguratorProvider() {\r\n\t\t\tvar config = {\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar buttonsConfiguration = {};\r\n\r\n\t\t\t// Provider definition\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['authorizedObjectsFilter', 'CLIENT_ENUMS'];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP2H02E\", cfg, 'cfg');\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets required configuration for the grid.\r\n\t\t\t */\r\n\t\t\tfunction $get(authorizedObjectsFilter, clientEnums) {\r\n\t\t\t\tbuttonsConfiguration = {\r\n\t\t\t\t\ttype: \"Order\",\r\n\t\t\t\t\tvisibleButtons: [],\r\n\t\t\t\t\tbuttonsSetOne: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tname: 'accept',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.accept,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tname: 'reject',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.reject,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tname: 'delivered',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsDelivered,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tname: 'notDelivered',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsNotDelivered,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tname: 'shipped',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsShipped,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tname: 'notShipped',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsNotShipped,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tname: 'invoiced',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.markAsInvoiced,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tname: 'cancelOrder',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.cancelPurchaseOrder,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tname: 'close',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.close,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tbuttonsSetTwo: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'render',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.downloadPurchaseOrder,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'downloadCsv',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.downloadAsCsv,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t},\r\n                        {\r\n                            rights: [\"PurchaseOrderReader\"],\r\n                            name: 'viewHistory',\r\n                            action: clientEnums.userActions.viewHistoryPurchaseOrder,\r\n                            attributesRequired: [\"current\"]\r\n                        },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"PurchaseOrderReader\"],\r\n\t\t\t\t\t\t\tname: 'related',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.viewRelatedDocumentsPurchaseOrder,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tbuttonsSetThree: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"PurchaseOrderFlipper\"],\r\n\t\t\t\t\t\t\tname: 'flipLarge',\r\n\t\t\t\t\t\t\taction: clientEnums.userActions.flip,\r\n\t\t\t\t\t\t\tattributesRequired: [\"current\"]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgetButtonsSetOneConfiguration: getButtonsSetOneConfiguration,\r\n\t\t\t\t\tgetButtonsSetTwoConfiguration: getButtonsSetTwoConfiguration,\r\n\t\t\t\t\tgetButtonsSetThreeConfiguration: getButtonsSetThreeConfiguration\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets buttons set one configuration\t\t\t\t \r\n\t\t\t\t */\r\n\t\t\t\tfunction getButtonsSetOneConfiguration() {\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetOne);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets buttons set two configuration\t\t\t\t \r\n\t\t\t\t */\r\n\t\t\t\tfunction getButtonsSetTwoConfiguration() {\r\n\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetTwo);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets buttons set three configuration\t\t\t\t \r\n\t\t\t\t */\r\n\t\t\t\tfunction getButtonsSetThreeConfiguration() {\r\n\r\n\t\t\t\t\treturn getConfiguration(buttonsConfiguration.buttonsSetThree);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * gets buttons configuration\t\t\t\t \r\n\t\t\t\t */\r\n\t\t\t\tfunction getConfiguration(array) {\r\n\t\t\t\t\tauthorizedObjectsFilter.requireRights(true);\r\n\r\n\t\t\t\t\tvar configuration = {\r\n\t\t\t\t\t\ttype: \"Order\",\r\n\t\t\t\t\t\tvisibleButtons: []\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconfiguration.visibleButtons.fill(authorizedObjectsFilter.getAuthorizedObjects(array, true));\r\n\t\t\t\t\treturn configuration;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn PurchaseOrderViewerLinesConfiguratorProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/purchaseOrders/viewer/purchaseOrderViewerLinesConfigurator.js","define([\r\n\t'./_states',\r\n\t'./lists/_loader',\r\n    './related-documents/_loader'\r\n], function(\r\n\tstatesLoader,\r\n\tlistsLoader,\r\n    relatedDocumentsLoader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tstatesLoader(module);\r\n\t\tlistsLoader(module);\r\n\t    relatedDocumentsLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/_loader.js","//{CODE:EUP5S}\r\n// di.einvoicing.ui.portal.portal.audit\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.config(configureRelatedDocumentsStates);\r\n\r\n\t\tconfigureRelatedDocumentsStates.$inject = ['stateHelperProvider'];\r\n\r\n\t\tfunction configureRelatedDocumentsStates(stateHelperProvider) {\r\n\t\t\tstateHelperProvider.addStates({\r\n\t\t\t\ttemplateBaseUrl: \"src/app/portal/related/_states\",\r\n\t\t\t\tparentStateName: 'portal.related',\r\n\t\t\t\tstates: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateName: \"list\",\r\n\t\t\t\t\t\turl: 'document/{id:int}',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tid: 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/_states.js","//{CODE:EUP6U}\r\n// di.einvoicing.ui.portal.portal.related.lists.components\r\ndefine([\r\n\t'./_snippets/_loader',\r\n\t'./relatedList/relatedListDirective'\r\n], function(\r\n\tsnippetsLoader,\r\n\trelatedListDirectiveLoader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tsnippetsLoader(module);\r\n\t\trelatedListDirectiveLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/lists/_components/_loader.js","//{CODE:EUP6S}\r\n// di.einvoicing.ui.portal.portal.related.lists.components.snippets\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar snippetContext = $di.angular.snippetRegistrar.createContext(\r\n\t\t\tmodule,\r\n\t\t\t'src/app/portal/related/lists/_components/_snippets');\r\n\r\n\t\tsnippetContext.registerSnippet('diRelatedActionButtons', 'relatedActionButtons.html');\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/lists/_components/_snippets/_loader.js","//{CODE:EUP6T}\r\n// di.einvoicing.ui.portal.portal.related.lists\r\ndefine(['angular'], function(ng) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.directive('diRelatedList', diRelatedList);\r\n\r\n\t\tfunction diRelatedList() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\tscope: {},\r\n\t\t\t\tcontroller: \"RelatedListController\",\r\n\t\t\t\tcontrollerAs: \"relatedListCtrl\",\r\n\t\t\t\ttemplateUrl: 'src/app/portal/related/lists/_components/relatedList/relatedList.html'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diRelatedList;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/lists/_components/relatedList/relatedListDirective.js","//{CODE:EUP6P}\r\n// di.einvoicing.ui.portal.portal.related.lists\r\ndefine([\r\n\t'./_components/_loader',\r\n\t'./relatedListController',\r\n\t'./relatedListConfigurator'\r\n], function(\r\n\tcomponentsLoader,\r\n\trelatedListControllerLoader,\r\n\trelatedListConfiguratorLoader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tcomponentsLoader(module);\r\n\t\trelatedListControllerLoader(module);\r\n\t\trelatedListConfiguratorLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/lists/_loader.js","//{CODE:EUP5T}\r\n// di.einvoicing.ui.portal.portal.related.lists\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('relatedListConfigurator', relatedListConfigurator);\r\n\r\n\t\trelatedListConfigurator.$inject = ['authorizedObjectsFilter'];\r\n\r\n\t\t/**\r\n\t\t * Manages audit list configuration and set up.\r\n\t\t */\r\n\t\tfunction relatedListConfigurator(authorizedObjectsFilter) {\r\n\t\t\tvar buttonsConfiguration = {\r\n\t\t\t\ttype: \"RELATED\",\r\n\t\t\t\tvisibleButtons: [],\r\n\t\t\t\tbuttons: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\t\tstatesRequired: ['VIEWABLE'],\r\n\t\t\t\t\t\tname: 'view'\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t};\r\n\r\n\t\t\treturn {\r\n\t\t\t\tgetButtonsConfiguration: getButtonsConfiguration\r\n\t\t\t};\r\n\r\n\t\t\tfunction getButtonsConfiguration() {\r\n\t\t\t\tauthorizedObjectsFilter.requireRights(true);\r\n\t\t\t\tbuttonsConfiguration.visibleButtons.fill(authorizedObjectsFilter.getAuthorizedObjects(buttonsConfiguration.buttons, true));\r\n\t\t\t\treturn buttonsConfiguration;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn relatedListConfigurator;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/lists/relatedListConfigurator.js","//{CODE:EUP6R}\r\n// di.einvoicing.ui.portal.portal.related.lists\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('RelatedListController', RelatedListController);\r\n\r\n\t\tRelatedListController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'diState',\r\n\t\t\t'$stateParams',\r\n\t\t\t'translator',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'authorizedObjectsFilter',\r\n\t\t\t'relatedListConfigurator',\r\n\t\t\t'documentTypeResolver',\r\n\t\t\t'modalSpinner'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * Manages and configure audit list grid.\t\t\r\n\t\t */\r\n\t\tfunction RelatedListController(\r\n\t\t\tscope,\r\n\t\t\tdiState,\r\n\t\t\tstateParams,\r\n\t\t\ttranslator,\r\n\t\t\tclientEnums,\r\n\t\t\tenumTranslator,\r\n\t\t\tauthorizedObjectsFilter,\r\n\t\t\trelatedListConfigurator,\r\n\t\t\tdocumentTypeResolver,\r\n\t\t\tmodalSpinner) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvm.actionButtonsOptions = {};\r\n\t\t\tvm.document = {};\r\n\t\t\tvm.labels = {};\r\n\t\t\tvm.documents = [];\r\n\t\t\tvm.selectedStates = [];\r\n\r\n\t\t\tvm.viewRelatedDocument = viewRelatedDocument;\r\n\t\t\tvm.viewCurrentDocument = viewCurrentDocument;\r\n\t\t\tvm.documentsLoaded = documentsLoaded;\r\n\t\t\tvm.documentLinkClicked = documentLinkClicked;\r\n\t\t\tvm.documentLinkDoubleClicked = documentLinkDoubleClicked;\r\n\t\t\tvm.onSelectedChanged = onSelectedChanged;\r\n\t\t\tvar spinner;\r\n\t\t\tinitialise();\r\n\t\t\t\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Initialises the audits table by configuring it and getting initial set of data.\r\n\t\t\t */\r\n\t\t\tfunction initialise() {\r\n\r\n\t\t\t\tshowSpinner();\r\n\r\n\t\t\t\tsetLabels();\r\n\r\n\t\t\t\tvm.actionButtonsOptions = relatedListConfigurator.getButtonsConfiguration();\r\n\r\n\t\t\t\tsetDetails();\r\n\t\t\t\t\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction setDetails() {\r\n\t\t\t\t\tif (util.isNumber(stateParams.id)) {\r\n\t\t\t\t\t\tvm.document.id = stateParams.id;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * sets labels values depending on user rights           \r\n\t\t\t\t */\r\n\t\t\t\tfunction setLabels() {\r\n\t\t\t\t\tvar data = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\t\t\tkey: \"title\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.RELATED.LISTS.HEADER.TITLE\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"invoice\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.RELATED.LISTS.HEADER.TYPE.SUPPLIER_INVOICE\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tkey: \"invoice\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.RELATED.LISTS.HEADER.TYPE.BUYER_INVOICE\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\t\tkey: \"order\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.RELATED.LISTS.HEADER.TYPE.SUPPLIER_ORDER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\t\tkey: \"order\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.RELATED.LISTS.HEADER.TYPE.BUYER_ORDER\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trights: [\"User\"],\r\n\t\t\t\t\t\t\tkey: \"grn\",\r\n\t\t\t\t\t\t\tlabel: \"EINVOICING.PORTAL.RELATED.LISTS.HEADER.TYPE.GRN\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t    translator.whenReady()\r\n\t\t\t\t        .then(function() {\r\n\t\t\t\t            _.each(data, function (item) {\r\n\t\t\t\t                item.label = translator.instantTranslate(item.label);\r\n\t\t\t\t            });\r\n\r\n\t\t\t\t            vm.labels = authorizedObjectsFilter.getAuthorizedObjectsAsAssociative(data, 'key', 'label');\r\n\t\t\t\t        });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Navigates to related document\t\t \r\n\t\t\t */\r\n\t\t\tfunction viewRelatedDocument() {\r\n\t\t\t\tvar selectedDocument = getSelectedDocument();\r\n\t\t\t\tselectedDocument.id = selectedDocument.headerId;\r\n\t\t\t\tgoToDocument(selectedDocument);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Navigates to current document\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction viewCurrentDocument() {\r\n\t\t\t\tgoToDocument(vm.document);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Documents loaded\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction documentsLoaded(model) {\r\n\t\t\t\tvm.documents.fill(model.relatedDocuments);\r\n\t\t\t\tvm.document.number = model.number;\r\n\t\t\t\tvm.document.documentType = model.documentType;\r\n\t\t\t\tvm.document.id = model.headerId;\r\n\r\n\t\t\t\tvar typeKey = documentTypeResolver.getTypeKeyById(vm.document.documentType);\r\n\r\n\t\t\t    translator.translate(vm.labels[typeKey])\r\n\t\t\t        .then(function(translated) {\r\n\t\t\t            vm.labels.summaryTitle = translated;\r\n\r\n\t\t\t            vm.labels.summaryTitle += ' [' + vm.document.number + ']';\r\n\t\t\t        });\r\n\r\n                removeSpinner();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for document link clicked\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction documentLinkClicked(item) {\r\n\t\t\t\tonSelectedChanged([item]);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for document link double clicked\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction documentLinkDoubleClicked(item) {\r\n\t\t\t\titem.id = item.headerId;\r\n\t\t\t\tgoToDocument(item);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler when rows selection changes                          \r\n\t\t\t */\r\n\t\t\tfunction onSelectedChanged(items) {\r\n\t\t\t\tvar array = [];\r\n\t\t\t\t_.each(items, function(item) {\r\n\t\t\t\t\tif (item.isSelected) {\r\n\t\t\t\t\t\tarray.push(\"VIEWABLE\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvm.selectedStates.fill(array);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Returns selected document\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction getSelectedDocument() {\r\n\t\t\t\tvar selectedRows = getCurrentlySelectedDocuments();\r\n\r\n\t\t\t\tif (selectedRows.length === 1) {\r\n\t\t\t\t\treturn selectedRows[0];\r\n\t\t\t\t}\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Returns all selected documents\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction getCurrentlySelectedDocuments() {\r\n\t\t\t\tvar selectedRows = [];\r\n\r\n\t\t\t\tvm.documents.forEach(\r\n\t\t\t\t\tfunction addToSelected(item) {\r\n\t\t\t\t\t\tif (item.isSelected === true) {\r\n\t\t\t\t\t\t\tselectedRows.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn selectedRows;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Navigates to document details page\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction goToDocument(selectedDocument) {\r\n\t\t\t\tif (util.isUndefined(selectedDocument.id)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (selectedDocument.documentType) {\r\n\t\t\t\tcase clientEnums.documentType.invoice:\r\n\t\t\t\t\tdiState.go('portal.invoices.viewById', { id: selectedDocument.id });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase clientEnums.documentType.purchaseOrder:\r\n\t\t\t\t\tdiState.go('portal.orders.viewById', { id: selectedDocument.id });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase clientEnums.documentType.goodsReceiptNote:\r\n\t\t\t\t\tdiState.go('portal.grn.viewById', { id: selectedDocument.id });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t * Adds spinner to the page\t\t\t \r\n\t\t */\r\n\t\t\tfunction showSpinner() {\r\n\t\t\t\tspinner = modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes spinner from the page\r\n\t\t\t*/\r\n\t\t\tfunction removeSpinner() {\r\n\t\t\t\tif (spinner) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn RelatedListController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/lists/relatedListController.js","define([\r\n\t'./related-documents.controller',\r\n\t'./related-documents.directive',\r\n\t'./related-documents-configurator.provider'\r\n], function(\r\n\trelatedDocumentsControllerLoader,\r\n\trelatedDocumentsDirectiveLoader,\r\n\trelatedDocumentsConfiguratorLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\trelatedDocumentsControllerLoader(module);\r\n\t\trelatedDocumentsDirectiveLoader(module);\r\n\t\trelatedDocumentsConfiguratorLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/related-documents/_loader.js","//{CODE:EUP6K}\r\n// di.einvoicing.ui.portal.portal.invoices.lists\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.provider('relatedDocumentsConfigurator', RelatedDocumentsConfiguratorProvider);\r\n\r\n\t\t/**\r\n\t\t * Manages invoice list configuration and set up.\r\n\t\t */\r\n\t\tfunction RelatedDocumentsConfiguratorProvider() {\r\n\t\t\tvar config = {};\r\n\r\n\t\t\t// Grid columns configuration\r\n\t\t\tvar columnDefinitions = [\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['User'],\r\n\t\t\t\t\tfield: 'number',\r\n\t\t\t\t\tnameLanguageKey: 'DOCUMENT NUMBER',\r\n\t\t\t\t\ttemplate: '<span>{{binding.number}}</span>'\r\n\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['User'],\r\n\t\t\t\t\tfield: 'date',\r\n\t\t\t\t\tnameLanguageKey: 'DATE',\r\n\t\t\t\t\ttemplate: '<span>{{ binding.date | diDate }}</span>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['User'],\r\n\t\t\t\t\tfield: 'total',\r\n\t\t\t\t\tnameLanguageKey: 'TOTAL',\r\n\t\t\t\t\ttemplate: '<span>{{binding.formattedTotal}}</span>',\r\n\t\t\t\t\tcellClass: 'numericcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['User'],\r\n\t\t\t\t\tfield: 'calculatedState',\r\n\t\t\t\t\tnameLanguageKey: 'STATE',\r\n\t\t\t\t\ttemplate: '<span>{{binding.calculatedState}}</span>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trights: ['User'],\r\n\t\t\t\t\tfield: 'documentTypeName',\r\n\t\t\t\t\tnameLanguageKey: 'TYPE',\r\n\t\t\t\t\ttemplate: '<span>{{binding.documentTypeName}}</span>',\r\n\t\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\t// Provider definition\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\tprovider.$get.$inject = ['authorizedObjectsFilter'];\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP6K02E\", cfg, 'cfg');\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets required configuration for the grid.\r\n\t\t\t */\r\n\t\t\tfunction $get(authorizedObjectsFilter) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgetTableConfiguration: getTableConfiguration\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets grid configuration options.\r\n\t\t\t\t */\r\n\t\t\t\tfunction getTableConfiguration() {\r\n\t\t\t\t\tconfig.columns = authorizedObjectsFilter.getAuthorizedObjects(columnDefinitions, false);\r\n\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn RelatedDocumentsConfiguratorProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/related-documents/related-documents-configurator.provider.js","//{CODE:EUP6H}\r\n// di.einvoicing.ui.portal.components.relateddocuments\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('RelatedDocumentsController', RelatedDocumentsController);\r\n\r\n\t\tRelatedDocumentsController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'$filter',\r\n\t\t\t'documentProxy',\r\n\t\t\t'translator',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'relatedDocumentsConfigurator',\r\n\t\t\t'documentStateResolver',\r\n\t\t\t'documentTypeResolver',\r\n\t\t\t'notificationHandler'\r\n\t\t];\r\n\r\n\t\tfunction RelatedDocumentsController(\r\n\t\t\tscope,\r\n\t\t\t$filter,\r\n\t\t\tdocumentProxy,\r\n\t\t\ttranslator,\r\n\t\t\tclientEnums,\r\n\t\t\tconfigurator,\r\n\t\t\tdocumentStateResolver,\r\n\t\t\tdocumentTypeResolver,\r\n\t\t\tnotificationHandler) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvm.showControl = false;\r\n\t\t\tvm.documentId = 0;\r\n\t\t\tvm.documents = [];\r\n\t\t\tvm.relatedResponse = {};\r\n\t\t\tvm.tableOptions = {};\r\n\r\n\t\t\tvm.loadDocuments = loadDocuments;\r\n\t\t\tvm.linkClicked = linkClicked;\r\n\t\t\tvm.linkDoubleClicked = linkDoubleClicked;\r\n\t\t\tvm.documentsLoaded = documentsLoaded;\r\n\r\n\t\t\tinit();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t* initialises the controller\t\t\t\t\r\n\t\t\t*/\r\n\t\t\tfunction init() {\r\n\t\t\t\tvar unwatch = scope.$watch('id', function(id) {\r\n\t\t\t\t\tif (util.isDefined(id)) {\r\n\t\t\t\t\t\tvm.documentId = id;\r\n\r\n\t\t\t\t\t\tvm.tableOptions = configurator.getTableConfiguration();\r\n\r\n\t\t\t\t\t\tloadDocuments();\r\n\r\n\t\t\t\t\t\tunwatch();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Loads related documents\t\t\t\t\r\n\t\t\t*/\r\n\t\t\tfunction loadDocuments() {\r\n\t\t\t\tdocumentProxy\r\n\t\t\t\t\t.getRelatedDocuments(\r\n\t\t\t\t\t\tvm.documentId)\r\n\t\t\t\t\t.then(resolved, rejected);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tif (util.isArray(data.relatedDocuments)) {\r\n\t\t\t\t\t\tformatDocumentData(data.relatedDocuments);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar array = [data.relatedDocuments];\r\n\t\t\t\t\t\tformatDocumentData(array);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvm.documents.fill(data.relatedDocuments);\r\n\r\n\t\t\t\t\tvm.tableOptions.data.fill(data.relatedDocuments);\r\n\t\t\t\t\tvm.relatedResponse = data;\r\n\t\t\t\t\tdocumentsLoaded();\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Formats array by resolving calculated properties\t\t\t\t\t \r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction formatDocumentData(array) {\r\n\t\t\t\t\t\t_.each(array, function(document) {\r\n\t\t\t\t\t\t\tvar type = documentTypeResolver.getTypeKeyById(document.documentType);\r\n\r\n\t\t\t\t\t\t\tvar currencyFilter = $filter('diCurrency');\r\n\r\n\t\t\t\t\t\t\tif (document.currencyId !== 0) {\r\n\t\t\t\t\t\t\t\tdocument.formattedTotal = currencyFilter(document.total, document.currencyId);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t    translator.translate('EINVOICING.PORTAL.RELATED.LISTS.HEADER.NOTAVAILABLE')\r\n\t\t\t\t\t\t\t        .then(function(translated) {\r\n\t\t\t\t\t\t\t            document.formattedTotal = translated;\r\n\t\t\t\t\t\t\t        });\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t    documentTypeResolver.resolveDocumentType(document.documentType)\r\n\t\t\t\t\t\t        .then(function(resolved) {\r\n\t\t\t\t\t\t            document.documentTypeName = resolved;\r\n\t\t\t\t\t\t        });\r\n                            \r\n\t\t\t\t\t\t    documentStateResolver.calculateCurrentState(type, document.state, true)\r\n\t\t\t\t\t\t        .then(function(state) {\r\n\t\t\t\t\t\t            document.calculatedState = state;\r\n\t\t\t\t\t\t        });\r\n\t\t\t\t\t\t\t ;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    notificationHandler.showError(error.failureReason);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for related document link clicked event\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction linkClicked(item) {\r\n\t\t\t\tif (scope.onDocumentLinkClicked) {\r\n\t\t\t\t\tscope.onDocumentLinkClicked(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for related document link double clicked event\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction linkDoubleClicked(item) {\r\n\t\t\t\tif (scope.onDocumentLinkDoubleClicked) {\r\n\t\t\t\t\tscope.onDocumentLinkDoubleClicked(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Handler for related documents loaded event\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction documentsLoaded() {\r\n\t\t\t\tif (scope.onDocumentsLoaded) {\r\n\t\t\t\t\tscope.onDocumentsLoaded(vm.relatedResponse);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn RelatedDocumentsController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/related-documents/related-documents.controller.js","//{CODE:EUP6I}\r\n// di.einvoicing.ui.portal.components.relateddocuments\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.directive('diRelatedDocuments', diRelatedDocuments);\r\n\r\n\t\tfunction diRelatedDocuments() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tid: \"=\",\r\n\t\t\t\t\tonDocumentsLoaded: \"=\",\r\n\t\t\t\t\tonDocumentLinkClicked: \"=\",\r\n\t\t\t\t\tonDocumentLinkDoubleClicked: \"=\"\r\n\t\t\t\t},\r\n\t\t\t\ttemplateUrl: 'src/app/portal/related/related-documents/related-documents.html',\r\n\t\t\t\tcontroller: \"RelatedDocumentsController\",\r\n\t\t\t\tcontrollerAs: \"relatedDocumentsCtrl\"\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diRelatedDocuments;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/related/related-documents/related-documents.directive.js","define([\r\n\t'./components/_loader',\r\n\t'./services/_loader',\r\n    './services/button-state-resolver/_loader',\r\n    './services/document-attribute-resolver/_loader',\r\n    './services/file-extension-validator/_loader',\r\n    './services/document-type-resolver/_loader'\r\n], function(\r\n\tcomponentsLoader,\r\n\tservicesLoader,\r\n    buttonStateResolverLoader,\r\n    documentAttributeResolverLoader,\r\n    fileExtensionValidatorLoader,\r\n    documentTypeResolverLoader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tcomponentsLoader(module);\r\n\t\tservicesLoader(module);\r\n\t\tbuttonStateResolverLoader(module);\r\n\t\tdocumentAttributeResolverLoader(module);\r\n\t\tfileExtensionValidatorLoader(module);\r\n\t    documentTypeResolverLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/_loader.js","define([\r\n    './action-buttons/_loader',\r\n    './address-view-details/_loader',\r\n    './contact-view-details/_loader',\r\n    './date-selector/_loader',\r\n    './additional-document-references/_loader',\r\n    './document-state-selector/_loader',\r\n    './document-state-display/_loader',\r\n    './legal-view-details/_loader',\r\n    './party-view-details/_loader',\r\n    './address-edit-details/_loader',\r\n    './contact-details/_loader',\r\n    './set-focus/_loader'\r\n], function(\r\n\tactionButtonsLoader,\r\n    addressViewDetailsLoader,\r\n    contactViewDetailsLoader,\r\n    dateSelectorLoader,\r\n    additionalDocumentReferencesLoader,\r\n    documentStateSelectorLoader,\r\n    documentStateDisplayLoader,\r\n    legalViewDetailsLoader,\r\n    partyViewDetailsLoader,\r\n    addressEditDetailsLoader,\r\n    contactDetailsLoader,\r\n    setFocusLoader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    actionButtonsLoader(module);\r\n\t    addressViewDetailsLoader(module);\r\n\t    contactViewDetailsLoader(module);\r\n\t    dateSelectorLoader(module);\r\n\t    additionalDocumentReferencesLoader(module);\r\n\t    documentStateSelectorLoader(module);\r\n\t    documentStateDisplayLoader(module);\r\n\t    legalViewDetailsLoader(module);\r\n\t    partyViewDetailsLoader(module);\r\n\t    addressEditDetailsLoader(module);\r\n\t    contactDetailsLoader(module);\r\n        setFocusLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/_loader.js","define([\r\n    './action-buttons.controller',\r\n    './action-buttons.directive',\r\n    './stateful-button/_loader'\r\n], function(\r\n    actionButtonsControllerLoader,\r\n    diActionButtonsDirectiveLoader,\r\n    statefulButtonLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        statefulButtonLoader(module);\r\n        actionButtonsControllerLoader(module);\r\n        diActionButtonsDirectiveLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/action-buttons/_loader.js","//{CODE:EUP04}\r\n// di.einvoicing.ui.portal.portal.components.actionbuttons\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.controller('ActionButtonsController', ActionButtonsController);\r\n\r\n        ActionButtonsController.$inject = [\r\n            '$scope',\r\n            'buttonStateResolver',\r\n            'formAnalyser'\r\n        ];\r\n\r\n        function ActionButtonsController(\r\n            scope,\r\n            buttonStateResolver,\r\n            formAnalyser) {\r\n            var vm = this;\r\n            vm.useActions = false;\r\n            vm.loaded = false;\r\n            vm.type = {};\r\n            vm.buttons = [];\r\n            vm.buttonClick = buttonClick;\r\n            vm.buttonPreSaveInvoiceClick = buttonPreSaveInvoiceClick;\r\n            vm.buttonPreCreateUserClick = buttonPreCreateUserClick;\r\n            vm.getFromConfiguration = getFromConfiguration;\r\n\r\n            var deregisterWatchListItemsCount = function () { };\r\n            var deregisterWatchUserActions = function () { };\r\n            var deregisterContextAttributes = function () { };\r\n            var deregisterWatchContextStates = function () { };\r\n\r\n            init();\r\n            tearDown();\r\n\r\n            return;\r\n\r\n            /**\r\n\t\t\t * initialization             \r\n\t\t\t */\r\n            function init() {\r\n                if (util.isDefined(scope.configuration)) {\r\n                    loadConfiguration();\r\n                    watchItems();\r\n                }\r\n\r\n                return;\r\n\r\n                function watchItems() {\r\n                    if (util.isDefined(scope.userActions)) {\r\n                        vm.useActions = true;\r\n                        deregisterWatchListItemsCount = scope.$watchCollection('listItemsCount', setUp);\r\n                        deregisterWatchUserActions = scope.$watchCollection('userActions', setUp);\r\n                        deregisterContextAttributes = scope.$watchCollection('contextAttributes', setUp);\r\n                    } else {\r\n                        deregisterWatchContextStates = scope.$watchCollection('contextStates', function () {\r\n                            deregisterWatchUserActions = scope.$watchCollection('contextAttributes', setUp);\r\n                        });\r\n                    }\r\n                }\r\n\r\n                function loadConfiguration() {\r\n                    vm.type = scope.configuration.type;\r\n\r\n                    _.each(scope.configuration.visibleButtons, function (button) {\r\n                        vm.buttons.push(button);\r\n                    });\r\n                }\r\n\r\n\r\n                /**\r\n\t\t\t\t* sets button states\r\n\t\t\t\t*/\r\n                function setUp() {\r\n                    var primaryActionsContext = [];\r\n                    var secondaryActionsContext = [];\r\n                    var primaryStatesContext = [];\r\n                    var secondaryStatesContext = [];\r\n                    var primaryAttributesContext = [];\r\n                    var secondaryAttributesContext = [];\r\n\r\n                    var canSetupButtons = false;\r\n                    var dataLoaded = false;\r\n\r\n                    if (vm.useActions) {\r\n                        dataLoaded = trySetPrimaryAndSecondaryContexts(scope.userActions, primaryActionsContext, secondaryActionsContext);\r\n                        canSetupButtons = canSetupBasedOnActions(dataLoaded);\r\n                    } else {\r\n                        dataLoaded = trySetPrimaryAndSecondaryContexts(scope.contextStates, primaryStatesContext, secondaryStatesContext);\r\n                        canSetupButtons = canSetupBasedOnStates(dataLoaded);\r\n                    }\r\n\r\n                    trySetPrimaryAndSecondaryContexts(scope.contextAttributes, primaryAttributesContext, secondaryAttributesContext);\r\n                    setStates();\r\n\r\n                    return;\r\n\r\n                    /*\r\n\t\t\t\t\t * Sets the states of the buttons \r\n\t\t\t\t\t */\r\n                    function setStates() {\r\n                        if (canSetupButtons) {\r\n\r\n                            _.each(vm.buttons, function (button) {\r\n                                setButtonState(button);\r\n                            });\r\n\r\n                            if (scope.displayControl) {\r\n                                scope.displayControl();\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    /**\r\n\t\t\t\t\t * Handles displaying control before data is loaded             \r\n\t\t\t\t\t */\r\n                    function canSetupBasedOnActions(actionsLoaded) {\r\n                        if (util.isUndefined(scope.waitForData) || scope.waitForData === false) {\r\n                            return true;\r\n                        }\r\n\r\n                        return actionsLoaded;\r\n                    }\r\n\r\n                    function canSetupBasedOnStates(statesLoaded) {\r\n                        if (util.isUndefined(scope.waitForStates) || scope.waitForStates === false) {\r\n                            return true;\r\n                        }\r\n\r\n                        return statesLoaded;\r\n                    }\r\n\r\n                    /**\r\n\t\t\t\t\t * sets if button is visible / enabled\r\n\t\t\t\t\t */\r\n                    function setButtonState(button) {\r\n                        var visibleName = button.name + \"Visible\";\r\n                        var enabledName = button.name + \"Enabled\";\r\n\r\n                        var listItemsCount = getListItemsCount(button);\r\n                        var enabled = false;\r\n                        var context;\r\n\r\n                        if (vm.useActions) {\r\n                            context = selectContext(button, primaryActionsContext, secondaryActionsContext);\r\n                            enabled = buttonStateResolver.isEnabledForActions(button, context, listItemsCount);\r\n                        } else {\r\n                            context = selectContext(button, primaryStatesContext, secondaryStatesContext);\r\n                            enabled = buttonStateResolver.isEnabledForStates(button, context, util.isDefined(button.requireAllStates) ? button.requireAllStates : scope.requireAllStates);\r\n                        }\r\n\r\n                        if (enabled) {\r\n\r\n                            context = selectContext(button, primaryAttributesContext, secondaryAttributesContext);\r\n                            enabled = buttonStateResolver.isAttributeEnabled(button, context);\r\n                        }\r\n\r\n                        scope[enabledName] = enabled;\r\n                        button.isEnabled = enabled;\r\n\r\n                        if (!enabled && button.denyStyle === 'hidden') {\r\n                            scope[visibleName] = false;\r\n                        } else {\r\n                            scope[visibleName] = true;\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            /**\r\n            *  Destroy all state, any event listeners and subscriptions\r\n            */\r\n            function tearDown() {\r\n                scope.$on('$destroy', function () {\r\n                    deregisterWatchListItemsCount();\r\n                    deregisterWatchUserActions();\r\n                    deregisterContextAttributes();\r\n                    deregisterWatchContextStates();\r\n                });\r\n            }\r\n\r\n            /**\r\n\t\t\t * Gets the listItemsCount number from the object on the scope\r\n\t\t\t */\r\n            function getListItemsCount(button) {\r\n                if (util.isNumber(scope.listItemsCount)) {\r\n                    return scope.listItemsCount;\r\n                }\r\n                if (util.isRealObject(scope.listItemsCount)) {\r\n                    return selectContext(button, scope.listItemsCount.primary, scope.listItemsCount.secondary);\r\n                }\r\n                return 0;\r\n            }\r\n\r\n            /**\r\n\t\t\t * Selects the secondary context when the primary context is not set and the button specifies to fallback on secondary context\r\n\t\t\t * Selects the primary context otherwise\r\n\t\t\t */\r\n            function selectContext(button, primaryContext, secondaryContext) {\r\n                if (button.fallbackOnSecondaryContext\r\n                    && (\r\n                        (util.isArray(primaryContext) && primaryContext.length == 0)\r\n                        || (util.isNumber(primaryContext) && primaryContext <= 0)\r\n                    )\r\n                ) {\r\n                    return secondaryContext;\r\n                }\r\n                return primaryContext;\r\n            }\r\n\r\n            /**\r\n\t\t\t * Fills in the given primaryContext and secondaryContext arrays with data from the contextObject param\r\n\t\t\t * Assumes the arrays are initialised before they are passed in\r\n\t\t\t * Returns true if the primary context is not empty, false otherwise\t\t\t\r\n\t\t\t */\r\n            function trySetPrimaryAndSecondaryContexts(contextObject, primaryContext, secondaryContext) {\r\n                primaryContext.clear();\r\n                secondaryContext.clear();\r\n\r\n                if (util.isArray(contextObject)) {\r\n                    primaryContext.fill(contextObject);\r\n                } else if (util.isRealObject(contextObject)) {\r\n                    if (util.isDefined(contextObject.primary)) {\r\n                        primaryContext.fill(contextObject.primary);\r\n                    }\r\n                    if (util.isDefined(contextObject.secondary)) {\r\n                        secondaryContext.fill(contextObject.secondary);\r\n                    }\r\n                }\r\n                return primaryContext.length > 0;\r\n            }\r\n\r\n            /**\r\n\t\t\t* Event handler for submit button click             \r\n\t\t\t*/\r\n            function buttonClick(eventName, submit) {\r\n                var eventActionName = \"button\" + toTitleCase(eventName) + \"Click\";\r\n\r\n                if (submit) {\r\n                    var formToSubmit = formAnalyser.getFormInstance(scope);\r\n                    if (formToSubmit) {\r\n                        formToSubmit.$setSubmitted(true);\r\n                    }\r\n                }\r\n\r\n                if (util.isFunction(scope[eventActionName])) {\r\n                    handleClick(scope[eventActionName]);\r\n                }\r\n\r\n                return;\r\n\r\n                function handleClick(action) {\r\n                    var enabledName = eventName + \"Enabled\";\r\n\r\n                    if (scope[enabledName] && action) {\r\n                        action();\r\n                    }\r\n                }\r\n\r\n                /**\r\n\t\t\t\t * Changes string to sentence case\t\t\t\t\r\n\t\t\t\t */\r\n                function toTitleCase(str) {\r\n                    return str.replace(/\\w\\S*/g, function (txt) { return txt.charAt(0).toUpperCase() + txt.substr(1); });\r\n                }\r\n            }\r\n\r\n            /**\r\n\t\t\t* Get the value from the configuration (useful when  dynamic data is used, eg user name)\r\n\t\t\t*/\r\n            function getFromConfiguration(configurationProperty, actionName, defaultValue) {\r\n                if (!util.isNullOrUndefined(scope.configuration)\r\n                    && !util.isNullOrUndefined(scope.configuration[configurationProperty])) {\r\n\r\n                    return scope.configuration[configurationProperty][actionName];\r\n                }\r\n\r\n                return defaultValue;\r\n            }\r\n\r\n            function buttonPreSaveInvoiceClick() {\r\n                if (scope.saveInvoiceEnabled && scope.buttonPreSaveInvoiceClick) {\r\n                    return scope.buttonPreSaveInvoiceClick();\r\n                }\r\n\r\n                return function () {\r\n                };\r\n            }\r\n\r\n            function buttonPreCreateUserClick() {\r\n                if (scope.createUserEnabled && scope.buttonPreCreateUserClick) {\r\n                    return scope.buttonPreCreateUserClick();\r\n                }\r\n\r\n                return function () {\r\n                };\r\n            }\r\n        }\r\n\r\n        return ActionButtonsController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/action-buttons/action-buttons.controller.js","//{CODE:EUP0F}\r\n// di.einvoicing.ui.portal.portal.components.actionbuttons\r\ndefine(['angular'],function(ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diActionButtons', diActionButtons);\r\n\t\t\r\n\t\tfunction diActionButtons() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tclassName: \"@\",\r\n\t\t\t\t\trequireAllStates:'=',\r\n\t\t\t\t\tcontextStates: \"=\",\r\n\t\t\t\t\tlistItemsCount: \"=\",\r\n\t\t\t\t\tuserActions:\"=\",\r\n\t\t\t\t\twaitForData: \"=\",\r\n\t\t\t\t\tcontextAttributes:\"=\",\r\n\t\t\t\t\tconfiguration:\"=\",\r\n\t\t\t\t\tbuttonEditClick: '&',\r\n\t\t\t\t\tbuttonEditBigClick: '&',\r\n\t\t\t\t\tbuttonViewClick: '&',\r\n\t\t\t\t\tbuttonRefreshClick: '&',\r\n\t\t\t\t\tbuttonFlipClick: '&',\r\n\t\t\t\t\tbuttonFlipLargeClick: '&',\r\n\t\t\t\t\tbuttonSubmitClick: '&',\r\n\t\t\t\t\tbuttonSubmitSmallClick: '&',\r\n\t\t\t\t\tbuttonRenderClick: '&',\r\n\t\t\t\t\tbuttonDownloadCsvClick: '&',\r\n\t\t\t\t\tbuttonEnableUserClick: '&',\r\n\t\t\t\t\tbuttonDisableUserClick: '&',\r\n\t\t\t\t\tbuttonUnlockUserClick: '&',\r\n\t\t\t\t\tbuttonLockUserClick: '&',\r\n\t\t\t\t\tbuttonAcceptClick: '&',\r\n\t\t\t\t\tbuttonRejectClick: '&',\r\n\t\t\t\t\tbuttonDisputeClick: '&',\r\n\t\t\t\t\tbuttonNotDisputeClick: '&',\r\n\t\t\t\t\tbuttonCancelInvoiceClick: '&',\r\n\t\t\t\t\tbuttonCancelOrderClick: '&',\r\n\t\t\t\t\tbuttonShippedClick: '&',\r\n\t\t\t\t\tbuttonNotShippedClick: '&',\r\n\t\t\t\t\tbuttonDeliveredClick: '&',\r\n\t\t\t\t\tbuttonNotDeliveredClick: '&',\r\n\t\t\t\t\tbuttonPaidClick: '&',\r\n\t\t\t\t\tbuttonNotPaidClick: '&',\r\n\t\t\t\t\tbuttonScheduledClick: '&',\r\n\t\t\t\t\tbuttonNotScheduledClick: '&',\r\n\t\t\t\t\tbuttonSaveUserClick: '&',\r\n\t\t\t\t\tbuttonSaveInvoiceClick: '&',\r\n\t\t\t\t\tbuttonSaveInvoiceSmallClick: '&',\r\n\t\t\t\t\tbuttonDeleteInvoiceClick: '&',\r\n\t\t\t\t\tbuttonDeleteSmallClick: '&',\r\n\t\t\t\t\tbuttonPreSaveInvoiceClick: '&',\r\n\t\t\t\t\tbuttonPreCreateUserClick: '&',\r\n\t\t\t\t\tbuttonViewHistoryClick: '&',\r\n\t\t\t\t\tbuttonCloseClick: '&',\r\n\t\t\t\t\tbuttonIssuesClick: '&',\r\n\t\t\t\t\tbuttonRelatedClick: '&',\r\n\t\t\t\t\tbuttonAttachmentsClick: '&',\r\n\t\t\t\t\tbuttonReleaseClick: '&',\r\n\t\t\t\t\tbuttonResetPasswordClick: '&',\r\n\t\t\t\t\tbuttonClearFiltersClick: '&',\r\n\t\t\t\t\tbuttonInvoicedClick: '&',\r\n\t\t\t\t\tbuttonCreateUserClick: '&',\r\n\t\t\t\t\tbuttonDeleteUserClick: '&',\r\n\t\t\t\t\tbuttonGeneratePasswordClick: '&'\r\n\t\t\t\t},\r\n\t\t\t\ttemplateUrl: 'src/app/portal/shared/components/action-buttons/action-buttons.html',\r\n\t\t\t\tcontroller: \"ActionButtonsController\",\r\n\t\t\t\tcontrollerAs: \"actionButtonsCtrl\",\r\n\t\t\t\tlink: link\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope, element) {\r\n\t\t\t\tscope.findElement = findElement;\r\n\r\n\t\t\t\tscope.displayControl = displayControl;\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction findElement(name) {\r\n\t\t\t\t\treturn ng.element(name);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction displayControl() {\t                \r\n\t\t\t\t\telement.parent().removeClass(\"buttons-hidden\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diActionButtons;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/action-buttons/action-buttons.directive.js","define([\r\n    './stateful-button.controller',\r\n    './stateful-button.directive'\r\n], function(\r\n    statefulButtonControllerLoader,\r\n    statefulButtonDirectiveLoader) {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n    \tstatefulButtonControllerLoader(module);\r\n        statefulButtonDirectiveLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/action-buttons/stateful-button/_loader.js","//{CODE:EUP6B}\r\n// di.einvoicing.ui.portal.components.statefulbutton\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('StatefulButtonController', StatefulButtonController);\r\n\r\n\t\tStatefulButtonController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'buttonStateResolver'\r\n\t\t];\r\n\r\n\t\tfunction StatefulButtonController(\r\n\t\t\tscope,\r\n\t\t\tbuttonStateResolver) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvm.useActions = false;\r\n\t\t\tvm.buttons = [];\r\n\t\t\tvm.showControl = false;\r\n\t\t\tvm.showDisabled = false;\r\n\t\t\t\r\n\t\t\tvm.buttonClick = buttonClick;\r\n\t\t\tvm.getImageProperties = getImageProperties;\r\n\t\t\t\r\n\t\t\tinit();\r\n\t\t\t\r\n\t\t\treturn;\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * initialization             \r\n\t\t\t */\r\n\t\t\tfunction init() {\r\n\t\t\t\tif (util.isDefined(scope.configuration)) {\r\n\t\t\t\t\tloadConfiguration();\r\n\t\t\t\t\twatchItems();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\t\t/**\r\n\t\t\t\t * sets watches on context items\t\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction watchItems() {\r\n\t\t\t\t\tif (util.isDefined(scope.userActions)) {\r\n\t\t\t\t\t\tvm.useActions = true;\r\n\t\t\t\t\t\tscope.$watchCollection('listItemsCount', setUp);\r\n\t\t\t\t\t\tscope.$watchCollection('userActions', setUp);\r\n\t\t\t\t\t\tscope.$watchCollection('contextAttributes', setUp);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tscope.$watchCollection('contextStates', function () {\r\n\t\t\t\t\t\t\tscope.$watchCollection('contextAttributes', setUp);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * loads configuration\t\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction loadConfiguration() {\r\n\t\t\t\t\tvar config = getStatefulConfiguration(scope.keys);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (config.length > 0) {\r\n\t\t\t\t\t\tvm.showControl = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_.each(config, function (button) {\r\n\t\t\t\t\t\tsetProperties(button);\r\n\t\t\t\t\t\tvm.buttons.push(button);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction setProperties(button) {\r\n\t\t\t\t\t\tbutton.image = getImageProperties(button).image;\r\n\t\t\t\t\t\tbutton.imageColour = getImageProperties(button).colour;\r\n\t\t\t\t\t\tbutton.tooltip = getActionTooltip(button.name);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Parses main configuration to get required buttons configuration\t\t\t\t\t\r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction getStatefulConfiguration(array) {\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn _.filter(scope.configuration.visibleButtons, function (button) {\r\n\t\t\t\t\t\t\tvar found = _.find(array, function(item) {\r\n\t\t\t\t\t\t\t\treturn button.name === item;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn util.isDefined(found);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * sets state of buttons on context changes\t\t\t\t \r\n\t\t\t\t */\r\n\t\t\t\tfunction setUp() {\t\t\t\t \r\n\t\t\t\t\tscope.isVisible = [];\r\n\t\t\t\t\t_.each(vm.buttons, function (button) {\r\n\t\t\t\t\t\tbutton.isVisible = setButtonState(button);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsetDisabledButtonState();\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * sets if button is visible / enabled                             \r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction setButtonState(button) {\r\n\t\t\t\t\t\tvar visibleName = button.name + \"Visible\";\r\n\r\n\t\t\t\t\t\tvar enabled;\r\n\t\t\t\t\t\tif (vm.useActions) {\r\n\t\t\t\t\t\t\tvar actions = scope.userActions;\r\n\t\t\t\t\t\t\tif (scope.userActions && scope.userActions.primary) {\r\n\t\t\t\t\t\t\t\tactions = scope.userActions.primary;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar listItemsCount = scope.listItemsCount;\r\n\r\n\t\t\t\t\t\t    if (scope.listItemsCount && scope.listItemsCount.primary) {\r\n\t\t\t\t\t\t        listItemsCount = scope.listItemsCount.primary;\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t    enabled = buttonStateResolver.isEnabledForActions(button, actions, listItemsCount);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar states = scope.contextStates;\r\n\t\t\t\t\t\t\tif (scope.contextStates && scope.contextStates.primary) {\r\n\t\t\t\t\t\t\t\tstates = scope.contextStates.primary;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tenabled = buttonStateResolver\r\n\t\t\t\t\t\t\t\t.isEnabledForStates(button, states, util.isDefined(button.requireAllStates) ? button.requireAllStates : scope.requireAllStates);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (enabled) {\r\n\t\t\t\t\t\t\tvar attributes = scope.contextAttributes;\r\n\t\t\t\t\t\t\tif (scope.contextAttributes && scope.contextAttributes.primary) {\r\n\t\t\t\t\t\t\t\tattributes = scope.contextAttributes.primary;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tenabled = buttonStateResolver\r\n\t\t\t\t\t\t\t\t.isAttributeEnabled(button, attributes);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!enabled) {\r\n\t\t\t\t\t\t\tscope[visibleName] = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tscope[visibleName] = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn scope[visibleName];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Sets disabled button state\t\t\t\t\t\r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction setDisabledButtonState() {\r\n\t\t\t\t\t\tvar visible = _.find(vm.buttons, function (button) {\r\n\t\t\t\t\t\t\treturn button.isVisible === true;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (util.isDefined(visible)) {\r\n\t\t\t\t\t\t\tvm.showDisabled = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvm.showDisabled = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction getImageProperties(button) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\timage: button.image ? button.image : button.name,\r\n\t\t\t\t\tcolour: \"button\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * resolves button tooltip key\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction getActionTooltip(name) {\r\n\t\t\t\treturn \"EINVOICING.PORTAL.COMPONENTS.ACTIONS.FLAG_\" + name.toUpperCase();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event handler for submit button click             \r\n\t\t\t */\r\n\t\t\tfunction buttonClick(index) {\r\n\t\t\t\tif (util.isFunction(scope.actions[index])) {\r\n\t\t\t\t\thandleClick(scope.actions[index], index);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction handleClick(action, index) {\r\n\t\t\t\t\tif (action && vm.buttons[index].isVisible) {\t\t\t\t\t\t\r\n\t\t\t\t\t\taction();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn StatefulButtonController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/action-buttons/stateful-button/stateful-button.controller.js","//{CODE:EUP0F}\r\n// di.einvoicing.ui.portal.components.statefulbutton\r\ndefine(['angular'], function (ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    var util = $di.utility.util;\r\n\r\n\t\tmodule.directive('diStatefulButton', diStatefulButton);\r\n\r\n\t\tfunction diStatefulButton() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tkeys:\"=\",\r\n\t\t\t\t\tcontextStates: \"=\",\r\n\t\t\t\t\tcontextAttributes: \"=\",\r\n\t\t\t\t\tlistItemsCount: \"=\",\r\n\t\t\t\t\tuserActions: \"=\",\r\n\t\t\t\t\tdisabledImage:\"@\",\r\n\t\t\t\t\tconfiguration: \"=\",\r\n\t\t\t\t\tactions: '='\r\n\t\t\t\t},\r\n\t\t\t\ttemplateUrl: 'src/app/portal/shared/components/action-buttons/stateful-button/stateful-button.html',\r\n\t\t\t\tcontroller: \"StatefulButtonController\",\r\n\t\t\t\tcontrollerAs: \"statefulButtonCtrl\",\r\n\t\t\t\tlink: link\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope) {\r\n\t\t\t\tscope.findElement = findElement;\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tfunction findElement(name) {\r\n\t\t\t\t\treturn ng.element(name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diStatefulButton;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/action-buttons/stateful-button/stateful-button.directive.js","//{CODE:DEF1O}\r\ndefine([\r\n    './additional-document-references.component'\r\n], function (\r\n    AdditionalDocumentReferencesComponent\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.component(AdditionalDocumentReferencesComponent.selector, AdditionalDocumentReferencesComponent);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/additional-document-references/_loader.js","//{CODE:DEF1N}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn AdditionalDocumentReferencesComponent();\r\n\r\n\tfunction AdditionalDocumentReferencesComponent() {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\treturn {\r\n\t\t    templateUrl: 'src/app/portal/shared/components/additional-document-references/additional-document-references.component.html',\r\n\t\t\tselector: 'diAdditionalDocumentReferences',\r\n\t\t\tbindings: {\r\n\t\t\t\titems: \"<\",\r\n\t\t\t\tconfiguration: \"<\",\r\n\t\t\t\teditable: \"@\",\r\n\t\t\t\tdownload: \"&\",\r\n\t\t\t\tdownloadAll: \"&\",\r\n\t\t\t\taddLine: \"&\",\r\n\t\t\t\tremoveLine: \"&\",\r\n\t\t\t\tonChanged: \"&\",\r\n\t\t\t\tonUploaded: \"&\",\r\n\t\t\t\tonUploadStarted: \"&\",\r\n\t\t\t\tonUploadFailed: \"&\"\r\n\t\t\t},\r\n\t\t\tcontrollerAs: \"additionalDocumentReferencesCtrl\",\r\n\t\t\tcontroller: ['$scope', 'absoluteUrl', AdditionalDocumentReferencesController]\r\n\t\t};\r\n\r\n\t\tfunction AdditionalDocumentReferencesController(scope, absoluteUrl) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvm.$onInit = calculateCtrlFlags;\r\n\t\t\tvm.$onChanges = onChanges;\r\n\r\n\t\t\tvm.isAbsoluteUrl = absoluteUrl.isAbsoluteUrl;\r\n\t\t\tvm.hasAttachment = hasAttachment;\t\t\t\r\n\t\t\tvm.onAttachmentUploadStateChanged = onAttachmentUploadStateChanged;\r\n\t\t\tvm.onPropertyChanged = onPropertyChanged;\r\n            \r\n\t\t\treturn;\r\n\r\n            /*\r\n\t\t\t * Sets the components visibility flags\r\n\t\t\t */\r\n\t\t\tfunction calculateCtrlFlags() {\r\n\t\t\t\tvm.isShown = vm.editable || util.isNonEmptyArray(vm.items);\r\n\t\t\t\tvm.hasAttachments = util.isNonEmptyArray(vm.items) && _.some(vm.items, hasAttachment);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Watches for changes of the controller's one-way bindings\r\n\t\t\t */\r\n\t\t\tfunction onChanges(changes) {\r\n\t\t\t\tcalculateCtrlFlags();\r\n\r\n\t\t\t\tif (!vm.editable && util.isDefined(changes.items) && util.isNonEmptyArray(changes.items.currentValue)) {\r\n\t\t\t\t\tvm.$onChanges = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Returns true if the additional document reference has an attachment\r\n\t\t\t * Looks at attachmentDataId to determine if there was an attachment\r\n\t\t\t */\r\n\t\t\tfunction hasAttachment(additionalDocumentReference) {\r\n\t\t\t\treturn !util.isNullOrUndefined(additionalDocumentReference) &&\r\n\t\t\t\t\tutil.isNumber(additionalDocumentReference.attachmentDataId);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Reacts to changes of input values\r\n\t\t\t */\r\n\t\t\tfunction onPropertyChanged() {\r\n\t\t\t\tif (util.isFunction(vm.onChanged)) {\r\n\t\t\t\t\tvm.onChanged();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcalculateCtrlFlags();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t    /*\r\n            * Triggered when a attachment upload process changed\r\n            */\r\n\t\t\tfunction onAttachmentUploadStateChanged(state) {\r\n\t\t\t    switch(state.status) {\r\n\t\t\t        case 'started':\r\n\t\t\t            if (util.isFunction(vm.onUploadStarted)) {\r\n\t\t\t                vm.onUploadStarted({ lineIdentifier: state.lineIdentifier });\r\n\t\t\t            }\r\n\t\t\t            break;\r\n\t\t\t        case 'success':\r\n\t\t\t            if (util.isFunction(vm.onUploaded)) {\r\n\t\t\t                vm.onUploaded({ lineIdentifier: state.lineIdentifier, attachmentDataId: state.attachmentDataId, filename: state.filename });\r\n\t\t\t            }\r\n\t\t\t            break;\r\n\t\t\t        default:\r\n\t\t\t            if (util.isFunction(vm.onUploadFailed)) {\r\n\t\t\t                vm.onUploadFailed({ lineIdentifier: state.lineIdentifier });\r\n\t\t\t            }\r\n\t\t\t            break;\r\n\t\t\t    }\r\n\r\n\t\t\t    calculateCtrlFlags();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/additional-document-references/additional-document-references.component.js","//{CODE:EUP8J}\r\n// di.einvoicing.ui.portal.addressEditDetails\r\ndefine([\r\n    './address-details.component',\r\n    './address-edit-details.directive',\r\n    './address-edit-details.controller',\r\n    './address-validation-property-name-provider.factory'\r\n], function (\r\n    addressDetailsComponentLoader,\r\n    addressEditDetailsDirectiveLoader,\r\n    addressEditDetailsControllerLoader,\r\n    addressValidationPropertyNameProviderLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(addressDetailsComponentLoader.AddressDetailsComponent.selector, addressDetailsComponentLoader.AddressDetailsComponent);\r\n        addressEditDetailsDirectiveLoader(module);\r\n        addressEditDetailsControllerLoader(module);\r\n        addressValidationPropertyNameProviderLoader(module);\r\n\r\n        \r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/address-edit-details/_loader.js","let util = $di.utility.util;\r\n\r\nexport const AddressDetailsComponent = {\r\n    templateUrl: 'src/app/portal/shared/components/address-edit-details/address-details.html',\r\n    selector: 'diAddressDetails',\r\n    bindings : {\r\n        address: \"<\",\r\n        party: \"<\",\r\n        allowedTypes : \"<\",\r\n        identifiers : \"<\",\r\n        onDataChanged: \"&\",\r\n        readOnly: \"<\",\r\n        showIsUpdatable: \"<\",\r\n        isAddressUpdateableOnly: \"<\"\r\n    },\r\n    controllerAs: '$ctrl',\r\n    controller:\r\n    class {\r\n        constructor(addressValidationPropertyNameProvider, staticLookupProxy,validationRulesSetter, translator, CLIENT_ENUMS) {\r\n            this.addressValidationPropertyNameProvider = addressValidationPropertyNameProvider;\r\n            this.staticLookupProxy = staticLookupProxy;\r\n            this.validationRulesSetter = validationRulesSetter;\r\n            this.translator = translator;\r\n            this.CLIENT_ENUMS = CLIENT_ENUMS;\r\n            \r\n            this.onCountryChanged = this.onCountryChanged.bind(this);\r\n            this.onAddressTypeChanged = this.onAddressTypeChanged.bind(this);\r\n            this.onUpdatableChanged = this.onUpdatableChanged.bind(this);\r\n            this.onLocationIdentifierChanged = this.onLocationIdentifierChanged.bind(this);\r\n\r\n            this.countries = [];\r\n            this.updateOptions = [];\r\n        }\r\n       \r\n        $onInit() {\r\n            this.validationRulesSetter.setValidationRules(\"Location\");\r\n            \r\n            this.staticLookupProxy.get('Country').then((data) => {\r\n                this.countries.fill(data);\r\n                this.translator.whenReady().then(() => {\r\n                    this.updateOptions = [\r\n                    {\r\n                        name: this.translator.instantTranslate(\"CORE.PROMPT.YES\"),\r\n                        id: true\r\n                    },\r\n                    {\r\n                        name: this.translator.instantTranslate(\"CORE.PROMPT.NO\"),\r\n                        id: false\r\n                    }\r\n                    ];\r\n                });\r\n            });\r\n\r\n            if (util.isDefined(this.party.locationType)) {\r\n                this.showIdentifier(this.party.locationType);\r\n                this.setValidation(this.party.locationType);\r\n            } else {\r\n                this.showLocationIdentifier = false;\r\n                this.showFinancialIdentifier = false;\r\n            }\r\n        }   \r\n\r\n        getCountryById(data, id) {\r\n            let country = _.find(data,\r\n                (item) => {\r\n                    return item.id === id;\r\n                });\r\n\r\n            if (util.isUndefined(country)) {\r\n                country = {};\r\n            }\r\n\r\n            return country;\r\n        }\r\n        \r\n        onCountryChanged(country) {                \r\n            if (util.isDefined(country)) {\r\n                this.address.country = country.name;\r\n                this.address.countryCode = country.code;\r\n                this.address.countryId = country.id;\r\n            }\r\n\r\n            this.onDataChanged();\r\n        }\r\n\r\n        onAddressTypeChanged(party) {\r\n            if (util.isDefined(party)) {\r\n                this.party = party;\r\n                this.address.locationType = party.locationType;\r\n                this.address.locationTypeTranslated = party.name;\r\n                this.address.party = party;\r\n                this.showIdentifier(this.party.locationType);\r\n\r\n                this.setValidation(this.party.locationType);\r\n                \r\n                this.onDataChanged();\r\n            }\r\n        }\r\n\r\n        onUpdatableChanged(obj) {\r\n            //in order for the change to take effect, the value of the scope[property] has to change\r\n            this.address.isUpdatable = obj.id;           \r\n            this.onDataChanged();\r\n        }\r\n        \r\n        onLocationIdentifierChanged(obj) {\r\n            if (util.isObject(obj)) {\r\n                this.address.locationIdentifier = obj.code;\r\n                this.address.locationIdentifierScheme = obj.scheme;\r\n                this.address.locationIdentifierSchemeId = obj.schemeId;\r\n            }       \r\n            \r\n            this.onDataChanged();\r\n        }\r\n\r\n        setValidation(locationType) {\r\n            this.validationProperties = this.addressValidationPropertyNameProvider.\r\n                getValidationPropertyNames('location', locationType);\r\n\r\n            this.showAddressDetails = true;\r\n        }\r\n        \r\n        showIdentifier(locationType) {\r\n            this.showLocationIdentifier = locationType === this.CLIENT_ENUMS.locationType.Delivery;\r\n            this.showFinancialIdentifier = !this.showLocationIdentifier;\r\n        }\r\n\r\n        matchIdentifier(i1, i2) {\r\n            return i1.identifier === i2.identifier;\r\n        }\r\n    }\r\n}\r\n\r\nAddressDetailsComponent.controller.prototype.constructor.$inject = ['addressValidationPropertyNameProvider', 'staticLookupProxy', 'validationRulesSetter', 'translator', 'CLIENT_ENUMS'];\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/address-edit-details/address-details.component.js","//{CODE:EUP8V}\r\n// di.einvoicing.ui.portal.addressDetails\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.controller('AddressEditDetailsController', AddressEditDetailsController);\r\n\r\n        AddressEditDetailsController.$inject = ['$scope', 'addressValidationPropertyNameProvider'];\r\n\r\n        function AddressEditDetailsController(scope, addressValidationPropertyNameProvider) {\r\n            var vm = this;\r\n\r\n            vm.showLocationIdentifier = true;\r\n\r\n            vm.onCountryChanged = onCountryChanged;\r\n            vm.onLocationIdentifierChanged = onLocationIdentifierChanged;\r\n            vm.onDataChanged = onDataChanged;\r\n            vm.validationProperties = addressValidationPropertyNameProvider.getValidationPropertyNames('invoice', scope.addressType);\r\n            vm.matchLocationIdentifier = matchLocationIdentifier;\r\n            \r\n            init();\r\n\r\n            return;\r\n\r\n            function init() {\r\n                if (util.isDefined(scope.showLocationIdentifier)) {\r\n                    vm.showLocationIdentifier = scope.showLocationIdentifier;\r\n                }\r\n            }\r\n\r\n            function matchLocationIdentifier(i1, i2) {\r\n                return i1.identifier === i2.identifier;\r\n            }\r\n\r\n            function onDataChanged() {\r\n                if (scope.onDataChanged) {\r\n                    scope.onDataChanged();\r\n                }\r\n            }\r\n\r\n            function onCountryChanged(country) {                \r\n                if (scope.onCountryChanged) {\r\n                    scope.onCountryChanged(country);\r\n                }\r\n            }\r\n\r\n            function onLocationIdentifierChanged(location) {\r\n                onDataChanged();\r\n            }\r\n        }\r\n\r\n        return AddressEditDetailsController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/address-edit-details/address-edit-details.controller.js","//{CODE:EUP5B}\r\n// di.einvoicing.ui.portal.addressDetails\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.directive('diAddressEditDetails', diAddressEditDetails);\r\n\r\n\t\tfunction diAddressEditDetails() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tscope: {\r\n\t\t\t\t    bindToObject: \"=\",\r\n                    addressType: \"@\",\r\n\t\t\t\t    country: \"=\",\r\n\t\t\t\t\tcountries: \"=\",\r\n\t\t\t\t\tidentifiers: \"=\",\r\n\t\t\t\t\tonDataChanged: \"=\",\r\n\t\t\t\t\tonCountryChanged: \"=\",\r\n\t\t\t\t\treadOnly: \"=\",\r\n\t\t\t\t    showLocationIdentifier :\"=\"\r\n\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: 'AddressEditDetailsController',\r\n\t\t\t\tcontrollerAs: 'addressEditDetailsCtrl',\r\n\t\t\t\ttemplateUrl: 'src/app/portal/shared/components/address-edit-details/address-edit-details.html'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diAddressEditDetails;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/address-edit-details/address-edit-details.directive.js","//{CODE:UPA01}\r\n// di.einvoicing.ui.portal.addressDetails\r\ndefine(function () {\r\n    'use strict';\r\n    \r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('addressValidationPropertyNameProvider', addressValidationPropertyNameProvider);\r\n        \r\n        function addressValidationPropertyNameProvider() {\r\n            return {\r\n                getValidationPropertyNames: getValidationPropertyNames\r\n            };\r\n\r\n            /**\r\n\t\t\t * Gets validation property names for a specific type of address\r\n\t\t\t * @locationType (billToAddress or deliveryAddress)\r\n\t\t\t */\r\n            function getValidationPropertyNames(entityType, locationType) {\r\n                if (entityType === 'invoice') {\r\n                    switch (locationType) {\r\n                        case 'billToAddress':\r\n                        return {\r\n                            addressName: 'addressName',\r\n                            addressLine1: 'addressLine1',\r\n                            addressLine2: 'addressLine2',\r\n                            addressTown: 'addressTown',\r\n                            addressCounty: 'addressCounty',\r\n                            addressPostCode: 'postCode',\r\n                            locationIdentifier: 'locationIdentifier'\r\n                        }\r\n                        case 'deliveryAddress':\r\n                        return {\r\n                            addressName: 'deliveryAddressName',\r\n                            addressLine1: 'deliveryAddressLine1',\r\n                            addressLine2: 'deliveryAddressLine2',\r\n                            addressTown: 'deliveryAddressTown',\r\n                            addressCounty: 'deliveryAddressCounty',\r\n                            addressPostCode: 'deliveryPostCode',\r\n                            locationIdentifier: 'deliveryLocationIdentifier'\r\n                        }\r\n                    default:\r\n                        guard.throwNew(\"UPA0101E\", 'Not supported address type.');\r\n                    }\r\n                } else {\r\n                    return {\r\n                        locationType: 'locationType',\r\n                        addressName: 'name',\r\n                        addressLine1: 'addressLine1',\r\n                        addressLine2: 'addressLine2',\r\n                        addressTown: 'town',\r\n                        addressCounty: 'county',\r\n                        addressPostCode: 'postalCode',\r\n                        locationIdentifier: 'locationIdentifier'\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return addressValidationPropertyNameProvider;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/address-edit-details/address-validation-property-name-provider.factory.js","define([\r\n    './address-view-details.directive'\r\n], function (\r\n    addressViewDetailsDirectiveLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        addressViewDetailsDirectiveLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/address-view-details/_loader.js","define(function () {\r\n  'use strict';\r\n\r\n  return function (module) {\r\n      module.directive('diAddressViewDetails', diAddressViewDetails);\r\n\r\n      function diAddressViewDetails() {\r\n        return {\r\n          restrict: 'E',\r\n          scope: {\r\n              bindToObject: \"=\",\r\n              blockId: '@'\r\n          },\r\n          templateUrl: 'src/app/portal/shared/components/address-view-details/address-view-details.html'\r\n        };\r\n      }\r\n\r\n      return diAddressViewDetails;\r\n  };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/address-view-details/address-view-details.directive.js","//{CODE:EUP9I}\r\ndefine([\r\n    './contact-details.component'\r\n], function (\r\n    contactDetailsComponentLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(contactDetailsComponentLoader.ContactDetailsComponent.selector, contactDetailsComponentLoader.ContactDetailsComponent);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/contact-details/_loader.js","let util = $di.utility.util;\r\n\r\nexport const ContactDetailsComponent = {\r\n    templateUrl: 'src/app/portal/shared/components/contact-details/contact-details.html',\r\n    selector: 'diContactDetailsPopup',\r\n    bindings : {\r\n        contact: \"<\",\r\n        party: \"<\",\r\n        typeOptions : \"<\",\r\n        onDataChanged: \"&\",\r\n        readOnly: \"<\",\r\n        showIsUpdatable :\"<\"\r\n    },\r\n    controllerAs: '$ctrl',\r\n    controller:\r\n    class {\r\n        constructor(validationRulesSetter,translator) {\r\n            this.validationRulesSetter = validationRulesSetter;\r\n            this.translator = translator;\r\n            this.onUpdatableChanged = this.onUpdatableChanged.bind(this);\r\n            this.onContactTypeChanged = this.onContactTypeChanged.bind(this);\r\n            \r\n        }\r\n       \r\n        $onInit() {\r\n            this.init();\r\n        }\r\n\r\n        init() {\r\n            this.translator.whenReady().then(() => {\r\n                this.updateOptions = [\r\n                {\r\n                    name: this.translator.instantTranslate(\"CORE.PROMPT.YES\"),\r\n                    id: true\r\n                },\r\n                {\r\n                    name: this.translator.instantTranslate(\"CORE.PROMPT.NO\"),\r\n                    id: false\r\n                }\r\n                ];\r\n            });\r\n\r\n            this.validationRulesSetter.setValidationRules(\"Invoice\");\r\n        }   \r\n        \r\n        onContactTypeChanged(party) {\r\n            if (util.isDefined(party)) {\r\n                this.contact.partyId = party.id;\r\n                this.onDataChanged();\r\n            }\r\n        }\r\n\r\n        onUpdatableChanged(obj) {\r\n            this.contact.isUpdatable = obj.id;\r\n            this.onDataChanged();\r\n        }\r\n    }\r\n}\r\n\r\nContactDetailsComponent.controller.prototype.constructor.$inject = ['validationRulesSetter','translator'];\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/contact-details/contact-details.component.js","define([\r\n    './contact-view-details.directive'\r\n], function (\r\n    contactViewDetailsDirectiveLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        contactViewDetailsDirectiveLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/contact-view-details/_loader.js","define(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n        module.directive('diContactViewDetails', diContactViewDetails);\r\n\r\n        function diContactViewDetails() {\r\n            return {\r\n                restrict: 'E',\r\n                scope: {\r\n                    bindToObject: \"=\",\r\n                    blockId: '@'\r\n                },\r\n                templateUrl: 'src/app/portal/shared/components/contact-view-details/contact-view-details.html'\r\n            };\r\n        }\r\n\r\n        return diContactViewDetails;\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/contact-view-details/contact-view-details.directive.js","define([\r\n    './date-selector.directive',\r\n    './date-selector.controller'\r\n], function (\r\n    diDateSelectorDirectiveLoader,\r\n    diDateSelectorControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        diDateSelectorDirectiveLoader(module);\r\n        diDateSelectorControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/date-selector/_loader.js","//{CODE:UPD02}\r\n// di.einvoicing.ui.portal.dateSelector\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar ngUtil = $di.angular.util;\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('DiDateSelectorController', DiDateSelectorController);\r\n\r\n\t\tDiDateSelectorController.$inject = [\r\n\t\t\t'$scope', 'translator', '$stateParams', 'diState', 'dateFormatter'\r\n\t\t];\r\n\r\n\t\tfunction DiDateSelectorController(\r\n\t\t\tscope, translator, stateParams, diState, dateFormatter) {\r\n\r\n\t\t\tvar CUSTOM = \"Custom\";\r\n\t\t\tvar customOption;\r\n\t\t\tvar ignoreBoundObjectProperty;\r\n\r\n\t\t\tvar vm = this;\r\n\t\t\tvm.dateTypes = [];\r\n\t\t\tvm.items = [];\r\n\t\t\tvm.dateType = {};\r\n\t\t\tvm.item = {};\r\n\t\t\tvm.customItem = { fromDate: '', toDate: '' }\r\n\t\t\tvm.showDateTypes = false;\r\n\r\n\t\t\tvm.selectNonCustomDate = selectNonCustomDate;\r\n\t\t\tvm.selectCustomDate = selectCustomDate;\r\n\t\t\tvm.selectDateType = selectDateType;\r\n\t\t\tvm.dateChanged = dateChanged;\r\n\t\t\tvm.validSelectedDates = areSelectedDatesValid();\r\n\t\t\tinitialize();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Sets default item when options are loaded.\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction initialize() {\r\n\r\n\t\t\t\tsetDateTypes();\r\n\t\t\t\tsetDateRanges();\r\n\r\n\t\t\t\tif (translateQueryParamsToDropDown()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\twatchBoundObjectProperty();\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * loads list of date types                 \r\n\t\t\t\t */\r\n\t\t\t\tfunction setDateTypes() {\r\n\t\t\t\t\tngUtil.$watchCollection(scope, 'dateTypes', function (dateTypes) {\r\n\t\t\t\t\t\tif (dateTypes) {\r\n\t\t\t\t\t\t\tvm.dateTypes = dateTypes;\r\n\t\t\t\t\t\t\tvm.showDateTypes = dateTypes.length > 1;\r\n\t\t\t\t\t\t\ttranslateFilterLabels(vm.dateTypes);\r\n\t\t\t\t\t\t\tvar item = _.find(dateTypes, function (option) {\r\n\t\t\t\t\t\t\t\treturn option.value === scope.defaultType;\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif (util.isDefined(item)) {\r\n\t\t\t\t\t\t\t\tvm.dateType = item;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvm.dateType = dateTypes[0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * loads list of date ranges\r\n\t\t\t\t */\r\n\t\t\t\tfunction setDateRanges() {\r\n\t\t\t\t\tngUtil.$watchCollection(scope, 'items', function (items) {\r\n\t\t\t\t\t\tif (items) {\r\n\t\t\t\t\t\t\tvm.items = items;\r\n\t\t\t\t\t\t\ttranslateFilterLabels(vm.items);\r\n\r\n\t\t\t\t\t\t\tvar item = _.find(items, function (option) {\r\n\t\t\t\t\t\t\t\treturn option.value === scope.defaultRange;\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif (util.isDefined(item)) {\r\n\t\t\t\t\t\t\t\tvm.item = item;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvm.item = items[0];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//get Custom option only when the items change, not at every custom date selection\r\n\t\t\t\t\t\t\tif (scope.defaultRange === CUSTOM) {\r\n\t\t\t\t\t\t\t\tcustomOption = item;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcustomOption = getCustomOption(vm.items);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t * Gets the object with the Custom value\r\n\t\t\t\t */\r\n\t\t\t\tfunction getCustomOption(options) {\r\n\t\t\t\t\treturn _.find(options, function (option) {\r\n\t\t\t\t\t\treturn option.value === CUSTOM;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Translate labels collection using translator service.\r\n\t\t\t\t * @param filters\r\n\t\t\t\t */\r\n\t\t\t\tfunction translateFilterLabels(filters) {\r\n\t\t\t\t    translator.whenReady()\r\n\t\t\t\t        .then(function() {\r\n\t\t\t\t            _.each(filters, function (filter) {\r\n\t\t\t\t                filter.label = translator.instantTranslate(filter.label);\r\n\t\t\t\t            });\r\n\t\t\t\t        });\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Translate the custom query params from dashboard summary to UI dropdown\r\n\t\t\t\t */\r\n\r\n\t\t\t\tfunction translateQueryParamsToDropDown() {\r\n\t\t\t\t\tif (stateParams.dateType && stateParams.dateTimeFilter\r\n\t\t\t\t\t\t&& stateParams.dateTimeFilter === 'Custom'\r\n\t\t\t\t\t\t&& stateParams.fromDate && stateParams.toDate) {\r\n\r\n\t\t\t\t\t\tvar item = getCustomOption(scope.items);\r\n\t\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\t\tvm.customItem.fromDate = dateFormatter.toClientDate(stateParams.fromDate);\r\n\t\t\t\t\t\t\tvm.customItem.toDate = dateFormatter.toClientDate(stateParams.toDate);\r\n\t\t\t\t\t\t\tvm.item = item;\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event when changed non custom option\r\n\t\t\t */\r\n\t\t\tfunction selectNonCustomDate(item) {\r\n\t\t\t\tvm.item = item;\r\n\t\t\t\tvm.customItem = {\r\n\t\t\t\t\tfromDate: '', toDate: ''\r\n\t\t\t\t};\r\n\t\t\t\tvm.validSelectedDates = areSelectedDatesValid();\r\n\t\t\t\tonRangeChanged(vm.item.value);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Event when changed custom option.\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction selectCustomDate() {\r\n\t\t\t\tif (areSelectedDatesValid() && util.isDefined(customOption)) {\r\n\t\t\t\t\tvm.item = customOption;\r\n\t\t\t\t\tonRangeChanged(vm.item.value, vm.customItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Calls event handlers for changed range\r\n\t\t\t */\r\n\t\t\tfunction onRangeChanged(newRange, customDates) {\r\n\t\t\t\tif (scope.onChangedRange) {\r\n\t\t\t\t\tscope.onChangedRange(newRange, customDates);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Triggered when one of the dates from the custom item change\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction dateChanged() {\r\n\t\t\t\tvm.validSelectedDates = areSelectedDatesValid();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Checks if the selected dates are valid\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction areSelectedDatesValid() {\r\n\t\t\t\treturn vm.customItem.fromDate !== \"\" && vm.customItem.toDate !== \"\" && vm.customItem.toDate !== undefined && vm.customItem.fromDate !== undefined;\r\n\t\t\t}\r\n\r\n\t\t\tfunction selectDateType(item) {\r\n\t\t\t\tvm.dateType = item;\r\n\t\t\t\tif (scope.onChangedType) {\r\n\t\t\t\t\tscope.onChangedType(item.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Create watcher against the object property passed into the directive\r\n\t\t\t */\r\n\t\t\tfunction watchBoundObjectProperty() {\r\n\t\t\t\tif (scope.bindToDateTypeObject === undefined || scope.bindToDateTypeProperty === undefined) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tignoreBoundObjectProperty = scope.$watch(function () {\r\n\t\t\t\t\treturn scope.bindToDateTypeObject[scope.bindToDateTypeProperty];\r\n\t\t\t\t}, function (item, oldItem) {\r\n\t\t\t\t\titemWatchCallback(item, oldItem, 'datetype');\r\n\t\t\t\t});\r\n\r\n\t\t\t\tignoreBoundObjectProperty = scope.$watch(function () {\r\n\t\t\t\t\treturn scope.bindToDateRangeObject[scope.bindToDateRangeProperty];\r\n\t\t\t\t}, function (item, oldItem) {\r\n\t\t\t\t\titemWatchCallback(item, oldItem, 'daterange');\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfunction itemWatchCallback(item, oldItem, itemType) {\r\n\t\t\t\t\tif (util.isRealObject(item) && item !== oldItem) {\r\n\t\t\t\t\t\titemSelected(item, false, itemType);\r\n\r\n\t\t\t\t\t\tif (!scope.watchBinding) {\r\n\t\t\t\t\t\t\tignoreBoundObjectProperty();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Changes the bound property of the item selected\r\n\t\t\t */\r\n\t\t\tfunction itemSelected(item, updateBoundProperty, property) {\r\n\r\n\t\t\t\tif (property === 'daterange') {\r\n\t\t\t\t\tif (item.isHidden === true) {\r\n\t\t\t\t\t\tselectCustomDate(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tselectNonCustomDate(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (property === 'datetype') {\r\n\t\t\t\t\tselectDateType(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (updateBoundProperty) {\r\n\t\t\t\t\tignoreBoundObjectProperty();\r\n\r\n\t\t\t\t\tif (scope.watchBinding) {\r\n\t\t\t\t\t\twatchBoundObjectProperty();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isFunction(scope.onChangeAccessor)) {\r\n\t\t\t\t\t\tvar onChangeAccessor = scope.onChangeAccessor();\r\n\r\n\t\t\t\t\t\tif (util.isFunction(onChangeAccessor)) {\r\n\t\t\t\t\t\t\tonChangeAccessor(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn DiDateSelectorController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/date-selector/date-selector.controller.js","//{CODE:UPD03}\r\n// di.einvoicing.ui.portal.dateSelector\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        module.directive('diDateSelector', diDateSelector);\r\n\r\n        function diDateSelector() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                scope: {\r\n                    dateTypes: '=',\r\n                    items: '=',\r\n                    defaultRange: '=',\r\n                    defaultType: '=',\r\n                    onChangedRange: \"=\",\r\n                    onChangedType: \"=\",\r\n                    bindToDateTypeObject: '=',\r\n                    bindToDateTypeProperty: '@',\r\n                    bindToDateRangeObject: '=',\r\n                    bindToDateRangeProperty: '@',\r\n                    watchBinding: '=' //default: false\r\n                },\r\n                controller: \"DiDateSelectorController\",\r\n                controllerAs: \"diDateSelectorCtrl\",\r\n                templateUrl: 'src/app/portal/shared/components/date-selector/date-selector.html'\r\n            };\r\n        }\r\n\r\n        return diDateSelector;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/date-selector/date-selector.directive.js","define([\r\n\t'./document-state-display.directive',\r\n\t'./document-state-display.controller'\r\n], function (\r\n\tdocumentStateDisplayDirectiveLoader,\r\n\tdocumentStateDisplayControllerLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tdocumentStateDisplayDirectiveLoader(module);\r\n\t\tdocumentStateDisplayControllerLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/document-state-display/_loader.js","//{CODE:EIP0Q}\r\n// di.einvoicing.ui.portal._components.documentStateDisplay\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.controller('DocumentStateDisplayController', DocumentStateDisplayController);\r\n\r\n\t\tDocumentStateDisplayController.$inject = ['documentStateResolver', '$scope'];\r\n\r\n\t\tfunction DocumentStateDisplayController(\r\n\t\t\tdocumentStateResolver, scope) {\r\n\t\t\tvar vm = this;\r\n\t\t    \r\n\t\t    documentStateResolver.resolveDocumentState(scope.documentType, scope.stateId)\r\n\t\t        .then(function(resolved) {\r\n\t\t            vm.documentState = resolved;\r\n\t\t        });\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treturn DocumentStateDisplayController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/document-state-display/document-state-display.controller.js","//{CODE:EIP0P}\r\n// di.einvoicing.ui.portal._components.documentStateDisplay\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diDocumentStateDisplay', diDocumentStateDisplay);\r\n\r\n\t\tfunction diDocumentStateDisplay() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tdocumentType: '=',\r\n\t\t\t\t\tstateId: '='\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: 'DocumentStateDisplayController',\r\n\t\t\t\tcontrollerAs: 'documentStateDisplayCtrl',\r\n\t\t\t\ttemplateUrl: 'src/app/portal/shared/components/document-state-display/document-state-display.html'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diDocumentStateDisplay;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/document-state-display/document-state-display.directive.js","define([\r\n    './document-state-resolver.factory',\r\n    './loader'\r\n], function (documentStateResolverLoader,\r\n    documentStateSelectorComponentLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        documentStateResolverLoader(module);\r\n        documentStateSelectorComponentLoader.load(module);\r\n    };\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/document-state-selector/_loader.js","//{CODE:CAD03}\r\n// di.core.angular.documentStateSelector\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('documentStateResolver', documentStateResolver);\r\n\r\n\t\tdocumentStateResolver.$inject = [\r\n\t\t\t'authenticationData',\r\n\t\t\t'translator',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'enumsKeyResolver'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * resolves document state based on einvoicing state\r\n\t\t */\r\n\t\tfunction documentStateResolver(\r\n\t\t\tauthenticationData,\r\n\t\t\ttranslator,\r\n\t\t\tenumTranslator,\r\n\t\t\tclientEnums,\r\n\t\t\tenumsKeyResolver) {\r\n\t\t\treturn {\r\n\t\t\t\tgetDocumentState: getDocumentState,\r\n\t\t\t\tresolveDocumentStates: resolveDocumentStates,\r\n\t\t\t\tresolveDocumentState: resolveDocumentState,\r\n\t\t\t\tcalculateCurrentState: calculateCurrentState\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t* Gets state key for given id                \r\n\t\t\t*/\r\n\t\t\tfunction getDocumentState(stateId) {\r\n\t\t\t\tguard.throwIfInvalidId(\"CAD0303E\", stateId, \"stateId\");\r\n\r\n\t\t\t\tvar state = enumTranslator\r\n\t\t\t\t\t.getLanguageKey(clientEnums.documentStateKey, stateId);\r\n\r\n\t\t\t\treturn translator.translate(state);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Resolves array of document states for display             \r\n\t\t\t */\r\n\t\t\tfunction resolveDocumentStates(docType, data) {\r\n\t\t\t\tguard.throwIfEmptyString(\"CAD0305E\", docType, \"docType\");\r\n\t\t\t\tvar enums = enumsKeyResolver.getEnumsForCurrentRole(clientEnums.documentStateKey, docType);\r\n\r\n\t\t\t\tenumTranslator.translateCollection(\r\n\t\t\t\t\tenums,\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\t'clientEInvoicingStateId',\r\n\t\t\t\t\t'clientEInvoicingState');\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Resolves document state key by state id          \r\n\t\t\t */\r\n\t\t\tfunction resolveDocumentState(docType, stateId) {\r\n\t\t\t\tguard.throwIfEmptyString(\"CAD0305E\", docType, \"docType\");\r\n\t\t\t\tguard.throwIfInvalidId(\"CAD0304E\", stateId, \"stateId\");\r\n\r\n\t\t\t\tvar enums = enumsKeyResolver.getEnumsForCurrentRole(clientEnums.documentStateKey, docType);\r\n\r\n\t\t\t\treturn enumTranslator.translate(\r\n\t\t\t\t\tenums,\r\n\t\t\t\t\tstateId);\r\n\t\t\t}\r\n\r\n\t\t\tfunction calculateCurrentState(docType, stateId, translate) {\r\n\t\t\t\tif (translate) {\r\n\t\t\t\t\treturn resolveDocumentState(docType, stateId);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn getDocumentState(stateId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn documentStateResolver;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/document-state-selector/document-state-resolver.factory.js","define([\r\n    './legal-view-details.directive'\r\n], function (\r\n    legalViewDetailsDirectiveLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        legalViewDetailsDirectiveLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/legal-view-details/_loader.js","define(function () {\r\n  'use strict';\r\n\r\n  return function (module) {\r\n      module.directive('diLegalViewDetails', diLegalViewDetails);\r\n\r\n      function diLegalViewDetails() {\r\n        return {\r\n          restrict: 'E',\r\n          scope: {\r\n              bindToObject: \"=\",\r\n              blockId: '@'\r\n          },\r\n          templateUrl: 'src/app/portal/shared/components/legal-view-details/legal-view-details.html'\r\n        };\r\n      }\r\n\r\n      return diLegalViewDetails;\r\n  };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/legal-view-details/legal-view-details.directive.js","define([\r\n    './party-view-details.directive'\r\n], function (\r\n    partyViewDetailsDirectiveLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        partyViewDetailsDirectiveLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/party-view-details/_loader.js","define(function () {\r\n  'use strict';\r\n\r\n  return function (module) {\r\n      module.directive('diPartyViewDetails', diPartyViewDetails);\r\n\r\n      function diPartyViewDetails() {\r\n        return {\r\n          restrict: 'E',\r\n          scope: {\r\n              bindToObject: \"=\",\r\n              blockId: '@'\r\n          },\r\n          templateUrl: 'src/app/portal/shared/components/party-view-details/party-view-details.html'\r\n        };\r\n      }\r\n\r\n      return diPartyViewDetails;\r\n  };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/party-view-details/party-view-details.directive.js","define([\r\n    './set-focus.directive'\r\n], function (\r\n    setFocusDirectiveLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive(\r\n            'diSetFocus', \r\n            () => new setFocusDirectiveLoader.default);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/set-focus/_loader.js","let util = $di.utility.util;\r\n\r\nexport default class SetFocus {\r\n  constructor() {\r\n    this.restrict = 'A';\r\n  }\r\n  link($scope, $element, $attrs) {\r\n    const setFocusOn = $element[0].querySelector($attrs.diSetFocus);\r\n      \r\n    if (setFocusOn !== null && setFocusOn != undefined){\r\n        if (util.isDefined($attrs.diSetFocusParent)) {\r\n            setFocusOn.parentNode.focus();\r\n        } else {\r\n            setFocusOn.focus();\r\n        }\r\n    } else {\r\n        $element[0].focus();\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/components/set-focus/set-focus.directive.js","define([\r\n\t'./party-proxy.factory',\r\n\t'./user-proxy.factory',\r\n\t'./audit-proxy.factory',\r\n\t'./document-proxy.factory',\r\n\t'./formatters/_loader',\r\n\t'./attachment-proxy.factory',\r\n\t'./file-transfer/_loader',\r\n\t'./attachment-download-validator/_loader',\r\n\t'./user-actions-resolver/_loader',\r\n\t'./vm-list-configurator/_loader',\r\n\t'./notification-handler/_loader',\r\n\t'./document-attachment-configurator/_loader',\r\n\t'./trading-relationship-proxy',\r\n    './proxy-error-interceptor/proxy-error-interceptor.service'\r\n], function (\r\n\tpartyProxyLoader,\r\n\tuserProxyLoader,\r\n\tauditProxyLoader,\r\n\tdocumentProxyLoader,\r\n\tformattersLoader,\r\n\tattachmentProxyLoader,\r\n\tfileTransferLoader,\r\n\tattachmentDownloadValidatorLoader,\r\n\tuserActionsResolverLoader,\r\n\tvmListConfiguratorLoader,\r\n\tnotificationHandlerLoader,\r\n\tdocumentAttachmentConfiguratorLoader,\r\n\ttradingRelationshipProxyLoader,\r\n    proxyErrorInterceptorService) {\r\n\t\t'use strict';\r\n\r\n\t\treturn function (module) {\r\n\t\t\tpartyProxyLoader(module);\r\n\t\t\tuserProxyLoader(module);\r\n\t\t\tauditProxyLoader(module);\r\n\t\t\tdocumentProxyLoader(module);\r\n\t\t\tformattersLoader(module);\r\n\t\t\tattachmentProxyLoader(module);\r\n\t\t\tfileTransferLoader(module);\r\n\t\t\tattachmentDownloadValidatorLoader(module);\r\n\t\t\tuserActionsResolverLoader(module);\r\n\t\t\tvmListConfiguratorLoader(module);\r\n\t\t\tnotificationHandlerLoader(module);\r\n\t\t\tdocumentAttachmentConfiguratorLoader(module);\r\n\t\t\tmodule.service('tradingRelationshipProxy', tradingRelationshipProxyLoader.TradingRelationshipProxy);\r\n\t\t\tmodule.service('proxyErrorInterceptor', proxyErrorInterceptorService.ProxyErrorInterceptor);\r\n\t\t};\r\n\t});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/_loader.js","define([\r\n  './attachment-download-validator.factory'\r\n], function (\r\n    attachmentDownloadValidatorFactoryLoader\r\n    ){\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        attachmentDownloadValidatorFactoryLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/attachment-download-validator/_loader.js","//{CODE:EUP9H}\r\n// di.einvoicing.ui.portal.components.attachmentdownloadvalidator\r\ndefine(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('attachmentDownloadValidator', attachmentDownloadValidator);\r\n        attachmentDownloadValidator.$inject = ['fileExtensionValidator','notificationHandler'];\r\n\r\n        function attachmentDownloadValidator(fileExtensionValidator, notificationHandler) {\r\n            return {\r\n                allowDownloadSingleFile: allowDownloadSingleFile,\r\n                allowDownloadMultipleFiles: allowDownloadMultipleFiles\r\n            };\r\n\r\n            /**\r\n            * Check if the file extension provided is valid against a list of invalid extensions\r\n            */\r\n            function allowDownloadSingleFile(fileName) {\r\n                guard.throwIfEmptyString(\"EUP9H01E\", fileName, 'fileName');\r\n\r\n                if (fileExtensionValidator.isFileExtensionValid(fileName) === false) {\r\n                    notificationHandler.showWarning('EINVOICING.PORTAL.COMPONENTS.ATTACHMENTS.DOWNLOAD_INVALID_FILE_TYPE');\r\n                    return false;\r\n                };\r\n\r\n                return true;\r\n            }\r\n\r\n            /**\r\n            * Check if the array of attachments provided is valid against a list of invalid extensions\r\n            */\r\n            function allowDownloadMultipleFiles(array, attachmentDataIds) {\r\n                guard.throwIfNullOrUndefined(\"EUP9H03E\", array, 'array');\r\n                guard.throwIfNotArray(\"EUP9H04E\", array, 'array');\r\n                guard.throwIfEmptyArray(\"EUP9H05E\", array, 'array');\r\n                guard.throwIfNullOrUndefined(\"EUP9H06E\", attachmentDataIds, 'attachmentDataIds');\r\n                guard.throwIfNotArray(\"EUP9H07E\", attachmentDataIds, 'attachmentDataIds');\r\n                \r\n                var foundInvalidFileExtension = false;\r\n\r\n                _.each(array, function (additionalDocumentReference) {\r\n                    if (fileExtensionValidator.isFileExtensionValid(additionalDocumentReference.fileName)) {\r\n                        attachmentDataIds.push(additionalDocumentReference.attachmentDataId);\r\n                    } else {\r\n                        foundInvalidFileExtension = true;\r\n                    }\r\n                });\r\n\r\n                if (attachmentDataIds.length === 0) {\r\n                    notificationHandler.showWarning('EINVOICING.PORTAL.COMPONENTS.ATTACHMENTS.DOWNLOADALL_ONLY_INVALID_FILE_TYPE');\r\n                    return false;\r\n                }\r\n                else if (foundInvalidFileExtension) {\r\n                    notificationHandler.showInfo('EINVOICING.PORTAL.COMPONENTS.ATTACHMENTS.DOWNLOADALL_INVALID_FILE_TYPE');\r\n                }\r\n\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return attachmentDownloadValidator;\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/attachment-download-validator/attachment-download-validator.factory.js","//{CODE:EUP5L}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('attachmentProxy', attachmentProxy);\r\n\r\n\t\tattachmentProxy.$inject = [\r\n            '$q',\r\n            'fileUploader',\r\n\t\t\t'webApiHttp',\r\n\t\t\t'fileDownloader',\r\n\t\t\t'urlHelper',\r\n\t\t    'proxyErrorInterceptor'];\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param fileUploader - Service which uploads the file\r\n\t\t * @param urlHelper - Service which helps to create URLs\r\n\t\t */\r\n\t\tfunction attachmentProxy(\r\n            $q,\r\n            fileUploader,\r\n\t\t\twebApiHttp,\r\n\t\t\tfileDownloader,\r\n\t\t\turlHelper,\r\n            proxyErrorInterceptor) {\r\n\t\t    return {\r\n\t\t        addAttachmentData : addAttachmentData,\r\n\t\t\t\taddAttachments: addAttachments,\r\n\t\t\t\tuploadAttachment: uploadAttachment,\r\n\t\t\t\tgetAttachmentsForDocument: getAttachmentsForDocument,\r\n\t\t\t\tdownloadFile: downloadFile,\r\n\t\t\t\tdownloadZipFile: downloadZipFile,\r\n\t\t\t\tremoveAttachment: removeAttachment\r\n\t\t\t};\r\n\r\n\t\t    function addAttachmentData(file) {\r\n\t\t        var relativeUrl = 'Attachment/AddAttachmentData';\r\n\r\n\t\t        var newPromise = fileUploader\r\n\t\t            .upload(relativeUrl, file)\r\n\t\t            .then(s, f);\r\n\r\n\t\t        return newPromise;\r\n                \r\n\t\t        function s(id) {\r\n\t\t            guard.throwIfInvalidId(\"EUP5L03E\", id[0], 'id');\r\n\t\t            return id[0];\r\n\t\t        }\r\n\t\t        \r\n\t\t        function f(error) {\r\n\t\t            proxyErrorInterceptor.handleError(error, \"\", \"\");\r\n\t\t            return $q.reject(error);\r\n\t\t        };\r\n\t\t    }\r\n\r\n\t\t\tfunction addAttachments(documentId, documentVersion, attachments) {\r\n\t\t\t\tvar urlParameters = {\r\n\t\t\t\t\tdocumentId: documentId,\r\n\t\t\t\t\tdocumentVersion: documentVersion\r\n\t\t\t\t}\r\n\t\t\t\tvar relativeUrl = urlHelper.setParameters('Attachment/AddAttachments', urlParameters);\r\n\t\t\t\treturn webApiHttp.post(relativeUrl, attachments);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which uploads the specified file and associates it with the specified document ID\r\n\t\t\t * @param documentId - The document ID to associate the uploaded file with\r\n\t\t\t * @param file - The file to upload\r\n\t\t\t * @returns - Promise representing the file upload\r\n\t\t\t */\r\n\t\t\tfunction uploadAttachment(documentId, documentVersion, file) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP5L03E\", documentId, 'documentId');\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP5L07E\", documentVersion, 'documentVersion');\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP5L02E\", file, 'file');\r\n\r\n\t\t\t\tvar relativeUrl = 'Attachment/AddAttachmentData';\r\n\r\n\t\t\t\treturn fileUploader\r\n\t\t\t\t\t.upload(relativeUrl, file)\r\n\t\t\t\t\t.then(success, failure);\r\n\r\n\t\t\t\tfunction success(ids) {\r\n\t\t\t\t\t//CHANGE this if multiple files can be uploaded at once\r\n\t\t\t\t\tvar attachments = _.map(ids,\r\n\t\t\t\t\t\tfunction (id) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tattachmentDataId: id,\r\n\t\t\t\t\t\t\t\t//TODO this should be a different field\r\n\t\t\t\t\t\t\t\tfileReference: file.name,\r\n\t\t\t\t\t\t\t\tfileName: file.name,\r\n\t\t\t\t\t\t\t\tmimeType: file.type\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\treturn addAttachments(documentId, documentVersion, attachments);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction failure(error) {\r\n\t\t\t\t    proxyErrorInterceptor.handleError(error, \"An error occurred uploading attachment.\", \"\");\r\n\t\t\t\t    return $q.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which gets the attachments associated with the currently selected document\r\n\t\t\t * @param documentId - The ID of the document to get the associated attachments for\r\n\t\t\t * @returns - A promise which resolves to the attachments related to the provided document ID\r\n\t\t\t */\r\n\t\t\tfunction getAttachmentsForDocument(documentId) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP5L01E\", documentId, 'documentId');\r\n\r\n\t\t\t\tvar queryData = {\r\n\t\t\t\t\tdocumentId: documentId\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar url = urlHelper.setParameters('Attachment/GetAttachmentsForDocument', queryData);\r\n\r\n\t\t\t\treturn webApiHttp.get(url);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function to download a zip file containing the data for the document attachment IDs\r\n\t\t\t * @param documentAttachmentIds  - The ids associated with the attachments being zipped and returned\r\n\t\t\t * @returns - A promise which resolves to the downloaded zip file\r\n\t\t\t */\r\n\t\t\tfunction downloadZipFile(attachmentDataIds) {\r\n\t\t\t    guard.throwIfNotAnObject(\"EUP5L06E\", attachmentDataIds, 'attachmentDataIds');\r\n\r\n\t\t\t\tvar queryData = {\r\n\t\t\t\t    attachmentDataIds: attachmentDataIds\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar url = urlHelper.setParameters('Attachment/GetZippedAttachmentData', queryData);\r\n\r\n\t\t\t\treturn fileDownloader.downloadFile(url);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function to download a file with the specified document attachment ID\r\n\t\t\t * @param documentAttachmentId - The ID of the document attachment to download\r\n\t\t\t * @returns - A promise which resolves to the downloaded file\r\n\t\t\t */\r\n\t\t\tfunction downloadFile(attachmentDataId) {\r\n\t\t\t    guard.throwIfInvalidId(\"EUP5L04E\", attachmentDataId, 'attachmentDataId');\r\n\r\n\t\t\t\tvar queryParams = {\r\n\t\t\t\t    attachmentDataId: attachmentDataId\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar url = urlHelper.setParameters('Attachment/GetAttachmentData', queryParams);\r\n\r\n\t\t\t\treturn fileDownloader.downloadFile(url);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes the attachment with the specified document attachment ID\r\n\t\t\t * @param documentAttachmentId - the ID of the document attachment to remove\r\n\t\t\t * @returns - A promise which resolves when the document attachment has been removed\r\n\t\t\t */\r\n\t\t\tfunction removeAttachment(documentAttachmentId) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP5L05E\", documentAttachmentId, 'attachmentId');\r\n\r\n\t\t\t\tvar urlParameters = {\r\n\t\t\t\t\tdocumentAttachmentId: documentAttachmentId\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn webApiHttp.post(urlHelper.setParameters('Attachment/RemoveAttachment', urlParameters));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn attachmentProxy;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/attachment-proxy.factory.js","//{CODE:EUP5L}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('auditProxy', auditProxy);\r\n\r\n\t\tauditProxy.$inject = ['webApiHttp',\r\n\t\t\t'$q',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'urlHelper',\r\n\t\t    'proxyErrorInterceptor'];\r\n\r\n\t\tconst DEFAULT_ERROR_MSG = \"EINVOICING.PORTAL.PROXIES.AUDIT.RECEIVE_ERROR\";\r\n\r\n\t\tfunction auditProxy(http,\r\n\t\t\t$q,\r\n\t\t\tclientEnums,\r\n\t\t\tenumTranslator,\r\n\t\t\turlHelper,\r\n            proxyErrorInterceptor) {\r\n\t\t\treturn {\r\n\t\t\t\tgetAuditsByDocumentId: getAuditsByDocumentId,\r\n\t\t\t\tgetAuditDocummentSummaryByDocumentId: getAuditDocummentSummaryByDocumentId,\r\n\t\t\t\tgetAuditRecordForDocument: getAuditRecordForDocument\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets audits for document id, filtered and sorted           \r\n\t\t\t */\r\n\t\t\tfunction getAuditsByDocumentId(documentId, lastNRows, eventType, dateTimeFilters, customDateTimeFilter, sortOption) {\r\n\t\t\t    guard.throwIfInvalidId(\"EUP5L03E\", documentId, 'documentId');\r\n\t\t\t\tguard.throwIfNotANumber(\"EUP5L04E\", lastNRows, \"lastNRows\");\r\n\t\t\t\tguard.throwIfNotANumber(\"EUP5L05E\", eventType, \"eventType\");\r\n\t\t\t\tguard.throwIfNullOrUndefined(\"EUP5L06E\", dateTimeFilters, \"dateTimeFilters\");\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP5L07E\", sortOption, \"sortOption\");\r\n\r\n\t\t\t\tif (!customDateTimeFilter) {\r\n\t\t\t\t\tcustomDateTimeFilter = {\r\n\t\t\t\t\t\tfromDate: new Date(),\r\n\t\t\t\t\t\ttoDate: new Date()\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar requestedParams = {\r\n\t\t\t\t    documentId: documentId,\r\n\t\t\t\t\tlastNRows: lastNRows,\r\n\t\t\t\t\teventType: eventType,\r\n\t\t\t\t\tdateTimeFilterOption: dateTimeFilters.toString(),\r\n\t\t\t\t\tfromDate: JSON.stringify(customDateTimeFilter.fromDate).replace(/\"/g, \"\"),\r\n\t\t\t\t\ttoDate: JSON.stringify(customDateTimeFilter.toDate).replace(/\"/g, \"\"),\r\n\t\t\t\t\tsortOption: sortOption\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestedUrl = urlHelper.setParameters('Audit/GetCollectionByDocumentId', requestedParams);\r\n\t\t\t\t\r\n\t\t\t\tvar httpPromise = http.get(requestedUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t    /**\r\n\t\t\t * Function which allows pre-processing of audit data\t\t\t\r\n\t\t\t */\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t    var translated = translateEventTypes(data);\r\n\t\t\t\t    return translated;\r\n\t\t\t\t}\r\n\r\n\t\t\t    /**\r\n                 * Function which allows processing of error data\r\n                 * Must return a failed promise otherwise chained success callbacks are called\r\n                 * @param error\r\n                 */\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    return handleRejectedError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction getAuditDocummentSummaryByDocumentId(documentId) {\r\n\t\t\t    guard.throwIfInvalidId(\"EUP5L08E\", documentId, 'documentId');\r\n\r\n\t\t\t    var requestedParams = {\r\n\t\t\t        documentId: documentId\r\n\t\t\t    };\r\n\r\n\t\t\t    var requestedUrl = urlHelper.setParameters('Audit/GetAuditDocumentSummaryForDocument', requestedParams);\r\n\r\n\t\t\t    var httpPromise = http.get(requestedUrl);\r\n\t\t\t    var newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t    return newPromise;\r\n\r\n\t\t\t    /**\r\n\t\t\t * Function which allows pre-processing of audit data\t\t\t\r\n\t\t\t */\r\n\t\t\t    function resolved(data) {\r\n\t\t\t        enumTranslator.translate(\r\n\t\t\t            clientEnums.documentType,\r\n\t\t\t            data.documentType).then(function(translated) {\r\n\t\t\t                data.documentTypeName = translated;\r\n\t\t\t            }\r\n\t\t\t        );\r\n\t\t\t        return data;\r\n\t\t\t    }\r\n\r\n\t\t\t    /**\r\n                 * Function which allows processing of error data\r\n                 * Must return a failed promise otherwise chained success callbacks are called\r\n                 * @param error\r\n                 */\r\n\t\t\t    function rejected(error) {\r\n\t\t\t        return handleRejectedError(error);\r\n\t\t\t    }\r\n\t\t\t}\r\n\r\n\t\t\tfunction getAuditRecordForDocument(documentId, versionId) {\r\n\t\t\t    guard.throwIfInvalidId(\"EUP5L08E\", documentId, 'documentId');\r\n\t\t\t    guard.throwIfInvalidId(\"EUP5L09E\", versionId, 'versionId');\r\n\t\t\t  \r\n\t\t\t    var requestedParams = {\r\n\t\t\t        documentId: documentId,\r\n\t\t\t        versionId: versionId\r\n\t\t\t    };\r\n\r\n\t\t\t    var requestedUrl = urlHelper.setParameters('Audit/GetAuditRecordForDocument', requestedParams);\r\n\r\n\t\t\t    var httpPromise = http.get(requestedUrl);\r\n\t\t\t    var newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t    return newPromise;\r\n\r\n\t\t\t    /**\r\n\t\t\t * Function which allows pre-processing of audit data\t\t\t\r\n\t\t\t */\r\n\t\t\t    function resolved(data) {\r\n\t\t\t        enumTranslator.translate(\r\n                        clientEnums.documentType,\r\n                        data.documentType)\r\n\t\t\t        .then(function(translated) {\r\n\t\t\t                data.documentTypeName = translated;\r\n\t\t\t\t\t\t\treturn data;\r\n\t\t\t        });\r\n\t\t\t    }\r\n\r\n\t\t\t    /**\r\n                 * Function which allows processing of error data\r\n                 * Must return a failed promise otherwise chained success callbacks are called\r\n                 * @param error\r\n                 */\r\n\t\t\t    function rejected(error) {\r\n\t\t\t        return handleRejectedError(error);\r\n\t\t\t    }\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleRejectedError(error) {\r\n\t\t\t    proxyErrorInterceptor.handleError(error, DEFAULT_ERROR_MSG, \"\");\r\n\t\t\t    return $q.reject(error);\r\n            }\r\n            \r\n\t\t\tfunction translateEventTypes(data) {\r\n\t\t\t    enumTranslator.translateCollection(\r\n\t\t\t\t\t\tclientEnums.eventType,\r\n\t\t\t\t\t\tdata,\r\n\t\t\t\t\t\t'eventTypeId',\r\n\t\t\t\t\t\t'eventTypeName');\r\n\r\n\t\t\t    return data;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn auditProxy;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/audit-proxy.factory.js","define([\r\n    './button-state-resolver.factory'\r\n    \r\n], function (\r\n    buttonStateResolverLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n    \tbuttonStateResolverLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/button-state-resolver/_loader.js","//{CODE:EUP6C}\r\n// di.core.angular.buttonStateResolver\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('buttonStateResolver', buttonStateResolver);\r\n\r\n\t\t/**\r\n\t\t * resolves document state based on einvoicing state\r\n\t\t */\r\n\t\tfunction buttonStateResolver() {\r\n\t\t\treturn {\r\n\t\t\t\tisAttributeEnabled: isAttributeEnabled,\r\n\t\t\t\tisEnabledForActions: isEnabledForActions,\r\n\t\t\t\tisEnabledForStates: isEnabledForStates\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * checks if button required attributes matches context array of attributes\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction isAttributeEnabled(button, contextArray) {\r\n\t\t\t    var result = true;\r\n\r\n\t\t\t\tif (util.isDefined(button.attributesRequired)) {\r\n\r\n\t\t\t\t\tvar attributes = [];\r\n\r\n\t\t\t\t\t_.each(contextArray, function(a) {\r\n\t\t\t\t\t\t\tattributes.push(a.key);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (util.isDefined(button.anyAttribute)) {\r\n\t\t\t\t\t    result = containsAny(attributes, button.attributesRequired);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t    result = containsAll(attributes, button.attributesRequired);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * checks if button required states matches context array of states\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction isEnabledForActions(button, contextArray, itemCount) {\t\t\t\t\r\n\t\t\t    var enabled = false;\r\n\r\n\t\t\t\tif (button.singleAction && itemCount > 1) {\r\n\t\t\t\t\tenabled = false;\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar found = _.find(contextArray, function(action) {\r\n\t\t\t\t\t\treturn button.action === action;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (util.isDefined(found)) {\r\n\t\t\t\t\t\tenabled = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn enabled;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * checks if button required states matches context array of states\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction isEnabledForStates(button, contextArray, requireAllStates) {\r\n\t\t\t\tvar result = false;\r\n\r\n\t\t\t\tif (!button.statesRequired) {\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t} else if (contextArray) {\r\n\t\t\t\t\tif (button.singleAction && contextArray.length > 1) {\r\n\t\t\t\t\t\tresult = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (button.statesRequired[0] === \"ANY\" && contextArray.length > 0) {\r\n\t\t\t\t\t\t\tresult = true;\r\n\t\t\t\t\t\t} else if (requireAllStates) {\r\n\t\t\t\t\t\t\tresult = containsAll(button.statesRequired, contextArray);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresult = containsAny(contextArray, button.statesRequired);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (result && util.isDefined(button.statesDenied)) {\r\n\t\t\t\t\tresult = !containsAny(contextArray, button.statesDenied);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t    /**\r\n\t\t\t* Checks if array contains any element of sub array\t\t\t\t\t\t\t \r\n\t\t\t*/\r\n\t\t\tfunction containsAny(states, requiredStates) {\r\n\t\t\t    var filtered = _.find(requiredStates, function (state) {\r\n\t\t\t        var a = [];\r\n\t\t\t        a.push(state);\r\n\r\n\t\t\t        return checkAnyExist(a, states);\r\n\t\t\t    });\r\n\r\n\t\t\t    return util.isDefined(filtered);\r\n\r\n\t\t\t    function checkAnyExist(needles, haystack) {\r\n\t\t\t        if (!needles) {\r\n\t\t\t            return true;\r\n\t\t\t        }\r\n\r\n\t\t\t        for (var i = 0, len = needles.length; i < len; i++) {\r\n\t\t\t            if ($.inArray(needles[i], haystack) !== -1) return true;\r\n\t\t\t        }\r\n\t\t\t        return false;\r\n\t\t\t    }\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t*\tChecks if array contains all elements of sub array\t\t\t\t\t\t \r\n\t\t\t*/\r\n\t\t\tfunction containsAll(sup, sub) {\r\n\t\t\t\tsup.sort();\r\n\t\t\t\tsub.sort();\r\n\r\n\t\t\t\tvar i, j;\r\n\t\t\t\tfor (i = 0, j = 0; i < sup.length && j < sub.length;) {\r\n\t\t\t\t\tif (sup[i] < sub[j]) {\r\n\t\t\t\t\t\t++i;\r\n\t\t\t\t\t} else if (sup[i] === sub[j]) {\r\n\t\t\t\t\t\t++i;\r\n\t\t\t\t\t\t++j;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// sub[j] not in sup, so sub not subbag\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// make sure there are no elements left in sub\r\n\t\t\t\treturn j === sub.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn buttonStateResolver;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/button-state-resolver/button-state-resolver.factory.js","define(['./document-attachment-configurator.factory'],\r\n    function (documentAttachmentConfiguratorLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tdocumentAttachmentConfiguratorLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/document-attachment-configurator/_loader.js","//{CODE:EUP6V}\r\n// di.einvoicing.ui.portal.portal.attachments.components\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.provider('documentAttachmentConfigurator', documentAttachmentConfiguratorProvider);\r\n\r\n\t\t/**\r\n\t\t * Manages configuration of the document attachment directive\r\n\t\t */\r\n\t\tfunction documentAttachmentConfiguratorProvider() {\r\n\t\t\tvar maximumAttachmentSize;\r\n\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\t/**\r\n\t\t\t * Configure the service\r\n\t\t\t * @param cfg\r\n\t\t\t */\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP6V01E\", cfg, 'cfg');\r\n\r\n\t\t\t\tmaximumAttachmentSize = cfg.maximumAttachmentSize;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets required configuration for the document attachment controller.\r\n\t\t\t */\r\n\t\t\tfunction $get() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgetMaximumAttachmentSize: getMaximumAttachmentSize\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction getMaximumAttachmentSize() {\r\n\t\t\t\t\treturn maximumAttachmentSize;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn documentAttachmentConfiguratorProvider;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/document-attachment-configurator/document-attachment-configurator.factory.js","define([\r\n    './document-attribute-resolver.factory'\r\n], function (\r\n    documentAttributeResolverLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        documentAttributeResolverLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/document-attribute-resolver/_loader.js","//{CODE:CAD03}\r\n// di.core.angular.documentAttribute\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('documentAttributeResolver', documentAttributeResolver);\r\n\r\n\t\tdocumentAttributeResolver.$inject = [\r\n\t\t\t'CLIENT_ENUMS'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * resolves document attributes array\r\n\t\t */\r\n\t\tfunction documentAttributeResolver(\r\n\t\t\tclientEnums) {\r\n\t\t\treturn {\r\n\t\t\t\tresolveAttributeKeys: resolveAttributeKeys,\r\n\t\t\t\taddAttributeById: addAttributeById,\r\n\t\t\t\tremoveAttribute: removeAttribute\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t* Resolves array of documents state keys                \r\n\t\t\t*/\r\n\t\t\tfunction resolveAttributeKeys(ids) {\r\n\t\t\t    var resolvedArray = [];\r\n\r\n\t\t\t    var uniqueList = _.uniq(ids, function (item) {\r\n\t\t\t        return item;\r\n\t\t\t    });\r\n\r\n\t\t\t    _.each(uniqueList, function (id) {\r\n\t\t\t\t\tvar resolved = resolveAttributeKey(id,true);\r\n\t\t\t\t\tresolvedArray.push(resolved);\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn resolvedArray;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * adds attribute object to array by attribute id\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction addAttributeById(array, attributeId, show) {\r\n\t\t\t\tvar exists = _.find(array, function (item) {\r\n\t\t\t\t\treturn item.id === attributeId;\r\n\t\t\t\t});\r\n\t\t\t\tif (!exists) {\r\n\t\t\t\t\tarray.push(resolveAttributeKey(attributeId, show));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * removes attribute object from array\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction removeAttribute(array, attributeId) {\r\n\t\t\t\tarray.fill(array.filter(function (obj) {\r\n\t\t\t\t\treturn obj.id !== attributeId;\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* Gets attribute key for given id                \r\n\t\t\t*/\r\n\t\t\tfunction resolveAttributeKey(attributeId, show) {\r\n\t\t\t\tguard.throwIfInvalidId(\"CAD0303E\", attributeId, \"attributeId\");\r\n\r\n\t\t\t\tif (!util.isDefined(show)) {\r\n\t\t\t\t\tshow = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar key = findFirstKeyWhere(clientEnums.documentAttribute, attributeId);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: attributeId,\r\n\t\t\t\t\tkey: key,\r\n\t\t\t\t\thidden : !show\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Finds dictionary key by its value                \r\n\t\t\t\t */\r\n\t\t\t\tfunction findFirstKeyWhere(obj, value) {\r\n\t\t\t\t\tvar key;\r\n\r\n\t\t\t\t\t_.find(obj, function (v, k) {\r\n\t\t\t\t\t\tif (v === value) {\r\n\t\t\t\t\t\t\tkey = k;\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn key;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn documentAttributeResolver;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/document-attribute-resolver/document-attribute-resolver.factory.js","//{CODE:UPP02}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('documentProxy', documentProxy);\r\n\r\n\t\tdocumentProxy.$inject = [\r\n\t\t\t'webApiHttp',\r\n\t\t\t'urlHelper',\r\n\t\t\t'$q',\r\n            'proxyErrorInterceptor'\r\n\t\t];\r\n\r\n\t\tfunction documentProxy(http, urlHelper, $q, proxyErrorInterceptor) {\r\n\t\t\treturn {\r\n\t\t\t\tgetDocumentClientStateId: getDocumentClientStateId,\r\n\t\t\t\tgetRelatedDocuments: getRelatedDocuments\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets document client state id by document id\t\t \r\n\t\t\t */\r\n\t\t\tfunction getDocumentClientStateId(id, type) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP0201E\", id, 'id');\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP0202E\", type, 'type');\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\ttype: type\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Document/GetDocumentClientState', requestParams);\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolve, reject);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * gets model of related documents by document id\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction getRelatedDocuments(documentId) {\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tid: documentId\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Document/GetRelatedDocuments', requestParams);\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolve, reject);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\tdata.relatedDocuments.sort(function(a, b) {\r\n\t\t\t\t\t\ta = new Date(a.date);\r\n\t\t\t\t\t\tb = new Date(b.date);\r\n\t\t\t\t\t\treturn a > b ? -1 : a < b ? 1 : 0;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t    proxyErrorInterceptor.handleError(error, \"EINVOICING.PORTAL.PROXIES.DOCUMENT.RECEIVE_RELATED_ERROR\", \"\");\r\n\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn documentProxy;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/document-proxy.factory.js","define([\r\n    './document-type-resolver.factory'\r\n], function (\r\n    documentTypeResolverLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n    \tdocumentTypeResolverLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/document-type-resolver/_loader.js","//{CODE:EUP6M}\r\n// di.einvoicing.ui.portal.documentType\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('documentTypeResolver', documentTypeResolver);\r\n\r\n\t\tdocumentTypeResolver.$inject = [\r\n\t\t\t'enumTranslator',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'enumsKeyResolver'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * resolves document type name\r\n\t\t */\r\n\t\tfunction documentTypeResolver(\r\n\t\t\tenumTranslator,\r\n\t\t\tclientEnums,\r\n\t\t\tenumsKeyResolver) {\r\n\t\t\treturn {\r\n\t\t\t\tresolveDocumentType: resolveDocumentType,\r\n\t\t\t\tgetTypeKeyById : getTypeKeyById\r\n\t\t\t};\r\n\r\n\t\t\tfunction resolveDocumentType(typeId) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6M01E\", typeId, \"typeId\");\r\n\t\t\t\t\r\n\t\t\t\tvar enums = enumsKeyResolver.getEnumsForCurrentRole(clientEnums.documentType);\r\n\r\n\t\t\t\treturn enumTranslator.translate(\r\n\t\t\t\t\tenums,\r\n\t\t\t\t\ttypeId);\r\n\t\t\t}\r\n\r\n\t\t\tfunction getTypeKeyById(typeId) {\r\n\t\t\t\tguard.throwIfInvalidId(\"EUP6M02E\", typeId, \"typeId\");\r\n\r\n\t\t\t\tvar types = ['', 'unknown', 'invoice', 'order', 'grn'];\r\n\r\n\t\t\t\treturn types[typeId];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn documentTypeResolver;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/document-type-resolver/document-type-resolver.factory.js","define([\r\n  './file-extension-validator.factory'\r\n], function (\r\n    fileExtensionValidatorFactoryLoader\r\n    ){\r\n    'use strict';\r\n\r\n    return function(module) {\r\n      fileExtensionValidatorFactoryLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/file-extension-validator/_loader.js","//{CODE:FEV01}\r\n// di.einvoicing.ui.portal.components.fileExtensionValidator\r\ndefine(function () {\r\n  'use strict';\r\n\r\n  return function (module){\r\n    var util = $di.utility.util;\r\n    var guard = $di.exception.guard;\r\n\r\n    module.factory('fileExtensionValidator', fileExtensionValidator);\r\n    fileExtensionValidator.$inject = ['documentAttachmentConfigurator'];\r\n\r\n    function fileExtensionValidator(documentAttachmentConfigurator) {\r\n      return {\r\n        isFileExtensionValid: isFileExtensionValid\r\n      };\r\n\r\n      /**\r\n      * Check if the file extension provided is valid against a list of invalid extensions\r\n      */\r\n      function isFileExtensionValid(fileName){\r\n      \tguard.throwIfEmptyString(\"FEV0101E\", fileName, 'fileName');\r\n      \tguard.throwIfUndefined(\"FEV0101E\", fileName, 'fileName');\r\n\r\n        var fileExtension = fileName.substr((~-fileName.lastIndexOf(\".\") >>> 0) + 2);\r\n\t      if (util.isNonEmptyString(fileExtension) === false) {\r\n\t\t        return false;\r\n\t      }\r\n\r\n        var invalidFileExtensions = documentAttachmentConfigurator.getDisallowedFileExtensions();\r\n\r\n        var disallowedExtension = _.find(invalidFileExtensions, function(invalidFileExtension) {\r\n          return invalidFileExtension === fileExtension;\r\n        });\r\n\r\n        if (util.isNullOrUndefined(disallowedExtension)) {\r\n          return true;\r\n        }\r\n\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return fileExtensionValidator;\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/file-extension-validator/file-extension-validator.factory.js","//{CODE:EIP02}\r\n// di.einvoicing.proxies.fileTransfer\r\ndefine([\r\n\t'./file-uploader.factory',\r\n\t'./document-downloader.factory'\r\n], function (\r\n\tfileUploaderLoader, documentDownloaderLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tfileUploaderLoader(module);\r\n\t\tdocumentDownloaderLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/file-transfer/_loader.js","//{CODE:DEF0Z}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('documentDownloader', documentDownloader);\r\n\r\n\t\tdocumentDownloader.$inject = ['fileDownloader', 'urlHelper'];\r\n\r\n\t\tfunction documentDownloader(fileDownloader, urlHelper) {\r\n\t\t\treturn {\r\n\t\t\t\tdownloadRenderedInvoice: downloadRenderedInvoice,\r\n\t\t\t\tdownloadRenderedPurchaseOrder: downloadRenderedPurchaseOrder,\r\n\t\t\t\tdownloadPurchaseOrdersCsv: downloadPurchaseOrdersCsv\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t* Download rendered invoice by document id\t\t\t \r\n\t\t\t*/\r\n\t\t\tfunction downloadRenderedInvoice(documentId) {\r\n\t\t\t\tguard.throwIfInvalidId(\"DEF0Z01E\", documentId, 'documentId');\r\n\r\n\t\t\t\tvar url = 'Invoice/GetRenderedInvoiceByDocumentId/' + documentId;\r\n\r\n\t\t\t\tfileDownloader.downloadFile(url);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Downloads rendered order\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction downloadRenderedPurchaseOrder(documentId) {\r\n\t\t\t\tguard.throwIfInvalidId(\"DEF0Z02E\", documentId, 'documentId');\r\n\r\n\t\t\t\tvar url = 'PurchaseOrder/GetRenderedPurchaseOrderByDocumentId/' + documentId;\r\n\r\n\t\t\t\tfileDownloader.downloadFile(url);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Downloads the CSV file containing data for the requested purchase order ids\r\n\t\t\t * @param {} purchaseOrderIds \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction downloadPurchaseOrdersCsv(purchaseOrderIds) {\r\n\t\t\t\tguard.throwIfEmptyArray(\"DEF0Z03E\", purchaseOrderIds, 'purchaseOrderIds');\r\n\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tids: purchaseOrderIds\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('PurchaseOrder/DownloadAsCsv', requestParams);\r\n\r\n\t\t\t\tfileDownloader.downloadFile(requestUrl);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn documentDownloader;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/file-transfer/document-downloader.factory.js","//{CODE:/UP0W}\r\n// di.einvoicing.ui.portal.proxies.fileTransfer\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('fileUploader', fileUploader);\r\n\r\n\t\tfileUploader.$inject = ['Upload', 'endpoints', 'serverResponseHandler', 'authenticationTicketValidator'];\r\n\r\n\t\t/**\r\n\t\t * File Uploader wrapper for the ng-file-upload operation\r\n\t\t */\r\n\t\tfunction fileUploader(httpUpload, endpoints, serverResponseHandler, authenticationTicketValidator) {\r\n\t\t\tvar util = $di.utility.util;\r\n\r\n\t\t\treturn {\r\n\t\t\t    upload: validateAuthenticationTicketAndUpload\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Handles uploading the specified file to the specified relative URL and endpoint\r\n\t\t\t * @param relativeUrl - The relative URL to upload the file to\r\n\t\t\t * @param file - The file to upload\r\n\t\t\t * @param endpoint - The endpoint to upload the file to\r\n\t\t\t * @returns - Promise representing the file upload\r\n\t\t\t */\r\n\t\t\tfunction validateAuthenticationTicketAndUpload(relativeUrl, file, endpoint) {\r\n\t\t\t    return authenticationTicketValidator.validateTicket(true, upload);\r\n\r\n\t\t\t    function upload() {\r\n\t\t\t        var url = endpoints.getUrl(relativeUrl, endpoint);\r\n\r\n\t\t\t        var promise = httpUpload.upload({\r\n\t\t\t            url: url,\r\n\t\t\t            data: {\r\n\t\t\t                file: file\r\n\t\t\t            }\r\n\t\t\t        });\r\n\r\n\t\t\t        promise = promise.then(success);\r\n\r\n\t\t\t        /**\r\n\t\t\t\t\t * Function which extracts the HTTP data from the response to make the promise \r\n\t\t\t\t\t * compatible with the server response handler\r\n\t\t\t\t\t * @param httpResponse - The HTTP response to extract the data from\r\n\t\t\t\t\t * @returns - The data from the HTTP response\r\n\t\t\t\t\t */\r\n\t\t\t        function success(httpResponse) {\r\n\t\t\t            if (util.isObject(httpResponse)) {\r\n\t\t\t                return httpResponse.data;\r\n\t\t\t            } else {\r\n\t\t\t                return httpResponse;\r\n\t\t\t            }\r\n\t\t\t        }\r\n\r\n\t\t\t        var newPromise = serverResponseHandler.handleServerResponsePromise(promise);\r\n\r\n\t\t\t        return newPromise;\r\n\t\t\t    }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn fileUploader;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/file-transfer/file-uploader.factory.js","//{CODE:EIP01}\r\n// di.einvoicing.proxies.formatters\r\ndefine([\r\n    './invoice-formatter.factory',\r\n    './purchase-order-formatter.factory',\r\n    './grn-formatter.factory',\r\n    './date-formatter.factory'\r\n], function(\r\n    invoiceFormatterLoader,\r\n    purchaseOrderFormatterLoader,\r\n\tgrnFormatterLoader,\r\n\tdateFormatterLoader) {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        invoiceFormatterLoader(module);\r\n        purchaseOrderFormatterLoader(module);\r\n\t\tgrnFormatterLoader(module);\r\n\t\tdateFormatterLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/formatters/_loader.js","//{CODE:DEF15}\r\ndefine(['moment'], function (moment) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('dateFormatter', dateFormatter);\r\n\t\tdateFormatter.$inject = ['diMoment', 'diDateFilter'];\r\n\r\n\t\tfunction dateFormatter(diMoment, diDate) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttoServerDate: toServerDate,\r\n\t\t\t\ttoClientDate: toClientDate,\r\n\t\t\t\ttoDateTimeWithZone: toDateTimeWithZone\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Formats the client date into the server accepted format\r\n\t\t\t */\r\n\t\t\tfunction toServerDate(clientDate) {\r\n\t\t\t\tif (util.isNullOrUndefined(clientDate) || clientDate === '') {\r\n\t\t\t\t\treturn clientDate;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (moment.isMoment(clientDate) && clientDate.isValid()) {\r\n\t\t\t\t\treturn clientDate.format();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dateAsMoment = diMoment(clientDate);\r\n\t\t\t\tif (moment.isMoment(dateAsMoment) && dateAsMoment.isValid()) {\r\n\t\t\t\t\treturn dateAsMoment.format();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn clientDate;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Formats the server date into the client accepted format\r\n\t\t\t */\r\n\t\t\tfunction toClientDate(serverDate) {\r\n\t\t\t\tif (util.isNullOrUndefined(serverDate) || serverDate === '') {\r\n\t\t\t\t\treturn serverDate;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar clientDate = diDate(serverDate);\r\n\t\t\t\treturn clientDate;\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Formats the server utc date to the local client datetime format using the client's timezone\r\n\t\t\t */\r\n\t\t\tfunction toDateTimeWithZone(serverDate) {\r\n\t\t\t\tif (util.isNullOrUndefined(serverDate) || serverDate === '') {\r\n\t\t\t\t\treturn serverDate;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar zone = moment.tz.guess() || \"Europe/London\";\r\n\r\n\t\t\t\tvar clientDate = moment.utc(serverDate).tz(zone);\r\n\t\t\t\treturn clientDate;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn dateFormatter;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/formatters/date-formatter.factory.js","define(function() {\r\n    'use strict';\r\n\r\n    return function(module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.factory('grnFormatter', grnFormatter);\r\n\r\n        function grnFormatter() {\r\n\r\n            return {\r\n                reformatServerGrnDetailsForClient: reformatServerGrnDetailsForClient\r\n            }\r\n\r\n            function reformatServerGrnDetailsForClient(serverObject) {\r\n                if (!util.isObject(serverObject)) {\r\n                    return null;\r\n                }\r\n\r\n                var reformattedGrn = serverObject;\r\n                return reformattedGrn;\r\n            }\r\n        }\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/formatters/grn-formatter.factory.js","//{CODE:EUP40}\r\n// di.einvoicing.ui.portal.components.company\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('invoiceFormatter', invoiceFormatter);\r\n\t\tinvoiceFormatter.$inject = ['dateFormatter'];\r\n\r\n\t\tfunction invoiceFormatter(dateFormatter) {\r\n\t\t\tvar mapClientToServer = {\r\n\t\t\t    code: 'suppliersProductCode',\r\n\t\t\t    supplierCodeScheme: 'supplierPartyIdentifierScheme', \r\n\t\t\t    supplierCodeSchemeId: 'supplierPartyIdentifierSchemeId', \r\n\t\t\t    customerCodeScheme: 'customerPartyIdentifierScheme', \r\n\t\t\t    customerCodeSchemeId: 'customerPartyIdentifierSchemeId', \r\n\t\t\t    accountingCustomerCode: 'accountingCustomerPartyIdentifier', \r\n\t\t\t    accountingCustomerCodeScheme: 'accountingCustomerPartyIdentifierScheme',\r\n\t\t\t    accountingCustomerCodeSchemeId: 'accountingCustomerPartyIdentifierSchemeId' \r\n\t\t\t};\r\n\r\n\t\t\tvar mapServerToClient = _.invert(mapClientToServer);\r\n\t\t\tvar headerDatesPropertiesKeys = ['date', 'taxPointDate', 'deliveryDate', 'periodStartDate', 'periodEndDate', 'paymentDueDate'];\r\n\t\t\tvar lineDatesPropertiesKeys = ['periodStartDate', 'periodEndDate'];\r\n\t\t\tvar additionalDocumentReferencesDatesPropertiesKeys = ['createdDateTime'];\r\n\t\t\tvar toClientDate = dateFormatter.toClientDate;\r\n\t\t\tvar toServerDate = dateFormatter.toServerDate;\r\n\t\t\tvar toDateTimeWithZone = dateFormatter.toDateTimeWithZone;\r\n\r\n\t\t\treturn {\r\n\t\t\t\treformatServerInvoiceDetailsForClient: reformatServerInvoiceDetailsForClient,\r\n\t\t\t\treformatServerInvoiceForClient: reformatServerInvoiceForClient,\r\n\t\t\t\treformatClientInvoiceForServer: reformatClientInvoiceForServer\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Reformats a server invoice for the client\r\n\t\t\t * @param invoice\r\n\t\t\t */\r\n\t\t\tfunction reformatServerInvoiceForClient(serverObject) {\r\n\t\t\t\tif (!util.isObject(serverObject)) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar invoice = serverObject.invoice;\r\n\t\t\t\tvar reformattedInvoice = reformatObject(invoice.header, mapServerToClient, headerDatesPropertiesKeys, toClientDate);\r\n\r\n\t\t\t\tif (serverObject.paymentTerms) {\r\n\t\t\t\t\treformattedInvoice.paymentDueDate = toClientDate(serverObject.paymentTerms.paymentDueDate);\r\n\t\t\t\t\treformattedInvoice.paymentTermsId = serverObject.paymentTerms.id;\r\n\t\t\t\t\treformattedInvoice.invoiceHeaderId = serverObject.paymentTerms.invoiceHeaderId;\r\n\t\t\t\t\treformattedInvoice.paymentTerms = serverObject.paymentTerms.paymentTerms;\r\n\t\t\t\t\treformattedInvoice.paymentTermsVersion = serverObject.paymentTerms.version;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treformattedInvoice.createdByUserId = serverObject.createdByUserId;\r\n\t\t\t\treformattedInvoice.createdDateTime = serverObject.createdDateTime;\r\n\t\t\t\treformattedInvoice.lastModifiedByUserId = serverObject.lastModifiedByUserId;\r\n\t\t\t\treformattedInvoice.lastModifiedDateTime = serverObject.lastModifiedDateTime;\r\n\t\t\t    reformattedInvoice.documentSource = serverObject.documentSource;\r\n\t\t\t    reformattedInvoice.lastDocumentSource = serverObject.lastDocumentSource;\r\n\t\t\t\treformattedInvoice.clientEInvoicingState = serverObject.clientState;\r\n\t\t\t\treformattedInvoice.countOfAttachments = serverObject.countOfAttachments;\r\n\r\n\t\t\t\treformattedInvoice.attributes.fill(serverObject.attributes);\r\n\t\t\t\treformattedInvoice.actions.fill(serverObject.actions);\r\n\r\n\t\t\t\treformattedInvoice.allowancesCharges = [];\r\n\t\t\t\treformattedInvoice.lines = [];\r\n\t\t\t\t_.each(serverObject.allowancesCharges, function (allowanceCharge) {\r\n\r\n\t\t\t\t\tvar reformattedAllowanceCharge = reformatObject(allowanceCharge, mapServerToClient);\r\n\r\n\t\t\t\t\treformattedInvoice.allowancesCharges.push(reformattedAllowanceCharge);\r\n\t\t\t\t});\r\n\r\n\t\t\t\treformattedInvoice.taxBreakdown = [];\r\n\t\t\t\t_.each(serverObject.taxBreakdown, function (taxItem) {\r\n\t\t\t\t\tvar reformattedTaxItem = reformatObject(taxItem, mapServerToClient);\r\n\r\n\t\t\t\t\treformattedInvoice.taxBreakdown.push(reformattedTaxItem);\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\t_.each(invoice.details, function (invoiceLine) {\r\n\r\n\t\t\t\t\tvar reformattedLine = reformatObject(invoiceLine, mapServerToClient, lineDatesPropertiesKeys, toClientDate);\r\n\r\n\t\t\t\t\treformattedInvoice.lines.push(reformattedLine);\r\n\t\t\t\t});\r\n\r\n\t\t\t\treformattedInvoice.additionalDocumentReferences = reformatAdditionalDocumentReferences(serverObject.additionalDocumentReferences, toDateTimeWithZone);\r\n\t\t\t\t\r\n\t\t\t\treturn reformattedInvoice;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Reformats a server invoice details for the client           \r\n\t\t\t */\r\n\t\t\tfunction reformatServerInvoiceDetailsForClient(serverObject) {\r\n\t\t\t\tif (!util.isObject(serverObject)) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar reformattedInvoice = reformatObject(serverObject, mapServerToClient, headerDatesPropertiesKeys, toClientDate);\r\n\r\n\t\t\t\tvar reformattedInvoiceAllowancesCharges = [];\r\n\r\n\t\t\t\t_.each(reformattedInvoice.allowancesCharges, function (allowanceCharge) {\r\n\r\n\t\t\t\t\tvar reformattedAllowanceCharge = reformatObject(allowanceCharge, mapServerToClient);\r\n\r\n\t\t\t\t\treformattedInvoiceAllowancesCharges.push(reformattedAllowanceCharge);\r\n\t\t\t\t});\r\n\r\n\t\t\t\treformattedInvoice.allowancesCharges = reformattedInvoiceAllowancesCharges;\r\n\r\n\t\t\t\tvar reformattedInvoiceLines = [];\r\n\r\n\t\t\t\t_.each(reformattedInvoice.lines, function (invoiceLine) {\r\n\t\t\t\t\tvar reformattedLine = reformatObject(invoiceLine, mapServerToClient, lineDatesPropertiesKeys, toClientDate);\r\n\r\n\t\t\t\t\treformattedInvoiceLines.push(reformattedLine);\r\n\t\t\t\t});\r\n\r\n\t\t\t\treformattedInvoice.lines = reformattedInvoiceLines;\r\n\t\t\t\treformattedInvoice.additionalDocumentReferences = reformatAdditionalDocumentReferences(serverObject.additionalDocumentReferences, toDateTimeWithZone);\r\n\r\n\t\t\t\treturn reformattedInvoice;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Reformats a client invoice for the server\r\n\t\t\t * @param invoice\r\n\t\t\t */\r\n\t\t\tfunction reformatClientInvoiceForServer(invoice) {\r\n\t\t\t\tif (util.isObject(invoice) === false) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar reformattedInvoice = {};\r\n\t\t\t\t\r\n\t\t\t\tvar allowancesCharges = [];\r\n\r\n\t\t\t\treformattedInvoice.header = reformatObject(invoice, mapClientToServer, headerDatesPropertiesKeys, toServerDate);\r\n\t\t\t\tdelete reformattedInvoice.header.lines;\r\n\t\t\t\treformattedInvoice.details = [];\r\n\r\n\t\t\t\t_.each(invoice.lines, function (invoiceLine) {\r\n\t\t\t\t\tvar reformattedLine = reformatObject(invoiceLine, mapClientToServer, lineDatesPropertiesKeys, toServerDate);\r\n\t\t\t\t\treformattedInvoice.details.push(reformattedLine);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t_.each(invoice.allowancesCharges, function (allowanceCharge) {\r\n\t\t\t\t\tvar reformattedAllowanceCharge = reformatObject(allowanceCharge, mapClientToServer);\r\n\t\t\t\t\tallowancesCharges.push(reformattedAllowanceCharge);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar taxBreakdown = [];\r\n\t\t\t\t_.each(invoice.taxBreakdown, function (taxBreakdownItem) {\r\n\t\t\t\t\tvar reformattedTaxBreakdownItem = reformatObject(taxBreakdownItem, mapClientToServer);\r\n\t\t\t\t\ttaxBreakdown.push(reformattedTaxBreakdownItem);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar additionalDocumentReferences = reformatAdditionalDocumentReferences(invoice.additionalDocumentReferences, toServerDate);\r\n\r\n\t\t\t\tvar paymentTerms = {\r\n\t\t\t\t\tid: invoice.paymentTermsId,\r\n\t\t\t\t\tpaymentDueDate: toServerDate(invoice.paymentDueDate),\r\n\t\t\t\t\tinvoiceHeaderId: invoice.invoiceHeaderId,\r\n\t\t\t\t\tpaymentTerms: invoice.paymentTerms,\r\n\t\t\t\t\tversion: invoice.paymentTermsVersion\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar serverObject = {\r\n\t\t\t\t\tcreatedByUserId: invoice.createdByUserId,\r\n\t\t\t\t\tcreatedDateTime: invoice.createdDateTime,\r\n\t\t\t\t\tlastModifiedByUserId: invoice.lastModifiedByUserId,\r\n\t\t\t\t\tlastModifiedDateTime: invoice.lastModifiedDateTime,\r\n\t\t\t\t\tdocumentSource: invoice.documentSource,\r\n                    lastDocumentSource: invoice.lastDocumentSource,\r\n\t\t\t\t\tinvoice: reformattedInvoice,\r\n\t\t\t\t\tallowancesCharges: allowancesCharges,\r\n\t\t\t\t\tpaymentTerms: paymentTerms,\r\n\t\t\t\t\ttaxBreakdown: taxBreakdown,\r\n\t\t\t\t\tadditionalDocumentReferences: additionalDocumentReferences\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn serverObject;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Reformats the specified object using the specified map\r\n\t\t\t * @param objectToReformat\r\n\t\t\t * @param map\r\n\t\t\t */\r\n\t\t\tfunction reformatObject(objectToReformat, map, transformKeys, transformFn) {\r\n\t\t\t\tvar outputObject = {\r\n\t\t\t\t\tattributes: [],\r\n\t\t\t\t\tactions: []\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar transformed = reformatAndTransform(objectToReformat, transformKeys, transformFn, map);\r\n\r\n\t\t\t\treturn _.extend(outputObject, transformed);\r\n\t\t\t}\r\n\r\n\t\t\tfunction reformatAndTransform(objectToReformat, transformKeys, transformFn, map) {\r\n\t\t\t\tvar outputObject = {};\r\n\r\n\t\t\t\tvar hasKeysToTransform = util.isArray(transformKeys);\r\n\t\t\t\tvar hasTransformFunction = util.isFunction(transformFn);\r\n\r\n\t\t\t\t_.each(objectToReformat, function (value, key) {\r\n\t\t\t\t\tvar propertyKey = (map || {})[key] !== undefined ? map[key] : key;\r\n\t\t\t\t\toutputObject[propertyKey] = (hasKeysToTransform && hasTransformFunction && _.contains(transformKeys, propertyKey))\r\n\t\t\t\t\t\t\t\t\t\t\t\t? transformFn(value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t: value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn outputObject;\r\n\t\t\t}\r\n\r\n\t\t\tfunction reformatAdditionalDocumentReferences(additionalDocumentReferences, dateFormattingFunc) {\r\n\t\t\t\treturn _.map(additionalDocumentReferences, function (additionalReference) {\r\n\t\t\t\t\treturn reformatAndTransform(additionalReference, additionalDocumentReferencesDatesPropertiesKeys, dateFormattingFunc);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn invoiceFormatter;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/formatters/invoice-formatter.factory.js","//{CODE:EUP40}\r\n// di.einvoicing.ui.portal.components.company\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.factory('purchaseOrderFormatter', purchaseOrderFormatter);\r\n\r\n        function purchaseOrderFormatter() {\r\n            return {\r\n                reformatServerPurchaseOrderForClient: reformatServerPurchaseOrderForClient,\r\n                reformatClientPurchaseOrderForServer: reformatClientPurchaseOrderForServer\r\n            };\r\n\r\n            /**\r\n             * Reformats a server purchase order for the client\r\n             * @param purchaseOrder\r\n             */\r\n            function reformatServerPurchaseOrderForClient(serverObject) {\r\n                if (!util.isObject(serverObject)) {\r\n                    return null;\r\n                }\r\n                                \r\n                var po = serverObject;\r\n                \r\n                var reformattedPo = po;\r\n                return reformattedPo;\r\n            }\r\n            \r\n            /**\r\n             * Reformats a client purchase order for the server\r\n             * @param purchaseOrder\r\n             */\r\n            function reformatClientPurchaseOrderForServer(purchaseOrder) {\r\n                if (util.isObject(purchaseOrder) === false) {\r\n                    return null;\r\n                }\r\n\r\n                var reformattedPurchaseOrder = purchaseOrder;\r\n                \r\n                return reformattedPurchaseOrder;\r\n            }\r\n        }\r\n\r\n        return purchaseOrderFormatter;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/formatters/purchase-order-formatter.factory.js","define([\r\n    './notification-handler.factory'\r\n], function (\r\n    notificationHandlerLoader\r\n\t) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        notificationHandlerLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/notification-handler/_loader.js","//{CODE:EUP7G}\r\n// di.einvoicing.ui.portal.portal.invoices._components\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('notificationHandler', notificationHandler);\r\n\r\n\t\tnotificationHandler.$inject = ['notifier', 'translator'];\r\n\r\n\t\tfunction notificationHandler(notifier, translator) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tshowSuccess: showSuccess,\r\n\t\t\t\tshowWarning: showWarning,\r\n\t\t\t\tshowInfo: showInfo,\r\n\t\t\t\tshowError: showError\r\n\t\t\t}\r\n\r\n\t\t\tfunction showSuccess(message, identifier, onClick, title, timeOut) {\r\n\t\t\t    formatMessage(message, identifier).then(function (translated) {\r\n\t\t\t        var popupTitle = resolveTitle(title, 'success');\r\n\t\t\t        notifier.success(translated, popupTitle, onClick, timeOut);\r\n\t\t\t    });\r\n\t\t\t}\r\n\r\n\t\t\tfunction showWarning(message, identifier, onClick, title) {\r\n\t            formatMessage(message, identifier).then(function (translated) {\r\n\t\t\t\t    var popupTitle = resolveTitle(title, 'warning');\r\n\t\t\t\t    notifier.warning(translated, popupTitle, onClick);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction showInfo(message, identifier, title) {\r\n\t\t\t    formatMessage(message, identifier).then(function (translated) {\r\n\t\t\t        var popupTitle = resolveTitle(title, 'info');\r\n\t\t\t        notifier.info(translated, popupTitle);\r\n\t\t\t    });\r\n\t\t\t}\r\n\r\n\t\t\tfunction showError(message, identifier, title) {\r\n\t\t\t    showNotification('error', message, identifier, title);\r\n\t\t\t}\r\n\r\n\t\t\tfunction showNotification(type, message, identifier, title, action) {\r\n\t\t\t    formatMessage(message, identifier).then(function (translated) {\r\n\t\t\t        var popupTitle = resolveTitle(title, type);\r\n\r\n\t\t\t        if (util.isFunction(notifier[type])) {\r\n\t\t\t            notifier[type](translated, popupTitle, action);\r\n\t\t\t        }\r\n\t\t\t    });\r\n\t\t\t}\r\n\r\n\t\t\tfunction resolveTitle(title, type) {\r\n\t\t\t\tif (util.isNonEmptyString(title)) {\r\n\t\t\t\t\treturn translator.instantTranslate(title);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 'error':\r\n\t\t\t\t\t    return translator.instantTranslate(\"EINVOICING.PORTAL.ACTIONS.DEFAULT_ERROR_TITLE\");\r\n\t\t\t\t\tcase 'info':\r\n\t\t\t\t\t    return translator.instantTranslate(\"EINVOICING.PORTAL.ACTIONS.DEFAULT_INFO_TITLE\");\r\n\t\t\t\t\tcase 'warning':\r\n\t\t\t\t\t    return translator.instantTranslate(\"EINVOICING.PORTAL.ACTIONS.DEFAULT_WARNING_TITLE\");\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t    return translator.instantTranslate(\"EINVOICING.PORTAL.ACTIONS.DEFAULT_SUCCESS_TITLE\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} \r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t *  formats notification message             \r\n\t\t\t */\r\n\t\t\tfunction formatMessage(message, identifier) {\r\n\t\t\t\tvar ref = resolveIdentifier(identifier);\r\n\r\n\t\t\t    return translator.translate(\r\n\t\t\t        message,\r\n\t\t\t        {\r\n\t\t\t            ref: ref\r\n\t\t\t        });\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * resolves reference from identifier             \r\n\t\t\t\t */\r\n\t\t\t\tfunction resolveIdentifier(value) {\r\n\t\t\t\t\tvar reference = value || '';\r\n\r\n\t\t\t\t\treturn reference.toString();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn notificationHandler;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/notification-handler/notification-handler.factory.js","//{CODE:EUP2O}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    var guard = $di.exception.guard;\r\n\t    var util = $di.utility.util;\r\n\r\n\t\tmodule.factory('partyProxy', partyProxy);\r\n\r\n\t\tpartyProxy.$inject = ['webApiHttp', '$q', 'urlHelper', 'proxyErrorInterceptor',\r\n            'CLIENT_ENUMS'];\r\n\r\n\t\tfunction partyProxy(http, $q, urlHelper, proxyErrorInterceptor, clientEnums) {\r\n\t\t\treturn {\r\n\t\t\t\tget: get,\r\n\t\t\t\tgetPartyCountriesByType: getPartyCountriesByType,\r\n\t\t\t\tgetCountryByCode: getCountryByCode,\r\n\t\t\t\tgetAllPartiesUserCanWorkFor: getAllPartiesUserCanWorkFor,\r\n\t\t\t\tgetAllPartiesUserCanBeAllocatedTo: getAllPartiesUserCanBeAllocatedTo,\r\n\t\t\t\tgetAllRelatedPartyCountries: getAllRelatedPartyCountries,\r\n\t\t\t\tgetPartyContacts: getPartyContacts,\r\n\t\t\t\tgetLocationsForParty: getLocationsForParty,\r\n\t\t\t\tgetPartyManagementSearchResults: getPartyManagementSearchResults,\r\n\t\t\t\tgetWorkingForPartyManagementSearchResults: getWorkingForPartyManagementSearchResults,\r\n\t\t\t\tgetPartyWithAccountingCustomers: getPartyWithAccountingCustomers,\r\n\t\t\t\tgetAllUserWorkingForRelatedAllocatedToParties: getAllUserWorkingForRelatedAllocatedToParties,\r\n\t\t\t\tdiscoverPotentialTradingRelationshipParties: discoverPotentialTradingRelationshipParties,\r\n\t\t\t\tgetEnabledSchemes: getEnabledSchemes,\r\n\t\t\t\tresolveSchemeCodeFromId: resolveSchemeCodeFromId,\r\n\t\t\t\taddNewPartyCode: addNewPartyCode,\r\n\t\t\t\tupdatePartyCode: updatePartyCode,\r\n\t\t\t\tgetPartyCodesForParty: getPartyCodesForParty,\r\n\t\t\t\tgetAssociatedPartiesTradingRelationshipsByParty: getAssociatedPartiesTradingRelationshipsByParty,\r\n                validatePartyCode: validatePartyCode\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Retrieves a party by its id\r\n\t\t\t */\r\n\t\t\tfunction get(id) {\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/Get', { id });\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t}, error => {\r\n\t\t\t\t\t    return handleRejectError(error, \"EINVOICING.PROXIES.PARTY_GET.RECEIVE_ERROR\");\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\r\n\t\t    /**\r\n\t\t\t * Loads party contacts     \r\n\t\t\t */\r\n\t\t\tfunction getPartyContacts(partyId) {\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tpartyId: partyId\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetPartyContacts', requestProperties);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t    /**\r\n\t\t\t\t * Function which allows pre-processing of the data\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t    /**\r\n\t\t\t\t * Method which is processed when the receive of data fails\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    return handleRejectError(error, \"EINVOICING.PROXIES.PARTY_CONTACTS.RECEIVE_ERROR\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads party locations     \r\n\t\t\t */\r\n\t\t\tfunction getLocationsForParty(partyId, locationType) {\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tpartyId: partyId,\r\n\t\t\t\t\ttypeId: locationType\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetPartyLocations', requestProperties);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Function which allows pre-processing of the data\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    return handleRejectError(error, \"EINVOICING.PROXIES.PARTY_LOCATIONS.RECEIVE_ERROR\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets model for the party managment page\r\n\t\t\t */\r\n\t\t\tfunction getPartyManagementSearchResults(relatedPartyId, searchText) {\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\trelatedPartyId: relatedPartyId,\r\n\t\t\t\t\tsearchText: searchText\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetPartyManagementSearchResults', requestProperties);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    return handleRejectError(error, \"EINVOICING.PROXIES.PARTY_MANAGEMENT.RESULT_ERROR\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction getWorkingForPartyManagementSearchResults(searchText) {\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tsearchText: searchText\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetWorkingForPartyManagementSearchResults', requestProperties);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    return handleRejectError(error, \"EINVOICING.PROXIES.PARTY_MANAGEMENT.RESULT_ERROR\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads working parties          \r\n\t\t\t */\r\n\t\t\tfunction getAllPartiesUserCanWorkFor(userId) {\r\n\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tuserId: userId\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetWorkingPartyCollection', requestProperties);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Function which allows pre-processing of the data\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Method which is processed when the receive of data fails\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    return handleRejectError(error, \"EINVOICING.PROXIES.PARTY_COUNTRY.RECEIVE_ERROR\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads allocated parties\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction getAllPartiesUserCanBeAllocatedTo(userId, filteredIds) {\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tuserId: userId\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetAllocatedPartyCollection', requestProperties);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Function which allows pre-processing of the party country data\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tvar output = [];\r\n\t\t\t\t\tvar ids = [];\r\n\t\t\t\t\t_.each(data, function (party) {\r\n\r\n\t\t\t\t\t\tvar filtered = _.find(filteredIds, function (id) {\r\n\t\t\t\t\t\t\treturn party.partyId === id;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (filtered) {\r\n\t\t\t\t\t\t\toutput.push(party);\r\n\t\t\t\t\t\t\tids.push(party.partyId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn output;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Method which is processed when the receive of party countries fails\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    return handleRejectError(error, \"EINVOICING.PROXIES.PARTY_COUNTRY.RECEIVE_ERROR\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction getAllUserWorkingForRelatedAllocatedToParties(userId, workingForIds) {\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tuserId: userId,\r\n\t\t\t\t\tids: workingForIds\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetAllUserWorkingForRelatedAllocatedToParties', requestProperties);\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\r\n\t\t\t\t\t_.each(data, function (dataItem) {\r\n\t\t\t\t\t\tdataItem.name = dataItem.party.name;\r\n\t\t\t\t\t\tdataItem.partyId = dataItem.party.id;\r\n\t\t\t\t\t\tdataItem.parentId = dataItem.party.parentPartyId;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction getAllRelatedPartyCountries(userId, workingForIds) {\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tuserId: userId,\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tids: workingForIds\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetRelatedPartyCollection', requestProperties);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Function which allows pre-processing of the party country data\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tvar output = [];\r\n\t\t\t\t\tvar ids = [];\r\n\t\t\t\t\t_.each(data, function (party) {\r\n\r\n\t\t\t\t\t\tvar filtered = _.find(workingForIds, function (id) {\r\n\t\t\t\t\t\t\treturn party.party.id === id;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (!filtered) {\r\n\t\t\t\t\t\t\toutput.push(party);\r\n\t\t\t\t\t\t\tids.push(party.party.id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn output;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Method which is processed when the receive of party countries fails\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    return handleRejectError(error, \"EINVOICING.PROXIES.PARTY_COUNTRY.RECEIVE_ERROR\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads party countries by party type           \r\n\t\t\t */\r\n\t\t\tfunction getPartyCountriesByType(partyType) {\r\n\t\t\t\tguard.throwIfEmptyString(\"EUP2O01E\", partyType, 'partyType');\r\n\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tpartyType: partyType\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetCollectionByPartyType', requestProperties);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Function which allows pre-processing of the party country data\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Method which is processed when the receive of party countries fails\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    return handleRejectError(error, \"EINVOICING.PROXIES.PARTY_COUNTRY.RECEIVE_ERROR\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Loads country details data by country code             \r\n\t\t\t */\r\n\t\t\tfunction getCountryByCode(countryCode) {\r\n\t\t\t\tguard.throwIfEmptyString(\"EUP2O02E\", countryCode, 'countryCode');\r\n\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tcode: countryCode\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetCountryByCountryCode', requestProperties);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved(), rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Function which allows pre-processing of the resolved data\t            \r\n\t\t\t\t */\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Called when loading country data fails             \r\n\t\t\t\t */\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    return handleRejectError(error, \"EINVOICING.PORTAL.PROXIES.COUNTRY.RECEIVE_ERROR\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction getPartyWithAccountingCustomers(partyId) {\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tpartyId\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetPartyWithAccountingCustomers', requestProperties);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t    /**\r\n\t\t\t\t * Function which allows pre-processing of the party country data\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t    /**\r\n\t\t\t\t * Method which is processed when the receive of party countries fails\t\t\t\r\n\t\t\t\t */\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t    return handleRejectError(error, \"EINVOICING.PROXIES.PARTY_MANAGEMENT.RESULT_ERROR\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction discoverPotentialTradingRelationshipParties(partyId, searchText) {\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tpartyId,\r\n\t\t\t\t\tsearchText\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/DiscoverPotentialTradingRelationshipParties', requestProperties);\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(\r\n\t\t\t\t\t(data) => data,\r\n\t\t\t\t\terror => {\r\n\t\t\t\t\t    return handleRejectError(error, \"EINVOICING.PROXIES.DISCOVER_PARTIES.RESULT_ERROR\");\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\r\n\t\t    /**\r\n           * Loads schemes based on party code type             \r\n           */\r\n\t\t\tfunction getEnabledSchemes() {\r\n\t\t\t    var httpPromise = http.get(\"Party/GetSchemesForPartyCodeType\");\r\n\t\t\t    var newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t    return newPromise;\r\n\r\n\t\t\t    /**\r\n                 * Function which allows pre-processing of the resolved data\t            \r\n                 */\r\n\t\t\t    function resolved(data) {\r\n\t\t\t        return data;\r\n\t\t\t    }\r\n\r\n\t\t\t    /**\r\n                 * Called when loading scheme data fails             \r\n                 */\r\n\t\t\t    function rejected(error) {\r\n\t\t\t        return handleRejectError(error, \"EINVOICING.PROXIES.SCHEME.RECEIVE_ERROR\");\r\n\t\t\t    }\r\n\t\t\t}\r\n\r\n\t\t\tfunction resolveSchemeCodeFromId(id) {\r\n\t\t\t    if (util.isDefined(clientEnums.schemes[id])) {\r\n\t\t\t        return clientEnums.schemes[id];\r\n\t\t\t    }\r\n\r\n\t\t\t    return \"UNKNOWN\";\r\n\t\t\t}\r\n\r\n\t\t\tfunction addNewPartyCode(partyId, data) {\r\n\t\t\t    var requestProperties = {\r\n\t\t\t        partyId: partyId\r\n\t\t\t    }\r\n\r\n\t\t\t    var requestUrl = urlHelper.setParameters('Party/AddNewPartyCode', requestProperties);\r\n\t\t\t    return http.post(requestUrl, data).then(data => {\r\n\t\t\t        return data;\r\n\t\t\t    }, error => {\r\n\t\t\t        return handleRejectError(error, 'EINVOICING.PROXIES.PARTY_CODE.ADD_ERROR');\r\n\t\t\t    });\r\n\t\t\t}\r\n\r\n\t\t\tfunction validatePartyCode(data) {\r\n\t\t\t    return http.post('Party/ValidatePartyCode', data).then(data => {\r\n\t\t\t        return data;\r\n\t\t\t    }, error => {\r\n\t\t\t        return handleRejectError(error, 'EINVOICING.PROXIES.PARTY_CODE.VALIDATE_CODE_ERROR');\r\n\t\t\t    });\r\n\t\t\t}\r\n\r\n\t\t\tfunction updatePartyCode(data) {\r\n\t\t\t\tvar partyCodeModel = {\r\n\t\t\t\t\tcode: {\r\n\t\t\t\t\t\tid: data.id,\r\n\t\t\t\t\t\tpartyId: data.partyId,\r\n\t\t\t\t\t\tcodeValue: data.code,\r\n\t\t\t\t\t\tschemeId: data.schemeId,\r\n\t\t\t\t\t\tpartyCodeType: data.partyCodeType,\r\n\t\t\t\t\t\trelatedPartyId: data.relatedPartyId\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn http.post('Party/UpdatePartyCode', partyCodeModel)\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t}, error => {\r\n\t\t\t\t\t    return handleRejectError(error, error.response.statusText);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction getPartyCodesForParty(partyId) {\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tpartyId: partyId\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetPartyCodesForParty', requestProperties);\r\n\t\t\t\t\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\t\r\n\t\t\t\tvar newPromise = httpPromise.then(data => {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}, error => {\r\n\t\t\t\t    return handleRejectError(error, response.statusText);\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction getAssociatedPartiesTradingRelationshipsByParty(partyId) {\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tpartyId: partyId\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Party/GetAssociatedPartiesTradingRelationshipsByPartyId', requestProperties);\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = httpPromise.then(data => {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\treturn handleRejectError(error, 'EINVOICING.PROXIES.TRADING_RELATIONSHIP.FETCH_ERROR');\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn newPromise;\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleRejectError(error, failureReason) {\r\n\t\t\t    proxyErrorInterceptor.handleError(error, failureReason, \"\");\r\n\t\t\t    return $q.reject(error);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\treturn partyProxy;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/party-proxy.factory.js","class ProxyErrorInterceptor {\r\n    constructor(authenticationResult, translator) {\r\n        this._authenticationResult = authenticationResult;\r\n        this._translator = translator;\r\n    }\r\n\r\n    handleError(error, failureReason, defaultFailureReason) {\r\n        if (error.failureReason === this._authenticationResult.ServerDown) {\r\n            error.failureReason = this._translator.instantTranslate('EINVOICING.PORTAL.PROXIES.SERVER_DOWN_ERROR');\r\n            return;\r\n        }\r\n\r\n        if (failureReason || defaultFailureReason) {\r\n            error.failureReason = (failureReason || defaultFailureReason);\r\n        }\r\n    }\r\n}\r\n\r\nProxyErrorInterceptor.prototype.constructor.$inject = ['AUTHENTICATION_RESULT', 'translator'];\r\n\r\nexport { ProxyErrorInterceptor }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/proxy-error-interceptor/proxy-error-interceptor.service.js","class TradingRelationshipProxy {\r\n    constructor(http, $q, urlHelper) {\r\n        this.http = http;\r\n        this.$q = $q;\r\n        this.urlHelper = urlHelper;\r\n    }\r\n\r\n    createTradingRelationship(partyId, tradingPartyId) {\r\n        var requestProperties = {\r\n            partyId, tradingPartyId\r\n        };\r\n\r\n        var requestUrl = this.urlHelper.setParameters('TradingRelationship/CreateTradingRelationship', requestProperties);\r\n        var httpPromise = this.http.post(requestUrl)\r\n            .then(data => {\r\n                return data;\r\n            }, error => {\r\n                error.failureReason = 'EINVOICING.PORTAL.PROXIES.TRADING_RELATIONSHIP.CREATE.RESULT_ERROR';\r\n                return this.$q.reject(error);\r\n            });\r\n\r\n        return httpPromise;\r\n    }\r\n\r\n    removeTradingRelationship(partyId, tradingPartyId) {\r\n        var requestProperties = {\r\n            partyId, tradingPartyId\r\n        };\r\n\r\n        var requestUrl = this.urlHelper.setParameters('TradingRelationship/RemoveTradingRelationship', requestProperties);\r\n        var httpPromise = this.http.doDelete(requestUrl)\r\n            .then(data => {\r\n                return data;\r\n            }, error => {\r\n                error.failureReason = 'EINVOICING.PORTAL.PROXIES.TRADING_RELATIONSHIP.REMOVE.RESULT_ERROR';\r\n                return this.$q.reject(error);\r\n            });\r\n\r\n        return httpPromise;\r\n    }\r\n}\r\n\r\nTradingRelationshipProxy.prototype.constructor.$inject = ['webApiHttp', '$q', 'urlHelper'];\r\n\r\nexport { TradingRelationshipProxy }\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/trading-relationship-proxy.js","define([\r\n    './user-actions-resolver.factory'\r\n], function (\r\n    userActionsResolverLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        userActionsResolverLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/user-actions-resolver/_loader.js","//{CODE:EUP7X}\r\n// di.einvoicing.ui.portal.userActionsResolver\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.factory('userActionsResolver', userActionsResolver);\r\n\t\t\r\n\t\t/**\r\n\t\t * resolves user actions\r\n\t\t */\r\n\t\tfunction userActionsResolver() {\r\n\t\t\treturn {\r\n\t\t\t\tresolveActions: resolveActions\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * resolves array of available user actions\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction resolveActions(arrayActions, isMultiArray) {\r\n\t\t\t\tvar transformed = arrayActions;\r\n\r\n\t\t\t\tif (isMultiArray && arrayActions.length > 0) {\r\n\t\t\t\t\ttransformed = arrayActions.shift().filter(function(v) {\r\n\t\t\t\t\t\treturn arrayActions.every(function(a) {\r\n\t\t\t\t\t\t\treturn a.indexOf(v) !== -1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn transformed;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn userActionsResolver;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/user-actions-resolver/user-actions-resolver.factory.js","//{CODE:UPP01}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('userProxy', userProxy);\r\n\r\n\t\tuserProxy.$inject = [\r\n\t\t\t'webApiHttp',\r\n\t\t\t'$q',\r\n\t\t\t'urlHelper',\r\n\t\t\t'proxyErrorInterceptor'\r\n\t\t];\r\n\r\n\t\tfunction userProxy(http, $q, urlHelper, proxyErrorInterceptor) {\r\n\t\t\treturn {\r\n\t\t\t\tgetById: getById,\r\n\t\t\t\tgetDetailsModelById: getDetailsModelById,\r\n\t\t\t\tgetUsers: getUsers,\r\n\t\t\t\tgetRoles: getRoles,\r\n\t\t\t\tgetRoleRights: getRoleRights,\r\n\t\t\t\tgetAllRights: getAllRights,\r\n\t\t\t\tsaveUser: saveUser,\r\n\t\t\t\tcreateUser: createUser,\r\n\t\t\t\tgetUserRights: getUserRights,\r\n\t\t\t\tsaveUserNotifications: saveUserNotifications,\r\n\t\t\t\tgetAllowedActions: getAllowedActions,\r\n\t\t\t\tgeneratePassword: generatePassword,\r\n\t\t\t\tremove: remove\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets user by Id\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction getById(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP0108E\", id, 'id');\r\n\r\n\t\t\t\tvar requestUrl = 'User/GetUserById/' + id;\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolve, reject);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t\treturn handleRejectError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Gets user details by user Id\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction getDetailsModelById(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP0107E\", id, 'id');\r\n\r\n\t\t\t\tvar requestUrl = 'User/GetDetailsModelById/' + id;\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolve, reject);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t\treturn handleRejectError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * gets list of users\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction getUsers(searchText, lastNRows) {\r\n\t\t\t\tguard.throwIfNotANumber(\"UPP0106E\", lastNRows, \"lastNRows\");\r\n\r\n\t\t\t\tvar requestedParams = {\r\n\t\t\t\t\tsearchText: searchText,\r\n\t\t\t\t\tlastNRows: lastNRows\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestedUrl = urlHelper.setParameters('User/GetUserSearchResults', requestedParams);\r\n\r\n\t\t\t\tvar promise = http.get(requestedUrl).then(resolve, reject);\r\n\r\n\t\t\t\treturn promise;\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t\treturn handleRejectError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction getUserRights(id) {\r\n\t\t\t\tvar requestUrl = 'User/GetUserRights/' + id;\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolve, reject);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t\treturn handleRejectError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * gets all roles\t\t\t\r\n\t\t\t */\r\n\t\t\tfunction getRoles() {\r\n\t\t\t\tvar requestUrl = 'User/GetAllRoles/';\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolve, reject);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t\treturn handleRejectError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction getAllRights() {\r\n\t\t\t\tvar requestUrl = 'User/GetAllRights/';\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolve, reject);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t\treturn handleRejectError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction getRoleRights() {\r\n\t\t\t\tlet url = 'User/GetRoleRights';\r\n\t\t\t\tlet promise = http.get(url);\r\n\r\n\t\t\t\tlet newPromise = promise.then(resolve, reject);\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolve(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction reject(error) {\r\n\t\t\t\t\treturn handleRejectError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * saves user details\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction saveUser(user) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP4002E\", user, 'user');\r\n\r\n\t\t\t\tvar promise = http.post('User/SaveUser', user);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n                    if (!data.success) {\r\n                        return handleRejectError(data, data.failureReason);\r\n                    }\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn handleRejectError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n            /**\r\n             * Creates new user             \r\n             */\r\n\t\t\tfunction createUser(user) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"UPP010FE\", user, 'user');\r\n\r\n\t\t\t\tvar promise = http.post('User/CreateUser', user);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t    /**\r\n\t\t\t * generates user password\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction generatePassword(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010EE\", id, 'id');\r\n\r\n\t\t\t\tvar requestProperties = {\r\n\t\t\t\t\tuserId: id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('User/GeneratePassword', requestProperties);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\tif (data.success) {\r\n\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn $q.reject(data.failureReason);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Saves user notifications             \r\n\t\t\t */\r\n\t\t\tfunction saveUserNotifications(model) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"UPP010BE\", model, 'model');\r\n\r\n\t\t\t\tvar promise = http.post('User/SaveUserNotifications', model);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn handleRejectError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t    /**\r\n\t\t\t * Loads allowed actions for user\r\n\t\t\t */\r\n\t\t\tfunction getAllowedActions(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010CE\", id, 'id');\r\n\r\n\t\t\t\tvar requestUrl = 'User/GetActionsAllowed/' + id;\r\n\r\n\t\t\t\tvar promise = http.get(requestUrl);\r\n\r\n\t\t\t\tvar newPromise = promise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn handleRejectError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Removes the user with specified id\t\t\t \r\n\t\t\t */\r\n\t\t\tfunction remove(id) {\r\n\t\t\t\tguard.throwIfInvalidId(\"UPP010GE\", id, 'id');\r\n\r\n\t\t\t\tvar requestedUrl = urlHelper.setParameters('User/RemoveUser', { id });\r\n\r\n\t\t\t\tvar promise = http.doDelete(requestedUrl)\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t}, error => {\r\n\t\t\t\t\t\treturn handleRejectError(error, 'EINVOICING.PORTAL.PROXIES.USER.REMOVE.RESULT_ERROR');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\treturn promise;\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleRejectError(error, failureReason) {\r\n\t\t\t\tproxyErrorInterceptor.handleError(error, failureReason, \"\");\r\n\t\t\t\treturn $q.reject(error);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn userProxy;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/user-proxy.factory.js","define([\r\n    './vm-filters-list-configurator.factory'\r\n], function (\r\n    vmFiltersListConfiguratorLoader\r\n\t) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        vmFiltersListConfiguratorLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/vm-list-configurator/_loader.js","//{CODE:DEF0C}\r\n// di.einvoicing.ui.portal.components.vmListConfigurator\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('vmFiltersListConfigurator', vmFiltersListConfigurator);\r\n\r\n\t\tvmFiltersListConfigurator.$inject = ['dateFormatter'];\r\n\r\n\t\tfunction vmFiltersListConfigurator(dateFormatter) {\r\n\t\t\treturn {\r\n\t\t\t\tconfigure: configure\r\n\t\t\t};\r\n\r\n\t\t\tfunction configure(filters, vm, listConfigurator) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"DEF0C01E\", filters, 'filters');\r\n\t\t\t\tguard.throwIfNotAnObject(\"DEF0C02E\", vm, 'vm');\r\n\t\t\t\tguard.throwIfNotAnObject(\"DEF0C03E\", listConfigurator, 'listConfigurator');\r\n\r\n\t\t\t\tvm.tableOptions = _.extend({}, listConfigurator.getTableConfiguration());\r\n\t\t\t\tif (util.isNumber(filters.pageSize)) {\r\n\t\t\t\t\tvm.tableOptions.paginationPageSize = filters.pageSize;\r\n\t\t\t\t}\r\n\t\t\t\tif (util.isNumber(filters.pageNumber)) {\r\n\t\t\t\t\tvm.tableOptions.paginationPageNumber = filters.pageNumber;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.buttonsSetOneOptions = listConfigurator.getButtonsSetOneConfiguration();\r\n\t\t\t\tvm.buttonsSetTwoOptions = listConfigurator.getButtonsSetTwoConfiguration();\r\n\t\t\t\tvm.statusOptions = listConfigurator.getStatusFilters();\r\n\t\t\t\tvm.sortOptions = listConfigurator.getSortableColumns();\r\n\t\t\t\tvm.dateTypes = listConfigurator.getDateTypesOptions();\r\n\r\n\t\t\t\tsetSelectedFiltersOrDefaultToInitial(vm, filters, listConfigurator);\r\n\r\n\t\t\t\tif (util.isDefined(listConfigurator.getFreeformSearchDefaultFilter)) {\r\n\t\t\t\t\tvar filter = listConfigurator.getFreeformSearchDefaultFilter();\r\n\r\n\t\t\t\t\tif (util.isRealObject(filter)) {\r\n\t\t\t\t\t\tvm.searchDefaultFilter = filter;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* \r\n\t\t\t Sets the vm selected filters to the passed in values, if defined, and the initial values otherwise\r\n\t\t\t */\r\n\t\t\tfunction setSelectedFiltersOrDefaultToInitial(vm, filters, listConfigurator) {\r\n\t\t\t\tif (util.isDefined(filters.statusFilter)) {\r\n\t\t\t\t\tvm.selectedFilters.statusFilter =\r\n\t\t\t\t\t\t_.find(vm.statusOptions, function (item) { return item.value === filters.statusFilter; });\r\n\t\t\t\t}\r\n\t\t\t\tif (util.isUndefined(vm.selectedFilters.statusFilter)) {\r\n\t\t\t\t\tvm.selectedFilters.statusFilter = listConfigurator.getInitialStatusFilter();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (util.isDefined(filters.sortOption)) {\r\n\t\t\t\t    vm.selectedFilters.sortOption =\r\n\t\t\t\t\t\t_.find(vm.sortOptions,\r\n\t\t\t\t\t\t\tfunction (item) {\r\n\t\t\t\t\t\t\t\treturn item.value === filters.sortOption;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (util.isUndefined(vm.selectedFilters.sortOption)) {\r\n\t\t\t\t\tvm.selectedFilters.sortOption = listConfigurator.getInitialSortOption();\r\n\t\t\t\t}\t\t\t\t\r\n \t\t\t\t\r\n\t\t\t\tif (util.isDefined(filters.dateType)) {\r\n\t\t\t\t\tvm.selectedFilters.dateType =\r\n\t\t\t\t\t\t_.find(vm.dateTypes, function (item) { return item.value === filters.dateType });\r\n\t\t\t\t}\r\n\t\t\t\tif (util.isUndefined(vm.selectedFilters.dateType)) {\r\n\t\t\t\t\tvm.selectedFilters.dateType = listConfigurator.getInitialDateType();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvm.dateOptions = listConfigurator.getDateTimeFilters(vm.selectedFilters.dateType.value);\r\n\r\n\t\t\t\tif (util.isDefined(filters.dateTimeFilter)) {\r\n\t\t\t\t\tvm.selectedFilters.dateTimeFilter =\r\n\t\t\t\t\t\t_.find(vm.dateOptions, function (item) { return item.value === filters.dateTimeFilter; });\r\n\t\t\t\t}\r\n\t\t\t\tif (util.isUndefined(vm.selectedFilters.dateTimeFilter)) {\r\n\t\t\t\t\tvm.selectedFilters.dateTimeFilter = listConfigurator.getInitialDateTimeFilter(vm.selectedFilters.dateType.value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (vm.selectedFilters.dateTimeFilter.value === 'Custom' &&\r\n\t\t\t\t\t(util.isDefined(filters.fromDate) || util.isDefined(filters.toDate))) {\r\n\r\n\t\t\t\t\tvm.selectedFilters.dateTimeFilter =\r\n\t\t\t\t\t\t_.find(vm.dateOptions, function (item) { return item.value === 'Custom' });\r\n\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter = {\r\n\t\t\t\t\t\ttoDate: dateFormatter.toClientDate(filters.toDate) || '',\r\n\t\t\t\t\t\tfromDate: dateFormatter.toClientDate(filters.fromDate) || ''\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvm.selectedFilters.customDateTimeFilter = { toDate: '', fromDate: '' };\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isDefined(filters.searchText)) {\r\n\t\t\t\t\tvm.selectedFilters.searchText = filters.searchText;\r\n\t\t\t\t}\r\n\t\t\t\tif (util.isUndefined(vm.selectedFilters.searchText)) {\r\n\t\t\t\t\tvm.selectedFilters.searchText = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn vmFiltersListConfigurator;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/shared/services/vm-list-configurator/vm-filters-list-configurator.factory.js","//{CODE:EUP7T}\r\n// di.einvoicing.ui.portal.portal.summaries.components\r\ndefine([\r\n\t'./_snippets/_loader',\r\n\t'./summarySelectorController',\r\n\t'./summaryTypes',\r\n\t'./rangeSelector/_loader',\r\n\t'./tabularSummary/_loader',\r\n\t'./singleValueSummary/_loader',\r\n\t'./chartSummary/_loader'\r\n], function (\r\n\tsnippetsLoader,\r\n\tsummarySelectorControllerLoader,\r\n\tsummaryTypesLoader,\r\n\trangeSelectorLoader,\r\n\ttabularSummaryLoader,\r\n\tsingleValueSummaryLoader,\r\n    chartSummaryLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        snippetsLoader(module);\r\n        summarySelectorControllerLoader(module);\r\n        summaryTypesLoader(module);\r\n        rangeSelectorLoader(module);\r\n        tabularSummaryLoader(module);\r\n        singleValueSummaryLoader(module);\r\n        chartSummaryLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/_loader.js","//{CODE:EUP7U}\r\n// di.einvoicing.ui.portal.portal.summaries.components.snippets\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar snippetContext = $di.angular.snippetRegistrar.createContext(\r\n\t\t\tmodule,\r\n\t\t\t'src/app/portal/summaries/_components/_snippets');\r\n\r\n\t\tsnippetContext.registerSnippet(\r\n\t\t\t'diSummarySelector',\r\n\t\t\t'summarySelector.html',\r\n\t\t\t'SummarySelectorController',\r\n\t\t\t'summarySelectorCtrl');\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/_snippets/_loader.js","//{CODE:DEF0J}\r\ndefine([\r\n    './chartSummaryController',\r\n\t'./chartSummaryDirective',\r\n\t'./chartConfigurationMapper',\r\n\t'./chartDataMapper',\r\n\t'./chartLayoutMapper',\r\n\t'./chartConfigMapper',\r\n\t'./chartFontMapper',\r\n\t'./chartTitleMapper'\r\n], function (\r\n    chartSummaryController,\r\n    chartSummaryDirective,\r\n    chartConfigurationMapper,\r\n\tchartDataMapper,\r\n\tchartLayoutMapper,\r\n\tchartConfigMapper,\r\n\tchartFontMapper,\r\n\tchartTitleMapper) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        chartSummaryController(module);\r\n        chartSummaryDirective(module);\r\n        chartConfigurationMapper(module);\r\n        chartDataMapper(module);\r\n        chartLayoutMapper(module);\r\n        chartConfigMapper(module);\r\n        chartFontMapper(module);\r\n        chartTitleMapper(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/chartSummary/_loader.js","//{CODE:DEF0P}\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('chartConfigMapper', chartConfigMapper);\r\n\r\n\t\tfunction chartConfigMapper() {\r\n\t\t\treturn {\r\n\t\t\t\tmap: mapConfig\r\n\t\t\t};\r\n\r\n\t\t\tfunction mapConfig(chartConfiguration) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tif (util.isBoolean(chartConfiguration.displayModeBar) || util.isNonEmptyString(chartConfiguration.displayModeBar)) {\r\n\t\t\t\t\t_.extend(result, { displayModeBar: chartConfiguration.displayModeBar });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isBoolean(chartConfiguration.staticPlot)) {\r\n\t\t\t\t\t_.extend(result, { staticPlot: chartConfiguration.staticPlot });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isBoolean(chartConfiguration.scrollZoom)) {\r\n\t\t\t\t\t_.extend(result, { scrollZoom: chartConfiguration.scrollZoom });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((util.isBoolean(chartConfiguration.doubleClick)\r\n\t\t\t\t\t\t&& !chartConfiguration.doubleClick)\r\n\t\t\t\t\t|| (util.isNonEmptyString(chartConfiguration.doubleClick)\r\n\t\t\t\t\t\t&& _.contains(['reset', 'autosize', 'reset+autosize'], chartConfiguration.doubleClick))) {\r\n\t\t\t\t\t_.extend(result, { doubleClick: chartConfiguration.doubleClick });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isBoolean(chartConfiguration.editable)) {\r\n\t\t\t\t\t_.extend(result, { editable: chartConfiguration.editable });\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn chartConfigMapper;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/chartSummary/chartConfigMapper.js","//{CODE:DEF0K}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('chartConfigurationMapper', chartConfigurationMapper);\r\n\r\n\t\tchartConfigurationMapper.$inject = [\r\n\t\t\t'chartDataMapper',\r\n\t\t\t'chartLayoutMapper',\r\n\t\t\t'chartConfigMapper',\r\n\t\t\t'chartFontMapper'\r\n\t\t];\r\n\r\n\t\tfunction chartConfigurationMapper(chartDataMapper, chartLayoutMapper, chartConfigMapper, chartFontMapper) {\r\n\t\t\treturn {\r\n\t\t\t\tgetChartConfiguration: getChartConfiguration\r\n\t\t\t};\r\n\r\n\t\t\t/* config options (with default values)\r\n             *  staticPlot: false,\r\n             *  editable: false,\r\n             *  queueLength: 0,\r\n             *  autosizable: false,\r\n             *  fillFrame: false,\r\n             *  frameMargins: 0,\r\n             *  scrollZoom: false,\r\n             *  doubleClick: 'reset+autosize',\r\n             *  showTips: true,\r\n             *  showLink: false,\r\n             *  sendData: true,\r\n             *  linkText: 'Edit chart',\r\n             *  showSources: false,\r\n             *  displayModeBar: 'hover',\r\n             *  modeBarButtonsToRemove: [],\r\n             *  modeBarButtonsToAdd: [],\r\n             *  modeBarButtons: false,\r\n             *  displaylogo: true,\r\n             *  plotGlPixelRatio: 2,\r\n             */\r\n\r\n\t\t\t/*\r\n             * Chart types\r\n             * scatter\r\n             * bar\r\n             * box\r\n             * heatmap\r\n             * histogram\r\n             * histogram2d\r\n             * area\r\n             * pie\r\n             * contour\r\n             * histogram2dcontour\r\n             * scatter3d\r\n             * surface\r\n             * mesh3d\r\n             * scattergeo\r\n             * choropleth\r\n             * scattergl\r\n             */\r\n\t\t\tfunction getChartConfiguration(summaryData, chartConfiguration, documentTypeId) {\r\n\r\n\t\t\t\tvar data = chartDataMapper.map(summaryData, chartConfiguration, documentTypeId);\r\n\t\t\t\tvar layout = chartLayoutMapper.map(chartConfiguration);\r\n\t\t\t\tvar config = chartConfigMapper.map(chartConfiguration);\r\n\r\n\t\t\t\tconfigureAnnotations(layout, data, chartConfiguration);\r\n\r\n\t\t\t\tvar configuration = {};\r\n\r\n\t\t\t\tif (util.isRealObject(data))\r\n\t\t\t\t\t_.extend(configuration, { data: data });\r\n\r\n\t\t\t\tif (util.isRealObject(layout))\r\n\t\t\t\t\t_.extend(configuration, { layout: layout });\r\n\r\n\t\t\t\tif (util.isRealObject(config))\r\n\t\t\t\t\t_.extend(configuration, { config: config });\r\n\r\n\t\t\t\treturn configuration;\r\n\t\t\t}\r\n\r\n\t\t\tfunction configureAnnotations(layout, data, chartConfiguration) {\r\n\t\t\t\tvar result = [];\r\n\t\t\t\tif (util.isRealObject(chartConfiguration.yAxis)\r\n\t\t\t\t\t\t&& util.isRealObject(chartConfiguration.yAxis.title)\r\n\t\t\t\t\t\t&& util.isNonEmptyString(chartConfiguration.yAxis.title.orientation)\r\n\t\t\t\t\t\t&& (!util.isNullOrUndefined(chartConfiguration.yAxis.title.text)\r\n\t\t\t\t\t\t\t|| util.isNonEmptyString(chartConfiguration.yAxis.title.languageKey))\r\n\t\t\t\t) {\r\n\t\t\t\t\tif (chartConfiguration.yAxis.title.orientation === 'h') {\r\n\t\t\t\t\t\tvar yAxisAnnotation = {\r\n\t\t\t\t\t\t\txref: 'paper',\r\n\t\t\t\t\t\t\tyref: 'paper',\r\n\t\t\t\t\t\t\tx: -0.005,\r\n\t\t\t\t\t\t\txanchor: 'right',\r\n\t\t\t\t\t\t\ty: 0.5,\r\n\t\t\t\t\t\t\tyanchor: 'middle',\r\n\t\t\t\t\t\t\ttext: layout.yaxis.title,\r\n\t\t\t\t\t\t\tshowarrow: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (util.isRealObject(chartConfiguration.yAxis.title.font)) {\r\n\t\t\t\t\t\t\tyAxisAnnotation.font = layout.yaxis.titlefont;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresult.push(yAxisAnnotation);\r\n\t\t\t\t\t\t//remove from the layout since we are setting them using annotations\r\n\t\t\t\t\t\tlayout.yaxis.title = undefined;\r\n\t\t\t\t\t\tlayout.yaxis.titlefont = undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (chartConfiguration.type === 'bar') {\r\n\t\t\t\t\tif (util.isRealObject(chartConfiguration.barWatermark)) {\r\n\t\t\t\t\t\tif (util.isNonEmptyString(chartConfiguration.barWatermark.value)) {\r\n\t\t\t\t\t\t\tif (chartConfiguration.barWatermark.value === 'currency') {\r\n\r\n\t\t\t\t\t\t\t\tvar watermarkFont = chartFontMapper.map(chartConfiguration.barWatermark);\r\n\r\n\t\t\t\t\t\t\t\tvar yValues = _.union(_.flatten(_.pluck(data, 'y'), true));\r\n\t\t\t\t\t\t\t\tvar barAnnotations = _.map(yValues, function (yValue) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar trace = _.find(data, function (trace) {\r\n\t\t\t\t\t\t\t\t\t\treturn _.contains(trace.y, yValue);\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\tvar currencySymbol = (util.isDefined(trace)) ? trace.currencySymbol[trace.y.indexOf(yValue)] : undefined;\r\n\r\n\t\t\t\t\t\t\t\t\tvar ann = {\r\n\t\t\t\t\t\t\t\t\t\tshowarrow: false,\r\n\t\t\t\t\t\t\t\t\t\txanchor: 'left',\r\n\t\t\t\t\t\t\t\t\t\txref: 'paper',\r\n\t\t\t\t\t\t\t\t\t\tx: 0.005,\r\n\t\t\t\t\t\t\t\t\t\tyref: 'y',\r\n\t\t\t\t\t\t\t\t\t\ty: yValue,\r\n\t\t\t\t\t\t\t\t\t\ttext: currencySymbol\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (util.isRealObject(watermarkFont))\r\n\t\t\t\t\t\t\t\t\t\t_.extend(ann, { font: watermarkFont });\r\n\t\t\t\t\t\t\t\t\treturn ann;\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tresult = result.concat(barAnnotations);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (result.length > 0)\r\n\t\t\t\t\t_.extend(layout, { annotations: result });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn chartConfigurationMapper;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/chartSummary/chartConfigurationMapper.js","//{CODE:DEF0N}\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('chartDataMapper', chartDataMapper);\r\n\r\n\t\tchartDataMapper.$inject = [\r\n\t\t\t'enumsKeyResolver',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'enumTranslator',\r\n\t\t\t'documentTypeResolver',\r\n\t\t\t'$filter',\r\n\t\t\t'invoiceListConfigurator',\r\n\t\t\t'purchaseOrderListConfigurator'\r\n\t\t];\r\n\r\n\t\tfunction chartDataMapper(enumsKeyResolver, clientEnums, enumTranslator, documentTypeResolver, filter, invoiceListConfigurator,\r\n\t\t\tpurchaseOrderListConfigurator) {\r\n\t\t\treturn {\r\n\t\t\t\tmap: mapData\r\n\t\t\t};\r\n\r\n\t\t\tfunction mapData(summaryData, chartConfiguration, documentTypeId) {\r\n\r\n\t\t\t    \r\n\r\n\r\n\t\t\t\tvar clientStateEnum = getStatesEnum(documentTypeId);\r\n\t\t\t\tvar hover = mapHoverConfiguration(chartConfiguration);\r\n\t\t\t\tvar statusesToShow = documentTypeId === clientEnums.documentType.invoice ? invoiceListConfigurator.getStatusFilters()\r\n\t\t\t\t\t: (documentTypeId === clientEnums.documentType.purchaseOrder ? purchaseOrderListConfigurator.getStatusFilters() : null);\r\n\r\n\t\t\t\tvar groupedByClientState = _.groupBy(summaryData, function(tableRow) { return tableRow.clientStateId });\r\n\t\t\t\tvar tracesObj = {};\r\n\t\t\t\tvar currenciesMapper = {};\r\n\t\t\t\tvar currencyYValue = 0;\r\n                \r\n\t\t\t\tfor (var clientStateId in groupedByClientState) {\r\n\t\t\t\t\tif (groupedByClientState.hasOwnProperty(clientStateId)\r\n\t\t\t\t\t\t&& (statusesToShow == null\r\n\t\t\t\t\t\t\t|| _.some(statusesToShow, function(filter) {\r\n\t\t\t\t\t\t\t\t\treturn filter.value !== clientEnums.documentStateKey.unknown\r\n\t\t\t\t\t\t\t\t\t\t&& filter.value === parseInt(clientStateId);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t))) {\r\n\r\n\t\t\t\t\t\tvar stateId = parseInt(clientStateId);\r\n\t\t\t\t\t\tvar groupedByCurrency = _.groupBy(groupedByClientState[clientStateId], function(tableRow) {\r\n\t\t\t\t\t\t\treturn tableRow.currencyId;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t    \r\n\t\t\t        \r\n\r\n\t\t\t\t\t\tfor (var currencyId in groupedByCurrency) { // have a different stacked bar for each currency\r\n\t\t\t\t\t\t\tif (groupedByCurrency.hasOwnProperty(currencyId)) {\r\n\t\t\t\t\t\t\t\t//can only be one total for a state with a given currency\r\n\t\t\t\t\t\t\t\tvar x = [groupedByCurrency[currencyId][0].totalAmount || groupedByCurrency[currencyId][0].totalIncludingTax];\r\n\t\t\t\t\t\t\t\tvar text = [formatCurrency(currencyId, x[0])];\r\n\t\t\t\t\t\t\t\tvar currencySymbol = [getCurrencySymbol(currencyId)];\r\n\t\t\t\t\t\t\t\t//do not use the actual currencyId value, to have the different currency bars laid out next to each other\r\n\t\t\t\t\t\t\t\tvar y;\r\n\t\t\t\t\t\t\t\tif (currenciesMapper[currencyId] != undefined)\r\n\t\t\t\t\t\t\t\t\ty = [currenciesMapper[currencyId]];\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tcurrenciesMapper[currencyId] = currencyYValue;\r\n\t\t\t\t\t\t\t\t\ty = [currencyYValue];\r\n\t\t\t\t\t\t\t\t\tcurrencyYValue++;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (util.isNullOrUndefined(tracesObj[clientStateId])) {\r\n\r\n\t\t\t\t\t\t\t\t    \t\t\t\t\t\t\t\t            \r\n\t\t\t\t\t\t\t\t            var trace = {\r\n\t\t\t\t\t\t\t\t                name: toTitleCase(enumTranslator.instantTranslate(clientStateEnum, stateId)),\r\n\t\t\t\t\t\t\t\t                y: y,\r\n\t\t\t\t\t\t\t\t                x: x,\r\n\t\t\t\t\t\t\t\t                text: text,\r\n\t\t\t\t\t\t\t\t                currencySymbol: currencySymbol\r\n\t\t\t\t\t\t\t\t            }\r\n\r\n\t\t\t\t\t\t\t\t            var traceOptions = configureTrace(chartConfiguration, hover);\r\n\t\t\t\t\t\t\t\t            if (util.isRealObject(traceOptions)) {\r\n\t\t\t\t\t\t\t\t                _.extend(trace, traceOptions);\r\n\t\t\t\t\t\t\t\t            }\r\n\r\n\t\t\t\t\t\t\t\t            tracesObj[clientStateId] = trace;\r\n\t\t\t\t\t\t\t\t        \r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\ttracesObj[clientStateId].x = tracesObj[clientStateId].x.concat(x);\r\n\t\t\t\t\t\t\t\t\ttracesObj[clientStateId].y = tracesObj[clientStateId].y.concat(y);\r\n\t\t\t\t\t\t\t\t\ttracesObj[clientStateId].text = tracesObj[clientStateId].text.concat(text);\r\n\t\t\t\t\t\t\t\t\ttracesObj[clientStateId].currencySymbol = tracesObj[clientStateId].currencySymbol.concat(currencySymbol);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t        \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar traces = [];\r\n\t\t\t\tfor (var clientId in tracesObj) {\r\n\t\t\t\t\tif (tracesObj.hasOwnProperty(clientId)) {\r\n\t\t\t\t\t\ttraces.push(tracesObj[clientId]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn _.sortBy(traces, function(trace) {\r\n\t\t\t\t\treturn trace.name;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction formatCurrency(currencyId, amount) {\r\n\t\t\t\treturn filter('diCurrency')(amount, parseInt(currencyId));\r\n\t\t\t}\r\n\r\n\t\t\tfunction getCurrencySymbol(currencyId) {\r\n\t\t\t\treturn formatCurrency(currencyId, 0).replace(/[0-9.,]*/g, '');\r\n\t\t\t}\r\n\r\n\t\t\tfunction toTitleCase(input) {\r\n\t\t\t\tinput = input || '';\r\n\t\t\t\treturn input.replace(/\\w\\S*/g, function(txt) { return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(); });\r\n\t\t\t}\r\n\r\n\t\t\tfunction configureTrace(chartConfiguration, hover) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tif (util.isNonEmptyString(chartConfiguration.type)) {\r\n\t\t\t\t\t_.extend(result, { type: chartConfiguration.type });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isNonEmptyString(chartConfiguration.orientation)) {\r\n\t\t\t\t\t_.extend(result, { orientation: chartConfiguration.orientation });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isRealObject(hover)) {\r\n\t\t\t\t\t_.extend(result, hover);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tfunction mapHoverConfiguration(chartConfigurationParent) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tif (util.isRealObject(chartConfigurationParent.hover)) {\r\n\t\t\t\t\tif (util.isNonEmptyString(chartConfigurationParent.hover.info)\r\n\t\t\t\t\t\t&& (_.contains([\"all\", \"none\", \"skip\", \"x\", \"y\", \"z\", \"text\", \"name\"], chartConfigurationParent.hover.info)\r\n\t\t\t\t\t\t\t|| chartConfigurationParent.hover.info.match(\"/^\\\\b(?:x|y|z|text|name)\\\\b(\\\\+\\\\b(?:x|y|z|text|name)\\\\b)*$/\"))) {\r\n\t\t\t\t\t\t_.extend(result, { hoverinfo: chartConfigurationParent.hover.info });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getStatesEnum(documentTypeId) {\r\n\t\t\t\tvar documentType = documentTypeResolver.getTypeKeyById(documentTypeId);\r\n\t\t\t\treturn enumsKeyResolver.getEnumsForCurrentRole(clientEnums.documentStateKey, documentType);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn chartDataMapper;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/chartSummary/chartDataMapper.js","//{CODE:DEF0Q}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('chartFontMapper', chartFontMapper);\r\n\r\n\t\tfunction chartFontMapper() {\r\n\t\t\treturn {\r\n\t\t\t\tmap: mapFont\r\n\t\t\t};\r\n\r\n\t\t\tfunction mapFont(chartConfiguration) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tif (util.isRealObject(chartConfiguration.font)) {\r\n\t\t\t\t\tif (util.isNonEmptyString(chartConfiguration.font.family)) {\r\n\t\t\t\t\t\t_.extend(result, { family: chartConfiguration.font.family });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isNumber(chartConfiguration.font.size)) {\r\n\t\t\t\t\t\t_.extend(result, { size: chartConfiguration.font.size });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isNonEmptyString(chartConfiguration.font.color)) {\r\n\t\t\t\t\t\t_.extend(result, { color: chartConfiguration.font.color });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn chartFontMapper;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/chartSummary/chartFontMapper.js","//{CODE:DEF0O}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('chartLayoutMapper', chartLayoutMapper);\r\n\r\n\t\tchartLayoutMapper.$inject = [\r\n\t\t\t'chartTitleMapper',\r\n\t\t\t'chartFontMapper'\r\n\t\t];\r\n\r\n\t\tfunction chartLayoutMapper(chartTitleMapper, chartFontMapper) {\r\n\t\t\treturn {\r\n\t\t\t\tmap: mapLayout\r\n\t\t\t};\r\n\r\n\t\t\tfunction mapLayout(chartConfiguration) {\r\n\t\t\t\tvar layout = {};\r\n\t\t\t\tvar xAxis = {};\r\n\t\t\t\tvar yAxis = {};\r\n\t\t\t\tvar legend = {};\r\n\r\n\t\t\t\tvar title = chartTitleMapper.map(chartConfiguration);\r\n\r\n\t\t\t\tvar size = mapDimensionConfiguration(chartConfiguration);\r\n\r\n\t\t\t\tvar margin = mapMarginConfiguration(chartConfiguration);\r\n\r\n\t\t\t\tif (chartConfiguration.type === \"bar\" && util.isNonEmptyString(chartConfiguration.barmode)) {\r\n\t\t\t\t\t_.extend(layout, { barmode: chartConfiguration.barmode });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isRealObject(chartConfiguration.hover)) {\r\n\t\t\t\t\tif ((util.isNonEmptyString(chartConfiguration.hover.mode)\r\n\t\t\t\t\t\t&& _.contains([\"x\", \"y\", \"closest\"], chartConfiguration.hover.mode))\r\n\t\t\t\t\t\t\t|| (util.isBoolean(chartConfiguration.hover.mode) && chartConfiguration.hover.mode === false)) {\r\n\t\t\t\t\t\t_.extend(layout, { hovermode: chartConfiguration.hover.mode });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isRealObject(chartConfiguration.legend)) {\r\n\t\t\t\t\tif (util.isBoolean(chartConfiguration.legend.showLegend)) {\r\n\t\t\t\t\t\t_.extend(layout, { showlegend: chartConfiguration.legend.showLegend });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlegend = mapLegend(chartConfiguration.legend);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isRealObject(chartConfiguration.xAxis)) {\r\n\t\t\t\t\txAxis = mapAxis(chartConfiguration.xAxis);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isRealObject(chartConfiguration.yAxis)) {\r\n\t\t\t\t\tyAxis = mapAxis(chartConfiguration.yAxis);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isRealObject(title))\r\n\t\t\t\t\t_.extend(layout, title);\r\n\r\n\t\t\t\tif (util.isRealObject(size))\r\n\t\t\t\t\t_.extend(layout, size);\r\n\r\n\t\t\t\tif (util.isRealObject(margin))\r\n\t\t\t\t\t_.extend(layout, { margin: margin });\r\n\r\n\t\t\t\tif (util.isRealObject(xAxis))\r\n\t\t\t\t\t_.extend(layout, { xaxis: xAxis });\r\n\r\n\t\t\t\tif (util.isRealObject(yAxis))\r\n\t\t\t\t\t_.extend(layout, { yaxis: yAxis });\r\n\r\n\t\t\t\tif (util.isRealObject(legend))\r\n\t\t\t\t\t_.extend(layout, { legend: legend });\r\n\r\n\t\t\t\treturn layout;\r\n\t\t\t}\r\n\r\n\t\t\tfunction mapLegend(chartConfigurationParent) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tif (util.isNonEmptyString(chartConfigurationParent.orientation)) {\r\n\t\t\t\t\t_.extend(result, { orientation: chartConfigurationParent.orientation });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isNonEmptyString(chartConfigurationParent.traceOrder)\r\n\t\t\t\t\t&& (_.contains([\"reversed\", \"grouped\", \"normal\"], chartConfigurationParent.traceOrder)\r\n\t\t\t\t\t\t|| chartConfigurationParent.traceOrder.match(\"/^\\\\b(?:reversed|grouped)\\\\b(\\\\+\\\\b(?:reversed|grouped)\\\\b)*$/\"))) {\r\n\t\t\t\t\t_.extend(result, { traceorder: chartConfigurationParent.traceOrder });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar font = chartFontMapper.map(chartConfigurationParent);\r\n\t\t\t\tif (util.isRealObject(font))\r\n\t\t\t\t\t_.extend(result, { font: font });\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tfunction mapDimensionConfiguration(chartConfigurationParent) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tif (util.isNumber(chartConfigurationParent.height)) {\r\n\t\t\t\t\t_.extend(result, { height: chartConfigurationParent.height });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isNumber(chartConfigurationParent.width)) {\r\n\t\t\t\t\t_.extend(result, { width: chartConfigurationParent.width });\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tfunction mapMarginConfiguration(chartConfigurationParent) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tif (util.isRealObject(chartConfigurationParent.margin)) {\r\n\t\t\t\t\tif (util.isNumber(chartConfigurationParent.margin.top)) {\r\n\t\t\t\t\t\t_.extend(result, { t: chartConfigurationParent.margin.top });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isNumber(chartConfigurationParent.margin.bottom)) {\r\n\t\t\t\t\t\t_.extend(result, { b: chartConfigurationParent.margin.bottom });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isNumber(chartConfigurationParent.margin.right)) {\r\n\t\t\t\t\t\t_.extend(result, { r: chartConfigurationParent.margin.right });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isNumber(chartConfigurationParent.margin.left)) {\r\n\t\t\t\t\t\t_.extend(result, { l: chartConfigurationParent.margin.left });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isNumber(chartConfigurationParent.padding)) {\r\n\t\t\t\t\t_.extend(result, { pad: chartConfigurationParent.padding });\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tfunction mapRangeConfiguration(chartConfigurationParent) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tif ((util.isBoolean(chartConfigurationParent.autoRange) && chartConfigurationParent.autoRange)) {\r\n\t\t\t\t\t_.extend(result, { autorange: chartConfigurationParent.autoRange });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isBoolean(chartConfigurationParent.fixedRange)) {\r\n\t\t\t\t\t_.extend(result, { fixedrange: chartConfigurationParent.fixedRange });\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tfunction mapTicksConfiguration(chartConfigurationParent) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tif (util.isRealObject(chartConfigurationParent.ticks)) {\r\n\t\t\t\t\tif (util.isBoolean(chartConfigurationParent.ticks.showLabels)) {\r\n\t\t\t\t\t\t_.extend(result, { showticklabels: chartConfigurationParent.ticks.showLabels });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isNonEmptyString(chartConfigurationParent.ticks.mode)\r\n\t\t\t\t\t\t&& _.contains([\"auto\", \"linear\", \"array\"], chartConfigurationParent.ticks.mode)) {\r\n\t\t\t\t\t\t_.extend(result, { tickmode: chartConfigurationParent.ticks.mode });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isNumber(chartConfigurationParent.ticks.numberOfTicks)) {\r\n\t\t\t\t\t\t_.extend(result, { nticks: chartConfigurationParent.ticks.numberOfTicks });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isNumber(chartConfigurationParent.ticks.startPosition)) {\r\n\t\t\t\t\t\t_.extend(result, { tick0: chartConfigurationParent.ticks.startPosition });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isNumber(chartConfigurationParent.ticks.step)) {\r\n\t\t\t\t\t\t_.extend(result, { dtick: chartConfigurationParent.ticks.step });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isArray(chartConfigurationParent.ticks.atValues)) {\r\n\t\t\t\t\t\t_.extend(result, { tickvals: chartConfigurationParent.ticks.atValues });\r\n\r\n\t\t\t\t\t\tif (util.isArray(chartConfigurationParent.ticks.textAtValues)\r\n\t\t\t\t\t\t\t&& chartConfigurationParent.ticks.atValues.length === chartConfigurationParent.ticks.textAtValues.length) {\r\n\t\t\t\t\t\t\t_.extend(result, { ticktext: chartConfigurationParent.ticks.textAtValues });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (util.isRealObject(chartConfigurationParent.ticks.font)) {\r\n\t\t\t\t\t\tvar font = chartFontMapper.map(chartConfigurationParent.ticks);\r\n\t\t\t\t\t\tif (util.isRealObject(font))\r\n\t\t\t\t\t\t\t_.extend(result, { tickfont: font });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tfunction mapAxis(axisConfigurationObject) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tvar title = chartTitleMapper.map(axisConfigurationObject);\r\n\t\t\t\tif (util.isRealObject(title))\r\n\t\t\t\t\t_.extend(result, title);\r\n\r\n\t\t\t\tvar range = mapRangeConfiguration(axisConfigurationObject);\r\n\t\t\t\tif (util.isRealObject(range))\r\n\t\t\t\t\t_.extend(result, range);\r\n\r\n\t\t\t\tvar ticks = mapTicksConfiguration(axisConfigurationObject);\r\n\t\t\t\tif (util.isRealObject(ticks))\r\n\t\t\t\t\t_.extend(result, ticks);\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn chartLayoutMapper;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/chartSummary/chartLayoutMapper.js","//{CODE:DEF0H}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.controller('ChartSummaryController', ChartSummaryController);\r\n\r\n\t\tChartSummaryController.$inject = [\r\n            '$scope',\r\n            'summaryProxy',\r\n            'modalSpinner',\r\n            'chartConfigurationMapper',\r\n\t\t\t'diState'\r\n\t\t];\r\n\r\n\t\tfunction ChartSummaryController(scope,\r\n            summaryProxy,\r\n            modalSpinner,\r\n            chartConfigurationMapper,\r\n\t\t\tdiState) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvar spinner;\r\n\r\n\t\t\tvm.util = util;\r\n\t\t\tvm.chartConfiguration = {\r\n\t\t\t\tdata: [],\r\n\t\t\t\tlayout: {},\r\n\t\t\t\tconfig: {}\r\n\t\t\t}\r\n\t\t\tvm.noData = false;\r\n\t\t\tvm.loadData = loadData;\r\n\t\t\tvm.buttonValueChanged = buttonValueChanged;\r\n\t\t\tvm.clickTitle = clickTitle;\r\n\r\n\t\t\tinitialise();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\tfunction initialise() {\r\n\t\t\t\tguard.throwIfNotAnObject(\"DEF0H01E\", scope.summaryConfiguration, \"summaryConfiguration\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n             * Function which calls the proxy to load the data for the summary, first showing the spinner\r\n             */\r\n\t\t\tfunction loadData() {\r\n\t\t\t\tvm.dataLoadFailed = undefined;\r\n\r\n\t\t\t\tvar params = _.extend({}, scope.summaryConfiguration.summaryParameters);\r\n\r\n\t\t\t\tif (util.isString(scope.summaryConfiguration.rangeParameter)) {\r\n\t\t\t\t\tif (util.isDefined(vm[scope.summaryConfiguration.rangeParameter])) {\r\n\t\t\t\t\t\tparams[scope.summaryConfiguration.rangeParameter] = vm[scope.summaryConfiguration.rangeParameter];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t//If the range parameter is configured and not yet defined then do not load at this time\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isDefined(spinner) === false && util.isFunction(scope.getSpinnerElement)) {\r\n\t\t\t\t    spinner = modalSpinner.showModalSpinner(scope.getSpinnerElement(), { position: 'absolute' });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsummaryProxy\r\n\t\t\t\t\t.getSummaryData(scope.summaryConfiguration.summaryType, params)\r\n\t\t\t\t\t.then(summaryDataReceived, summaryDataFailed);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which processes the data received from the proxy and fills the summary data array with it\r\n\t\t\t * @param data - The data received from the proxy\r\n\t\t\t */\r\n\t\t\tfunction summaryDataReceived(data) {\r\n\t\t\t\tif (util.isArray(data) && (data.length === 0\r\n\t\t\t\t\t\t\t\t\t\t\t|| _.every(data, function (tableRow) { return (tableRow.totalAmount || tableRow.totalIncludingTax) === 0; }))) {\r\n\t\t\t\t\tvm.noData = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\textendScopeSummaryConfiguration();\r\n\t\t\t\t\tvar config = chartConfigurationMapper\r\n\t\t\t\t\t\t.getChartConfiguration(data, scope.summaryConfiguration.chart, scope.summaryConfiguration.documentType);\r\n\t\t\t\t\tupdateChartConfiguration(config);\r\n\t\t\t\t\tvm.noData = false;\r\n\t\t\t\t}\r\n\t\t\t\tremoveSpinnerIfRequired();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which creates a notification message when the summary data fails to load\r\n\t\t\t */\r\n\t\t\tfunction summaryDataFailed() {\r\n\t\t\t\tremoveSpinnerIfRequired();\r\n\t\t\t\tvm.dataLoadFailed = true;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which removes the spinner if it is currently shown and sets the variable to undefined\r\n\t\t\t */\r\n\t\t\tfunction removeSpinnerIfRequired() {\r\n\t\t\t\tif (util.isObject(spinner) && util.isFunction(spinner.remove)) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t\tspinner = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which handles new values being selected in the range selector control\r\n\t\t\t * \r\n\t\t\t * @param buttonValue - The value of the selected option\r\n\t\t\t */\r\n\t\t\tfunction buttonValueChanged(buttonValue) {\r\n\t\t\t\tvm[scope.summaryConfiguration.rangeParameter] = buttonValue;\r\n\t\t\t\tvm.loadData();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Update the vm.chartConfiguration object with the values from the input param\r\n\t\t\t * @param {} config \r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction updateChartConfiguration(config) {\r\n\t\t\t\tvm.chartConfiguration.data.fill(config.data);\r\n\t\t\t\tvm.chartConfiguration.layout = config.layout;\r\n\t\t\t\tvm.chartConfiguration.config = config.config;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Sets the yAxis title text to the value of the range param\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction extendScopeSummaryConfiguration() {\r\n\t\t\t\tvar yAxisWithTitle = { yAxis: { title: { text: vm[scope.summaryConfiguration.rangeParameter] } } }\r\n\r\n\t\t\t\tif (util.isRealObject(scope.summaryConfiguration.chart)) {\r\n\t\t\t\t\tif (util.isRealObject(scope.summaryConfiguration.chart.yAxis)) {\r\n\t\t\t\t\t\tif (util.isRealObject(scope.summaryConfiguration.chart.yAxis.title)) {\r\n\t\t\t\t\t\t\t_.extend(scope.summaryConfiguration.chart.yAxis.title, yAxisWithTitle.yAxis.title);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Navigate to the target state on title click\r\n\t\t\t * @returns {} \r\n\t\t\t */\r\n\t\t\tfunction clickTitle() {\r\n\t\t\t\tif (scope.summaryConfiguration.rangeParameter) {\r\n\t\t\t\t\tvar range = vm[scope.summaryConfiguration.rangeParameter];\r\n\t\t\t\t\tvar result = scope.summaryConfiguration.titleConfiguration.paramsCreator(range);\r\n\t\t\t\t\tdiState.go(scope.summaryConfiguration.titleConfiguration.target, result);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdiState.go(scope.summaryConfiguration.titleConfiguration.target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ChartSummaryController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/chartSummary/chartSummaryController.js","//{CODE:DEF0I}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\r\n\t\tmodule.directive('chartSummary', chartSummary);\r\n\r\n\t\tfunction chartSummary() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\ttemplateUrl: 'src/app/portal/summaries/_components/chartSummary/chartSummary.html',\r\n\t\t\t\tcontroller: 'ChartSummaryController',\r\n\t\t\t\tcontrollerAs: 'chartSummaryCtrl',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tsummaryConfiguration: '='\r\n\t\t\t\t},\r\n\t\t\t\tlink: link,\r\n\t\t\t\treplace: false\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope, element, attributes, controller) {\r\n\t\t\t\tscope.getSpinnerElement = function () {\r\n\t\t\t\t\treturn element.find('.spinner');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontroller.loadData();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn chartSummary;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/chartSummary/chartSummaryDirective.js","//{CODE:DEF0R}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('chartTitleMapper', chartTitleMapper);\r\n\r\n\t\tchartTitleMapper.$inject = [\r\n\t\t\t'translator',\r\n\t\t\t'chartFontMapper'\r\n\t\t];\r\n\r\n\t\tfunction chartTitleMapper(translator, chartFontMapper) {\r\n\t\t\treturn {\r\n\t\t\t\tmap: mapTitle\r\n\t\t\t};\r\n\r\n\t\t\tfunction mapTitle(chartConfiguration) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tif (util.isRealObject(chartConfiguration.title)) {\r\n\t\t\t\t    if (util.isNonEmptyString(chartConfiguration.title.languageKey)) {\r\n\t\t\t\t        translator.translate(chartConfiguration.title.languageKey)\r\n\t\t\t\t            .then(function(translated) {\r\n\t\t\t\t                _.extend(result, { title: translated });\r\n\t\t\t\t            });\r\n\t\t\t\t\t} else if (!util.isNullOrUndefined(chartConfiguration.title.text)) {\r\n\t\t\t\t\t\t_.extend(result, { title: chartConfiguration.title.text });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar titleFont = chartFontMapper.map(chartConfiguration.title);\r\n\t\t\t\t\tif (util.isRealObject(titleFont))\r\n\t\t\t\t\t\t_.extend(result, { titlefont: titleFont });\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn chartTitleMapper;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/chartSummary/chartTitleMapper.js","//{CODE:EUP60}\r\n// di.einvoicing.ui.portal.portal.summaries.components.rangeSelector\r\ndefine([\r\n\t'./rangeSelectorController',\r\n\t'./rangeSelectorDirective',\r\n\t'./summaryOptionsStore'\r\n], function(\r\n\trangeSelectorControllerLoader,\r\n\trangeSelectorDirectiveLoader,\r\n\tsummaryOptionsStoreLoader\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\trangeSelectorControllerLoader(module);\r\n\t\trangeSelectorDirectiveLoader(module);\r\n\t\tsummaryOptionsStoreLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/rangeSelector/_loader.js","//{CODE:EUP64}\r\n// di.einvoicing.ui.portal.portal.summaries.components.rangeSelector\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('RangeSelectorController', RangeSelectorController);\r\n\r\n\t\tRangeSelectorController.$inject = ['$scope', 'summaryOptionsStore'];\r\n\r\n\t\tfunction RangeSelectorController(scope, summaryOptionsStore) {\r\n\t\t\tvar vm = this;\r\n\t\t\t\r\n\t\t\tvm.buttonClicked = buttonClicked;\r\n\r\n\t\t\tloadInitialValue();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which attempts to load an inital value for the selected button firstly based\r\n\t\t\t * on any values stored in the local storage or secondly via the default item option \r\n\t\t\t * provided to the directive\r\n\t\t\t */\r\n\t\t\tfunction loadInitialValue() {\r\n\t\t\t\tvar storageItem = summaryOptionsStore.getSummaryOptions(scope.summaryType);\r\n\r\n\t\t\t\tif (util.isDefined(storageItem)) {\r\n\t\t\t\t\tbuttonClicked(storageItem);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar defaultItem = _.find(scope.buttonConfiguration, function (item) {\r\n\t\t\t\t\t\treturn item.isDefault === true;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (util.isObject(defaultItem)) {\r\n\t\t\t\t\t\tbuttonClicked(defaultItem.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function called when a button is clicked, updates the bound object with the new value\r\n\t\t\t * @param option - The selected option\r\n\t\t\t */\r\n\t\t    function buttonClicked(option) {\r\n\t\t    \tvm.selectedItem = option;\r\n\t\t    \tsummaryOptionsStore.setSummaryOptions(scope.summaryType, option);\r\n\t\t\t    scope.onChangeAccessor(option);\r\n\t\t    }\r\n\t\t}\r\n\r\n\t\treturn RangeSelectorController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/rangeSelector/rangeSelectorController.js","//{CODE:EUP63}\r\n// di.einvoicing.ui.portal.portal.summaries.components.rangeSelector\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diRangeSelector', diRangeSelector);\r\n\r\n\t\tfunction diRangeSelector() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tbuttonConfiguration: '=',\r\n\t\t\t\t\tsummaryType: '=',\r\n\t\t\t\t\tonChangeAccessor: '='\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: 'RangeSelectorController',\r\n\t\t\t\tcontrollerAs: 'rangeSelectorCtrl',\r\n\t\t\t\ttemplateUrl: 'src/app/portal/summaries/_components/rangeSelector/rangeSelector.html'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diRangeSelector;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/rangeSelector/rangeSelectorDirective.js","//{CODE:EUP82}\r\n// di.einvoicing.ui.portal.portal.summaries.components.rangeSelector\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('summaryOptionsStore', summaryOptionsStore);\r\n\r\n\t\tsummaryOptionsStore.$inject = ['sessionStore'];\r\n\r\n\t\t/**\r\n\t\t * Repository for storing options relating to summaries\r\n\t\t */\r\n\t\tfunction summaryOptionsStore(sessionStore) {\r\n\t\t\tvar storagePrefix = 'summaryOptionsStore';\r\n\t\t\tvar storageKey = 'summaryPreferences';\r\n\r\n\t\t\tvar service = {\r\n\t\t\t\tsetSummaryOptions: setSummaryOptions,\r\n\t\t\t\tgetSummaryOptions: getSummaryOptions,\r\n\t\t\t\tclear: clear\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which sets the summary options for the specific summary in local storage\r\n\t\t\t * \r\n\t\t\t * @param summaryType - The summary type to update the summary configuration for\r\n\t\t\t * @param summaryOptions - The options for the summary \r\n\t\t\t */\r\n\t\t\tfunction setSummaryOptions(summaryType, summaryOptions) {\r\n\t\t\t\tvar summaryPreferences = sessionStore.get(storageKey, storagePrefix);\r\n\t\t\t\tvar newPreference = {}\r\n\t\t\t\tnewPreference[summaryType] = summaryOptions;\r\n\t\t\t\tvar preferences = _.extend({}, summaryPreferences, newPreference);\r\n\t\t\t\tsessionStore.set(storageKey, preferences, storagePrefix);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which gets the preferences for a specific summary type\r\n\t\t\t * \r\n\t\t\t * @param summaryType - The type of summary to get the options for\r\n\t\t\t * @returns - The object representing the options for the specified summary type\r\n\t\t\t * or undefined if preferences for the specific summary cannot be found\r\n\t\t\t */\r\n\t\t\tfunction getSummaryOptions(summaryType) {\r\n\t\t\t\tvar summaryPreferences = sessionStore.get(storageKey, storagePrefix);\r\n\r\n\t\t\t\tif (util.isObject(summaryPreferences)) {\r\n\t\t\t\t\treturn summaryPreferences[summaryType];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Function which removes the users preferences from session storage, currently connected to the logout event handler\r\n\t\t\t */\r\n\t\t\tfunction clear() {\r\n\t\t\t\tsessionStore.remove(storageKey, storagePrefix);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn summaryOptionsStore;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/rangeSelector/summaryOptionsStore.js","//{CODE:EUP7Y}\r\n// di.einvoicing.ui.portal.portal.summaries.components.singleValueSummary\r\ndefine([\r\n\t'./singleValueSummaryController',\r\n\t'./singleValueSummaryDirective'\r\n], function (\r\n\tsingleValueSummaryControllerLoader,\r\n\tsingleValueSummaryDirectiveLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tsingleValueSummaryControllerLoader(module);\r\n\t\tsingleValueSummaryDirectiveLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/singleValueSummary/_loader.js","//{CODE:EUP80}\r\n// di.einvoicing.ui.portal.portal.summaries.components.singleValueSummary\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.controller('SingleValueSummaryController', SingleValueSummaryController);\r\n\r\n\t\tSingleValueSummaryController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'diState',\r\n\t\t\t'clickThroughDataMapper',\r\n\t\t\t'summaryProxy',\r\n\t\t\t'translator',\r\n\t\t\t'modalSpinner'];\r\n\r\n\t\tfunction SingleValueSummaryController(\r\n\t\t\tscope,\r\n\t\t\tdiState,\r\n\t\t\tclickThroughDataMapper,\r\n\t\t\tsummaryProxy,\r\n\t\t\ttranslator,\r\n\t\t\tmodalSpinner) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvar spinner;\r\n\r\n\t\t\tvm.util = util;\r\n\t\t\tvm.summaryData = [];\r\n\t\t\tvm.loadData = loadData;\r\n\t\t\tvm.clickThrough = clickThrough;\r\n\t\t\tvm.loadValueClasses = loadValueClasses;\r\n\t\t\tvm.getClickableSummary = getClickableSummary;\r\n\r\n\t\t\tintialise();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\tfunction intialise() {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP6401E\", scope.summaryConfiguration, \"summaryConfiguration\");\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which calls the proxy to load the data for the summary, first showing the spinner\r\n\t\t\t */\r\n\t\t\tfunction loadData() {\r\n\t\t\t\tvm.dataLoadFailed = undefined;\r\n\r\n\t\t\t\tif (util.isDefined(spinner) === false && util.isFunction(scope.getSpinnerElement)) {\r\n\t\t\t\t    spinner = modalSpinner.showModalSpinner(scope.getSpinnerElement(), { position: 'absolute' });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar params = _.extend({}, scope.summaryConfiguration.summaryParameters);\r\n\t\t\t\t\r\n\t\t\t\tsummaryProxy\r\n\t\t\t\t\t.getSummaryData(scope.summaryConfiguration.summaryType, params)\r\n\t\t\t\t\t.then(summaryDataReceived, summaryDataFailed);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which processes the data received from the proxy and fills the summary data array with it\r\n\t\t\t * @param data - The data received from the proxy\r\n\t\t\t */\r\n\t\t\tfunction summaryDataReceived(data) {\r\n\t\t\t\tif (util.isArray(data) === true) {\r\n\t\t\t\t\tvm.dataItem = data[0];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvm.dataItem = data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tremoveSpinnerIfRequired();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which creates a notification message when the summary data fails to load\r\n\t\t\t */\r\n\t\t\tfunction summaryDataFailed() {\r\n\t\t\t\tremoveSpinnerIfRequired();\r\n\t\t\t\tvm.dataLoadFailed = true;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which removes the spinner if it is currently shown and sets the variable to undefined\r\n\t\t\t */\r\n\t\t\tfunction removeSpinnerIfRequired() {\r\n\t\t\t\tif (util.isObject(spinner) && util.isFunction(spinner.remove)) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t\tspinner = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which intiates the transition to the linked state\r\n\t\t\t */\r\n\t\t\tfunction clickThrough() {\r\n\t\t\t\tif (util.isObject(vm.dataItem) && util.isNonEmptyString(vm.dataItem.clickThroughState)) {\r\n\t\t\t\t\tdiState.go(vm.dataItem.clickThroughState, clickThroughDataMapper.map(vm.dataItem));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which determines whether the summary is clickable \r\n\t\t\t * based on the information returned with the summary data\r\n\t\t\t * @returns true/false if it can be determined, undefined otherwise \r\n\t\t\t */\r\n\t\t\tfunction getClickableSummary()\r\n\t\t\t{\r\n\t\t\t\tif (util.isObject(vm.dataItem)) {\r\n\t\t\t\t\treturn util.isNonEmptyString(vm.dataItem.clickThroughState);\r\n\t\t\t\t}\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which determines if any additional classes should be added to the summary value\r\n\t\t\t * based on a function provided as part of the summary configuration\r\n\t\t\t * \r\n\t\t\t * @returns - empty array if no value classes function provided\r\n\t\t\t * undefined if the value is not yet loaded and therefore the value class function cannot provide a value\r\n\t\t\t * the return from the valueDisplayClasses function provided when the value is loaded\r\n\t\t\t */\r\n\t\t\tfunction loadValueClasses() {\r\n\t\t\t\tif (util.isFunction(scope.summaryConfiguration.valueDisplayClasses)) {\r\n\t\t\t\t\tif (util.isObject(vm.dataItem)) {\r\n\t\t\t\t\t\treturn scope.summaryConfiguration.valueDisplayClasses(vm.dataItem.itemCount);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn SingleValueSummaryController;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/singleValueSummary/singleValueSummaryController.js","//{CODE:EUP7Z}\r\n// di.einvoicing.ui.portal.portal.summaries.components.singleValueSummary\r\ndefine(['angular'], function (ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diSingleValueSummary', diSingleValueSummary);\r\n\r\n\t\tfunction diSingleValueSummary() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tsummaryConfiguration: '='\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: 'SingleValueSummaryController',\r\n\t\t\t\tcontrollerAs: 'singleValueSummaryCtrl',\r\n\t\t\t\ttemplateUrl: 'src/app/portal/summaries/_components/singleValueSummary/singleValueSummary.html',\r\n\t\t\t\tlink: link\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope, element, attributes, controller) {\r\n\t\t\t\tscope.getSpinnerElement = getSpinnerElement;\r\n\r\n\t\t\t\tcontroller.loadData();\r\n\r\n\t\t\t\tfunction getSpinnerElement() {\r\n\t\t\t\t\treturn ng.element(element).find('.spinner');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diSingleValueSummary;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/singleValueSummary/singleValueSummaryDirective.js","//{CODE:EUP7V}\r\n// di.einvoicing.ui.portal.portal.summaries.components\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\r\n\t\tmodule.controller('SummarySelectorController', SummarySelectorController);\r\n\r\n\t\tSummarySelectorController.$inject = ['userRightsRepository', 'USER_RIGHTS'];\r\n\r\n\t\tfunction SummarySelectorController(rightsRepository, userRights) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tinitialise();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * Initialises the controller with the values for which summary to display\r\n\t\t\t */\r\n\t\t\tfunction initialise() {\r\n\t\t\t\tvm.displayBuyerSummary = rightsRepository.userHasRight(userRights.Buyer);\r\n\t\t\t\tvm.displaySupplierSummary = rightsRepository.userHasRight(userRights.Supplier);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn SummarySelectorController;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/summarySelectorController.js","//{CODE:EUP7W}\r\n// di.einvoicing.ui.portal.summaries.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.constant('SUMMARY_TYPES', summaryTypes());\r\n\r\n        function summaryTypes() {\r\n            return {\r\n                unknown: 'Unknown',\r\n                countOrdersRejected: 'CountOrdersRejected',\r\n                countOrdersToAccept: 'CountOrdersSentReceived',\r\n                countOrdersToInvoice: 'CountOrdersToInvoice',\r\n                countInvoicesUnpaid: 'CountInvoicesUnpaid',\r\n                countInvoicesMismatched: 'CountInvoicesMismatched',\r\n                countInvoicesOverdue: 'CountInvoicesOverdue',\r\n                countInvoicesInDispute: 'CountInvoicesInDispute',\r\n                listInvoicesOverdue: 'ListInvoicesOverdue',\r\n                listOrdersLatestReceived: 'ListOrdersLatestReceived',\r\n                listOrdersHighestValue: 'ListOrdersHighestValue',\r\n                listPartiesInvoiceValue: 'ListPartiesInvoiceValue',\r\n                listInvoicesToPayGroupedByStatus: 'ListInvoicesToPayGroupedByStatus',\r\n                listOrdersValueGroupedByStatus: 'ListOrdersValueGroupedByStatus'\r\n            };\r\n        }\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/summaryTypes.js","//{CODE:EUP7T}\r\n// di.einvoicing.ui.portal.portal.summaries.components.tabularSummary\r\ndefine([\r\n\t'./tabularSummaryController',\r\n\t'./tabularSummaryDirective'\r\n], function (\r\n\ttabularSummaryControllerLoader,\r\n\ttabularSummaryDirectiveLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\ttabularSummaryControllerLoader(module);\r\n\t\ttabularSummaryDirectiveLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/tabularSummary/_loader.js","//{CODE:EUP64}\r\n// di.einvoicing.ui.portal.portal.summaries.components.tabularSummary\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.controller('TabularSummaryController', TabularSummaryController);\r\n\r\n\t\tTabularSummaryController.$inject = [\r\n\t\t\t'$scope',\r\n\t\t\t'diState',\r\n\t\t\t'clickThroughDataMapper',\r\n\t\t\t'summaryProxy',\r\n\t\t\t'translator',\r\n\t\t\t'modalSpinner'];\r\n\r\n\t\tfunction TabularSummaryController(\r\n\t\t\tscope,\r\n\t\t\tdiState,\r\n\t\t\tclickThroughDataMapper,\r\n\t\t\tsummaryProxy,\r\n\t\t\ttranslator,\r\n\t\t\tmodalSpinner) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvar spinner;\r\n\r\n\t\t\tvm.rowClicked = rowClicked;\r\n\t\t\tvm.util = util;\r\n\t\t\tvm.summaryData = [];\r\n\t\t\tvm.tableConfiguration = {};\r\n\t\t\tvm.loadData = loadData;\r\n\t\t\tvm.buttonValueChanged = buttonValueChanged;\r\n\t\t    vm.clickTitle = clickTitle;\r\n\t\t\t\r\n\t\t\tintialise();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\tfunction intialise() {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP6401E\", scope.summaryConfiguration, \"summaryConfiguration\");\r\n\t\t\t\tvm.tableConfiguration.data = [];\r\n\t\t\t\tvm.tableConfiguration.columns = scope.summaryConfiguration.tableColumns;\r\n\t\t\t\tvm.tableConfiguration.enablePaging = true;\r\n\t\t\t\tvm.tableConfiguration.maxButtonsShown = 2;\r\n\t\t\t\tvm.tableConfiguration.paginationPageSize = 10;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which calls the proxy to load the data for the summary, first showing the spinner\r\n\t\t\t */\r\n\t\t\tfunction loadData() {\r\n\t\t\t\tvm.dataLoadFailed = undefined;\r\n\r\n\t\t\t\tvar params = _.extend({}, scope.summaryConfiguration.summaryParameters);\r\n\r\n\t\t\t\tif (util.isString(scope.summaryConfiguration.rangeParameter)) {\r\n\t\t\t\t\tif (util.isDefined(vm[scope.summaryConfiguration.rangeParameter])) {\r\n\t\t\t\t\t\tparams[scope.summaryConfiguration.rangeParameter] = vm[scope.summaryConfiguration.rangeParameter];\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t//If the range parameter is configured and not yet defined then do not load at this time\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isDefined(spinner) === false && util.isFunction(scope.getSpinnerElement)) {\r\n\t\t\t\t    spinner = modalSpinner.showModalSpinner(scope.getSpinnerElement(), { position: 'absolute' });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsummaryProxy\r\n\t\t\t\t\t.getSummaryData(scope.summaryConfiguration.summaryType, params)\r\n\t\t\t\t\t.then(summaryDataReceived, summaryDataFailed);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which changes the state to the clickThroughState provided to the function\r\n\t\t\t * @param row - The item to process \r\n\t\t\t */\r\n\t\t\tfunction rowClicked(row) {\r\n\t\t\t\tif (util.isNonEmptyString(row.clickThroughState)) {\r\n\t\t\t\t\tdiState.go(row.clickThroughState, clickThroughDataMapper.map(row));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which processes the data received from the proxy and fills the summary data array with it\r\n\t\t\t * @param data - The data received from the proxy\r\n\t\t\t */\r\n\t\t\tfunction summaryDataReceived(data) {\r\n\t\t\t\tremoveSpinnerIfRequired();\r\n\t\t\t\tvm.summaryData.fill(data);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which creates a notification message when the summary data fails to load\r\n\t\t\t */\r\n\t\t\tfunction summaryDataFailed() {\r\n\t\t\t\tremoveSpinnerIfRequired();\r\n\t\t\t\tvm.dataLoadFailed = true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeSpinnerIfRequired() {\r\n\t\t\t\tif (util.isObject(spinner) && util.isFunction(spinner.remove)) {\r\n\t\t\t\t\tspinner.remove();\r\n\t\t\t\t\tspinner = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which handles new values being selected in the range selector control\r\n\t\t\t * \r\n\t\t\t * @param buttonValue - The value of the selected option\r\n\t\t\t */\r\n\t\t\tfunction buttonValueChanged(buttonValue) {\r\n\t\t\t\tvm[scope.summaryConfiguration.rangeParameter] = buttonValue;\r\n\t\t\t\tloadData();\r\n\t\t\t}\r\n\r\n\r\n\t\t    /**\r\n            * Function handle summary title clicks to optionaly set custom date ranges\r\n            */\r\n\t\t\tfunction clickTitle() {\r\n\r\n\t\t\t    if (scope.summaryConfiguration.rangeParameter) {\r\n\t\t\t        var range = vm[scope.summaryConfiguration.rangeParameter];\r\n\t\t\t        var result = scope.summaryConfiguration.titleConfiguration.paramsCreator(range);\r\n\r\n\t\t\t        diState.go(scope.summaryConfiguration.titleConfiguration.target, result);\r\n\t\t\t    } else {\r\n\t\t\t        diState.go(scope.summaryConfiguration.titleConfiguration.target);\r\n\t\t\t    }\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn TabularSummaryController;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/tabularSummary/tabularSummaryController.js","//{CODE:EUP63}\r\n// di.einvoicing.ui.portal.portal.summaries.components.tabularSummary\r\ndefine(['angular'], function (ng) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diTabularSummary', diTabularSummary);\r\n\r\n\t\tfunction diTabularSummary() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tsummaryConfiguration: '='\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: 'TabularSummaryController',\r\n\t\t\t\tcontrollerAs: 'tabularSummaryCtrl',\r\n\t\t\t\ttemplateUrl: 'src/app/portal/summaries/_components/tabularSummary/tabularSummary.html',\r\n\t\t\t\tlink: link\r\n\t\t\t};\r\n\r\n\t\t\tfunction link(scope, element, attributes, controller) {\r\n\t\t\t\tscope.getSpinnerElement = getSpinnerElement;\r\n\r\n\t\t\t\tcontroller.loadData();\r\n\r\n\t\t\t\tfunction getSpinnerElement() {\r\n\t\t\t\t\treturn ng.element(element).find('.spinner');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diTabularSummary;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_components/tabularSummary/tabularSummaryDirective.js","define([\r\n\t'./_components/_loader',\r\n\t'./buyerSummary/_loader',\r\n\t'./supplierSummary/_loader',\r\n\t'./clickThroughDataMapper',\r\n    './summary-proxy.factory'\r\n], function (\r\n\tcomponentsLoader,\r\n\tbuyerSummaryLoader,\r\n\tsupplierSummaryLoader,\r\n\tclickThroughDataMapper,\r\n    summaryProxyLoader\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    summaryProxyLoader(module);\r\n\t\tcomponentsLoader(module);\r\n\t\tbuyerSummaryLoader(module);\r\n\t\tsupplierSummaryLoader(module);\r\n\t\tclickThroughDataMapper(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/_loader.js","//{CODE:EUP81}\r\n// di.einvoicing.ui.portal.portal.summaries.buyerSummary\r\ndefine([\r\n\t'./buyerSummaryDirective',\r\n\t'./buyerSummaryController'\r\n], function (\r\n\tbuyerSummaryDirectiveLoader,\r\n\tbuyerSummaryControllerLoader\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tbuyerSummaryDirectiveLoader(module);\r\n\t\tbuyerSummaryControllerLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/buyerSummary/_loader.js","//{CODE:EUP7V}\r\n// di.einvoicing.ui.portal.portal.summaries.components\r\ndefine(['moment'], function (moment) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\r\n\t\tmodule.controller('BuyerSummaryController', BuyerSummaryController);\r\n\r\n\t\tBuyerSummaryController.$inject = ['SUMMARY_TYPES', 'CLIENT_ENUMS'];\r\n\r\n\t\tfunction BuyerSummaryController(summaryTypes, clientEnums) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvm.countOrdersRejectedConfiguration = {\r\n\t\t\t\ttitleConfiguration: 'EINVOICING.PORTAL.SUMMARIES.BUYER.COUNT_ORDERS_REJECTED.TITLE',\r\n\t\t\t\tsummaryType: summaryTypes.countOrdersRejected\r\n\t\t\t}\r\n\r\n\t\t\tvm.countInvoicesMismatchedConfiguration = {\r\n\t\t\t\ttitleConfiguration: 'EINVOICING.PORTAL.SUMMARIES.BUYER.COUNT_INVOICES_MISMATCHED.TITLE',\r\n\t\t\t\tsummaryType: summaryTypes.countInvoicesMismatched,\r\n\t\t\t\tvalueDisplayClasses: function (itemCount) {\r\n\t\t\t\t\tif (itemCount > 100) {\r\n\t\t\t\t\t\treturn ['red-font'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (itemCount > 2) {\r\n\t\t\t\t\t\treturn ['orange-font'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvm.countInvoicesOverdueConfiguration = {\r\n\t\t\t\ttitleConfiguration: 'EINVOICING.PORTAL.SUMMARIES.BUYER.COUNT_INVOICES_OVERDUE.TITLE',\r\n\t\t\t\tsummaryType: summaryTypes.countInvoicesOverdue,\r\n\t\t\t\tvalueDisplayClasses: function (itemCount) {\r\n\t\t\t\t\tif (itemCount > 100) {\r\n\t\t\t\t\t\treturn ['red-font'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (itemCount > 2) {\r\n\t\t\t\t\t\treturn ['orange-font'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvm.countInvoicesDisputedConfiguration = {\r\n\t\t\t\ttitleConfiguration: 'EINVOICING.PORTAL.SUMMARIES.BUYER.COUNT_INVOICES_DISPUTED.TITLE',\r\n\t\t\t\tsummaryType: summaryTypes.countInvoicesInDispute,\r\n\t\t\t\tvalueDisplayClasses: function (itemCount) {\r\n\t\t\t\t\tif (itemCount > 100) {\r\n\t\t\t\t\t\treturn ['red-font'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (itemCount > 2) {\r\n\t\t\t\t\t\treturn ['orange-font'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvm.listInvoicesOverdueConfiguration = {\r\n\t\t\t\tsummaryType: summaryTypes.listInvoicesOverdue,\r\n\t\t\t\trangeParameter: 'sortOption',\r\n\t\t\t\ttitleConfiguration: {\r\n\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_OVERDUE_INVOICES.TITLE',\r\n\t\t\t\t\ttarget: 'portal.invoices.list',\r\n\t\t\t\t\tparamsCreator: function(range) {\r\n\t\t\t\t        return {\r\n\t\t\t\t            dateTimeFilter: 'Custom',\r\n\t\t\t\t            fromDate: moment().utc().subtract(range, 'days').format(),\r\n\t\t\t\t            toDate: moment().utc().format(),\r\n\t\t\t\t            statusFilter: 13\r\n\t\t\t\t        }\r\n\t\t\t\t    }\r\n\t\t\t\t},\r\n\t\t\t\ttableColumns: [{\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_OVERDUE_INVOICES.COLUMNS.SUPPLIER',\r\n\t\t\t\t\ttemplate: '<div class=\"tooltip-wrap\">\\\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-ellipsis\">{{binding.partyName}}</span>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"(binding.partyName || \\'\\').length >= 35\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-class=\"((binding.partyName || \\'\\').length > 70) ? [\\'tooltip\\', \\'tooltip-multiline\\'] : \\'tooltip\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t<span>\\\r\n\t\t\t\t\t\t\t\t\t\t\t{{ ::binding.partyName }}\\\r\n\t\t\t\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\tcellClass: 'max-width-300'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_OVERDUE_INVOICES.COLUMNS.DUE_DATE',\r\n\t\t\t\t\ttemplate: '<span>{{binding.paymentDueDate | diDate}}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_OVERDUE_INVOICES.COLUMNS.INVOICE_VALUE',\r\n\t\t\t\t\tcellClass: 'numericcell',\r\n\t\t\t\t\ttemplate: '<span>{{binding.total | diCurrency:binding.currencyId}}</span>'\r\n\t\t\t\t}],\r\n\t\t\t\trangeOptions: [{\r\n\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_OVERDUE_INVOICES.OPTIONS.DUE',\r\n\t\t\t\t\tisDefault: true,\r\n\t\t\t\t\tvalue: 2\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_OVERDUE_INVOICES.OPTIONS.VALUE',\r\n\t\t\t\t\tvalue: 1\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\r\n\t\t\tvm.listSuppliersInvoiceValueConfiguration = {\r\n\t\t\t\tsummaryType: summaryTypes.listPartiesInvoiceValue,\r\n\t\t\t\ttitleConfiguration: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_PARTIES_VALUE.TITLE',\r\n\t\t\t\ttableColumns: [{\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_PARTIES_VALUE.COLUMNS.SUPPLIER',\r\n\t\t\t\t\ttemplate: '<span>{{binding.supplier}}</span>'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_PARTIES_VALUE.COLUMNS.INVOICE_TOTAL',\r\n\t\t\t\t\tcellClass: 'numericcell',\r\n\t\t\t\t\ttemplate: '<span>{{binding.value | diCurrency:binding.currencyId}}</span>'\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\r\n\t\t\tvm.chartSummaryConfiguration = {\r\n\t\t\t\tsummaryType: summaryTypes.listInvoicesToPayGroupedByStatus,\r\n\t\t\t\trangeParameter: 'days',\r\n\t\t\t\ttitleConfiguration: {\r\n\t\t\t\t\ttarget: 'portal.invoices.list',\r\n\t\t\t\t\tparamsCreator: function (range) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tdateType: 1, //created date\r\n\t\t\t\t\t\t\tsortOption: 4, //created date desc\r\n\t\t\t\t\t\t\tdateTimeFilter: 'Custom',\r\n\t\t\t\t\t\t\tfromDate: moment().utc().subtract(range, 'days').format(),\r\n\t\t\t\t\t\t\ttoDate: moment().utc().format()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_INVOICES_CHART.TITLE'\r\n\t\t\t\t},\r\n\t\t\t\trangeOptions: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_INVOICES_CHART.RANGE.30_DAYS',\r\n\t\t\t\t\t\tisDefault: true,\r\n\t\t\t\t\t\tvalue: 30\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_INVOICES_CHART.RANGE.60_DAYS',\r\n\t\t\t\t\t\tvalue: 60\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.BUYER.LIST_INVOICES_CHART.RANGE.90_DAYS',\r\n\t\t\t\t\t\tvalue: 90\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tdocumentType: clientEnums.documentType.invoice,\r\n\t\t\t\tchart: {\r\n\t\t\t\t\ttype: 'bar',\r\n\t\t\t\t\torientation: 'h',\r\n\t\t\t\t\tbarmode: 'stack',\r\n\t\t\t\t\tdisplayModeBar: false,\r\n\t\t\t\t\tdoubleClick: false,\r\n\t\t\t\t\tscrollZoom: false,\r\n\t\t\t\t\teditable: false,\r\n\t\t\t\t\tbarWatermark: {\r\n\t\t\t\t\t\tvalue: 'none',\r\n\t\t\t\t\t\tfont: {\r\n\t\t\t\t\t\t\tfamily: \"'Lato', Arial, sans-serif\",\r\n\t\t\t\t\t\t\tsize: 14,\r\n\t\t\t\t\t\t\tcolor: '#e6e7ea'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmargin: {\r\n\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tleft: 30,\r\n\t\t\t\t\t\tright: 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\thover: {\r\n\t\t\t\t\t\tinfo: 'text',\r\n\t\t\t\t\t\tmode: 'closest'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\tshowLegend: true,\r\n\t\t\t\t\t\torientation: \"h\",\r\n\t\t\t\t\t\tfont: {\r\n\t\t\t\t\t\t\tfamily: \"'Lato', Arial, sans-serif\",\r\n\t\t\t\t\t\t\tsize: 14\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttraceOrder: \"normal\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyAxis: {\r\n\t\t\t\t\t\tautoRange: false,\r\n\t\t\t\t\t\tfixedRange: true,\r\n\t\t\t\t\t\tticks: {\r\n\t\t\t\t\t\t\tshowLabels: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\txAxis: {\r\n\t\t\t\t\t\tfixedRange: true,\r\n\t\t\t\t\t\tticks: {\r\n\t\t\t\t\t\t\tfont: {\r\n\t\t\t\t\t\t\t\tfamily: \"'Lato', Arial, sans-serif\",\r\n\t\t\t\t\t\t\t\tsize: 14\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treturn BuyerSummaryController;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/buyerSummary/buyerSummaryController.js","//{CODE:EUP7Z}\r\n// di.einvoicing.ui.portal.portal.summaries.components.singleValueSummary\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diBuyerSummary', diBuyerSummary);\r\n\r\n\t\tfunction diBuyerSummary() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tcontroller: 'BuyerSummaryController',\r\n\t\t\t\tcontrollerAs: 'buyerSummaryCtrl',\r\n\t\t\t\ttemplateUrl: 'src/app/portal/summaries/buyerSummary/buyerSummary.html'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diBuyerSummary;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/buyerSummary/buyerSummaryDirective.js","//{CODE:EUP69}\r\n// di.einvoicing.ui.portal.summaries\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('clickThroughDataMapper', clickThroughDataMapper);\r\n\r\n\t\tfunction clickThroughDataMapper() {\r\n\t\t\treturn {\r\n\t\t\t\tmap: map\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which maps the values of the provided object to a new object\r\n\t\t\t * based on the settings object provided \r\n\t\t\t * \r\n\t\t\t * @param item - The item to retrive the values from\r\n\t\t\t * @param dataSettings - An optional object which provides the mappings\r\n\t\t\t * as comma separated key value pairs separated by semicolons.  \r\n\t\t\t * If not provided then a property called clickThroughData of item is used.\r\n\t\t\t * @returns - The mapped object \r\n\t\t\t */\r\n\t\t\tfunction map(item, dataSettings) {\r\n\t\t\t\tguard.throwIfNotAnObject('EUP6901E', item, 'item');\r\n\r\n\t\t\t\tif (util.isUndefined(dataSettings)) {\r\n\t\t\t\t\tdataSettings = item.clickThroughData;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tguard.throwIfNullOrUndefined('EUP6901E', dataSettings, 'dataSettings');\r\n\r\n\t\t\t\tvar paramsObject = {};\r\n\r\n\t\t\t\tvar keyValuePairs = dataSettings.split(';');\r\n\r\n\t\t\t\t_.each(keyValuePairs, function(itemMapping) {\r\n\t\t\t\t\titemMapping = itemMapping.split(',');\r\n\r\n\t\t\t\t\tparamsObject[itemMapping[0]] = item[itemMapping[1]];\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn paramsObject;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn clickThroughDataMapper;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/clickThroughDataMapper.js","//{CODE:EUP65}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.factory('summaryProxy', summaryProxy);\r\n\r\n\t\tsummaryProxy.$inject = ['webApiHttp', 'urlHelper'];\r\n\r\n\t\tfunction summaryProxy(http, urlHelper) {\r\n\t\t\treturn {\r\n\t\t\t\tgetSummaryData: getSummaryData\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Method which gets the data for a summary with the specified ID\r\n\t\t\t * \r\n\t\t\t * @param summaryId - the ID of the summary to get the report data for\r\n\t\t\t * @returns - promise which resolves to the summary data \r\n\t\t\t */\r\n\t\t\tfunction getSummaryData(summaryType, summaryParameters) {\r\n\t\t\t\tguard.throwIfEmptyString(\"EUP6501E\", summaryType, \"summaryType\");\r\n\t\t\t\t\r\n\t\t\t\tvar requestParams = {\r\n\t\t\t\t\tsummaryType: summaryType\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Summary/GetSummaryData', requestParams);\r\n\r\n\t\t\t\tvar promise = http.post(requestUrl, summaryParameters);\r\n\r\n\t\t\t\treturn promise;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn summaryProxy;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/summary-proxy.factory.js","//{CODE:EUP81}\r\n// di.einvoicing.ui.portal.portal.summaries.buyerSummary\r\ndefine([\r\n\t'./supplierSummaryDirective',\r\n\t'./supplierSummaryController'\r\n], function (\r\n\tsupplierSummaryDirectiveLoader,\r\n\tsupplierSummaryControllerLoader\r\n\t) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tsupplierSummaryDirectiveLoader(module);\r\n\t\tsupplierSummaryControllerLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/supplierSummary/_loader.js","//{CODE:EUP7V}\r\n// di.einvoicing.ui.portal.portal.summaries.components\r\ndefine(['moment'], function (moment) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\r\n\t\tmodule.controller('SupplierSummaryController', SupplierSummaryController);\r\n\r\n\t\tSupplierSummaryController.$inject = ['SUMMARY_TYPES', 'CLIENT_ENUMS'];\r\n\r\n\t\tfunction SupplierSummaryController(summaryTypes, clientEnums) {\r\n\t\t\tvar vm = this;\r\n\r\n\t\t\tvm.countOrdersToAcceptConfiguration = {\r\n\t\t\t\ttitleConfiguration: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.COUNT_ORDERS_TO_ACCEPT.TITLE',\r\n\t\t\t\tsummaryType: summaryTypes.countOrdersToAccept,\r\n\t\t\t\tvalueDisplayClasses: function (itemCount) {\r\n\t\t\t\t\tif (itemCount > 10) {\r\n\t\t\t\t\t\treturn ['red-font'];\r\n\t\t\t\t\t} else if (itemCount > 2) {\r\n\t\t\t\t\t\treturn ['orange-font'];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvm.countOrdersToInvoiceConfiguration = {\r\n\t\t\t\ttitleConfiguration: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.COUNT_ORDERS_TO_INVOICE.TITLE',\r\n\t\t\t\tsummaryType: summaryTypes.countOrdersToInvoice\r\n\t\t\t}\r\n\r\n\t\t\tvm.countInvoicesUnpaidConfiguration = {\r\n\t\t\t\ttitleConfiguration: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.COUNT_INVOICES_UNPAID.TITLE',\r\n\t\t\t\tsummaryType: summaryTypes.countInvoicesUnpaid,\r\n\t\t\t\tvalueDisplayClasses: function (itemCount) {\r\n\t\t\t\t\tif (itemCount > 100) {\r\n\t\t\t\t\t\treturn ['red-font'];\r\n\t\t\t\t\t} else if (itemCount > 2) {\r\n\t\t\t\t\t\treturn ['orange-font'];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvm.countInvoicesDisputedConfiguration = {\r\n\t\t\t\ttitleConfiguration: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.COUNT_INVOICES_DISPUTED.TITLE',\r\n\t\t\t\tsummaryType: summaryTypes.countInvoicesInDispute,\r\n\t\t\t\tvalueDisplayClasses: function (itemCount) {\r\n\t\t\t\t\tif (itemCount > 100) {\r\n\t\t\t\t\t\treturn ['red-font'];\r\n\t\t\t\t\t} else if (itemCount > 2) {\r\n\t\t\t\t\t\treturn ['orange-font'];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvm.countInvoicesOverdueConfiguration = {\r\n\t\t\t\ttitleConfiguration: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.COUNT_INVOICES_OVERDUE.TITLE',\r\n\t\t\t\tsummaryType: summaryTypes.countInvoicesOverdue,\r\n\t\t\t\tvalueDisplayClasses: function (itemCount) {\r\n\t\t\t\t\tif (itemCount > 100) {\r\n\t\t\t\t\t\treturn ['red-font'];\r\n\t\t\t\t\t} else if (itemCount > 2) {\r\n\t\t\t\t\t\treturn ['orange-font'];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvm.listOrdersLatestConfiguration = {\r\n\t\t\t\tsummaryType: summaryTypes.listOrdersLatestReceived,\r\n\t\t\t\ttitleConfiguration: {\r\n\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_LATEST.TITLE',\r\n\t\t\t\t\ttarget: 'portal.orders.list',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tsortOption: 4,\r\n\t\t\t\t\t\tdateType: 1,\r\n\t\t\t\t\t\tdateTimeFilter: 'Custom',\r\n\t\t\t\t\t\tfromDate: '1900-01-01',\r\n\t\t\t\t\t\ttoDate: '9999-12-31'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\ttableColumns: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_LATEST.COLUMNS.NUMBER',\r\n\t\t\t\t\t\ttemplate: '<span>{{binding.number}}</span>'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_LATEST.COLUMNS.CUSTOMER',\r\n\t\t\t\t\t\ttemplate: '<div class=\"tooltip-wrap\">\\\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-ellipsis\">{{binding.partyName}}</span>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"(binding.partyName || \\'\\').length >= 35\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-class=\"((binding.partyName || \\'\\').length > 70) ? [\\'tooltip\\', \\'tooltip-multiline\\'] : \\'tooltip\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t<span>\\\r\n\t\t\t\t\t\t\t\t\t\t\t{{ ::binding.partyName }}\\\r\n\t\t\t\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\t\tcellClass: 'max-width-300'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_LATEST.COLUMNS.VALUE',\r\n\t\t\t\t\t\tcellClass: 'numericcell',\r\n\t\t\t\t\t\ttemplate: '<span>{{binding.totalIncludingTax | diCurrency:binding.currencyId}}</span>'\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\r\n\t\t\tvm.listOrdersHighestValueConfiguration = {\r\n\t\t\t\tsummaryType: summaryTypes.listOrdersHighestValue,\r\n\t\t\t\trangeParameter: 'days',\r\n\t\t\t\ttitleConfiguration: {\r\n\t\t\t\t\ttarget: 'portal.orders.list',\r\n\t\t\t\t\tparamsCreator: function (range) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tsortOption: 10,\r\n\t\t\t\t\t\t\tdateType: 1,\r\n\t\t\t\t\t\t\tdateTimeFilter: 'Custom',\r\n\t\t\t\t\t\t\tfromDate: moment().utc().subtract(range, 'days').format(),\r\n\t\t\t\t\t\t\ttoDate: moment().utc().format(),\r\n\t\t\t\t\t\t\tloadCount: 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_HIGHEST_VALUE.TITLE'\r\n\t\t\t\t},\r\n\t\t\t\ttableColumns: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_HIGHEST_VALUE.COLUMNS.NUMBER',\r\n\t\t\t\t\t\ttemplate: '<span>{{binding.number}}</span>'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_HIGHEST_VALUE.COLUMNS.CUSTOMER',\r\n\t\t\t\t\t\ttemplate: '<div class=\"tooltip-wrap\">\\\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-ellipsis\">{{binding.partyName}}</span>\\\r\n\t\t\t\t\t\t\t\t\t<div ng-if=\"(binding.partyName || \\'\\').length >= 35\"\\\r\n\t\t\t\t\t\t\t\t\t\tng-class=\"((binding.partyName || \\'\\').length > 70) ? [\\'tooltip\\', \\'tooltip-multiline\\'] : \\'tooltip\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t<span>\\\r\n\t\t\t\t\t\t\t\t\t\t\t{{ ::binding.partyName }}\\\r\n\t\t\t\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\t\tcellClass: 'max-width-300'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_HIGHEST_VALUE.COLUMNS.VALUE',\r\n\t\t\t\t\t\tcellClass: 'numericcell',\r\n\t\t\t\t\t\ttemplate: '<span>{{binding.totalIncludingTax | diCurrency:binding.currencyId}}</span>'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\trangeOptions: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_HIGHEST_VALUE.RANGE.30_DAYS',\r\n\t\t\t\t\t\tisDefault: true,\r\n\t\t\t\t\t\tvalue: 30\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_HIGHEST_VALUE.RANGE.60_DAYS',\r\n\t\t\t\t\t\tvalue: 60\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_HIGHEST_VALUE.RANGE.90_DAYS',\r\n\t\t\t\t\t\tvalue: 90\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\r\n\t\t\tvm.chartSummaryConfiguration = {\r\n\t\t\t\tsummaryType: summaryTypes.listOrdersValueGroupedByStatus,\r\n\t\t\t\trangeParameter: 'days',\r\n\t\t\t\ttitleConfiguration: {\r\n\t\t\t\t\ttarget: 'portal.orders.list',\r\n\t\t\t\t\tparamsCreator: function (range) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tdateType: 1, //created date\r\n\t\t\t\t\t\t\tsortOption: 4, //created date desc\r\n\t\t\t\t\t\t\tdateTimeFilter: 'Custom',\r\n\t\t\t\t\t\t\tfromDate: moment().utc().subtract(range, 'days').format(),\r\n\t\t\t\t\t\t\ttoDate: moment().utc().format()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_CHART.TITLE'\r\n\t\t\t\t},\r\n\t\t\t\trangeOptions: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_HIGHEST_VALUE.RANGE.30_DAYS',\r\n\t\t\t\t\t\tisDefault: true,\r\n\t\t\t\t\t\tvalue: 30\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_HIGHEST_VALUE.RANGE.60_DAYS',\r\n\t\t\t\t\t\tvalue: 60\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlanguageKey: 'EINVOICING.PORTAL.SUMMARIES.SUPPLIER.LIST_ORDERS_HIGHEST_VALUE.RANGE.90_DAYS',\r\n\t\t\t\t\t\tvalue: 90\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tdocumentType: clientEnums.documentType.purchaseOrder,\r\n\t\t\t\tchart: {\r\n\t\t\t\t\ttype: 'bar',\r\n\t\t\t\t\torientation: 'h',\r\n\t\t\t\t\tbarmode: 'stack',\r\n\t\t\t\t\tdisplayModeBar: false,\r\n\t\t\t\t\tdoubleClick: false,\r\n\t\t\t\t\tscrollZoom: false,\r\n\t\t\t\t\teditable: false,\r\n\t\t\t\t\tmargin: {\r\n\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tleft: 30,\r\n\t\t\t\t\t\tright: 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\thover: {\r\n\t\t\t\t\t\tinfo: 'text',\r\n\t\t\t\t\t\tmode: 'closest'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\tshowLegend: true,\r\n\t\t\t\t\t\torientation: \"h\",\r\n\t\t\t\t\t\tfont: {\r\n\t\t\t\t\t\t\tfamily: \"'Lato', Arial, sans-serif\",\r\n\t\t\t\t\t\t\tsize: 14\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttraceOrder: \"normal\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyAxis: {\r\n\t\t\t\t\t\tautoRange: false,\r\n\t\t\t\t\t\tfixedRange: true,\r\n\t\t\t\t\t\tticks: {\r\n\t\t\t\t\t\t\tshowLabels: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\txAxis: {\r\n\t\t\t\t\t\tfixedRange: true,\r\n\t\t\t\t\t\tticks: {\r\n\t\t\t\t\t\t\tfont: {\r\n\t\t\t\t\t\t\t\tfamily: \"'Lato', Arial, sans-serif\",\r\n\t\t\t\t\t\t\t\tsize: 14\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treturn SupplierSummaryController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/supplierSummary/supplierSummaryController.js","//{CODE:EUP7Z}\r\n// di.einvoicing.ui.portal.portal.summaries.components.singleValueSummary\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('diSupplierSummary', diSupplierSummary);\r\n\r\n\t\tfunction diSupplierSummary() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tcontroller: 'SupplierSummaryController',\r\n\t\t\t\tcontrollerAs: 'supplierSummaryCtrl',\r\n\t\t\t\ttemplateUrl: 'src/app/portal/summaries/supplierSummary/supplierSummary.html'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn diSupplierSummary;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/summaries/supplierSummary/supplierSummaryDirective.js","define([\r\n\t'./_states',\r\n    './user-list/_loader',\r\n    './user-details/_loader',\r\n    './user-bottom-buttons/_loader',\r\n    './user-main-buttons/_loader',\r\n    './user-details-header/_loader',\r\n    './users-action-buttons/_loader',\r\n    './user-edit-restrictions/_loader'\r\n], function (\r\n    statesLoader,\r\n    listsLoader,\r\n    userDetailsLoader,\r\n    usersBottomButtonsLoader,\r\n    usersMainButtonsLoader,\r\n    userDetailsHeaderLoader,\r\n    usersActionsButtonsLoader,\r\n    userEditRestrictionsLoader\r\n    ) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        statesLoader(module);\r\n        listsLoader(module);\r\n        userDetailsLoader(module);\r\n        usersBottomButtonsLoader(module);\r\n        usersMainButtonsLoader(module);\r\n        userDetailsHeaderLoader(module);\r\n        usersActionsButtonsLoader(module);\r\n        userEditRestrictionsLoader(module);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/_loader.js","//{CODE:EUP2C}\r\n// di.einvoicing.ui.portal.portal.purchaseorders\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.config(configurePurchaseOrdersStates);\r\n\r\n        configurePurchaseOrdersStates.$inject = ['stateHelperProvider'];\r\n        function configurePurchaseOrdersStates(stateHelperProvider) {\r\n            stateHelperProvider.addStates({\r\n                templateBaseUrl: \"src/app/portal/users/_states\",\r\n                parentStateName: 'portal.users',\r\n                states: [\r\n                    {\r\n                        stateName: \"list\"\r\n                    },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t    stateName: \"editor\",\r\n\t\t\t\t\t    rights: [\"PurchaseOrderWriter\"],\r\n\t\t\t\t\t    onlyCreateStateCollection: true,\r\n\t\t\t\t\t    stateCollection:\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t    stateName: \"new\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t    stateName: \"editById\",\r\n\t\t\t\t\t\t\t    url: 'id/{id:int}',\r\n\t\t\t\t\t\t\t    params: {\r\n\t\t\t\t\t\t\t        id: 0\r\n\t\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n                ]\r\n            });\r\n        }\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/_states.js","define([\r\n    './user-bottom-buttons.component'\r\n], function (userBottomButtons) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            userBottomButtons.UserBottomButtonsComponent.selector,\r\n            userBottomButtons.UserBottomButtonsComponent);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-bottom-buttons/_loader.js","export const UserBottomButtonsComponent = {\r\n    selector: 'diUserBottomButtons',\r\n    bindings: {\r\n        mode:'<',\r\n        selectedStates: '<',\r\n        selectedActions: '<',\r\n        bottomButtonsOptions: '<',\r\n        createButtonsOptions: '<',\r\n        enable: '&',\r\n        disable: '&',\r\n        lock: '&',\r\n        unlock: '&',\r\n        save: '&',\r\n        create: '&',\r\n        validate: '&',\r\n        delete: '&'\r\n    },\r\n    controller: class {\r\n        constructor() {\r\n        }\r\n\r\n        $onInit() {\r\n        }\r\n    },\r\n    templateUrl: 'src/app/portal/users/user-bottom-buttons/user-bottom-buttons.component.html'\r\n}\r\n\r\nUserBottomButtonsComponent.controller.prototype.constructor.$inject = [];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-bottom-buttons/user-bottom-buttons.component.js","define([\r\n    './user-details-header.component'\r\n], function (userDetailsHeader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            userDetailsHeader.UserDetailsHeaderComponent.selector,\r\n            userDetailsHeader.UserDetailsHeaderComponent);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-details-header/_loader.js","export const UserDetailsHeaderComponent = {\r\n    selector: 'diUserDetailsHeader',\r\n    bindings: {\r\n        mode:'<',\r\n        user: '<',\r\n        allRoles:'<',\r\n        selectedRoleId: '=',\r\n        allWorkingFor: '<',\r\n        isSupervisor: '<',\r\n        labels: '<',\r\n        allocatedPartyName: '<',\r\n        letterRangeFilter: '<',\r\n        unallocated: '<',\r\n        selectedRestriction: '<',\r\n        allRights: '<',\r\n        onChanged: '&',\r\n        onRoleChanged: '&',\r\n        onWorkingChanged: '&',\r\n        onSearchRangeChanged: '&',\r\n        filterParties: '&',\r\n        subscribeToEvents: '&'\r\n    },\r\n    controller: class {\r\n        constructor(translator) {\r\n            this._translator = translator;\r\n        }\r\n\r\n        $onInit() {\r\n            if (this.subscribeToEvents) {\r\n                this.subscribeToEvents({ subscription: this.setRights.bind(this) });\r\n            }\r\n        }\r\n\r\n        setRights(rights) {\r\n            this.allRights = rights.allRights;\r\n            \r\n            let roleRights = rights.roleRights;\r\n            let userRights = rights.userRights;\r\n            \r\n            let selectedRoleRights = roleRights.find(x=>x.role.id === this.selectedRoleId).rights;\r\n\r\n            for (let right of this.allRights) {\r\n                right.friendlyName = this._translator.instantTranslate('EINVOICING.PORTAL.USERS.EDITOR.RIGHTS.NAME.' + right.id);\r\n                right.description = this._translator.instantTranslate('EINVOICING.PORTAL.USERS.EDITOR.RIGHTS.DESCRIPTION.' + right.id);\r\n\r\n                let rightFoundInRole = selectedRoleRights.find(x => x.id === right.id);\r\n                let rightFoundInUser = userRights.find(x => x.id === right.id);\r\n                \r\n                if (rightFoundInRole && rightFoundInUser) {\r\n                    right.selected = true;\r\n                } else if (rightFoundInUser && !rightFoundInRole) {\r\n                    right.selected = true;\r\n                } else {\r\n                    right.selected = false;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    templateUrl: 'src/app/portal/users/user-details-header/user-details-header.component.html'\r\n}\r\n\r\nUserDetailsHeaderComponent.controller.prototype.constructor.$inject = ['translator'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-details-header/user-details-header.component.js","//{CODE:EUP0A}\r\n// di.einvoicing.ui.portal.portal.users.editor\r\ndefine([\r\n    './user-details.component',\r\n    './user-details-configuration.service'\r\n\r\n], function (\r\n    userDetailsComponentLoader,\r\n    userDetailsConfigurationServiceLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n                userDetailsComponentLoader.UserDetailsComponent.selector,\r\n                userDetailsComponentLoader.UserDetailsComponent);\r\n\r\n        module.service('userDetailsConfigurationService', userDetailsConfigurationServiceLoader.UserDetailsConfigurationService);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-details/_loader.js","class UserDetailsConfigurationService {\r\n    constructor(authorizedObjectsFilter,clientEnums) {\r\n        this.authorizedObjectsFilter = authorizedObjectsFilter;\r\n        this.clientEnums = clientEnums;\r\n\r\n        this.baseConfiguration = {\r\n            type: \"User\",\r\n            buttons: [\r\n            {\r\n                rights: [\"Supervisor\"],\r\n                name: 'generatePassword',\r\n                action: this.clientEnums.userActions.generatePassword,\r\n                denyStyle: 'hidden'\r\n            },\r\n            {\r\n                rights: [\"Supervisor\"],\r\n                name: 'resetPassword',\r\n                action: this.clientEnums.userActions.resetPassword,\r\n                denyStyle: 'hidden'\r\n            },\r\n            {\r\n                rights: [\"Supervisor\"],\r\n                name: 'unlockUser',\r\n                action: this.clientEnums.userActions.unlock,\r\n                denyStyle: 'hidden'\r\n\r\n            },\r\n            {\r\n                rights: [\"Supervisor\"],\r\n                name: 'enableUser',\r\n                action: this.clientEnums.userActions.enable,\r\n                denyStyle: 'hidden'\r\n            },\r\n            {\r\n                rights: [\"Supervisor\"],\r\n                name: 'disableUser',\r\n                action: this.clientEnums.userActions.disable,\r\n                denyStyle: 'hidden'\r\n            },\r\n            {\r\n                rights: [\"Supervisor\"],\r\n                name: 'saveUser',\r\n                action: this.clientEnums.userActions.save\r\n            },\r\n            {\r\n                rights: [\"Supervisor\"],\r\n                name: 'deleteUser',\r\n                action: this.clientEnums.userActions.deleteUser,\r\n                denyStyle: 'hidden'\r\n            },\r\n            ],\r\n            createButtons: [{\r\n                rights: [\"Supervisor\"],\r\n                name: 'createUser',\r\n                action: this.clientEnums.userActions.createUser\r\n            }],\r\n            roles: [\r\n                {\r\n                    rights: [\"Administrator\"],\r\n                    name: \"administrator\",\r\n                    id: 1\r\n                },\r\n                {\r\n                    rights: [\"Administrator\", \"Buyer\"],\r\n                    name: \"buyerSupervisor\",\r\n                    id: 2\r\n                },\r\n                {\r\n                    rights: [\"Administrator\", \"Buyer\"],\r\n                    name: \"buyerClerk\",\r\n                    id: 3\r\n                },\r\n                {\r\n                    rights: [\"Administrator\", \"Supplier\"],\r\n                    name: \"supplierSupervisor\",\r\n                    id: 4\r\n                },\r\n                {\r\n                    rights: [\"Administrator\", \"Supplier\"],\r\n                    name: \"supplierClerk\",\r\n                    id: 5\r\n                },\r\n                {\r\n                    rights: [\"Administrator\"],\r\n                    name: \"buyerAuditor\",\r\n                    id: 6\r\n                },\r\n                {\r\n                    rights: [\"Administrator\", \"Supplier\"],\r\n                    name: \"erpClerk\",\r\n                    id: 7\r\n                }\r\n            ]\r\n        };\r\n    }\r\n\r\n    getCreateButtonsConfiguration() {\r\n        this.authorizedObjectsFilter.requireRights(true);\r\n\r\n        const configuration = {\r\n            type: \"User\",\r\n            visibleButtons: []\r\n        };\r\n        configuration.visibleButtons.fill(this.authorizedObjectsFilter.getAuthorizedObjects(this.baseConfiguration.createButtons, true));\r\n        return configuration;\r\n    }\r\n\r\n    getMainButtonsConfiguration() {\r\n        this.authorizedObjectsFilter.requireRights(true);\r\n\r\n        const configuration = {\r\n            type: \"User\",\r\n            visibleButtons: []\r\n        };\r\n\r\n        configuration.visibleButtons.fill(this.authorizedObjectsFilter.getAuthorizedObjects(this.baseConfiguration.buttons, true));\r\n        return configuration;\r\n    }\r\n\r\n    getRolesConfiguration() {\r\n        this.authorizedObjectsFilter.requireRights(true);\r\n\r\n        const configuration = {\r\n            type: \"Role\",\r\n            visibleRoles: []\r\n        };\r\n        configuration.visibleRoles.fill(this.authorizedObjectsFilter.getAuthorizedObjects(this.baseConfiguration.roles, false));\r\n        return configuration;\r\n    }\r\n}\r\n\r\nUserDetailsConfigurationService.prototype.constructor.$inject = ['authorizedObjectsFilter','CLIENT_ENUMS'];\r\n\r\nexport { UserDetailsConfigurationService }\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-details/user-details-configuration.service.js","let util = $di.utility.util;\r\n\r\nexport const UserDetailsComponent = {\r\n    templateUrl: 'src/app/portal/users/user-details/user-details.component.html',\r\n    selector: 'diUserDetails',\r\n    bindings: {\r\n\r\n    },\r\n    controllerAs: 'userDetailsCtrl',\r\n    controller:\r\n    class UserDetailsController {\r\n\r\n        constructor(stateParams,\r\n            userProxy,\r\n            partyProxy,\r\n            diState,\r\n            notificationHandler,\r\n            translator,\r\n            enumTranslator,\r\n            userDetailsConfigurationService,\r\n            authorizedObjectsFilter,\r\n            authenticationData,\r\n            clientEnums,\r\n            associativeArrayConvertor,\r\n            userRightsRepository,\r\n            userSecurityProxy,\r\n            userActionsResolver,\r\n            modalWindow,\r\n            modalSpinner,\r\n            clipboard,\r\n            validationRulesSetter) {\r\n            this.stateParams = stateParams;\r\n            this.userProxy = userProxy;\r\n            this.partyProxy = partyProxy;\r\n            this.diState = diState;\r\n            this.notificationHandler = notificationHandler;\r\n            this.translator = translator;\r\n            this.enumTranslator = enumTranslator;\r\n            this.userDetailsConfigurationService = userDetailsConfigurationService;\r\n            this.authorizedObjectsFilter = authorizedObjectsFilter;\r\n            this.authenticationData = authenticationData;\r\n            this.clientEnums = clientEnums;\r\n            this.associativeArrayConvertor = associativeArrayConvertor;\r\n            this.userRightsRepository = userRightsRepository;\r\n            this.userSecurityProxy = userSecurityProxy;\r\n            this.userActionsResolver = userActionsResolver;\r\n            this.modalWindow = modalWindow;\r\n            this.modalSpinner = modalSpinner;\r\n            this.clipboard = clipboard;\r\n            this.validationRulesSetter = validationRulesSetter;\r\n        }\r\n\r\n        $onInit() {\r\n            this.isDirty = false;\r\n            this.isReadOnly = false;\r\n            this.isSupervisor = true;\r\n            this.mode = 'edit';\r\n            this.allocatedPartyName = { name: '' };\r\n            this.unallocated = { value: false };\r\n            this.user = {};\r\n            this.selectedRoleId = 0;\r\n            this.allRoles = [];\r\n            this.allRights = [];\r\n            this.userRights = [];\r\n            this.roleRights = [];\r\n            this.allWorkingFor = [];\r\n            this.workingIdsArray = [];\r\n            this.allAllocatedTo = [];\r\n            this.labels = {};\r\n            this.selectedStates = [];\r\n            this.selectedAttributes = [];\r\n            this.selectedActions = [];\r\n            this.mainButtonsOptions = {};\r\n            this.createButtonsOptions = {};\r\n            this.letterRangeFilter = {\r\n                fromLetter: 'A',\r\n                toLetter: 'Z'\r\n            }\r\n            \r\n            this.selectedRestriction = { name: 'restricted' };\r\n            this.eventsSubscriptions = [];\r\n\r\n            this.loadUserData = this.loadUserData.bind(this);\r\n            this.loadUserResolved = this.loadUserResolved.bind(this);\r\n            this.filterByNameAndAllocation = this.filterByNameAndAllocation.bind(this);\r\n\r\n            if (util.isNumber(this.stateParams.id)) {\r\n                this.mode = 'edit';\r\n            } else {\r\n                this.mode = 'new';\r\n            }\r\n\r\n            this.setLabels();\r\n\r\n            this.setOptions();\r\n\r\n            this.initialiseRoles();\r\n\r\n            this.loadUserData();\r\n        }\r\n\r\n        setLabels() {\r\n            this.authorizedObjectsFilter.requireRights(false);\r\n            const data = [\r\n                {\r\n                    key: \"titleEdit\",\r\n                    label: \"EINVOICING.PORTAL.USERS.EDITOR.EDIT.HEADER.TITLE\"\r\n                },\r\n                {\r\n                    key: \"titleNew\",\r\n                    label: \"EINVOICING.PORTAL.USERS.EDITOR.NEW.HEADER.TITLE\"\r\n                },\r\n                {\r\n                    rights: [\"Supplier\"],\r\n                    key: \"allocatedTitle\",\r\n                    label: \"EINVOICING.PORTAL.USERS.EDITOR.COMPONENTS.DETAILS.HEADING_ALLOCATED_TO_SUPPLIER\"\r\n                },\r\n                {\r\n                    rights: [\"Buyer\"],\r\n                    key: \"allocatedTitle\",\r\n                    label: \"EINVOICING.PORTAL.USERS.EDITOR.COMPONENTS.DETAILS.HEADING_ALLOCATED_TO_BUYER\"\r\n                },\r\n                {\r\n                    rights: [\"Supplier\"],\r\n                    key: \"allocatedDesc\",\r\n                    label: \"EINVOICING.PORTAL.USERS.EDITOR.DESCRIPTIONS.ALLOCATED_TO_SUPPLIER\"\r\n                },\r\n                {\r\n                    rights: [\"Buyer\"],\r\n                    key: \"allocatedDesc\",\r\n                    label: \"EINVOICING.PORTAL.USERS.EDITOR.DESCRIPTIONS.ALLOCATED_TO_BUYER\"\r\n                },\r\n                {\r\n                    rights: [\"Supplier\"],\r\n                    key: \"unallocatedTitle\",\r\n                    label: \"EINVOICING.PORTAL.USERS.EDITOR.COMPONENTS.DETAILS.HEADING_UNALLOCATED_SUPPLIER\"\r\n                },\r\n                {\r\n                    rights: [\"Buyer\"],\r\n                    key: \"unallocatedTitle\",\r\n                    label: \"EINVOICING.PORTAL.USERS.EDITOR.COMPONENTS.DETAILS.HEADING_UNALLOCATED_BUYER\"\r\n                },\r\n                {\r\n                    rights: [\"Supplier\"],\r\n                    key: \"unallocatedDesc\",\r\n                    label: \"EINVOICING.PORTAL.USERS.EDITOR.DESCRIPTIONS.UNALLOCATED_SUPPLIER\"\r\n                },\r\n                {\r\n                    rights: [\"Buyer\"],\r\n                    key: \"unallocatedDesc\",\r\n                    label: \"EINVOICING.PORTAL.USERS.EDITOR.DESCRIPTIONS.UNALLOCATED_BUYER\"\r\n                }\r\n            ];\r\n            this.labels = this.authorizedObjectsFilter.getAuthorizedObjectsAsAssociative(data, 'key', 'label');\r\n\r\n            if (this.mode === 'edit') {\r\n                this.labels.title = this.labels.titleEdit;\r\n            } else {\r\n                this.labels.title = this.labels.titleNew;\r\n            }\r\n        }\r\n\r\n        setOptions() {\r\n            this.mainButtonsOptions = this.userDetailsConfigurationService.getMainButtonsConfiguration();\r\n            this.createButtonsOptions = this.userDetailsConfigurationService.getCreateButtonsConfiguration();\r\n            this.bottomButtonsOptions = this.userDetailsConfigurationService.getMainButtonsConfiguration();\r\n\r\n            this.validationRulesSetter.setValidationRules(\"User\");\r\n\r\n        }\r\n\r\n        initialiseRoles() {\r\n            let roles = this.userDetailsConfigurationService.getRolesConfiguration();\r\n\r\n            this.allRoles.fill(roles.visibleRoles);\r\n\r\n            this.translator.whenReady().then(() => {\r\n                _.each(this.allRoles,\r\n                    (role) => {\r\n                        role.enabled = false;\r\n                        role.description = this.getRoleDescription(role.id);\r\n                        role.name = this.getRoleName(role.id);\r\n                    });\r\n            });\r\n\r\n\r\n        }\r\n\r\n        getRoleDescription(roleId) {\r\n            let roleName = this.getCurrentUserRoleName();\r\n\r\n            if (util.isNonEmptyString(roleName)) {\r\n                roleName = `_${roleName}`;\r\n            }\r\n\r\n            return this.translator.\r\n                instantTranslate(`EINVOICING.PORTAL.USERS.EDITOR.ROLES.DESCRIPTION${roleName}.${roleId}`);\r\n        }\r\n\r\n        getRoleName(roleId) {\r\n            return this.translator.instantTranslate(`EINVOICING.PORTAL.USERS.EDITOR.ROLES.NAME.${roleId}`);\r\n        }\r\n\r\n        getCurrentUserRoleName() {\r\n            const isSupplier = this.userRightsRepository.userHasRight(\"Supplier\");\r\n            const isBuyer = this.userRightsRepository.userHasRight(\"Buyer\");\r\n\r\n            let role = '';\r\n\r\n            if (isSupplier) {\r\n                role = \"SUPPLIER\";\r\n            } else if (isBuyer) {\r\n                role = \"BUYER\";\r\n            }\r\n\r\n            return role;\r\n        }\r\n\r\n        loadUserData() {\r\n            if (util.isNumber(this.stateParams.id)) {\r\n                if (this.stateParams.id > 0) {\r\n                    this.userProxy.getDetailsModelById(this.stateParams.id).then(this.loadUserResolved,\r\n                        () => {\r\n                            this.notificationHandler.\r\n                                showError(\"EINVOICING.PORTAL.USERS.EDITOR.LOAD_ERROR\", this.stateParams.id);\r\n                            this.backToList();\r\n                        });\r\n                } else {\r\n                    this.notificationHandler.showError(\"EINVOICING.PORTAL.USERS.EDITOR.LOAD_ERROR\",\r\n                        this.stateParams.id);\r\n                    this.backToList();\r\n                }\r\n            } else {\r\n                this.user = {\r\n                    actions: [this.clientEnums.userActions.createUser],\r\n                    isEnabled: true\r\n                };\r\n\r\n                this.partyProxy.getAllPartiesUserCanWorkFor(0).then((data) => {\r\n                    _.each(data,\r\n                        (item) => {\r\n                            item.isAssigned = false;\r\n                        });\r\n\r\n                    this.allWorkingFor = data;\r\n\r\n                    this.resolveActions();\r\n                });\r\n            }\r\n        }\r\n\r\n        loadUserResolved(data) {\r\n            this.user = data;\r\n            let promptDeleteUserMessage = this.translator.instantTranslate('EINVOICING.PORTAL.USERS.DELETE.CONFIRMATION_MESSAGE', this.user.name);\r\n            this.mainButtonsOptions.promptMessage = this.bottomButtonsOptions.promptMessage = { deleteUser: promptDeleteUserMessage };\r\n\r\n            this.selectedRestriction = {\r\n                name: data.editRestrictions ? data.editRestrictions.toLowerCase() : ''\r\n            };\r\n\r\n            this.getTrueFalseLabel(this.user.enabled).then((enabled) => {\r\n                this.user.enabledLabel = enabled;\r\n            });\r\n            this.getTrueFalseLabel(this.user.locked).then((locked) => {\r\n                this.user.lockedLabel = locked;\r\n            });\r\n\r\n            this.partyProxy.getAllPartiesUserCanWorkFor(this.user.id).then((data) => {\r\n                this.allWorkingFor = data;\r\n\r\n                this.setAllocated(true);\r\n            },\r\n                () => {\r\n                    this.notificationHandler.\r\n                        showError(\"EINVOICING.PORTAL.USERS.EDITOR.LOAD_ERROR\", this.stateParams.id);\r\n\r\n                    this.backToList();\r\n                });\r\n        }\r\n\r\n        /**\r\n             * Event handler for filter by fist letter changes\r\n             */\r\n        onSearchRangeChanged() {\r\n            if (util.isNonEmptyString(this.letterRangeFilter.fromLetter) && \r\n                util.isNonEmptyString(this.letterRangeFilter.toLetter)) {\r\n                this.setLetters(this.letterRangeFilter.fromLetter, this.letterRangeFilter.toLetter);\r\n            } else {\r\n                this.setLetters('A', 'Z');\r\n            }\r\n        }\r\n\r\n        setLetters(from, to) {\r\n            this.letterRangeFilter.fromLetter = from.toUpperCase();\r\n            this.letterRangeFilter.toLetter = to.toUpperCase();\r\n        }\r\n\r\n        /**\r\n         * Searching by assigned count for supervisor\r\n         */\r\n        filterParties() {\r\n            const items = this.allAllocatedTo;\r\n            if (items.length === 0) {\r\n                return items;\r\n            }\r\n\r\n            let filtered;\r\n            if (this.isSupervisor) {\r\n\r\n                filtered = _.filter(items,\r\n                    function (item) {\r\n                        return item.assignedCount === 0;\r\n                    });\r\n\r\n            } else {\r\n                filtered = items;\r\n            }\r\n\r\n            return this.filterByNameAndAllocation(filtered);\r\n        }\r\n\r\n        filterByNameAndAllocation(items) {\r\n            let filtered;\r\n            const unallocated = this.unallocated.value;\r\n            const allocatedPartyName = this.allocatedPartyName;\r\n\r\n            if (util.isNonEmptyString(allocatedPartyName.name)) {\r\n                filtered = _.filter(items,\r\n                    function (item) {\r\n                        const matched = item.name.toLowerCase().indexOf(allocatedPartyName.name.toLowerCase()) > -1;\r\n\r\n                        if (unallocated) {\r\n                            return matched && item.isAssigned === false;\r\n                        } else {\r\n                            return matched;\r\n                        }\r\n                    });\r\n            } else {\r\n                filtered = _.filter(items,\r\n                    function (item) {\r\n                        if (unallocated) {\r\n                            return item.isAssigned === false;\r\n                        } else {\r\n                            return true;\r\n                        }\r\n                    });\r\n            }\r\n\r\n            return this.filterByRange(filtered, this.letterRangeFilter.fromLetter, this.letterRangeFilter.toLetter);\r\n        }\r\n\r\n        filterByRange(items, fromLetter, toLetter) {\r\n            fromLetter = fromLetter.toLowerCase();\r\n            toLetter = toLetter.toLowerCase();\r\n            let filtered = [];\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = items[i];\r\n\r\n                var firstLetter = item.name.substring(0, 1).toLowerCase();\r\n\r\n                if ((!fromLetter || firstLetter >= fromLetter) && (!toLetter || firstLetter <= toLetter)) {\r\n                    filtered.push(item);\r\n                }\r\n            }\r\n            return filtered;\r\n        }\r\n\r\n        /**\r\n         * loads allocated parties list and resets those settings\r\n         */\r\n        setAllocated(resetActions) {\r\n            var workingIdsArray = [];\r\n            _.each(this.allWorkingFor,\r\n                (company) => {\r\n\r\n                    if (company.isAssigned) {\r\n                        workingIdsArray.push(company.partyId);\r\n                    }\r\n                });\r\n\r\n            this.partyProxy.getAllRelatedPartyCountries(this.stateParams.id, workingIdsArray).then((data) => {\r\n                var relatedIds = [];\r\n                _.each(data,\r\n                    (company) => {\r\n                        relatedIds.push(company.party.id);\r\n                    });\r\n\r\n                this.partyProxy.getAllPartiesUserCanBeAllocatedTo(this.stateParams.id, relatedIds).then((data) => {\r\n\r\n                    this.allAllocatedTo = _.uniq(data,\r\n                        function (item) {\r\n                            return item.partyId;\r\n                        });\r\n\r\n                    this.setRoles();\r\n                    this.setRights();\r\n\r\n                    if (resetActions) {\r\n                        this.setActions();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        setAllocatedResettingActions() {\r\n            this.setAllocated(true);\r\n        }\r\n\r\n        subscribeToEvents(subscription) {\r\n            this.eventsSubscriptions.push(subscription);\r\n        }\r\n\r\n        notifyEventsSubscribers(notificationObject) {\r\n            for (var i = 0; i < this.eventsSubscriptions.length; i++) {\r\n                this.eventsSubscriptions[i](notificationObject);\r\n            }\r\n        }\r\n\r\n        setRoles() {\r\n            if (this.user.roles.length > 0) {\r\n                this.selectedRoleId = this.user.roles[0].id;\r\n            }\r\n        }\r\n\r\n        setRights() {\r\n            this.userProxy.getUserRights(this.user.id).then((data) => {\r\n\r\n                var found = _.find(data, (right) => {\r\n                    return right.name === 'Supervisor';\r\n                });\r\n\r\n                this.userRights = data;\r\n                this.isSupervisor = util.isDefined(found);\r\n\r\n                if (this.isSupervisor) {\r\n                    _.each(this.allAllocatedTo, (related) => {\r\n                        related.assigned = false;\r\n                        related.allocated = false;\r\n                    });\r\n                }\r\n\r\n                this.setRoleRights(false);\r\n            });\r\n        }\r\n\r\n        setRoleRights(roleChanged) {\r\n            this.userProxy.getRoleRights().then((roleRights) => {\r\n                this.roleRights = roleRights;\r\n\r\n                if (roleChanged) {\r\n                    this.userRights = this.roleRights.find(x => x.role.id === this.selectedRoleId).rights;\r\n                }\r\n\r\n                this.userProxy.getAllRights().then((rights) => {\r\n                    this.allRights = rights;\r\n\r\n                    this.notifyEventsSubscribers({\r\n                        userRights: this.userRights,\r\n                        roleRights: this.roleRights,\r\n                        allRights: this.allRights\r\n                    });\r\n                });\r\n            });\r\n        }\r\n\r\n        setActions() {\r\n            this.removeAction(this.clientEnums.userActions.save);\r\n            this.resolveActions();\r\n        }\r\n\r\n        /**\r\n         * Handler for form changed event\r\n         */\r\n        onChanged() {\r\n            this.isDirty = true;\r\n            this.addAction(this.clientEnums.userActions.save);\r\n        }\r\n\r\n        onRoleChanged() {\r\n            this.onChanged();\r\n            this.userRights = [];\r\n            this.setRoleRights(true);\r\n        }\r\n\r\n        /**\r\n         * Handler for workning company selection change event\r\n         */\r\n        onWorkingChanged() {\r\n            if (this.mode === 'edit') {\r\n                this.setAllocated();\r\n            }\r\n\r\n            this.onChanged();\r\n        }\r\n\r\n        /**\r\n         * Enables user account\r\n         */\r\n        enable() {\r\n            this.user.enabled = true;\r\n\r\n            this.getTrueFalseLabel(true).then((translated) => {\r\n                this.user.enabledLabel = translated;\r\n            });\r\n\r\n            this.removeAction(this.clientEnums.userActions.enable);\r\n            this.addAction(this.clientEnums.userActions.disable);\r\n\r\n            this.onChanged();\r\n        }\r\n\r\n        /**\r\n         * Disables user account\r\n\r\n         */\r\n        disable() {\r\n            this.user.enabled = false;\r\n            this.getTrueFalseLabel(false).then((translated) => {\r\n                this.user.enabledLabel = translated;\r\n            });\r\n\r\n            this.removeAction(this.clientEnums.userActions.disable);\r\n            this.addAction(this.clientEnums.userActions.enable);\r\n\r\n            this.onChanged();\r\n        }\r\n\r\n        /**\r\n         * Unlocks user account\r\n         */\r\n        unlock() {\r\n            this.user.locked = false;\r\n\r\n            this.getTrueFalseLabel(false).then((translated) => {\r\n                this.user.lockedLabel = translated;\r\n\r\n                this.removeAction(this.clientEnums.userActions.unlock);\r\n                this.addAction(this.clientEnums.userActions.lock);\r\n\r\n                this.onChanged();\r\n            });\r\n        }\r\n\r\n        /**\r\n        * Validates user before saving\r\n        */\r\n        validate() {\r\n            if (this.selectedRoleId === 0) {\r\n                this.notificationHandler.showWarning('EINVOICING.PORTAL.USERS.EDITOR.SAVED_NO_ROLE_SELECTED');\r\n                return false;\r\n            }\r\n\r\n            const workingForSelected = _.find(this.allWorkingFor,\r\n                (model) => {\r\n                    return model.isAssigned === true;\r\n                });\r\n\r\n            if (!util.isDefined(workingForSelected)) {\r\n                this.notificationHandler.showWarning('EINVOICING.PORTAL.USERS.EDITOR.SAVED_NO_WORKING_PARTIES');\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        /**\r\n         * Creates new user              \r\n         */\r\n        create() {\r\n            let selectedRoles = _.filter(this.allRoles,\r\n                (role) => {\r\n                    return role.id === this.selectedRoleId;\r\n                });\r\n\r\n            var selectedWorkingFor = [];\r\n\r\n            _.each(this.allWorkingFor,\r\n                (model) => {\r\n                    if (model.isAssigned === true) {\r\n                        selectedWorkingFor.push(model.party);\r\n                    }\r\n                });\r\n\r\n            this.user.roles = selectedRoles;\r\n            this.user.workingParties = selectedWorkingFor;\r\n            this.user.allocatedParties = [];\r\n            this.user.enabled = true;\r\n\r\n            if (this.creatingUser !== true) {\r\n                this.showSpinner();\r\n                this.creatingUser = true;\r\n                this.userProxy.createUser(this.user).then((data) => {\r\n                    if (data.success) {\r\n                        this.showPassword(data.generatedPassword, true);\r\n                        this.diState.go('portal.users.editById', { id: data.userId });\r\n                    } else {\r\n                        this.notificationHandler.showError(\"EINVOICING.PORTAL.USERS.EDITOR.ERRORS.\" + data.failureReason.toUpperCase());\r\n                    }\r\n                },\r\n                    () => {\r\n                        this.notificationHandler.showError(\"EINVOICING.PORTAL.USERS.EDITOR.CREATE_ERROR\");\r\n                    }).finally(() => {\r\n                        this.creatingUser = false;\r\n                        this.removeSpinner();\r\n                    });\r\n            }\r\n        }\r\n\r\n        generatePassword() {\r\n            if (this.generatingPassword !== true) {\r\n                this.showSpinner();\r\n                this.generatingPassword = true;\r\n                this.userProxy.generatePassword(this.user.id).then((data) => {\r\n                    this.showPassword(data.generatedPassword, false);\r\n                },\r\n                    () => {\r\n                        this.notificationHandler.showError(\"EINVOICING.PORTAL.USERS.EDITOR.GENERATE_ERROR\");\r\n                    }).finally(() => {\r\n                        this.generatingPassword = false;\r\n                        this.removeSpinner();\r\n                    });\r\n            }\r\n        }\r\n\r\n        showPassword(password, created) {\r\n            let options = {\r\n                dataModel: {\r\n                    generatedPassword: password,\r\n                    copyToClipboard: () => {\r\n                        this.clipboard.copyText(password);\r\n                    }\r\n                },\r\n                controller: \"ResourceController\",\r\n                templateUrl: 'src/app/portal/users/user-details/generated-password.html',\r\n                preventClose: true,\r\n                title: \"New password\",\r\n                promptOnCancel: true\r\n            };\r\n\r\n            if (created) {\r\n                options.dataModel.title = \"EINVOICING.PORTAL.USERS.EDITOR.USER_CREATED_TITLE\";\r\n                options.dataModel.createdUser = true;\r\n                options.dataModel.message = this.translator.\r\n                    instantTranslate(\"EINVOICING.PORTAL.USERS.EDITOR.USER_CREATED_MESSAGE\", password);\r\n            } else {\r\n                options.dataModel.title = \"EINVOICING.PORTAL.USERS.EDITOR.PASSWORD_GENERATED_TITLE\";\r\n                options.dataModel.message = this.translator.\r\n                    instantTranslate(\"EINVOICING.PORTAL.USERS.EDITOR.PASSWORD_GENERATED\", password);\r\n            }\r\n\r\n            this.modalWindow.show(options);\r\n        }\r\n\r\n        /**\r\n         * Saves form changes\r\n         */\r\n        save() {\r\n            if (!this.validate()) {\r\n                return;\r\n            }\r\n\r\n            var selectedRoles = _.filter(this.allRoles,\r\n                (role) => {\r\n                    return role.id === this.selectedRoleId;\r\n                });\r\n\r\n            var selectedWorkingFor = [];\r\n\r\n            _.each(this.allWorkingFor,\r\n                (model) => {\r\n                    if (model.isAssigned === true) {\r\n                        selectedWorkingFor.push(model.party);\r\n                    }\r\n                });\r\n\r\n            var selectedAllocatedFor = [];\r\n\r\n            _.each(this.allAllocatedTo,\r\n                (model) => {\r\n                    if (model.isAssigned === true && !this.isSupervisor) {\r\n                        selectedAllocatedFor.push(model.party);\r\n                    }\r\n                });\r\n\r\n            this.user.roles = selectedRoles;\r\n            this.user.workingParties = selectedWorkingFor;\r\n            this.user.allocatedParties = selectedAllocatedFor;\r\n            this.user.editRestrictions = this.selectedRestriction.name.toLowerCase();\r\n            this.user.rights = this.allRights;\r\n\r\n            this.userProxy.saveUser(this.user).then((data) => {\r\n                this.notificationHandler.showSuccess('EINVOICING.PORTAL.USERS.EDITOR.SAVED_SUCCESS');\r\n                this.user.id = data;\r\n                this.isDirty = false;\r\n                this.loadUserData();\r\n                this.removeAction(this.clientEnums.userActions.save);\r\n            },\r\n                (error) => {\r\n                    this.isDirty = true;\r\n                    this.notificationHandler.showError(error.failureReason);\r\n                });\r\n        }\r\n\r\n\r\n        /**\r\n         * calls dependency to send reset password email to edited user\r\n         */\r\n        resetPassword() {\r\n            this.userSecurityProxy.requestPasswordResetOnUserBehalf(this.user.id, this.user.name).then((data) => {\r\n                if (data.success) {\r\n                    this.notificationHandler.\r\n                        showSuccess('EINVOICING.PORTAL.USERS.EDITOR.RESET_SUCCESS', this.user.name);\r\n                } else {\r\n\r\n                    const message = `CORE.USER_SECURITY.ERRORS.${data.failureReason.toUpperCase()}`;\r\n\r\n                    this.notificationHandler.showError(message);\r\n                }\r\n            },\r\n                (error) => {\r\n                    this.notificationHandler.showError(error.failureReason);\r\n                });\r\n        }\r\n\r\n        /**\r\n         * Confirms the user wishes to cancel their changes and then cancels the changes if required\r\n         */\r\n        cancelChanges() {\r\n            this.loadUserData();\r\n            this.isDirty = false;\r\n        }\r\n\r\n        delete() {\r\n            this.userProxy.remove(this.user.id)\r\n                .then(result => {\r\n                    this.notificationHandler.showSuccess('EINVOICING.PORTAL.USERS.DELETE.SUCCESS', this.user.name);\r\n                    this.backToList();\r\n                },\r\n                error => {\r\n                    this.notificationHandler.showError(error.failureReason);\r\n                });\r\n        }\r\n        /**\r\n         * navigates back to user list\r\n         */\r\n        backToList() {\r\n            this.diState.go('portal.users.list');\r\n        }\r\n\r\n        /**\r\n         * Returns translated label for true or false state\r\n         */\r\n        getTrueFalseLabel(value) {\r\n            if (util.isDefined(value) && value === true) {\r\n                return this.translator.translate(\"EINVOICING.PORTAL.BODY.TRUE\");\r\n            } else {\r\n                return this.translator.translate(\"EINVOICING.PORTAL.BODY.FALSE\");\r\n            }\r\n        }\r\n\r\n        /**\r\n         * adds action to allowed actions        \r\n         */\r\n        addAction(actionId) {\r\n            var found = _.find(this.user.actions,\r\n                function (id) {\r\n                    return id === actionId;\r\n                });\r\n\r\n            if (util.isUndefined(found)) {\r\n                this.user.actions.push(actionId);\r\n                this.resolveActions();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * removes action from allowed actions\r\n         */\r\n        removeAction(actionId) {\r\n            const flitered = _.filter(this.user.actions,\r\n                function (id) {\r\n                    return id !== actionId;\r\n                });\r\n\r\n            this.user.actions.fill(flitered);\r\n\r\n            this.resolveActions();\r\n        }\r\n\r\n        /**\r\n        *  resolves allowed actions\r\n        */\r\n        resolveActions() {\r\n            const resolvedActions = this.userActionsResolver.resolveActions(this.user.actions, false);\r\n            this.selectedActions.fill(resolvedActions);\r\n        }\r\n\r\n        /**\r\n         * Adds spinner to the page\r\n         */\r\n        showSpinner() {\r\n            this.spinner = this.modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n        }\r\n\r\n        /**\r\n         * Removes spinner from the page\r\n        */\r\n        removeSpinner() {\r\n            if (this.spinner) {\r\n                this.spinner.remove();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nUserDetailsComponent.controller.prototype.constructor.$inject = [\r\n    '$stateParams',\r\n    'userProxy',\r\n    'partyProxy',\r\n    'diState',\r\n    'notificationHandler',\r\n    'translator',\r\n    'enumTranslator',\r\n    'userDetailsConfigurationService',\r\n    'authorizedObjectsFilter',\r\n    'authenticationData',\r\n    'CLIENT_ENUMS',\r\n    'associativeArrayConvertor',\r\n    'userRightsRepository',\r\n    'userSecurityProxy',\r\n    'userActionsResolver',\r\n    'modalWindow',\r\n    'modalSpinner',\r\n    'clipboard',\r\n    'validationRulesSetter'\r\n];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-details/user-details.component.js","define([\r\n    './user-edit-restrictions.component'\r\n], function (userEditRestrictions) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            userEditRestrictions.UserEditRestrictionsComponent.selector,\r\n            userEditRestrictions.UserEditRestrictionsComponent);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-edit-restrictions/_loader.js","export const UserEditRestrictionsComponent = {\r\n    selector: 'diUserEditRestrictions',\r\n    bindings: {\r\n        selectedRestriction: '<',\r\n        onChanged: '&',\r\n        isSupervisor: '<'\r\n    },\r\n    controller: class {\r\n        constructor() {\r\n            this.restrictions = new Map();\r\n            this.restrictions.set(\"none\", \"none\");\r\n            this.restrictions.set(\"restricted\", \"restricted\");\r\n            this.restrictions.set(\"all\", \"all\");\r\n        }\r\n\r\n        $onInit() {\r\n        }\r\n    },\r\n    templateUrl: 'src/app/portal/users/user-edit-restrictions/user-edit-restrictions.component.html'\r\n}\r\n\r\nUserEditRestrictionsComponent.controller.prototype.constructor.$inject = [];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-edit-restrictions/user-edit-restrictions.component.js","//{CODE:EUP5D}\r\n//di.einvoicing.ui.portal.portal.users\r\ndefine([\r\n\t'./user-list.component',\r\n\t './user-list-configuration.service'\r\n], function (\r\n\tuserListComponentModule,\r\n\tuserListConfigurationServiceLoader\r\n\t) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n\t\t\tuserListComponentModule.UserListComponent.selector,\r\n\t\t\tuserListComponentModule.UserListComponent);\r\n        module.service('userListConfigurationService', userListConfigurationServiceLoader.UserListConfigurationService);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-list/_loader.js","const _columns = Symbol('columns');\r\nconst _tableOptions = Symbol('tableOptions');\r\nconst _actionColumns = Symbol('actionColumns');\r\n\r\nclass UserListConfigurationService {\r\n\tconstructor() {\r\n\r\n\t\tthis[_columns] = [\r\n\t\t\t{\r\n\t\t\t\tfield: 'name',\r\n\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.USERS.LISTS.COLUMN_HEADERS.NAME',\r\n\t\t\t\ttemplate: '<span>{{ binding.name }}</span>'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tfield: 'friendlyName',\r\n\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.USERS.LISTS.COLUMN_HEADERS.FRIENDLY_NAME',\r\n\t\t\t\ttemplate: '<span>{{ binding.friendlyName }}</span>'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tfield: 'dateCreated',\r\n\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.USERS.LISTS.COLUMN_HEADERS.DATE_CREATED',\r\n\t\t\t\ttemplate: '<span>{{ binding.dateCreated | diDate }}</span>',\r\n\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tfield: 'dateLastLogin',\r\n\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.USERS.LISTS.COLUMN_HEADERS.DATE_LAST_LOGIN',\r\n\t\t\t\ttemplate: '<span>{{ binding.dateLastLogin | diDate }}</span>',\r\n\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tfield: 'enabled',\r\n\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.USERS.LISTS.COLUMN_HEADERS.ENABLED',\r\n\t\t\t\ttemplate: '<span>{{ binding.enabled | diYesNo }}</span>',\r\n\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tfield: 'locked',\r\n\t\t\t\tnameLanguageKey: 'EINVOICING.PORTAL.USERS.LISTS.COLUMN_HEADERS.LOCKED',\r\n\t\t\t\ttemplate: '<span>{{ binding.locked | diYesNo }}</span>',\r\n\t\t\t\tcellClass: 'centeredcell'\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tthis[_tableOptions] = {\r\n\t\t\tdata: [],\r\n\t\t\tenableSelect: true,\r\n\t\t\tmultiSelect: false,\r\n\t\t\tenablePaging: true,\r\n\t\t\tfixedHeight: true,\r\n\t\t\tmaxItemsToShow: 500,\r\n\t\t\tpaginationPageSizes: [5, 10, 15, 20, 25, 50],\r\n\t\t\tpaginationPageSize: 10,\r\n\t\t\tpaginationPageNumber: 1,\r\n\t\t\tmaxButtonsShown: 3,\r\n\t\t\tpagination: {\r\n\t\t\t\tseek: function () { }\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis[_actionColumns] = [{\r\n\t\t\tfield: 'editButton',\r\n\t\t\ttemplate: '<di-button image=\"edit\" image-colour=\"button\" action=\"controller.editUser(binding)\"></di-button>',\r\n\t\t\tcellClass: 'cell-right'\r\n\t\t},\r\n\t\t{\r\n\t\t\tfield: 'deleteButton',\r\n\t\t\ttemplate: '<di-button image=\"delete\" image-colour=\"button\" action=\"controller.deleteUser(binding)\" di-enabled=\"controller.canDeleteUser(binding)\"></di-button>',\r\n\t\t\tcellClass: 'centeredCell'\r\n\t\t}\r\n\t\t];\r\n\t}\r\n\r\n\tgetTableOptions() {\r\n\t\tthis[_tableOptions].columns = this[_columns];\r\n\t\tthis[_tableOptions].actionColumns = this[_actionColumns];\r\n\t\treturn Promise.resolve(this[_tableOptions]);\r\n\t}\r\n}\r\n\r\nUserListConfigurationService.prototype.constructor.$inject = [];\r\n\r\nexport { UserListConfigurationService }\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-list/user-list-configuration.service.js","let util = $di.utility.util;\r\n\r\nexport const UserListComponent = {\r\n\ttemplateUrl: 'src/app/portal/users/user-list/user-list.component.html',\r\n\tselector: 'diUserList',\r\n\tcontrollerAs: 'userListCtrl',\r\n\tcontroller:\r\n\tclass UserListController {\r\n\t\tconstructor(diState, notificationHandler, userProxy, modalSpinner, userListConfigurationService, clientEnums, promptWindow) {\r\n\t\t\tthis.diState = diState;\r\n\t\t\tthis.notificationHandler = notificationHandler;\r\n\t\t\tthis.userProxy = userProxy; //TODO:- remove this and pass in the data instead\r\n\t\t\tthis.modalSpinner = modalSpinner;\r\n\t\t\tthis.userListConfigurationService = userListConfigurationService;\r\n\t\t\tthis.clientEnums = clientEnums;\r\n\t\t\tthis.promptWindow = promptWindow;\r\n\r\n\t\t\tthis.editUser = this.editUser.bind(this);\r\n\t\t\tthis.deleteUser = this.deleteUser.bind(this);\r\n\t\t\tthis.canDeleteUser = this.canDeleteUser.bind(this);\r\n\t\t\tthis.removeSpinner = this.removeSpinner.bind(this);\r\n\t\t\tthis.showSpinner = this.showSpinner.bind(this);\r\n\t\t}\r\n\r\n\t\t$onInit() {\r\n\t\t\tthis.spinner = {};\r\n\t\t\tthis.users = [];\r\n\t\t\tthis.tableOptions = {};\r\n\r\n\t\t\tthis.userListConfigurationService.getTableOptions().then((tableOptions) => {\r\n\t\t\t\tthis.tableOptions = tableOptions;\r\n\t\t\t\tthis.getUsers();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tgetUsers() {\r\n\t\t\tthis.showSpinner();\r\n\r\n\t\t\tlet maxItemsToShow = this.tableOptions.maxItemsToShow;\r\n\t\t\tthis.userProxy\r\n\t\t\t\t.getUsers('', maxItemsToShow)\r\n\t\t\t\t.then((data) => {\r\n\t\t\t\t\t//resolved\r\n\t\t\t\t\tif (util.isUndefined(data)) {\r\n\t\t\t\t\t\tdata = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.tableOptions.data.fill(data);\r\n\t\t\t\t\tthis.users.fill(data);\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\t//rejected\r\n\t\t\t\t\tthis.notificationHandler.showError('EINVOICING.PORTAL.USERS.LISTS.ERROR_GETTING_USERS');\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tthis.removeSpinner();\r\n\t\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\teditUser(user) {\r\n\t\t\tif (util.isUndefined(user)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar selectedId = user.id;\r\n\r\n\t\t\tthis.diState.go('portal.users.editById', { id: selectedId });\r\n\t\t}\r\n\r\n\t\tdeleteUser(user) {\r\n\t\t\tif (util.isNullOrUndefined(user)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.promptWindow.confirm(\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'EINVOICING.PORTAL.USERS.DELETE.CONFIRMATION_MESSAGE_TITLE',\r\n\t\t\t\t\tmessage: { stringToTranslate: 'EINVOICING.PORTAL.USERS.DELETE.CONFIRMATION_MESSAGE', translationArguments: user.name },\r\n\t\t\t\t\tokBtnText: 'CORE.PROMPT.YES',\r\n\t\t\t\t\tcancelBtnText: 'CORE.PROMPT.NO',\r\n\t\t\t\t\tcallback: (result) => {\r\n\t\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\t\tthis.userProxy.remove(user.id)\r\n\t\t\t\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\t\t\t\tthis.notificationHandler.showSuccess('EINVOICING.PORTAL.USERS.DELETE.SUCCESS', user.name);\r\n\t\t\t\t\t\t\t\t\tthis.getUsers();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t\t\t\tthis.notificationHandler.showError(error.failureReason);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tcanDeleteUser(user) {\r\n\t\t\tif (util.isNullOrUndefined(user)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn _.contains(user.actions, this.clientEnums.userActions.deleteUser);\r\n\t\t}\r\n\r\n\t\tshowSpinner() {\r\n\t\t\tthis.spinner = this.modalSpinner.showModalSpinner(\"#spinnerHolder\");\r\n\t\t}\r\n\r\n\t\tremoveSpinner() {\r\n\t\t\tif (this.spinner) {\r\n\t\t\t\tthis.spinner.remove();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nUserListComponent.controller.prototype.constructor.$inject = ['diState', 'notificationHandler', 'userProxy', 'modalSpinner', 'userListConfigurationService', 'CLIENT_ENUMS', 'promptWindow'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-list/user-list.component.js","define([\r\n    './user-main-buttons.component'\r\n], function (userMainButtons) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            userMainButtons.UserMainButtonsComponent.selector,\r\n            userMainButtons.UserMainButtonsComponent);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-main-buttons/_loader.js","export const UserMainButtonsComponent = {\r\n    selector: 'diUserMainButtons',\r\n    bindings: {\r\n        mode:'<',\r\n        selectedActions: '<',\r\n        mainButtonsOptions: '<',\r\n        createButtonsOptions: '<',\r\n        enable: '&',\r\n        disable: '&',\r\n        lock: '&',\r\n        unlock: '&',\r\n        save: '&',\r\n        create: '&',\r\n        resetPassword: '&',\r\n        generatePassword: '&',\r\n        validate: '&',\r\n        delete: '&'\r\n    },\r\n    controller: class {\r\n        constructor() {\r\n        }\r\n\r\n        $onInit() {\r\n        }\r\n    },\r\n    templateUrl: 'src/app/portal/users/user-main-buttons/user-main-buttons.component.html'\r\n}\r\n\r\nUserMainButtonsComponent.controller.prototype.constructor.$inject = [];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/user-main-buttons/user-main-buttons.component.js","define([\r\n    './users-action-buttons.component'\r\n], function (userActionButtons) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            userActionButtons.UsersActionButtonsComponent.selector,\r\n            userActionButtons.UsersActionButtonsComponent);\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/users-action-buttons/_loader.js","export const UsersActionButtonsComponent = {\r\n    selector: 'diUsersActionButtons',\r\n    bindings: {\r\n        selectedActions: '<',\r\n        selectedStates: '<',\r\n        selectedItemsCount: '<',\r\n        buttonsSetOneOptions: '<',\r\n        buttonsSetTwoOptions: '<',\r\n        editUser: '&',\r\n        getUsers: '&'\r\n    },\r\n    controller: class {\r\n        constructor() {\r\n        }\r\n\r\n        $onInit() {\r\n        }\r\n    },\r\n    templateUrl: 'src/app/portal/users/users-action-buttons/users-action-buttons.component.html'\r\n}\r\n\r\nUsersActionButtonsComponent.controller.prototype.constructor.$inject = [];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/users/users-action-buttons/users-action-buttons.component.js","// di.einvoicing.ui.portal.portal.utilities\r\ndefine([\r\n\t'./_states',\r\n\t'./integrator/_loader'\r\n], function (\r\n\tstatesLoader,\r\n\tintegratorLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tstatesLoader(module);\r\n\t\tintegratorLoader(module);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/utilities/_loader.js","// di.einvoicing.ui.portal.portal.utilities\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.config(configureAttachmentStates);\r\n\r\n        configureAttachmentStates.$inject = ['stateHelperProvider'];\r\n\r\n        function configureAttachmentStates(stateHelperProvider) {\r\n            stateHelperProvider.addStates({\r\n                templateBaseUrl: \"src/app/portal/utilities/_states\",\r\n                parentStateName: 'portal.utilities',\r\n                states: [\r\n                    {\r\n                        stateName: 'integrator'\r\n                    }\r\n                ]\r\n            });\r\n        }\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/utilities/_states.js","// di.einvoicing.ui.portal.portal.utilities.integrator\r\ndefine([\r\n    './integrator-details-proxy.service',\r\n\t'./integrator-details.component'\r\n], function (\r\n\tintegratorDetailsProxyServiceModule,\r\n\tintegratorDetailsComponentModule) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    module.service('integratorDetailsProxy', integratorDetailsProxyServiceModule.IntegratorDetailsProxyService);\r\n\r\n\t    module.component(\r\n            integratorDetailsComponentModule.integratorDetailsComponent.selector,\r\n            integratorDetailsComponentModule.integratorDetailsComponent);\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/utilities/integrator/_loader.js","//{CODE:EUP9F}\r\n//di.einvoicing.ui.portal.portal.utilities.integrator\r\n\r\nclass IntegratorDetailsProxyService {\r\n    constructor(dHttp, config) {\r\n        this._dHttp = dHttp;\r\n        this._config = config.utilities.integrator;\r\n    }\r\n    \r\n    getClickonceConfig() {\r\n        return this._dHttp.get(this._config.configFilePath, this._config.endpointName);\r\n    }\r\n}\r\n\r\nIntegratorDetailsProxyService.prototype.constructor.$inject = ['dHttp', 'PORTAL_CONFIG'];\r\n\r\nexport { IntegratorDetailsProxyService }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/utilities/integrator/integrator-details-proxy.service.js","//{CODE:EUP9E}\r\n//di.einvoicing.ui.portal.portal.utilities.integrator\r\n\r\nexport const integratorDetailsComponent = {\r\n    selector: 'diIntegratorDetails',\r\n    controller: class {\r\n        constructor(integratorDetailsProxy, urlHelper, $window, config) {\r\n            this._integratorDetailsProxy = integratorDetailsProxy;\r\n            this._urlHelper = urlHelper;\r\n\r\n            this.clickonceConfig = {};\r\n            this.installUrl = '';\r\n            this.integratorSetupGuideUrl = config.app.integratorSetupGuideUrl; \r\n            this.download = () => {\r\n                $window.open(this.installUrl);\r\n            };\r\n        }\r\n\r\n        $onInit() {\r\n            this._integratorDetailsProxy.getClickonceConfig()\r\n\t\t\t\t.then(clickonceConfig => {\r\n\t\t\t\t    this.clickonceConfig = clickonceConfig;\r\n\t\t\t\t    this.installUrl = this._urlHelper.combine(clickonceConfig.clickonceInstallUrl, clickonceConfig.clickonceFilename);\r\n\t\t\t\t});\r\n        }\r\n    },\r\n    templateUrl: 'src/app/portal/utilities/integrator/integrator-details.html'\r\n}\r\n\r\nintegratorDetailsComponent.controller.prototype.constructor.$inject = ['integratorDetailsProxy', 'urlHelper', '$window', 'PORTAL_CONFIG'];\n\n\n// WEBPACK FOOTER //\n// ./src/app/portal/utilities/integrator/integrator-details.component.js","define([\r\n\t'./dropdown-selector/_loader',\r\n\t'./header/_loader',\r\n\t'./image/_loader',\r\n\t'./navigation/_loader',\r\n\t'./style-constants/_loader',\r\n\t'./tooltip/_loader',\r\n\t'./user/_loader',\r\n\t'./client-enums/_loader',\r\n\t'./service-status-monitor/_loader',\r\n\t'./identifier/_loader'\r\n], function (\r\n\tdropdownSelectorLoader,\r\n\theaderLoader,\r\n\timageLoader,\r\n\tnavigationLoader,\r\n\tstyleConstantsLoader,\r\n\ttooltipLoader,\r\n\tuserLoader,\r\n\tclientEnumsLoader,\r\n\tserviceStatusMonitorLoader,\r\n\tidentifierLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tdropdownSelectorLoader(module);\r\n\t\theaderLoader(module);\r\n\t\timageLoader(module);\r\n\t\tnavigationLoader(module);\r\n\t\tstyleConstantsLoader(module);\r\n\t\ttooltipLoader(module);\r\n\t\tuserLoader(module);\r\n\t\tclientEnumsLoader(module);\r\n\t\tserviceStatusMonitorLoader(module);\r\n\t\tidentifierLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/_loader.js","define([\r\n\t'./client-enums',\r\n\t'./enum-translator.service',\r\n\t'./enums-key-resolver.service'\r\n], function (\r\n    clientEnumsLoader,\r\n\tenumTranslatorLoader,\r\n\tenumsKeyResolverLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        clientEnumsLoader(module);\r\n        enumTranslatorLoader(module);\r\n        enumsKeyResolverLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/client-enums/_loader.js","//{CODE:EUP4K}\r\n// di.einvoicing.ui.portal.components.clientEnums\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.constant('CLIENT_ENUMS', clientEnums());\r\n\r\n\t\tfunction clientEnums() {\r\n\t\t\treturn {\r\n\t\t\t\tdocumentType: {\r\n\t\t\t\t\tlanguageKey: 'DOCUMENT_TYPE',\r\n\t\t\t\t\tunknown: 1,\r\n\t\t\t\t\tinvoice: 2,\r\n\t\t\t\t\tpurchaseOrder: 3,\r\n\t\t\t\t\tgoodsReceiptNote: 4\r\n\t\t\t\t},\r\n\t\t\t\tdocumentSource: {\r\n\t\t\t\t\tlanguageKey: 'DOCUMENT_SOURCE',\r\n\t\t\t\t\tunknown: 1,\r\n\t\t\t\t\tintegration: 2,\r\n\t\t\t\t\twebsiteUser: 3,\r\n\t\t\t\t\twebsiteFlip: 4\r\n\t\t\t\t},\r\n\t\t\t\tdocumentStateKey: {\r\n\t\t\t\t\tlanguageKey: 'DOCUMENT_STATE',\r\n\t\t\t\t\tunknown: 1,\r\n\t\t\t\t\tinvalid: 2,\r\n\t\t\t\t\tpending: 3,\r\n\t\t\t\t\tbeingProcessed: 4,\r\n\t\t\t\t\treconciliationInvalid: 5,\r\n\t\t\t\t\tonHold: 6,\r\n\t\t\t\t\tbeingSent: 7,\r\n\t\t\t\t\tsentreceived: 8,\r\n\t\t\t\t\taccepted: 9,\r\n\t\t\t\t\tshipped: 10,\r\n\t\t\t\t\tdelivered: 11,\r\n\t\t\t\t\tscheduled: 12,\r\n\t\t\t\t\toverdue: 13,\r\n\t\t\t\t\tpaymentSent: 14,\r\n\t\t\t\t\tpaymentReceived: 15,\r\n\t\t\t\t\tinDispute: 16,\r\n\t\t\t\t\trejected: 17,\r\n\t\t\t\t\tclosed: 18,\r\n\t\t\t\t\tcancelled: 19,\r\n\t\t\t\t\texportFailed: 20,\r\n\t\t\t\t\tinvalidDraft: 21,\r\n\t\t\t\t\tsendFailed: 22,\r\n\t\t\t\t\tpartiallyInvoiced: 23,\r\n\t\t\t\t\tfullyInvoiced: 24\r\n\t\t\t\t},\r\n\t\t\t\tdocumentAttribute: {\r\n\t\t\t\t\tlanguageKey: 'DOCUMENT_ATTRIBUTE',\r\n\t\t\t\t\tunknown: 1,\r\n\t\t\t\t\tschemaInvalid: 2,\r\n\t\t\t\t\treleased: 3,\r\n\t\t\t\t\tshipped: 4,\r\n\t\t\t\t\tdelivered: 5,\r\n\t\t\t\t\tscheduledForPayment: 6,\r\n\t\t\t\t\toverdue: 7,\r\n\t\t\t\t\tpaymentSent: 8,\r\n\t\t\t\t\tpaymentReceived: 9,\r\n\t\t\t\t\tinDispute: 10,\r\n\t\t\t\t\treconciliationFailed: 11,\r\n\t\t\t\t\tbusinessInvalid: 12,\r\n\t\t\t\t\tdocumentSourceWebsite: 13,\r\n\t\t\t\t\tpartiallyInvoiced: 14,\r\n\t\t\t\t\tfullyInvoiced: 15,\r\n\t\t\t\t\tdocumentSourceErp: 16,\r\n\t\t\t\t\txsltInvalid: 17,\r\n\t\t\t\t\tnotShipped: 101,\r\n\t\t\t\t\tnotDelivered: 102,\r\n\t\t\t\t\tnotInvoiced: 103,\r\n\t\t\t\t\tnotPaymentSent: 104,\r\n\t\t\t\t\tnotPaymentReceived: 105,\r\n\t\t\t\t\tnotOverdue: 106,\r\n\t\t\t\t\tnotScheduledForPayment: 107,\r\n\t\t\t\t\tnotInDispute: 108,\r\n\t\t\t\t\tnotSaved: 201,\r\n\t\t\t\t\tsaved: 202,\r\n\t\t\t\t\tcurrent: 203,\r\n\t\t\t\t\thasServerId: 204,\r\n\t\t\t\t\tjustFlipped: 205\r\n\t\t\t\t},\r\n\t\t\t\teventType: {\r\n\t\t\t\t\tlanguageKey: 'EVENT_TYPE',\r\n\t\t\t\t\tunknown: 1,\r\n\t\t\t\t\tinvoiceChanged: 2,\r\n\t\t\t\t\tpurchaseOrderFlipped: 3,\r\n\t\t\t\t\tpurchaseOrderImported: 4,\r\n\t\t\t\t\tinvoiceImported: 5,\r\n\t\t\t\t\tdocumentScheduled: 6,\r\n\t\t\t\t\tinvoiceExported: 7,\r\n\t\t\t\t\tinvoiceCreated: 8,\r\n\t\t\t\t\tlegalOriginalCreated: 9,\r\n\t\t\t\t\tgoodsReceiptNoteImported: 10,\r\n\t\t\t\t\teInvoicingStateChanged: 11,\r\n\t\t\t\t\tdocumentAttributeAdded: 12,\r\n\t\t\t\t\tdocumentAttributeRemoved: 13,\r\n\t\t\t\t\tdocumentMismatch: 14,\r\n\t\t\t\t\tdocumentMatched: 15,\r\n\t\t\t\t\tdocumentAttachmentAdded: 16,\r\n\t\t\t\t\tdocumentAttachmentUpdated: 17,\r\n\t\t\t\t\tdocumentAttachmentRemoved: 18,\r\n\t\t\t\t\tinvoiceImportFailed: 19,\r\n\t\t\t\t\tpurchaseOrderImportFailed: 20,\r\n\t\t\t\t\tgoodsReceiptNoteImportFailed: 21,\r\n\t\t\t\t\tinvoicePaid: 22,\r\n\t\t\t\t\tinvoiceCancelled: 23,\r\n\t\t\t\t\tpurchaseOrderCancelled: 24,\r\n\t\t\t\t\tdocumentAccepted: 25,\r\n\t\t\t\t\tinvoiceDisputed: 26,\r\n\t\t\t\t\toverReceivedGoods: 27,\r\n\t\t\t\t\tinvoiceOverdue: 28,\r\n\t\t\t\t\tinvoiceDisputeCompleted: 29,\r\n\t\t\t\t\trelationshipVerificationFailed: 30,\r\n\t\t\t\t\tunknownFileFormat: 31,\r\n\t\t\t\t\tinvoiceSent: 32,\r\n\t\t\t\t\tpurchaseOrderSent: 33,\r\n\t\t\t\t\tinvoiceReceived: 34,\r\n\t\t\t\t\tpurchaseOrderReceived: 35,\r\n\t\t\t\t\tdocumentBusinessInvalid: 36,\r\n\t\t\t\t\tinvoiceUnPaid : 37,\r\n\t\t\t\t\tdocumentRejected: 38,\r\n\t\t\t\t\tsendFailed: 39,\r\n\t\t\t\t\tschemaValidationFailed: 40,\r\n\t\t\t\t    purchaseOrderChanged : 41,\r\n\t\t\t\t    markAsImported: 42,\r\n\t\t\t\t    manuallyMarkAsImported: 43,\r\n\t\t\t\t    buyerPartyAutoProfiled: 44\r\n\t\t\t\t},\r\n\t\t\t\tproductType: {\r\n\t\t\t\t\tlanguageKey: 'PRODUCT_TYPE',\r\n\t\t\t\t\tproduct: 1,\r\n\t\t\t\t\tservice: 2,\r\n\t\t\t\t\tdelivery: 3,\r\n\t\t\t\t\tcustoms: 4\r\n\t\t\t\t},\r\n\t\t\t\torderType: {\r\n\t\t\t\t    languageKey: 'ORDER_TYPE',\r\n\t\t\t\t    order: 1,\r\n\t\t\t\t    blanketOrder: 2,\r\n\t\t\t\t    spotOrder: 3,\r\n\t\t\t\t    leaseOrder: 4,\r\n\t\t\t\t    rushOrder: 5,\r\n\t\t\t\t    repairOrder: 6,\r\n\t\t\t\t    callOffOrder: 7,\r\n\t\t\t\t    consignmentOrder: 8,\r\n\t\t\t\t    sampleOrder: 9,\r\n\t\t\t\t    swapOrder: 10,\r\n\t\t\t\t    purchaseOrderChangeRequest: 11,\r\n\t\t\t\t    purchaseOrderResponse: 12,\r\n                    hireOrder: 13,\r\n\t\t\t\t    sparePartsOrder: 14\r\n\t\t\t\t},\r\n\t\t\t\tinvoiceType: {\r\n\t\t\t\t    languageKey: 'INVOICE_TYPE',\r\n\t\t\t\t    commercialInvoice: 1,\r\n\t\t\t\t    correctedInvoice: 2,\r\n\t\t\t\t    factoredInvoice: 3\r\n\t\t\t\t},\r\n\t\t\t\tnotificationFrequency: {\r\n\t\t\t\t\tlanguageKey: 'NOTIFICATION_FREQUENCY',\r\n\t\t\t\t\tnever: 1,\r\n\t\t\t\t\timmediate: 2,\r\n\t\t\t\t\tevery10Minutes: 3,\r\n\t\t\t\t\tevery30Minutes: 4,\r\n\t\t\t\t\thourly: 5,\r\n\t\t\t\t\tdaily: 6\r\n\t\t\t\t},\r\n\t\t\t\tdocumentCreationFailureReason: {\r\n\t\t\t\t\tlanguageKey: 'DOCUMENT_CREATION_FAILURE_REASON',\r\n\t\t\t\t\tnone: 0,\r\n\t\t\t\t\tduplicateDocument: 1,\r\n\t\t\t\t\tdocumentSchemaInvalid: 2,\r\n\t\t\t\t\tnonExistentParty: 3,\r\n\t\t\t\t\tnoTradingRelationship: 4,\r\n\t\t\t\t\tnoOriginatorFileFormatLink: 5,\r\n\t\t\t\t\tmappingFailure: 6,\r\n\t\t\t\t\tversionNumberConflict: 7\r\n\t\t\t\t},\r\n\t\t\t\troles: {\r\n\t\t\t\t\tadministrator: 1,\r\n\t\t\t\t\tbuyerSupervisor: 2,\r\n\t\t\t\t\tbuyerClerk: 3,\r\n\t\t\t\t\tsupplierSupervisor: 4,\r\n\t\t\t\t\tsupplierClerk: 5,\r\n\t\t\t\t\tbuyerAuditor: 6\r\n\t\t\t\t},\r\n\t\t\t\tserviceState: {\r\n\t\t\t\t\tlanguageKey: 'SERVICE_STATE',\r\n\t\t\t\t\tmaintenance: 0,\r\n\t\t\t\t\tup: 1,\r\n\t\t\t\t\tdown: 2\r\n\t\t\t\t},\r\n\t\t\t\tuserActions: {\r\n\t\t\t\t\tlanguageKey: 'USER_ACTIONS',\r\n\t\t\t\t\tunknown: 1,\r\n\t\t\t\t\tviewInvoice: 2,\r\n\t\t\t\t\tviewPurchaseOrder: 3,\r\n\t\t\t\t\tviewGoodsReceiptNote: 4,\r\n\t\t\t\t\teditInvoice: 5,\r\n\t\t\t\t\tcommit: 6,\r\n\t\t\t\t\taccept: 7,\r\n\t\t\t\t\tcancelInvoice: 8,\r\n\t\t\t\t\tcancelPurchaseOrder: 9,\r\n\t\t\t\t\tclose: 10,\r\n\t\t\t\t\tstartDispute: 11,\r\n\t\t\t\t\tendDispute: 12,\r\n\t\t\t\t\treject: 13,\r\n\t\t\t\t\trelease: 14,\r\n\t\t\t\t\tsubmit: 15,\r\n\t\t\t\t\tmarkAsPaidBuyer: 16,\r\n\t\t\t\t\tmarkAsNotPaidBuyer: 17,\r\n\t\t\t\t\tmarkAsPaidSupplier: 18,\r\n\t\t\t\t\tmarkAsNotPaidSupplier: 19,\r\n\t\t\t\t\tmarkAsScheduledForPayment: 20,\r\n\t\t\t\t\tmarkAsNotScheduledForPayment: 21,\r\n\t\t\t\t\tmarkAsShipped: 22,\r\n\t\t\t\t\tmarkAsNotShipped: 23,\r\n\t\t\t\t\tmarkAsDelivered: 24,\r\n\t\t\t\t\tmarkAsNotDelivered: 25,\r\n\t\t\t\t\tremove: 26,\r\n\t\t\t\t\tsave: 27,\r\n\t\t\t\t\tenable: 28,\r\n\t\t\t\t\tdisable: 29,\r\n\t\t\t\t\tunlock: 30,\r\n\t\t\t\t\tdownloadInvoice: 31,\r\n\t\t\t\t\tdownloadPurchaseOrder: 32,\r\n\t\t\t\t\tdownloadGoodsReceiptNote: 33,\r\n\t\t\t\t\tviewHistoryInvoice: 34,\r\n\t\t\t\t\tviewHistoryPurchaseOrder: 35,\r\n\t\t\t\t\tviewHistoryGoodsReceiptNote: 36,\r\n\t\t\t\t\tviewAttachements: 37,\r\n\t\t\t\t\tviewRelatedDocumentsInvoice: 38,\r\n\t\t\t\t\tviewRelatedDocumentsPurchaseOrder: 39,\r\n\t\t\t\t\tviewRelatedDocumentsGoodsReceiptNote: 40,\r\n\t\t\t\t\tflip: 41,\r\n\t\t\t\t\tviewUser: 42,\r\n\t\t\t\t\teditUser: 43,\r\n\t\t\t\t\tdownload: 44,\r\n\t\t\t\t\tviewHistory: 45,\r\n\t\t\t\t\tviewRelatedDocuments: 46,\r\n\t\t\t\t\tresetPassword: 47,\r\n\t\t\t\t\tshowIssues: 48,\r\n\t\t\t\t\tdownloadAsCsv: 49,\r\n\t\t\t\t\tmarkAsInvoiced: 50,\r\n\t\t\t\t\tcreateUser: 51,\r\n\t\t\t\t\tgeneratePassword:52,\r\n\t\t\t\t\tdeleteUser: 53\r\n\t\t\t\t},\r\n\t\t\t\tpartyCodeType: {\r\n\t\t\t        languageKey: 'PARTYCODE_TYPE',\r\n\t\t\t        unknown: 1,\r\n\t\t\t        default: 2,\r\n\t\t\t        endpoint: 3,\r\n\t\t\t        taxReference: 4\r\n\t\t\t\t},\r\n\t\t\t\tschemes: {\r\n\t\t\t        languageKey: 'SCHEME',\r\n\t\t\t        5: 'DUNS',\r\n\t\t\t        6: 'GLN',\r\n\t\t\t        38: 'GB:VAT',\r\n\t\t\t        62: 'ZZZ'\r\n\t\t\t\t},\r\n\t\t\t\tlocationType: {\r\n\t\t\t\t\tlanguageKey: 'LOCATION_TYPE',\r\n\t\t\t\t\tUnknown: 1,\r\n\t\t\t\t\tBusiness: 2,\r\n\t\t\t\t\tDelivery: 3,\r\n\t\t\t\t\tAccounting: 4\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn clientEnums;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/client-enums/client-enums.js","//{CODE:EUP4I}\r\n// di.einvoicing.ui.portal.components.clientEnums\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('enumTranslator', enumTranslator);\r\n\r\n        enumTranslator.$inject = ['translator'];\r\n\r\n        function enumTranslator(translator) {\r\n            return {\r\n                getLanguageKey: getLanguageKey,\r\n                translate: translate,\r\n                instantTranslate: instantTranslate,\r\n                translateCollection: translateCollection\r\n            };\r\n\r\n            /**\r\n             * Gets the language key for the given enum value\r\n             */\r\n            function getLanguageKey(enumObject, enumValue) {\r\n                guard.throwIfNotAnObject(\"EUP4I01E\", enumObject, 'enumObject');\r\n                guard.throwIfInvalidId(\"EUP4I02E\", enumValue, 'enumValue');\r\n\r\n                var enumLanguageKey = enumObject.languageKey;\r\n                var languageKey = 'EINVOICING.COMPONENTS.CLIENT_ENUMS.' + enumLanguageKey + '.' + enumValue;\r\n\r\n                return languageKey;\r\n            }\r\n\r\n            /**\r\n             * Gives the translation of the language key of the given enum value\r\n             */\r\n            function translate(enumObject, enumValue) {\r\n                guard.throwIfNotAnObject(\"EUP4I07E\", enumObject, 'enumObject');\r\n                guard.throwIfInvalidId(\"EUP4I08E\", enumValue, 'enumValue');\r\n\r\n                var languageKey = getLanguageKey(enumObject, enumValue);\r\n                return translator.translate(languageKey);\r\n            }\r\n\r\n            function instantTranslate(enumObject, enumValue) {\r\n                guard.throwIfNotAnObject(\"EUP4I07E\", enumObject, 'enumObject');\r\n                guard.throwIfInvalidId(\"EUP4I08E\", enumValue, 'enumValue');\r\n\r\n                var languageKey = getLanguageKey(enumObject, enumValue);\r\n                return translator.instantTranslate(languageKey);\r\n            }\r\n\r\n            /**\r\n             * Maps the language keys for all items in the given collection\r\n             * @param enumName\r\n             * @param items\r\n             * @param idPropertyName\r\n             * @param textPropertyName\r\n             */\r\n            function translateCollection(enumObject, items, idPropertyName, textPropertyName) {\r\n                guard.throwIfNotAnObject(\"EUP4I03E\", enumObject, 'enumObject');\r\n                guard.throwIfNotArray(\"EUP4I04E\", items, 'items');\r\n                guard.throwIfEmptyString(\"EUP4I05E\", idPropertyName, 'idPropertyName');\r\n                guard.throwIfEmptyString(\"EUP4I06E\", textPropertyName, 'textPropertyName');\r\n\r\n                translator.whenReady()\r\n                    .then(function() {\r\n                        for (var i = 0; i < items.length; i++) {\r\n                            items[i][textPropertyName] = translator\r\n                                .instantTranslate(getLanguageKey(enumObject, items[i][idPropertyName]));\r\n                        }\r\n                    });\r\n            }\r\n        }\r\n\r\n        return enumTranslator;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/client-enums/enum-translator.service.js","//{CODE:EUP7A}\r\n// di.einvoicing.ui.portal.components.clientEnums\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('enumsKeyResolver', enumsKeyResolver);\r\n\r\n\t\tenumsKeyResolver.$inject = ['userRightsRepository'];\r\n\r\n\t\tfunction enumsKeyResolver(userRightsRepository) {\r\n\t\t\treturn {\r\n\t\t\t\tgetEnumsForCurrentRole: getEnumsForCurrentRole\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * Creates a copy of enum object with changed values             \r\n\t\t\t */\r\n\t\t\tfunction getEnumsForCurrentRole(obj, docType) {\r\n\t\t\t\tif (null == obj || \"object\" != typeof obj) {\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar copy = obj.constructor();\r\n\t\t\t\tfor (var attr in obj) {\r\n\t\t\t\t\tif (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar roleName = getRoleName();\r\n\r\n\t\t\t\tvar newKey = obj.languageKey;\r\n\r\n\t\t\t\tif (util.isNonEmptyString(docType)) {\r\n\t\t\t\t\tnewKey += \"_\" + docType.toUpperCase();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (util.isNonEmptyString(roleName)) {\r\n\t\t\t\t\tnewKey += \"_\" + roleName;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcopy.languageKey = newKey;\r\n\r\n\t\t\t\treturn copy;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Gets role name for language key             \r\n\t\t\t\t */\r\n\t\t\t\tfunction getRoleName() {\r\n\t\t\t\t\tvar isSupplier = userRightsRepository.userHasRight(\"Supplier\");\r\n\t\t\t\t\tvar isBuyer = userRightsRepository.userHasRight(\"Buyer\");\r\n\r\n\t\t\t\t\tvar role = '';\r\n\r\n\t\t\t\t\tif (isSupplier) {\r\n\t\t\t\t\t\trole = \"SUPPLIER\";\r\n\t\t\t\t\t} else if (isBuyer) {\r\n\t\t\t\t\t\trole = \"BUYER\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn role;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn enumsKeyResolver;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/client-enums/enums-key-resolver.service.js","//{CODE:EUP5F}\r\n// di.einvoicing.ui.portal.components\r\ndefine([\r\n    './dropdown-selector.directive',\r\n    './dropdown-selector.controller'\r\n], function (\r\n    dropdownSelectorDirectiveLoader,\r\n    dropdownSelectorControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        dropdownSelectorDirectiveLoader(module);\r\n        dropdownSelectorControllerLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/dropdown-selector/_loader.js","//{CODE:EUP1V}\r\n// di.einvoicing.ui.portal.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var util = $di.utility.util;\r\n\r\n        module.controller('DropdownSelectorController', DropdownSelectorController);\r\n\r\n        DropdownSelectorController.$inject = ['$scope'];\r\n\r\n        function DropdownSelectorController(scope) {\r\n            var vm = this;\r\n\r\n            vm.items = [];\r\n            vm.item = {};\r\n            vm.onChangeAccessor = setBoundIdFromSelectedItem;\r\n\r\n            setWatches();\r\n            \r\n            return;\r\n\r\n            function setWatches() {\r\n                var unwatch = scope.$watchCollection('items', function () {\r\n                    if (scope.items && scope.items.length > 0) {\r\n                        vm.items.fill(scope.items);\r\n                        setSelectedItemFromBoundId();\r\n                        unwatch();\r\n                    }\r\n                });\r\n\r\n                scope.$watch(function () {\r\n                    let obj = scope.bindToObject || {};\r\n\r\n                    return obj[scope.bindToProperty];\r\n                }, setSelectedItemFromBoundId);\r\n\r\n                return;\r\n\r\n                function setSelectedItemFromBoundId() {\r\n                    let bindToObject = scope.bindToObject || {};\r\n\r\n                    if (util.isDefined(vm.item) && bindToObject[scope.bindToProperty] === vm.item.id) {\r\n                        return;\r\n                    }\r\n\r\n                    \r\n\r\n                    var item = _.find(vm.items, function (item) {\r\n                        return item.id === bindToObject[scope.bindToProperty];\r\n                    });\r\n\r\n                    if (util.isUndefined(item)) {\r\n                        return;\r\n                    }\r\n\r\n                    vm.item = item;\r\n                }\r\n            }\r\n\r\n            function setBoundIdFromSelectedItem() {\r\n            \tvar accessor;\r\n                \r\n                if (util.isFunction(scope.onChangeAccessor)) {\r\n                    accessor = scope.onChangeAccessor();\r\n\r\n                    if (util.isFunction(accessor)) {\r\n                        accessor(vm.item);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return DropdownSelectorController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/dropdown-selector/dropdown-selector.controller.js","//{CODE:EUP5E}\r\n// di.einvoicing.ui.portal.components\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\t\tmodule.directive('diDropdownSelector', diDropdownSelector);\r\n\r\n\t\tfunction diDropdownSelector() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t\t\t\tscope: {\r\n\t\t\t\t\titems:\"=\",\r\n\t\t\t\t\tbindToObject: '=',\r\n\t\t\t\t\tbindToProperty: '@',\r\n\t\t\t\t\tvalidationName: \"@\",\r\n\t\t\t\t\tisMandatory:\"=\",\r\n\t\t\t\t\tnoSearch:\"=\",\r\n\t\t\t\t\tvalidationMessage: '@',\r\n\t\t\t\t\tonChangeAccessor: '&',\r\n                    itemCompare : '='\r\n\t\t\t\t},\r\n\t\t\t\tcontroller: 'DropdownSelectorController',\r\n\t\t\t\tcontrollerAs: 'dropdownSelectorCtrl',\r\n\t\t\t\ttemplate: template,\r\n\t\t\t\tcompile : compile\r\n\t\t\t};\r\n\r\n\t\t\tfunction compile(element, attrs) {\r\n\t\t\t\tif (util.isUndefined(attrs.isMandatory) || attrs.isMandatory === \"false\") {\r\n\t\t\t\t\tvar inputs = element.find('input');\r\n\t\t\t\t\t_.each(inputs, function (item) {\r\n\t\t\t\t\t\titem.setAttribute('di-validate', 'ignored');\t\r\n\t\t\t\t\t\titem.setAttribute('validation-name', 'ignored');\r\n\t\t\t\t\t\titem.removeAttribute('validation-message');\r\n\t\t\t\t\t\titem.removeAttribute('validation-model-display-name');\r\n\t\t\t\t\t\titem.removeAttribute('validation-message-position');\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction template(element, attrs) {\r\n\t\t\t\tvar html = '<div>\\\r\n\t\t\t\t\t\t\t\t<di-select';\r\n\r\n\t\t\t\tif(attrs.noSearch) {\r\n\t\t\t\t    html += ' mode=\"dropdown\"';\r\n\t\t\t\t} else {\r\n\t\t\t\t    html += ' mode=\"dropdownSearch\"';\r\n\t\t\t\t}\r\n\t\t\t    html += ' items=\"dropdownSelectorCtrl.items\"\\\r\n\t\t\t\t            item-unique-property=\"id\"\\\r\n\t\t\t\t            bind-to-object=\"dropdownSelectorCtrl\"\\\r\n\t\t\t\t            bind-to-property=\"item\"\\\r\n\t\t\t\t            display-property=\"name\"\\\r\n\t\t\t\t            searchable-properties=\"name\"\\\r\n\t\t\t\t            on-change-accessor=\"dropdownSelectorCtrl.onChangeAccessor\"\\\r\n\t\t\t\t            watch-binding=\"true\"\\\r\n\t\t\t\t            placeholder=\"EINVOICING.PORTAL.INVOICES.EDITOR.COMPONENTS.DETAILS.SEARCH\"';\r\n\r\n\t\t\t\tif (util.isUndefined(attrs.isMandatory) || attrs.isMandatory === \"true\") {\r\n\t\t\t\t\thtml += getValidationHtml(attrs);\r\n\t\t\t\t}\r\n\r\n\t\t\t\thtml += '>{{::filteredItem.item.name}}\\\r\n\t\t\t\t\t\t\t\t</di-select>\\\r\n\t\t\t\t\t\t\t</div>';\r\n\r\n\t\t\t\treturn html;\r\n\r\n\t\t\t\tfunction getValidationHtml(attrs) {\r\n\t\t\t\t\tvar innerHtml = \"\";\r\n\r\n\t\t\t\t\tif (util.isDefined(attrs.validationName)) {\r\n\t\t\t\t\t\tvar displayName = attrs.validationName;\r\n\t\t\t\t\t\tif (util.isDefined(attrs.validationModelDisplayName)) {\r\n\t\t\t\t\t\t\tdisplayName = attrs.validationModelDisplayName;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinnerHtml += 'di-validate=\"{{::validationName}}\"\\\r\n\t\t\t\t\t\t\t\t\t  validation-message=\"{{::validationMessage}}\"\\\r\n\t\t\t\t\t\t\t\t\t  validation-model=\"bindToObject[bindToProperty]\"\\\r\n\t\t\t\t\t\t\t\t\t  validation-model-display-name=\"' + displayName + '\"';\r\n\r\n\r\n\t\t\t\t\t\tif (attrs.validationModel) {\r\n\t\t\t\t\t\t\tinnerHtml += 'validation-model=\"validationModel\" ';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn innerHtml;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn diDropdownSelector;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/dropdown-selector/dropdown-selector.directive.js","//{CODE:EUP19}\r\n// di.einvoicing.ui.portal.components\r\ndefine([\r\n    './_snippets/_loader',\r\n    './header-data.service',\r\n    './header.controller'\r\n], function (\r\n    snippetsLoader,\r\n    headerDataLoader,\r\n    headerControllerLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        headerControllerLoader(module);\r\n        headerDataLoader(module);\r\n        snippetsLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/header/_loader.js","// di.einvoicing.ui.portal._components._snippets\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar snippetContext = $di.angular.snippetRegistrar.createContext(\r\n\t\t\tmodule,\r\n\t\t\t'src/app/shared/components/header/_snippets');\r\n\r\n\t\tsnippetContext.registerSnippet('diHeader', 'header.html', 'HeaderController', 'headerCtrl');\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/header/_snippets/_loader.js","//{CODE:EUP1C}\r\n// di.einvoicing.ui.portal.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('headerData', headerData);\r\n\r\n        function headerData() {\r\n            var service = {\r\n                data: {\r\n                    title: ''\r\n                },\r\n                set: set\r\n            };\r\n\r\n            return service;\r\n\r\n            function set(header) {\r\n                guard.throwIfNotAnObject(\"EUP1C01E\", header, \"header\");\r\n\r\n                service.data.title = header.title;\r\n            }\r\n        }\r\n\r\n        return headerData;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/header/header-data.service.js","//{CODE:EUP1B}\r\n// di.einvoicing.ui.portal.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.controller('HeaderController', HeaderController);\r\n\r\n        HeaderController.$inject = [\r\n            'headerData',\r\n            'authenticationData',\r\n            'authenticationClientEventSubscriber',\r\n            'LOGGED_OUT_REASON'];\r\n\r\n        function HeaderController(headerData, authenticationData, authenticationClientEventSubscriber, LOGGED_OUT_REASON) {\r\n            var vm = this;\r\n\r\n            vm.user = {};\r\n            vm.data = headerData.data;\r\n            vm.userData = authenticationData.userData;\r\n            vm.logOut = logOut;\r\n\r\n            return;\r\n            \r\n            function logOut() {\r\n                authenticationClientEventSubscriber.loggedOut();\r\n            }\r\n        }\r\n\r\n        return HeaderController;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/header/header.controller.js","//{CODE:EUP19}\r\n// di.einvoicing.ui.portal.components\r\ndefine([\r\n    './identifierFactory'\r\n], function (\r\n    identifierFactoryLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        identifierFactoryLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/identifier/_loader.js","//{CODE:EUP5L}\r\n// di.einvoicing.ui.portal.proxies\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    var util = $di.utility.util;\r\n\r\n\t    module.factory('identifierFactory', identifierFactory);\r\n\r\n\t    identifierFactory.$inject = ['translator', 'modalWindow'];\r\n\r\n\t    function identifierFactory(translator, modalWindow) {\r\n\t\t\treturn {\r\n\t\t\t\tcreate: create,\r\n\t\t\t\tedit: edit,\r\n\t\t\t    getDefaultOptions: getDefaultOptions\r\n\t\t\t};\r\n            \r\n\t\t\tfunction create(scheme, schemeId, code, codeDescription) {\r\n\t\t\t    var description = \"\";\r\n\r\n\t\t\t    if (util.isNonEmptyString(scheme)) {\r\n\t\t\t        description = translator.\r\n\t\t\t            instantTranslate(\"EINVOICING.COMPONENTS.CLIENT_ENUMS.SCHEMES.\" + scheme);\r\n\t\t\t    }\r\n\r\n\r\n\t\t\t    var codeDesc = undefined;\r\n\r\n\t\t\t    if (util.isNonEmptyString(codeDescription)) {\r\n\t\t\t        codeDesc = '(' + codeDescription + ')';\r\n\t\t\t    }\r\n\r\n\t\t\t    var display = \"\";\r\n\r\n\t\t\t    if (util.isNonEmptyString(scheme)) {\r\n\r\n\t\t\t        display = translator.\r\n\t\t\t            instantTranslate(\"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.DISPLAY\",\r\n\t\t\t                { scheme: description, code: code, codeDesc: codeDesc });\r\n\t\t\t    } else {\r\n\t\t\t        display = translator.\r\n                       instantTranslate(\"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.DISPLAY_NO_SCHEME\",\r\n                           { code: code, codeDesc: codeDesc });\r\n\t\t\t    }\r\n\r\n\t\t\t    var displayValue = display;\r\n\t\t\t    var label = display;\r\n\r\n\t\t\t    if (util.isNonEmptyString(code) === false || util.isNullOrUndefined(code)) {\r\n\t\t\t        code = \"\",\r\n                    description = \"\";\r\n\t\t\t        scheme = \"\";\r\n\t\t\t        displayValue = \"\";\r\n\t\t\t        label = translator.instantTranslate(\"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.NONE\");\r\n\t\t\t    }\r\n\r\n\t\t\t    return {\r\n\t\t\t        identifier: scheme + code,\r\n\t\t\t        code: code,\r\n\t\t\t        codeDescription : codeDesc,\r\n\t\t\t        scheme: scheme,\r\n\t\t\t        schemeId: schemeId,\r\n\t\t\t        schemeDescription: description,\r\n\t\t\t        displayValue: displayValue,\r\n\t\t\t        label: label\r\n\t\t\t    }\r\n\t\t\t}\r\n\r\n\t\t\tfunction edit(\r\n                partyCode,\r\n                schemes,\r\n                relatedParties,\r\n                validationPropertyName,\r\n                callback,\r\n                buttonLabels, \r\n                validate,\r\n                partyId,\r\n                partyCodeType) {\r\n\t\t\t\tformatSchemesForClient(schemes);\r\n\r\n\t\t\t\tconst options = {\r\n\t\t\t\t\tdataModel: {\r\n\t\t\t\t\t    id: partyCode.id,\r\n\t\t\t\t\t    partyId: partyId,\r\n\t\t\t\t\t    partyCodeType: partyCodeType,\r\n\t\t\t\t\t    code: partyCode.code,\r\n\t\t\t\t\t    identifier: partyCode.code,\r\n\t\t\t\t\t    scheme: {\r\n\t\t\t\t\t        name: partyCode.scheme,\r\n\t\t\t\t\t        id: partyCode.schemeId,\r\n\t\t\t\t\t        value: partyCode.scheme\r\n\t\t\t\t\t    },\r\n\t\t\t\t\t    schemeId: partyCode.schemeId,\r\n\t\t\t\t\t    relatedParty: partyCode.relatedPartyDetails,\r\n\t\t\t\t\t    relatedParties: relatedParties,\r\n\t\t\t\t\t    options: schemes,\r\n\t\t\t\t\t    arrayName: 'edit',\r\n\t\t\t\t\t    action: undefined,\r\n\t\t\t\t\t    validationPropertyName: validationPropertyName,\r\n\t\t\t\t\t    isEditable: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalidateOnSave : validate,\r\n\t\t\t\t\tdropdownName: 'scheme',\r\n\t\t\t\t\tcontroller: \"ResourceController\",\r\n\t\t\t\t\ttemplateUrl:\r\n\t\t\t\t\t\t'src/app/portal/invoices/editor/_components/invoiceDetails/identifierPopup.html',\r\n\t\t\t\t\tonDataChanged: () => { },\r\n\t\t\t\t\ttitle: translator.\r\n\t\t\t\t\t\tinstantTranslate(\"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.ADD_NEW_IDENTIFIER_TITLE\")\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar labels = {};\r\n\r\n\t\t\t\tif (util.isDefined(buttonLabels)) {\r\n\t\t\t\t    labels = buttonLabels;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.save = labels.save || \"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.ACTIONS.SAVE\";\r\n\t\t\t\toptions.cancel = labels.cancel || \"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.ACTIONS.CANCEL\";\r\n\r\n\r\n\t\t\t\tshowPopup(options, callback);\r\n\t\t\t}\r\n\r\n\t\t\tfunction getDefaultOptions(\r\n                schemeOptions,\r\n                arrayName,\r\n                validationPropertyname,\r\n                allowBlank,\r\n                action,\r\n                buttonLabels,\r\n                validate) {\r\n\t\t\t    formatSchemesForClient(schemeOptions);\r\n\r\n\t\t\t    if (allowBlank) {\r\n\t\t\t        schemeOptions.unshift({\r\n\t\t\t            code: \"\",\r\n\t\t\t            numericalCode: \"\",\r\n\t\t\t            sortOrder: 0,\r\n\t\t\t            isEnabled: true,\r\n\t\t\t            id: 0,\r\n\t\t\t            displayValue: \"\",\r\n\t\t\t            showLabel: true,\r\n\t\t\t            label: translator.instantTranslate(\"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.NONE\")\r\n\t\t\t        });\r\n\t\t\t    }\r\n\r\n\t\t\t    const none = {\r\n\t\t\t        identifier: \"\",\r\n\t\t\t        code: \"\",\r\n\t\t\t        scheme: \"\",\r\n\t\t\t        schemeDescription: \"\",\r\n\t\t\t        displayValue: \"\",\r\n\t\t\t        showLabel: true,\r\n\t\t\t        label: translator.instantTranslate(\"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.NONE\")\r\n\t\t\t    }\r\n\r\n\t\t\t    const addNew = _.extend(_.clone(none), { addNew: addNewItem });\r\n\r\n\t\t\t    addNew.identifier = \"NEW\";\r\n\t\t\t    addNew.label = translator.\r\n                    instantTranslate(\"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.ADD_NEW\");\r\n\r\n\t\t\t    const array = [\r\n                    none,\r\n                    addNew\r\n\t\t\t    ];\r\n\r\n\t\t\t    return array;\r\n\r\n\t\t\t    function addNewItem(callback, partyId, partyCodeType) {\r\n\t\t\t        const options = {\r\n\t\t\t            dataModel: {\r\n\t\t\t                partyId: partyId,\r\n\t\t\t                partyCodeType: partyCodeType,\r\n\t\t\t                identifier: '',\r\n\t\t\t                scheme: schemeOptions[0],\r\n\t\t\t                options: schemeOptions,\r\n\t\t\t                arrayName: arrayName,\r\n                            action : action,\r\n                            validationPropertyName: validationPropertyname,\r\n                            isEditable: true\r\n\t\t\t            },\r\n\t\t\t            validateOnSave : validate,\r\n\t\t\t            dropdownName: 'scheme',\r\n\t\t\t            controller: \"ResourceController\",\r\n\t\t\t            templateUrl:\r\n                            'src/app/portal/invoices/editor/_components/invoiceDetails/identifierPopup.html',\r\n\t\t\t            onDataChanged: () => { },\r\n\t\t\t            title: translator.\r\n                            instantTranslate(\"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.ADD_NEW_IDENTIFIER_TITLE\")\r\n\t\t\t        };\r\n\r\n\t\t\t        var labels = {};\r\n\r\n\t\t\t        if (util.isDefined(buttonLabels)) {\r\n\t\t\t            labels = buttonLabels;\r\n\t\t\t        }\r\n\r\n\t\t\t        options.save = labels.save || \"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.ACTIONS.SET\";\r\n\t\t\t        options.cancel = labels.cancel || \"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.ACTIONS.CANCEL\";\r\n\r\n\r\n\t\t\t        showPopup(options, callback);\r\n\t\t\t    }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction showPopup(options, callback) {\r\n\t\t\t\tmodalWindow.show(options,\r\n\t\t\t\t\t(result) => {\r\n\r\n\t\t\t\t\t\tvar display;\r\n\r\n\t\t\t\t\t\tif (util.isNonEmptyString(result.scheme.name)) {\r\n\r\n\t\t\t\t\t\t\tdisplay = translator.\r\n\t\t\t\t\t\t\t\tinstantTranslate(\"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.DISPLAY\",\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tscheme: result.scheme.name,\r\n\t\t\t\t\t\t\t\t\tcode: result.code,\r\n\t\t\t\t\t\t\t\t\tcodeDesc: result.\r\n\t\t\t\t\t\t\t\t\t\tcodeDescription\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdisplay = translator.\r\n\t\t\t\t\t\t\t\tinstantTranslate(\"EINVOICING.PORTAL.COMPONENTS.IDENTIFIER_SELECTOR.DISPLAY_NO_SCHEME\",\r\n\t\t\t\t\t\t\t\t\t{ code: result.code, codeDesc: result.codeDescription });\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst newItem = {\r\n\t\t\t\t\t\t\tid: result.id,\r\n\t\t\t\t\t\t\tidentifier: result.scheme.value + result.code,\r\n\t\t\t\t\t\t\tcode: result.code,\r\n\t\t\t\t\t\t\tcodeDescription: result.codeDescription,\r\n\t\t\t\t\t\t\tscheme: result.scheme.value,\r\n\t\t\t\t\t\t\tschemeId: result.scheme.id,\r\n\t\t\t\t\t\t\tschemeDescription: result.scheme.name,\r\n\t\t\t\t\t\t\trelatedParty: result.relatedParty,\r\n\t\t\t\t\t\t\tdisplayValue: display,\r\n\t\t\t\t\t\t\tlabel: display\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tif (util.isFunction(result.action)) {\r\n\t\t\t\t\t\t\tresult.action(newItem, result.arrayName);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcallback(newItem);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t() => { });\r\n\t\t\t}\r\n\r\n\t\t\tfunction formatSchemesForClient(schemes) {\r\n\t\t\t\tvar schemeTranslationPrefix = \"EINVOICING.COMPONENTS.CLIENT_ENUMS.SCHEMES.\";\r\n\r\n\t\t\t\t_.each(schemes,\r\n\t\t\t\t\t(scheme) => {\r\n\t\t\t\t\t\tscheme.name = translator.\r\n\t\t\t\t\t\t\tinstantTranslate(schemeTranslationPrefix + scheme.code);\r\n\t\t\t\t\t\tscheme.value = scheme.code;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t    return identifierFactory;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/identifier/identifierFactory.js","//{CODE:EUP4P}\r\n// di.einvoicing.ui.portal.components.image\r\ndefine([\r\n    './images'\r\n], function (\r\n    imagesLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        imagesLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/image/_loader.js","//{CODE:EUP4R}\r\n// di.einvoicing.ui.portal.components.image\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.constant('IMAGES', images());\r\n\r\n\t\tfunction images() {\r\n\t\t\treturn {\r\n\t\t\t\tedit: {\r\n\t\t\t\t\tviewBox: '0 0 1789 1413',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M890.5,1058.5l116,-116l-152,-152l-116,116l0,56l96,0l0,96l56,0zm440,-720q-16,-16 -33,1l-350,350q-17,17 -1,33t33,-1l350,-350q17,-17 1,-33zm80,594l0,190q0,119 -84.5,203.5t-203.5,84.5l-832,0q-119,0 -203.5,-84.5t-84.5,-203.5l0,-832q0,-119 84.5,-203.5t203.5,-84.5l832,0q63,0 117,25q15,7 18,23q3,17 -9,29l-49,49q-14,14 -32,8q-23,-6 -45,-6l-832,0q-66,0 -113,47t-47,113l0,832q0,66 47,113t113,47l832,0q66,0 113,-47t47,-113l0,-126q0,-13 9,-22l64,-64q15,-15 35,-7t20,29zm-96,-738l288,288l-672,672l-288,0l0,-288l672,-672zm444,132l-92,92l-288,-288l92,-92q28,-28 68,-28t68,28l152,152q28,28 28,68t-28,68Z'\r\n\t\t\t\t},\r\n\t\t\t\tview: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1664 960q-152-236-381-353 61 104 61 225 0 185-131.5 316.5t-316.5 131.5-316.5-131.5-131.5-316.5q0-121 61-225-229 117-381 353 133 205 333.5 326.5t434.5 121.5 434.5-121.5 333.5-326.5zm-720-384q0-20-14-34t-34-14q-125 0-214.5 89.5t-89.5 214.5q0 20 14 34t34 14 34-14 14-34q0-86 61-147t147-61q20 0 34-14t14-34zm848 384q0 34-20 69-140 230-376.5 368.5t-499.5 138.5-499.5-139-376.5-368q-20-35-20-69t20-69q140-229 376.5-368t499.5-139 499.5 139 376.5 368q20 35 20 69z'\r\n\t\t\t\t},\r\n\t\t\t\trefresh: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1639 1056q0 5-1 7-64 268-268 434.5t-478 166.5q-146 0-282.5-55t-243.5-157l-129 129q-19 19-45 19t-45-19-19-45v-448q0-26 19-45t45-19h448q26 0 45 19t19 45-19 45l-137 137q71 66 161 102t187 36q134 0 250-65t186-179q11-17 53-117 8-23 30-23h192q13 0 22.5 9.5t9.5 22.5zm25-800v448q0 26-19 45t-45 19h-448q-26 0-45-19t-19-45 19-45l138-138q-148-137-349-137-134 0-250 65t-186 179q-11 17-53 117-8 23-30 23h-199q-13 0-22.5-9.5t-9.5-22.5v-7q65-268 270-434.5t480-166.5q146 0 284 55.5t245 156.5l130-129q19-19 45-19t45 19 19 45z'\r\n\t\t\t\t},\r\n\t\t\t\tdownload: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1600',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1344 1344q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm256 0q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm128-224v320q0 40-28 68t-68 28h-1472q-40 0-68-28t-28-68v-320q0-40 28-68t68-28h465l135 136q58 56 136 56t136-56l136-136h464q40 0 68 28t28 68zm-325-569q17 41-14 70l-448 448q-18 19-45 19t-45-19l-448-448q-31-29-14-70 17-39 59-39h256v-448q0-26 19-45t45-19h256q26 0 45 19t19 45v448h256q42 0 59 39z'\r\n\t\t\t\t},\r\n\t\t\t\tdownloadCsv: {\r\n\t\t\t\t\tviewBox: '0 0 14 14.7',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M12.2,5.2h-0.4V4h-0.6v1.2H1.7V0.6h9.1V0H1.7C1.4,0,1.2,0.3,1.2,0.6v4.7H0.8C0.4,5.2,0,5.6,0,6.1v4.3c0,0.5,0.4,0.8,0.8,0.8 h0.4v2.9c0,0.3,0.3,0.6,0.6,0.6h9.5c0.3,0,0.6-0.3,0.6-0.6v-2.9h0.4c0.5,0,0.8-0.4,0.8-0.8V6.1C13,5.6,12.6,5.2,12.2,5.2z M6.1,8.4 C5.4,8.1,4.9,7.7,4.9,7.1c0-0.7,0.6-1.3,1.6-1.3C7,5.8,7.4,5.9,7.6,6L7.4,6.8C7.2,6.7,6.9,6.6,6.5,6.6C6.1,6.6,5.9,6.8,5.9,7 c0,0.3,0.2,0.4,0.8,0.6c0.8,0.3,1.1,0.7,1.1,1.3c0,0.7-0.6,1.3-1.7,1.3c-0.5,0-1-0.1-1.2-0.3L5,9.2c0.3,0.1,0.7,0.3,1.1,0.3 c0.4,0,0.7-0.2,0.7-0.5C6.8,8.7,6.6,8.6,6.1,8.4z M1,8.1c0-1.5,1-2.3,2.3-2.3c0.5,0,0.9,0.1,1.1,0.2L4.2,6.8C4,6.7,3.7,6.6,3.4,6.6 C2.6,6.6,2,7.1,2,8c0,0.9,0.5,1.4,1.4,1.4c0.3,0,0.6-0.1,0.8-0.1L4.4,10c-0.2,0.1-0.6,0.2-1.1,0.2C1.8,10.2,1,9.3,1,8.1z M11.2,13.9 H1.7v-2.8h9.5V13.9z M10.6,10.2H9.5L8.1,5.9h1.1l0.5,1.8c0.1,0.5,0.3,1,0.4,1.5h0c0.1-0.5,0.2-1,0.4-1.5L11,5.9h1L10.6,10.2z M11.7,1V0.1L14,2l-2.3,1.9V2.9c-1.6-0.1-2.5,0.6-3.3,1.4C8.4,2.5,10,1,11.7,1z'\r\n\t\t\t\t},\r\n\t\t\t\tsubmit: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1764 11q33 24 27 64l-256 1536q-5 29-32 45-14 8-31 8-11 0-24-5l-453-185-242 295q-18 23-49 23-13 0-22-4-19-7-30.5-23.5t-11.5-36.5v-349l864-1059-1069 925-395-162q-37-14-40-55-2-40 32-59l1664-960q15-9 32-9 20 0 36 11z'\r\n\t\t\t\t},\r\n\t\t\t\tplus: {\r\n\t\t\t\t\twidth: 10,\r\n\t\t\t\t\theight: 10,\r\n\t\t\t\t\tdata: 'M10.000,4.000 L6.000,4.000 L6.000,0.000 L4.000,0.000 L4.000,4.000 L0.000,4.000 L0.000,6.000 L4.000,6.000 L4.000,10.000 L6.000,10.000 L6.000,6.000 L10.000,6.000 L10.000,4.000 Z',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tpathStyles: {\r\n\t\t\t\t\t\t'fill-rule': 'evenodd'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcalendar:\r\n\t\t\t\t\tgetSvgImage(-117, 8, 16, 16, 'M-103,24h-12c-1,0-2-1-2-2V11c0-0.9,0.2-2,1-2h1v3h4V9h4v3h4V9h1c0.8,0,1,1.1,1,2v11 C-101,22.9-102.2,24-103,24z M-103,14h-12v8h12V14z M-105,11c-0.3,0-1-0.7-1-1V9c0-0.3,0.7-1,1-1s1,0.7,1,1v1 C-104,10.3-104.7,11-105,11z M-113,11c-0.3,0-1-0.7-1-1V9c0-0.3,0.7-1,1-1s1,0.7,1,1v1C-112,10.3-112.7,11-113,11z'),\r\n\t\t\t\tfilter:\r\n\t\t\t\t\tgetSvgImage(-117, 10, 16, 12, 'M-117,10l6,6v6l4-1v-5l6-6H-117z'),\r\n\t\t\t\tsort:\r\n\t\t\t\t\tgetSvgImage(-117, 10, 16, 12, 'M-109,21l-6-6h3V8h6v7h3L-109,21z'),\r\n\t\t\t\tlogo:\r\n\t\t\t\t\tgetSrcImage('logo.svg'),\r\n\t\t\t\tinfo:\r\n\t\t\t\t\tgetSvgImage(-297, 389, 16, 16, 'M-289,405c-4.4,0-8-3.6-8-8s3.6-8,8-8s8,3.6,8,8S-284.6,405-289,405z M-289,390.2c-3.7,0-6.8,3-6.8,6.8s3,6.8,6.8,6.8s6.8-3,6.8-6.8S-285.3,390.2-289,390.2z M-288.2,394c-0.1,0.1-0.5,0.1-0.6,0c-0.1-0.1-0.2-0.2-0.2-0.5c0-0.1,0.1-0.3,0.1-0.4c0.1-0.1,0.4-0.2,0.6-0.2c0.2,0,0.3,0.1,0.3,0.1c0.1,0.1,0.1,0.2,0.1,0.4C-287.9,393.7-288,393.9-288.2,394zM-288.4,396.2c-0.1,0.7-0.6,2.7-0.7,3.4c0,0.2,0,0.3,0.1,0.3c0.2,0,0.4-0.2,0.8-0.6c0,0,0,0,0,0c0,0.1,0,0.3,0,0.4c-0.6,0.8-1.4,1.2-1.7,1.2c-0.3,0-0.4-0.4-0.2-1.3c0.2-1,0.5-2.3,0.6-3.1c0-0.2,0-0.3-0.1-0.3c-0.1,0-0.4,0.1-0.7,0.4c0,0,0,0,0,0c0-0.1,0-0.3,0.1-0.3c0.5-0.5,1.3-1.1,1.7-1.1C-288.3,395.3-288.2,395.6-288.4,396.2z'),\r\n\t\t\t\talert:\r\n\t\t\t\t\tgetSvgImage(-297, 389, 16, 16, 'M-284,398v-4.5c0-2.5-1.8-4.5-5-4.5s-5,2-5,4.5v4.5l-3,5h5c0.3,1.2,1.6,2,3,2s2.7-0.8,3-2h5L-284,398zM-289,404c-0.7,0-1.8-0.4-2-1h4C-287.2,403.6-288.3,404-289,404z M-295,402l2-3.5v-4c0-2.4,1.5-4.5,4-4.5s4,2.1,4,4.5v4l2,3.5H-295z'),\r\n\t\t\t\ticoArrowDown:\r\n\t\t\t\t\tgetSvgImage(-120, 12, 10, 7, 'M-110,13.5l-1-1.5l-4,4.5l-4-4.5l-1,1.5l5,5.5L-110,13.5z'),\r\n\t\t\t\tinvoices: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M256 1312v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm-1536-1152v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5z'\r\n\t\t\t\t},\r\n\t\t\t\tvisibility:\r\n\t\t\t\t\tgetSvgImage(-0, 0, 16, 12, 'M15.9,5.4C15.8,5.3,15.2,3.8,13,2c-1.1-0.9-3.5-2-5-2C6.5,0,4.1,1.1,3,2C0.8,3.8,0.2,5.3,0.1,5.4 C0,5.7,0,6.1,0.1,6.4C0.2,6.5,0.8,8.2,3,10c1.1,0.9,3.5,2,5,2c1.5,0,3.9-1.1,5-2c2.2-1.8,2.8-3.5,2.9-3.6C16,6.1,16,5.7,15.9,5.4z M8,9C6.4,9,5,7.8,5,6c0-1.8,1.5-3,3-3c1.5,0,3,1.2,3,3C11,7.8,9.5,9,8,9z M8,4C7.1,4,6,5,6,6c0,1,1.1,2,2,2c0.9,0,2-1,2-2 C10,5,8.9,4,8,4z'),\r\n\t\t\t\tpurchaseOrders: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1344 704q0-26-19-45t-45-19-45 19l-147 146v-293q0-26-19-45t-45-19-45 19-19 45v293l-147-146q-19-19-45-19t-45 19-19 45 19 45l256 256q19 19 45 19t45-19l256-256q19-19 19-45zm-640 832q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm896 0q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm128-1088v512q0 24-16 42.5t-41 21.5l-1044 122q1 7 4.5 21.5t6 26.5 2.5 22q0 16-24 64h920q26 0 45 19t19 45-19 45-45 19h-1024q-26 0-45-19t-19-45q0-14 11-39.5t29.5-59.5 20.5-38l-177-823h-204q-26 0-45-19t-19-45 19-45 45-19h256q16 0 28.5 6.5t20 15.5 13 24.5 7.5 26.5 5.5 29.5 4.5 25.5h1201q26 0 45 19t19 45z'\r\n\t\t\t\t},\r\n\t\t\t\tusers: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M529 896q-162 5-265 128h-134q-82 0-138-40.5t-56-118.5q0-353 124-353 6 0 43.5 21t97.5 42.5 119 21.5q67 0 133-23-5 37-5 66 0 139 81 256zm1071 637q0 120-73 189.5t-194 69.5h-874q-121 0-194-69.5t-73-189.5q0-53 3.5-103.5t14-109 26.5-108.5 43-97.5 62-81 85.5-53.5 111.5-20q10 0 43 21.5t73 48 107 48 135 21.5 135-21.5 107-48 73-48 43-21.5q61 0 111.5 20t85.5 53.5 62 81 43 97.5 26.5 108.5 14 109 3.5 103.5zm-1024-1277q0 106-75 181t-181 75-181-75-75-181 75-181 181-75 181 75 75 181zm704 384q0 159-112.5 271.5t-271.5 112.5-271.5-112.5-112.5-271.5 112.5-271.5 271.5-112.5 271.5 112.5 112.5 271.5zm576 225q0 78-56 118.5t-138 40.5h-134q-103-123-265-128 81-117 81-256 0-29-5-66 66 23 133 23 59 0 119-21.5t97.5-42.5 43.5-21q124 0 124 353zm-128-609q0 106-75 181t-181 75-181-75-75-181 75-181 181-75 181 75 75 181z'\r\n\t\t\t\t},\r\n\t\t\t\tcompanies:\r\n\t\t\t\t\tgetSvgImage(-298, 389, 15, 16, 'M-290.5,389l7.5,6h-15L-290.5,389z M-295,395v8h-1v-8H-295z M-292,395v8h-1v-8H-292z M-288,395v8h-1v-8H-288z M-285,395v8h-1v-8H-285z M-284,403l1,2h-15l1-2'),\r\n\t\t\t\tindividual:\r\n\t\t\t\t\tgetSvgImage(-298, 389, 15, 16, 'M-285,405h-11c-0.9,0-2-1-2-2v-8.5c0-1,1.1-2,2-2h11c1,0.1,2,1,2,2v8.5C-283,403.9-284,405-285,405z M-288.5,392.5c0-2.4-1.5-2-1.5-2h-1c0,0-1.5-0.2-1.5,2h-1.5c0,0,0-0.9,0-1c0-2,2-2.5,2-2.5h3c0,0,2,0.6,2,2.5c0,0.1,0,1,0,1H-288.5z M-296,393.5h11c0.6,0,1,0.4,1,1v8.4c0,0.6-0.4,1.1-1,1.1h-11c-0.6,0-1-0.5-1-1.1v-8.4C-297,393.9-296.5,393.5-296,393.5z'),\r\n\t\t\t\tsupport:\r\n\t\t\t\t\tgetSvgImage(-297, 389, 16, 16, 'M-283,401h-5l-5,4v-4h-2c-0.9,0-2-1-2-2v-8c0-1.4,1-2,2-2h12c0.9,0,2,1,2,2c0,1,0,8,0,8C-281,400-282,401-283,401z M-282,391c0-0.6-0.4-1-1-1h-12c-0.6,0-1,0.4-1,1v8c0,0.6,0.4,1,1,1h3v3l3-3h6c0.6,0,1-0.4,1-1V391z'),\r\n\t\t\t\tfaq:\r\n\t\t\t\t\tgetSvgImage(-297, 389, 16, 16, 'M-289,405c-4.4,0-8-3.6-8-8c0-4.4,3.6-8,8-8c4.4,0,8,3.6,8,8C-281,401.4-284.6,405-289,405z M-289,390.2c-3.7,0-6.8,3-6.8,6.8c0,3.7,3,6.8,6.8,6.8c3.7,0,6.8-3,6.8-6.8C-282.2,393.3-285.3,390.2-289,390.2z M-287,396.4c-0.1,0.2-0.3,0.3-0.5,0.5c-0.2,0.2-0.3,0.3-0.5,0.5c-0.2,0.2-0.3,0.3-0.4,0.5c-0.1,0.2-0.1,0.4-0.1,0.7v0.4h-1v-0.8c0-0.3,0.1-0.6,0.3-0.9c0.2-0.2,0.4-0.5,0.6-0.7c0.2-0.2,0.5-0.5,0.7-0.7c0.2-0.2,0.3-0.5,0.3-0.8c0-0.4-0.1-0.7-0.3-0.9c-0.2-0.2-0.6-0.3-1-0.3c-0.5,0-0.8,0.1-1.1,0.5c-0.3,0.3-0.4,0.7-0.4,1.2h-1c0-0.5,0.1-0.7,0.2-1c0.1-0.3,0.3-0.5,0.5-0.8c0.2-0.2,0.5-0.4,0.8-0.5c0.3-0.1,0.7-0.2,1-0.2c0.4,0,0.8,0.1,1.1,0.2c0.3,0.1,0.6,0.3,0.8,0.5c0.2,0.2,0.3,0.4,0.4,0.7c0.1,0.3,0.1,0.5,0.1,0.8c0,0.3-0.1,0.5-0.2,0.7C-286.7,396.1-286.9,396.3-287,396.4z M-288.5,401h-1v-1h1V401z'),\r\n\t\t\t\tsearch: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z'\r\n\t\t\t\t},\r\n\t\t\t\tverticalOptions:\r\n\t\t\t\t\tgetSvgImage(0, 0, 3, 15, 'M1.5,3C2.3,3,3,2.3,3,1.5C3,0.7,2.3,0,1.5,0C0.7,0,0,0.7,0,1.5 C0,2.3,0.7,3,1.5,3z M1.5,6C0.7,6,0,6.7,0,7.5C0,8.3,0.7,9,1.5,9C2.3,9,3,8.3,3,7.5C3,6.7,2.3,6,1.5,6z M1.5,12 C0.7,12,0,12.7,0,13.5C0,14.3,0.7,15,1.5,15C2.3,15,3,14.3,3,13.5C3,12.7,2.3,12,1.5,12z'),\r\n\t\t\t\tremoveOptionalItem:\r\n\t\t\t\t\tgetSvgImage(0, 0, 16, 16, 'M8,16c-4.4,0-8-3.6-8-8s3.6-8,8-8c4.4,0,8,3.6,8,8S12.4,16,8,16z M8,2C4.3,2,2,4.3,2,8c0,3.7,2.3,6,6,6c3.7,0,6-2.3,6-6C14,4.3,11.7,2,8,2z M10,11L8,9l-2,2l-1-1l2-2L5,6l1-1l2,2l2-2l1,1L9,8l2,2 L10,11z'),\r\n\t\t\t\tflip: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1696 384q40 0 68 28t28 68v1216q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-288h-544q-40 0-68-28t-28-68v-672q0-40 20-88t48-76l408-408q28-28 76-48t88-20h416q40 0 68 28t28 68v328q68-40 128-40h416zm-544 213l-299 299h299v-299zm-640-384l-299 299h299v-299zm196 647l316-316v-416h-384v416q0 40-28 68t-68 28h-416v640h512v-256q0-40 20-88t48-76zm956 804v-1152h-384v416q0 40-28 68t-68 28h-416v640h896z'\r\n\t\t\t\t},\r\n\t\t\t\tpaid: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M704 1152h384v-96h-128v-448h-114l-148 137 77 80q42-37 55-57h2v288h-128v96zm512-256q0 70-21 142t-59.5 134-101.5 101-138 39-138-39-101.5-101-59.5-134-21-142 21-142 59.5-134 101.5-101 138-39 138 39 101.5 101 59.5 134 21 142zm512 256v-512q-106 0-181-75t-75-181h-1152q0 106-75 181t-181 75v512q106 0 181 75t75 181h1152q0-106 75-181t181-75zm128-832v1152q0 26-19 45t-45 19h-1792q-26 0-45-19t-19-45v-1152q0-26 19-45t45-19h1792q26 0 45 19t19 45z'\r\n\t\t\t\t},\r\n\t\t\t\tnotPaid: {\r\n\t\t\t\t\tviewBox: '0 0 19.456 13.915',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M18.961,8.369c-0.33-0.565-0.777-1.014-1.346-1.343c-0.564-0.331-1.184-0.496-1.852-0.496c-0.669,0-1.288,0.165-1.853,0.496c-0.566,0.329-1.014,0.777-1.344,1.343c-0.331,0.565-0.496,1.184-0.496,1.854s0.165,1.288,0.496,1.854c0.33,0.565,0.778,1.015,1.344,1.343c0.565,0.331,1.184,0.496,1.853,0.496c0.668,0,1.288-0.165,1.852-0.496c0.566-0.328,1.016-0.776,1.346-1.343s0.494-1.184,0.494-1.854S19.292,8.934,18.961,8.369z M18.077,11.423c0.076,0.076,0.115,0.169,0.115,0.277c0,0.109-0.039,0.201-0.115,0.278l-0.555,0.556c-0.078,0.076-0.172,0.114-0.279,0.114s-0.201-0.038-0.277-0.114l-1.203-1.202l-1.202,1.202c-0.076,0.076-0.168,0.114-0.277,0.114c-0.109,0-0.201-0.038-0.278-0.114l-0.556-0.556c-0.077-0.077-0.114-0.169-0.114-0.278c0-0.108,0.038-0.201,0.114-0.277l1.202-1.202L13.45,9.019c-0.077-0.075-0.114-0.169-0.114-0.277c0-0.109,0.038-0.202,0.114-0.278l0.556-0.556c0.077-0.076,0.168-0.114,0.278-0.114c0.11,0,0.202,0.038,0.277,0.114l1.202,1.202l1.203-1.202c0.076-0.076,0.17-0.114,0.277-0.114s0.201,0.038,0.279,0.114l0.555,0.556c0.076,0.077,0.115,0.169,0.115,0.278c0,0.108-0.039,0.202-0.115,0.277l-1.201,1.202L18.077,11.423zM11.032,10.278H3.428c0-0.63-0.223-1.168-0.669-1.615C2.313,8.217,1.773,7.994,1.143,7.994V3.426c0.631,0,1.17-0.223,1.616-0.669c0.446-0.446,0.669-0.984,0.669-1.615h10.285c0,0.631,0.223,1.169,0.67,1.615c0.446,0.446,0.985,0.669,1.616,0.669V5.51c0.397,0.02,0.777,0.092,1.143,0.204V0.571c0-0.155-0.057-0.289-0.17-0.401C16.859,0.057,16.725,0,16.57,0H0.571C0.417,0,0.283,0.057,0.169,0.17C0.057,0.283,0,0.417,0,0.571v10.278c0,0.155,0.057,0.289,0.169,0.401c0.113,0.113,0.247,0.169,0.402,0.169h10.627C11.103,11.053,11.037,10.674,11.032,10.278zM11.24,4.443c-0.125-0.428-0.302-0.827-0.531-1.196c-0.229-0.369-0.531-0.669-0.906-0.901S9.018,1.999,8.571,1.999c-0.446,0-0.857,0.116-1.232,0.348S6.662,2.879,6.433,3.248C6.204,3.617,6.026,4.015,5.901,4.443S5.714,5.294,5.714,5.71c0,0.417,0.063,0.839,0.188,1.267s0.302,0.827,0.531,1.195c0.229,0.369,0.531,0.669,0.906,0.901s0.786,0.348,1.232,0.348c0.447,0,0.857-0.116,1.232-0.348s0.677-0.532,0.906-0.901c0.229-0.369,0.406-0.767,0.531-1.195s0.188-0.851,0.188-1.267C11.428,5.294,11.365,4.872,11.24,4.443z M10.285,7.994H6.857V7.138H8v-2.57H7.981C7.904,4.687,7.741,4.856,7.491,5.077L6.803,4.363l1.321-1.222h1.018v3.997h1.143V7.994z'\r\n\t\t\t\t},\r\n\t\t\t\tshipped: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M640 1408q0-52-38-90t-90-38-90 38-38 90 38 90 90 38 90-38 38-90zm-384-512h384v-256h-158q-13 0-22 9l-195 195q-9 9-9 22v30zm1280 512q0-52-38-90t-90-38-90 38-38 90 38 90 90 38 90-38 38-90zm256-1088v1024q0 15-4 26.5t-13.5 18.5-16.5 11.5-23.5 6-22.5 2-25.5 0-22.5-.5q0 106-75 181t-181 75-181-75-75-181h-384q0 106-75 181t-181 75-181-75-75-181h-64q-3 0-22.5.5t-25.5 0-22.5-2-23.5-6-16.5-11.5-13.5-18.5-4-26.5q0-26 19-45t45-19v-320q0-8-.5-35t0-38 2.5-34.5 6.5-37 14-30.5 22.5-30l198-198q19-19 50.5-32t58.5-13h160v-192q0-26 19-45t45-19h1024q26 0 45 19t19 45z'\r\n\t\t\t\t},\r\n\t\t\t\tnotShipped: {\r\n\t\t\t\t\tviewBox: '0 0 14.038 14.655',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M13.884,0.155C13.779,0.052,13.657,0,13.517,0H5.199c-0.14,0-0.262,0.053-0.365,0.154C4.731,0.258,4.68,0.379,4.68,0.52\tV2.08H3.379c-0.146,0-0.305,0.035-0.475,0.104c-0.17,0.071-0.307,0.157-0.41,0.261L0.886,4.053c-0.07,0.069-0.132,0.15-0.183,0.244\tC0.652,4.39,0.614,4.471,0.589,4.544C0.564,4.617,0.547,4.718,0.536,4.845C0.525,4.972,0.519,5.066,0.515,5.124\tc-0.002,0.061-0.002,0.163,0,0.311C0.519,5.581,0.52,5.676,0.52,5.719V8.32c-0.141,0-0.263,0.051-0.366,0.153\tC0.051,8.576,0,8.698,0,8.839c0,0.08,0.011,0.15,0.032,0.214c0.023,0.063,0.058,0.113,0.11,0.149\tC0.193,9.24,0.238,9.272,0.276,9.297C0.314,9.32,0.378,9.338,0.467,9.346c0.09,0.009,0.15,0.014,0.183,0.017\tc0.033,0.003,0.102,0.003,0.207,0s0.167-0.004,0.184-0.004H1.56c0,0.574,0.204,1.063,0.61,1.471\tc0.084,0.085,0.174,0.154,0.266,0.223c-0.013-0.147-0.044-0.289-0.044-0.439c0-0.52,0.103-1.011,0.253-1.479\tC2.662,9.06,2.678,8.986,2.712,8.918c0.691-1.861,2.469-3.195,4.572-3.195c2.108,0,3.892,1.343,4.577,3.214\tc0.021,0.043,0.027,0.088,0.041,0.133c0.164,0.488,0.273,1.001,0.273,1.545c0,0.148-0.031,0.288-0.045,0.435\tc0.09-0.065,0.178-0.134,0.26-0.215c0.404-0.406,0.606-0.896,0.606-1.472c0.019,0,0.076,0.001,0.185,0.004\tc0.104,0.003,0.176,0.003,0.207,0c0.033-0.003,0.094-0.008,0.184-0.017c0.088-0.008,0.152-0.024,0.189-0.049\tc0.039-0.023,0.084-0.058,0.135-0.093c0.051-0.038,0.088-0.09,0.109-0.151c0.021-0.063,0.032-0.134,0.032-0.214v-8.32\tC14.038,0.379,13.985,0.258,13.884,0.155z M4.679,5.2H1.558V4.956c0-0.069,0.025-0.13,0.073-0.178l1.584-1.584\tc0.049-0.05,0.109-0.073,0.179-0.073h1.284L4.679,5.2L4.679,5.2z M10.782,8.58c-0.356-0.619-0.85-1.109-1.473-1.473\tC8.692,6.745,8.014,6.565,7.282,6.565c-0.733,0-1.413,0.181-2.03,0.543C4.631,7.469,4.141,7.961,3.779,8.58\tc-0.362,0.618-0.544,1.298-0.544,2.028c0,0.736,0.183,1.412,0.544,2.031c0.361,0.619,0.852,1.113,1.473,1.473\tc0.617,0.361,1.297,0.543,2.03,0.543c0.732,0,1.41-0.182,2.027-0.543c0.623-0.357,1.113-0.854,1.473-1.473\tc0.363-0.619,0.545-1.295,0.545-2.031C11.327,9.878,11.145,9.198,10.782,8.58z M9.813,11.928c0.084,0.084,0.127,0.186,0.127,0.305\ts-0.043,0.223-0.127,0.307l-0.604,0.605C9.124,13.229,9.02,13.27,8.901,13.27s-0.221-0.041-0.305-0.125L7.28,11.827l-1.316,1.316\tc-0.083,0.084-0.185,0.125-0.304,0.125c-0.119,0-0.221-0.041-0.305-0.125l-0.609-0.605c-0.084-0.085-0.124-0.188-0.124-0.307\ts0.04-0.221,0.124-0.305l1.317-1.318L4.746,9.296C4.662,9.212,4.622,9.109,4.622,8.99c0-0.117,0.04-0.223,0.124-0.305l0.609-0.607\tC5.439,7.993,5.541,7.95,5.66,7.95c0.119,0,0.221,0.043,0.304,0.127L7.28,9.392l1.317-1.314C8.681,7.993,8.783,7.95,8.902,7.95\ts0.221,0.043,0.305,0.127l0.607,0.607C9.898,8.767,9.941,8.872,9.941,8.99c0,0.119-0.043,0.223-0.127,0.307l-1.316,1.313\tL9.813,11.928z'\r\n\t\t\t\t},\r\n\t\t\t\tdelivered: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M640 1408q0-52-38-90t-90-38-90 38-38 90 38 90 90 38 90-38 38-90zm-384-512h384v-256h-158q-13 0-22 9l-195 195q-9 9-9 22v30zm1280 512q0-52-38-90t-90-38-90 38-38 90 38 90 90 38 90-38 38-90zm256-1088v1024q0 15-4 26.5t-13.5 18.5-16.5 11.5-23.5 6-22.5 2-25.5 0-22.5-.5q0 106-75 181t-181 75-181-75-75-181h-384q0 106-75 181t-181 75-181-75-75-181h-64q-3 0-22.5.5t-25.5 0-22.5-2-23.5-6-16.5-11.5-13.5-18.5-4-26.5q0-26 19-45t45-19v-320q0-8-.5-35t0-38 2.5-34.5 6.5-37 14-30.5 22.5-30l198-198q19-19 50.5-32t58.5-13h160v-192q0-26 19-45t45-19h1024q26 0 45 19t19 45z'\r\n\t\t\t\t},\r\n\t\t\t\tnotDelivered: {\r\n\t\t\t\t\tviewBox: '0 0 14.038 14.655',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M13.884,0.155C13.779,0.052,13.657,0,13.517,0H5.199c-0.14,0-0.262,0.053-0.365,0.154C4.731,0.258,4.68,0.379,4.68,0.52\tV2.08H3.379c-0.146,0-0.305,0.035-0.475,0.104c-0.17,0.071-0.307,0.157-0.41,0.261L0.886,4.053c-0.07,0.069-0.132,0.15-0.183,0.244\tC0.652,4.39,0.614,4.471,0.589,4.544C0.564,4.617,0.547,4.718,0.536,4.845C0.525,4.972,0.519,5.066,0.515,5.124\tc-0.002,0.061-0.002,0.163,0,0.311C0.519,5.581,0.52,5.676,0.52,5.719V8.32c-0.141,0-0.263,0.051-0.366,0.153\tC0.051,8.576,0,8.698,0,8.839c0,0.08,0.011,0.15,0.032,0.214c0.023,0.063,0.058,0.113,0.11,0.149\tC0.193,9.24,0.238,9.272,0.276,9.297C0.314,9.32,0.378,9.338,0.467,9.346c0.09,0.009,0.15,0.014,0.183,0.017\tc0.033,0.003,0.102,0.003,0.207,0s0.167-0.004,0.184-0.004H1.56c0,0.574,0.204,1.063,0.61,1.471\tc0.084,0.085,0.174,0.154,0.266,0.223c-0.013-0.147-0.044-0.289-0.044-0.439c0-0.52,0.103-1.011,0.253-1.479\tC2.662,9.06,2.678,8.986,2.712,8.918c0.691-1.861,2.469-3.195,4.572-3.195c2.108,0,3.892,1.343,4.577,3.214\tc0.021,0.043,0.027,0.088,0.041,0.133c0.164,0.488,0.273,1.001,0.273,1.545c0,0.148-0.031,0.288-0.045,0.435\tc0.09-0.065,0.178-0.134,0.26-0.215c0.404-0.406,0.606-0.896,0.606-1.472c0.019,0,0.076,0.001,0.185,0.004\tc0.104,0.003,0.176,0.003,0.207,0c0.033-0.003,0.094-0.008,0.184-0.017c0.088-0.008,0.152-0.024,0.189-0.049\tc0.039-0.023,0.084-0.058,0.135-0.093c0.051-0.038,0.088-0.09,0.109-0.151c0.021-0.063,0.032-0.134,0.032-0.214v-8.32\tC14.038,0.379,13.985,0.258,13.884,0.155z M4.679,5.2H1.558V4.956c0-0.069,0.025-0.13,0.073-0.178l1.584-1.584\tc0.049-0.05,0.109-0.073,0.179-0.073h1.284L4.679,5.2L4.679,5.2z M10.782,8.58c-0.356-0.619-0.85-1.109-1.473-1.473\tC8.692,6.745,8.014,6.565,7.282,6.565c-0.733,0-1.413,0.181-2.03,0.543C4.631,7.469,4.141,7.961,3.779,8.58\tc-0.362,0.618-0.544,1.298-0.544,2.028c0,0.736,0.183,1.412,0.544,2.031c0.361,0.619,0.852,1.113,1.473,1.473\tc0.617,0.361,1.297,0.543,2.03,0.543c0.732,0,1.41-0.182,2.027-0.543c0.623-0.357,1.113-0.854,1.473-1.473\tc0.363-0.619,0.545-1.295,0.545-2.031C11.327,9.878,11.145,9.198,10.782,8.58z M9.813,11.928c0.084,0.084,0.127,0.186,0.127,0.305\ts-0.043,0.223-0.127,0.307l-0.604,0.605C9.124,13.229,9.02,13.27,8.901,13.27s-0.221-0.041-0.305-0.125L7.28,11.827l-1.316,1.316\tc-0.083,0.084-0.185,0.125-0.304,0.125c-0.119,0-0.221-0.041-0.305-0.125l-0.609-0.605c-0.084-0.085-0.124-0.188-0.124-0.307\ts0.04-0.221,0.124-0.305l1.317-1.318L4.746,9.296C4.662,9.212,4.622,9.109,4.622,8.99c0-0.117,0.04-0.223,0.124-0.305l0.609-0.607\tC5.439,7.993,5.541,7.95,5.66,7.95c0.119,0,0.221,0.043,0.304,0.127L7.28,9.392l1.317-1.314C8.681,7.993,8.783,7.95,8.902,7.95\ts0.221,0.043,0.305,0.127l0.607,0.607C9.898,8.767,9.941,8.872,9.941,8.99c0,0.119-0.043,0.223-0.127,0.307l-1.316,1.313\tL9.813,11.928z'\r\n\t\t\t\t},\r\n\t\t\t\tdispute: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M320 256q0 72-64 110v1266q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-1266q-64-38-64-110 0-53 37.5-90.5t90.5-37.5 90.5 37.5 37.5 90.5zm1472 64v763q0 25-12.5 38.5t-39.5 27.5q-215 116-369 116-61 0-123.5-22t-108.5-48-115.5-48-142.5-22q-192 0-464 146-17 9-33 9-26 0-45-19t-19-45v-742q0-32 31-55 21-14 79-43 236-120 421-120 107 0 200 29t219 88q38 19 88 19 54 0 117.5-21t110-47 88-47 54.5-21q26 0 45 19t19 45z'\r\n\t\t\t\t},\r\n\t\t\t\tnotDispute: {\r\n\t\t\t\t\tviewBox: '0 0 16 16',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M11.34899,7.929c-0.36,-0.62 -0.85,-1.11 -1.473,-1.472c-0.616,-0.363 -1.294,-0.543 -2.027,-0.543s-1.413,0.18 -2.03,0.543c-0.62,0.36 -1.11,0.853 -1.473,1.472s-0.544,1.297 -0.544,2.03c0,0.735 0.183,1.41 0.544,2.03s0.852,1.113 1.473,1.473c0.617,0.36 1.297,0.543 2.03,0.543s1.41,-0.182 2.028,-0.543c0.624,-0.36 1.114,-0.854 1.474,-1.473c0.363,-0.62 0.545,-1.295 0.545,-2.03c0,-0.733 -0.183,-1.41 -0.546,-2.03l-0.001,0zm-0.969,3.348c0.085,0.084 0.128,0.186 0.128,0.305s-0.043,0.22 -0.127,0.305l-0.607,0.607c-0.084,0.084 -0.186,0.125 -0.305,0.125s-0.22,-0.04 -0.305,-0.125l-1.319,-1.317l-1.315,1.316c-0.083,0.084 -0.185,0.125 -0.304,0.125s-0.22,-0.04 -0.304,-0.124l-0.61,-0.607c-0.083,-0.085 -0.123,-0.187 -0.123,-0.306s0.04,-0.22 0.124,-0.305l1.317,-1.32l-1.317,-1.313c-0.084,-0.084 -0.124,-0.186 -0.124,-0.305s0.04,-0.223 0.124,-0.305l0.61,-0.608c0.083,-0.085 0.185,-0.128 0.304,-0.128s0.222,0.043 0.305,0.127l1.316,1.314l1.318,-1.315c0.084,-0.085 0.186,-0.128 0.305,-0.128s0.22,0.043 0.305,0.127l0.607,0.607c0.084,0.082 0.127,0.186 0.127,0.305s-0.043,0.22 -0.127,0.305l-1.316,1.314l1.315,1.32l-0.002,0.004zm-8.126,-10.15c0,0.422 -0.188,0.746 -0.564,0.968l0,11.155c0,0.074 -0.027,0.142 -0.083,0.197c-0.054,0.056 -0.12,0.083 -0.197,0.083l-0.564,0c-0.077,0 -0.144,-0.027 -0.2,-0.083c-0.056,-0.056 -0.082,-0.123 -0.082,-0.197l0,-11.155c-0.376,-0.223 -0.564,-0.546 -0.564,-0.968c0,-0.312 0.11,-0.578 0.33,-0.797c0.22,-0.22 0.486,-0.33 0.798,-0.33c0.31,0 0.577,0.11 0.797,0.33c0.22,0.22 0.328,0.485 0.328,0.797l0.001,0zm12.97,0.563l0,6.722c0,0.146 -0.037,0.26 -0.11,0.338c-0.073,0.08 -0.19,0.162 -0.35,0.245c-0.756,0.408 -1.44,0.678 -2.067,0.84l0.002,-0.007c0,-2.678 -2.17,-4.85 -4.85,-4.85c-2.678,0 -4.85,2.172 -4.85,4.85c0,0.092 0.022,0.176 0.027,0.265c-0.07,0.027 -0.14,0.057 -0.208,0.057c-0.153,0 -0.285,-0.057 -0.396,-0.167c-0.112,-0.113 -0.168,-0.244 -0.168,-0.398l0,-6.536c0,-0.187 0.09,-0.348 0.274,-0.484c0.123,-0.083 0.354,-0.208 0.696,-0.38c1.385,-0.704 2.623,-1.056 3.708,-1.056c0.63,0 1.216,0.084 1.763,0.255c0.545,0.17 1.19,0.43 1.93,0.776c0.222,0.112 0.48,0.168 0.773,0.168c0.318,0 0.662,-0.062 1.036,-0.185c0.372,-0.124 0.694,-0.262 0.968,-0.415c0.274,-0.152 0.532,-0.29 0.774,-0.414c0.244,-0.124 0.405,-0.185 0.48,-0.185c0.153,0 0.286,0.055 0.397,0.166c0.11,0.113 0.168,0.245 0.168,0.397l0.003,-0.002z'\r\n\t\t\t\t},\r\n\t\t\t\tcancel: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1440 893q0-161-87-295l-754 753q137 89 297 89 111 0 211.5-43.5t173.5-116.5 116-174.5 43-212.5zm-999 299l755-754q-135-91-300-91-148 0-273 73t-198 199-73 274q0 162 89 299zm1223-299q0 157-61 300t-163.5 246-245 164-298.5 61-298.5-61-245-164-163.5-246-61-300 61-299.5 163.5-245.5 245-164 298.5-61 298.5 61 245 164 163.5 245.5 61 299.5z'\r\n\t\t\t\t},\r\n\t\t\t\tscheduled: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1024 544v448q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h224v-352q0-14 9-23t23-9h64q14 0 23 9t9 23zm416 352q0-148-73-273t-198-198-273-73-273 73-198 198-73 273 73 273 198 198 273 73 273-73 198-198 73-273zm224 0q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z'\r\n\t\t\t\t},\r\n\t\t\t\tnotScheduled: {\r\n\t\t\t\t\tviewBox: '0 0 16.225 16.607',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M15.68,10.532c-0.356-0.619-0.85-1.109-1.473-1.473c-0.617-0.362-1.295-0.543-2.026-0.543\tc-0.734,0-1.414,0.181-2.031,0.543c-0.621,0.361-1.11,0.854-1.473,1.473c-0.361,0.618-0.544,1.298-0.544,2.028\tc0,0.736,0.183,1.412,0.544,2.031s0.852,1.113,1.473,1.473c0.617,0.361,1.297,0.543,2.031,0.543c0.731,0,1.409-0.182,2.026-0.543\tc0.623-0.357,1.113-0.854,1.473-1.473c0.363-0.619,0.545-1.295,0.545-2.031C16.225,11.83,16.043,11.151,15.68,10.532z M14.711,13.88\tc0.084,0.084,0.127,0.186,0.127,0.305s-0.043,0.223-0.127,0.307l-0.604,0.605c-0.085,0.084-0.188,0.125-0.308,0.125\ts-0.221-0.041-0.305-0.125l-1.316-1.317l-1.315,1.316c-0.084,0.084-0.186,0.125-0.305,0.125s-0.221-0.041-0.305-0.125L9.644,14.49\tc-0.084-0.085-0.123-0.188-0.123-0.307s0.039-0.221,0.123-0.305l1.317-1.318l-1.317-1.313c-0.084-0.084-0.123-0.188-0.123-0.307\tc0-0.117,0.039-0.223,0.123-0.305l0.609-0.607c0.084-0.084,0.186-0.127,0.305-0.127s0.221,0.043,0.305,0.127l1.315,1.314\tl1.317-1.314c0.084-0.084,0.186-0.127,0.305-0.127s0.221,0.043,0.305,0.127l0.607,0.607c0.084,0.082,0.127,0.188,0.127,0.305\tc0,0.119-0.043,0.223-0.127,0.307l-1.316,1.313L14.711,13.88z M7.269,13.678c-0.138,0.008-0.271,0.025-0.412,0.025\tc-1.244,0-2.391-0.305-3.441-0.918s-1.883-1.443-2.496-2.494C0.307,9.242,0,8.096,0,6.852C0,5.61,0.307,4.463,0.919,3.413\tc0.613-1.05,1.445-1.882,2.496-2.493C4.466,0.307,5.612,0,6.856,0s2.392,0.307,3.441,0.92c1.051,0.611,1.883,1.443,2.496,2.493\ts0.92,2.196,0.92,3.438c0,0.311-0.02,0.615-0.058,0.914c-0.47-0.146-0.96-0.246-1.478-0.246c-0.178,0-0.347,0.034-0.52,0.053\tc0.033-0.235,0.055-0.475,0.055-0.721c0-0.879-0.218-1.691-0.652-2.436c-0.434-0.742-1.023-1.332-1.768-1.766\tC8.55,2.216,7.737,1.999,6.856,1.999S5.163,2.216,4.419,2.651C3.675,3.084,3.086,3.674,2.651,4.416C2.218,5.16,2,5.973,2,6.852\tc0,0.881,0.218,1.693,0.651,2.436c0.435,0.744,1.023,1.333,1.768,1.768c0.744,0.434,1.557,0.65,2.438,0.65\tc0.125,0,0.246-0.015,0.368-0.023c-0.051,0.287-0.089,0.579-0.089,0.881C7.136,12.948,7.188,13.318,7.269,13.678z M7.999,7.709\tc0,0.083-0.026,0.151-0.08,0.205c-0.053,0.053-0.121,0.08-0.205,0.08H4.856c-0.083,0-0.151-0.027-0.205-0.08\tc-0.053-0.054-0.08-0.122-0.08-0.205V7.138c0-0.083,0.027-0.151,0.08-0.205c0.054-0.054,0.122-0.081,0.205-0.081h2v-3.14\tc0-0.083,0.027-0.151,0.08-0.206c0.055-0.053,0.123-0.08,0.206-0.08h0.571c0.084,0,0.152,0.027,0.205,0.08\tc0.054,0.055,0.08,0.123,0.08,0.206V7.709z'\r\n\t\t\t\t},\r\n\t\t\t\treject: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M320 576q0 26-19 45t-45 19q-27 0-45.5-19t-18.5-45q0-27 18.5-45.5t45.5-18.5q26 0 45 18.5t19 45.5zm160 512v-640q0-26-19-45t-45-19h-288q-26 0-45 19t-19 45v640q0 26 19 45t45 19h288q26 0 45-19t19-45zm1129-149q55 61 55 149-1 78-57.5 135t-134.5 57h-277q4 14 8 24t11 22 10 18q18 37 27 57t19 58.5 10 76.5q0 24-.5 39t-5 45-12 50-24 45-40 40.5-60 26-82.5 10.5q-26 0-45-19-20-20-34-50t-19.5-52-12.5-61q-9-42-13.5-60.5t-17.5-48.5-31-48q-33-33-101-120-49-64-101-121t-76-59q-25-2-43-20.5t-18-43.5v-641q0-26 19-44.5t45-19.5q35-1 158-44 77-26 120.5-39.5t121.5-29 144-15.5h129q133 2 197 78 58 69 49 181 39 37 54 94 17 61 0 117 46 61 43 137 0 32-15 76z'\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tviewBox: '0 0 26 26',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M2.552536,8.060472l5.125316,-4.758566l5.444544,5.05491l5.444544,-5.05491l5.125364,4.758566l-5.444545,5.054951l5.444545,5.054951l-5.125364,4.758611l-5.444544,-5.054953l-5.444544,5.054953l-5.125316,-4.758611l5.444499,-5.054951l-5.444499,-5.054951Z'\r\n\t\t\t\t},\r\n\t\t\t\tuploadFile: {\r\n\t\t\t\t\tviewBox: '0 0 26 26',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'm0.75,9.16529l8.41529,0l0,-8.41529l8.63249,0l0,8.41529l8.41529,0l0,8.63249l-8.41529,0l0,8.41529l-8.63249,0l0,-8.41529l-8.41529,0l0,-8.63249z'\r\n\t\t\t\t},\r\n\t\t\t\taccept: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1412,734q0-28-18-46l-91-90q-19-19-45-19t-45,19l-408,407-226-226q-19-19-45-19t-45,19l-91,90q-18,18-18,46,0,27,18,45l362,362q19,19,45,19,27,0,46-19l543-543q18-18,18-45zm252,162q0,209-103,385.5t-279.5,279.5-385.5,103-385.5-103-279.5-279.5-103-385.5,103-385.5,279.5-279.5,385.5-103,385.5,103,279.5,279.5,103,385.5z'\r\n\t\t\t\t},\r\n\t\t\t\tclose: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z'\r\n\r\n\t\t\t\t},\r\n\t\t\t\tclearFilter: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z'\r\n\r\n\t\t\t\t},\r\n\t\t\t\tissues: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M896 128q209 0 385.5 103t279.5 279.5 103 385.5-103 385.5-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103zm128 1247v-190q0-14-9-23.5t-22-9.5h-192q-13 0-23 10t-10 23v190q0 13 10 23t23 10h192q13 0 22-9.5t9-23.5zm-2-344l18-621q0-12-10-18-10-8-24-8h-220q-14 0-24 8-10 6-10 18l17 621q0 10 10 17.5t24 7.5h185q14 0 23.5-7.5t10.5-17.5z'\r\n\t\t\t\t},\r\n\t\t\t\tvalidationIssues: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M896 128q209 0 385.5 103t279.5 279.5 103 385.5-103 385.5-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103zm128 1247v-190q0-14-9-23.5t-22-9.5h-192q-13 0-23 10t-10 23v190q0 13 10 23t23 10h192q13 0 22-9.5t9-23.5zm-2-344l18-621q0-12-10-18-10-8-24-8h-220q-14 0-24 8-10 6-10 18l17 621q0 10 10 17.5t24 7.5h185q14 0 23.5-7.5t10.5-17.5z'\r\n\t\t\t\t},\r\n\t\t\t\thistory: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1664 896q0 156-61 298t-164 245-245 164-298 61q-172 0-327-72.5t-264-204.5q-7-10-6.5-22.5t8.5-20.5l137-138q10-9 25-9 16 2 23 12 73 95 179 147t225 52q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5q-98 0-188 35.5t-160 101.5l137 138q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l130 129q107-101 244.5-156.5t284.5-55.5q156 0 298 61t245 164 164 245 61 298zm-640-288v448q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h224v-352q0-14 9-23t23-9h64q14 0 23 9t9 23z'\r\n\t\t\t\t},\r\n\t\t\t\trelated: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1600',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z'\r\n\t\t\t\t},\r\n\t\t\t\tmarkAsInvoiced: {\r\n\t\t\t\t\tviewBox: '0 0 14.6 18.8',\r\n\t\t\t\t    preserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t    data: 'M10.41,0H2.1A2.05,2.05,0,0,0,0,2.1V16.71a2.05,2.05,0,0,0,2.1,2.1H12.51a2.05,2.05,0,0,0,2.1-2.1V4.2C13,2.5,12.11,1.6,10.41,0ZM9.9,1.7l3,3h-2.5a.47.47,0,0,1-.5-.5Zm3.1,15a.47.47,0,0,1-.5.5H2.1a.47.47,0,0,1-.5-.5V2.1a.47.47,0,0,1,.5-.5H8.4V4.2a2.05,2.05,0,0,0,2.1,2.1H13ZM2.84,6.59v-1H2.08V5.23A.42.42,0,0,1,2.19,5a.39.39,0,0,1,.31-.12h.34V4A2.27,2.27,0,0,1,3,3.22a1.71,1.71,0,0,1,.36-.61,1.74,1.74,0,0,1,.61-.42A2.16,2.16,0,0,1,4.78,2a2,2,0,0,1,.6.08,1.69,1.69,0,0,1,.48.23,1.77,1.77,0,0,1,.37.35,2.61,2.61,0,0,1,.28.43L6,3.45a.61.61,0,0,1-.29.08.46.46,0,0,1-.34-.15,1.52,1.52,0,0,0-.28-.24.57.57,0,0,0-.3-.08.56.56,0,0,0-.49.23,1.15,1.15,0,0,0-.16.66v.88H5.68v.48a.26.26,0,0,1,0,.12.34.34,0,0,1-.07.1l-.11.07-.14,0H4.13v.63A1,1,0,0,1,4,6.7a1.47,1.47,0,0,1-.25.37L4.16,7l.37,0h2V7.5a.48.48,0,0,1,0,.18.57.57,0,0,1-.11.17A.53.53,0,0,1,6.25,8,.51.51,0,0,1,6,8H2.16V7.26a1.21,1.21,0,0,0,.26-.08.82.82,0,0,0,.22-.13.63.63,0,0,0,.15-.2A.58.58,0,0,0,2.84,6.59Zm.88,5.77A4.53,4.53,0,1,0,8.25,7.83,4.52,4.52,0,0,0,3.72,12.36Zm6.83-2.55a.47.47,0,0,1,.58.07l.33.33a.42.42,0,0,1,.15.29.47.47,0,0,1-.14.36l-3.84,4a.45.45,0,0,1-.34.14.42.42,0,0,1-.35-.16l-1.9-2a.46.46,0,0,1,0-.67l.34-.34a.47.47,0,0,1,.67,0l0,0,1.24,1.33,3.2-3.32Z'\r\n\t\t\t\t},\r\n\t\t\t\tattachment: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1596 1385q0 117-79 196t-196 79q-135 0-235-100l-777-776q-113-115-113-271 0-159 110-270t269-111q158 0 273 113l605 606q10 10 10 22 0 16-30.5 46.5t-46.5 30.5q-13 0-23-10l-606-607q-79-77-181-77-106 0-179 75t-73 181q0 105 76 181l776 777q63 63 145 63 64 0 106-42t42-106q0-82-63-145l-581-581q-26-24-60-24-29 0-48 19t-19 48q0 32 25 59l410 410q10 10 10 22 0 16-31 47t-47 31q-12 0-22-10l-410-410q-63-61-63-149 0-82 57-139t139-57q88 0 149 63l581 581q100 98 100 235z'\r\n\t\t\t\t},\r\n\t\t\t\tupdated: {\r\n\t\t\t\t    viewBox: '0 0 14.6 13.6',\r\n\t\t\t\t    preserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t    data: 'M11,10h1.8v0.9c0,1.5-1.2,2.7-2.7,2.7H4.6c-1.5,0-2.7-1.2-2.7-2.7H0l2.7-2.7l2.7,2.7H3.7c0,0.5,0.4,0.9,0.9,0.9h5.5c0.5,0,0.9-0.4,0.9-0.9V10z M3.7,2.7c0-0.5,0.4-0.9,0.9-0.9h5.5c0.5,0,0.9,0.4,0.9,0.9v0H9.1l2.7,2.7l2.7-2.7h-1.8v0c0-1.5-1.2-2.7-2.7-2.7H4.6C3.1,0,1.9,1.2,1.9,2.7v0.9h1.8V2.7z M7.6,4.3c1.4,0,2.6,1.1,2.6,2.6c0,1.4-1.1,2.6-2.6,2.6C6.1,9.5,5,8.3,5,6.9C5,5.5,6.1,4.3,7.6,4.3z M8.8,5.5L7,7.3L6.3,6.6l0,0C6.2,6.5,6,6.5,5.9,6.6L5.7,6.8c0,0-0.1,0.1-0.1,0.2c0,0.1,0,0.1,0.1,0.2l1.1,1.2c0,0.1,0.1,0.1,0.2,0.1c0.1,0,0.1,0,0.2-0.1l2.2-2.3C9.4,6,9.5,5.9,9.5,5.9c0-0.1,0-0.1-0.1-0.2L9.2,5.5C9.1,5.4,9,5.4,8.8,5.5L8.8,5.5z'\r\n\t\t\t\t},\r\n\t\t\t\tgrn: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1151 960h316q-1-3-2.5-8t-2.5-8l-212-496h-708l-212 496q-1 2-2.5 8t-2.5 8h316l95 192h320zm513 30v482q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-482q0-62 25-123l238-552q10-25 36.5-42t52.5-17h832q26 0 52.5 17t36.5 42l238 552q25 61 25 123z'\r\n\t\t\t\t},\r\n\t\t\t\trelease: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M1728 576v256q0 26-19 45t-45 19h-64q-26 0-45-19t-19-45v-256q0-106-75-181t-181-75-181 75-75 181v192h96q40 0 68 28t28 68v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h672v-192q0-185 131.5-316.5t316.5-131.5 316.5 131.5 131.5 316.5z'\r\n\t\t\t\t},\r\n\t\t\t\tdelete: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1792',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M704 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm-544-992h448l-48-117q-7-9-17-11h-317q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z'\r\n\t\t\t\t},\r\n\t\t\t\tvoid: {\r\n\t\t\t\t\tviewBox: '0 0 14.6 18.8',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M10.4,0H2.1C0.9,0,0,0.9,0,2.1v14.6c0,1.2,0.9,2.1,2.1,2.1h10.4c1.2,0,2.1-0.9,2.1-2.1V4.2C13,2.5,12.1,1.6,10.4,0z M9.9,1.7l3,3h-2.5c-0.3,0-0.5-0.2-0.5-0.5V1.7z M13,16.7c0,0.3-0.2,0.5-0.5,0.5H2.1c-0.3,0-0.5-0.2-0.5-0.5V2.1c0-0.3,0.2-0.5,0.5-0.5h6.3v2.6c0,1.2,0.9,2.1,2.1,2.1H13V16.7z M10.6,8.9L8,11.5l2.6,2.6l-0.7,0.7l-2.6-2.6l-2.6,2.6L4,14.1l2.6-2.6L4,8.9l0.7-0.7l2.6,2.6l2.6-2.6L10.6,8.9z'\r\n\t\t\t\t},\r\n\t\t\t\tdashboard: {\r\n\t\t\t\t\tviewBox: '0 0 1792 1600',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M384 1152q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm192-448q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm428 481l101-382q6-26-7.5-48.5t-38.5-29.5-48 6.5-30 39.5l-101 382q-60 5-107 43.5t-63 98.5q-20 77 20 146t117 89 146-20 89-117q16-60-6-117t-72-91zm660-33q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm-640-640q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm448 192q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm320 448q0 261-141 483-19 29-54 29h-1402q-35 0-54-29-141-221-141-483 0-182 71-348t191-286 286-191 348-71 348 71 286 191 191 286 71 348z'\r\n\t\t\t\t},\r\n\t\t\t\thideColumnDetails: {\r\n\t\t\t\t\tviewBox: '0 0 15.2 11.4',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M9,8.2l2.4-4.3c0.1,0.2,0.1,0.5,0.1,0.7c0,0.8-0.3,1.6-0.7,2.2C10.3,7.4,9.7,7.9,9,8.2z M8.3,5.7c-1.2,2.1-2.1,3.7-2.7,4.8l-0.4,0.8c0,0.1-0.1,0.1-0.2,0.1c0,0-0.4-0.2-1.1-0.6c-0.1,0-0.1-0.1-0.1-0.2c0,0,0.2-0.3,0.4-0.7C3.4,9.5,2.6,9,2,8.4C1.3,7.8,0.7,7.1,0.2,6.3C0.1,6.1,0,5.9,0,5.7s0.1-0.4,0.2-0.6C1,3.8,2.1,2.7,3.4,2c1.3-0.8,2.7-1.2,4.3-1.1c0.5,0,1,0,1.5,0.1l0.4-0.9C9.7,0,9.8,0,9.9,0c0.1,0,0.2,0,0.3,0.1c0.1,0.1,0.2,0.1,0.3,0.2c0.1,0.1,0.2,0.1,0.3,0.2C10.9,0.6,11,0.6,11,0.6c0.1,0.1,0.1,0.1,0.1,0.3C10.5,2,9.6,3.6,8.3,5.7z M5.4,7.7C4.9,7.3,4.5,6.8,4.2,6.3S3.8,5.2,3.8,4.6c0-0.7,0.2-1.3,0.5-1.9C3,3.4,2,4.4,1.1,5.7C2,7.2,3.2,8.2,4.7,8.9L5.4,7.7z M8,2.5c0-0.2,0-0.3-0.1-0.4C7.8,2,7.7,2,7.6,2C6.9,2,6.3,2.3,5.8,2.8S5,3.9,5,4.6c0,0.1,0.1,0.2,0.2,0.3C5.2,5,5.3,5,5.4,5c0.2,0,0.3,0,0.4-0.1c0.1-0.1,0.1-0.2,0.1-0.3c0-0.5,0.1-0.9,0.5-1.2C6.7,3,7.1,2.9,7.6,2.9c0.1,0,0.2-0.1,0.3-0.2C8,2.7,8,2.6,8,2.5z M15.1,5.1c-0.3-0.5-0.7-1.1-1.2-1.6s-1-0.9-1.6-1.3l-0.5,1c0.9,0.7,1.7,1.5,2.4,2.5c-0.7,1.1-1.5,1.9-2.6,2.6c-1,0.7-2.1,1.1-3.3,1.2l-0.6,1.1c1.3,0,2.4-0.3,3.6-0.8c1.1-0.5,2.1-1.3,3-2.3C14.7,7,15,6.6,15.2,6.3c0.1-0.2,0.2-0.4,0.2-0.6C15.2,5.5,15.2,5.3,15.1,5.1z'\r\n\t\t\t\t},\r\n\t\t\t\tshowAsColumns: {\r\n\t\t\t\t\tviewBox: '0 0 14.4 13.3',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M14,0.4C13.8,0.1,13.4,0,13,0H1.4C1,0,0.7,0.1,0.4,0.4S0,1,0,1.4v10.5c0,0.4,0.1,0.7,0.4,1s0.6,0.4,1,0.4H13c0.4,0,0.7-0.1,1-0.4c0.3-0.3,0.4-0.6,0.4-1V1.4C14.4,1,14.3,0.7,14,0.4L14,0.4z M4.7,12.2H1.4c-0.1,0-0.1,0-0.2-0.1S1.1,12,1.1,11.9V2.2h3.6V12.2z M13.3,11.9c0,0.1,0,0.1-0.1,0.2c-0.1,0.1-0.1,0.1-0.2,0.1H5.8v-10h7.6L13.3,11.9L13.3,11.9z'\r\n\t\t\t\t},\r\n\t\t\t\tshowAsColumnsDetails: {\r\n\t\t\t\t\tviewBox: '0 -5 15.2 19.8',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M15.1,4.3C14.3,3,13.2,2,11.9,1.2C10.5,0.4,9.1,0,7.6,0S4.7,0.4,3.4,1.2C2,2,1,3,0.2,4.3C0.1,4.5,0,4.7,0,4.9s0.1,0.4,0.2,0.6C1,6.8,2,7.8,3.4,8.6c1.3,0.8,2.8,1.2,4.2,1.2c1.5,0,2.9-0.4,4.2-1.2s2.4-1.8,3.2-3.1c0.1-0.2,0.2-0.4,0.2-0.6S15.2,4.5,15.1,4.3z M5.8,2c0.5-0.5,1.1-0.8,1.8-0.8c0.1,0,0.2,0,0.3,0.1C8,1.4,8,1.5,8,1.6s0,0.2-0.1,0.3C7.8,2,7.7,2,7.6,2C7.1,2,6.7,2.2,6.4,2.6C6,2.9,5.8,3.3,5.8,3.8c0,0.1,0,0.2-0.1,0.3C5.6,4.2,5.6,4.2,5.4,4.2c-0.1,0-0.2,0-0.3-0.1C5.1,4,5,3.9,5,3.8C5,3.1,5.3,2.5,5.8,2z M11.3,7.7c-1.1,0.7-2.4,1-3.7,1c-1.3,0-2.6-0.3-3.7-1C2.8,7,1.8,6.1,1.1,4.9C2,3.6,3,2.6,4.3,1.9C4,2.5,3.8,3.1,3.8,3.8c0,1,0.4,1.9,1.1,2.7c0.7,0.7,1.6,1.1,2.7,1.1c1,0,1.9-0.4,2.7-1.1c0.8-0.7,1.1-1.6,1.1-2.7c0-0.7-0.2-1.3-0.5-1.9c1.3,0.7,2.4,1.7,3.2,3C13.4,6.1,12.4,7,11.3,7.7z'\r\n\t\t\t\t},\r\n\t\t\t\tpartyManagement: {\r\n\t\t\t\t\tviewBox: '0 0 34.6 33.4',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M13.5,3.8c0-2.1,1.7-3.8,3.8-3.8S21,1.7,21,3.8s-1.7,3.8-3.8,3.8S13.5,5.8,13.5,3.8zM19.8,7.6h-5 c-1.6,0-2.9,1.3-2.9,2.9v4.2c0,0.7,0.5,1.2,1.2,1.2h8.4c0.7,0,1.2-0.5,1.2-1.2v-4.2C22.7,8.9,21.4,7.6,19.8,7.6z M5.4,25 c2.1,0,3.8-1.7,3.8-3.8s-1.7-3.8-3.8-3.8s-3.8,1.7-3.8,3.8S3.3,25,5.4,25z M7.9,25.1h-5C1.3,25.1,0,26.4,0,28v4.2 c0,0.7,0.5,1.2,1.2,1.2h8.4c0.7,0,1.2-0.5,1.2-1.2V28C10.8,26.4,9.5,25.1,7.9,25.1z M29.2,25c2.1,0,3.8-1.7,3.8-3.8 s-1.7-3.8-3.8-3.8s-3.8,1.7-3.8,3.8S27.1,25,29.2,25z M31.7,25.1h-5c-1.6,0-2.9,1.3-2.9,2.9v4.2c0,0.7,0.5,1.2,1.2,1.2h8.4 c0.7,0,1.2-0.5,1.2-1.2V28C34.6,26.4,33.3,25.1,31.7,25.1z M24.6,24.5c0,0.2-0.2,0.4-0.4,0.4l-0.1,0c-0.7,0-1.3,0.4-1.5,1 c-0.3,0.6-0.1,1.4,0.4,1.8c0.2,0.1,0.2,0.4,0,0.6c-0.3,0.4-0.8,0.8-1.2,1.2c-0.2,0.1-0.4,0.1-0.6,0c-0.4-0.5-1.2-0.7-1.8-0.4 c-0.6,0.3-1,0.9-1,1.6c0,0.2-0.2,0.4-0.4,0.4c-0.3,0-0.5,0-0.8,0c-0.3,0-0.6,0-0.8,0c-0.2,0-0.4-0.2-0.4-0.4c0-0.7-0.4-1.3-1-1.6 c-0.6-0.3-1.4-0.1-1.8,0.4c-0.1,0.2-0.4,0.2-0.6,0c-0.4-0.3-0.8-0.7-1.2-1.2c-0.1-0.2-0.1-0.4,0-0.6c0.5-0.5,0.7-1.2,0.4-1.8 c-0.3-0.6-0.9-1-1.5-1c-0.2,0-0.5-0.2-0.5-0.4c-0.1-0.6-0.1-1.1,0-1.7c0-0.2,0.2-0.4,0.4-0.4c0.7,0,1.3-0.4,1.6-1 c0.3-0.6,0.1-1.4-0.4-1.8c-0.2-0.1-0.2-0.4,0-0.6c0.3-0.4,0.7-0.8,1.2-1.2c0.2-0.1,0.4-0.1,0.6,0c0.4,0.5,1.2,0.7,1.8,0.4 c0.6-0.3,1-0.9,1-1.6c0-0.2,0.2-0.4,0.4-0.4c0.6-0.1,1.1-0.1,1.7,0c0.2,0,0.4,0.2,0.4,0.4c0,0.7,0.4,1.3,1,1.6 c0.6,0.3,1.4,0.1,1.8-0.4c0.1-0.2,0.4-0.2,0.6,0c0.4,0.3,0.8,0.7,1.2,1.2c0.1,0.2,0.1,0.4,0,0.6c-0.5,0.5-0.7,1.2-0.4,1.8 c0.3,0.6,0.8,1,1.5,1c0.2,0,0.4,0.2,0.5,0.4C24.7,23.4,24.7,24,24.6,24.5z M19.8,23.7c0-1.4-1.1-2.5-2.5-2.5c-1.4,0-2.5,1.1-2.5,2.5 s1.1,2.5,2.5,2.5C18.6,26.1,19.8,25,19.8,23.7z'\r\n\t\t\t\t},\r\n\t\t\t\tmyPartyManagement: {\r\n\t\t\t\t\tviewBox: '0 0 49.64 49.02',\r\n\t\t\t\t\tpreserveAspectRatio: 'xMidYMid',\r\n\t\t\t\t\tdata: 'M20.46,35.67a15.57,15.57,0,0,0,2.32,8,42.53,42.53,0,0,1-4.27.21C7.19,43.87.44,39.48.44,39.48.23,38.29,0,35.61,0,35.61c-.15-2,0-6,3.48-6.85a28.82,28.82,0,0,0,8.41-3.84l2.95,9.3L15.44,36v0l.48,1.49L17.48,33c-3.82-5.32.77-5.27,1-5.26s4.84-.06,1,5.26ZM10.72,18.61a9.27,9.27,0,0,0,5.7,7.06,6.19,6.19,0,0,0,4.18,0,9.4,9.4,0,0,0,5.71-7.05c.44,0,1-.65,1.63-2.84.84-3,0-3.43-.81-3.36a8.24,8.24,0,0,0,.33-1.23c1.29-7.74-2.52-8-2.52-8A5.9,5.9,0,0,0,22.65,1a7.72,7.72,0,0,0-4.72-1A6.54,6.54,0,0,0,16.05.4,8.41,8.41,0,0,0,14,1.45a11,11,0,0,0-2.12,1.76,8.58,8.58,0,0,0-2.3,4,8.75,8.75,0,0,0,0,3.93,8.25,8.25,0,0,0,.33,1.23c-.78-.07-1.67.37-.83,3.36C9.7,18,10.28,18.57,10.72,18.61ZM49.55,37a.75.75,0,0,1-.79.66h-.17a3,3,0,0,0-2.77,1.84,3,3,0,0,0,.76,3.38.75.75,0,0,1,.08,1,13.5,13.5,0,0,1-2.19,2.17.76.76,0,0,1-1-.09,3.13,3.13,0,0,0-3.36-.76,3,3,0,0,0-1.85,2.89.75.75,0,0,1-.67.78,13.5,13.5,0,0,1-3,0,.75.75,0,0,1-.66-.79A3,3,0,0,0,32,45.2a3.12,3.12,0,0,0-3.38.76.75.75,0,0,1-1,.08,13.45,13.45,0,0,1-2.14-2.17.75.75,0,0,1,.08-1,3,3,0,0,0,.76-3.35,3,3,0,0,0-2.79-1.86.9.9,0,0,1-.89-.67,13.57,13.57,0,0,1,0-3.08.74.74,0,0,1,.78-.67,3.13,3.13,0,0,0,2.95-1.83A3,3,0,0,0,25.61,28a.75.75,0,0,1-.08-1,13.47,13.47,0,0,1,2.19-2.17.76.76,0,0,1,1,.09,3.13,3.13,0,0,0,3.35.76A3,3,0,0,0,34,22.78a.75.75,0,0,1,.67-.78,13.52,13.52,0,0,1,3,0,.75.75,0,0,1,.66.79,3,3,0,0,0,1.83,2.94A3.12,3.12,0,0,0,43.55,25a.75.75,0,0,1,1-.08,13.41,13.41,0,0,1,2.15,2.17.75.75,0,0,1-.08,1,3,3,0,0,0,2,5.21.88.88,0,0,1,.87.67A13.52,13.52,0,0,1,49.55,37ZM44.47,35.5a8.35,8.35,0,1,0-8.35,8.35A8.36,8.36,0,0,0,44.47,35.5Z'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn images;\r\n\r\n\t\tfunction getSrcImage(name) {\r\n\t\t\treturn {\r\n\t\t\t\tsrc: 'src/images/svg/' + name\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tfunction getSvgImage(minX, minY, width, height, data) {\r\n\t\t\treturn {\r\n\t\t\t\tminX: minX,\r\n\t\t\t\tminY: minY,\r\n\t\t\t\twidth: width,\r\n\t\t\t\theight: height,\r\n\t\t\t\tdata: data\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/image/images.js","define([\r\n\t'./navigation.controller',\r\n    './navigation.directive',\r\n    './navigation-warning.directive',\r\n\t'./navigation-warning.controller',\r\n    './go-back.directive'\r\n], function (\r\n\tnavigationControllerLoader,\r\n\tdiNavigationDirectiveLoader,\r\n    navigationWarningLoader,\r\n\tnavigationWarningControllerLoader,\r\n    goBackLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tnavigationControllerLoader(module);\r\n\t\tdiNavigationDirectiveLoader(module);\r\n\t\tnavigationWarningLoader(module);\r\n\t\tnavigationWarningControllerLoader(module);\r\n\t    goBackLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/navigation/_loader.js","//{CODE:EUP18}\r\n// di.einvoicing.ui.portal.components.navigation\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.directive('goBack', goBack);\r\n\r\n\t\tgoBack.$inject = ['translator', 'diState'];\r\n\r\n\t\treturn goBack;\r\n\r\n\t\tfunction goBack(translator, diState) {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\ttemplate: template,\r\n\t\t\t\tlink: function (scope, element, attrs, controllers) {\r\n\t\t\t\t\telement.on('click', function () {\r\n\t\t\t\t\t\tdiState.goBack().catch(function (reason) {\r\n\t\t\t\t\t\t\twindow.history.back();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tfunction template(element, attrs) {\r\n\t\t\t    translator.translate(attrs.text).then(function(translated) {\r\n\t\t\t        var html = '<a href=\"#\">' + translated + '</a>';\r\n\t\t\t        return html;\r\n\t\t\t    });\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/navigation/go-back.directive.js","//{CODE:DEF0S}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.controller('NavigationWarningController', NavigationWarningController);\r\n\r\n\t\tNavigationWarningController.$inject = ['$scope'];\r\n\r\n\t\tfunction NavigationWarningController(scope) {\r\n\t\t\tscope.noWarnStates =\r\n\t\t\t[\r\n\t\t\t\t{\r\n\t\t\t\t\tstate: 'welcome',\r\n\t\t\t\t\treason: 'SessionTimeout'\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treturn NavigationWarningController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/navigation/navigation-warning.controller.js","//{CODE:EUP18}\r\n// di.einvoicing.ui.portal.components.navigation\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t    var util = $di.utility.util;\r\n\t    \r\n\t\tmodule.directive('diNavigationWarning', diNavigationWarning);\r\n\r\n\t\tdiNavigationWarning.$inject = ['translator', '$window', 'promptWindow', 'diState', 'authenticationData', 'formAnalyser'];\r\n\r\n\t\treturn diNavigationWarning;\r\n\r\n\t\tfunction diNavigationWarning(translator, window, promptWindow, state, authenticationData, formAnalyser) {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'A',\r\n\t\t\t\trequired: '^^ngForm',\r\n\t\t\t\tcontroller: 'NavigationWarningController',\r\n\t\t\t\tlink: function (scope, element, attrs, controllers) {\r\n\t\t\t\t    var form = formAnalyser.getFormInstance(scope);\r\n\t\t\t\t\tvar removeStateListener = scope.$root.$on(\"$stateChangeStart\", stateChanged);\r\n\r\n\t\t\t\t\twindow.onbeforeunload = function () {\r\n\t\t\t\t\t    return translator.translate(attrs.navigationWarningMessage);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tscope.$on('$destroy', function () {\r\n\t\t\t\t\t\tremoveStateListener();\r\n\t\t\t\t\t\tremoveLeavingPageWarningBox();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tfunction stateChanged(event, toState, toParams, fromState, fromParams, options) {\t\t\t\t\t    \r\n\t\t\t\t\t    if ((!attrs.navigationWarningUnauthenticated && !authenticationData.userData.isAuthenticated)\r\n\t\t\t\t\t        || fromParams.navigationWarningAccepted\r\n\t\t\t\t\t\t\t|| util.isNull(form)\r\n\t\t\t\t\t\t\t|| form.$pristine\r\n\t\t\t\t\t\t\t|| (form.$submitted && !form.$dirty)\r\n\t\t\t\t\t\t\t|| (util.isArray(scope.noWarnStates)\r\n\t\t\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t\t\t_.some(scope.noWarnStates, function (prevent) {\r\n\t\t\t\t\t\t\t\t\t\treturn util.isDefined(prevent.state)\r\n\t\t\t\t\t\t\t\t\t\t\t&& prevent.state === toState.name\r\n\t\t\t\t\t\t\t\t\t\t\t&& prevent.reason === toParams.reason;\r\n\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t    }\r\n\r\n\t\t\t\t\t    if (fromState.name === toState.name) {\r\n\t\t\t\t\t        options.reload = true;\r\n\t\t\t\t\t    }\r\n\r\n\t\t\t\t\t\tvar config = {\r\n\t\t\t\t\t\t    title: attrs.navigationWarningTitle || \"EINVOICING.COMPONENTS.NAVIGATION.ABANDON_CHANGES_WARNING.TITLE\",\r\n\t\t\t\t\t\t    message: attrs.navigationWarningMessage || \"EINVOICING.COMPONENTS.NAVIGATION.ABANDON_CHANGES_WARNING.MESSAGE\",\r\n\t\t\t\t\t\t\tokBtnText: 'CORE.PROMPT.YES',\r\n\t\t\t\t\t\t\tcancelBtnText: 'CORE.PROMPT.NO',\r\n\t\t\t\t\t\t\tcallback: function(result) {\r\n\t\t\t\t\t\t\t    if (result) {\r\n\t\t\t\t\t\t\t        fromParams.navigationWarningAccepted = true;\r\n\t\t\t\t\t\t\t\t\tstate.go(toState.name, toParams, options);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tpromptWindow.confirm(config);\r\n\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t}                    \t\t\t\t\t\r\n\r\n\t\t\t\t\tfunction removeLeavingPageWarningBox() {\r\n\t\t\t\t\t    window.onbeforeunload = function() {};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/navigation/navigation-warning.directive.js","//{CODE:EUP1V}\r\n// di.einvoicing.ui.portal.components\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.controller('NavigationController', NavigationController);\r\n\r\n\t\tNavigationController.$inject = [\r\n\t\t\t'authorizedObjectsFilter',\r\n\t\t\t 'userRightsRepository',\r\n\t\t\t 'listsParamsStore',\r\n             'partyFeatureEnabledService',\r\n             'diState',\r\n             'partyProxy'\r\n\t\t];\r\n\r\n\t\tfunction NavigationController(\r\n\t\t\tauthorizedObjectsFilter,\r\n\t\t\tuserRightsRepository,\r\n\t\t\tlistsParamsStore,\r\n            partyFeatureEnabledService,\r\n            diState,\r\n            partyProxy\r\n            ) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvm.labels = {};\r\n\t\t\tvm.showCreateOptions = false;\r\n\t\t\tvm.toggleCreateOptions = toggleCreateOptions;\r\n\t\t\tvm.closeCreateOptions = closeCreateOptions;\r\n\t\t\tvm.canManageUsers = false;\r\n\t\t    vm.canAccessIntegrator = false;\r\n \t\t\tvm.canCreateDocuments = false;\r\n\t\t\tvm.getStateParamsFromStorage = getStateParamsFromStorage;\r\n\t\t\tvm.getPartiesStateParams = getPartiesStateParams;\r\n\t\t    vm.viewPartyManagement = viewPartyManagement;\r\n\t\t\tsetLabels();\r\n\r\n\t\t\treturn;\r\n\r\n\t\t\t/**\r\n\t\t\t * sets labels values depending on user rights           \r\n\t\t\t */\r\n\t\t\tfunction setLabels() {\r\n\t\t\t\tvar data = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\tkey: \"orders\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.ORDERS_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\tkey: \"orders\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.ORDERS_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\tkey: \"newOrder\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.ORDER_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\tkey: \"newOrder\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.ORDER_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\tkey: \"invoices\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.INVOICES_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\tkey: \"invoices\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.INVOICES_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\tkey: \"newInvoice\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.INVOICE_SUPPLIER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\tkey: \"newInvoice\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.INVOICE_BUYER\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Supervisor\"],\r\n\t\t\t\t\t\tkey: \"users\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.USERS\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Supplier\"],\r\n\t\t\t\t\t\tkey: \"partyManagement\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.BUYERS\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Buyer\"],\r\n\t\t\t\t\t\tkey: \"partyManagement\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.SUPPLIERS\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trights: [\"Supplier\", \"Buyer\"],\r\n\t\t\t\t\t\tkey: \"myPartyManagement\",\r\n\t\t\t\t\t\tlabel: \"EINVOICING.COMPONENTS.NAVIGATION.PARTY_MANAGEMENT\"\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\r\n\t\t\t\tvm.labels = authorizedObjectsFilter.getAuthorizedObjectsAsAssociative(data, 'key', 'label');\r\n\t\t\t\tvm.canManageUsers = util.isDefined(vm.labels.users);\r\n\t\t\t    vm.canCreateDocuments =\r\n\t\t\t        userRightsRepository.userHasRight('Supplier') &&\r\n\t\t\t        userRightsRepository.userHasRight('InvoiceWriter') &&\r\n\t\t\t        userRightsRepository.userHasRight('InvoiceCreator');\r\n\r\n\t\t\t\tpartyFeatureEnabledService.getPartyFeatureEnabled(1).then(result => {\r\n\t\t\t\t    vm.canAccessIntegrator = result;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction toggleCreateOptions() {\r\n\t\t\t\tvm.showCreateOptions = !vm.showCreateOptions;\r\n\t\t\t}\r\n\r\n\t\t\tfunction closeCreateOptions() {\r\n\t\t\t\tvm.showCreateOptions = false;\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Retrieves the state parameters that should be used in the navigation for the requested list view\r\n\t\t\t */\r\n\t\t\tfunction getStateParamsFromStorage(listView) {\r\n\t\t\t\tvar filters = listsParamsStore.get(listView) || {};\r\n\t\t\t\treturn filters;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getPartiesStateParams() {\r\n\t\t\t\tvar stateParams = getStateParamsFromStorage('parties');\r\n\t\t\t\treturn _.extend((stateParams || {}), { pageTitle: vm.labels.partyManagement });\r\n\t\t\t}\r\n\r\n\t\t\tfunction getMyPartiesStateParams() {\r\n\t\t\t\tvar stateParams = getStateParamsFromStorage('myParties');\r\n\t\t\t\treturn _.extend((stateParams || {}), { pageTitle: vm.labels.myPartyManagement });\r\n\t\t\t}\r\n\r\n\t\t\tfunction viewPartyManagement() {\r\n\t\t\t    partyProxy.getWorkingForPartyManagementSearchResults('').then((data) => {\r\n                    if (data.length === 1) {\r\n                        const selectedParty = data[0];\r\n                        const pageParams = {\r\n                            id: selectedParty.partyId,\r\n                            forPartyId: selectedParty.partyId,\r\n                            partyName: selectedParty.partyName,\r\n                            forPartyName: selectedParty.partyName,\r\n                            singleDetails: 'true'\r\n                        }\r\n                        diState.go('portal.parties.viewById', pageParams);\r\n                    } else {\r\n                        diState.go('portal.parties.mylist', { pageTitle: 'EINVOICING.COMPONENTS.NAVIGATION.PARTY_MANAGEMENT' });\r\n                    }\r\n                });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn NavigationController;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/navigation/navigation.controller.js","//{CODE:EUP18}\r\n// di.einvoicing.ui.portal.components.navigation\r\ndefine([\r\n    'angular'\r\n], function (ng) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var compat = $di.utility.compatability;\r\n\r\n\t\tmodule.directive('diNavigation', diNavigation);\r\n\r\n\t    function diNavigation() {\r\n\t        return {\r\n\t        \trestrict: 'E',\r\n\t\t\t\treplace: true,\r\n\t            templateUrl: '/src/app/shared/components/navigation/navigation.html',\r\n\t            controller: 'NavigationController',\r\n\t            controllerAs: 'navigationCtrl',\r\n\t            compile: compile\r\n\t        };\r\n\r\n\t        function compile(element, attrs) {\r\n\t            activateMenuExpand();\r\n\r\n                function activateMenuExpand() {\r\n                    var trigger = ng.element('.js-expand-sidebar');\r\n                    var main = ng.element('.main');\r\n                    var sidebar = ng.element('.sidebar');\r\n\r\n                    var elements = ng.element('.sidebar-header').add('.sidebar-content');\r\n\r\n                    trigger.on('click', function () {\r\n                        if (main.hasClass('sidebar-is-animating')) {\r\n                            main.removeClass('sidebar-is-animating');\r\n                            ng.element(this).removeClass('is-active');\r\n                        } else {\r\n                            main.addClass('sidebar-is-animating');\r\n                            ng.element(this).addClass('is-active');\r\n                        }\r\n\r\n                        elements.addClass('is-hidden');\r\n                    });\r\n\r\n                    sidebar.on(compat.transitionEndEvent, function () {\r\n                        if (main.hasClass('sidebar-is-animating')) {\r\n                            main.addClass('sidebar-is-expanded');\r\n                        } else {\r\n                            main.removeClass('sidebar-is-expanded');\r\n                        }\r\n\r\n                        elements.removeClass('is-hidden');\r\n                    })\r\n\r\n                    // prevent children from bubbling 'transitionend' event to parent\r\n                    .children().on(compat.transitionEndEvent, function (e) {\r\n                        e.stopPropagation();\r\n                    });\r\n                }\r\n\t        }\r\n\t    }\r\n\r\n\t    return diNavigation;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/navigation/navigation.directive.js","define([\r\n\t'./service-status-monitor.controller',\r\n\t'./service-status-monitor.directive',\r\n\t'./service-status-monitor.service',\r\n    './server-proxy.factory'\r\n], function (\r\n\tserviceStatusMonitorControllerLoader,\r\n\tserviceStatusMonitorDirectiveLoader,\r\n\tserviceStatusMonitorLoader,\r\n    serverProxyLoader) {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t    serverProxyLoader(module);\r\n\t    serviceStatusMonitorControllerLoader(module);\r\n\t\tserviceStatusMonitorDirectiveLoader(module);\r\n\t\tserviceStatusMonitorLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/service-status-monitor/_loader.js","//{CODE:EUP83}\r\n//di.einvoicing.ui.portal.proxies\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\r\n\t\tmodule.factory('serverProxy', serverProxy);\r\n\r\n\t\tserverProxy.$inject = [\r\n\t\t\t'webApiHttp', '$q', 'urlHelper'];\r\n\r\n\t\tfunction serverProxy(http, $q, urlHelper) {\r\n\t\t\treturn {\r\n\t\t\t\tgetCurrentServerState: getCurrentServerState\r\n\t\t\t};\r\n\r\n\t\t\tfunction getCurrentServerState() {\r\n\t\t\t\tvar requestUrl = urlHelper.setParameters('Status/GetCurrentServerState', {});\r\n\r\n\t\t\t\tvar httpPromise = http.get(requestUrl);\r\n\t\t\t\tvar newPromise = httpPromise.then(resolved, rejected);\r\n\r\n\t\t\t\treturn newPromise;\r\n\r\n\t\t\t\tfunction resolved(data) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rejected(error) {\r\n\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn serverProxy;\r\n\t};\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/service-status-monitor/server-proxy.factory.js","//{CODE:EUP85}\r\n// di.einvoicing.ui.portal.components.serviceStatusMonitor\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\t\tmodule.controller('ServiceStatusMonitorController', ServiceStatusMonitorController);\r\n\r\n\t\tServiceStatusMonitorController.$inject =\r\n\t\t\t['$interval',\r\n\t\t\t'serverProxy',\r\n\t\t\t'CLIENT_ENUMS',\r\n\t\t\t'serviceStatusMonitor',\r\n\t\t\t'authenticationData'];\r\n\r\n\t\tfunction ServiceStatusMonitorController(\r\n\t\t\t$interval,\r\n\t\t\tserverProxy,\r\n\t\t\tclientEnums,\r\n\t\t\tserviceStatusMonitor,\r\n\t\t\tauthenticationData) {\r\n\r\n\t\t\tvar vm = this;\r\n\t\t\tvm.serviceState = 'down';\r\n\t\t\tvar guard = $di.exception.guard;\r\n\t\t\tvar util = $di.utility.util;\r\n\t\t\tvar pollingInterval = serviceStatusMonitor.getPollingInterval();\r\n\t\t\tguard.throwIfUndefined(\"EUP8501E\", pollingInterval, \"pollingInterval\");\r\n\r\n\t\t\t//first call for monitor service as $interval will place a delay\r\n\t\t\tmonitorService();\r\n\r\n\t\t\t$interval(monitorService, pollingInterval);\r\n\t\t\treturn;\r\n\r\n\t\t\tfunction monitorService() {\r\n\t\t\t\tif (!authenticationData.userData.isAuthenticated) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tserverProxy.getCurrentServerState().then(success, failure);\r\n\t\t\t}\r\n\r\n\t\t\tfunction success(data) {\r\n\r\n\t\t\t\tif (data === clientEnums.serviceState.up) {\r\n\t\t\t\t\tvm.serviceState = 'up';\r\n\t\t\t\t} else if (data === clientEnums.serviceState.maintenance) {\r\n\t\t\t\t\tvm.serviceState = 'maintenance';\r\n\t\t\t\t} else if (data === clientEnums.serviceState.down) {\r\n\t\t\t\t\tvm.serviceState = 'down';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvm.serviceState = 'unknown';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction failure() {\r\n\t\t\t\tvm.serviceState = 'down';\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t}\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/service-status-monitor/service-status-monitor.controller.js","//{CODE:EUP86}\r\n// di.einvoicing.ui.portal.components.serviceStatusMonitor\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function(module) {\r\n\r\n\t\tmodule.directive('diServiceStatusMonitor', serviceStatusMonitor);\r\n\r\n\t\tfunction serviceStatusMonitor() {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\trelace: true,\r\n\t\t\t\ttemplateUrl: 'src/app/shared/components/service-status-monitor/service-status.html',\r\n\t\t\t\tcontroller: 'ServiceStatusMonitorController',\r\n\t\t\t\tcontrollerAs: 'serviceStatusMonitorCtrl'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/service-status-monitor/service-status-monitor.directive.js","//{CODE:EUP87}\r\n// di.einvoicing.ui.portal.components.serviceStatusMonitor\r\ndefine(function() {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar guard = $di.exception.guard;\r\n\r\n\t\tmodule.provider('serviceStatusMonitor', ServiceStatusMonitorProvider);\r\n\r\n\t\tfunction ServiceStatusMonitorProvider() {\r\n\t\t\tvar config = {};\r\n\r\n\t\t\tvar provider = {\r\n\t\t\t\tconfigure: configure,\r\n\t\t\t\t$get: $get\r\n\t\t\t};\r\n\r\n\t\t\treturn provider;\r\n\r\n\t\t\tfunction configure(cfg) {\r\n\t\t\t\tguard.throwIfNotAnObject(\"EUP8701E\", cfg, 'cfg');\r\n\r\n\t\t\t\tconfig = cfg;\r\n\t\t\t}\r\n\r\n\t\t\tfunction $get() {\r\n\t\t\t\treturn {\r\n\t\t\t\t    getPollingInterval: getPollingInterval\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction getPollingInterval() {\r\n\t\t\t\t\treturn config.pollingInterval;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ServiceStatusMonitorProvider;\r\n\t}\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/service-status-monitor/service-status-monitor.service.js","//{CODE:EUP4S}\r\n// di.einvoicing.ui.portal.components.styleConstants\r\ndefine([\r\n    './colour-classes'\r\n], function (\r\n    colourClassesLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        colourClassesLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/style-constants/_loader.js","//{CODE:EUP4T}\r\n// di.einvoicing.ui.portal.components.styleConstants\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.constant('COLOUR_CLASSES', colourClasses());\r\n\r\n        function colourClasses() {\r\n            return {\r\n                offWhite: \"#E6E7EA\",\r\n                button: \"#4F87E6\",\r\n                icon: \"#ABB0B8\",\r\n                negativeButton: \"#A31515\"\r\n            };\r\n        }\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/style-constants/colour-classes.js","define([\r\n    './tooltip.directive'\r\n], function (\r\n    tooltipDirectiveLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        tooltipDirectiveLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/tooltip/_loader.js","//{CODE:EUP1P}\r\n// di.einvoicing.ui.portal.components\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.directive('diTooltip', diTooltip);\r\n\r\n        function diTooltip() {\r\n            return {\r\n                restrict: 'A',\r\n                link: function (scope, element, attrs) {\r\n                    element.hover(function () {\r\n                        element.tooltip('show');\r\n                    }, function () {\r\n                        element.tooltip('hide');\r\n                    });\r\n                }\r\n            };\r\n        }\r\n\r\n        return diTooltip;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/tooltip/tooltip.directive.js","//{CODE:EUP38}\r\n// di.einvoicing.ui.portal.components\r\ndefine([\r\n\t'./authentication-client-event-handler.service',\r\n\t'./user-settings-store.service',\r\n\t'./user-rights'\r\n], function (\r\n\tauthenticationClientEventHandlerLoader,\r\n\tuserSetingsStorageLoader,\r\n\tuserRightsLoader) {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tauthenticationClientEventHandlerLoader(module);\r\n\t\tuserSetingsStorageLoader(module);\r\n\t\tuserRightsLoader(module);\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/user/_loader.js","//{CODE:EUP3Y}\r\n// di.einvoicing.ui.portal.components.user\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.factory('authenticationClientEventHandler', authenticationClientEventHandler);\r\n\r\n\t\tauthenticationClientEventHandler.$inject = [\r\n\t\t\t'authenticationClientEventSubscriber',\r\n\t\t\t'authenticationData',\r\n\t\t\t'currencyCache',\r\n\t\t\t'promptWindow',\r\n\t\t\t'summaryOptionsStore',\r\n\t\t\t'listsParamsStore',\r\n            'activityMonitor'\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * Service responsible for performing application-specific actions on user\r\n\t\t * login and logout\r\n\t\t */\r\n\t\tfunction authenticationClientEventHandler(\r\n\t\t\tauthenticationClientEventSubscriber,\r\n\t\t\tauthenticationData,\r\n\t\t\tcurrencyCache,\r\n\t\t\tpromptWindow,\r\n\t\t\tsummaryOptionsStore,\r\n\t\t\tlistsParamsStore,\r\n            activityMonitor) {\r\n\t\t\tvar service = {\r\n\t\t\t\tinit: init\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\t/**\r\n\t\t\t * Subscribe to login/logout events\r\n\t\t\t */\r\n\t\t\tfunction init() {\r\n\t\t\t\tauthenticationClientEventSubscriber.addLoggedInEventHandler(loggedIn);\r\n\t\t\t\tauthenticationClientEventSubscriber.addLoggedOutEventHandler(loggedOut);\r\n\t\t\t\tauthenticationClientEventSubscriber.addRightsChangedEventHandler(rightsChanged);\r\n\t\t\t}\r\n\r\n\t\t\tfunction loggedIn() {\r\n\t\t\t\tgetCurrency();\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction loggedOut(loggedOutReason) {\r\n\t\t\t\tremoveSessionDataFromStorage();\r\n\r\n\t\t\t\tactivityMonitor.stop();\r\n\r\n\t\t\t\tif (loggedOutReason) {\r\n\t\t\t\t\tvar languageKey = 'EINVOICING.COMPONENTS.USERS.LOGGED_OUT_REASON.' + loggedOutReason.toUpperCase() + '.';\r\n\r\n\t\t\t\t\tvar promptConfig = {\r\n\t\t\t\t\t\ttitle: languageKey + 'TITLE',\r\n\t\t\t\t\t\tmessage: languageKey + 'MESSAGE'\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tpromptWindow.alert(promptConfig);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction rightsChanged() {\r\n\t\t\t    promptWindow.alert({\r\n\t\t\t        title: 'EINVOICING.COMPONENTS.USERS.RIGHTS_CHANGED.TITLE',\r\n\t\t\t        message: 'EINVOICING.COMPONENTS.USERS.RIGHTS_CHANGED.MESSAGE'\r\n\t\t\t    });\r\n\t\t\t}\r\n\r\n\t\t\tfunction getCurrency() {\r\n\t\t\t\treturn currencyCache.getCurrencies();\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeSessionDataFromStorage() {\r\n\t\t\t\tsummaryOptionsStore.clear();\r\n\r\n\t\t\t\tvar listsParamsToRemove = [\"searchText\", \"pageNumber\"];\r\n\t\t\t\tlistsParamsStore.remove(\"invoices\", listsParamsToRemove);\r\n\t\t\t\tlistsParamsStore.remove(\"orders\", listsParamsToRemove);\r\n\t\t\t\tlistsParamsStore.remove(\"grns\", listsParamsToRemove);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn authenticationClientEventHandler;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/user/authentication-client-event-handler.service.js","//{CODE:EUP4T}\r\n// di.einvoicing.ui.portal.components.styleConstants\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tmodule.constant('USER_RIGHTS', userRights());\r\n\r\n\t\tfunction userRights() {\r\n\t\t\treturn {\r\n\t\t\t\tBuyer: 'Buyer',\r\n\t\t\t\tSupplier: 'Supplier'\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/user/user-rights.js","//{CODE:EUP39}\r\n// di.einvoicing.ui.portal.components.user\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        var guard = $di.exception.guard;\r\n\r\n        module.factory('userSettingsStore', userSettingsStore);\r\n\r\n        userSettingsStore.$inject = ['sessionStore'];\r\n\r\n        function userSettingsStore(sessionStore) {\r\n            var storageKeys = {\r\n                settings: {\r\n                    language: 'settings.language'\r\n                }\r\n            };\r\n\r\n            return {\r\n                language: {\r\n                    get: getLanguage,\r\n                    set: setLanguage\r\n                }\r\n            };\r\n\r\n            /**\r\n             * Returns the currently stored language settings, if any.\r\n             */\r\n            function getLanguage() {\r\n                return sessionStore.get(storageKeys.settings.language, 'userSettingsStore');\r\n            }\r\n\r\n            /**\r\n             * Sets the stored language to the given value.\r\n             * @param language\r\n             */\r\n            function setLanguage(language) {\r\n                guard.throwIfNotAString(\"EUP3903E\", language, \"language\");\r\n\r\n                sessionStore.set(storageKeys.settings.language, language, 'userSettingsStore');\r\n            }\r\n        }\r\n\r\n        return userSettingsStore;\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/components/user/user-settings-store.service.js","define([\r\n\t'./party-feature-enabled/_loader',\r\n\t'./session-preferences/_loader'\r\n], function (\r\n\tpartyFeatureEnabledLoader,\r\n\tsessionPreferencesLoader) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        partyFeatureEnabledLoader(module);\r\n        sessionPreferencesLoader(module);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/services/_loader.js","define(['./party-feature-enabled-proxy.service'],\r\n\tfunction (\r\n    partyFeatureEnabledService) {\r\n\t    'use strict';\r\n\r\n\t    return function (module) {\r\n\t        module.service(\r\n                'partyFeatureEnabledService',\r\n                partyFeatureEnabledService.PartyFeatureEnabledProxyService);\r\n\t    };\r\n\t});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/services/party-feature-enabled/_loader.js","class PartyFeatureEnabledProxyService {\r\n\tconstructor(webApiHttp, urlHelper) {\r\n\t\tthis._webApiHttp = webApiHttp;\r\n\t\tthis._urlHelper = urlHelper;\r\n\t}\r\n\r\n\tgetPartyFeatureEnabled(featureId) {\r\n\t\tlet requestedUrl = 'EInvoicingFeature/GetPartyHasEInvoicingFeature?einvoicingFeature=' + featureId;\r\n\r\n\t\treturn this._webApiHttp.get(requestedUrl);\r\n\t}\r\n}\r\n\r\nPartyFeatureEnabledProxyService.prototype.constructor.$inject = ['webApiHttp', 'urlHelper'];\r\n\r\nexport { PartyFeatureEnabledProxyService }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/services/party-feature-enabled/party-feature-enabled-proxy.service.js","define(['./lists-params-store.service'],\r\n\tfunction (\r\n\t\tlistsParamsStoreLoader) {\r\n\t\t'use strict';\r\n\r\n\t\treturn function (module) {\r\n\t\t\tlistsParamsStoreLoader(module);\r\n\t\t};\r\n\t});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/services/session-preferences/_loader.js","//{CODE:DEF1C}\r\ndefine(function () {\r\n\t'use strict';\r\n\r\n\treturn function (module) {\r\n\t\tvar util = $di.utility.util;\r\n\r\n\t\tmodule.factory('listsParamsStore', listsParamsStore);\r\n\r\n\t\tlistsParamsStore.$inject = ['sessionStore', 'authenticationData'];\r\n\r\n\t\t/**\r\n\t\t * Repository for storing filters for list views\r\n\t\t */\r\n\t\tfunction listsParamsStore(sessionStore, authenticationData) {\r\n\t\t\tvar storagePrefix = 'listsParamsStore';\r\n\t\t\tvar storageKey = 'latestParams';\r\n\r\n\t\t\tvar service = {\r\n\t\t\t\tset: set,\r\n\t\t\t\tget: get,\r\n\t\t\t\tupdate: update,\r\n\t\t\t\tremove: remove,\r\n\t\t\t\tclear: clear\r\n\t\t\t};\r\n\r\n\t\t\treturn service;\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which sets the list options for the specified list view in local storage\r\n\t\t\t * \r\n\t\t\t * @param listView - The list view for which the params are stored\r\n\t\t\t * @param listViewParams - The options to store\r\n\t\t\t */\r\n\t\t\tfunction set(listView, listViewParams) {\r\n\t\t\t\tvar composite = composeStoragePrefix(storagePrefix);\r\n\t\t\t\tvar currentPreferences = sessionStore.get(storageKey, composite);\r\n\t\t\t\tvar newPreference = {};\r\n\t\t\t\tnewPreference[listView] = listViewParams;\r\n\t\t\t\tvar preferences = _.extend({}, currentPreferences, newPreference);\r\n\t\t\t\tsessionStore.set(storageKey, preferences, composite);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which gets the filter options for the specified list view\r\n\t\t\t *  \r\n\t\t\t * @param listView - The list view to get the params for\r\n\t\t\t * @returns - The object representing the options for the specified list view\r\n\t\t\t * or undefined if preferences for the specified list view cannot be found\r\n\t\t\t */\r\n\t\t\tfunction get(listView) {\r\n\t\t\t\tvar storedPreferences = sessionStore.get(storageKey, composeStoragePrefix(storagePrefix));\r\n\r\n\t\t\t\tif (util.isObject(storedPreferences)) {\r\n\t\t\t\t\treturn storedPreferences[listView];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which updates the list options for the specified list view in local storage\r\n\t\t\t * \r\n\t\t\t * @param listView - The list view for which the params are updated\r\n\t\t\t * @param listViewParams - The options to update\r\n\t\t\t */\r\n\t\t\tfunction update(listView, listViewParams) {\r\n\t\t\t\tvar composite = composeStoragePrefix(storagePrefix);\r\n\t\t\t\tvar currentPreferences = sessionStore.get(storageKey, composite) || {};\r\n\t\t\t\tvar newPreference = {};\r\n\t\t\t\tnewPreference[listView] = _.extend({}, currentPreferences[listView], listViewParams);\r\n\t\t\t\tvar preferences = _.extend({}, currentPreferences, newPreference);\r\n\t\t\t\tsessionStore.set(storageKey, preferences, composite);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Removes the params with given names from the stored options of the given list view\r\n\t\t\t */\r\n\t\t\tfunction remove(listView, paramsNamesToRemove) {\r\n\t\t\t\tvar composite = composeStoragePrefix(storagePrefix);\r\n\t\t\t\tvar currentPreferences = sessionStore.get(storageKey, composite) || {};\r\n\t\t\t\tvar newPreference = {};\r\n\t\t\t\tnewPreference[listView] = _.omit((currentPreferences[listView] || {}), paramsNamesToRemove);\r\n\t\t\t\tvar preferences = _.extend({}, currentPreferences, newPreference);\r\n\t\t\t\tsessionStore.set(storageKey, preferences, composite);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Function which removes the params from storage\r\n\t\t\t */\r\n\t\t\tfunction clear() {\r\n\t\t\t\tsessionStore.remove(storageKey, composeStoragePrefix(storagePrefix));\r\n\t\t\t}\r\n\r\n\t\t\t/* Returns the storage prefix taking into account the user id */\r\n\t\t\tfunction composeStoragePrefix(initial) {\r\n\t\t\t\tvar userId = authenticationData.userData.userId;\r\n\t\t\t\treturn initial + '_' + userId;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn listsParamsStore;\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/services/session-preferences/lists-params-store.service.js","define([\r\n    './welcome.component'\r\n], function (\r\n    welcomeComponentModule) {\r\n    'use strict';\r\n\r\n    return function (module) {\r\n        module.component(\r\n            welcomeComponentModule.welcomeComponent.selector,\r\n            welcomeComponentModule.welcomeComponent);\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/app/welcome/_loader.js","export const welcomeComponent = {\r\n    templateUrl: 'src/app/welcome/welcome.html',\r\n    selector: 'diWelcome',\r\n    controllerAs: 'welcomeCtrl',\r\n    controller:\r\n        class WelcomeController{\r\n            constructor(\r\n            $stateParams,\r\n            diState,\r\n            validationInitialiser,\r\n            validationRulesStore,\r\n            userAuthenticationProxy,\r\n            authenticationClientEventSubscriber\r\n            ) {\r\n                this.stateParams = $stateParams;\r\n                this.diState = diState;\r\n                this.validationInitialiser = validationInitialiser;\r\n                this.validationRulesStore = validationRulesStore;\r\n                this.userAuthenticationProxy = userAuthenticationProxy;\r\n                this.authenticationClientEventSubscriber = authenticationClientEventSubscriber;\r\n\r\n                this.onForgotPasswordClick = this.onForgotPasswordClick.bind(this);\r\n                this.onPasswordReset = this.onPasswordReset.bind(this);\r\n                this.onPasswordSet = this.onPasswordSet.bind(this);\r\n                this.onBackToLoginClick = this.onBackToLoginClick.bind(this);\r\n                this.subscribeToResetTokenChange = this.subscribeToResetTokenChange.bind(this);\r\n                this.subscribeToFirstLogin = this.subscribeToFirstLogin.bind(this);\r\n                this.subscribeToPasswordExpired = this.subscribeToPasswordExpired.bind(this);\r\n                this.subscribeToUsernameChange = this.subscribeToUsernameChange.bind(this);\r\n            }\r\n\r\n            $onInit() {\r\n                this.init();\r\n            }\r\n\r\n            static get $inject() {\r\n                return [\r\n                    '$stateParams',\r\n                    'diState',\r\n                    'validationInitialiser',\r\n                    'validationRulesStore',\r\n                    'userAuthenticationProxy',\r\n                    'authenticationClientEventSubscriber'\r\n                ];\r\n            }\r\n\r\n            init() {\r\n                this.firstTimeLogin = false;\r\n                this.userName = '';\r\n                this.setUpToken = '';\r\n                this.passwordExpired = false;\r\n\r\n                if (this.stateParams.resetToken) {\r\n                    this.showForgotPassword = true;\r\n                    this.resetToken = decodeURIComponent(this.stateParams.resetToken);\r\n                } else {\r\n                    this.showForgotPassword = false;\r\n                    this.resetToken = '';\r\n                }\r\n\r\n                if (this.stateParams.reason) {\r\n                    this.removeAllPopups(this.stateParams.reason);\r\n                }\r\n\r\n                this.diState.subscribeToStateChange('welcome', this.setAuthenticationValidationRules);\r\n\r\n                this.setAuthenticationValidationRules();\r\n            }\r\n\r\n            onForgotPasswordClick() {\r\n                this.showForgotPassword = true;\r\n            }\r\n\r\n            onPasswordReset() {\r\n                this.reloadWelcomePage();\r\n            }\r\n\r\n            onPasswordSet(userName, password) {\r\n                this.userAuthenticationProxy.login(userName, password).then((data) => {\r\n                    let authenticationResult = data.result;\r\n\r\n                    if (authenticationResult.success) {\r\n                        this.authenticationClientEventSubscriber.loggedIn(data);\r\n                    }\r\n                });\r\n            }\r\n\r\n            onBackToLoginClick() {\r\n                this.reloadWelcomePage();\r\n            }\r\n\r\n            reloadWelcomePage() {\r\n                this.firstTimeLogin = false;\r\n                this.showForgotPassword = false;\r\n                this.passwordExpired = false;\r\n                this.diState.go('welcome');\r\n            }\r\n\r\n            subscribeToResetTokenChange(subscription) {\r\n                subscription(this.resetToken);\r\n            }\r\n\r\n            subscribeToFirstLogin(data) {\r\n                this.firstTimeLogin = true;\r\n                this.userName = data.username;\r\n                this.setUpToken = data.setUpToken;\r\n                this.passwordExpired = false;\r\n            }\r\n\r\n            subscribeToPasswordExpired(data) {\r\n                this.firstTimeLogin = true;\r\n                this.userName = data.userName;\r\n                this.setUpToken = data.result.token;\r\n                this.passwordExpired = true;\r\n            }\r\n\r\n            subscribeToUsernameChange(subscription) {\r\n                subscription(this.userName, this.setUpToken, this.passwordExpired);\r\n            }\r\n\r\n            removeAllPopups(allowModals) {\r\n                if (!allowModals) {\r\n                    $(\".bootbox\").remove(); //remove any modal bootbox popups\r\n                    $(\".modal-backdrop\").remove(); //remove any modal backdrops\r\n                }\r\n\r\n                $(\".pika-single\").remove(); //remove any date pickers\r\n            }\r\n\r\n            setAuthenticationValidationRules() {\r\n                let authenticationRules = {\r\n                    'authentication': {\r\n                        \"username\": {\r\n                            \"required\": {},\r\n                            \"email\": {},\r\n                            \"size\": {\r\n                                \"min\": 1\r\n                            }\r\n                        },\r\n                        \"password\": {\r\n                            \"required\": {},\r\n                            \"size\": {\r\n                                \"min\": 1\r\n                            }\r\n                        }\r\n                    },\r\n                    'forgotPasswordEmail': {\r\n                        \"emailAddress\": {\r\n                            \"required\": {},\r\n                            \"email\": {}\r\n                        }\r\n                    },\r\n                    'forgotPasswordSecurity': {\r\n                        \"securityAnswer\": {\r\n                            \"required\": {}\r\n                        }\r\n                    },\r\n                    'changePassword': {\r\n                        \"oldPassword\": {\r\n                            \"required\": {}\r\n                        },\r\n                        \"newPassword\": {\r\n                            \"required\": {}\r\n\r\n                        },\r\n                        \"confirmPassword\": {\r\n                            \"required\": {},\r\n                            \"equalIfSelfSet\": {\r\n                                \"requireModels\": ['newPassword'],\r\n                                \"clientComparerName\": \"default\"\r\n                            }\r\n                        }\r\n                    },\r\n                    'resetPassword': {\r\n                        \"resetToken\": {\r\n                            \"required\": {}\r\n                        },\r\n                        \"newPassword\": {\r\n                            \"required\": {}\r\n                        },\r\n                        \"confirmPassword\": {\r\n                            \"required\": {},\r\n                            \"equalIfSelfSet\": {\r\n                                \"requireModels\": ['newPassword'],\r\n                                \"clientComparerName\": \"default\"\r\n                            }\r\n                        }\r\n                    },\r\n                    'passwordExpired': {\r\n                        \"userName\": {\r\n                            \"required\": {}\r\n                        },\r\n                        \"token\": {\r\n                            \"required\": {}\r\n                        },\r\n                        \"newPassword\": {\r\n                            \"required\": {}\r\n                        },\r\n                        \"confirmPassword\": {\r\n                            \"required\": {},\r\n                            \"equalIfSelfSet\": {\r\n                                \"requireModels\": ['newPassword'],\r\n                                \"clientComparerName\": \"default\"\r\n                            }\r\n                        }\r\n                    },\r\n                    'setPassword': {\r\n                        \"userName\": {\r\n                            \"required\": {}\r\n                        },\r\n                        \"token\": {\r\n                            \"required\": {}\r\n                        },\r\n                        \"newPassword\": {\r\n                            \"required\": {}\r\n                        },\r\n                        \"confirmPassword\": {\r\n                            \"required\": {},\r\n                            \"equalIfSelfSet\": {\r\n                                \"requireModels\": ['newPassword'],\r\n                                \"clientComparerName\": \"default\"\r\n                            }\r\n                        },\r\n                        \"securityQuestion\": {\r\n                            \"required\": {}\r\n                        },\r\n                        \"securityAnswer\": {\r\n                            \"required\": {}\r\n                        }\r\n                    },\r\n                    'editSecurityQuestion': {\r\n                        \"securityQuestion\": {\r\n                            \"required\": {}\r\n                        },\r\n                        \"securityAnswer\": {\r\n                            \"required\": {}\r\n                        }\r\n                    }\r\n                };\r\n\r\n                if (this.validationInitialiser) {\r\n                    this.validationInitialiser.applyValidationRules(authenticationRules);\r\n                }\r\n\r\n                if (this.validationRulesStore) {\r\n                    this.validationRulesStore.setValidationRules(authenticationRules);\r\n                }\r\n            }\r\n        }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/welcome/welcome.component.js","/**\n * @license AngularJS v1.6.5\n * (c) 2010-2017 Google, Inc. http://angularjs.org\n * License: MIT\n */\n(function(window, angular) {'use strict';\n\nvar ELEMENT_NODE = 1;\nvar COMMENT_NODE = 8;\n\nvar ADD_CLASS_SUFFIX = '-add';\nvar REMOVE_CLASS_SUFFIX = '-remove';\nvar EVENT_CLASS_PREFIX = 'ng-';\nvar ACTIVE_CLASS_SUFFIX = '-active';\nvar PREPARE_CLASS_SUFFIX = '-prepare';\n\nvar NG_ANIMATE_CLASSNAME = 'ng-animate';\nvar NG_ANIMATE_CHILDREN_DATA = '$$ngAnimateChildren';\n\n// Detect proper transitionend/animationend event names.\nvar CSS_PREFIX = '', TRANSITION_PROP, TRANSITIONEND_EVENT, ANIMATION_PROP, ANIMATIONEND_EVENT;\n\n// If unprefixed events are not supported but webkit-prefixed are, use the latter.\n// Otherwise, just use W3C names, browsers not supporting them at all will just ignore them.\n// Note: Chrome implements `window.onwebkitanimationend` and doesn't implement `window.onanimationend`\n// but at the same time dispatches the `animationend` event and not `webkitAnimationEnd`.\n// Register both events in case `window.onanimationend` is not supported because of that,\n// do the same for `transitionend` as Safari is likely to exhibit similar behavior.\n// Also, the only modern browser that uses vendor prefixes for transitions/keyframes is webkit\n// therefore there is no reason to test anymore for other vendor prefixes:\n// http://caniuse.com/#search=transition\nif ((window.ontransitionend === undefined) && (window.onwebkittransitionend !== undefined)) {\n  CSS_PREFIX = '-webkit-';\n  TRANSITION_PROP = 'WebkitTransition';\n  TRANSITIONEND_EVENT = 'webkitTransitionEnd transitionend';\n} else {\n  TRANSITION_PROP = 'transition';\n  TRANSITIONEND_EVENT = 'transitionend';\n}\n\nif ((window.onanimationend === undefined) && (window.onwebkitanimationend !== undefined)) {\n  CSS_PREFIX = '-webkit-';\n  ANIMATION_PROP = 'WebkitAnimation';\n  ANIMATIONEND_EVENT = 'webkitAnimationEnd animationend';\n} else {\n  ANIMATION_PROP = 'animation';\n  ANIMATIONEND_EVENT = 'animationend';\n}\n\nvar DURATION_KEY = 'Duration';\nvar PROPERTY_KEY = 'Property';\nvar DELAY_KEY = 'Delay';\nvar TIMING_KEY = 'TimingFunction';\nvar ANIMATION_ITERATION_COUNT_KEY = 'IterationCount';\nvar ANIMATION_PLAYSTATE_KEY = 'PlayState';\nvar SAFE_FAST_FORWARD_DURATION_VALUE = 9999;\n\nvar ANIMATION_DELAY_PROP = ANIMATION_PROP + DELAY_KEY;\nvar ANIMATION_DURATION_PROP = ANIMATION_PROP + DURATION_KEY;\nvar TRANSITION_DELAY_PROP = TRANSITION_PROP + DELAY_KEY;\nvar TRANSITION_DURATION_PROP = TRANSITION_PROP + DURATION_KEY;\n\nvar ngMinErr = angular.$$minErr('ng');\nfunction assertArg(arg, name, reason) {\n  if (!arg) {\n    throw ngMinErr('areq', 'Argument \\'{0}\\' is {1}', (name || '?'), (reason || 'required'));\n  }\n  return arg;\n}\n\nfunction mergeClasses(a,b) {\n  if (!a && !b) return '';\n  if (!a) return b;\n  if (!b) return a;\n  if (isArray(a)) a = a.join(' ');\n  if (isArray(b)) b = b.join(' ');\n  return a + ' ' + b;\n}\n\nfunction packageStyles(options) {\n  var styles = {};\n  if (options && (options.to || options.from)) {\n    styles.to = options.to;\n    styles.from = options.from;\n  }\n  return styles;\n}\n\nfunction pendClasses(classes, fix, isPrefix) {\n  var className = '';\n  classes = isArray(classes)\n      ? classes\n      : classes && isString(classes) && classes.length\n          ? classes.split(/\\s+/)\n          : [];\n  forEach(classes, function(klass, i) {\n    if (klass && klass.length > 0) {\n      className += (i > 0) ? ' ' : '';\n      className += isPrefix ? fix + klass\n                            : klass + fix;\n    }\n  });\n  return className;\n}\n\nfunction removeFromArray(arr, val) {\n  var index = arr.indexOf(val);\n  if (val >= 0) {\n    arr.splice(index, 1);\n  }\n}\n\nfunction stripCommentsFromElement(element) {\n  if (element instanceof jqLite) {\n    switch (element.length) {\n      case 0:\n        return element;\n\n      case 1:\n        // there is no point of stripping anything if the element\n        // is the only element within the jqLite wrapper.\n        // (it's important that we retain the element instance.)\n        if (element[0].nodeType === ELEMENT_NODE) {\n          return element;\n        }\n        break;\n\n      default:\n        return jqLite(extractElementNode(element));\n    }\n  }\n\n  if (element.nodeType === ELEMENT_NODE) {\n    return jqLite(element);\n  }\n}\n\nfunction extractElementNode(element) {\n  if (!element[0]) return element;\n  for (var i = 0; i < element.length; i++) {\n    var elm = element[i];\n    if (elm.nodeType === ELEMENT_NODE) {\n      return elm;\n    }\n  }\n}\n\nfunction $$addClass($$jqLite, element, className) {\n  forEach(element, function(elm) {\n    $$jqLite.addClass(elm, className);\n  });\n}\n\nfunction $$removeClass($$jqLite, element, className) {\n  forEach(element, function(elm) {\n    $$jqLite.removeClass(elm, className);\n  });\n}\n\nfunction applyAnimationClassesFactory($$jqLite) {\n  return function(element, options) {\n    if (options.addClass) {\n      $$addClass($$jqLite, element, options.addClass);\n      options.addClass = null;\n    }\n    if (options.removeClass) {\n      $$removeClass($$jqLite, element, options.removeClass);\n      options.removeClass = null;\n    }\n  };\n}\n\nfunction prepareAnimationOptions(options) {\n  options = options || {};\n  if (!options.$$prepared) {\n    var domOperation = options.domOperation || noop;\n    options.domOperation = function() {\n      options.$$domOperationFired = true;\n      domOperation();\n      domOperation = noop;\n    };\n    options.$$prepared = true;\n  }\n  return options;\n}\n\nfunction applyAnimationStyles(element, options) {\n  applyAnimationFromStyles(element, options);\n  applyAnimationToStyles(element, options);\n}\n\nfunction applyAnimationFromStyles(element, options) {\n  if (options.from) {\n    element.css(options.from);\n    options.from = null;\n  }\n}\n\nfunction applyAnimationToStyles(element, options) {\n  if (options.to) {\n    element.css(options.to);\n    options.to = null;\n  }\n}\n\nfunction mergeAnimationDetails(element, oldAnimation, newAnimation) {\n  var target = oldAnimation.options || {};\n  var newOptions = newAnimation.options || {};\n\n  var toAdd = (target.addClass || '') + ' ' + (newOptions.addClass || '');\n  var toRemove = (target.removeClass || '') + ' ' + (newOptions.removeClass || '');\n  var classes = resolveElementClasses(element.attr('class'), toAdd, toRemove);\n\n  if (newOptions.preparationClasses) {\n    target.preparationClasses = concatWithSpace(newOptions.preparationClasses, target.preparationClasses);\n    delete newOptions.preparationClasses;\n  }\n\n  // noop is basically when there is no callback; otherwise something has been set\n  var realDomOperation = target.domOperation !== noop ? target.domOperation : null;\n\n  extend(target, newOptions);\n\n  // TODO(matsko or sreeramu): proper fix is to maintain all animation callback in array and call at last,but now only leave has the callback so no issue with this.\n  if (realDomOperation) {\n    target.domOperation = realDomOperation;\n  }\n\n  if (classes.addClass) {\n    target.addClass = classes.addClass;\n  } else {\n    target.addClass = null;\n  }\n\n  if (classes.removeClass) {\n    target.removeClass = classes.removeClass;\n  } else {\n    target.removeClass = null;\n  }\n\n  oldAnimation.addClass = target.addClass;\n  oldAnimation.removeClass = target.removeClass;\n\n  return target;\n}\n\nfunction resolveElementClasses(existing, toAdd, toRemove) {\n  var ADD_CLASS = 1;\n  var REMOVE_CLASS = -1;\n\n  var flags = {};\n  existing = splitClassesToLookup(existing);\n\n  toAdd = splitClassesToLookup(toAdd);\n  forEach(toAdd, function(value, key) {\n    flags[key] = ADD_CLASS;\n  });\n\n  toRemove = splitClassesToLookup(toRemove);\n  forEach(toRemove, function(value, key) {\n    flags[key] = flags[key] === ADD_CLASS ? null : REMOVE_CLASS;\n  });\n\n  var classes = {\n    addClass: '',\n    removeClass: ''\n  };\n\n  forEach(flags, function(val, klass) {\n    var prop, allow;\n    if (val === ADD_CLASS) {\n      prop = 'addClass';\n      allow = !existing[klass] || existing[klass + REMOVE_CLASS_SUFFIX];\n    } else if (val === REMOVE_CLASS) {\n      prop = 'removeClass';\n      allow = existing[klass] || existing[klass + ADD_CLASS_SUFFIX];\n    }\n    if (allow) {\n      if (classes[prop].length) {\n        classes[prop] += ' ';\n      }\n      classes[prop] += klass;\n    }\n  });\n\n  function splitClassesToLookup(classes) {\n    if (isString(classes)) {\n      classes = classes.split(' ');\n    }\n\n    var obj = {};\n    forEach(classes, function(klass) {\n      // sometimes the split leaves empty string values\n      // incase extra spaces were applied to the options\n      if (klass.length) {\n        obj[klass] = true;\n      }\n    });\n    return obj;\n  }\n\n  return classes;\n}\n\nfunction getDomNode(element) {\n  return (element instanceof jqLite) ? element[0] : element;\n}\n\nfunction applyGeneratedPreparationClasses(element, event, options) {\n  var classes = '';\n  if (event) {\n    classes = pendClasses(event, EVENT_CLASS_PREFIX, true);\n  }\n  if (options.addClass) {\n    classes = concatWithSpace(classes, pendClasses(options.addClass, ADD_CLASS_SUFFIX));\n  }\n  if (options.removeClass) {\n    classes = concatWithSpace(classes, pendClasses(options.removeClass, REMOVE_CLASS_SUFFIX));\n  }\n  if (classes.length) {\n    options.preparationClasses = classes;\n    element.addClass(classes);\n  }\n}\n\nfunction clearGeneratedClasses(element, options) {\n  if (options.preparationClasses) {\n    element.removeClass(options.preparationClasses);\n    options.preparationClasses = null;\n  }\n  if (options.activeClasses) {\n    element.removeClass(options.activeClasses);\n    options.activeClasses = null;\n  }\n}\n\nfunction blockTransitions(node, duration) {\n  // we use a negative delay value since it performs blocking\n  // yet it doesn't kill any existing transitions running on the\n  // same element which makes this safe for class-based animations\n  var value = duration ? '-' + duration + 's' : '';\n  applyInlineStyle(node, [TRANSITION_DELAY_PROP, value]);\n  return [TRANSITION_DELAY_PROP, value];\n}\n\nfunction blockKeyframeAnimations(node, applyBlock) {\n  var value = applyBlock ? 'paused' : '';\n  var key = ANIMATION_PROP + ANIMATION_PLAYSTATE_KEY;\n  applyInlineStyle(node, [key, value]);\n  return [key, value];\n}\n\nfunction applyInlineStyle(node, styleTuple) {\n  var prop = styleTuple[0];\n  var value = styleTuple[1];\n  node.style[prop] = value;\n}\n\nfunction concatWithSpace(a,b) {\n  if (!a) return b;\n  if (!b) return a;\n  return a + ' ' + b;\n}\n\nvar $$rAFSchedulerFactory = ['$$rAF', function($$rAF) {\n  var queue, cancelFn;\n\n  function scheduler(tasks) {\n    // we make a copy since RAFScheduler mutates the state\n    // of the passed in array variable and this would be difficult\n    // to track down on the outside code\n    queue = queue.concat(tasks);\n    nextTick();\n  }\n\n  queue = scheduler.queue = [];\n\n  /* waitUntilQuiet does two things:\n   * 1. It will run the FINAL `fn` value only when an uncanceled RAF has passed through\n   * 2. It will delay the next wave of tasks from running until the quiet `fn` has run.\n   *\n   * The motivation here is that animation code can request more time from the scheduler\n   * before the next wave runs. This allows for certain DOM properties such as classes to\n   * be resolved in time for the next animation to run.\n   */\n  scheduler.waitUntilQuiet = function(fn) {\n    if (cancelFn) cancelFn();\n\n    cancelFn = $$rAF(function() {\n      cancelFn = null;\n      fn();\n      nextTick();\n    });\n  };\n\n  return scheduler;\n\n  function nextTick() {\n    if (!queue.length) return;\n\n    var items = queue.shift();\n    for (var i = 0; i < items.length; i++) {\n      items[i]();\n    }\n\n    if (!cancelFn) {\n      $$rAF(function() {\n        if (!cancelFn) nextTick();\n      });\n    }\n  }\n}];\n\n/**\n * @ngdoc directive\n * @name ngAnimateChildren\n * @restrict AE\n * @element ANY\n *\n * @description\n *\n * ngAnimateChildren allows you to specify that children of this element should animate even if any\n * of the children's parents are currently animating. By default, when an element has an active `enter`, `leave`, or `move`\n * (structural) animation, child elements that also have an active structural animation are not animated.\n *\n * Note that even if `ngAnimateChildren` is set, no child animations will run when the parent element is removed from the DOM (`leave` animation).\n *\n *\n * @param {string} ngAnimateChildren If the value is empty, `true` or `on`,\n *     then child animations are allowed. If the value is `false`, child animations are not allowed.\n *\n * @example\n * <example module=\"ngAnimateChildren\" name=\"ngAnimateChildren\" deps=\"angular-animate.js\" animations=\"true\">\n     <file name=\"index.html\">\n       <div ng-controller=\"MainController as main\">\n         <label>Show container? <input type=\"checkbox\" ng-model=\"main.enterElement\" /></label>\n         <label>Animate children? <input type=\"checkbox\" ng-model=\"main.animateChildren\" /></label>\n         <hr>\n         <div ng-animate-children=\"{{main.animateChildren}}\">\n           <div ng-if=\"main.enterElement\" class=\"container\">\n             List of items:\n             <div ng-repeat=\"item in [0, 1, 2, 3]\" class=\"item\">Item {{item}}</div>\n           </div>\n         </div>\n       </div>\n     </file>\n     <file name=\"animations.css\">\n\n      .container.ng-enter,\n      .container.ng-leave {\n        transition: all ease 1.5s;\n      }\n\n      .container.ng-enter,\n      .container.ng-leave-active {\n        opacity: 0;\n      }\n\n      .container.ng-leave,\n      .container.ng-enter-active {\n        opacity: 1;\n      }\n\n      .item {\n        background: firebrick;\n        color: #FFF;\n        margin-bottom: 10px;\n      }\n\n      .item.ng-enter,\n      .item.ng-leave {\n        transition: transform 1.5s ease;\n      }\n\n      .item.ng-enter {\n        transform: translateX(50px);\n      }\n\n      .item.ng-enter-active {\n        transform: translateX(0);\n      }\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngAnimateChildren', ['ngAnimate'])\n        .controller('MainController', function MainController() {\n          this.animateChildren = false;\n          this.enterElement = false;\n        });\n    </file>\n  </example>\n */\nvar $$AnimateChildrenDirective = ['$interpolate', function($interpolate) {\n  return {\n    link: function(scope, element, attrs) {\n      var val = attrs.ngAnimateChildren;\n      if (isString(val) && val.length === 0) { //empty attribute\n        element.data(NG_ANIMATE_CHILDREN_DATA, true);\n      } else {\n        // Interpolate and set the value, so that it is available to\n        // animations that run right after compilation\n        setData($interpolate(val)(scope));\n        attrs.$observe('ngAnimateChildren', setData);\n      }\n\n      function setData(value) {\n        value = value === 'on' || value === 'true';\n        element.data(NG_ANIMATE_CHILDREN_DATA, value);\n      }\n    }\n  };\n}];\n\n/* exported $AnimateCssProvider */\n\nvar ANIMATE_TIMER_KEY = '$$animateCss';\n\n/**\n * @ngdoc service\n * @name $animateCss\n * @kind object\n *\n * @description\n * The `$animateCss` service is a useful utility to trigger customized CSS-based transitions/keyframes\n * from a JavaScript-based animation or directly from a directive. The purpose of `$animateCss` is NOT\n * to side-step how `$animate` and ngAnimate work, but the goal is to allow pre-existing animations or\n * directives to create more complex animations that can be purely driven using CSS code.\n *\n * Note that only browsers that support CSS transitions and/or keyframe animations are capable of\n * rendering animations triggered via `$animateCss` (bad news for IE9 and lower).\n *\n * ## Usage\n * Once again, `$animateCss` is designed to be used inside of a registered JavaScript animation that\n * is powered by ngAnimate. It is possible to use `$animateCss` directly inside of a directive, however,\n * any automatic control over cancelling animations and/or preventing animations from being run on\n * child elements will not be handled by Angular. For this to work as expected, please use `$animate` to\n * trigger the animation and then setup a JavaScript animation that injects `$animateCss` to trigger\n * the CSS animation.\n *\n * The example below shows how we can create a folding animation on an element using `ng-if`:\n *\n * ```html\n * <!-- notice the `fold-animation` CSS class -->\n * <div ng-if=\"onOff\" class=\"fold-animation\">\n *   This element will go BOOM\n * </div>\n * <button ng-click=\"onOff=true\">Fold In</button>\n * ```\n *\n * Now we create the **JavaScript animation** that will trigger the CSS transition:\n *\n * ```js\n * ngModule.animation('.fold-animation', ['$animateCss', function($animateCss) {\n *   return {\n *     enter: function(element, doneFn) {\n *       var height = element[0].offsetHeight;\n *       return $animateCss(element, {\n *         from: { height:'0px' },\n *         to: { height:height + 'px' },\n *         duration: 1 // one second\n *       });\n *     }\n *   }\n * }]);\n * ```\n *\n * ## More Advanced Uses\n *\n * `$animateCss` is the underlying code that ngAnimate uses to power **CSS-based animations** behind the scenes. Therefore CSS hooks\n * like `.ng-EVENT`, `.ng-EVENT-active`, `.ng-EVENT-stagger` are all features that can be triggered using `$animateCss` via JavaScript code.\n *\n * This also means that just about any combination of adding classes, removing classes, setting styles, dynamically setting a keyframe animation,\n * applying a hardcoded duration or delay value, changing the animation easing or applying a stagger animation are all options that work with\n * `$animateCss`. The service itself is smart enough to figure out the combination of options and examine the element styling properties in order\n * to provide a working animation that will run in CSS.\n *\n * The example below showcases a more advanced version of the `.fold-animation` from the example above:\n *\n * ```js\n * ngModule.animation('.fold-animation', ['$animateCss', function($animateCss) {\n *   return {\n *     enter: function(element, doneFn) {\n *       var height = element[0].offsetHeight;\n *       return $animateCss(element, {\n *         addClass: 'red large-text pulse-twice',\n *         easing: 'ease-out',\n *         from: { height:'0px' },\n *         to: { height:height + 'px' },\n *         duration: 1 // one second\n *       });\n *     }\n *   }\n * }]);\n * ```\n *\n * Since we're adding/removing CSS classes then the CSS transition will also pick those up:\n *\n * ```css\n * /&#42; since a hardcoded duration value of 1 was provided in the JavaScript animation code,\n * the CSS classes below will be transitioned despite them being defined as regular CSS classes &#42;/\n * .red { background:red; }\n * .large-text { font-size:20px; }\n *\n * /&#42; we can also use a keyframe animation and $animateCss will make it work alongside the transition &#42;/\n * .pulse-twice {\n *   animation: 0.5s pulse linear 2;\n *   -webkit-animation: 0.5s pulse linear 2;\n * }\n *\n * @keyframes pulse {\n *   from { transform: scale(0.5); }\n *   to { transform: scale(1.5); }\n * }\n *\n * @-webkit-keyframes pulse {\n *   from { -webkit-transform: scale(0.5); }\n *   to { -webkit-transform: scale(1.5); }\n * }\n * ```\n *\n * Given this complex combination of CSS classes, styles and options, `$animateCss` will figure everything out and make the animation happen.\n *\n * ## How the Options are handled\n *\n * `$animateCss` is very versatile and intelligent when it comes to figuring out what configurations to apply to the element to ensure the animation\n * works with the options provided. Say for example we were adding a class that contained a keyframe value and we wanted to also animate some inline\n * styles using the `from` and `to` properties.\n *\n * ```js\n * var animator = $animateCss(element, {\n *   from: { background:'red' },\n *   to: { background:'blue' }\n * });\n * animator.start();\n * ```\n *\n * ```css\n * .rotating-animation {\n *   animation:0.5s rotate linear;\n *   -webkit-animation:0.5s rotate linear;\n * }\n *\n * @keyframes rotate {\n *   from { transform: rotate(0deg); }\n *   to { transform: rotate(360deg); }\n * }\n *\n * @-webkit-keyframes rotate {\n *   from { -webkit-transform: rotate(0deg); }\n *   to { -webkit-transform: rotate(360deg); }\n * }\n * ```\n *\n * The missing pieces here are that we do not have a transition set (within the CSS code nor within the `$animateCss` options) and the duration of the animation is\n * going to be detected from what the keyframe styles on the CSS class are. In this event, `$animateCss` will automatically create an inline transition\n * style matching the duration detected from the keyframe style (which is present in the CSS class that is being added) and then prepare both the transition\n * and keyframe animations to run in parallel on the element. Then when the animation is underway the provided `from` and `to` CSS styles will be applied\n * and spread across the transition and keyframe animation.\n *\n * ## What is returned\n *\n * `$animateCss` works in two stages: a preparation phase and an animation phase. Therefore when `$animateCss` is first called it will NOT actually\n * start the animation. All that is going on here is that the element is being prepared for the animation (which means that the generated CSS classes are\n * added and removed on the element). Once `$animateCss` is called it will return an object with the following properties:\n *\n * ```js\n * var animator = $animateCss(element, { ... });\n * ```\n *\n * Now what do the contents of our `animator` variable look like:\n *\n * ```js\n * {\n *   // starts the animation\n *   start: Function,\n *\n *   // ends (aborts) the animation\n *   end: Function\n * }\n * ```\n *\n * To actually start the animation we need to run `animation.start()` which will then return a promise that we can hook into to detect when the animation ends.\n * If we choose not to run the animation then we MUST run `animation.end()` to perform a cleanup on the element (since some CSS classes and styles may have been\n * applied to the element during the preparation phase). Note that all other properties such as duration, delay, transitions and keyframes are just properties\n * and that changing them will not reconfigure the parameters of the animation.\n *\n * ### runner.done() vs runner.then()\n * It is documented that `animation.start()` will return a promise object and this is true, however, there is also an additional method available on the\n * runner called `.done(callbackFn)`. The done method works the same as `.finally(callbackFn)`, however, it does **not trigger a digest to occur**.\n * Therefore, for performance reasons, it's always best to use `runner.done(callback)` instead of `runner.then()`, `runner.catch()` or `runner.finally()`\n * unless you really need a digest to kick off afterwards.\n *\n * Keep in mind that, to make this easier, ngAnimate has tweaked the JS animations API to recognize when a runner instance is returned from $animateCss\n * (so there is no need to call `runner.done(doneFn)` inside of your JavaScript animation code).\n * Check the {@link ngAnimate.$animateCss#usage animation code above} to see how this works.\n *\n * @param {DOMElement} element the element that will be animated\n * @param {object} options the animation-related options that will be applied during the animation\n *\n * * `event` - The DOM event (e.g. enter, leave, move). When used, a generated CSS class of `ng-EVENT` and `ng-EVENT-active` will be applied\n * to the element during the animation. Multiple events can be provided when spaces are used as a separator. (Note that this will not perform any DOM operation.)\n * * `structural` - Indicates that the `ng-` prefix will be added to the event class. Setting to `false` or omitting will turn `ng-EVENT` and\n * `ng-EVENT-active` in `EVENT` and `EVENT-active`. Unused if `event` is omitted.\n * * `easing` - The CSS easing value that will be applied to the transition or keyframe animation (or both).\n * * `transitionStyle` - The raw CSS transition style that will be used (e.g. `1s linear all`).\n * * `keyframeStyle` - The raw CSS keyframe animation style that will be used (e.g. `1s my_animation linear`).\n * * `from` - The starting CSS styles (a key/value object) that will be applied at the start of the animation.\n * * `to` - The ending CSS styles (a key/value object) that will be applied across the animation via a CSS transition.\n * * `addClass` - A space separated list of CSS classes that will be added to the element and spread across the animation.\n * * `removeClass` - A space separated list of CSS classes that will be removed from the element and spread across the animation.\n * * `duration` - A number value representing the total duration of the transition and/or keyframe (note that a value of 1 is 1000ms). If a value of `0`\n * is provided then the animation will be skipped entirely.\n * * `delay` - A number value representing the total delay of the transition and/or keyframe (note that a value of 1 is 1000ms). If a value of `true` is\n * used then whatever delay value is detected from the CSS classes will be mirrored on the elements styles (e.g. by setting delay true then the style value\n * of the element will be `transition-delay: DETECTED_VALUE`). Using `true` is useful when you want the CSS classes and inline styles to all share the same\n * CSS delay value.\n * * `stagger` - A numeric time value representing the delay between successively animated elements\n * ({@link ngAnimate#css-staggering-animations Click here to learn how CSS-based staggering works in ngAnimate.})\n * * `staggerIndex` - The numeric index representing the stagger item (e.g. a value of 5 is equal to the sixth item in the stagger; therefore when a\n *   `stagger` option value of `0.1` is used then there will be a stagger delay of `600ms`)\n * * `applyClassesEarly` - Whether or not the classes being added or removed will be used when detecting the animation. This is set by `$animate` when enter/leave/move animations are fired to ensure that the CSS classes are resolved in time. (Note that this will prevent any transitions from occurring on the classes being added and removed.)\n * * `cleanupStyles` - Whether or not the provided `from` and `to` styles will be removed once\n *    the animation is closed. This is useful for when the styles are used purely for the sake of\n *    the animation and do not have a lasting visual effect on the element (e.g. a collapse and open animation).\n *    By default this value is set to `false`.\n *\n * @return {object} an object with start and end methods and details about the animation.\n *\n * * `start` - The method to start the animation. This will return a `Promise` when called.\n * * `end` - This method will cancel the animation and remove all applied CSS classes and styles.\n */\nvar ONE_SECOND = 1000;\n\nvar ELAPSED_TIME_MAX_DECIMAL_PLACES = 3;\nvar CLOSING_TIME_BUFFER = 1.5;\n\nvar DETECT_CSS_PROPERTIES = {\n  transitionDuration:      TRANSITION_DURATION_PROP,\n  transitionDelay:         TRANSITION_DELAY_PROP,\n  transitionProperty:      TRANSITION_PROP + PROPERTY_KEY,\n  animationDuration:       ANIMATION_DURATION_PROP,\n  animationDelay:          ANIMATION_DELAY_PROP,\n  animationIterationCount: ANIMATION_PROP + ANIMATION_ITERATION_COUNT_KEY\n};\n\nvar DETECT_STAGGER_CSS_PROPERTIES = {\n  transitionDuration:      TRANSITION_DURATION_PROP,\n  transitionDelay:         TRANSITION_DELAY_PROP,\n  animationDuration:       ANIMATION_DURATION_PROP,\n  animationDelay:          ANIMATION_DELAY_PROP\n};\n\nfunction getCssKeyframeDurationStyle(duration) {\n  return [ANIMATION_DURATION_PROP, duration + 's'];\n}\n\nfunction getCssDelayStyle(delay, isKeyframeAnimation) {\n  var prop = isKeyframeAnimation ? ANIMATION_DELAY_PROP : TRANSITION_DELAY_PROP;\n  return [prop, delay + 's'];\n}\n\nfunction computeCssStyles($window, element, properties) {\n  var styles = Object.create(null);\n  var detectedStyles = $window.getComputedStyle(element) || {};\n  forEach(properties, function(formalStyleName, actualStyleName) {\n    var val = detectedStyles[formalStyleName];\n    if (val) {\n      var c = val.charAt(0);\n\n      // only numerical-based values have a negative sign or digit as the first value\n      if (c === '-' || c === '+' || c >= 0) {\n        val = parseMaxTime(val);\n      }\n\n      // by setting this to null in the event that the delay is not set or is set directly as 0\n      // then we can still allow for negative values to be used later on and not mistake this\n      // value for being greater than any other negative value.\n      if (val === 0) {\n        val = null;\n      }\n      styles[actualStyleName] = val;\n    }\n  });\n\n  return styles;\n}\n\nfunction parseMaxTime(str) {\n  var maxValue = 0;\n  var values = str.split(/\\s*,\\s*/);\n  forEach(values, function(value) {\n    // it's always safe to consider only second values and omit `ms` values since\n    // getComputedStyle will always handle the conversion for us\n    if (value.charAt(value.length - 1) === 's') {\n      value = value.substring(0, value.length - 1);\n    }\n    value = parseFloat(value) || 0;\n    maxValue = maxValue ? Math.max(value, maxValue) : value;\n  });\n  return maxValue;\n}\n\nfunction truthyTimingValue(val) {\n  return val === 0 || val != null;\n}\n\nfunction getCssTransitionDurationStyle(duration, applyOnlyDuration) {\n  var style = TRANSITION_PROP;\n  var value = duration + 's';\n  if (applyOnlyDuration) {\n    style += DURATION_KEY;\n  } else {\n    value += ' linear all';\n  }\n  return [style, value];\n}\n\nfunction createLocalCacheLookup() {\n  var cache = Object.create(null);\n  return {\n    flush: function() {\n      cache = Object.create(null);\n    },\n\n    count: function(key) {\n      var entry = cache[key];\n      return entry ? entry.total : 0;\n    },\n\n    get: function(key) {\n      var entry = cache[key];\n      return entry && entry.value;\n    },\n\n    put: function(key, value) {\n      if (!cache[key]) {\n        cache[key] = { total: 1, value: value };\n      } else {\n        cache[key].total++;\n      }\n    }\n  };\n}\n\n// we do not reassign an already present style value since\n// if we detect the style property value again we may be\n// detecting styles that were added via the `from` styles.\n// We make use of `isDefined` here since an empty string\n// or null value (which is what getPropertyValue will return\n// for a non-existing style) will still be marked as a valid\n// value for the style (a falsy value implies that the style\n// is to be removed at the end of the animation). If we had a simple\n// \"OR\" statement then it would not be enough to catch that.\nfunction registerRestorableStyles(backup, node, properties) {\n  forEach(properties, function(prop) {\n    backup[prop] = isDefined(backup[prop])\n        ? backup[prop]\n        : node.style.getPropertyValue(prop);\n  });\n}\n\nvar $AnimateCssProvider = ['$animateProvider', /** @this */ function($animateProvider) {\n  var gcsLookup = createLocalCacheLookup();\n  var gcsStaggerLookup = createLocalCacheLookup();\n\n  this.$get = ['$window', '$$jqLite', '$$AnimateRunner', '$timeout',\n               '$$forceReflow', '$sniffer', '$$rAFScheduler', '$$animateQueue',\n       function($window,   $$jqLite,   $$AnimateRunner,   $timeout,\n                $$forceReflow,   $sniffer,   $$rAFScheduler, $$animateQueue) {\n\n    var applyAnimationClasses = applyAnimationClassesFactory($$jqLite);\n\n    var parentCounter = 0;\n    function gcsHashFn(node, extraClasses) {\n      var KEY = '$$ngAnimateParentKey';\n      var parentNode = node.parentNode;\n      var parentID = parentNode[KEY] || (parentNode[KEY] = ++parentCounter);\n      return parentID + '-' + node.getAttribute('class') + '-' + extraClasses;\n    }\n\n    function computeCachedCssStyles(node, className, cacheKey, properties) {\n      var timings = gcsLookup.get(cacheKey);\n\n      if (!timings) {\n        timings = computeCssStyles($window, node, properties);\n        if (timings.animationIterationCount === 'infinite') {\n          timings.animationIterationCount = 1;\n        }\n      }\n\n      // we keep putting this in multiple times even though the value and the cacheKey are the same\n      // because we're keeping an internal tally of how many duplicate animations are detected.\n      gcsLookup.put(cacheKey, timings);\n      return timings;\n    }\n\n    function computeCachedCssStaggerStyles(node, className, cacheKey, properties) {\n      var stagger;\n\n      // if we have one or more existing matches of matching elements\n      // containing the same parent + CSS styles (which is how cacheKey works)\n      // then staggering is possible\n      if (gcsLookup.count(cacheKey) > 0) {\n        stagger = gcsStaggerLookup.get(cacheKey);\n\n        if (!stagger) {\n          var staggerClassName = pendClasses(className, '-stagger');\n\n          $$jqLite.addClass(node, staggerClassName);\n\n          stagger = computeCssStyles($window, node, properties);\n\n          // force the conversion of a null value to zero incase not set\n          stagger.animationDuration = Math.max(stagger.animationDuration, 0);\n          stagger.transitionDuration = Math.max(stagger.transitionDuration, 0);\n\n          $$jqLite.removeClass(node, staggerClassName);\n\n          gcsStaggerLookup.put(cacheKey, stagger);\n        }\n      }\n\n      return stagger || {};\n    }\n\n    var rafWaitQueue = [];\n    function waitUntilQuiet(callback) {\n      rafWaitQueue.push(callback);\n      $$rAFScheduler.waitUntilQuiet(function() {\n        gcsLookup.flush();\n        gcsStaggerLookup.flush();\n\n        // DO NOT REMOVE THIS LINE OR REFACTOR OUT THE `pageWidth` variable.\n        // PLEASE EXAMINE THE `$$forceReflow` service to understand why.\n        var pageWidth = $$forceReflow();\n\n        // we use a for loop to ensure that if the queue is changed\n        // during this looping then it will consider new requests\n        for (var i = 0; i < rafWaitQueue.length; i++) {\n          rafWaitQueue[i](pageWidth);\n        }\n        rafWaitQueue.length = 0;\n      });\n    }\n\n    function computeTimings(node, className, cacheKey) {\n      var timings = computeCachedCssStyles(node, className, cacheKey, DETECT_CSS_PROPERTIES);\n      var aD = timings.animationDelay;\n      var tD = timings.transitionDelay;\n      timings.maxDelay = aD && tD\n          ? Math.max(aD, tD)\n          : (aD || tD);\n      timings.maxDuration = Math.max(\n          timings.animationDuration * timings.animationIterationCount,\n          timings.transitionDuration);\n\n      return timings;\n    }\n\n    return function init(element, initialOptions) {\n      // all of the animation functions should create\n      // a copy of the options data, however, if a\n      // parent service has already created a copy then\n      // we should stick to using that\n      var options = initialOptions || {};\n      if (!options.$$prepared) {\n        options = prepareAnimationOptions(copy(options));\n      }\n\n      var restoreStyles = {};\n      var node = getDomNode(element);\n      if (!node\n          || !node.parentNode\n          || !$$animateQueue.enabled()) {\n        return closeAndReturnNoopAnimator();\n      }\n\n      var temporaryStyles = [];\n      var classes = element.attr('class');\n      var styles = packageStyles(options);\n      var animationClosed;\n      var animationPaused;\n      var animationCompleted;\n      var runner;\n      var runnerHost;\n      var maxDelay;\n      var maxDelayTime;\n      var maxDuration;\n      var maxDurationTime;\n      var startTime;\n      var events = [];\n\n      if (options.duration === 0 || (!$sniffer.animations && !$sniffer.transitions)) {\n        return closeAndReturnNoopAnimator();\n      }\n\n      var method = options.event && isArray(options.event)\n            ? options.event.join(' ')\n            : options.event;\n\n      var isStructural = method && options.structural;\n      var structuralClassName = '';\n      var addRemoveClassName = '';\n\n      if (isStructural) {\n        structuralClassName = pendClasses(method, EVENT_CLASS_PREFIX, true);\n      } else if (method) {\n        structuralClassName = method;\n      }\n\n      if (options.addClass) {\n        addRemoveClassName += pendClasses(options.addClass, ADD_CLASS_SUFFIX);\n      }\n\n      if (options.removeClass) {\n        if (addRemoveClassName.length) {\n          addRemoveClassName += ' ';\n        }\n        addRemoveClassName += pendClasses(options.removeClass, REMOVE_CLASS_SUFFIX);\n      }\n\n      // there may be a situation where a structural animation is combined together\n      // with CSS classes that need to resolve before the animation is computed.\n      // However this means that there is no explicit CSS code to block the animation\n      // from happening (by setting 0s none in the class name). If this is the case\n      // we need to apply the classes before the first rAF so we know to continue if\n      // there actually is a detected transition or keyframe animation\n      if (options.applyClassesEarly && addRemoveClassName.length) {\n        applyAnimationClasses(element, options);\n      }\n\n      var preparationClasses = [structuralClassName, addRemoveClassName].join(' ').trim();\n      var fullClassName = classes + ' ' + preparationClasses;\n      var activeClasses = pendClasses(preparationClasses, ACTIVE_CLASS_SUFFIX);\n      var hasToStyles = styles.to && Object.keys(styles.to).length > 0;\n      var containsKeyframeAnimation = (options.keyframeStyle || '').length > 0;\n\n      // there is no way we can trigger an animation if no styles and\n      // no classes are being applied which would then trigger a transition,\n      // unless there a is raw keyframe value that is applied to the element.\n      if (!containsKeyframeAnimation\n           && !hasToStyles\n           && !preparationClasses) {\n        return closeAndReturnNoopAnimator();\n      }\n\n      var cacheKey, stagger;\n      if (options.stagger > 0) {\n        var staggerVal = parseFloat(options.stagger);\n        stagger = {\n          transitionDelay: staggerVal,\n          animationDelay: staggerVal,\n          transitionDuration: 0,\n          animationDuration: 0\n        };\n      } else {\n        cacheKey = gcsHashFn(node, fullClassName);\n        stagger = computeCachedCssStaggerStyles(node, preparationClasses, cacheKey, DETECT_STAGGER_CSS_PROPERTIES);\n      }\n\n      if (!options.$$skipPreparationClasses) {\n        $$jqLite.addClass(element, preparationClasses);\n      }\n\n      var applyOnlyDuration;\n\n      if (options.transitionStyle) {\n        var transitionStyle = [TRANSITION_PROP, options.transitionStyle];\n        applyInlineStyle(node, transitionStyle);\n        temporaryStyles.push(transitionStyle);\n      }\n\n      if (options.duration >= 0) {\n        applyOnlyDuration = node.style[TRANSITION_PROP].length > 0;\n        var durationStyle = getCssTransitionDurationStyle(options.duration, applyOnlyDuration);\n\n        // we set the duration so that it will be picked up by getComputedStyle later\n        applyInlineStyle(node, durationStyle);\n        temporaryStyles.push(durationStyle);\n      }\n\n      if (options.keyframeStyle) {\n        var keyframeStyle = [ANIMATION_PROP, options.keyframeStyle];\n        applyInlineStyle(node, keyframeStyle);\n        temporaryStyles.push(keyframeStyle);\n      }\n\n      var itemIndex = stagger\n          ? options.staggerIndex >= 0\n              ? options.staggerIndex\n              : gcsLookup.count(cacheKey)\n          : 0;\n\n      var isFirst = itemIndex === 0;\n\n      // this is a pre-emptive way of forcing the setup classes to be added and applied INSTANTLY\n      // without causing any combination of transitions to kick in. By adding a negative delay value\n      // it forces the setup class' transition to end immediately. We later then remove the negative\n      // transition delay to allow for the transition to naturally do it's thing. The beauty here is\n      // that if there is no transition defined then nothing will happen and this will also allow\n      // other transitions to be stacked on top of each other without any chopping them out.\n      if (isFirst && !options.skipBlocking) {\n        blockTransitions(node, SAFE_FAST_FORWARD_DURATION_VALUE);\n      }\n\n      var timings = computeTimings(node, fullClassName, cacheKey);\n      var relativeDelay = timings.maxDelay;\n      maxDelay = Math.max(relativeDelay, 0);\n      maxDuration = timings.maxDuration;\n\n      var flags = {};\n      flags.hasTransitions          = timings.transitionDuration > 0;\n      flags.hasAnimations           = timings.animationDuration > 0;\n      flags.hasTransitionAll        = flags.hasTransitions && timings.transitionProperty === 'all';\n      flags.applyTransitionDuration = hasToStyles && (\n                                        (flags.hasTransitions && !flags.hasTransitionAll)\n                                         || (flags.hasAnimations && !flags.hasTransitions));\n      flags.applyAnimationDuration  = options.duration && flags.hasAnimations;\n      flags.applyTransitionDelay    = truthyTimingValue(options.delay) && (flags.applyTransitionDuration || flags.hasTransitions);\n      flags.applyAnimationDelay     = truthyTimingValue(options.delay) && flags.hasAnimations;\n      flags.recalculateTimingStyles = addRemoveClassName.length > 0;\n\n      if (flags.applyTransitionDuration || flags.applyAnimationDuration) {\n        maxDuration = options.duration ? parseFloat(options.duration) : maxDuration;\n\n        if (flags.applyTransitionDuration) {\n          flags.hasTransitions = true;\n          timings.transitionDuration = maxDuration;\n          applyOnlyDuration = node.style[TRANSITION_PROP + PROPERTY_KEY].length > 0;\n          temporaryStyles.push(getCssTransitionDurationStyle(maxDuration, applyOnlyDuration));\n        }\n\n        if (flags.applyAnimationDuration) {\n          flags.hasAnimations = true;\n          timings.animationDuration = maxDuration;\n          temporaryStyles.push(getCssKeyframeDurationStyle(maxDuration));\n        }\n      }\n\n      if (maxDuration === 0 && !flags.recalculateTimingStyles) {\n        return closeAndReturnNoopAnimator();\n      }\n\n      if (options.delay != null) {\n        var delayStyle;\n        if (typeof options.delay !== 'boolean') {\n          delayStyle = parseFloat(options.delay);\n          // number in options.delay means we have to recalculate the delay for the closing timeout\n          maxDelay = Math.max(delayStyle, 0);\n        }\n\n        if (flags.applyTransitionDelay) {\n          temporaryStyles.push(getCssDelayStyle(delayStyle));\n        }\n\n        if (flags.applyAnimationDelay) {\n          temporaryStyles.push(getCssDelayStyle(delayStyle, true));\n        }\n      }\n\n      // we need to recalculate the delay value since we used a pre-emptive negative\n      // delay value and the delay value is required for the final event checking. This\n      // property will ensure that this will happen after the RAF phase has passed.\n      if (options.duration == null && timings.transitionDuration > 0) {\n        flags.recalculateTimingStyles = flags.recalculateTimingStyles || isFirst;\n      }\n\n      maxDelayTime = maxDelay * ONE_SECOND;\n      maxDurationTime = maxDuration * ONE_SECOND;\n      if (!options.skipBlocking) {\n        flags.blockTransition = timings.transitionDuration > 0;\n        flags.blockKeyframeAnimation = timings.animationDuration > 0 &&\n                                       stagger.animationDelay > 0 &&\n                                       stagger.animationDuration === 0;\n      }\n\n      if (options.from) {\n        if (options.cleanupStyles) {\n          registerRestorableStyles(restoreStyles, node, Object.keys(options.from));\n        }\n        applyAnimationFromStyles(element, options);\n      }\n\n      if (flags.blockTransition || flags.blockKeyframeAnimation) {\n        applyBlocking(maxDuration);\n      } else if (!options.skipBlocking) {\n        blockTransitions(node, false);\n      }\n\n      // TODO(matsko): for 1.5 change this code to have an animator object for better debugging\n      return {\n        $$willAnimate: true,\n        end: endFn,\n        start: function() {\n          if (animationClosed) return;\n\n          runnerHost = {\n            end: endFn,\n            cancel: cancelFn,\n            resume: null, //this will be set during the start() phase\n            pause: null\n          };\n\n          runner = new $$AnimateRunner(runnerHost);\n\n          waitUntilQuiet(start);\n\n          // we don't have access to pause/resume the animation\n          // since it hasn't run yet. AnimateRunner will therefore\n          // set noop functions for resume and pause and they will\n          // later be overridden once the animation is triggered\n          return runner;\n        }\n      };\n\n      function endFn() {\n        close();\n      }\n\n      function cancelFn() {\n        close(true);\n      }\n\n      function close(rejected) {\n        // if the promise has been called already then we shouldn't close\n        // the animation again\n        if (animationClosed || (animationCompleted && animationPaused)) return;\n        animationClosed = true;\n        animationPaused = false;\n\n        if (!options.$$skipPreparationClasses) {\n          $$jqLite.removeClass(element, preparationClasses);\n        }\n        $$jqLite.removeClass(element, activeClasses);\n\n        blockKeyframeAnimations(node, false);\n        blockTransitions(node, false);\n\n        forEach(temporaryStyles, function(entry) {\n          // There is only one way to remove inline style properties entirely from elements.\n          // By using `removeProperty` this works, but we need to convert camel-cased CSS\n          // styles down to hyphenated values.\n          node.style[entry[0]] = '';\n        });\n\n        applyAnimationClasses(element, options);\n        applyAnimationStyles(element, options);\n\n        if (Object.keys(restoreStyles).length) {\n          forEach(restoreStyles, function(value, prop) {\n            if (value) {\n              node.style.setProperty(prop, value);\n            } else {\n              node.style.removeProperty(prop);\n            }\n          });\n        }\n\n        // the reason why we have this option is to allow a synchronous closing callback\n        // that is fired as SOON as the animation ends (when the CSS is removed) or if\n        // the animation never takes off at all. A good example is a leave animation since\n        // the element must be removed just after the animation is over or else the element\n        // will appear on screen for one animation frame causing an overbearing flicker.\n        if (options.onDone) {\n          options.onDone();\n        }\n\n        if (events && events.length) {\n          // Remove the transitionend / animationend listener(s)\n          element.off(events.join(' '), onAnimationProgress);\n        }\n\n        //Cancel the fallback closing timeout and remove the timer data\n        var animationTimerData = element.data(ANIMATE_TIMER_KEY);\n        if (animationTimerData) {\n          $timeout.cancel(animationTimerData[0].timer);\n          element.removeData(ANIMATE_TIMER_KEY);\n        }\n\n        // if the preparation function fails then the promise is not setup\n        if (runner) {\n          runner.complete(!rejected);\n        }\n      }\n\n      function applyBlocking(duration) {\n        if (flags.blockTransition) {\n          blockTransitions(node, duration);\n        }\n\n        if (flags.blockKeyframeAnimation) {\n          blockKeyframeAnimations(node, !!duration);\n        }\n      }\n\n      function closeAndReturnNoopAnimator() {\n        runner = new $$AnimateRunner({\n          end: endFn,\n          cancel: cancelFn\n        });\n\n        // should flush the cache animation\n        waitUntilQuiet(noop);\n        close();\n\n        return {\n          $$willAnimate: false,\n          start: function() {\n            return runner;\n          },\n          end: endFn\n        };\n      }\n\n      function onAnimationProgress(event) {\n        event.stopPropagation();\n        var ev = event.originalEvent || event;\n\n        // we now always use `Date.now()` due to the recent changes with\n        // event.timeStamp in Firefox, Webkit and Chrome (see #13494 for more info)\n        var timeStamp = ev.$manualTimeStamp || Date.now();\n\n        /* Firefox (or possibly just Gecko) likes to not round values up\n         * when a ms measurement is used for the animation */\n        var elapsedTime = parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));\n\n        /* $manualTimeStamp is a mocked timeStamp value which is set\n         * within browserTrigger(). This is only here so that tests can\n         * mock animations properly. Real events fallback to event.timeStamp,\n         * or, if they don't, then a timeStamp is automatically created for them.\n         * We're checking to see if the timeStamp surpasses the expected delay,\n         * but we're using elapsedTime instead of the timeStamp on the 2nd\n         * pre-condition since animationPauseds sometimes close off early */\n        if (Math.max(timeStamp - startTime, 0) >= maxDelayTime && elapsedTime >= maxDuration) {\n          // we set this flag to ensure that if the transition is paused then, when resumed,\n          // the animation will automatically close itself since transitions cannot be paused.\n          animationCompleted = true;\n          close();\n        }\n      }\n\n      function start() {\n        if (animationClosed) return;\n        if (!node.parentNode) {\n          close();\n          return;\n        }\n\n        // even though we only pause keyframe animations here the pause flag\n        // will still happen when transitions are used. Only the transition will\n        // not be paused since that is not possible. If the animation ends when\n        // paused then it will not complete until unpaused or cancelled.\n        var playPause = function(playAnimation) {\n          if (!animationCompleted) {\n            animationPaused = !playAnimation;\n            if (timings.animationDuration) {\n              var value = blockKeyframeAnimations(node, animationPaused);\n              if (animationPaused) {\n                temporaryStyles.push(value);\n              } else {\n                removeFromArray(temporaryStyles, value);\n              }\n            }\n          } else if (animationPaused && playAnimation) {\n            animationPaused = false;\n            close();\n          }\n        };\n\n        // checking the stagger duration prevents an accidentally cascade of the CSS delay style\n        // being inherited from the parent. If the transition duration is zero then we can safely\n        // rely that the delay value is an intentional stagger delay style.\n        var maxStagger = itemIndex > 0\n                         && ((timings.transitionDuration && stagger.transitionDuration === 0) ||\n                            (timings.animationDuration && stagger.animationDuration === 0))\n                         && Math.max(stagger.animationDelay, stagger.transitionDelay);\n        if (maxStagger) {\n          $timeout(triggerAnimationStart,\n                   Math.floor(maxStagger * itemIndex * ONE_SECOND),\n                   false);\n        } else {\n          triggerAnimationStart();\n        }\n\n        // this will decorate the existing promise runner with pause/resume methods\n        runnerHost.resume = function() {\n          playPause(true);\n        };\n\n        runnerHost.pause = function() {\n          playPause(false);\n        };\n\n        function triggerAnimationStart() {\n          // just incase a stagger animation kicks in when the animation\n          // itself was cancelled entirely\n          if (animationClosed) return;\n\n          applyBlocking(false);\n\n          forEach(temporaryStyles, function(entry) {\n            var key = entry[0];\n            var value = entry[1];\n            node.style[key] = value;\n          });\n\n          applyAnimationClasses(element, options);\n          $$jqLite.addClass(element, activeClasses);\n\n          if (flags.recalculateTimingStyles) {\n            fullClassName = node.getAttribute('class') + ' ' + preparationClasses;\n            cacheKey = gcsHashFn(node, fullClassName);\n\n            timings = computeTimings(node, fullClassName, cacheKey);\n            relativeDelay = timings.maxDelay;\n            maxDelay = Math.max(relativeDelay, 0);\n            maxDuration = timings.maxDuration;\n\n            if (maxDuration === 0) {\n              close();\n              return;\n            }\n\n            flags.hasTransitions = timings.transitionDuration > 0;\n            flags.hasAnimations = timings.animationDuration > 0;\n          }\n\n          if (flags.applyAnimationDelay) {\n            relativeDelay = typeof options.delay !== 'boolean' && truthyTimingValue(options.delay)\n                  ? parseFloat(options.delay)\n                  : relativeDelay;\n\n            maxDelay = Math.max(relativeDelay, 0);\n            timings.animationDelay = relativeDelay;\n            delayStyle = getCssDelayStyle(relativeDelay, true);\n            temporaryStyles.push(delayStyle);\n            node.style[delayStyle[0]] = delayStyle[1];\n          }\n\n          maxDelayTime = maxDelay * ONE_SECOND;\n          maxDurationTime = maxDuration * ONE_SECOND;\n\n          if (options.easing) {\n            var easeProp, easeVal = options.easing;\n            if (flags.hasTransitions) {\n              easeProp = TRANSITION_PROP + TIMING_KEY;\n              temporaryStyles.push([easeProp, easeVal]);\n              node.style[easeProp] = easeVal;\n            }\n            if (flags.hasAnimations) {\n              easeProp = ANIMATION_PROP + TIMING_KEY;\n              temporaryStyles.push([easeProp, easeVal]);\n              node.style[easeProp] = easeVal;\n            }\n          }\n\n          if (timings.transitionDuration) {\n            events.push(TRANSITIONEND_EVENT);\n          }\n\n          if (timings.animationDuration) {\n            events.push(ANIMATIONEND_EVENT);\n          }\n\n          startTime = Date.now();\n          var timerTime = maxDelayTime + CLOSING_TIME_BUFFER * maxDurationTime;\n          var endTime = startTime + timerTime;\n\n          var animationsData = element.data(ANIMATE_TIMER_KEY) || [];\n          var setupFallbackTimer = true;\n          if (animationsData.length) {\n            var currentTimerData = animationsData[0];\n            setupFallbackTimer = endTime > currentTimerData.expectedEndTime;\n            if (setupFallbackTimer) {\n              $timeout.cancel(currentTimerData.timer);\n            } else {\n              animationsData.push(close);\n            }\n          }\n\n          if (setupFallbackTimer) {\n            var timer = $timeout(onAnimationExpired, timerTime, false);\n            animationsData[0] = {\n              timer: timer,\n              expectedEndTime: endTime\n            };\n            animationsData.push(close);\n            element.data(ANIMATE_TIMER_KEY, animationsData);\n          }\n\n          if (events.length) {\n            element.on(events.join(' '), onAnimationProgress);\n          }\n\n          if (options.to) {\n            if (options.cleanupStyles) {\n              registerRestorableStyles(restoreStyles, node, Object.keys(options.to));\n            }\n            applyAnimationToStyles(element, options);\n          }\n        }\n\n        function onAnimationExpired() {\n          var animationsData = element.data(ANIMATE_TIMER_KEY);\n\n          // this will be false in the event that the element was\n          // removed from the DOM (via a leave animation or something\n          // similar)\n          if (animationsData) {\n            for (var i = 1; i < animationsData.length; i++) {\n              animationsData[i]();\n            }\n            element.removeData(ANIMATE_TIMER_KEY);\n          }\n        }\n      }\n    };\n  }];\n}];\n\nvar $$AnimateCssDriverProvider = ['$$animationProvider', /** @this */ function($$animationProvider) {\n  $$animationProvider.drivers.push('$$animateCssDriver');\n\n  var NG_ANIMATE_SHIM_CLASS_NAME = 'ng-animate-shim';\n  var NG_ANIMATE_ANCHOR_CLASS_NAME = 'ng-anchor';\n\n  var NG_OUT_ANCHOR_CLASS_NAME = 'ng-anchor-out';\n  var NG_IN_ANCHOR_CLASS_NAME = 'ng-anchor-in';\n\n  function isDocumentFragment(node) {\n    return node.parentNode && node.parentNode.nodeType === 11;\n  }\n\n  this.$get = ['$animateCss', '$rootScope', '$$AnimateRunner', '$rootElement', '$sniffer', '$$jqLite', '$document',\n       function($animateCss,   $rootScope,   $$AnimateRunner,   $rootElement,   $sniffer,   $$jqLite,   $document) {\n\n    // only browsers that support these properties can render animations\n    if (!$sniffer.animations && !$sniffer.transitions) return noop;\n\n    var bodyNode = $document[0].body;\n    var rootNode = getDomNode($rootElement);\n\n    var rootBodyElement = jqLite(\n      // this is to avoid using something that exists outside of the body\n      // we also special case the doc fragment case because our unit test code\n      // appends the $rootElement to the body after the app has been bootstrapped\n      isDocumentFragment(rootNode) || bodyNode.contains(rootNode) ? rootNode : bodyNode\n    );\n\n    return function initDriverFn(animationDetails) {\n      return animationDetails.from && animationDetails.to\n          ? prepareFromToAnchorAnimation(animationDetails.from,\n                                         animationDetails.to,\n                                         animationDetails.classes,\n                                         animationDetails.anchors)\n          : prepareRegularAnimation(animationDetails);\n    };\n\n    function filterCssClasses(classes) {\n      //remove all the `ng-` stuff\n      return classes.replace(/\\bng-\\S+\\b/g, '');\n    }\n\n    function getUniqueValues(a, b) {\n      if (isString(a)) a = a.split(' ');\n      if (isString(b)) b = b.split(' ');\n      return a.filter(function(val) {\n        return b.indexOf(val) === -1;\n      }).join(' ');\n    }\n\n    function prepareAnchoredAnimation(classes, outAnchor, inAnchor) {\n      var clone = jqLite(getDomNode(outAnchor).cloneNode(true));\n      var startingClasses = filterCssClasses(getClassVal(clone));\n\n      outAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME);\n      inAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME);\n\n      clone.addClass(NG_ANIMATE_ANCHOR_CLASS_NAME);\n\n      rootBodyElement.append(clone);\n\n      var animatorIn, animatorOut = prepareOutAnimation();\n\n      // the user may not end up using the `out` animation and\n      // only making use of the `in` animation or vice-versa.\n      // In either case we should allow this and not assume the\n      // animation is over unless both animations are not used.\n      if (!animatorOut) {\n        animatorIn = prepareInAnimation();\n        if (!animatorIn) {\n          return end();\n        }\n      }\n\n      var startingAnimator = animatorOut || animatorIn;\n\n      return {\n        start: function() {\n          var runner;\n\n          var currentAnimation = startingAnimator.start();\n          currentAnimation.done(function() {\n            currentAnimation = null;\n            if (!animatorIn) {\n              animatorIn = prepareInAnimation();\n              if (animatorIn) {\n                currentAnimation = animatorIn.start();\n                currentAnimation.done(function() {\n                  currentAnimation = null;\n                  end();\n                  runner.complete();\n                });\n                return currentAnimation;\n              }\n            }\n            // in the event that there is no `in` animation\n            end();\n            runner.complete();\n          });\n\n          runner = new $$AnimateRunner({\n            end: endFn,\n            cancel: endFn\n          });\n\n          return runner;\n\n          function endFn() {\n            if (currentAnimation) {\n              currentAnimation.end();\n            }\n          }\n        }\n      };\n\n      function calculateAnchorStyles(anchor) {\n        var styles = {};\n\n        var coords = getDomNode(anchor).getBoundingClientRect();\n\n        // we iterate directly since safari messes up and doesn't return\n        // all the keys for the coords object when iterated\n        forEach(['width','height','top','left'], function(key) {\n          var value = coords[key];\n          switch (key) {\n            case 'top':\n              value += bodyNode.scrollTop;\n              break;\n            case 'left':\n              value += bodyNode.scrollLeft;\n              break;\n          }\n          styles[key] = Math.floor(value) + 'px';\n        });\n        return styles;\n      }\n\n      function prepareOutAnimation() {\n        var animator = $animateCss(clone, {\n          addClass: NG_OUT_ANCHOR_CLASS_NAME,\n          delay: true,\n          from: calculateAnchorStyles(outAnchor)\n        });\n\n        // read the comment within `prepareRegularAnimation` to understand\n        // why this check is necessary\n        return animator.$$willAnimate ? animator : null;\n      }\n\n      function getClassVal(element) {\n        return element.attr('class') || '';\n      }\n\n      function prepareInAnimation() {\n        var endingClasses = filterCssClasses(getClassVal(inAnchor));\n        var toAdd = getUniqueValues(endingClasses, startingClasses);\n        var toRemove = getUniqueValues(startingClasses, endingClasses);\n\n        var animator = $animateCss(clone, {\n          to: calculateAnchorStyles(inAnchor),\n          addClass: NG_IN_ANCHOR_CLASS_NAME + ' ' + toAdd,\n          removeClass: NG_OUT_ANCHOR_CLASS_NAME + ' ' + toRemove,\n          delay: true\n        });\n\n        // read the comment within `prepareRegularAnimation` to understand\n        // why this check is necessary\n        return animator.$$willAnimate ? animator : null;\n      }\n\n      function end() {\n        clone.remove();\n        outAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME);\n        inAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME);\n      }\n    }\n\n    function prepareFromToAnchorAnimation(from, to, classes, anchors) {\n      var fromAnimation = prepareRegularAnimation(from, noop);\n      var toAnimation = prepareRegularAnimation(to, noop);\n\n      var anchorAnimations = [];\n      forEach(anchors, function(anchor) {\n        var outElement = anchor['out'];\n        var inElement = anchor['in'];\n        var animator = prepareAnchoredAnimation(classes, outElement, inElement);\n        if (animator) {\n          anchorAnimations.push(animator);\n        }\n      });\n\n      // no point in doing anything when there are no elements to animate\n      if (!fromAnimation && !toAnimation && anchorAnimations.length === 0) return;\n\n      return {\n        start: function() {\n          var animationRunners = [];\n\n          if (fromAnimation) {\n            animationRunners.push(fromAnimation.start());\n          }\n\n          if (toAnimation) {\n            animationRunners.push(toAnimation.start());\n          }\n\n          forEach(anchorAnimations, function(animation) {\n            animationRunners.push(animation.start());\n          });\n\n          var runner = new $$AnimateRunner({\n            end: endFn,\n            cancel: endFn // CSS-driven animations cannot be cancelled, only ended\n          });\n\n          $$AnimateRunner.all(animationRunners, function(status) {\n            runner.complete(status);\n          });\n\n          return runner;\n\n          function endFn() {\n            forEach(animationRunners, function(runner) {\n              runner.end();\n            });\n          }\n        }\n      };\n    }\n\n    function prepareRegularAnimation(animationDetails) {\n      var element = animationDetails.element;\n      var options = animationDetails.options || {};\n\n      if (animationDetails.structural) {\n        options.event = animationDetails.event;\n        options.structural = true;\n        options.applyClassesEarly = true;\n\n        // we special case the leave animation since we want to ensure that\n        // the element is removed as soon as the animation is over. Otherwise\n        // a flicker might appear or the element may not be removed at all\n        if (animationDetails.event === 'leave') {\n          options.onDone = options.domOperation;\n        }\n      }\n\n      // We assign the preparationClasses as the actual animation event since\n      // the internals of $animateCss will just suffix the event token values\n      // with `-active` to trigger the animation.\n      if (options.preparationClasses) {\n        options.event = concatWithSpace(options.event, options.preparationClasses);\n      }\n\n      var animator = $animateCss(element, options);\n\n      // the driver lookup code inside of $$animation attempts to spawn a\n      // driver one by one until a driver returns a.$$willAnimate animator object.\n      // $animateCss will always return an object, however, it will pass in\n      // a flag as a hint as to whether an animation was detected or not\n      return animator.$$willAnimate ? animator : null;\n    }\n  }];\n}];\n\n// TODO(matsko): use caching here to speed things up for detection\n// TODO(matsko): add documentation\n//  by the time...\n\nvar $$AnimateJsProvider = ['$animateProvider', /** @this */ function($animateProvider) {\n  this.$get = ['$injector', '$$AnimateRunner', '$$jqLite',\n       function($injector,   $$AnimateRunner,   $$jqLite) {\n\n    var applyAnimationClasses = applyAnimationClassesFactory($$jqLite);\n         // $animateJs(element, 'enter');\n    return function(element, event, classes, options) {\n      var animationClosed = false;\n\n      // the `classes` argument is optional and if it is not used\n      // then the classes will be resolved from the element's className\n      // property as well as options.addClass/options.removeClass.\n      if (arguments.length === 3 && isObject(classes)) {\n        options = classes;\n        classes = null;\n      }\n\n      options = prepareAnimationOptions(options);\n      if (!classes) {\n        classes = element.attr('class') || '';\n        if (options.addClass) {\n          classes += ' ' + options.addClass;\n        }\n        if (options.removeClass) {\n          classes += ' ' + options.removeClass;\n        }\n      }\n\n      var classesToAdd = options.addClass;\n      var classesToRemove = options.removeClass;\n\n      // the lookupAnimations function returns a series of animation objects that are\n      // matched up with one or more of the CSS classes. These animation objects are\n      // defined via the module.animation factory function. If nothing is detected then\n      // we don't return anything which then makes $animation query the next driver.\n      var animations = lookupAnimations(classes);\n      var before, after;\n      if (animations.length) {\n        var afterFn, beforeFn;\n        if (event === 'leave') {\n          beforeFn = 'leave';\n          afterFn = 'afterLeave'; // TODO(matsko): get rid of this\n        } else {\n          beforeFn = 'before' + event.charAt(0).toUpperCase() + event.substr(1);\n          afterFn = event;\n        }\n\n        if (event !== 'enter' && event !== 'move') {\n          before = packageAnimations(element, event, options, animations, beforeFn);\n        }\n        after  = packageAnimations(element, event, options, animations, afterFn);\n      }\n\n      // no matching animations\n      if (!before && !after) return;\n\n      function applyOptions() {\n        options.domOperation();\n        applyAnimationClasses(element, options);\n      }\n\n      function close() {\n        animationClosed = true;\n        applyOptions();\n        applyAnimationStyles(element, options);\n      }\n\n      var runner;\n\n      return {\n        $$willAnimate: true,\n        end: function() {\n          if (runner) {\n            runner.end();\n          } else {\n            close();\n            runner = new $$AnimateRunner();\n            runner.complete(true);\n          }\n          return runner;\n        },\n        start: function() {\n          if (runner) {\n            return runner;\n          }\n\n          runner = new $$AnimateRunner();\n          var closeActiveAnimations;\n          var chain = [];\n\n          if (before) {\n            chain.push(function(fn) {\n              closeActiveAnimations = before(fn);\n            });\n          }\n\n          if (chain.length) {\n            chain.push(function(fn) {\n              applyOptions();\n              fn(true);\n            });\n          } else {\n            applyOptions();\n          }\n\n          if (after) {\n            chain.push(function(fn) {\n              closeActiveAnimations = after(fn);\n            });\n          }\n\n          runner.setHost({\n            end: function() {\n              endAnimations();\n            },\n            cancel: function() {\n              endAnimations(true);\n            }\n          });\n\n          $$AnimateRunner.chain(chain, onComplete);\n          return runner;\n\n          function onComplete(success) {\n            close(success);\n            runner.complete(success);\n          }\n\n          function endAnimations(cancelled) {\n            if (!animationClosed) {\n              (closeActiveAnimations || noop)(cancelled);\n              onComplete(cancelled);\n            }\n          }\n        }\n      };\n\n      function executeAnimationFn(fn, element, event, options, onDone) {\n        var args;\n        switch (event) {\n          case 'animate':\n            args = [element, options.from, options.to, onDone];\n            break;\n\n          case 'setClass':\n            args = [element, classesToAdd, classesToRemove, onDone];\n            break;\n\n          case 'addClass':\n            args = [element, classesToAdd, onDone];\n            break;\n\n          case 'removeClass':\n            args = [element, classesToRemove, onDone];\n            break;\n\n          default:\n            args = [element, onDone];\n            break;\n        }\n\n        args.push(options);\n\n        var value = fn.apply(fn, args);\n        if (value) {\n          if (isFunction(value.start)) {\n            value = value.start();\n          }\n\n          if (value instanceof $$AnimateRunner) {\n            value.done(onDone);\n          } else if (isFunction(value)) {\n            // optional onEnd / onCancel callback\n            return value;\n          }\n        }\n\n        return noop;\n      }\n\n      function groupEventedAnimations(element, event, options, animations, fnName) {\n        var operations = [];\n        forEach(animations, function(ani) {\n          var animation = ani[fnName];\n          if (!animation) return;\n\n          // note that all of these animations will run in parallel\n          operations.push(function() {\n            var runner;\n            var endProgressCb;\n\n            var resolved = false;\n            var onAnimationComplete = function(rejected) {\n              if (!resolved) {\n                resolved = true;\n                (endProgressCb || noop)(rejected);\n                runner.complete(!rejected);\n              }\n            };\n\n            runner = new $$AnimateRunner({\n              end: function() {\n                onAnimationComplete();\n              },\n              cancel: function() {\n                onAnimationComplete(true);\n              }\n            });\n\n            endProgressCb = executeAnimationFn(animation, element, event, options, function(result) {\n              var cancelled = result === false;\n              onAnimationComplete(cancelled);\n            });\n\n            return runner;\n          });\n        });\n\n        return operations;\n      }\n\n      function packageAnimations(element, event, options, animations, fnName) {\n        var operations = groupEventedAnimations(element, event, options, animations, fnName);\n        if (operations.length === 0) {\n          var a, b;\n          if (fnName === 'beforeSetClass') {\n            a = groupEventedAnimations(element, 'removeClass', options, animations, 'beforeRemoveClass');\n            b = groupEventedAnimations(element, 'addClass', options, animations, 'beforeAddClass');\n          } else if (fnName === 'setClass') {\n            a = groupEventedAnimations(element, 'removeClass', options, animations, 'removeClass');\n            b = groupEventedAnimations(element, 'addClass', options, animations, 'addClass');\n          }\n\n          if (a) {\n            operations = operations.concat(a);\n          }\n          if (b) {\n            operations = operations.concat(b);\n          }\n        }\n\n        if (operations.length === 0) return;\n\n        // TODO(matsko): add documentation\n        return function startAnimation(callback) {\n          var runners = [];\n          if (operations.length) {\n            forEach(operations, function(animateFn) {\n              runners.push(animateFn());\n            });\n          }\n\n          if (runners.length) {\n            $$AnimateRunner.all(runners, callback);\n          }  else {\n            callback();\n          }\n\n          return function endFn(reject) {\n            forEach(runners, function(runner) {\n              if (reject) {\n                runner.cancel();\n              } else {\n                runner.end();\n              }\n            });\n          };\n        };\n      }\n    };\n\n    function lookupAnimations(classes) {\n      classes = isArray(classes) ? classes : classes.split(' ');\n      var matches = [], flagMap = {};\n      for (var i = 0; i < classes.length; i++) {\n        var klass = classes[i],\n            animationFactory = $animateProvider.$$registeredAnimations[klass];\n        if (animationFactory && !flagMap[klass]) {\n          matches.push($injector.get(animationFactory));\n          flagMap[klass] = true;\n        }\n      }\n      return matches;\n    }\n  }];\n}];\n\nvar $$AnimateJsDriverProvider = ['$$animationProvider', /** @this */ function($$animationProvider) {\n  $$animationProvider.drivers.push('$$animateJsDriver');\n  this.$get = ['$$animateJs', '$$AnimateRunner', function($$animateJs, $$AnimateRunner) {\n    return function initDriverFn(animationDetails) {\n      if (animationDetails.from && animationDetails.to) {\n        var fromAnimation = prepareAnimation(animationDetails.from);\n        var toAnimation = prepareAnimation(animationDetails.to);\n        if (!fromAnimation && !toAnimation) return;\n\n        return {\n          start: function() {\n            var animationRunners = [];\n\n            if (fromAnimation) {\n              animationRunners.push(fromAnimation.start());\n            }\n\n            if (toAnimation) {\n              animationRunners.push(toAnimation.start());\n            }\n\n            $$AnimateRunner.all(animationRunners, done);\n\n            var runner = new $$AnimateRunner({\n              end: endFnFactory(),\n              cancel: endFnFactory()\n            });\n\n            return runner;\n\n            function endFnFactory() {\n              return function() {\n                forEach(animationRunners, function(runner) {\n                  // at this point we cannot cancel animations for groups just yet. 1.5+\n                  runner.end();\n                });\n              };\n            }\n\n            function done(status) {\n              runner.complete(status);\n            }\n          }\n        };\n      } else {\n        return prepareAnimation(animationDetails);\n      }\n    };\n\n    function prepareAnimation(animationDetails) {\n      // TODO(matsko): make sure to check for grouped animations and delegate down to normal animations\n      var element = animationDetails.element;\n      var event = animationDetails.event;\n      var options = animationDetails.options;\n      var classes = animationDetails.classes;\n      return $$animateJs(element, event, classes, options);\n    }\n  }];\n}];\n\nvar NG_ANIMATE_ATTR_NAME = 'data-ng-animate';\nvar NG_ANIMATE_PIN_DATA = '$ngAnimatePin';\nvar $$AnimateQueueProvider = ['$animateProvider', /** @this */ function($animateProvider) {\n  var PRE_DIGEST_STATE = 1;\n  var RUNNING_STATE = 2;\n  var ONE_SPACE = ' ';\n\n  var rules = this.rules = {\n    skip: [],\n    cancel: [],\n    join: []\n  };\n\n  function makeTruthyCssClassMap(classString) {\n    if (!classString) {\n      return null;\n    }\n\n    var keys = classString.split(ONE_SPACE);\n    var map = Object.create(null);\n\n    forEach(keys, function(key) {\n      map[key] = true;\n    });\n    return map;\n  }\n\n  function hasMatchingClasses(newClassString, currentClassString) {\n    if (newClassString && currentClassString) {\n      var currentClassMap = makeTruthyCssClassMap(currentClassString);\n      return newClassString.split(ONE_SPACE).some(function(className) {\n        return currentClassMap[className];\n      });\n    }\n  }\n\n  function isAllowed(ruleType, currentAnimation, previousAnimation) {\n    return rules[ruleType].some(function(fn) {\n      return fn(currentAnimation, previousAnimation);\n    });\n  }\n\n  function hasAnimationClasses(animation, and) {\n    var a = (animation.addClass || '').length > 0;\n    var b = (animation.removeClass || '').length > 0;\n    return and ? a && b : a || b;\n  }\n\n  rules.join.push(function(newAnimation, currentAnimation) {\n    // if the new animation is class-based then we can just tack that on\n    return !newAnimation.structural && hasAnimationClasses(newAnimation);\n  });\n\n  rules.skip.push(function(newAnimation, currentAnimation) {\n    // there is no need to animate anything if no classes are being added and\n    // there is no structural animation that will be triggered\n    return !newAnimation.structural && !hasAnimationClasses(newAnimation);\n  });\n\n  rules.skip.push(function(newAnimation, currentAnimation) {\n    // why should we trigger a new structural animation if the element will\n    // be removed from the DOM anyway?\n    return currentAnimation.event === 'leave' && newAnimation.structural;\n  });\n\n  rules.skip.push(function(newAnimation, currentAnimation) {\n    // if there is an ongoing current animation then don't even bother running the class-based animation\n    return currentAnimation.structural && currentAnimation.state === RUNNING_STATE && !newAnimation.structural;\n  });\n\n  rules.cancel.push(function(newAnimation, currentAnimation) {\n    // there can never be two structural animations running at the same time\n    return currentAnimation.structural && newAnimation.structural;\n  });\n\n  rules.cancel.push(function(newAnimation, currentAnimation) {\n    // if the previous animation is already running, but the new animation will\n    // be triggered, but the new animation is structural\n    return currentAnimation.state === RUNNING_STATE && newAnimation.structural;\n  });\n\n  rules.cancel.push(function(newAnimation, currentAnimation) {\n    // cancel the animation if classes added / removed in both animation cancel each other out,\n    // but only if the current animation isn't structural\n\n    if (currentAnimation.structural) return false;\n\n    var nA = newAnimation.addClass;\n    var nR = newAnimation.removeClass;\n    var cA = currentAnimation.addClass;\n    var cR = currentAnimation.removeClass;\n\n    // early detection to save the global CPU shortage :)\n    if ((isUndefined(nA) && isUndefined(nR)) || (isUndefined(cA) && isUndefined(cR))) {\n      return false;\n    }\n\n    return hasMatchingClasses(nA, cR) || hasMatchingClasses(nR, cA);\n  });\n\n  this.$get = ['$$rAF', '$rootScope', '$rootElement', '$document', '$$Map',\n               '$$animation', '$$AnimateRunner', '$templateRequest', '$$jqLite', '$$forceReflow',\n               '$$isDocumentHidden',\n       function($$rAF,   $rootScope,   $rootElement,   $document,   $$Map,\n                $$animation,   $$AnimateRunner,   $templateRequest,   $$jqLite,   $$forceReflow,\n                $$isDocumentHidden) {\n\n    var activeAnimationsLookup = new $$Map();\n    var disabledElementsLookup = new $$Map();\n    var animationsEnabled = null;\n\n    function postDigestTaskFactory() {\n      var postDigestCalled = false;\n      return function(fn) {\n        // we only issue a call to postDigest before\n        // it has first passed. This prevents any callbacks\n        // from not firing once the animation has completed\n        // since it will be out of the digest cycle.\n        if (postDigestCalled) {\n          fn();\n        } else {\n          $rootScope.$$postDigest(function() {\n            postDigestCalled = true;\n            fn();\n          });\n        }\n      };\n    }\n\n    // Wait until all directive and route-related templates are downloaded and\n    // compiled. The $templateRequest.totalPendingRequests variable keeps track of\n    // all of the remote templates being currently downloaded. If there are no\n    // templates currently downloading then the watcher will still fire anyway.\n    var deregisterWatch = $rootScope.$watch(\n      function() { return $templateRequest.totalPendingRequests === 0; },\n      function(isEmpty) {\n        if (!isEmpty) return;\n        deregisterWatch();\n\n        // Now that all templates have been downloaded, $animate will wait until\n        // the post digest queue is empty before enabling animations. By having two\n        // calls to $postDigest calls we can ensure that the flag is enabled at the\n        // very end of the post digest queue. Since all of the animations in $animate\n        // use $postDigest, it's important that the code below executes at the end.\n        // This basically means that the page is fully downloaded and compiled before\n        // any animations are triggered.\n        $rootScope.$$postDigest(function() {\n          $rootScope.$$postDigest(function() {\n            // we check for null directly in the event that the application already called\n            // .enabled() with whatever arguments that it provided it with\n            if (animationsEnabled === null) {\n              animationsEnabled = true;\n            }\n          });\n        });\n      }\n    );\n\n    var callbackRegistry = Object.create(null);\n\n    // remember that the `customFilter`/`classNameFilter` are set during the\n    // provider/config stage therefore we can optimize here and setup helper functions\n    var customFilter = $animateProvider.customFilter();\n    var classNameFilter = $animateProvider.classNameFilter();\n    var returnTrue = function() { return true; };\n\n    var isAnimatableByFilter = customFilter || returnTrue;\n    var isAnimatableClassName = !classNameFilter ? returnTrue : function(node, options) {\n      var className = [node.getAttribute('class'), options.addClass, options.removeClass].join(' ');\n      return classNameFilter.test(className);\n    };\n\n    var applyAnimationClasses = applyAnimationClassesFactory($$jqLite);\n\n    function normalizeAnimationDetails(element, animation) {\n      return mergeAnimationDetails(element, animation, {});\n    }\n\n    // IE9-11 has no method \"contains\" in SVG element and in Node.prototype. Bug #10259.\n    var contains = window.Node.prototype.contains || /** @this */ function(arg) {\n      // eslint-disable-next-line no-bitwise\n      return this === arg || !!(this.compareDocumentPosition(arg) & 16);\n    };\n\n    function findCallbacks(targetParentNode, targetNode, event) {\n      var matches = [];\n      var entries = callbackRegistry[event];\n      if (entries) {\n        forEach(entries, function(entry) {\n          if (contains.call(entry.node, targetNode)) {\n            matches.push(entry.callback);\n          } else if (event === 'leave' && contains.call(entry.node, targetParentNode)) {\n            matches.push(entry.callback);\n          }\n        });\n      }\n\n      return matches;\n    }\n\n    function filterFromRegistry(list, matchContainer, matchCallback) {\n      var containerNode = extractElementNode(matchContainer);\n      return list.filter(function(entry) {\n        var isMatch = entry.node === containerNode &&\n                        (!matchCallback || entry.callback === matchCallback);\n        return !isMatch;\n      });\n    }\n\n    function cleanupEventListeners(phase, node) {\n      if (phase === 'close' && !node.parentNode) {\n        // If the element is not attached to a parentNode, it has been removed by\n        // the domOperation, and we can safely remove the event callbacks\n        $animate.off(node);\n      }\n    }\n\n    var $animate = {\n      on: function(event, container, callback) {\n        var node = extractElementNode(container);\n        callbackRegistry[event] = callbackRegistry[event] || [];\n        callbackRegistry[event].push({\n          node: node,\n          callback: callback\n        });\n\n        // Remove the callback when the element is removed from the DOM\n        jqLite(container).on('$destroy', function() {\n          var animationDetails = activeAnimationsLookup.get(node);\n\n          if (!animationDetails) {\n            // If there's an animation ongoing, the callback calling code will remove\n            // the event listeners. If we'd remove here, the callbacks would be removed\n            // before the animation ends\n            $animate.off(event, container, callback);\n          }\n        });\n      },\n\n      off: function(event, container, callback) {\n        if (arguments.length === 1 && !isString(arguments[0])) {\n          container = arguments[0];\n          for (var eventType in callbackRegistry) {\n            callbackRegistry[eventType] = filterFromRegistry(callbackRegistry[eventType], container);\n          }\n\n          return;\n        }\n\n        var entries = callbackRegistry[event];\n        if (!entries) return;\n\n        callbackRegistry[event] = arguments.length === 1\n            ? null\n            : filterFromRegistry(entries, container, callback);\n      },\n\n      pin: function(element, parentElement) {\n        assertArg(isElement(element), 'element', 'not an element');\n        assertArg(isElement(parentElement), 'parentElement', 'not an element');\n        element.data(NG_ANIMATE_PIN_DATA, parentElement);\n      },\n\n      push: function(element, event, options, domOperation) {\n        options = options || {};\n        options.domOperation = domOperation;\n        return queueAnimation(element, event, options);\n      },\n\n      // this method has four signatures:\n      //  () - global getter\n      //  (bool) - global setter\n      //  (element) - element getter\n      //  (element, bool) - element setter<F37>\n      enabled: function(element, bool) {\n        var argCount = arguments.length;\n\n        if (argCount === 0) {\n          // () - Global getter\n          bool = !!animationsEnabled;\n        } else {\n          var hasElement = isElement(element);\n\n          if (!hasElement) {\n            // (bool) - Global setter\n            bool = animationsEnabled = !!element;\n          } else {\n            var node = getDomNode(element);\n\n            if (argCount === 1) {\n              // (element) - Element getter\n              bool = !disabledElementsLookup.get(node);\n            } else {\n              // (element, bool) - Element setter\n              disabledElementsLookup.set(node, !bool);\n            }\n          }\n        }\n\n        return bool;\n      }\n    };\n\n    return $animate;\n\n    function queueAnimation(originalElement, event, initialOptions) {\n      // we always make a copy of the options since\n      // there should never be any side effects on\n      // the input data when running `$animateCss`.\n      var options = copy(initialOptions);\n\n      var element = stripCommentsFromElement(originalElement);\n      var node = getDomNode(element);\n      var parentNode = node && node.parentNode;\n\n      options = prepareAnimationOptions(options);\n\n      // we create a fake runner with a working promise.\n      // These methods will become available after the digest has passed\n      var runner = new $$AnimateRunner();\n\n      // this is used to trigger callbacks in postDigest mode\n      var runInNextPostDigestOrNow = postDigestTaskFactory();\n\n      if (isArray(options.addClass)) {\n        options.addClass = options.addClass.join(' ');\n      }\n\n      if (options.addClass && !isString(options.addClass)) {\n        options.addClass = null;\n      }\n\n      if (isArray(options.removeClass)) {\n        options.removeClass = options.removeClass.join(' ');\n      }\n\n      if (options.removeClass && !isString(options.removeClass)) {\n        options.removeClass = null;\n      }\n\n      if (options.from && !isObject(options.from)) {\n        options.from = null;\n      }\n\n      if (options.to && !isObject(options.to)) {\n        options.to = null;\n      }\n\n      // If animations are hard-disabled for the whole application there is no need to continue.\n      // There are also situations where a directive issues an animation for a jqLite wrapper that\n      // contains only comment nodes. In this case, there is no way we can perform an animation.\n      if (!animationsEnabled ||\n          !node ||\n          !isAnimatableByFilter(node, event, initialOptions) ||\n          !isAnimatableClassName(node, options)) {\n        close();\n        return runner;\n      }\n\n      var isStructural = ['enter', 'move', 'leave'].indexOf(event) >= 0;\n\n      var documentHidden = $$isDocumentHidden();\n\n      // This is a hard disable of all animations the element itself, therefore  there is no need to\n      // continue further past this point if not enabled\n      // Animations are also disabled if the document is currently hidden (page is not visible\n      // to the user), because browsers slow down or do not flush calls to requestAnimationFrame\n      var skipAnimations = documentHidden || disabledElementsLookup.get(node);\n      var existingAnimation = (!skipAnimations && activeAnimationsLookup.get(node)) || {};\n      var hasExistingAnimation = !!existingAnimation.state;\n\n      // there is no point in traversing the same collection of parent ancestors if a followup\n      // animation will be run on the same element that already did all that checking work\n      if (!skipAnimations && (!hasExistingAnimation || existingAnimation.state !== PRE_DIGEST_STATE)) {\n        skipAnimations = !areAnimationsAllowed(node, parentNode, event);\n      }\n\n      if (skipAnimations) {\n        // Callbacks should fire even if the document is hidden (regression fix for issue #14120)\n        if (documentHidden) notifyProgress(runner, event, 'start');\n        close();\n        if (documentHidden) notifyProgress(runner, event, 'close');\n        return runner;\n      }\n\n      if (isStructural) {\n        closeChildAnimations(node);\n      }\n\n      var newAnimation = {\n        structural: isStructural,\n        element: element,\n        event: event,\n        addClass: options.addClass,\n        removeClass: options.removeClass,\n        close: close,\n        options: options,\n        runner: runner\n      };\n\n      if (hasExistingAnimation) {\n        var skipAnimationFlag = isAllowed('skip', newAnimation, existingAnimation);\n        if (skipAnimationFlag) {\n          if (existingAnimation.state === RUNNING_STATE) {\n            close();\n            return runner;\n          } else {\n            mergeAnimationDetails(element, existingAnimation, newAnimation);\n            return existingAnimation.runner;\n          }\n        }\n        var cancelAnimationFlag = isAllowed('cancel', newAnimation, existingAnimation);\n        if (cancelAnimationFlag) {\n          if (existingAnimation.state === RUNNING_STATE) {\n            // this will end the animation right away and it is safe\n            // to do so since the animation is already running and the\n            // runner callback code will run in async\n            existingAnimation.runner.end();\n          } else if (existingAnimation.structural) {\n            // this means that the animation is queued into a digest, but\n            // hasn't started yet. Therefore it is safe to run the close\n            // method which will call the runner methods in async.\n            existingAnimation.close();\n          } else {\n            // this will merge the new animation options into existing animation options\n            mergeAnimationDetails(element, existingAnimation, newAnimation);\n\n            return existingAnimation.runner;\n          }\n        } else {\n          // a joined animation means that this animation will take over the existing one\n          // so an example would involve a leave animation taking over an enter. Then when\n          // the postDigest kicks in the enter will be ignored.\n          var joinAnimationFlag = isAllowed('join', newAnimation, existingAnimation);\n          if (joinAnimationFlag) {\n            if (existingAnimation.state === RUNNING_STATE) {\n              normalizeAnimationDetails(element, newAnimation);\n            } else {\n              applyGeneratedPreparationClasses(element, isStructural ? event : null, options);\n\n              event = newAnimation.event = existingAnimation.event;\n              options = mergeAnimationDetails(element, existingAnimation, newAnimation);\n\n              //we return the same runner since only the option values of this animation will\n              //be fed into the `existingAnimation`.\n              return existingAnimation.runner;\n            }\n          }\n        }\n      } else {\n        // normalization in this case means that it removes redundant CSS classes that\n        // already exist (addClass) or do not exist (removeClass) on the element\n        normalizeAnimationDetails(element, newAnimation);\n      }\n\n      // when the options are merged and cleaned up we may end up not having to do\n      // an animation at all, therefore we should check this before issuing a post\n      // digest callback. Structural animations will always run no matter what.\n      var isValidAnimation = newAnimation.structural;\n      if (!isValidAnimation) {\n        // animate (from/to) can be quickly checked first, otherwise we check if any classes are present\n        isValidAnimation = (newAnimation.event === 'animate' && Object.keys(newAnimation.options.to || {}).length > 0)\n                            || hasAnimationClasses(newAnimation);\n      }\n\n      if (!isValidAnimation) {\n        close();\n        clearElementAnimationState(node);\n        return runner;\n      }\n\n      // the counter keeps track of cancelled animations\n      var counter = (existingAnimation.counter || 0) + 1;\n      newAnimation.counter = counter;\n\n      markElementAnimationState(node, PRE_DIGEST_STATE, newAnimation);\n\n      $rootScope.$$postDigest(function() {\n        // It is possible that the DOM nodes inside `originalElement` have been replaced. This can\n        // happen if the animated element is a transcluded clone and also has a `templateUrl`\n        // directive on it. Therefore, we must recreate `element` in order to interact with the\n        // actual DOM nodes.\n        // Note: We still need to use the old `node` for certain things, such as looking up in\n        //       HashMaps where it was used as the key.\n\n        element = stripCommentsFromElement(originalElement);\n\n        var animationDetails = activeAnimationsLookup.get(node);\n        var animationCancelled = !animationDetails;\n        animationDetails = animationDetails || {};\n\n        // if addClass/removeClass is called before something like enter then the\n        // registered parent element may not be present. The code below will ensure\n        // that a final value for parent element is obtained\n        var parentElement = element.parent() || [];\n\n        // animate/structural/class-based animations all have requirements. Otherwise there\n        // is no point in performing an animation. The parent node must also be set.\n        var isValidAnimation = parentElement.length > 0\n                                && (animationDetails.event === 'animate'\n                                    || animationDetails.structural\n                                    || hasAnimationClasses(animationDetails));\n\n        // this means that the previous animation was cancelled\n        // even if the follow-up animation is the same event\n        if (animationCancelled || animationDetails.counter !== counter || !isValidAnimation) {\n          // if another animation did not take over then we need\n          // to make sure that the domOperation and options are\n          // handled accordingly\n          if (animationCancelled) {\n            applyAnimationClasses(element, options);\n            applyAnimationStyles(element, options);\n          }\n\n          // if the event changed from something like enter to leave then we do\n          // it, otherwise if it's the same then the end result will be the same too\n          if (animationCancelled || (isStructural && animationDetails.event !== event)) {\n            options.domOperation();\n            runner.end();\n          }\n\n          // in the event that the element animation was not cancelled or a follow-up animation\n          // isn't allowed to animate from here then we need to clear the state of the element\n          // so that any future animations won't read the expired animation data.\n          if (!isValidAnimation) {\n            clearElementAnimationState(node);\n          }\n\n          return;\n        }\n\n        // this combined multiple class to addClass / removeClass into a setClass event\n        // so long as a structural event did not take over the animation\n        event = !animationDetails.structural && hasAnimationClasses(animationDetails, true)\n            ? 'setClass'\n            : animationDetails.event;\n\n        markElementAnimationState(node, RUNNING_STATE);\n        var realRunner = $$animation(element, event, animationDetails.options);\n\n        // this will update the runner's flow-control events based on\n        // the `realRunner` object.\n        runner.setHost(realRunner);\n        notifyProgress(runner, event, 'start', {});\n\n        realRunner.done(function(status) {\n          close(!status);\n          var animationDetails = activeAnimationsLookup.get(node);\n          if (animationDetails && animationDetails.counter === counter) {\n            clearElementAnimationState(node);\n          }\n          notifyProgress(runner, event, 'close', {});\n        });\n      });\n\n      return runner;\n\n      function notifyProgress(runner, event, phase, data) {\n        runInNextPostDigestOrNow(function() {\n          var callbacks = findCallbacks(parentNode, node, event);\n          if (callbacks.length) {\n            // do not optimize this call here to RAF because\n            // we don't know how heavy the callback code here will\n            // be and if this code is buffered then this can\n            // lead to a performance regression.\n            $$rAF(function() {\n              forEach(callbacks, function(callback) {\n                callback(element, phase, data);\n              });\n              cleanupEventListeners(phase, node);\n            });\n          } else {\n            cleanupEventListeners(phase, node);\n          }\n        });\n        runner.progress(event, phase, data);\n      }\n\n      function close(reject) {\n        clearGeneratedClasses(element, options);\n        applyAnimationClasses(element, options);\n        applyAnimationStyles(element, options);\n        options.domOperation();\n        runner.complete(!reject);\n      }\n    }\n\n    function closeChildAnimations(node) {\n      var children = node.querySelectorAll('[' + NG_ANIMATE_ATTR_NAME + ']');\n      forEach(children, function(child) {\n        var state = parseInt(child.getAttribute(NG_ANIMATE_ATTR_NAME), 10);\n        var animationDetails = activeAnimationsLookup.get(child);\n        if (animationDetails) {\n          switch (state) {\n            case RUNNING_STATE:\n              animationDetails.runner.end();\n              /* falls through */\n            case PRE_DIGEST_STATE:\n              activeAnimationsLookup.delete(child);\n              break;\n          }\n        }\n      });\n    }\n\n    function clearElementAnimationState(node) {\n      node.removeAttribute(NG_ANIMATE_ATTR_NAME);\n      activeAnimationsLookup.delete(node);\n    }\n\n    /**\n     * This fn returns false if any of the following is true:\n     * a) animations on any parent element are disabled, and animations on the element aren't explicitly allowed\n     * b) a parent element has an ongoing structural animation, and animateChildren is false\n     * c) the element is not a child of the body\n     * d) the element is not a child of the $rootElement\n     */\n    function areAnimationsAllowed(node, parentNode, event) {\n      var bodyNode = $document[0].body;\n      var rootNode = getDomNode($rootElement);\n\n      var bodyNodeDetected = (node === bodyNode) || node.nodeName === 'HTML';\n      var rootNodeDetected = (node === rootNode);\n      var parentAnimationDetected = false;\n      var elementDisabled = disabledElementsLookup.get(node);\n      var animateChildren;\n\n      var parentHost = jqLite.data(node, NG_ANIMATE_PIN_DATA);\n      if (parentHost) {\n        parentNode = getDomNode(parentHost);\n      }\n\n      while (parentNode) {\n        if (!rootNodeDetected) {\n          // angular doesn't want to attempt to animate elements outside of the application\n          // therefore we need to ensure that the rootElement is an ancestor of the current element\n          rootNodeDetected = (parentNode === rootNode);\n        }\n\n        if (parentNode.nodeType !== ELEMENT_NODE) {\n          // no point in inspecting the #document element\n          break;\n        }\n\n        var details = activeAnimationsLookup.get(parentNode) || {};\n        // either an enter, leave or move animation will commence\n        // therefore we can't allow any animations to take place\n        // but if a parent animation is class-based then that's ok\n        if (!parentAnimationDetected) {\n          var parentNodeDisabled = disabledElementsLookup.get(parentNode);\n\n          if (parentNodeDisabled === true && elementDisabled !== false) {\n            // disable animations if the user hasn't explicitly enabled animations on the\n            // current element\n            elementDisabled = true;\n            // element is disabled via parent element, no need to check anything else\n            break;\n          } else if (parentNodeDisabled === false) {\n            elementDisabled = false;\n          }\n          parentAnimationDetected = details.structural;\n        }\n\n        if (isUndefined(animateChildren) || animateChildren === true) {\n          var value = jqLite.data(parentNode, NG_ANIMATE_CHILDREN_DATA);\n          if (isDefined(value)) {\n            animateChildren = value;\n          }\n        }\n\n        // there is no need to continue traversing at this point\n        if (parentAnimationDetected && animateChildren === false) break;\n\n        if (!bodyNodeDetected) {\n          // we also need to ensure that the element is or will be a part of the body element\n          // otherwise it is pointless to even issue an animation to be rendered\n          bodyNodeDetected = (parentNode === bodyNode);\n        }\n\n        if (bodyNodeDetected && rootNodeDetected) {\n          // If both body and root have been found, any other checks are pointless,\n          // as no animation data should live outside the application\n          break;\n        }\n\n        if (!rootNodeDetected) {\n          // If `rootNode` is not detected, check if `parentNode` is pinned to another element\n          parentHost = jqLite.data(parentNode, NG_ANIMATE_PIN_DATA);\n          if (parentHost) {\n            // The pin target element becomes the next parent element\n            parentNode = getDomNode(parentHost);\n            continue;\n          }\n        }\n\n        parentNode = parentNode.parentNode;\n      }\n\n      var allowAnimation = (!parentAnimationDetected || animateChildren) && elementDisabled !== true;\n      return allowAnimation && rootNodeDetected && bodyNodeDetected;\n    }\n\n    function markElementAnimationState(node, state, details) {\n      details = details || {};\n      details.state = state;\n\n      node.setAttribute(NG_ANIMATE_ATTR_NAME, state);\n\n      var oldValue = activeAnimationsLookup.get(node);\n      var newValue = oldValue\n          ? extend(oldValue, details)\n          : details;\n      activeAnimationsLookup.set(node, newValue);\n    }\n  }];\n}];\n\n/* exported $$AnimationProvider */\n\nvar $$AnimationProvider = ['$animateProvider', /** @this */ function($animateProvider) {\n  var NG_ANIMATE_REF_ATTR = 'ng-animate-ref';\n\n  var drivers = this.drivers = [];\n\n  var RUNNER_STORAGE_KEY = '$$animationRunner';\n\n  function setRunner(element, runner) {\n    element.data(RUNNER_STORAGE_KEY, runner);\n  }\n\n  function removeRunner(element) {\n    element.removeData(RUNNER_STORAGE_KEY);\n  }\n\n  function getRunner(element) {\n    return element.data(RUNNER_STORAGE_KEY);\n  }\n\n  this.$get = ['$$jqLite', '$rootScope', '$injector', '$$AnimateRunner', '$$Map', '$$rAFScheduler',\n       function($$jqLite,   $rootScope,   $injector,   $$AnimateRunner,   $$Map,   $$rAFScheduler) {\n\n    var animationQueue = [];\n    var applyAnimationClasses = applyAnimationClassesFactory($$jqLite);\n\n    function sortAnimations(animations) {\n      var tree = { children: [] };\n      var i, lookup = new $$Map();\n\n      // this is done first beforehand so that the map\n      // is filled with a list of the elements that will be animated\n      for (i = 0; i < animations.length; i++) {\n        var animation = animations[i];\n        lookup.set(animation.domNode, animations[i] = {\n          domNode: animation.domNode,\n          fn: animation.fn,\n          children: []\n        });\n      }\n\n      for (i = 0; i < animations.length; i++) {\n        processNode(animations[i]);\n      }\n\n      return flatten(tree);\n\n      function processNode(entry) {\n        if (entry.processed) return entry;\n        entry.processed = true;\n\n        var elementNode = entry.domNode;\n        var parentNode = elementNode.parentNode;\n        lookup.set(elementNode, entry);\n\n        var parentEntry;\n        while (parentNode) {\n          parentEntry = lookup.get(parentNode);\n          if (parentEntry) {\n            if (!parentEntry.processed) {\n              parentEntry = processNode(parentEntry);\n            }\n            break;\n          }\n          parentNode = parentNode.parentNode;\n        }\n\n        (parentEntry || tree).children.push(entry);\n        return entry;\n      }\n\n      function flatten(tree) {\n        var result = [];\n        var queue = [];\n        var i;\n\n        for (i = 0; i < tree.children.length; i++) {\n          queue.push(tree.children[i]);\n        }\n\n        var remainingLevelEntries = queue.length;\n        var nextLevelEntries = 0;\n        var row = [];\n\n        for (i = 0; i < queue.length; i++) {\n          var entry = queue[i];\n          if (remainingLevelEntries <= 0) {\n            remainingLevelEntries = nextLevelEntries;\n            nextLevelEntries = 0;\n            result.push(row);\n            row = [];\n          }\n          row.push(entry.fn);\n          entry.children.forEach(function(childEntry) {\n            nextLevelEntries++;\n            queue.push(childEntry);\n          });\n          remainingLevelEntries--;\n        }\n\n        if (row.length) {\n          result.push(row);\n        }\n\n        return result;\n      }\n    }\n\n    // TODO(matsko): document the signature in a better way\n    return function(element, event, options) {\n      options = prepareAnimationOptions(options);\n      var isStructural = ['enter', 'move', 'leave'].indexOf(event) >= 0;\n\n      // there is no animation at the current moment, however\n      // these runner methods will get later updated with the\n      // methods leading into the driver's end/cancel methods\n      // for now they just stop the animation from starting\n      var runner = new $$AnimateRunner({\n        end: function() { close(); },\n        cancel: function() { close(true); }\n      });\n\n      if (!drivers.length) {\n        close();\n        return runner;\n      }\n\n      setRunner(element, runner);\n\n      var classes = mergeClasses(element.attr('class'), mergeClasses(options.addClass, options.removeClass));\n      var tempClasses = options.tempClasses;\n      if (tempClasses) {\n        classes += ' ' + tempClasses;\n        options.tempClasses = null;\n      }\n\n      var prepareClassName;\n      if (isStructural) {\n        prepareClassName = 'ng-' + event + PREPARE_CLASS_SUFFIX;\n        $$jqLite.addClass(element, prepareClassName);\n      }\n\n      animationQueue.push({\n        // this data is used by the postDigest code and passed into\n        // the driver step function\n        element: element,\n        classes: classes,\n        event: event,\n        structural: isStructural,\n        options: options,\n        beforeStart: beforeStart,\n        close: close\n      });\n\n      element.on('$destroy', handleDestroyedElement);\n\n      // we only want there to be one function called within the post digest\n      // block. This way we can group animations for all the animations that\n      // were apart of the same postDigest flush call.\n      if (animationQueue.length > 1) return runner;\n\n      $rootScope.$$postDigest(function() {\n        var animations = [];\n        forEach(animationQueue, function(entry) {\n          // the element was destroyed early on which removed the runner\n          // form its storage. This means we can't animate this element\n          // at all and it already has been closed due to destruction.\n          if (getRunner(entry.element)) {\n            animations.push(entry);\n          } else {\n            entry.close();\n          }\n        });\n\n        // now any future animations will be in another postDigest\n        animationQueue.length = 0;\n\n        var groupedAnimations = groupAnimations(animations);\n        var toBeSortedAnimations = [];\n\n        forEach(groupedAnimations, function(animationEntry) {\n          toBeSortedAnimations.push({\n            domNode: getDomNode(animationEntry.from ? animationEntry.from.element : animationEntry.element),\n            fn: function triggerAnimationStart() {\n              // it's important that we apply the `ng-animate` CSS class and the\n              // temporary classes before we do any driver invoking since these\n              // CSS classes may be required for proper CSS detection.\n              animationEntry.beforeStart();\n\n              var startAnimationFn, closeFn = animationEntry.close;\n\n              // in the event that the element was removed before the digest runs or\n              // during the RAF sequencing then we should not trigger the animation.\n              var targetElement = animationEntry.anchors\n                  ? (animationEntry.from.element || animationEntry.to.element)\n                  : animationEntry.element;\n\n              if (getRunner(targetElement)) {\n                var operation = invokeFirstDriver(animationEntry);\n                if (operation) {\n                  startAnimationFn = operation.start;\n                }\n              }\n\n              if (!startAnimationFn) {\n                closeFn();\n              } else {\n                var animationRunner = startAnimationFn();\n                animationRunner.done(function(status) {\n                  closeFn(!status);\n                });\n                updateAnimationRunners(animationEntry, animationRunner);\n              }\n            }\n          });\n        });\n\n        // we need to sort each of the animations in order of parent to child\n        // relationships. This ensures that the child classes are applied at the\n        // right time.\n        $$rAFScheduler(sortAnimations(toBeSortedAnimations));\n      });\n\n      return runner;\n\n      // TODO(matsko): change to reference nodes\n      function getAnchorNodes(node) {\n        var SELECTOR = '[' + NG_ANIMATE_REF_ATTR + ']';\n        var items = node.hasAttribute(NG_ANIMATE_REF_ATTR)\n              ? [node]\n              : node.querySelectorAll(SELECTOR);\n        var anchors = [];\n        forEach(items, function(node) {\n          var attr = node.getAttribute(NG_ANIMATE_REF_ATTR);\n          if (attr && attr.length) {\n            anchors.push(node);\n          }\n        });\n        return anchors;\n      }\n\n      function groupAnimations(animations) {\n        var preparedAnimations = [];\n        var refLookup = {};\n        forEach(animations, function(animation, index) {\n          var element = animation.element;\n          var node = getDomNode(element);\n          var event = animation.event;\n          var enterOrMove = ['enter', 'move'].indexOf(event) >= 0;\n          var anchorNodes = animation.structural ? getAnchorNodes(node) : [];\n\n          if (anchorNodes.length) {\n            var direction = enterOrMove ? 'to' : 'from';\n\n            forEach(anchorNodes, function(anchor) {\n              var key = anchor.getAttribute(NG_ANIMATE_REF_ATTR);\n              refLookup[key] = refLookup[key] || {};\n              refLookup[key][direction] = {\n                animationID: index,\n                element: jqLite(anchor)\n              };\n            });\n          } else {\n            preparedAnimations.push(animation);\n          }\n        });\n\n        var usedIndicesLookup = {};\n        var anchorGroups = {};\n        forEach(refLookup, function(operations, key) {\n          var from = operations.from;\n          var to = operations.to;\n\n          if (!from || !to) {\n            // only one of these is set therefore we can't have an\n            // anchor animation since all three pieces are required\n            var index = from ? from.animationID : to.animationID;\n            var indexKey = index.toString();\n            if (!usedIndicesLookup[indexKey]) {\n              usedIndicesLookup[indexKey] = true;\n              preparedAnimations.push(animations[index]);\n            }\n            return;\n          }\n\n          var fromAnimation = animations[from.animationID];\n          var toAnimation = animations[to.animationID];\n          var lookupKey = from.animationID.toString();\n          if (!anchorGroups[lookupKey]) {\n            var group = anchorGroups[lookupKey] = {\n              structural: true,\n              beforeStart: function() {\n                fromAnimation.beforeStart();\n                toAnimation.beforeStart();\n              },\n              close: function() {\n                fromAnimation.close();\n                toAnimation.close();\n              },\n              classes: cssClassesIntersection(fromAnimation.classes, toAnimation.classes),\n              from: fromAnimation,\n              to: toAnimation,\n              anchors: [] // TODO(matsko): change to reference nodes\n            };\n\n            // the anchor animations require that the from and to elements both have at least\n            // one shared CSS class which effectively marries the two elements together to use\n            // the same animation driver and to properly sequence the anchor animation.\n            if (group.classes.length) {\n              preparedAnimations.push(group);\n            } else {\n              preparedAnimations.push(fromAnimation);\n              preparedAnimations.push(toAnimation);\n            }\n          }\n\n          anchorGroups[lookupKey].anchors.push({\n            'out': from.element, 'in': to.element\n          });\n        });\n\n        return preparedAnimations;\n      }\n\n      function cssClassesIntersection(a,b) {\n        a = a.split(' ');\n        b = b.split(' ');\n        var matches = [];\n\n        for (var i = 0; i < a.length; i++) {\n          var aa = a[i];\n          if (aa.substring(0,3) === 'ng-') continue;\n\n          for (var j = 0; j < b.length; j++) {\n            if (aa === b[j]) {\n              matches.push(aa);\n              break;\n            }\n          }\n        }\n\n        return matches.join(' ');\n      }\n\n      function invokeFirstDriver(animationDetails) {\n        // we loop in reverse order since the more general drivers (like CSS and JS)\n        // may attempt more elements, but custom drivers are more particular\n        for (var i = drivers.length - 1; i >= 0; i--) {\n          var driverName = drivers[i];\n          var factory = $injector.get(driverName);\n          var driver = factory(animationDetails);\n          if (driver) {\n            return driver;\n          }\n        }\n      }\n\n      function beforeStart() {\n        element.addClass(NG_ANIMATE_CLASSNAME);\n        if (tempClasses) {\n          $$jqLite.addClass(element, tempClasses);\n        }\n        if (prepareClassName) {\n          $$jqLite.removeClass(element, prepareClassName);\n          prepareClassName = null;\n        }\n      }\n\n      function updateAnimationRunners(animation, newRunner) {\n        if (animation.from && animation.to) {\n          update(animation.from.element);\n          update(animation.to.element);\n        } else {\n          update(animation.element);\n        }\n\n        function update(element) {\n          var runner = getRunner(element);\n          if (runner) runner.setHost(newRunner);\n        }\n      }\n\n      function handleDestroyedElement() {\n        var runner = getRunner(element);\n        if (runner && (event !== 'leave' || !options.$$domOperationFired)) {\n          runner.end();\n        }\n      }\n\n      function close(rejected) {\n        element.off('$destroy', handleDestroyedElement);\n        removeRunner(element);\n\n        applyAnimationClasses(element, options);\n        applyAnimationStyles(element, options);\n        options.domOperation();\n\n        if (tempClasses) {\n          $$jqLite.removeClass(element, tempClasses);\n        }\n\n        element.removeClass(NG_ANIMATE_CLASSNAME);\n        runner.complete(!rejected);\n      }\n    };\n  }];\n}];\n\n/**\n * @ngdoc directive\n * @name ngAnimateSwap\n * @restrict A\n * @scope\n *\n * @description\n *\n * ngAnimateSwap is a animation-oriented directive that allows for the container to\n * be removed and entered in whenever the associated expression changes. A\n * common usecase for this directive is a rotating banner or slider component which\n * contains one image being present at a time. When the active image changes\n * then the old image will perform a `leave` animation and the new element\n * will be inserted via an `enter` animation.\n *\n * @animations\n * | Animation                        | Occurs                               |\n * |----------------------------------|--------------------------------------|\n * | {@link ng.$animate#enter enter}  | when the new element is inserted to the DOM  |\n * | {@link ng.$animate#leave leave}  | when the old element is removed from the DOM |\n *\n * @example\n * <example name=\"ngAnimateSwap-directive\" module=\"ngAnimateSwapExample\"\n *          deps=\"angular-animate.js\"\n *          animations=\"true\" fixBase=\"true\">\n *   <file name=\"index.html\">\n *     <div class=\"container\" ng-controller=\"AppCtrl\">\n *       <div ng-animate-swap=\"number\" class=\"cell swap-animation\" ng-class=\"colorClass(number)\">\n *         {{ number }}\n *       </div>\n *     </div>\n *   </file>\n *   <file name=\"script.js\">\n *     angular.module('ngAnimateSwapExample', ['ngAnimate'])\n *       .controller('AppCtrl', ['$scope', '$interval', function($scope, $interval) {\n *         $scope.number = 0;\n *         $interval(function() {\n *           $scope.number++;\n *         }, 1000);\n *\n *         var colors = ['red','blue','green','yellow','orange'];\n *         $scope.colorClass = function(number) {\n *           return colors[number % colors.length];\n *         };\n *       }]);\n *   </file>\n *  <file name=\"animations.css\">\n *  .container {\n *    height:250px;\n *    width:250px;\n *    position:relative;\n *    overflow:hidden;\n *    border:2px solid black;\n *  }\n *  .container .cell {\n *    font-size:150px;\n *    text-align:center;\n *    line-height:250px;\n *    position:absolute;\n *    top:0;\n *    left:0;\n *    right:0;\n *    border-bottom:2px solid black;\n *  }\n *  .swap-animation.ng-enter, .swap-animation.ng-leave {\n *    transition:0.5s linear all;\n *  }\n *  .swap-animation.ng-enter {\n *    top:-250px;\n *  }\n *  .swap-animation.ng-enter-active {\n *    top:0px;\n *  }\n *  .swap-animation.ng-leave {\n *    top:0px;\n *  }\n *  .swap-animation.ng-leave-active {\n *    top:250px;\n *  }\n *  .red { background:red; }\n *  .green { background:green; }\n *  .blue { background:blue; }\n *  .yellow { background:yellow; }\n *  .orange { background:orange; }\n *  </file>\n * </example>\n */\nvar ngAnimateSwapDirective = ['$animate', '$rootScope', function($animate, $rootScope) {\n  return {\n    restrict: 'A',\n    transclude: 'element',\n    terminal: true,\n    priority: 600, // we use 600 here to ensure that the directive is caught before others\n    link: function(scope, $element, attrs, ctrl, $transclude) {\n      var previousElement, previousScope;\n      scope.$watchCollection(attrs.ngAnimateSwap || attrs['for'], function(value) {\n        if (previousElement) {\n          $animate.leave(previousElement);\n        }\n        if (previousScope) {\n          previousScope.$destroy();\n          previousScope = null;\n        }\n        if (value || value === 0) {\n          previousScope = scope.$new();\n          $transclude(previousScope, function(element) {\n            previousElement = element;\n            $animate.enter(element, null, $element);\n          });\n        }\n      });\n    }\n  };\n}];\n\n/**\n * @ngdoc module\n * @name ngAnimate\n * @description\n *\n * The `ngAnimate` module provides support for CSS-based animations (keyframes and transitions) as well as JavaScript-based animations via\n * callback hooks. Animations are not enabled by default, however, by including `ngAnimate` the animation hooks are enabled for an Angular app.\n *\n * <div doc-module-components=\"ngAnimate\"></div>\n *\n * # Usage\n * Simply put, there are two ways to make use of animations when ngAnimate is used: by using **CSS** and **JavaScript**. The former works purely based\n * using CSS (by using matching CSS selectors/styles) and the latter triggers animations that are registered via `module.animation()`. For\n * both CSS and JS animations the sole requirement is to have a matching `CSS class` that exists both in the registered animation and within\n * the HTML element that the animation will be triggered on.\n *\n * ## Directive Support\n * The following directives are \"animation aware\":\n *\n * | Directive                                                                                                | Supported Animations                                                     |\n * |----------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|\n * | {@link ng.directive:ngRepeat#animations ngRepeat}                                                        | enter, leave and move                                                    |\n * | {@link ngRoute.directive:ngView#animations ngView}                                                       | enter and leave                                                          |\n * | {@link ng.directive:ngInclude#animations ngInclude}                                                      | enter and leave                                                          |\n * | {@link ng.directive:ngSwitch#animations ngSwitch}                                                        | enter and leave                                                          |\n * | {@link ng.directive:ngIf#animations ngIf}                                                                | enter and leave                                                          |\n * | {@link ng.directive:ngClass#animations ngClass}                                                          | add and remove (the CSS class(es) present)                               |\n * | {@link ng.directive:ngShow#animations ngShow} & {@link ng.directive:ngHide#animations ngHide}            | add and remove (the ng-hide class value)                                 |\n * | {@link ng.directive:form#animation-hooks form} & {@link ng.directive:ngModel#animation-hooks ngModel}    | add and remove (dirty, pristine, valid, invalid & all other validations) |\n * | {@link module:ngMessages#animations ngMessages}                                                          | add and remove (ng-active & ng-inactive)                                 |\n * | {@link module:ngMessages#animations ngMessage}                                                           | enter and leave                                                          |\n *\n * (More information can be found by visiting each the documentation associated with each directive.)\n *\n * ## CSS-based Animations\n *\n * CSS-based animations with ngAnimate are unique since they require no JavaScript code at all. By using a CSS class that we reference between our HTML\n * and CSS code we can create an animation that will be picked up by Angular when an underlying directive performs an operation.\n *\n * The example below shows how an `enter` animation can be made possible on an element using `ng-if`:\n *\n * ```html\n * <div ng-if=\"bool\" class=\"fade\">\n *    Fade me in out\n * </div>\n * <button ng-click=\"bool=true\">Fade In!</button>\n * <button ng-click=\"bool=false\">Fade Out!</button>\n * ```\n *\n * Notice the CSS class **fade**? We can now create the CSS transition code that references this class:\n *\n * ```css\n * /&#42; The starting CSS styles for the enter animation &#42;/\n * .fade.ng-enter {\n *   transition:0.5s linear all;\n *   opacity:0;\n * }\n *\n * /&#42; The finishing CSS styles for the enter animation &#42;/\n * .fade.ng-enter.ng-enter-active {\n *   opacity:1;\n * }\n * ```\n *\n * The key thing to remember here is that, depending on the animation event (which each of the directives above trigger depending on what's going on) two\n * generated CSS classes will be applied to the element; in the example above we have `.ng-enter` and `.ng-enter-active`. For CSS transitions, the transition\n * code **must** be defined within the starting CSS class (in this case `.ng-enter`). The destination class is what the transition will animate towards.\n *\n * If for example we wanted to create animations for `leave` and `move` (ngRepeat triggers move) then we can do so using the same CSS naming conventions:\n *\n * ```css\n * /&#42; now the element will fade out before it is removed from the DOM &#42;/\n * .fade.ng-leave {\n *   transition:0.5s linear all;\n *   opacity:1;\n * }\n * .fade.ng-leave.ng-leave-active {\n *   opacity:0;\n * }\n * ```\n *\n * We can also make use of **CSS Keyframes** by referencing the keyframe animation within the starting CSS class:\n *\n * ```css\n * /&#42; there is no need to define anything inside of the destination\n * CSS class since the keyframe will take charge of the animation &#42;/\n * .fade.ng-leave {\n *   animation: my_fade_animation 0.5s linear;\n *   -webkit-animation: my_fade_animation 0.5s linear;\n * }\n *\n * @keyframes my_fade_animation {\n *   from { opacity:1; }\n *   to { opacity:0; }\n * }\n *\n * @-webkit-keyframes my_fade_animation {\n *   from { opacity:1; }\n *   to { opacity:0; }\n * }\n * ```\n *\n * Feel free also mix transitions and keyframes together as well as any other CSS classes on the same element.\n *\n * ### CSS Class-based Animations\n *\n * Class-based animations (animations that are triggered via `ngClass`, `ngShow`, `ngHide` and some other directives) have a slightly different\n * naming convention. Class-based animations are basic enough that a standard transition or keyframe can be referenced on the class being added\n * and removed.\n *\n * For example if we wanted to do a CSS animation for `ngHide` then we place an animation on the `.ng-hide` CSS class:\n *\n * ```html\n * <div ng-show=\"bool\" class=\"fade\">\n *   Show and hide me\n * </div>\n * <button ng-click=\"bool=!bool\">Toggle</button>\n *\n * <style>\n * .fade.ng-hide {\n *   transition:0.5s linear all;\n *   opacity:0;\n * }\n * </style>\n * ```\n *\n * All that is going on here with ngShow/ngHide behind the scenes is the `.ng-hide` class is added/removed (when the hidden state is valid). Since\n * ngShow and ngHide are animation aware then we can match up a transition and ngAnimate handles the rest.\n *\n * In addition the addition and removal of the CSS class, ngAnimate also provides two helper methods that we can use to further decorate the animation\n * with CSS styles.\n *\n * ```html\n * <div ng-class=\"{on:onOff}\" class=\"highlight\">\n *   Highlight this box\n * </div>\n * <button ng-click=\"onOff=!onOff\">Toggle</button>\n *\n * <style>\n * .highlight {\n *   transition:0.5s linear all;\n * }\n * .highlight.on-add {\n *   background:white;\n * }\n * .highlight.on {\n *   background:yellow;\n * }\n * .highlight.on-remove {\n *   background:black;\n * }\n * </style>\n * ```\n *\n * We can also make use of CSS keyframes by placing them within the CSS classes.\n *\n *\n * ### CSS Staggering Animations\n * A Staggering animation is a collection of animations that are issued with a slight delay in between each successive operation resulting in a\n * curtain-like effect. The ngAnimate module (versions >=1.2) supports staggering animations and the stagger effect can be\n * performed by creating a **ng-EVENT-stagger** CSS class and attaching that class to the base CSS class used for\n * the animation. The style property expected within the stagger class can either be a **transition-delay** or an\n * **animation-delay** property (or both if your animation contains both transitions and keyframe animations).\n *\n * ```css\n * .my-animation.ng-enter {\n *   /&#42; standard transition code &#42;/\n *   transition: 1s linear all;\n *   opacity:0;\n * }\n * .my-animation.ng-enter-stagger {\n *   /&#42; this will have a 100ms delay between each successive leave animation &#42;/\n *   transition-delay: 0.1s;\n *\n *   /&#42; As of 1.4.4, this must always be set: it signals ngAnimate\n *     to not accidentally inherit a delay property from another CSS class &#42;/\n *   transition-duration: 0s;\n *\n *   /&#42; if you are using animations instead of transitions you should configure as follows:\n *     animation-delay: 0.1s;\n *     animation-duration: 0s; &#42;/\n * }\n * .my-animation.ng-enter.ng-enter-active {\n *   /&#42; standard transition styles &#42;/\n *   opacity:1;\n * }\n * ```\n *\n * Staggering animations work by default in ngRepeat (so long as the CSS class is defined). Outside of ngRepeat, to use staggering animations\n * on your own, they can be triggered by firing multiple calls to the same event on $animate. However, the restrictions surrounding this\n * are that each of the elements must have the same CSS className value as well as the same parent element. A stagger operation\n * will also be reset if one or more animation frames have passed since the multiple calls to `$animate` were fired.\n *\n * The following code will issue the **ng-leave-stagger** event on the element provided:\n *\n * ```js\n * var kids = parent.children();\n *\n * $animate.leave(kids[0]); //stagger index=0\n * $animate.leave(kids[1]); //stagger index=1\n * $animate.leave(kids[2]); //stagger index=2\n * $animate.leave(kids[3]); //stagger index=3\n * $animate.leave(kids[4]); //stagger index=4\n *\n * window.requestAnimationFrame(function() {\n *   //stagger has reset itself\n *   $animate.leave(kids[5]); //stagger index=0\n *   $animate.leave(kids[6]); //stagger index=1\n *\n *   $scope.$digest();\n * });\n * ```\n *\n * Stagger animations are currently only supported within CSS-defined animations.\n *\n * ### The `ng-animate` CSS class\n *\n * When ngAnimate is animating an element it will apply the `ng-animate` CSS class to the element for the duration of the animation.\n * This is a temporary CSS class and it will be removed once the animation is over (for both JavaScript and CSS-based animations).\n *\n * Therefore, animations can be applied to an element using this temporary class directly via CSS.\n *\n * ```css\n * .zipper.ng-animate {\n *   transition:0.5s linear all;\n * }\n * .zipper.ng-enter {\n *   opacity:0;\n * }\n * .zipper.ng-enter.ng-enter-active {\n *   opacity:1;\n * }\n * .zipper.ng-leave {\n *   opacity:1;\n * }\n * .zipper.ng-leave.ng-leave-active {\n *   opacity:0;\n * }\n * ```\n *\n * (Note that the `ng-animate` CSS class is reserved and it cannot be applied on an element directly since ngAnimate will always remove\n * the CSS class once an animation has completed.)\n *\n *\n * ### The `ng-[event]-prepare` class\n *\n * This is a special class that can be used to prevent unwanted flickering / flash of content before\n * the actual animation starts. The class is added as soon as an animation is initialized, but removed\n * before the actual animation starts (after waiting for a $digest).\n * It is also only added for *structural* animations (`enter`, `move`, and `leave`).\n *\n * In practice, flickering can appear when nesting elements with structural animations such as `ngIf`\n * into elements that have class-based animations such as `ngClass`.\n *\n * ```html\n * <div ng-class=\"{red: myProp}\">\n *   <div ng-class=\"{blue: myProp}\">\n *     <div class=\"message\" ng-if=\"myProp\"></div>\n *   </div>\n * </div>\n * ```\n *\n * It is possible that during the `enter` animation, the `.message` div will be briefly visible before it starts animating.\n * In that case, you can add styles to the CSS that make sure the element stays hidden before the animation starts:\n *\n * ```css\n * .message.ng-enter-prepare {\n *   opacity: 0;\n * }\n *\n * ```\n *\n * ## JavaScript-based Animations\n *\n * ngAnimate also allows for animations to be consumed by JavaScript code. The approach is similar to CSS-based animations (where there is a shared\n * CSS class that is referenced in our HTML code) but in addition we need to register the JavaScript animation on the module. By making use of the\n * `module.animation()` module function we can register the animation.\n *\n * Let's see an example of a enter/leave animation using `ngRepeat`:\n *\n * ```html\n * <div ng-repeat=\"item in items\" class=\"slide\">\n *   {{ item }}\n * </div>\n * ```\n *\n * See the **slide** CSS class? Let's use that class to define an animation that we'll structure in our module code by using `module.animation`:\n *\n * ```js\n * myModule.animation('.slide', [function() {\n *   return {\n *     // make note that other events (like addClass/removeClass)\n *     // have different function input parameters\n *     enter: function(element, doneFn) {\n *       jQuery(element).fadeIn(1000, doneFn);\n *\n *       // remember to call doneFn so that angular\n *       // knows that the animation has concluded\n *     },\n *\n *     move: function(element, doneFn) {\n *       jQuery(element).fadeIn(1000, doneFn);\n *     },\n *\n *     leave: function(element, doneFn) {\n *       jQuery(element).fadeOut(1000, doneFn);\n *     }\n *   }\n * }]);\n * ```\n *\n * The nice thing about JS-based animations is that we can inject other services and make use of advanced animation libraries such as\n * greensock.js and velocity.js.\n *\n * If our animation code class-based (meaning that something like `ngClass`, `ngHide` and `ngShow` triggers it) then we can still define\n * our animations inside of the same registered animation, however, the function input arguments are a bit different:\n *\n * ```html\n * <div ng-class=\"color\" class=\"colorful\">\n *   this box is moody\n * </div>\n * <button ng-click=\"color='red'\">Change to red</button>\n * <button ng-click=\"color='blue'\">Change to blue</button>\n * <button ng-click=\"color='green'\">Change to green</button>\n * ```\n *\n * ```js\n * myModule.animation('.colorful', [function() {\n *   return {\n *     addClass: function(element, className, doneFn) {\n *       // do some cool animation and call the doneFn\n *     },\n *     removeClass: function(element, className, doneFn) {\n *       // do some cool animation and call the doneFn\n *     },\n *     setClass: function(element, addedClass, removedClass, doneFn) {\n *       // do some cool animation and call the doneFn\n *     }\n *   }\n * }]);\n * ```\n *\n * ## CSS + JS Animations Together\n *\n * AngularJS 1.4 and higher has taken steps to make the amalgamation of CSS and JS animations more flexible. However, unlike earlier versions of Angular,\n * defining CSS and JS animations to work off of the same CSS class will not work anymore. Therefore the example below will only result in **JS animations taking\n * charge of the animation**:\n *\n * ```html\n * <div ng-if=\"bool\" class=\"slide\">\n *   Slide in and out\n * </div>\n * ```\n *\n * ```js\n * myModule.animation('.slide', [function() {\n *   return {\n *     enter: function(element, doneFn) {\n *       jQuery(element).slideIn(1000, doneFn);\n *     }\n *   }\n * }]);\n * ```\n *\n * ```css\n * .slide.ng-enter {\n *   transition:0.5s linear all;\n *   transform:translateY(-100px);\n * }\n * .slide.ng-enter.ng-enter-active {\n *   transform:translateY(0);\n * }\n * ```\n *\n * Does this mean that CSS and JS animations cannot be used together? Do JS-based animations always have higher priority? We can make up for the\n * lack of CSS animations by using the `$animateCss` service to trigger our own tweaked-out, CSS-based animations directly from\n * our own JS-based animation code:\n *\n * ```js\n * myModule.animation('.slide', ['$animateCss', function($animateCss) {\n *   return {\n *     enter: function(element) {\n*        // this will trigger `.slide.ng-enter` and `.slide.ng-enter-active`.\n *       return $animateCss(element, {\n *         event: 'enter',\n *         structural: true\n *       });\n *     }\n *   }\n * }]);\n * ```\n *\n * The nice thing here is that we can save bandwidth by sticking to our CSS-based animation code and we don't need to rely on a 3rd-party animation framework.\n *\n * The `$animateCss` service is very powerful since we can feed in all kinds of extra properties that will be evaluated and fed into a CSS transition or\n * keyframe animation. For example if we wanted to animate the height of an element while adding and removing classes then we can do so by providing that\n * data into `$animateCss` directly:\n *\n * ```js\n * myModule.animation('.slide', ['$animateCss', function($animateCss) {\n *   return {\n *     enter: function(element) {\n *       return $animateCss(element, {\n *         event: 'enter',\n *         structural: true,\n *         addClass: 'maroon-setting',\n *         from: { height:0 },\n *         to: { height: 200 }\n *       });\n *     }\n *   }\n * }]);\n * ```\n *\n * Now we can fill in the rest via our transition CSS code:\n *\n * ```css\n * /&#42; the transition tells ngAnimate to make the animation happen &#42;/\n * .slide.ng-enter { transition:0.5s linear all; }\n *\n * /&#42; this extra CSS class will be absorbed into the transition\n * since the $animateCss code is adding the class &#42;/\n * .maroon-setting { background:red; }\n * ```\n *\n * And `$animateCss` will figure out the rest. Just make sure to have the `done()` callback fire the `doneFn` function to signal when the animation is over.\n *\n * To learn more about what's possible be sure to visit the {@link ngAnimate.$animateCss $animateCss service}.\n *\n * ## Animation Anchoring (via `ng-animate-ref`)\n *\n * ngAnimate in AngularJS 1.4 comes packed with the ability to cross-animate elements between\n * structural areas of an application (like views) by pairing up elements using an attribute\n * called `ng-animate-ref`.\n *\n * Let's say for example we have two views that are managed by `ng-view` and we want to show\n * that there is a relationship between two components situated in within these views. By using the\n * `ng-animate-ref` attribute we can identify that the two components are paired together and we\n * can then attach an animation, which is triggered when the view changes.\n *\n * Say for example we have the following template code:\n *\n * ```html\n * <!-- index.html -->\n * <div ng-view class=\"view-animation\">\n * </div>\n *\n * <!-- home.html -->\n * <a href=\"#/banner-page\">\n *   <img src=\"./banner.jpg\" class=\"banner\" ng-animate-ref=\"banner\">\n * </a>\n *\n * <!-- banner-page.html -->\n * <img src=\"./banner.jpg\" class=\"banner\" ng-animate-ref=\"banner\">\n * ```\n *\n * Now, when the view changes (once the link is clicked), ngAnimate will examine the\n * HTML contents to see if there is a match reference between any components in the view\n * that is leaving and the view that is entering. It will scan both the view which is being\n * removed (leave) and inserted (enter) to see if there are any paired DOM elements that\n * contain a matching ref value.\n *\n * The two images match since they share the same ref value. ngAnimate will now create a\n * transport element (which is a clone of the first image element) and it will then attempt\n * to animate to the position of the second image element in the next view. For the animation to\n * work a special CSS class called `ng-anchor` will be added to the transported element.\n *\n * We can now attach a transition onto the `.banner.ng-anchor` CSS class and then\n * ngAnimate will handle the entire transition for us as well as the addition and removal of\n * any changes of CSS classes between the elements:\n *\n * ```css\n * .banner.ng-anchor {\n *   /&#42; this animation will last for 1 second since there are\n *          two phases to the animation (an `in` and an `out` phase) &#42;/\n *   transition:0.5s linear all;\n * }\n * ```\n *\n * We also **must** include animations for the views that are being entered and removed\n * (otherwise anchoring wouldn't be possible since the new view would be inserted right away).\n *\n * ```css\n * .view-animation.ng-enter, .view-animation.ng-leave {\n *   transition:0.5s linear all;\n *   position:fixed;\n *   left:0;\n *   top:0;\n *   width:100%;\n * }\n * .view-animation.ng-enter {\n *   transform:translateX(100%);\n * }\n * .view-animation.ng-leave,\n * .view-animation.ng-enter.ng-enter-active {\n *   transform:translateX(0%);\n * }\n * .view-animation.ng-leave.ng-leave-active {\n *   transform:translateX(-100%);\n * }\n * ```\n *\n * Now we can jump back to the anchor animation. When the animation happens, there are two stages that occur:\n * an `out` and an `in` stage. The `out` stage happens first and that is when the element is animated away\n * from its origin. Once that animation is over then the `in` stage occurs which animates the\n * element to its destination. The reason why there are two animations is to give enough time\n * for the enter animation on the new element to be ready.\n *\n * The example above sets up a transition for both the in and out phases, but we can also target the out or\n * in phases directly via `ng-anchor-out` and `ng-anchor-in`.\n *\n * ```css\n * .banner.ng-anchor-out {\n *   transition: 0.5s linear all;\n *\n *   /&#42; the scale will be applied during the out animation,\n *          but will be animated away when the in animation runs &#42;/\n *   transform: scale(1.2);\n * }\n *\n * .banner.ng-anchor-in {\n *   transition: 1s linear all;\n * }\n * ```\n *\n *\n *\n *\n * ### Anchoring Demo\n *\n  <example module=\"anchoringExample\"\n           name=\"anchoringExample\"\n           id=\"anchoringExample\"\n           deps=\"angular-animate.js;angular-route.js\"\n           animations=\"true\">\n    <file name=\"index.html\">\n      <a href=\"#!/\">Home</a>\n      <hr />\n      <div class=\"view-container\">\n        <div ng-view class=\"view\"></div>\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('anchoringExample', ['ngAnimate', 'ngRoute'])\n        .config(['$routeProvider', function($routeProvider) {\n          $routeProvider.when('/', {\n            templateUrl: 'home.html',\n            controller: 'HomeController as home'\n          });\n          $routeProvider.when('/profile/:id', {\n            templateUrl: 'profile.html',\n            controller: 'ProfileController as profile'\n          });\n        }])\n        .run(['$rootScope', function($rootScope) {\n          $rootScope.records = [\n            { id: 1, title: 'Miss Beulah Roob' },\n            { id: 2, title: 'Trent Morissette' },\n            { id: 3, title: 'Miss Ava Pouros' },\n            { id: 4, title: 'Rod Pouros' },\n            { id: 5, title: 'Abdul Rice' },\n            { id: 6, title: 'Laurie Rutherford Sr.' },\n            { id: 7, title: 'Nakia McLaughlin' },\n            { id: 8, title: 'Jordon Blanda DVM' },\n            { id: 9, title: 'Rhoda Hand' },\n            { id: 10, title: 'Alexandrea Sauer' }\n          ];\n        }])\n        .controller('HomeController', [function() {\n          //empty\n        }])\n        .controller('ProfileController', ['$rootScope', '$routeParams',\n            function ProfileController($rootScope, $routeParams) {\n          var index = parseInt($routeParams.id, 10);\n          var record = $rootScope.records[index - 1];\n\n          this.title = record.title;\n          this.id = record.id;\n        }]);\n    </file>\n    <file name=\"home.html\">\n      <h2>Welcome to the home page</h1>\n      <p>Please click on an element</p>\n      <a class=\"record\"\n         ng-href=\"#!/profile/{{ record.id }}\"\n         ng-animate-ref=\"{{ record.id }}\"\n         ng-repeat=\"record in records\">\n        {{ record.title }}\n      </a>\n    </file>\n    <file name=\"profile.html\">\n      <div class=\"profile record\" ng-animate-ref=\"{{ profile.id }}\">\n        {{ profile.title }}\n      </div>\n    </file>\n    <file name=\"animations.css\">\n      .record {\n        display:block;\n        font-size:20px;\n      }\n      .profile {\n        background:black;\n        color:white;\n        font-size:100px;\n      }\n      .view-container {\n        position:relative;\n      }\n      .view-container > .view.ng-animate {\n        position:absolute;\n        top:0;\n        left:0;\n        width:100%;\n        min-height:500px;\n      }\n      .view.ng-enter, .view.ng-leave,\n      .record.ng-anchor {\n        transition:0.5s linear all;\n      }\n      .view.ng-enter {\n        transform:translateX(100%);\n      }\n      .view.ng-enter.ng-enter-active, .view.ng-leave {\n        transform:translateX(0%);\n      }\n      .view.ng-leave.ng-leave-active {\n        transform:translateX(-100%);\n      }\n      .record.ng-anchor-out {\n        background:red;\n      }\n    </file>\n  </example>\n *\n * ### How is the element transported?\n *\n * When an anchor animation occurs, ngAnimate will clone the starting element and position it exactly where the starting\n * element is located on screen via absolute positioning. The cloned element will be placed inside of the root element\n * of the application (where ng-app was defined) and all of the CSS classes of the starting element will be applied. The\n * element will then animate into the `out` and `in` animations and will eventually reach the coordinates and match\n * the dimensions of the destination element. During the entire animation a CSS class of `.ng-animate-shim` will be applied\n * to both the starting and destination elements in order to hide them from being visible (the CSS styling for the class\n * is: `visibility:hidden`). Once the anchor reaches its destination then it will be removed and the destination element\n * will become visible since the shim class will be removed.\n *\n * ### How is the morphing handled?\n *\n * CSS Anchoring relies on transitions and keyframes and the internal code is intelligent enough to figure out\n * what CSS classes differ between the starting element and the destination element. These different CSS classes\n * will be added/removed on the anchor element and a transition will be applied (the transition that is provided\n * in the anchor class). Long story short, ngAnimate will figure out what classes to add and remove which will\n * make the transition of the element as smooth and automatic as possible. Be sure to use simple CSS classes that\n * do not rely on DOM nesting structure so that the anchor element appears the same as the starting element (since\n * the cloned element is placed inside of root element which is likely close to the body element).\n *\n * Note that if the root element is on the `<html>` element then the cloned node will be placed inside of body.\n *\n *\n * ## Using $animate in your directive code\n *\n * So far we've explored how to feed in animations into an Angular application, but how do we trigger animations within our own directives in our application?\n * By injecting the `$animate` service into our directive code, we can trigger structural and class-based hooks which can then be consumed by animations. Let's\n * imagine we have a greeting box that shows and hides itself when the data changes\n *\n * ```html\n * <greeting-box active=\"onOrOff\">Hi there</greeting-box>\n * ```\n *\n * ```js\n * ngModule.directive('greetingBox', ['$animate', function($animate) {\n *   return function(scope, element, attrs) {\n *     attrs.$observe('active', function(value) {\n *       value ? $animate.addClass(element, 'on') : $animate.removeClass(element, 'on');\n *     });\n *   });\n * }]);\n * ```\n *\n * Now the `on` CSS class is added and removed on the greeting box component. Now if we add a CSS class on top of the greeting box element\n * in our HTML code then we can trigger a CSS or JS animation to happen.\n *\n * ```css\n * /&#42; normally we would create a CSS class to reference on the element &#42;/\n * greeting-box.on { transition:0.5s linear all; background:green; color:white; }\n * ```\n *\n * The `$animate` service contains a variety of other methods like `enter`, `leave`, `animate` and `setClass`. To learn more about what's\n * possible be sure to visit the {@link ng.$animate $animate service API page}.\n *\n *\n * ## Callbacks and Promises\n *\n * When `$animate` is called it returns a promise that can be used to capture when the animation has ended. Therefore if we were to trigger\n * an animation (within our directive code) then we can continue performing directive and scope related activities after the animation has\n * ended by chaining onto the returned promise that animation method returns.\n *\n * ```js\n * // somewhere within the depths of the directive\n * $animate.enter(element, parent).then(function() {\n *   //the animation has completed\n * });\n * ```\n *\n * (Note that earlier versions of Angular prior to v1.4 required the promise code to be wrapped using `$scope.$apply(...)`. This is not the case\n * anymore.)\n *\n * In addition to the animation promise, we can also make use of animation-related callbacks within our directives and controller code by registering\n * an event listener using the `$animate` service. Let's say for example that an animation was triggered on our view\n * routing controller to hook into that:\n *\n * ```js\n * ngModule.controller('HomePageController', ['$animate', function($animate) {\n *   $animate.on('enter', ngViewElement, function(element) {\n *     // the animation for this route has completed\n *   }]);\n * }])\n * ```\n *\n * (Note that you will need to trigger a digest within the callback to get angular to notice any scope-related changes.)\n */\n\nvar copy;\nvar extend;\nvar forEach;\nvar isArray;\nvar isDefined;\nvar isElement;\nvar isFunction;\nvar isObject;\nvar isString;\nvar isUndefined;\nvar jqLite;\nvar noop;\n\n/**\n * @ngdoc service\n * @name $animate\n * @kind object\n *\n * @description\n * The ngAnimate `$animate` service documentation is the same for the core `$animate` service.\n *\n * Click here {@link ng.$animate to learn more about animations with `$animate`}.\n */\nangular.module('ngAnimate', [], function initAngularHelpers() {\n  // Access helpers from angular core.\n  // Do it inside a `config` block to ensure `window.angular` is available.\n  noop        = angular.noop;\n  copy        = angular.copy;\n  extend      = angular.extend;\n  jqLite      = angular.element;\n  forEach     = angular.forEach;\n  isArray     = angular.isArray;\n  isString    = angular.isString;\n  isObject    = angular.isObject;\n  isUndefined = angular.isUndefined;\n  isDefined   = angular.isDefined;\n  isFunction  = angular.isFunction;\n  isElement   = angular.isElement;\n})\n  .info({ angularVersion: '1.6.5' })\n  .directive('ngAnimateSwap', ngAnimateSwapDirective)\n\n  .directive('ngAnimateChildren', $$AnimateChildrenDirective)\n  .factory('$$rAFScheduler', $$rAFSchedulerFactory)\n\n  .provider('$$animateQueue', $$AnimateQueueProvider)\n  .provider('$$animation', $$AnimationProvider)\n\n  .provider('$animateCss', $AnimateCssProvider)\n  .provider('$$animateCssDriver', $$AnimateCssDriverProvider)\n\n  .provider('$$animateJs', $$AnimateJsProvider)\n  .provider('$$animateJsDriver', $$AnimateJsDriverProvider);\n\n\n})(window, window.angular);\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = window.angular;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/angular-animate/angular-animate.js\n// module id = 654\n// module chunks = 0","require('./angular-animate');\nmodule.exports = 'ngAnimate';\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = window.angular;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/angular-animate/index.js\n// module id = 655\n// module chunks = 0","/**\n * @license AngularJS v1.6.5\n * (c) 2010-2017 Google, Inc. http://angularjs.org\n * License: MIT\n */\n(function(window, angular) {'use strict';\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *     Any commits to this file should be reviewed with security in mind.  *\n *   Changes to this file can potentially create security vulnerabilities. *\n *          An approval from 2 Core members with history of modifying      *\n *                         this file is required.                          *\n *                                                                         *\n *  Does the change somehow allow for arbitrary javascript to be executed? *\n *    Or allows for someone to change the prototype of built-in objects?   *\n *     Or gives undesired access to variables likes document or window?    *\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\nvar $sanitizeMinErr = angular.$$minErr('$sanitize');\nvar bind;\nvar extend;\nvar forEach;\nvar isDefined;\nvar lowercase;\nvar noop;\nvar nodeContains;\nvar htmlParser;\nvar htmlSanitizeWriter;\n\n/**\n * @ngdoc module\n * @name ngSanitize\n * @description\n *\n * # ngSanitize\n *\n * The `ngSanitize` module provides functionality to sanitize HTML.\n *\n *\n * <div doc-module-components=\"ngSanitize\"></div>\n *\n * See {@link ngSanitize.$sanitize `$sanitize`} for usage.\n */\n\n/**\n * @ngdoc service\n * @name $sanitize\n * @kind function\n *\n * @description\n *   Sanitizes an html string by stripping all potentially dangerous tokens.\n *\n *   The input is sanitized by parsing the HTML into tokens. All safe tokens (from a whitelist) are\n *   then serialized back to properly escaped html string. This means that no unsafe input can make\n *   it into the returned string.\n *\n *   The whitelist for URL sanitization of attribute values is configured using the functions\n *   `aHrefSanitizationWhitelist` and `imgSrcSanitizationWhitelist` of {@link ng.$compileProvider\n *   `$compileProvider`}.\n *\n *   The input may also contain SVG markup if this is enabled via {@link $sanitizeProvider}.\n *\n * @param {string} html HTML input.\n * @returns {string} Sanitized HTML.\n *\n * @example\n   <example module=\"sanitizeExample\" deps=\"angular-sanitize.js\" name=\"sanitize-service\">\n   <file name=\"index.html\">\n     <script>\n         angular.module('sanitizeExample', ['ngSanitize'])\n           .controller('ExampleController', ['$scope', '$sce', function($scope, $sce) {\n             $scope.snippet =\n               '<p style=\"color:blue\">an html\\n' +\n               '<em onmouseover=\"this.textContent=\\'PWN3D!\\'\">click here</em>\\n' +\n               'snippet</p>';\n             $scope.deliberatelyTrustDangerousSnippet = function() {\n               return $sce.trustAsHtml($scope.snippet);\n             };\n           }]);\n     </script>\n     <div ng-controller=\"ExampleController\">\n        Snippet: <textarea ng-model=\"snippet\" cols=\"60\" rows=\"3\"></textarea>\n       <table>\n         <tr>\n           <td>Directive</td>\n           <td>How</td>\n           <td>Source</td>\n           <td>Rendered</td>\n         </tr>\n         <tr id=\"bind-html-with-sanitize\">\n           <td>ng-bind-html</td>\n           <td>Automatically uses $sanitize</td>\n           <td><pre>&lt;div ng-bind-html=\"snippet\"&gt;<br/>&lt;/div&gt;</pre></td>\n           <td><div ng-bind-html=\"snippet\"></div></td>\n         </tr>\n         <tr id=\"bind-html-with-trust\">\n           <td>ng-bind-html</td>\n           <td>Bypass $sanitize by explicitly trusting the dangerous value</td>\n           <td>\n           <pre>&lt;div ng-bind-html=\"deliberatelyTrustDangerousSnippet()\"&gt;\n&lt;/div&gt;</pre>\n           </td>\n           <td><div ng-bind-html=\"deliberatelyTrustDangerousSnippet()\"></div></td>\n         </tr>\n         <tr id=\"bind-default\">\n           <td>ng-bind</td>\n           <td>Automatically escapes</td>\n           <td><pre>&lt;div ng-bind=\"snippet\"&gt;<br/>&lt;/div&gt;</pre></td>\n           <td><div ng-bind=\"snippet\"></div></td>\n         </tr>\n       </table>\n       </div>\n   </file>\n   <file name=\"protractor.js\" type=\"protractor\">\n     it('should sanitize the html snippet by default', function() {\n       expect(element(by.css('#bind-html-with-sanitize div')).getAttribute('innerHTML')).\n         toBe('<p>an html\\n<em>click here</em>\\nsnippet</p>');\n     });\n\n     it('should inline raw snippet if bound to a trusted value', function() {\n       expect(element(by.css('#bind-html-with-trust div')).getAttribute('innerHTML')).\n         toBe(\"<p style=\\\"color:blue\\\">an html\\n\" +\n              \"<em onmouseover=\\\"this.textContent='PWN3D!'\\\">click here</em>\\n\" +\n              \"snippet</p>\");\n     });\n\n     it('should escape snippet without any filter', function() {\n       expect(element(by.css('#bind-default div')).getAttribute('innerHTML')).\n         toBe(\"&lt;p style=\\\"color:blue\\\"&gt;an html\\n\" +\n              \"&lt;em onmouseover=\\\"this.textContent='PWN3D!'\\\"&gt;click here&lt;/em&gt;\\n\" +\n              \"snippet&lt;/p&gt;\");\n     });\n\n     it('should update', function() {\n       element(by.model('snippet')).clear();\n       element(by.model('snippet')).sendKeys('new <b onclick=\"alert(1)\">text</b>');\n       expect(element(by.css('#bind-html-with-sanitize div')).getAttribute('innerHTML')).\n         toBe('new <b>text</b>');\n       expect(element(by.css('#bind-html-with-trust div')).getAttribute('innerHTML')).toBe(\n         'new <b onclick=\"alert(1)\">text</b>');\n       expect(element(by.css('#bind-default div')).getAttribute('innerHTML')).toBe(\n         \"new &lt;b onclick=\\\"alert(1)\\\"&gt;text&lt;/b&gt;\");\n     });\n   </file>\n   </example>\n */\n\n\n/**\n * @ngdoc provider\n * @name $sanitizeProvider\n * @this\n *\n * @description\n * Creates and configures {@link $sanitize} instance.\n */\nfunction $SanitizeProvider() {\n  var svgEnabled = false;\n\n  this.$get = ['$$sanitizeUri', function($$sanitizeUri) {\n    if (svgEnabled) {\n      extend(validElements, svgElements);\n    }\n    return function(html) {\n      var buf = [];\n      htmlParser(html, htmlSanitizeWriter(buf, function(uri, isImage) {\n        return !/^unsafe:/.test($$sanitizeUri(uri, isImage));\n      }));\n      return buf.join('');\n    };\n  }];\n\n\n  /**\n   * @ngdoc method\n   * @name $sanitizeProvider#enableSvg\n   * @kind function\n   *\n   * @description\n   * Enables a subset of svg to be supported by the sanitizer.\n   *\n   * <div class=\"alert alert-warning\">\n   *   <p>By enabling this setting without taking other precautions, you might expose your\n   *   application to click-hijacking attacks. In these attacks, sanitized svg elements could be positioned\n   *   outside of the containing element and be rendered over other elements on the page (e.g. a login\n   *   link). Such behavior can then result in phishing incidents.</p>\n   *\n   *   <p>To protect against these, explicitly setup `overflow: hidden` css rule for all potential svg\n   *   tags within the sanitized content:</p>\n   *\n   *   <br>\n   *\n   *   <pre><code>\n   *   .rootOfTheIncludedContent svg {\n   *     overflow: hidden !important;\n   *   }\n   *   </code></pre>\n   * </div>\n   *\n   * @param {boolean=} flag Enable or disable SVG support in the sanitizer.\n   * @returns {boolean|ng.$sanitizeProvider} Returns the currently configured value if called\n   *    without an argument or self for chaining otherwise.\n   */\n  this.enableSvg = function(enableSvg) {\n    if (isDefined(enableSvg)) {\n      svgEnabled = enableSvg;\n      return this;\n    } else {\n      return svgEnabled;\n    }\n  };\n\n  //////////////////////////////////////////////////////////////////////////////////////////////////\n  // Private stuff\n  //////////////////////////////////////////////////////////////////////////////////////////////////\n\n  bind = angular.bind;\n  extend = angular.extend;\n  forEach = angular.forEach;\n  isDefined = angular.isDefined;\n  lowercase = angular.lowercase;\n  noop = angular.noop;\n\n  htmlParser = htmlParserImpl;\n  htmlSanitizeWriter = htmlSanitizeWriterImpl;\n\n  nodeContains = window.Node.prototype.contains || /** @this */ function(arg) {\n    // eslint-disable-next-line no-bitwise\n    return !!(this.compareDocumentPosition(arg) & 16);\n  };\n\n  // Regular Expressions for parsing tags and attributes\n  var SURROGATE_PAIR_REGEXP = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\n    // Match everything outside of normal chars and \" (quote character)\n    NON_ALPHANUMERIC_REGEXP = /([^#-~ |!])/g;\n\n\n  // Good source of info about elements and attributes\n  // http://dev.w3.org/html5/spec/Overview.html#semantics\n  // http://simon.html5.org/html-elements\n\n  // Safe Void Elements - HTML5\n  // http://dev.w3.org/html5/spec/Overview.html#void-elements\n  var voidElements = toMap('area,br,col,hr,img,wbr');\n\n  // Elements that you can, intentionally, leave open (and which close themselves)\n  // http://dev.w3.org/html5/spec/Overview.html#optional-tags\n  var optionalEndTagBlockElements = toMap('colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr'),\n      optionalEndTagInlineElements = toMap('rp,rt'),\n      optionalEndTagElements = extend({},\n                                              optionalEndTagInlineElements,\n                                              optionalEndTagBlockElements);\n\n  // Safe Block Elements - HTML5\n  var blockElements = extend({}, optionalEndTagBlockElements, toMap('address,article,' +\n          'aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,' +\n          'h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul'));\n\n  // Inline Elements - HTML5\n  var inlineElements = extend({}, optionalEndTagInlineElements, toMap('a,abbr,acronym,b,' +\n          'bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,' +\n          'samp,small,span,strike,strong,sub,sup,time,tt,u,var'));\n\n  // SVG Elements\n  // https://wiki.whatwg.org/wiki/Sanitization_rules#svg_Elements\n  // Note: the elements animate,animateColor,animateMotion,animateTransform,set are intentionally omitted.\n  // They can potentially allow for arbitrary javascript to be executed. See #11290\n  var svgElements = toMap('circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,' +\n          'hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,' +\n          'radialGradient,rect,stop,svg,switch,text,title,tspan');\n\n  // Blocked Elements (will be stripped)\n  var blockedElements = toMap('script,style');\n\n  var validElements = extend({},\n                                     voidElements,\n                                     blockElements,\n                                     inlineElements,\n                                     optionalEndTagElements);\n\n  //Attributes that have href and hence need to be sanitized\n  var uriAttrs = toMap('background,cite,href,longdesc,src,xlink:href');\n\n  var htmlAttrs = toMap('abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,' +\n      'color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,' +\n      'ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,' +\n      'scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,' +\n      'valign,value,vspace,width');\n\n  // SVG attributes (without \"id\" and \"name\" attributes)\n  // https://wiki.whatwg.org/wiki/Sanitization_rules#svg_Attributes\n  var svgAttrs = toMap('accent-height,accumulate,additive,alphabetic,arabic-form,ascent,' +\n      'baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,' +\n      'cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,' +\n      'font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,' +\n      'height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,' +\n      'marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,' +\n      'max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,' +\n      'path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,' +\n      'requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,' +\n      'stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,' +\n      'stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,' +\n      'stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,' +\n      'underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,' +\n      'width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,' +\n      'xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan', true);\n\n  var validAttrs = extend({},\n                                  uriAttrs,\n                                  svgAttrs,\n                                  htmlAttrs);\n\n  function toMap(str, lowercaseKeys) {\n    var obj = {}, items = str.split(','), i;\n    for (i = 0; i < items.length; i++) {\n      obj[lowercaseKeys ? lowercase(items[i]) : items[i]] = true;\n    }\n    return obj;\n  }\n\n  /**\n   * Create an inert document that contains the dirty HTML that needs sanitizing\n   * Depending upon browser support we use one of three strategies for doing this.\n   * Support: Safari 10.x -> XHR strategy\n   * Support: Firefox -> DomParser strategy\n   */\n  var getInertBodyElement /* function(html: string): HTMLBodyElement */ = (function(window, document) {\n    var inertDocument;\n    if (document && document.implementation) {\n      inertDocument = document.implementation.createHTMLDocument('inert');\n    } else {\n      throw $sanitizeMinErr('noinert', 'Can\\'t create an inert html document');\n    }\n    var inertBodyElement = (inertDocument.documentElement || inertDocument.getDocumentElement()).querySelector('body');\n\n    // Check for the Safari 10.1 bug - which allows JS to run inside the SVG G element\n    inertBodyElement.innerHTML = '<svg><g onload=\"this.parentNode.remove()\"></g></svg>';\n    if (!inertBodyElement.querySelector('svg')) {\n      return getInertBodyElement_XHR;\n    } else {\n      // Check for the Firefox bug - which prevents the inner img JS from being sanitized\n      inertBodyElement.innerHTML = '<svg><p><style><img src=\"</style><img src=x onerror=alert(1)//\">';\n      if (inertBodyElement.querySelector('svg img')) {\n        return getInertBodyElement_DOMParser;\n      } else {\n        return getInertBodyElement_InertDocument;\n      }\n    }\n\n    function getInertBodyElement_XHR(html) {\n      // We add this dummy element to ensure that the rest of the content is parsed as expected\n      // e.g. leading whitespace is maintained and tags like `<meta>` do not get hoisted to the `<head>` tag.\n      html = '<remove></remove>' + html;\n      try {\n        html = encodeURI(html);\n      } catch (e) {\n        return undefined;\n      }\n      var xhr = new window.XMLHttpRequest();\n      xhr.responseType = 'document';\n      xhr.open('GET', 'data:text/html;charset=utf-8,' + html, false);\n      xhr.send(null);\n      var body = xhr.response.body;\n      body.firstChild.remove();\n      return body;\n    }\n\n    function getInertBodyElement_DOMParser(html) {\n      // We add this dummy element to ensure that the rest of the content is parsed as expected\n      // e.g. leading whitespace is maintained and tags like `<meta>` do not get hoisted to the `<head>` tag.\n      html = '<remove></remove>' + html;\n      try {\n        var body = new window.DOMParser().parseFromString(html, 'text/html').body;\n        body.firstChild.remove();\n        return body;\n      } catch (e) {\n        return undefined;\n      }\n    }\n\n    function getInertBodyElement_InertDocument(html) {\n      inertBodyElement.innerHTML = html;\n\n      // Support: IE 9-11 only\n      // strip custom-namespaced attributes on IE<=11\n      if (document.documentMode) {\n        stripCustomNsAttrs(inertBodyElement);\n      }\n\n      return inertBodyElement;\n    }\n  })(window, window.document);\n\n  /**\n   * @example\n   * htmlParser(htmlString, {\n   *     start: function(tag, attrs) {},\n   *     end: function(tag) {},\n   *     chars: function(text) {},\n   *     comment: function(text) {}\n   * });\n   *\n   * @param {string} html string\n   * @param {object} handler\n   */\n  function htmlParserImpl(html, handler) {\n    if (html === null || html === undefined) {\n      html = '';\n    } else if (typeof html !== 'string') {\n      html = '' + html;\n    }\n\n    var inertBodyElement = getInertBodyElement(html);\n    if (!inertBodyElement) return '';\n\n    //mXSS protection\n    var mXSSAttempts = 5;\n    do {\n      if (mXSSAttempts === 0) {\n        throw $sanitizeMinErr('uinput', 'Failed to sanitize html because the input is unstable');\n      }\n      mXSSAttempts--;\n\n      // trigger mXSS if it is going to happen by reading and writing the innerHTML\n      html = inertBodyElement.innerHTML;\n      inertBodyElement = getInertBodyElement(html);\n    } while (html !== inertBodyElement.innerHTML);\n\n    var node = inertBodyElement.firstChild;\n    while (node) {\n      switch (node.nodeType) {\n        case 1: // ELEMENT_NODE\n          handler.start(node.nodeName.toLowerCase(), attrToMap(node.attributes));\n          break;\n        case 3: // TEXT NODE\n          handler.chars(node.textContent);\n          break;\n      }\n\n      var nextNode;\n      if (!(nextNode = node.firstChild)) {\n        if (node.nodeType === 1) {\n          handler.end(node.nodeName.toLowerCase());\n        }\n        nextNode = getNonDescendant('nextSibling', node);\n        if (!nextNode) {\n          while (nextNode == null) {\n            node = getNonDescendant('parentNode', node);\n            if (node === inertBodyElement) break;\n            nextNode = getNonDescendant('nextSibling', node);\n            if (node.nodeType === 1) {\n              handler.end(node.nodeName.toLowerCase());\n            }\n          }\n        }\n      }\n      node = nextNode;\n    }\n\n    while ((node = inertBodyElement.firstChild)) {\n      inertBodyElement.removeChild(node);\n    }\n  }\n\n  function attrToMap(attrs) {\n    var map = {};\n    for (var i = 0, ii = attrs.length; i < ii; i++) {\n      var attr = attrs[i];\n      map[attr.name] = attr.value;\n    }\n    return map;\n  }\n\n\n  /**\n   * Escapes all potentially dangerous characters, so that the\n   * resulting string can be safely inserted into attribute or\n   * element text.\n   * @param value\n   * @returns {string} escaped text\n   */\n  function encodeEntities(value) {\n    return value.\n      replace(/&/g, '&amp;').\n      replace(SURROGATE_PAIR_REGEXP, function(value) {\n        var hi = value.charCodeAt(0);\n        var low = value.charCodeAt(1);\n        return '&#' + (((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000) + ';';\n      }).\n      replace(NON_ALPHANUMERIC_REGEXP, function(value) {\n        return '&#' + value.charCodeAt(0) + ';';\n      }).\n      replace(/</g, '&lt;').\n      replace(/>/g, '&gt;');\n  }\n\n  /**\n   * create an HTML/XML writer which writes to buffer\n   * @param {Array} buf use buf.join('') to get out sanitized html string\n   * @returns {object} in the form of {\n   *     start: function(tag, attrs) {},\n   *     end: function(tag) {},\n   *     chars: function(text) {},\n   *     comment: function(text) {}\n   * }\n   */\n  function htmlSanitizeWriterImpl(buf, uriValidator) {\n    var ignoreCurrentElement = false;\n    var out = bind(buf, buf.push);\n    return {\n      start: function(tag, attrs) {\n        tag = lowercase(tag);\n        if (!ignoreCurrentElement && blockedElements[tag]) {\n          ignoreCurrentElement = tag;\n        }\n        if (!ignoreCurrentElement && validElements[tag] === true) {\n          out('<');\n          out(tag);\n          forEach(attrs, function(value, key) {\n            var lkey = lowercase(key);\n            var isImage = (tag === 'img' && lkey === 'src') || (lkey === 'background');\n            if (validAttrs[lkey] === true &&\n              (uriAttrs[lkey] !== true || uriValidator(value, isImage))) {\n              out(' ');\n              out(key);\n              out('=\"');\n              out(encodeEntities(value));\n              out('\"');\n            }\n          });\n          out('>');\n        }\n      },\n      end: function(tag) {\n        tag = lowercase(tag);\n        if (!ignoreCurrentElement && validElements[tag] === true && voidElements[tag] !== true) {\n          out('</');\n          out(tag);\n          out('>');\n        }\n        // eslint-disable-next-line eqeqeq\n        if (tag == ignoreCurrentElement) {\n          ignoreCurrentElement = false;\n        }\n      },\n      chars: function(chars) {\n        if (!ignoreCurrentElement) {\n          out(encodeEntities(chars));\n        }\n      }\n    };\n  }\n\n\n  /**\n   * When IE9-11 comes across an unknown namespaced attribute e.g. 'xlink:foo' it adds 'xmlns:ns1' attribute to declare\n   * ns1 namespace and prefixes the attribute with 'ns1' (e.g. 'ns1:xlink:foo'). This is undesirable since we don't want\n   * to allow any of these custom attributes. This method strips them all.\n   *\n   * @param node Root element to process\n   */\n  function stripCustomNsAttrs(node) {\n    while (node) {\n      if (node.nodeType === window.Node.ELEMENT_NODE) {\n        var attrs = node.attributes;\n        for (var i = 0, l = attrs.length; i < l; i++) {\n          var attrNode = attrs[i];\n          var attrName = attrNode.name.toLowerCase();\n          if (attrName === 'xmlns:ns1' || attrName.lastIndexOf('ns1:', 0) === 0) {\n            node.removeAttributeNode(attrNode);\n            i--;\n            l--;\n          }\n        }\n      }\n\n      var nextNode = node.firstChild;\n      if (nextNode) {\n        stripCustomNsAttrs(nextNode);\n      }\n\n      node = getNonDescendant('nextSibling', node);\n    }\n  }\n\n  function getNonDescendant(propName, node) {\n    // An element is clobbered if its `propName` property points to one of its descendants\n    var nextNode = node[propName];\n    if (nextNode && nodeContains.call(node, nextNode)) {\n      throw $sanitizeMinErr('elclob', 'Failed to sanitize html because the element is clobbered: {0}', node.outerHTML || node.outerText);\n    }\n    return nextNode;\n  }\n}\n\nfunction sanitizeText(chars) {\n  var buf = [];\n  var writer = htmlSanitizeWriter(buf, noop);\n  writer.chars(chars);\n  return buf.join('');\n}\n\n\n// define ngSanitize module and register $sanitize service\nangular.module('ngSanitize', [])\n  .provider('$sanitize', $SanitizeProvider)\n  .info({ angularVersion: '1.6.5' });\n\n/**\n * @ngdoc filter\n * @name linky\n * @kind function\n *\n * @description\n * Finds links in text input and turns them into html links. Supports `http/https/ftp/mailto` and\n * plain email address links.\n *\n * Requires the {@link ngSanitize `ngSanitize`} module to be installed.\n *\n * @param {string} text Input text.\n * @param {string} target Window (`_blank|_self|_parent|_top`) or named frame to open links in.\n * @param {object|function(url)} [attributes] Add custom attributes to the link element.\n *\n *    Can be one of:\n *\n *    - `object`: A map of attributes\n *    - `function`: Takes the url as a parameter and returns a map of attributes\n *\n *    If the map of attributes contains a value for `target`, it overrides the value of\n *    the target parameter.\n *\n *\n * @returns {string} Html-linkified and {@link $sanitize sanitized} text.\n *\n * @usage\n   <span ng-bind-html=\"linky_expression | linky\"></span>\n *\n * @example\n   <example module=\"linkyExample\" deps=\"angular-sanitize.js\" name=\"linky-filter\">\n     <file name=\"index.html\">\n       <div ng-controller=\"ExampleController\">\n       Snippet: <textarea ng-model=\"snippet\" cols=\"60\" rows=\"3\"></textarea>\n       <table>\n         <tr>\n           <th>Filter</th>\n           <th>Source</th>\n           <th>Rendered</th>\n         </tr>\n         <tr id=\"linky-filter\">\n           <td>linky filter</td>\n           <td>\n             <pre>&lt;div ng-bind-html=\"snippet | linky\"&gt;<br>&lt;/div&gt;</pre>\n           </td>\n           <td>\n             <div ng-bind-html=\"snippet | linky\"></div>\n           </td>\n         </tr>\n         <tr id=\"linky-target\">\n          <td>linky target</td>\n          <td>\n            <pre>&lt;div ng-bind-html=\"snippetWithSingleURL | linky:'_blank'\"&gt;<br>&lt;/div&gt;</pre>\n          </td>\n          <td>\n            <div ng-bind-html=\"snippetWithSingleURL | linky:'_blank'\"></div>\n          </td>\n         </tr>\n         <tr id=\"linky-custom-attributes\">\n          <td>linky custom attributes</td>\n          <td>\n            <pre>&lt;div ng-bind-html=\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\"&gt;<br>&lt;/div&gt;</pre>\n          </td>\n          <td>\n            <div ng-bind-html=\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\"></div>\n          </td>\n         </tr>\n         <tr id=\"escaped-html\">\n           <td>no filter</td>\n           <td><pre>&lt;div ng-bind=\"snippet\"&gt;<br>&lt;/div&gt;</pre></td>\n           <td><div ng-bind=\"snippet\"></div></td>\n         </tr>\n       </table>\n     </file>\n     <file name=\"script.js\">\n       angular.module('linkyExample', ['ngSanitize'])\n         .controller('ExampleController', ['$scope', function($scope) {\n           $scope.snippet =\n             'Pretty text with some links:\\n' +\n             'http://angularjs.org/,\\n' +\n             'mailto:us@somewhere.org,\\n' +\n             'another@somewhere.org,\\n' +\n             'and one more: ftp://127.0.0.1/.';\n           $scope.snippetWithSingleURL = 'http://angularjs.org/';\n         }]);\n     </file>\n     <file name=\"protractor.js\" type=\"protractor\">\n       it('should linkify the snippet with urls', function() {\n         expect(element(by.id('linky-filter')).element(by.binding('snippet | linky')).getText()).\n             toBe('Pretty text with some links: http://angularjs.org/, us@somewhere.org, ' +\n                  'another@somewhere.org, and one more: ftp://127.0.0.1/.');\n         expect(element.all(by.css('#linky-filter a')).count()).toEqual(4);\n       });\n\n       it('should not linkify snippet without the linky filter', function() {\n         expect(element(by.id('escaped-html')).element(by.binding('snippet')).getText()).\n             toBe('Pretty text with some links: http://angularjs.org/, mailto:us@somewhere.org, ' +\n                  'another@somewhere.org, and one more: ftp://127.0.0.1/.');\n         expect(element.all(by.css('#escaped-html a')).count()).toEqual(0);\n       });\n\n       it('should update', function() {\n         element(by.model('snippet')).clear();\n         element(by.model('snippet')).sendKeys('new http://link.');\n         expect(element(by.id('linky-filter')).element(by.binding('snippet | linky')).getText()).\n             toBe('new http://link.');\n         expect(element.all(by.css('#linky-filter a')).count()).toEqual(1);\n         expect(element(by.id('escaped-html')).element(by.binding('snippet')).getText())\n             .toBe('new http://link.');\n       });\n\n       it('should work with the target property', function() {\n        expect(element(by.id('linky-target')).\n            element(by.binding(\"snippetWithSingleURL | linky:'_blank'\")).getText()).\n            toBe('http://angularjs.org/');\n        expect(element(by.css('#linky-target a')).getAttribute('target')).toEqual('_blank');\n       });\n\n       it('should optionally add custom attributes', function() {\n        expect(element(by.id('linky-custom-attributes')).\n            element(by.binding(\"snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}\")).getText()).\n            toBe('http://angularjs.org/');\n        expect(element(by.css('#linky-custom-attributes a')).getAttribute('rel')).toEqual('nofollow');\n       });\n     </file>\n   </example>\n */\nangular.module('ngSanitize').filter('linky', ['$sanitize', function($sanitize) {\n  var LINKY_URL_REGEXP =\n        /((ftp|https?):\\/\\/|(www\\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\\S*[^\\s.;,(){}<>\"\\u201d\\u2019]/i,\n      MAILTO_REGEXP = /^mailto:/i;\n\n  var linkyMinErr = angular.$$minErr('linky');\n  var isDefined = angular.isDefined;\n  var isFunction = angular.isFunction;\n  var isObject = angular.isObject;\n  var isString = angular.isString;\n\n  return function(text, target, attributes) {\n    if (text == null || text === '') return text;\n    if (!isString(text)) throw linkyMinErr('notstring', 'Expected string but received: {0}', text);\n\n    var attributesFn =\n      isFunction(attributes) ? attributes :\n      isObject(attributes) ? function getAttributesObject() {return attributes;} :\n      function getEmptyAttributesObject() {return {};};\n\n    var match;\n    var raw = text;\n    var html = [];\n    var url;\n    var i;\n    while ((match = raw.match(LINKY_URL_REGEXP))) {\n      // We can not end in these as they are sometimes found at the end of the sentence\n      url = match[0];\n      // if we did not match ftp/http/www/mailto then assume mailto\n      if (!match[2] && !match[4]) {\n        url = (match[3] ? 'http://' : 'mailto:') + url;\n      }\n      i = match.index;\n      addText(raw.substr(0, i));\n      addLink(url, match[0].replace(MAILTO_REGEXP, ''));\n      raw = raw.substring(i + match[0].length);\n    }\n    addText(raw);\n    return $sanitize(html.join(''));\n\n    function addText(text) {\n      if (!text) {\n        return;\n      }\n      html.push(sanitizeText(text));\n    }\n\n    function addLink(url, text) {\n      var key, linkAttributes = attributesFn(url);\n      html.push('<a ');\n\n      for (key in linkAttributes) {\n        html.push(key + '=\"' + linkAttributes[key] + '\" ');\n      }\n\n      if (isDefined(target) && !('target' in linkAttributes)) {\n        html.push('target=\"',\n                  target,\n                  '\" ');\n      }\n      html.push('href=\"',\n                url.replace(/\"/g, '&quot;'),\n                '\">');\n      addText(text);\n      html.push('</a>');\n    }\n  };\n}]);\n\n\n})(window, window.angular);\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = window.angular;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/angular-sanitize/angular-sanitize.js\n// module id = 656\n// module chunks = 0","require('./angular-sanitize');\nmodule.exports = 'ngSanitize';\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = window.angular;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/angular-sanitize/index.js\n// module id = 657\n// module chunks = 0","//{CODE:CGA02}\r\n// di.core.global.angular\r\ndefine([\r\n    './snippetRegistrar',\r\n    './util'\r\n], function () { });\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/angular/_main.js","//{CODE:CGA01}\r\n// di.core.global.angular\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    /** angular helper */\r\n    window.$di.angular.snippetRegistrar = {\r\n        registerSnippet: registerSnippet,\r\n        createContext: createContext\r\n    };\r\n\r\n    return window.$di.angular.snippetRegistrar;\r\n\r\n    function registerSnippet(module, directiveName, templateUrl, controller, controllerAs) {\r\n        module.directive(directiveName, directive);\r\n\r\n        function directive() {\r\n            return {\r\n                restrict: 'E',\r\n                replace: true,\r\n                templateUrl: templateUrl,\r\n                controller: controller,\r\n                controllerAs: controllerAs\r\n            };\r\n        }\r\n    }\r\n\r\n    function createContext(module, templateBaseUrl) {\r\n        return {\r\n            registerSnippet: registerSnippetInContext\r\n        };\r\n\r\n        function registerSnippetInContext(directiveName, templateName, controller, controllerAs) {\r\n            var templateUrl = templateBaseUrl + '/' + templateName;\r\n\r\n            registerSnippet(module, directiveName, templateUrl, controller, controllerAs);\r\n        }\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/angular/snippetRegistrar.js","//{CODE:CGA04}\r\n// di.core.global.angular\r\ndefine([\r\n    '../utility/util'\r\n], function (util) {\r\n    'use strict';\r\n\r\n    window.$di.angular.util = {\r\n        $watch: $watch,\r\n        $watchCollection: $watchCollection\r\n    };\r\n\r\n    return window.$di.angular.util;\r\n\r\n    /**\r\n     * Watch function that only invokes the callback if the new value is a\r\n     * non-empty object and is not equal to the optional ignore object\r\n     */\r\n    function $watch(scope, objFunction, callback, ignoreObj) {\r\n        return scope.$watch(objFunction, function (newValue) {\r\n            if (util.isRealObject(newValue) && (newValue !== (ignoreObj || {}))) {\r\n                callback(newValue);\r\n            }\r\n        });\r\n    }\r\n\r\n    function $watchCollection(scope, object, listener) {\r\n        return scope.$watchCollection(object, function (newValue) {\r\n            if (util.isArray(newValue) && newValue.length > 0) {\r\n                listener(newValue);\r\n            }\r\n        });\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/di.core/global/angular/util.js","var isDefined = angular.isDefined,\n  isUndefined = angular.isUndefined,\n  isNumber = angular.isNumber,\n  isObject = angular.isObject,\n  isArray = angular.isArray,\n  extend = angular.extend,\n  toJson = angular.toJson;\n\nangular\n  .module('LocalStorageModule', [])\n  .provider('localStorageService', function() {\n    // You should set a prefix to avoid overwriting any local storage variables from the rest of your app\n    // e.g. localStorageServiceProvider.setPrefix('yourAppName');\n    // With provider you can use config as this:\n    // myApp.config(function (localStorageServiceProvider) {\n    //    localStorageServiceProvider.prefix = 'yourAppName';\n    // });\n    this.prefix = 'ls';\n\n    // You could change web storage type localstorage or sessionStorage\n    this.storageType = 'localStorage';\n\n    // Cookie options (usually in case of fallback)\n    // expiry = Number of days before cookies expire // 0 = Does not expire\n    // path = The web path the cookie represents\n    this.cookie = {\n      expiry: 30,\n      path: '/'\n    };\n\n    // Send signals for each of the following actions?\n    this.notify = {\n      setItem: true,\n      removeItem: false\n    };\n\n    // Setter for the prefix\n    this.setPrefix = function(prefix) {\n      this.prefix = prefix;\n      return this;\n    };\n\n    // Setter for the storageType\n    this.setStorageType = function(storageType) {\n      this.storageType = storageType;\n      return this;\n    };\n\n    // Setter for cookie config\n    this.setStorageCookie = function(exp, path) {\n      this.cookie.expiry = exp;\n      this.cookie.path = path;\n      return this;\n    };\n\n    // Setter for cookie domain\n    this.setStorageCookieDomain = function(domain) {\n      this.cookie.domain = domain;\n      return this;\n    };\n\n    // Setter for notification config\n    // itemSet & itemRemove should be booleans\n    this.setNotify = function(itemSet, itemRemove) {\n      this.notify = {\n        setItem: itemSet,\n        removeItem: itemRemove\n      };\n      return this;\n    };\n\n    this.$get = ['$rootScope', '$window', '$document', '$parse', function($rootScope, $window, $document, $parse) {\n      var self = this;\n      var prefix = self.prefix;\n      var cookie = self.cookie;\n      var notify = self.notify;\n      var storageType = self.storageType;\n      var webStorage;\n\n      // When Angular's $document is not available\n      if (!$document) {\n        $document = document;\n      } else if ($document[0]) {\n        $document = $document[0];\n      }\n\n      // If there is a prefix set in the config lets use that with an appended period for readability\n      if (prefix.substr(-1) !== '.') {\n        prefix = !!prefix ? prefix + '.' : '';\n      }\n      var deriveQualifiedKey = function(key) {\n        return prefix + key;\n      };\n      // Checks the browser to see if local storage is supported\n      var browserSupportsLocalStorage = (function () {\n        try {\n          var supported = (storageType in $window && $window[storageType] !== null);\n\n          // When Safari (OS X or iOS) is in private browsing mode, it appears as though localStorage\n          // is available, but trying to call .setItem throws an exception.\n          //\n          // \"QUOTA_EXCEEDED_ERR: DOM Exception 22: An attempt was made to add something to storage\n          // that exceeded the quota.\"\n          var key = deriveQualifiedKey('__' + Math.round(Math.random() * 1e7));\n          if (supported) {\n            webStorage = $window[storageType];\n            webStorage.setItem(key, '');\n            webStorage.removeItem(key);\n          }\n\n          return supported;\n        } catch (e) {\n          storageType = 'cookie';\n          $rootScope.$broadcast('LocalStorageModule.notification.error', e.message);\n          return false;\n        }\n      }());\n\n      // Directly adds a value to local storage\n      // If local storage is not available in the browser use cookies\n      // Example use: localStorageService.add('library','angular');\n      var addToLocalStorage = function (key, value) {\n        // Let's convert undefined values to null to get the value consistent\n        if (isUndefined(value)) {\n          value = null;\n        } else {\n          value = toJson(value);\n        }\n\n        // If this browser does not support local storage use cookies\n        if (!browserSupportsLocalStorage || self.storageType === 'cookie') {\n          if (!browserSupportsLocalStorage) {\n            $rootScope.$broadcast('LocalStorageModule.notification.warning', 'LOCAL_STORAGE_NOT_SUPPORTED');\n          }\n\n          if (notify.setItem) {\n            $rootScope.$broadcast('LocalStorageModule.notification.setitem', {key: key, newvalue: value, storageType: 'cookie'});\n          }\n          return addToCookies(key, value);\n        }\n\n        try {\n          if (webStorage) {\n            webStorage.setItem(deriveQualifiedKey(key), value);\n          }\n          if (notify.setItem) {\n            $rootScope.$broadcast('LocalStorageModule.notification.setitem', {key: key, newvalue: value, storageType: self.storageType});\n          }\n        } catch (e) {\n          $rootScope.$broadcast('LocalStorageModule.notification.error', e.message);\n          return addToCookies(key, value);\n        }\n        return true;\n      };\n\n      // Directly get a value from local storage\n      // Example use: localStorageService.get('library'); // returns 'angular'\n      var getFromLocalStorage = function (key) {\n\n        if (!browserSupportsLocalStorage || self.storageType === 'cookie') {\n          if (!browserSupportsLocalStorage) {\n            $rootScope.$broadcast('LocalStorageModule.notification.warning', 'LOCAL_STORAGE_NOT_SUPPORTED');\n          }\n\n          return getFromCookies(key);\n        }\n\n        var item = webStorage ? webStorage.getItem(deriveQualifiedKey(key)) : null;\n        // angular.toJson will convert null to 'null', so a proper conversion is needed\n        // FIXME not a perfect solution, since a valid 'null' string can't be stored\n        if (!item || item === 'null') {\n          return null;\n        }\n\n        try {\n          return JSON.parse(item);\n        } catch (e) {\n          return item;\n        }\n      };\n\n      // Remove an item from local storage\n      // Example use: localStorageService.remove('library'); // removes the key/value pair of library='angular'\n      var removeFromLocalStorage = function () {\n        var i, key;\n        for (i=0; i<arguments.length; i++) {\n          key = arguments[i];\n          if (!browserSupportsLocalStorage || self.storageType === 'cookie') {\n            if (!browserSupportsLocalStorage) {\n              $rootScope.$broadcast('LocalStorageModule.notification.warning', 'LOCAL_STORAGE_NOT_SUPPORTED');\n            }\n\n            if (notify.removeItem) {\n              $rootScope.$broadcast('LocalStorageModule.notification.removeitem', {key: key, storageType: 'cookie'});\n            }\n            removeFromCookies(key);\n          }\n          else {\n            try {\n              webStorage.removeItem(deriveQualifiedKey(key));\n              if (notify.removeItem) {\n                $rootScope.$broadcast('LocalStorageModule.notification.removeitem', {\n                  key: key,\n                  storageType: self.storageType\n                });\n              }\n            } catch (e) {\n              $rootScope.$broadcast('LocalStorageModule.notification.error', e.message);\n              removeFromCookies(key);\n            }\n          }\n        }\n      };\n\n      // Return array of keys for local storage\n      // Example use: var keys = localStorageService.keys()\n      var getKeysForLocalStorage = function () {\n\n        if (!browserSupportsLocalStorage) {\n          $rootScope.$broadcast('LocalStorageModule.notification.warning', 'LOCAL_STORAGE_NOT_SUPPORTED');\n          return [];\n        }\n\n        var prefixLength = prefix.length;\n        var keys = [];\n        for (var key in webStorage) {\n          // Only return keys that are for this app\n          if (key.substr(0, prefixLength) === prefix) {\n            try {\n              keys.push(key.substr(prefixLength));\n            } catch (e) {\n              $rootScope.$broadcast('LocalStorageModule.notification.error', e.Description);\n              return [];\n            }\n          }\n        }\n        return keys;\n      };\n\n      // Remove all data for this app from local storage\n      // Also optionally takes a regular expression string and removes the matching key-value pairs\n      // Example use: localStorageService.clearAll();\n      // Should be used mostly for development purposes\n      var clearAllFromLocalStorage = function (regularExpression) {\n\n        // Setting both regular expressions independently\n        // Empty strings result in catchall RegExp\n        var prefixRegex = !!prefix ? new RegExp('^' + prefix) : new RegExp();\n        var testRegex = !!regularExpression ? new RegExp(regularExpression) : new RegExp();\n\n        if (!browserSupportsLocalStorage || self.storageType === 'cookie') {\n          if (!browserSupportsLocalStorage) {\n            $rootScope.$broadcast('LocalStorageModule.notification.warning', 'LOCAL_STORAGE_NOT_SUPPORTED');\n          }\n          return clearAllFromCookies();\n        }\n\n        var prefixLength = prefix.length;\n\n        for (var key in webStorage) {\n          // Only remove items that are for this app and match the regular expression\n          if (prefixRegex.test(key) && testRegex.test(key.substr(prefixLength))) {\n            try {\n              removeFromLocalStorage(key.substr(prefixLength));\n            } catch (e) {\n              $rootScope.$broadcast('LocalStorageModule.notification.error', e.message);\n              return clearAllFromCookies();\n            }\n          }\n        }\n        return true;\n      };\n\n      // Checks the browser to see if cookies are supported\n      var browserSupportsCookies = (function() {\n        try {\n          return $window.navigator.cookieEnabled ||\n          (\"cookie\" in $document && ($document.cookie.length > 0 ||\n            ($document.cookie = \"test\").indexOf.call($document.cookie, \"test\") > -1));\n          } catch (e) {\n            $rootScope.$broadcast('LocalStorageModule.notification.error', e.message);\n            return false;\n          }\n        }());\n\n        // Directly adds a value to cookies\n        // Typically used as a fallback is local storage is not available in the browser\n        // Example use: localStorageService.cookie.add('library','angular');\n        var addToCookies = function (key, value, daysToExpiry) {\n\n          if (isUndefined(value)) {\n            return false;\n          } else if(isArray(value) || isObject(value)) {\n            value = toJson(value);\n          }\n\n          if (!browserSupportsCookies) {\n            $rootScope.$broadcast('LocalStorageModule.notification.error', 'COOKIES_NOT_SUPPORTED');\n            return false;\n          }\n\n          try {\n            var expiry = '',\n            expiryDate = new Date(),\n            cookieDomain = '';\n\n            if (value === null) {\n              // Mark that the cookie has expired one day ago\n              expiryDate.setTime(expiryDate.getTime() + (-1 * 24 * 60 * 60 * 1000));\n              expiry = \"; expires=\" + expiryDate.toGMTString();\n              value = '';\n            } else if (isNumber(daysToExpiry) && daysToExpiry !== 0) {\n              expiryDate.setTime(expiryDate.getTime() + (daysToExpiry * 24 * 60 * 60 * 1000));\n              expiry = \"; expires=\" + expiryDate.toGMTString();\n            } else if (cookie.expiry !== 0) {\n              expiryDate.setTime(expiryDate.getTime() + (cookie.expiry * 24 * 60 * 60 * 1000));\n              expiry = \"; expires=\" + expiryDate.toGMTString();\n            }\n            if (!!key) {\n              var cookiePath = \"; path=\" + cookie.path;\n              if(cookie.domain){\n                cookieDomain = \"; domain=\" + cookie.domain;\n              }\n              $document.cookie = deriveQualifiedKey(key) + \"=\" + encodeURIComponent(value) + expiry + cookiePath + cookieDomain;\n            }\n          } catch (e) {\n            $rootScope.$broadcast('LocalStorageModule.notification.error', e.message);\n            return false;\n          }\n          return true;\n        };\n\n        // Directly get a value from a cookie\n        // Example use: localStorageService.cookie.get('library'); // returns 'angular'\n        var getFromCookies = function (key) {\n          if (!browserSupportsCookies) {\n            $rootScope.$broadcast('LocalStorageModule.notification.error', 'COOKIES_NOT_SUPPORTED');\n            return false;\n          }\n\n          var cookies = $document.cookie && $document.cookie.split(';') || [];\n          for(var i=0; i < cookies.length; i++) {\n            var thisCookie = cookies[i];\n            while (thisCookie.charAt(0) === ' ') {\n              thisCookie = thisCookie.substring(1,thisCookie.length);\n            }\n            if (thisCookie.indexOf(deriveQualifiedKey(key) + '=') === 0) {\n              var storedValues = decodeURIComponent(thisCookie.substring(prefix.length + key.length + 1, thisCookie.length));\n              try {\n                return JSON.parse(storedValues);\n              } catch(e) {\n                return storedValues;\n              }\n            }\n          }\n          return null;\n        };\n\n        var removeFromCookies = function (key) {\n          addToCookies(key,null);\n        };\n\n        var clearAllFromCookies = function () {\n          var thisCookie = null, thisKey = null;\n          var prefixLength = prefix.length;\n          var cookies = $document.cookie.split(';');\n          for(var i = 0; i < cookies.length; i++) {\n            thisCookie = cookies[i];\n\n            while (thisCookie.charAt(0) === ' ') {\n              thisCookie = thisCookie.substring(1, thisCookie.length);\n            }\n\n            var key = thisCookie.substring(prefixLength, thisCookie.indexOf('='));\n            removeFromCookies(key);\n          }\n        };\n\n        var getStorageType = function() {\n          return storageType;\n        };\n\n        // Add a listener on scope variable to save its changes to local storage\n        // Return a function which when called cancels binding\n        var bindToScope = function(scope, key, def, lsKey) {\n          lsKey = lsKey || key;\n          var value = getFromLocalStorage(lsKey);\n\n          if (value === null && isDefined(def)) {\n            value = def;\n          } else if (isObject(value) && isObject(def)) {\n            value = extend(value, def);\n          }\n\n          $parse(key).assign(scope, value);\n\n          return scope.$watch(key, function(newVal) {\n            addToLocalStorage(lsKey, newVal);\n          }, isObject(scope[key]));\n        };\n\n        // Return localStorageService.length\n        // ignore keys that not owned\n        var lengthOfLocalStorage = function() {\n          var count = 0;\n          var storage = $window[storageType];\n          for(var i = 0; i < storage.length; i++) {\n            if(storage.key(i).indexOf(prefix) === 0 ) {\n              count++;\n            }\n          }\n          return count;\n        };\n\n        return {\n          isSupported: browserSupportsLocalStorage,\n          getStorageType: getStorageType,\n          set: addToLocalStorage,\n          add: addToLocalStorage, //DEPRECATED\n          get: getFromLocalStorage,\n          keys: getKeysForLocalStorage,\n          remove: removeFromLocalStorage,\n          clearAll: clearAllFromLocalStorage,\n          bind: bindToScope,\n          deriveKey: deriveQualifiedKey,\n          length: lengthOfLocalStorage,\n          cookie: {\n            isSupported: browserSupportsCookies,\n            set: addToCookies,\n            add: addToCookies, //DEPRECATED\n            get: getFromCookies,\n            remove: removeFromCookies,\n            clearAll: clearAllFromCookies\n          }\n        };\n      }];\n  });\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = angularLocalStorage;\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = window.angular;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/angular-local-storage/src/angular-local-storage.js\n// module id = 661\n// module chunks = 0","\"use strict\";\nvar change_detection_util_1 = require(\"./change_detection/change_detection_util\");\nexports.SimpleChange = change_detection_util_1.SimpleChange;\nvar constants_1 = require(\"./change_detection/constants\");\nexports.ChangeDetectionStrategy = constants_1.ChangeDetectionStrategy;\nvar change_detector_ref_1 = require(\"./change_detection/change_detector_ref\");\nexports.ChangeDetectorRef = change_detector_ref_1.ChangeDetectorRef;\n//# sourceMappingURL=change_detection.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/change_detection.js\n// module id = 662\n// module chunks = 0","\"use strict\";\n// @TODO this needs to be in a singleton\nvar lang_1 = require(\"../../facade/lang\");\nvar TTL = 10;\nvar onChangesTtl = TTL;\nvar ChangesQueue = (function () {\n    function ChangesQueue() {\n    }\n    ChangesQueue.prototype.buildFlushOnChanges = function ($rootScope) {\n        var _context = this;\n        buildFlushOnChangesCb($rootScope);\n        function buildFlushOnChangesCb($rootScope) {\n            if (lang_1.isFunction(_context.flushOnChangesQueue)) {\n                return _context.flushOnChangesQueue;\n            }\n            _context.flushOnChangesQueue = getFlushOnChangesQueueCb($rootScope);\n            return _context.flushOnChangesQueue;\n        }\n        function getFlushOnChangesQueueCb($rootScope) {\n            // This function is called in a $$postDigest to trigger all the onChanges hooks in a single digest\n            return function _flushOnChangesQueue() {\n                try {\n                    if (!(--onChangesTtl)) {\n                        // We have hit the TTL limit so reset everything\n                        _context.onChangesQueue = undefined;\n                        throw new Error(\"infchng, \" + TTL + \" ngOnChanges() iterations reached. Aborting!\\n\");\n                    }\n                    // We must run this hook in an apply since the $$postDigest runs outside apply\n                    $rootScope.$apply(function () {\n                        for (var i = 0, ii = _context.onChangesQueue.length; i < ii; ++i) {\n                            _context.onChangesQueue[i]();\n                        }\n                        // Reset the queue to trigger a new schedule next time there is a change\n                        _context.onChangesQueue = undefined;\n                    });\n                }\n                finally {\n                    onChangesTtl++;\n                }\n            };\n        }\n    };\n    return ChangesQueue;\n}());\nexports.ChangesQueue = ChangesQueue;\nexports.changesQueueService = new ChangesQueue();\n//# sourceMappingURL=changes_queue.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/change_detection/changes_queue.js\n// module id = 663\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\n/**\n * Describes the current state of the change detector.\n */\nvar ChangeDetectorState;\n(function (ChangeDetectorState) {\n    /**\n     * `NeverChecked` means that the change detector has not been checked yet, and\n     * initialization methods should be called during detection.\n     */\n    ChangeDetectorState[ChangeDetectorState[\"NeverChecked\"] = 0] = \"NeverChecked\";\n    /**\n     * `CheckedBefore` means that the change detector has successfully completed at least\n     * one detection previously.\n     */\n    ChangeDetectorState[ChangeDetectorState[\"CheckedBefore\"] = 1] = \"CheckedBefore\";\n    /**\n     * `Errored` means that the change detector encountered an error checking a binding\n     * or calling a directive lifecycle method and is now in an inconsistent state. Change\n     * detectors in this state will no longer detect changes.\n     */\n    ChangeDetectorState[ChangeDetectorState[\"Errored\"] = 2] = \"Errored\";\n})(ChangeDetectorState = exports.ChangeDetectorState || (exports.ChangeDetectorState = {}));\n/**\n * Describes within the change detector which strategy will be used the next time change\n * detection is triggered.\n */\nvar ChangeDetectionStrategy;\n(function (ChangeDetectionStrategy) {\n    /**\n     * `CheckedOnce` means that after calling detectChanges the mode of the change detector\n     * will become `Checked`.\n     */\n    // CheckOnce,\n    /**\n     * `Checked` means that the change detector should be skipped until its mode changes to\n     * `CheckOnce`.\n     */\n    // Checked,\n    /**\n     * `CheckAlways` means that after calling detectChanges the mode of the change detector\n     * will remain `CheckAlways`.\n     */\n    // CheckAlways,\n    /**\n     * `Detached` means that the change detector sub tree is not a part of the main tree and\n     * should be skipped.\n     */\n    // Detached,\n    /**\n     * `OnPush` means that the change detector's mode will be set to `CheckOnce` during hydration.\n     */\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"OnPush\"] = 0] = \"OnPush\";\n    /**\n     * `Default` means that the change detector's mode will be set to `CheckAlways` during hydration.\n     */\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"Default\"] = 1] = \"Default\";\n})(ChangeDetectionStrategy = exports.ChangeDetectionStrategy || (exports.ChangeDetectionStrategy = {}));\n/**\n * List of possible {@link ChangeDetectionStrategy} values.\n */\nexports.CHANGE_DETECTION_STRATEGY_VALUES = [\n    // ChangeDetectionStrategy.CheckOnce,\n    // ChangeDetectionStrategy.Checked,\n    // ChangeDetectionStrategy.CheckAlways,\n    // ChangeDetectionStrategy.Detached,\n    0 /* OnPush */,\n    1 /* Default */\n];\n/**\n * List of possible {@link ChangeDetectorState} values.\n */\nexports.CHANGE_DETECTOR_STATE_VALUES = [\n    0 /* NeverChecked */,\n    1 /* CheckedBefore */,\n    2 /* Errored */\n];\nfunction isDefaultChangeDetectionStrategy(changeDetectionStrategy) {\n    return lang_1.isBlank(changeDetectionStrategy) || changeDetectionStrategy === 1 /* Default */;\n}\nexports.isDefaultChangeDetectionStrategy = isDefaultChangeDetectionStrategy;\n//# sourceMappingURL=constants.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/change_detection/constants.js\n// module id = 664\n// module chunks = 0","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\n__export(require(\"./di/decorators\"));\n__export(require(\"./di/metadata\"));\nvar opaque_token_1 = require(\"./di/opaque_token\");\nexports.OpaqueToken = opaque_token_1.OpaqueToken;\nvar forward_ref_1 = require(\"./di/forward_ref\");\nexports.forwardRef = forward_ref_1.forwardRef;\nvar provider_1 = require(\"./di/provider\");\nexports.provide = provider_1.provide;\nexports.getInjectableName = provider_1.getInjectableName;\n//# sourceMappingURL=di.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/di.js\n// module id = 665\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\nvar collections_1 = require(\"../../facade/collections\");\nvar lang_2 = require(\"../../facade/lang\");\nvar lang_3 = require(\"../../facade/lang\");\n/**\n * @TODO\n * this module is not used, we can leverage the Key creation for\n * caching @Inject token to string names for performance\n */\n/**\n * A unique object used for retrieving items from the {@link Injector}.\n *\n * Keys have:\n * - a system-wide unique `id`.\n * - a `token`.\n *\n * `Key` is used internally by {@link Injector} because its system-wide unique `id` allows the\n * injector to store created objects in a more efficient way.\n *\n * `Key` should not be created directly. {@link Injector} creates keys automatically when resolving\n * providers.\n */\n//export class Key {\n//  /**\n//   * Private\n//   */\n//  constructor( public token: Object, public id: number ) {\n//    if ( isBlank( token ) ) {\n//      throw new Error( 'Token must be defined!' );\n//    }\n//  }\n//\n//  /**\n//   * Returns a stringified token.\n//   */\n//  get displayName(): string { return stringify( this.token ); }\n//\n//  /**\n//   * Retrieves a `Key` for a token.\n//   */\n//  static get( token: Object ): Key { return _globalKeyRegistry.get( resolveForwardRef( token ) ); }\n//\n//  /**\n//   * @returns the number of keys registered in the system.\n//   */\n//  static get numberOfKeys(): number { return _globalKeyRegistry.numberOfKeys; }\n//}\n/**\n * @internal\n */\nvar KeyRegistry = (function () {\n    function KeyRegistry() {\n        this._allKeys = collections_1.ListWrapper.create();\n        this._idCounter = 0;\n    }\n    //get( token: string | OpaqueToken | Type ): string {\n    //  // Return it if it is already a string like `'$http'` or `'$state'`\n    //  if(isString(token)) {\n    //    return token;\n    //  }\n    //  if(token instanceof OpaqueToken){\n    //    return token.desc;\n    //  }\n    //\n    //  const tokenString = stringify( token );\n    //  const hasToken = StringMapWrapper.contains( this._allKeys, tokenString );\n    //\n    //  if ( hasToken ) {\n    //    return tokenString;\n    //  }\n    //\n    //  const newKey = `${ tokenString }${ this._uniqueId() }`;\n    //  StringMapWrapper.set( this._allKeys, newKey, token );\n    //  return newKey;\n    //}\n    /**\n     *\n     * @param token\n     * @returns {*}\n     */\n    KeyRegistry.prototype.get = function (token) {\n        if (!lang_2.isType(token)) {\n            throw new Error(\"KeyRegistry#get:\\n                        ================\\n                        you'v tried to create a key for `\" + token + \"`\\n                        creating and getting key tokens is avaialable only for Type\");\n        }\n        var newKey = \"\" + lang_3.getTypeName(token) + KeyRegistry._suffix + this._uniqueId();\n        this._allKeys.push(newKey);\n        return newKey;\n    };\n    Object.defineProperty(KeyRegistry.prototype, \"numberOfKeys\", {\n        get: function () { return collections_1.ListWrapper.size(this._allKeys); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(KeyRegistry.prototype, \"allKeys\", {\n        get: function () { return collections_1.ListWrapper.clone(this._allKeys); },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * just for testing purposes\n     * @private\n     * @internal\n     */\n    KeyRegistry.prototype._reset = function () {\n        collections_1.ListWrapper.clear(this._allKeys);\n        this._idCounter = 0;\n    };\n    /**\n     * Generates a unique ID. If `prefix` is provided the ID is appended to it.\n     *\n     * @param {string} [prefix] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _uniqueId();\n     * // => '105'\n     */\n    KeyRegistry.prototype._uniqueId = function (prefix) {\n        var id = ++this._idCounter;\n        return \"\" + lang_1.baseToString(prefix) + id;\n    };\n    return KeyRegistry;\n}());\nKeyRegistry._suffix = \"#\";\nexports.KeyRegistry = KeyRegistry;\nexports.globalKeyRegistry = new KeyRegistry();\n//# sourceMappingURL=key.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/di/key.js\n// module id = 666\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\nvar reflection_1 = require(\"../reflection/reflection\");\nvar provider_1 = require(\"./provider\");\nvar provider_util_1 = require(\"./provider_util\");\n/**\n * process provider literals and return map for angular1Module consumption\n * @param provider\n * @returns {{method: string, name: string, value: any}}\n */\nfunction resolveReflectiveProvider(provider) {\n    var token = provider.token;\n    if (lang_1.isPresent(provider.useValue)) {\n        var _a = provider_1.provide(token, { useValue: provider.useValue }), name_1 = _a[0], value = _a[1];\n        var method = 'value';\n        return { method: method, name: name_1, value: value };\n    }\n    if (provider.useFactory) {\n        var _b = provider_1.provide(token, { useFactory: provider.useFactory, deps: provider.dependencies }), name_2 = _b[0], value = _b[1];\n        var method = 'factory';\n        return { method: method, name: name_2, value: value };\n    }\n    if (provider.useClass) {\n        var _c = provider_1.provide(token, { useClass: provider.useClass }), name_3 = _c[0], value = _c[1];\n        var method = 'service';\n        return { method: method, name: name_3, value: value };\n    }\n    if (provider.useExisting) {\n        var _d = provider_1.provide(provider.useExisting), name_4 = _d[0], value = _d[1];\n        var method = 'factory';\n        throw new Error('useExisting is unimplemented');\n    }\n    throw new Error('invalid provider type! please specify one of: [useValue,useFactory,useClass]');\n}\nexports.resolveReflectiveProvider = resolveReflectiveProvider;\n/**\n * returns StringMap of values needed for angular1Module registration and duplicity checks\n * @param injectable\n * @returns {any}\n * @private\n */\nfunction _getAngular1ModuleMetadataByType(injectable) {\n    // only the first class annotations is injectable\n    var annotation = reflection_1.reflector.annotations(injectable)[0];\n    if (lang_1.isBlank(annotation)) {\n        // support configPhase ( function or pure class )\n        if (lang_1.isType(injectable)) {\n            return {\n                providerName: '$injector',\n                providerMethod: 'invoke',\n                moduleMethod: 'config'\n            };\n        }\n        throw new Error(\"\\n        cannot get injectable name token from none decorated class \" + lang_1.getFuncName(injectable) + \"\\n        Only decorated classes by one of [ @Injectable,@Directive,@Component,@Pipe ], can be injected by reference\\n      \");\n    }\n    if (provider_util_1.isPipe(annotation)) {\n        return {\n            providerName: '$filterProvider',\n            providerMethod: 'register',\n            moduleMethod: 'filter'\n        };\n    }\n    if (provider_util_1.isDirectiveLike(annotation)) {\n        return {\n            providerName: '$compileProvider',\n            providerMethod: 'directive',\n            moduleMethod: 'directive'\n        };\n    }\n    if (provider_util_1.isService(annotation)) {\n        return {\n            providerName: '$provide',\n            providerMethod: 'service',\n            moduleMethod: 'service'\n        };\n    }\n}\nexports._getAngular1ModuleMetadataByType = _getAngular1ModuleMetadataByType;\n/**\n * run through Component tree and register everything that is registered via Metadata\n * - works for nested arrays like angular 2 does ;)\n * @param angular1Module\n * @param providers\n * @returns {ng.IModule}\n * @private\n */\nfunction _normalizeProviders(angular1Module, providers) {\n    providers.forEach(function (providerType) {\n        // this is for legacy Angular 1 module\n        if (lang_1.isString(providerType)) {\n            angular1Module.requires.push(providerType);\n            return;\n        }\n        // this works only for value,factory,aliased services\n        // you cannot register directive/pipe within provider literal\n        if (provider_util_1.isProviderLiteral(providerType)) {\n            var provider = provider_util_1.createProvider(providerType);\n            var _a = resolveReflectiveProvider(provider), method = _a.method, name_5 = _a.name, value = _a.value;\n            if (!_isTypeRegistered(name_5, angular1Module, '$provide', method)) {\n                angular1Module[method](name_5, value);\n            }\n            return;\n        }\n        // this is for pipes/directives/services\n        if (lang_1.isType(providerType)) {\n            // const provider = createProvider( {provide:b, useClass:b} );\n            // const { method, name, value } = resolveReflectiveProvider( provider );\n            var _b = provider_1.provide(providerType), name_6 = _b[0], value = _b[1];\n            var _c = _getAngular1ModuleMetadataByType(providerType), providerName = _c.providerName, providerMethod = _c.providerMethod, moduleMethod = _c.moduleMethod;\n            // config phase support\n            if (lang_1.isType(name_6)) {\n                angular1Module.config(name_6);\n                return;\n            }\n            if (!_isTypeRegistered(name_6, angular1Module, providerName, providerMethod)) {\n                // @TODO register via this once requires are resolved for 3 types of attr directive from template\n                // _registerTypeProvider( angular1Module, providerType, { moduleMethod, name, value } );\n                angular1Module[moduleMethod](name_6, value);\n            }\n            return;\n        }\n        // un flattened array, unwrap and parse next array level of providers\n        if (lang_1.isArray(providerType)) {\n            _normalizeProviders(angular1Module, providerType);\n        }\n        else {\n            throw new Error(\"InvalidProviderError(\" + providerType + \")\");\n        }\n    });\n    // return res;\n    return angular1Module;\n}\nexports._normalizeProviders = _normalizeProviders;\n/**\n * check if `findRegisteredType` is registered within angular1Module, so we don't have duplicates\n * @param findRegisteredType\n * @param angular1Module\n * @param instanceType\n * @param methodName\n * @returns {boolean}\n * @private\n */\nfunction _isTypeRegistered(findRegisteredType, angular1Module, instanceType, methodName) {\n    var invokeQueue = angular1Module._invokeQueue;\n    var types = invokeQueue\n        .filter(function (_a) {\n        var type = _a[0], fnName = _a[1];\n        return type === instanceType && fnName === methodName;\n    })\n        .map(function (_a) {\n        var type = _a[0], fnName = _a[1], registeredProvider = _a[2];\n        return registeredProvider;\n    });\n    return types.some(function (_a) {\n        var typeName = _a[0], typeFn = _a[1];\n        return findRegisteredType === typeName;\n    });\n}\nexports._isTypeRegistered = _isTypeRegistered;\n/**\n * we need to register 3 types of attribute directives, if we are registering directive,\n * because we need to allow all 3 types of binding on the defined directive [name],(name),name\n * @private\n */\nfunction _registerTypeProvider(angular1Module, provider, _a) {\n    var moduleMethod = _a.moduleMethod, name = _a.name, value = _a.value;\n    // only the first class annotations is injectable\n    var annotation = reflection_1.reflector.annotations(provider)[0];\n    if (lang_1.isBlank(annotation)) {\n        return;\n    }\n    // we need to register attr directives for all possible binding types\n    if (provider_util_1.isDirective(annotation)) {\n        angular1Module[moduleMethod](name, value);\n        angular1Module[moduleMethod](\"[\" + name + \"]\", value);\n        angular1Module[moduleMethod](\"(\" + name + \")\", value);\n    }\n    else {\n        angular1Module[moduleMethod](name, value);\n    }\n}\nexports._registerTypeProvider = _registerTypeProvider;\n//# sourceMappingURL=reflective_provider.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/di/reflective_provider.js\n// module id = 667\n// module chunks = 0","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\n__export(require(\"./directives/decorators\"));\n__export(require(\"./directives/metadata_di\"));\n__export(require(\"./directives/metadata_directives\"));\n//# sourceMappingURL=directives.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives.js\n// module id = 668\n// module chunks = 0","\"use strict\";\nvar directives_utils_1 = require(\"../directives_utils\");\nvar change_detection_util_1 = require(\"../../change_detection/change_detection_util\");\nvar changes_queue_1 = require(\"../../change_detection/changes_queue\");\nvar collections_1 = require(\"../../../facade/collections\");\nvar lang_1 = require(\"../../../facade/lang\");\nvar async_1 = require(\"../../../facade/async\");\nvar constants_1 = require(\"./constants\");\nvar binding_parser_1 = require(\"./binding_parser\");\n/**\n * Create Bindings manually for both Directive/Component\n * @returns {{watchers: Array, observers: Array}}\n * @internal\n * @private\n */\nfunction _createDirectiveBindings(hasIsolateScope, ngScope, ngAttrs, ctrl, metadata, _a) {\n    /*  let BOOLEAN_ATTR = {};\n     'multiple,selected,checked,disabled,readOnly,required,open'\n     .split(',')\n     .forEach(function(value) {\n     BOOLEAN_ATTR[value.toLocaleLowerCase()] = value;\n     });*/\n    var $interpolate = _a.$interpolate, $parse = _a.$parse, $rootScope = _a.$rootScope;\n    var isBindingImmutable = directives_utils_1.isComponentDirective(metadata) && change_detection_util_1.ChangeDetectionUtil.isOnPushChangeDetectionStrategy(metadata.changeDetection);\n    var scope = hasIsolateScope\n        ? ngScope.$parent\n        : ngScope;\n    var _b = metadata.inputs, inputs = _b === void 0 ? [] : _b, _c = metadata.outputs, outputs = _c === void 0 ? [] : _c;\n    var parsedBindings = binding_parser_1.setupFields(ngAttrs, inputs, outputs);\n    var _internalWatchers = [];\n    var _internalObservers = [];\n    // onChanges tmp vars\n    var initialChanges = {};\n    var changes;\n    // this will create flush queue internally only once\n    // we need to call this here because we need $rootScope service\n    changes_queue_1.changesQueueService.buildFlushOnChanges($rootScope);\n    // setup @Inputs '<' or '='\n    collections_1.StringMapWrapper.forEach(parsedBindings.inputs, function (config, propName) {\n        var exp = config.exp, attrName = config.attrName, mode = config.mode;\n        // support for TWO_WAY only for components\n        var hasTwoWayBinding = hasIsolateScope && mode === constants_1.BINDING_MODE.twoWay;\n        var removeWatch = hasTwoWayBinding\n            ? _createTwoWayBinding(propName, attrName, exp)\n            : _createOneWayBinding(propName, attrName, exp, isBindingImmutable);\n        _internalWatchers.push(removeWatch);\n    });\n    // setup @Input('@')\n    collections_1.StringMapWrapper.forEach(parsedBindings.attrs, function (config, propName) {\n        var attrName = config.attrName, exp = config.exp, mode = config.mode;\n        var removeObserver = _createAttrBinding(propName, attrName, exp);\n        _internalObservers.push(removeObserver);\n    });\n    // setup @Outputs\n    collections_1.StringMapWrapper.forEach(parsedBindings.outputs, function (config, propName) {\n        var exp = config.exp, attrName = config.attrName, mode = config.mode;\n        _createOutputBinding(propName, attrName, exp);\n    });\n    function _createOneWayBinding(propName, attrName, exp, isImmutable) {\n        if (isImmutable === void 0) { isImmutable = false; }\n        if (!exp)\n            return;\n        var parentGet = $parse(exp);\n        var initialValue = ctrl[propName] = parentGet(scope);\n        initialChanges[propName] = change_detection_util_1.ChangeDetectionUtil.simpleChange(change_detection_util_1.ChangeDetectionUtil.uninitialized, ctrl[propName]);\n        return scope.$watch(parentGet, function parentValueWatchAction(newValue, oldValue) {\n            // https://github.com/angular/angular.js/commit/d9448dcb9f901ceb04deda1d5f3d5aac8442a718\n            // https://github.com/angular/angular.js/commit/304796471292f9805b9cf77e51aacc9cfbb09921\n            if (oldValue === newValue) {\n                if (oldValue === initialValue)\n                    return;\n                oldValue = initialValue;\n            }\n            recordChanges(propName, newValue, oldValue);\n            ctrl[propName] = isImmutable ? lang_1.global.angular.copy(newValue) : newValue;\n        }, parentGet.literal);\n    }\n    function _createTwoWayBinding(propName, attrName, exp) {\n        if (!exp)\n            return;\n        var lastValue;\n        var parentGet = $parse(exp);\n        var parentSet = parentGet.assign || function () {\n            // reset the change, or we will throw this exception on every $digest\n            lastValue = ctrl[propName] = parentGet(scope);\n            throw new Error(\"nonassign,\\n          Expression '\" + ngAttrs[attrName] + \"' in attribute '\" + attrName + \"' used with directive '{2}' is non-assignable!\");\n        };\n        var compare = parentGet.literal ? lang_1.global.angular.equals : simpleCompare;\n        var parentValueWatch = function parentValueWatch(parentValue) {\n            if (!compare(parentValue, ctrl[propName])) {\n                // we are out of sync and need to copy\n                if (!compare(parentValue, lastValue)) {\n                    // parent changed and it has precedence\n                    ctrl[propName] = parentValue;\n                }\n                else {\n                    // if the parent can be assigned then do so\n                    parentSet(scope, parentValue = ctrl[propName]);\n                }\n            }\n            return lastValue = parentValue;\n        };\n        parentValueWatch.$stateful = true;\n        lastValue = ctrl[propName] = parentGet(scope);\n        // NOTE: we don't support collection watch, it's not good for performance\n        // if (definition.collection) {\n        //   removeWatch = scope.$watchCollection(attributes[attrName], parentValueWatch);\n        // } else {\n        //   removeWatch = scope.$watch($parse(attributes[attrName], parentValueWatch), null, parentGet.literal);\n        // }\n        // removeWatchCollection.push(removeWatch);\n        return scope.$watch(\n        // $parse( ngAttrs[ attrName ], parentValueWatch ),\n        $parse(exp, parentValueWatch), null, parentGet.literal);\n        function simpleCompare(a, b) { return a === b || (a !== a && b !== b); }\n    }\n    function _createOutputBinding(propName, attrName, exp) {\n        // Don't assign Object.prototype method to scope\n        var parentGet = exp\n            ? $parse(exp)\n            : lang_1.noop;\n        // Don't assign noop to ctrl if expression is not valid\n        if (parentGet === lang_1.noop)\n            return;\n        // here we assign property to EventEmitter instance directly\n        var emitter = new async_1.EventEmitter();\n        emitter.wrapNgExpBindingToEmitter(function _exprBindingCb(locals) {\n            return parentGet(scope, locals);\n        });\n        ctrl[propName] = emitter;\n    }\n    function _createAttrBinding(propName, attrName, exp) {\n        var lastValue = exp;\n        // register watchers for further changes\n        // The observer function will be invoked once during the next $digest following compilation.\n        // The observer is then invoked whenever the interpolated value changes.\n        var _disposeObserver = ngAttrs.$observe(attrName, function (value) {\n            // https://github.com/angular/angular.js/commit/499e1b2adf27f32d671123f8dceadb3df2ad84a9\n            if (lang_1.isString(value) || lang_1.isBoolean(value)) {\n                var oldValue = ctrl[propName];\n                recordChanges(propName, value, oldValue);\n                ctrl[propName] = value;\n            }\n        });\n        ngAttrs.$$observers[attrName].$$scope = scope;\n        if (lang_1.isString(lastValue)) {\n            // If the attribute has been provided then we trigger an interpolation to ensure\n            // the value is there for use in the link fn\n            ctrl[propName] = $interpolate(lastValue)(scope);\n        }\n        else if (lang_1.isBoolean(lastValue)) {\n            // If the attributes is one of the BOOLEAN_ATTR then Angular will have converted\n            // the value to boolean rather than a string, so we special case this situation\n            ctrl[propName] = lastValue;\n        }\n        initialChanges[propName] = change_detection_util_1.ChangeDetectionUtil.simpleChange(change_detection_util_1.ChangeDetectionUtil.uninitialized, ctrl[propName]);\n        return _disposeObserver;\n    }\n    function recordChanges(key, currentValue, previousValue) {\n        if (lang_1.isFunction(ctrl.ngOnChanges) && currentValue !== previousValue) {\n            // If we have not already scheduled the top level onChangesQueue handler then do so now\n            if (!changes_queue_1.changesQueueService.onChangesQueue) {\n                scope.$$postDigest(changes_queue_1.changesQueueService.flushOnChangesQueue);\n                changes_queue_1.changesQueueService.onChangesQueue = [];\n            }\n            // If we have not already queued a trigger of onChanges for this controller then do so now\n            if (!changes) {\n                changes = {};\n                changes_queue_1.changesQueueService.onChangesQueue.push(triggerOnChangesHook);\n            }\n            // If the has been a change on this property already then we need to reuse the previous value\n            if (changes[key]) {\n                previousValue = changes[key].previousValue;\n            }\n            // Store this change\n            changes[key] = change_detection_util_1.ChangeDetectionUtil.simpleChange(previousValue, currentValue);\n        }\n    }\n    function triggerOnChangesHook() {\n        ctrl.ngOnChanges(changes);\n        // Now clear the changes so that we schedule onChanges when more changes arrive\n        changes = undefined;\n    }\n    function removeWatches() {\n        var removeWatchCollection = _internalWatchers.concat(_internalObservers);\n        for (var i = 0, ii = removeWatchCollection.length; i < ii; ++i) {\n            if (removeWatchCollection[i] && lang_1.isFunction(removeWatchCollection[i])) {\n                removeWatchCollection[i]();\n            }\n        }\n    }\n    return {\n        initialChanges: initialChanges,\n        removeWatches: removeWatches,\n        _watchers: { watchers: _internalWatchers, observers: _internalObservers }\n    };\n}\nexports._createDirectiveBindings = _createDirectiveBindings;\n//# sourceMappingURL=binding_factory.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/binding/binding_factory.js\n// module id = 669\n// module chunks = 0","\"use strict\";\nvar collections_1 = require(\"../../../facade/collections\");\nvar constants_1 = require(\"./constants\");\nfunction setupFields(ngAttrs, rawInputs, rawOutputs) {\n    if (rawInputs === void 0) { rawInputs = []; }\n    if (rawOutputs === void 0) { rawOutputs = []; }\n    var _a = _setupInputs(_parseFields(rawInputs), ngAttrs), inputs = _a.inputs, attrs = _a.attrs;\n    var outputs = _setupOutputs(_parseFields(rawOutputs), ngAttrs).outputs;\n    return {\n        inputs: inputs,\n        attrs: attrs,\n        outputs: outputs\n    };\n}\nexports.setupFields = setupFields;\nfunction _parseFields(names) {\n    var attrProps = [];\n    if (!names) {\n        return attrProps;\n    }\n    for (var _i = 0, names_1 = names; _i < names_1.length; _i++) {\n        var name_1 = names_1[_i];\n        var parts = name_1.split(':');\n        var prop = parts[0].trim();\n        var attr = (parts[1] || parts[0]).trim();\n        var isTypeByDeclaration = _isTypeByDeclaration(attr);\n        var attrName = _getNormalizedAttrName(attr, prop, isTypeByDeclaration);\n        var type = _getBindingType(attr, isTypeByDeclaration);\n        attrProps.push({\n            prop: prop,\n            attr: attrName,\n            bracketAttr: \"[\" + attrName + \"]\",\n            parenAttr: \"(\" + attrName + \")\",\n            bracketParenAttr: \"[(\" + attrName + \")]\",\n            type: type,\n            typeByTemplate: !isTypeByDeclaration\n        });\n    }\n    return attrProps;\n}\nexports._parseFields = _parseFields;\nfunction _getBindingType(originalAttr, isTypeByDeclaration) {\n    return isTypeByDeclaration\n        ? originalAttr.charAt(0)\n        : '';\n}\nfunction _isTypeByDeclaration(attr) {\n    return collections_1.ListWrapper.contains([\n        constants_1.BINDING_MODE.attr, constants_1.BINDING_MODE.oneWay, constants_1.BINDING_MODE.twoWay\n    ], attr.charAt(0));\n}\nfunction _getNormalizedAttrName(originalAttr, propName, isTypeByDeclaration) {\n    if (!isTypeByDeclaration) {\n        return originalAttr;\n    }\n    return originalAttr.length > 1\n        ? originalAttr.substring(1)\n        : propName;\n}\nfunction _setupInputs(inputs, ngAttrs) {\n    var parsedAttrs = {};\n    var parsedInputs = {};\n    for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n        var input = inputs_1[_i];\n        if (input.typeByTemplate) {\n            if (ngAttrs.hasOwnProperty(input.attr)) {\n                // @\n                parsedAttrs[input.prop] = {\n                    mode: constants_1.BINDING_MODE.attr,\n                    exp: ngAttrs[input.attr],\n                    attrName: input.attr\n                };\n            }\n            else if (ngAttrs.hasOwnProperty(input.bracketAttr)) {\n                // <\n                parsedInputs[input.prop] = {\n                    mode: constants_1.BINDING_MODE.oneWay,\n                    exp: ngAttrs[input.bracketAttr],\n                    attrName: input.bracketAttr\n                };\n            }\n            else if (ngAttrs.hasOwnProperty(input.bracketParenAttr)) {\n                // =\n                parsedInputs[input.prop] = {\n                    mode: constants_1.BINDING_MODE.twoWay,\n                    exp: ngAttrs[input.bracketParenAttr],\n                    attrName: input.bracketParenAttr\n                };\n            }\n        }\n        else {\n            if (ngAttrs.hasOwnProperty(input.attr)) {\n                var attrMetadata = { mode: input.type, exp: ngAttrs[input.attr], attrName: input.attr };\n                if (input.type === constants_1.BINDING_MODE.attr) {\n                    parsedAttrs[input.prop] = attrMetadata;\n                }\n                else {\n                    parsedInputs[input.prop] = attrMetadata;\n                }\n            }\n        }\n    }\n    return {\n        inputs: parsedInputs,\n        attrs: parsedAttrs\n    };\n}\nexports._setupInputs = _setupInputs;\nfunction _setupOutputs(outputs, ngAttrs) {\n    var parsedOutputs = {};\n    for (var i = 0; i < outputs.length; i = i + 1) {\n        var output = outputs[i];\n        var baseParsedAttrField = { mode: constants_1.BINDING_MODE.output, exp: undefined, attrName: '' };\n        // & via event\n        if (ngAttrs.hasOwnProperty(output.attr)) {\n            parsedOutputs[output.prop] = collections_1.StringMapWrapper.assign({}, baseParsedAttrField, { exp: ngAttrs[output.attr], attrName: output.attr });\n        }\n        else if (ngAttrs.hasOwnProperty(output.parenAttr)) {\n            parsedOutputs[output.prop] = collections_1.StringMapWrapper.assign({}, baseParsedAttrField, { exp: ngAttrs[output.parenAttr], attrName: output.parenAttr });\n        }\n    }\n    return { outputs: parsedOutputs };\n}\nexports._setupOutputs = _setupOutputs;\n/**\n * parses input/output/attrs string arrays from metadata fro further processing\n * @param inputs\n * @param outputs\n * @param attrs\n * @returns {{inputs: ParsedBindingsMap, outputs: ParsedBindingsMap, attrs: ParsedBindingsMap}}\n * @private\n * @deprecated\n */\nfunction _parseBindings(_a) {\n    var _b = _a.inputs, inputs = _b === void 0 ? [] : _b, _c = _a.outputs, outputs = _c === void 0 ? [] : _c, _d = _a.attrs, attrs = _d === void 0 ? [] : _d;\n    var SPLIT_BY = ':';\n    return {\n        inputs: _parseByMode(inputs, constants_1.BINDING_MODE.twoWay, [constants_1.BINDING_MODE.attr]),\n        outputs: _parseByMode(outputs, constants_1.BINDING_MODE.output),\n        attrs: collections_1.StringMapWrapper.merge(\n        // this will be removed in 2.0\n        _parseByMode(attrs, constants_1.BINDING_MODE.attr), \n        // attrs build from @Input('@')\n        _parseByMode(inputs, constants_1.BINDING_MODE.twoWay, [constants_1.BINDING_MODE.oneWay, constants_1.BINDING_MODE.twoWay]))\n    };\n    function _parseByMode(bindingArr, defaultMode, excludeMode) {\n        if (excludeMode === void 0) { excludeMode = []; }\n        return bindingArr.reduce(function (acc, binding) {\n            var _a = binding.split(SPLIT_BY).map(function (part) { return part.trim(); }), name = _a[0], _b = _a[1], modeConfigAndAlias = _b === void 0 ? '' : _b;\n            var parsedConfigAndAlias = modeConfigAndAlias.match(constants_1.INPUT_MODE_REGEX);\n            var _c = parsedConfigAndAlias || [], _d = _c[1], mode = _d === void 0 ? defaultMode : _d, _e = _c[2], optional = _e === void 0 ? '' : _e, _f = _c[3], alias = _f === void 0 ? '' : _f;\n            // exit early if processed mode is not allowed\n            // for example if we are parsing Input('@') which produces attr binding instead of one or two way\n            if (excludeMode.indexOf(mode) !== -1) {\n                return acc;\n            }\n            // @TODO remove this in next version where template parsing will be implemented\n            if ((defaultMode !== constants_1.BINDING_MODE.output) && !(parsedConfigAndAlias && parsedConfigAndAlias[1])) {\n                console.warn(\"\\n        You need to explicitly provide type of binding(=,<,@) within your <code>'@Input() \" + name + \";</code>.\\n        Next version 2.0 will create binding by parsing template if you provide '@Input()' without binding type.\\n        \");\n            }\n            acc[name] = {\n                mode: mode,\n                alias: alias,\n                optional: optional === constants_1.BINDING_MODE.optional || true\n            };\n            return acc;\n        }, {});\n    }\n}\nexports._parseBindings = _parseBindings;\n//# sourceMappingURL=binding_parser.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/binding/binding_parser.js\n// module id = 670\n// module chunks = 0","\"use strict\";\nexports.REQUIRE_PREFIX_REGEXP = /^(?:(\\^\\^?)?(\\?)?(\\^\\^?)?)?/;\n//# sourceMappingURL=constants.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/controller/constants.js\n// module id = 671\n// module chunks = 0","\"use strict\";\nvar collections_1 = require(\"../../../facade/collections\");\nvar change_detector_ref_1 = require(\"../../change_detection/change_detector_ref\");\nvar binding_factory_1 = require(\"../binding/binding_factory\");\nvar directives_utils_1 = require(\"../directives_utils\");\nvar lang_1 = require(\"../../../facade/lang\");\nvar primitives_1 = require(\"../../../facade/primitives\");\nvar constants_1 = require(\"./constants\");\nfunction directiveControllerFactory(caller, controller, $injector, locals, requireMap, _ddo, metadata) {\n    var $scope = locals.$scope, $element = locals.$element, $attrs = locals.$attrs;\n    var _services = {\n        $parse: $injector.get('$parse'),\n        $interpolate: $injector.get('$interpolate'),\n        $rootScope: $injector.get('$rootScope')\n    };\n    var _localServices = {\n        changeDetectorRef: change_detector_ref_1.ChangeDetectorRef.create($scope)\n    };\n    // Create an instance of the controller without calling its constructor\n    var instance = Object.create(controller.prototype);\n    // NOTE: this is not needed because we are creating bindings manually because of\n    // angular behaviour https://github.com/ngParty/ng-metadata/issues/53\n    // ===================================================================\n    // Remember, angular has already set those bindings on the `caller`\n    // argument. Now we need to extend them onto our `instance`. It is important\n    // to extend after defining the properties. That way we fire the setters.\n    //\n    // StringMapWrapper.assign( instance, caller );\n    // setup @Input/@Output/@Attrs for @Component/@Directive\n    var _a = binding_factory_1._createDirectiveBindings(!directives_utils_1.isAttrDirective(metadata), $scope, $attrs, instance, metadata, _services), removeWatches = _a.removeWatches, initialChanges = _a.initialChanges;\n    cleanUpWatchers(removeWatches);\n    // change injectables to proper inject directives\n    // we wanna do this only if we inject some locals/directives\n    if (collections_1.StringMapWrapper.size(requireMap)) {\n        controller.$inject = createNewInjectablesToMatchLocalDi(controller.$inject, requireMap);\n    }\n    var $requires = getEmptyRequiredControllers(requireMap);\n    // $injector.invoke will delete any @Input/@Attr/@Output which were resolved within _createDirectiveBindings\n    // and which have set default values in constructor. We need to store them and reassign after this invoke\n    var initialInstanceBindingValues = getInitialBindings(instance);\n    // Finally, invoke the constructor using the injection array and the captured locals\n    $injector.invoke(controller, instance, collections_1.StringMapWrapper.assign(locals, _localServices, $requires));\n    // reassign back the initial binding values, just in case if we used default values\n    collections_1.StringMapWrapper.assign(instance, initialInstanceBindingValues);\n    /*if ( isFunction( instance.ngOnDestroy ) ) {\n     $scope.$on( '$destroy', instance.ngOnDestroy.bind( instance ) );\n     }*/\n    /*if (typeof instance.ngAfterViewInit === 'function') {\n     ddo.ngAfterViewInitBound = instance.ngAfterViewInit.bind(instance);\n     }*/\n    // https://github.com/angular/angular.js/commit/0ad2b70862d49ecc4355a16d767c0ca9358ecc3e\n    // onChanges is called before onInit\n    if (lang_1.isFunction(instance.ngOnChanges)) {\n        instance.ngOnChanges(initialChanges);\n    }\n    _ddo._ngOnInitBound = function _ngOnInitBound() {\n        // invoke again only if there are any directive requires\n        // #perf\n        if (collections_1.StringMapWrapper.size(requireMap)) {\n            var $requires_1 = getRequiredControllers(requireMap, $element, controller);\n            // $injector.invoke will delete any @Input/@Attr/@Output which were resolved within _createDirectiveBindings\n            // and which have set default values in constructor. We need to store them and reassign after this invoke\n            var initialInstanceBindingValues_1 = getInitialBindings(instance);\n            $injector.invoke(controller, instance, collections_1.StringMapWrapper.assign(locals, _localServices, $requires_1));\n            // reassign back the initial binding values, just in case if we used default values\n            collections_1.StringMapWrapper.assign(instance, initialInstanceBindingValues_1);\n        }\n        if (lang_1.isFunction(instance.ngOnInit)) {\n            instance.ngOnInit();\n        }\n        // DoCheck is called after OnChanges and OnInit\n        if (lang_1.isFunction(instance.ngDoCheck)) {\n            var removeDoCheckWatcher = $postDigestWatch($scope, function () { return instance.ngDoCheck(); });\n            cleanUpWatchers(removeDoCheckWatcher);\n        }\n    };\n    // Return the controller instance\n    return instance;\n    function cleanUpWatchers(cb) {\n        $scope.$on('$destroy', function () { return cb; });\n    }\n}\nexports.directiveControllerFactory = directiveControllerFactory;\n/**\n * Note: $$postDigest will not trigger another digest cycle.\n * So any modification to $scope inside $$postDigest will not get reflected in the DOM\n */\nfunction $postDigestWatch(scope, cb) {\n    var hasRegistered = false;\n    var removeDoCheckWatcher = scope.$watch(function () {\n        if (hasRegistered) {\n            return;\n        }\n        hasRegistered = true;\n        scope.$$postDigest(function () {\n            hasRegistered = false;\n            cb();\n        });\n    });\n    return removeDoCheckWatcher;\n}\nfunction getInitialBindings(instance) {\n    var initialBindingValues = {};\n    collections_1.StringMapWrapper.forEach(instance, function (value, propName) {\n        if (instance[propName]) {\n            initialBindingValues[propName] = value;\n        }\n    });\n    return initialBindingValues;\n}\n/**\n * Angular 1 copy of how to require other directives\n * @param require\n * @param $element\n * @param directive\n * @returns {any|null}\n */\nfunction getRequiredControllers(require, $element, directive) {\n    var value;\n    if (lang_1.isString(require)) {\n        var match = require.match(constants_1.REQUIRE_PREFIX_REGEXP);\n        var name = require.substring(match[0].length);\n        var inheritType = match[1] || match[3];\n        var optional = match[2] === '?';\n        //If only parents then start at the parent element\n        if (inheritType === '^^') {\n            $element = $element.parent();\n        }\n        if (!value) {\n            var dataName = \"$\" + name + \"Controller\";\n            value = inheritType ? $element.inheritedData(dataName) : $element.data(dataName);\n        }\n        if (!value && !optional) {\n            throw new Error(\"Directive/Controller '\" + name + \"', required by directive '\" + lang_1.getFuncName(directive) + \"', can't be found!\");\n        }\n    }\n    else if (lang_1.isArray(require)) {\n        value = [];\n        for (var i = 0, ii = require.length; i < ii; i++) {\n            value[i] = getRequiredControllers(require[i], $element, directive);\n        }\n    }\n    else if (lang_1.isJsObject(require)) {\n        value = {};\n        collections_1.StringMapWrapper.forEach(require, function (controller, property) {\n            value[property] = getRequiredControllers(controller, $element, directive);\n        });\n    }\n    return value || null;\n}\nexports.getRequiredControllers = getRequiredControllers;\nfunction getEmptyRequiredControllers(requireMap) {\n    return collections_1.StringMapWrapper.keys(requireMap).reduce(function (acc, keyName) {\n        acc[keyName] = undefined;\n        return acc;\n    }, {});\n}\nexports.getEmptyRequiredControllers = getEmptyRequiredControllers;\nfunction createNewInjectablesToMatchLocalDi(originalInjectables, requireMap) {\n    var requireKeys = collections_1.StringMapWrapper.keys(requireMap);\n    return originalInjectables.slice()\n        .map(function (injectable) {\n        var replaceInjName = requireKeys\n            .filter(function (keyName) { return primitives_1.StringWrapper.startsWith(keyName, injectable); })[0];\n        // if found remove that key so we won't assign the same\n        if (replaceInjName) {\n            var idx = requireKeys.indexOf(replaceInjName);\n            requireKeys.splice(idx, 1);\n        }\n        return replaceInjName || injectable;\n    });\n}\nexports.createNewInjectablesToMatchLocalDi = createNewInjectablesToMatchLocalDi;\n/**\n * @deprecated\n * @TODO remove?\n */\nfunction injectionArgs(fn, locals, serviceName, injects) {\n    var args = [], \n    // $inject = createInjector.$$annotate(fn, strictDi, serviceName);\n    $inject = injects;\n    for (var i = 0, length = $inject.length; i < length; i++) {\n        var key = $inject[i];\n        if (typeof key !== 'string') {\n            throw new Error(\"itkn, Incorrect injection token! Expected service name as string, got \" + key);\n        }\n        /*    args.push( locals && locals.hasOwnProperty( key )\n         ? locals[ key ]\n         : getService( key, serviceName ) );*/\n        args.push(locals[key]);\n    }\n    return args;\n}\n//# sourceMappingURL=controller_factory.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/controller/controller_factory.js\n// module id = 672\n// module chunks = 0","\"use strict\";\nvar decorators_1 = require(\"../util/decorators\");\nvar metadata_di_1 = require(\"./metadata_di\");\nvar metadata_directives_1 = require(\"./metadata_directives\");\nexports.Component = decorators_1.makeDecorator(metadata_directives_1.ComponentMetadata);\nexports.Directive = decorators_1.makeDecorator(metadata_directives_1.DirectiveMetadata);\nexports.ContentChildren = decorators_1.makePropDecorator(metadata_di_1.ContentChildrenMetadata);\nexports.ContentChild = decorators_1.makePropDecorator(metadata_di_1.ContentChildMetadata);\nexports.ViewChildren = decorators_1.makePropDecorator(metadata_di_1.ViewChildrenMetadata);\nexports.ViewChild = decorators_1.makePropDecorator(metadata_di_1.ViewChildMetadata);\nexports.Input = decorators_1.makePropDecorator(metadata_directives_1.InputMetadata);\n/**\n *\n * @type {any}\n * @deprecated use @Input('@') instead. Will be removed in 2.0\n */\nexports.Attr = decorators_1.makePropDecorator(metadata_directives_1.AttrMetadata);\nexports.Output = decorators_1.makePropDecorator(metadata_directives_1.OutputMetadata);\nexports.HostBinding = decorators_1.makePropDecorator(metadata_directives_1.HostBindingMetadata);\nexports.HostListener = decorators_1.makePropDecorator(metadata_directives_1.HostListenerMetadata);\n/**\n * Declares an ng module.\n * @experimental\n * @Annotation\n */\nexports.NgModule = decorators_1.makeDecorator(metadata_directives_1.NgModuleMetadata);\n//# sourceMappingURL=decorators.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/decorators.js\n// module id = 673\n// module chunks = 0","\"use strict\";\nvar directive_resolver_1 = require(\"../linker/directive_resolver\");\nvar lang_1 = require(\"../../facade/lang\");\nvar collections_1 = require(\"../../facade/collections\");\nvar directive_lifecycles_reflector_1 = require(\"../linker/directive_lifecycles_reflector\");\nvar directive_lifecycle_interfaces_1 = require(\"../linker/directive_lifecycle_interfaces\");\nvar metadata_directives_1 = require(\"./metadata_directives\");\nvar controller_factory_1 = require(\"./controller/controller_factory\");\nvar children_resolver_1 = require(\"./query/children_resolver\");\nvar host_parser_1 = require(\"./host/host_parser\");\nvar host_resolver_1 = require(\"./host/host_resolver\");\nvar directives_utils_1 = require(\"./directives_utils\");\n/**\n * @internal\n */\nvar DirectiveProvider = (function () {\n    function DirectiveProvider(directiveResolver) {\n        this.directiveResolver = directiveResolver;\n    }\n    /**\n     * creates directiveName and DirectiveFactory for angularJS container\n     *\n     * it produces directive for classes decorated with @Directive with following DDO:\n     * ```\n     * {\n     * require: ['directiveName'],\n     * controller: ClassDirective,\n     * link: postLinkFn\n     * }\n     * ```\n     *\n     * it produces component for classes decorated with @Component with following DDO:\n     * ```\n     * {\n     * require: ['directiveName'],\n     * controller: ClassDirective,\n     * controllerAs: '$ctrl',\n     * template: 'component template string',\n     * scope:{},\n     * bindToController:{},\n     * transclude: false,\n     * link: postLinkFn\n     * }\n     * ```\n     * @param type\n     * @returns {string|function(): ng.IDirective[]}\n     */\n    DirectiveProvider.prototype.createFromType = function (type) {\n        var metadata = this.directiveResolver.resolve(type);\n        var directiveName = lang_1.resolveDirectiveNameFromSelector(metadata.selector);\n        var requireMap = this.directiveResolver.getRequiredDirectivesMap(type);\n        var lfHooks = directive_lifecycles_reflector_1.resolveImplementedLifeCycleHooks(type);\n        var _ddo = {\n            restrict: 'A',\n            controller: _controller,\n            link: {\n                pre: function () { _ddo._ngOnInitBound(); },\n                post: this._createLink(type, metadata, lfHooks)\n            },\n            // @TODO this will be removed after @Query handling is moved to directiveControllerFactory\n            require: this._createRequires(requireMap, directiveName),\n            _ngOnInitBound: lang_1.noop\n        };\n        // Component controllers must be created from a factory. Checkout out\n        // util/directive-controller.js for more information about what's going on here\n        _controller.$inject = ['$scope', '$element', '$attrs', '$transclude', '$injector'];\n        function _controller($scope, $element, $attrs, $transclude, $injector) {\n            var locals = { $scope: $scope, $element: $element, $attrs: $attrs, $transclude: $transclude };\n            return controller_factory_1.directiveControllerFactory(this, type, $injector, locals, requireMap, _ddo, metadata);\n        }\n        // specific DDO augmentation for @Component\n        if (metadata instanceof metadata_directives_1.ComponentMetadata) {\n            var assetsPath = this.directiveResolver.parseAssetUrl(metadata);\n            var componentSpecificDDO = {\n                restrict: 'E',\n                scope: {},\n                bindToController: {},\n                controllerAs: DirectiveProvider._controllerAs,\n                transclude: DirectiveProvider._transclude\n            };\n            if (metadata.template && metadata.templateUrl) {\n                throw new Error('cannot have both template and templateUrl');\n            }\n            if (metadata.template) {\n                componentSpecificDDO.template = metadata.template;\n            }\n            if (metadata.templateUrl) {\n                componentSpecificDDO.templateUrl = \"\" + assetsPath + metadata.templateUrl;\n            }\n            collections_1.StringMapWrapper.assign(_ddo, componentSpecificDDO);\n        }\n        // allow compile defined as static method on Type\n        if (lang_1.isFunction(type.compile)) {\n            _ddo.compile = function compile(tElement, tAttrs) {\n                var linkFn = type.compile(tElement, tAttrs);\n                // if user custom compile fn returns link use that one instead use generated\n                return lang_1.isJsObject(linkFn)\n                    ? linkFn\n                    : this.link;\n            };\n        }\n        // allow link defined as static method on Type override the created one\n        // you should not use this very often\n        // Note: if you use this any @Host property decorators or lifeCycle hooks wont work\n        if (lang_1.isFunction(type.link)) {\n            _ddo.link = type.link;\n        }\n        // legacy property overrides all generated DDO stuff\n        var ddo = this._createDDO(_ddo, metadata.legacy);\n        function directiveFactory() { return ddo; }\n        // ==========================\n        // ngComponentRouter Support:\n        // ==========================\n        // @TODO(pete) remove the following `forEach` before we release 1.6.0\n        // The component-router@0.2.0 looks for the annotations on the controller constructor\n        // Nothing in Angular looks for annotations on the factory function but we can't remove\n        // it from 1.5.x yet.\n        // Copy any annotation properties (starting with $) over to the factory and controller constructor functions\n        // These could be used by libraries such as the new component router\n        collections_1.StringMapWrapper.forEach(ddo, function (val, key) {\n            if (key.charAt(0) === '$') {\n                directiveFactory[key] = val;\n                // Don't try to copy over annotations to named controller\n                if (lang_1.isFunction(ddo.controller)) {\n                    ddo.controller[key] = val;\n                }\n            }\n        });\n        // support componentRouter $canActivate lc hook as static instead of defined within legacy object\n        // componentRouter reads all lc hooks from directiveFactory ¯\\_(ツ)_/¯\n        // @TODO update this when new component router will be available for Angular 1 ( 1.6 release probably )\n        if (lang_1.isFunction(type.$canActivate)) {\n            directiveFactory.$canActivate = type.$canActivate;\n        }\n        return [directiveName, directiveFactory];\n    };\n    DirectiveProvider.prototype._createDDO = function (ddo, legacyDDO) {\n        return lang_1.assign({}, DirectiveProvider._ddoShell, ddo, legacyDDO);\n    };\n    /**\n     *\n     * @param requireMap\n     * @param directiveName\n     * @returns {Array}\n     * @private\n     * @internal\n     */\n    DirectiveProvider.prototype._createRequires = function (requireMap, directiveName) {\n        return [directiveName].concat(collections_1.StringMapWrapper.values(requireMap));\n    };\n    /**\n     * Directive lifeCycles:\n     * - ngOnInit from preLink (all children compiled and DOM ready)\n     * - ngAfterContentInit from postLink ( DOM in children ready )\n     * - ngOnDestroy from postLink\n     *\n     * Component lifeCycles:\n     * - ngOnInit from preLink (controller require ready)\n     * - ngAfterViewInit from postLink ( all children in view+content compiled and DOM ready )\n     * - ngAfterContentInit from postLink ( same as ngAfterViewInit )\n     * - ngOnDestroy from postLink\n     * @param type\n     * @param metadata\n     * @param lfHooks\n     * @private\n     * @internal\n     */\n    DirectiveProvider.prototype._createLink = function (type, metadata, lfHooks) {\n        if ((lfHooks.ngAfterContentChecked || lfHooks.ngAfterViewChecked) && collections_1.StringMapWrapper.size(metadata.queries) === 0) {\n            throw new Error(\"\\n              Hooks Impl for \" + lang_1.stringify(type) + \":\\n              ===================================\\n              You've implement AfterContentChecked/AfterViewChecked lifecycle, but @ViewChild(ren)/@ContentChild(ren) decorators are not used.\\n              we cannot invoke After(Content|View)Checked without provided @Query decorators\\n              \");\n        }\n        if (metadata instanceof metadata_directives_1.ComponentMetadata) {\n            if ((lfHooks.ngAfterContentInit || lfHooks.ngAfterContentChecked) && !collections_1.StringMapWrapper.getValueFromPath(metadata, 'legacy.transclude')) {\n                throw new Error(\"\\n              Hooks Impl for \" + lang_1.stringify(type) + \":\\n              ===================================\\n              You cannot implement AfterContentInit lifecycle, without allowed transclusion.\\n              turn transclusion on within decorator like this: @Component({legacy:{transclude:true}})\\n              \");\n            }\n        }\n        // we need to implement this if query are present on class, because during postLink _ngOnChildrenChanged is not yet\n        // implemented on controller instance\n        if (collections_1.StringMapWrapper.size(metadata.queries)) {\n            type.prototype._ngOnChildrenChanged = lang_1.noop;\n        }\n        var hostProcessed = host_parser_1._parseHost(metadata.host);\n        return postLink;\n        function postLink(scope, element, attrs, controller, transclude) {\n            var _watchers = [];\n            var ctrl = controller[0], requiredCtrls = controller.slice(1);\n            host_resolver_1._setHostStaticAttributes(element, hostProcessed.hostStatic);\n            // setup @HostBindings\n            _watchers.push.apply(_watchers, host_resolver_1._setHostBindings(scope, element, ctrl, hostProcessed.hostBindings));\n            // setup @HostListeners\n            host_resolver_1._setHostListeners(scope, element, ctrl, hostProcessed.hostListeners);\n            // @ContentChild/@ContentChildren/@ViewChild/@ViewChildren related logic\n            var parentCheckedNotifiers = children_resolver_1._getParentCheckNotifiers(ctrl, requiredCtrls);\n            _watchers.push.apply(_watchers, parentCheckedNotifiers);\n            children_resolver_1._setupQuery(scope, element, ctrl, metadata.queries);\n            // AfterContentInit/AfterViewInit Hooks\n            // if there are query defined schedule $evalAsync semaphore\n            if (collections_1.StringMapWrapper.size(metadata.queries)) {\n                ctrl._ngOnChildrenChanged(directive_lifecycle_interfaces_1.ChildrenChangeHook.FromView, [\n                    parentCheckedNotifiers.forEach(function (cb) { return cb(); }),\n                    ctrl.ngAfterViewInit && ctrl.ngAfterViewInit.bind(ctrl),\n                    ctrl.ngAfterViewChecked && ctrl.ngAfterViewChecked.bind(ctrl),\n                ]);\n                ctrl._ngOnChildrenChanged(directive_lifecycle_interfaces_1.ChildrenChangeHook.FromContent, [\n                    parentCheckedNotifiers.forEach(function (cb) { return cb(); }),\n                    ctrl.ngAfterContentInit && ctrl.ngAfterContentInit.bind(ctrl),\n                    ctrl.ngAfterContentChecked && ctrl.ngAfterContentChecked.bind(ctrl),\n                ]);\n            }\n            else {\n                // no @ContentChild/@ViewChild(ref) decorators exist, call just controller init method\n                parentCheckedNotifiers.forEach(function (cb) { return cb(); });\n                ctrl.ngAfterViewInit && ctrl.ngAfterViewInit();\n                ctrl.ngAfterContentInit && ctrl.ngAfterContentInit();\n            }\n            directives_utils_1._setupDestroyHandler(scope, element, ctrl, lfHooks.ngOnDestroy, _watchers);\n        }\n    };\n    return DirectiveProvider;\n}());\nDirectiveProvider._ddoShell = {\n    require: [],\n    controller: lang_1.noop,\n    link: { pre: lang_1.noop, post: lang_1.noop }\n};\nDirectiveProvider._controllerAs = \"$ctrl\";\nDirectiveProvider._transclude = false;\nexports.DirectiveProvider = DirectiveProvider;\nexports.directiveProvider = new DirectiveProvider(new directive_resolver_1.DirectiveResolver());\n//# sourceMappingURL=directive_provider.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/directive_provider.js\n// module id = 674\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../../facade/lang\");\nvar collections_1 = require(\"../../../facade/collections\");\nvar HOST_BINDING_KEY_REGEX = /^\\[.*\\]$/;\nvar HOST_LISTENER_KEY_REGEX = /^\\(.*\\)$/;\nvar HAS_CLASS_REGEX = /^class./;\nvar HAS_ATTR_REGEX = /^attr./;\nfunction _parseHost(host) {\n    if (!lang_1.isPresent(host)) {\n        return;\n    }\n    var hostStatic = {};\n    var hostBindingsRaw = [];\n    var hostListeners = {};\n    collections_1.StringMapWrapper.forEach(host, function (hostValue, hostKey) {\n        var hostMap = (_a = {}, _a[stripBindingOrListenerBrackets(hostKey)] = hostValue, _a);\n        if (isStaticHost(hostKey)) {\n            lang_1.assign(hostStatic, hostMap);\n            return;\n        }\n        if (isHostBinding(hostKey)) {\n            hostBindingsRaw.push(hostMap);\n            return;\n        }\n        if (isHostListener(hostKey)) {\n            lang_1.assign(hostListeners, processHostListenerCallback(hostMap));\n        }\n        var _a;\n    });\n    var hostBindings = hostBindingsRaw\n        .reduce(function (acc, hostBindingObj) {\n        var hostObjKey = Object.keys(hostBindingObj)[0];\n        var hostObjValue = hostBindingObj[hostObjKey];\n        if (HAS_CLASS_REGEX.test(hostObjKey)) {\n            acc.classes[hostObjKey.replace(HAS_CLASS_REGEX, '')] = hostObjValue;\n            return acc;\n        }\n        if (HAS_ATTR_REGEX.test(hostObjKey)) {\n            acc.attributes[hostObjKey.replace(HAS_ATTR_REGEX, '')] = hostObjValue;\n            return acc;\n        }\n        lang_1.assign(acc.properties, hostBindingObj);\n        return acc;\n    }, {\n        classes: {},\n        attributes: {},\n        properties: {}\n    });\n    return {\n        hostStatic: hostStatic,\n        hostBindings: hostBindings,\n        hostListeners: hostListeners\n    };\n    function isHostBinding(hostKey) {\n        return HOST_BINDING_KEY_REGEX.test(hostKey);\n    }\n    function isHostListener(hostKey) {\n        return HOST_LISTENER_KEY_REGEX.test(hostKey);\n    }\n    function isStaticHost(hostKey) {\n        return !(isHostBinding(hostKey) || isHostListener(hostKey));\n    }\n    function stripBindingOrListenerBrackets(hostKey) {\n        return hostKey.replace(/\\[|\\]|\\(|\\)/g, '');\n    }\n    function processHostListenerCallback(hostListener) {\n        // eventKey is 'click' or 'document: click' etc\n        var eventKey = Object.keys(hostListener)[0];\n        // cbString is just value 'onMove($event.target)' or 'onMove()'\n        var cbString = hostListener[eventKey];\n        // here we parse out callback method and its argument to separate strings\n        // - for instance we got from 'onMove($event.target)' --> 'onMove','$event.target'\n        var _a = /^(\\w+)\\(([$\\w.\\s,]*)\\)$/.exec(cbString), cbMethodName = _a[1], cbMethodArgs = _a[2];\n        var eventValue = [\n            cbMethodName\n        ].concat(cbMethodArgs.split(',').filter(function (argument) { return Boolean(argument); }).map(function (argument) { return argument.trim(); }));\n        return _b = {},\n            _b[eventKey.replace(/\\s/g, '')] = eventValue,\n            _b;\n        var _b;\n    }\n}\nexports._parseHost = _parseHost;\n//# sourceMappingURL=host_parser.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/host/host_parser.js\n// module id = 675\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../../facade/lang\");\nvar collections_1 = require(\"../../../facade/collections\");\nvar primitives_1 = require(\"../../../facade/primitives\");\n/**\n *\n * @param element\n * @param staticAttributes\n * @private\n */\nfunction _setHostStaticAttributes(element, staticAttributes) {\n    element.attr(staticAttributes);\n}\nexports._setHostStaticAttributes = _setHostStaticAttributes;\n/**\n *\n * @param scope\n * @param element\n * @param ctrl\n * @param hostBindings\n * @returns {Array}\n * @internal\n * @private\n */\nfunction _setHostBindings(scope, element, ctrl, hostBindings) {\n    // setup @HostBindings\n    return _createWatcherByType('classes', hostBindings).concat(_createWatcherByType('attributes', hostBindings), _createWatcherByType('properties', hostBindings));\n    /**\n     * registers $scope.$watch for appropriate hostBinding\n     * the watcher watches property on controller instance\n     * @param type\n     * @param hostBinding\n     * @returns {Array}\n     * @private\n     */\n    function _createWatcherByType(type, hostBinding) {\n        var _watchersByType = [];\n        collections_1.StringMapWrapper.forEach(hostBinding[type], function (watchPropName, keyToSet) {\n            _watchersByType.push(scope.$watch(function () { return ctrl[watchPropName]; }, function (newValue) {\n                if (type === 'classes') {\n                    element.toggleClass(keyToSet, newValue);\n                }\n                if (type === 'attributes') {\n                    element.attr(keyToSet, newValue);\n                }\n                if (type === 'properties') {\n                    collections_1.StringMapWrapper.setValueInPath(element[0], keyToSet, newValue);\n                }\n            }));\n        });\n        return _watchersByType;\n    }\n}\nexports._setHostBindings = _setHostBindings;\n/**\n *\n * @param scope\n * @param element\n * @param ctrl\n * @param hostListeners\n * @internal\n * @private\n */\nfunction _setHostListeners(scope, element, ctrl, hostListeners) {\n    collections_1.StringMapWrapper.forEach(hostListeners, _registerHostListener);\n    function _registerHostListener(cbArray, eventKey) {\n        var methodName = cbArray[0], methodParams = cbArray.slice(1);\n        var _a = _getTargetAndEvent(eventKey, element), event = _a.event, target = _a.target;\n        // console.log( event );\n        target.on(event, eventHandler);\n        // global event\n        if (target !== element) {\n            scope.$on('$destroy', function () { return target.off(event, eventHandler); });\n        }\n        function eventHandler(evt) {\n            var cbParams = _getHostListenerCbParams(evt, methodParams);\n            scope.$apply(function () {\n                var noPreventDefault = ctrl[methodName].apply(ctrl, cbParams);\n                // HostListener event.preventDefault if method returns false\n                if (noPreventDefault === false) {\n                    evt.preventDefault();\n                }\n            });\n        }\n    }\n}\nexports._setHostListeners = _setHostListeners;\n/**\n * return $event or it's property if found via path\n * @param event\n * @param eventParams\n * @returns {Array}\n * @private\n */\nfunction _getHostListenerCbParams(event, eventParams) {\n    var ALLOWED_EVENT_NAME = '$event';\n    return eventParams.reduce(function (acc, eventPath) {\n        if (!primitives_1.StringWrapper.startsWith(eventPath, ALLOWED_EVENT_NAME)) {\n            throw new Error(\"\\n              only $event.* is supported. Please provide correct listener parameter @example: $event,$event.target\\n              \");\n        }\n        if (eventPath === ALLOWED_EVENT_NAME) {\n            return acc.concat([event]);\n        }\n        return acc.concat([collections_1.StringMapWrapper.getValueFromPath(event, eventPath.replace(ALLOWED_EVENT_NAME, ''))]);\n    }, []);\n}\nexports._getHostListenerCbParams = _getHostListenerCbParams;\nfunction _getGlobalTargetReference($injector, targetName) {\n    var globalEventTargets = ['document', 'window', 'body'];\n    var $document = $injector.get(\"$document\");\n    if (targetName === 'document') {\n        return $document;\n    }\n    if (targetName === 'window') {\n        return lang_1.global.angular.element($injector.get(\"$\" + targetName));\n    }\n    if (targetName === 'body') {\n        return lang_1.global.angular.element($document[0][targetName]);\n    }\n    throw new Error(\"unsupported global target '\" + targetName + \"', only '\" + globalEventTargets + \"' are supported\");\n}\n/**\n *\n * @param definedHostEvent this will be just simple 'event' string name or 'globalTarget:event'\n * @param hostElement\n * @returns {any}\n * @private\n */\nfunction _getTargetAndEvent(definedHostEvent, hostElement) {\n    // global target\n    var eventWithGlobalTarget = definedHostEvent.split(/\\s*:\\s*/);\n    if (eventWithGlobalTarget.length === 2) {\n        var globalTarget = eventWithGlobalTarget[0], eventOnTarget = eventWithGlobalTarget[1];\n        return {\n            event: eventOnTarget,\n            target: _getGlobalTargetReference(hostElement.injector(), globalTarget)\n        };\n    }\n    return {\n        event: definedHostEvent,\n        target: hostElement\n    };\n}\n//# sourceMappingURL=host_resolver.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/host/host_resolver.js\n// module id = 676\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../../facade/lang\");\nvar collections_1 = require(\"../../../facade/collections\");\nvar directive_lifecycle_interfaces_1 = require(\"../../linker/directive_lifecycle_interfaces\");\nvar reflection_1 = require(\"../../reflection/reflection\");\nvar provider_1 = require(\"../../di/provider\");\nvar metadata_directives_1 = require(\"../metadata_directives\");\nvar metadata_di_1 = require(\"../metadata_di\");\n/**\n * setup watchers for children component/directives provided by @Query decorators\n * - setup @ContentChild/@ContentChildren/@ViewChild/@ViewChildren\n * @param scope\n * @param element\n * @param ctrl\n * @param queries\n * @private\n */\nfunction _setupQuery(scope, element, ctrl, queries) {\n    var SEMAPHORE_PROP_NAMES = Object.freeze({\n        view: '__readViewChildrenOrderScheduled',\n        content: '__readContentChildrenOrderScheduled'\n    });\n    var DOM_RESOLVER_TYPES = Object.freeze({\n        view: 'view',\n        content: 'content'\n    });\n    if (collections_1.StringMapWrapper.size(queries) === 0) {\n        return;\n    }\n    var onChildrenChangedCb = _getOnChildrenResolvers(element, ctrl, queries);\n    ctrl.__readContentChildrenOrderScheduled = false;\n    ctrl.__readViewChildrenOrderScheduled = false;\n    // this is our created _ngOnChildrenChanged which will be called by children directives\n    var _ngOnChildrenChanged = function (type, onFirstChangeDoneCb, domResolverCb) {\n        if (onFirstChangeDoneCb === void 0) { onFirstChangeDoneCb = []; }\n        if (domResolverCb === void 0) { domResolverCb = onChildrenChangedCb; }\n        var orderScheduledSemaphorePropName = '';\n        var domResolverCbType = '';\n        if (type === directive_lifecycle_interfaces_1.ChildrenChangeHook.FromView) {\n            orderScheduledSemaphorePropName = SEMAPHORE_PROP_NAMES.view;\n            domResolverCbType = DOM_RESOLVER_TYPES.view;\n        }\n        else if (type === directive_lifecycle_interfaces_1.ChildrenChangeHook.FromContent) {\n            domResolverCbType = DOM_RESOLVER_TYPES.content;\n            orderScheduledSemaphorePropName = SEMAPHORE_PROP_NAMES.content;\n        }\n        else {\n            throw new Error(\"_ngOnChildrenChanged: queryType(\" + type + \") must be one of FromView|FromContent\");\n        }\n        if (ctrl[orderScheduledSemaphorePropName]) {\n            return;\n        }\n        ctrl[orderScheduledSemaphorePropName] = true;\n        // we execute callback within $evalAsync to extend $digest loop count, which will not trigger another\n        // $rootScope.$digest === #perfmatters\n        scope.$evalAsync(function () {\n            // turn semaphore On back again\n            ctrl[orderScheduledSemaphorePropName] = false;\n            // query DOM and assign instances/jqLite to controller properties\n            domResolverCb[domResolverCbType].forEach(function (cb) { return cb(); });\n            // when DOM is queried we can execute DirectiveComponent life cycles which have been registered\n            // AfterViewInit | AfterContentInit\n            onFirstChangeDoneCb.forEach(function (cb) { lang_1.isFunction(cb) && cb(); });\n        });\n    };\n    // this method needs to be called from children which are we querying\n    // if they are rendered dynamically/async\n    ctrl._ngOnChildrenChanged = _ngOnChildrenChanged.bind(ctrl);\n    /**\n     * get all callbacks which will be executed withing $scope.$evalAsync,\n     * which are querying for DOM elements and gets controller instances from host element children\n     * @param element\n     * @param ctrl\n     * @param queries\n     * @returns {view: Function[], content: Function[]}\n     * @private\n     */\n    function _getOnChildrenResolvers(element, ctrl, queries) {\n        var _onChildrenChangedCbMap = (_a = {},\n            _a[DOM_RESOLVER_TYPES.view] = [],\n            _a[DOM_RESOLVER_TYPES.content] = [],\n            _a);\n        collections_1.StringMapWrapper.forEach(queries, function (meta, key) {\n            if (meta instanceof metadata_di_1.ViewChildMetadata) {\n                _onChildrenChangedCbMap[DOM_RESOLVER_TYPES.view].push(_resolveViewChild(element, ctrl, key, meta));\n            }\n            if (meta instanceof metadata_di_1.ViewChildrenMetadata) {\n                _onChildrenChangedCbMap[DOM_RESOLVER_TYPES.view].push(_resolveViewChildren(element, ctrl, key, meta));\n            }\n            if (meta instanceof metadata_di_1.ContentChildMetadata) {\n                _onChildrenChangedCbMap[DOM_RESOLVER_TYPES.content].push(_resolveContentChild(element, ctrl, key, meta));\n            }\n            if (meta instanceof metadata_di_1.ContentChildrenMetadata) {\n                _onChildrenChangedCbMap[DOM_RESOLVER_TYPES.content].push(_resolveContentChildren(element, ctrl, key, meta));\n            }\n        });\n        return _onChildrenChangedCbMap;\n        function _resolveViewChild(element, ctrl, key, meta) {\n            return _resolveChildrenFactory(element, ctrl, key, meta.selector, DOM_RESOLVER_TYPES.view, true);\n        }\n        function _resolveContentChild(element, ctrl, key, meta) {\n            return _resolveChildrenFactory(element, ctrl, key, meta.selector, DOM_RESOLVER_TYPES.content, true);\n        }\n        function _resolveViewChildren(element, ctrl, key, meta) {\n            return _resolveChildrenFactory(element, ctrl, key, meta.selector, DOM_RESOLVER_TYPES.view);\n        }\n        function _resolveContentChildren(element, ctrl, key, meta) {\n            return _resolveChildrenFactory(element, ctrl, key, meta.selector, DOM_RESOLVER_TYPES.content);\n        }\n        var _a;\n    }\n}\nexports._setupQuery = _setupQuery;\n/**\n * resolving DOM instances by provided @ContentChild(ref)/@ViewChild(ref)\n * - if querying for string, we handle it as a selector and return jqLite instances\n * - if querying for Type( directive | component ) we get proper selector and controller from\n * provided Type reference, query the DOM and return that controller instance if exists, otherwise null\n * @param element\n * @param ctrl\n * @param key\n * @param cssSelector\n * @param type\n * @param firstOnly\n * @returns {function(): void}\n * @private\n */\nfunction _resolveChildrenFactory(element, ctrl, key, cssSelector, type, firstOnly) {\n    if (firstOnly === void 0) { firstOnly = false; }\n    var _a = _getSelectorAndCtrlName(cssSelector), selector = _a.selector, childCtrlName = _a.childCtrlName;\n    return _childResolver;\n    function _childResolver() {\n        if (firstOnly) {\n            ctrl[key] = null;\n            var child = _getChildElements(element, selector, type, firstOnly);\n            var childInstance = lang_1.isString(cssSelector)\n                ? child\n                : getControllerOnElement(child, childCtrlName);\n            ctrl[key] = childInstance;\n        }\n        else {\n            ctrl[key] = [];\n            var children = _getChildElements(element, selector, type);\n            if (lang_1.isString(cssSelector)) {\n                ctrl[key] = children;\n                return;\n            }\n            for (var i = 0; i < children.length; i++) {\n                ctrl[key].push(getControllerOnElement(children.eq(i), childCtrlName));\n            }\n        }\n    }\n}\nexports._resolveChildrenFactory = _resolveChildrenFactory;\n/**\n * query View/Content DOM for particular child elements/attributes selector\n * @param $element\n * @param selector\n * @param type\n * @param firstOnly\n * @returns {IAugmentedJQuery}\n * @private\n */\nfunction _getChildElements($element, selector, type, firstOnly) {\n    if (firstOnly === void 0) { firstOnly = false; }\n    var querySelector = '';\n    if (type === 'view') {\n        // Note: we are guarding only for first nested child inside ng-transclude\n        // this would be to complicated and DOM heavy to select only selectors outside ng-transclude\n        // - it should be author responsibility to not include Component view directive within <ng-transclude> and querying for them\n        querySelector = \":not(ng-transclude):not([ng-transclude]) > \" + selector;\n    }\n    if (type === 'content') {\n        querySelector = \"ng-transclude \" + selector + \", [ng-transclude] \" + selector;\n    }\n    var queryMethod = firstOnly\n        ? 'querySelector'\n        : 'querySelectorAll';\n    return lang_1.global.angular.element($element[0][queryMethod](querySelector));\n}\nexports._getChildElements = _getChildElements;\nfunction _getSelectorAndCtrlName(childSelector) {\n    var selector = _getSelector(childSelector);\n    var childCtrlName = provider_1.getInjectableName(childSelector);\n    return { selector: selector, childCtrlName: childCtrlName };\n}\nexports._getSelectorAndCtrlName = _getSelectorAndCtrlName;\n/**\n * get CSS selector from Component/Directive decorated class metadata\n * @param selector\n * @returns {string}\n * @private\n */\nfunction _getSelector(selector) {\n    if (lang_1.isString(selector)) {\n        return selector;\n    }\n    if (lang_1.isType(selector)) {\n        var annotation = reflection_1.reflector.annotations(selector)[0];\n        if (annotation instanceof metadata_directives_1.DirectiveMetadata) {\n            return annotation.selector;\n        }\n    }\n    throw new Error(\"cannot query for non Directive/Component type \" + lang_1.getFuncName(selector));\n}\nexports._getSelector = _getSelector;\n/**\n * creates functions which will be called from parent component which is querying this component\n * - component which queries needs to be injected to child,\n * here child creates special callbacks by type of @Query which will be called from postLink and on scope destroy so\n * we clean up GC\n * @param ctrl\n * @param requiredCtrls\n * @returns {Object|Array|T|function()[]}\n * @private\n */\nfunction _getParentCheckNotifiers(ctrl, requiredCtrls) {\n    var parentCheckedNotifiers = requiredCtrls.reduce(function (acc, requiredCtrl) {\n        if (!lang_1.isJsObject(requiredCtrl)) {\n            return acc;\n        }\n        var Ctor = requiredCtrl.constructor;\n        if (!lang_1.isType(Ctor)) {\n            return acc;\n        }\n        var propMeta = reflection_1.reflector.propMetadata(Ctor);\n        if (!collections_1.StringMapWrapper.size(propMeta)) {\n            return acc;\n        }\n        var _parentCheckedNotifiers = [];\n        collections_1.StringMapWrapper.forEach(propMeta, function (propMetaPropArr) {\n            propMetaPropArr\n                .filter(function (propMetaInstance) {\n                // check if propMeta is one of @Query types and that it queries for Directive/Component ( typeof selector == function )\n                if (!((propMetaInstance instanceof metadata_di_1.QueryMetadata) && lang_1.isType(propMetaInstance.selector))) {\n                    return false;\n                }\n                // check if current child is really queried from its parent\n                return ctrl instanceof propMetaInstance.selector;\n            })\n                .forEach(function (propMetaInstance) {\n                // parent queried for this child with one from @ContentChild/@ContentChildren\n                if (!propMetaInstance.isViewQuery) {\n                    _parentCheckedNotifiers.push(function () { return requiredCtrl._ngOnChildrenChanged(directive_lifecycle_interfaces_1.ChildrenChangeHook.FromContent, [requiredCtrl.ngAfterContentChecked.bind(requiredCtrl)]); });\n                }\n                // parent queried for this child with one from @ViewChild/@ViewChildren\n                if (propMetaInstance.isViewQuery) {\n                    _parentCheckedNotifiers.push(function () { return requiredCtrl._ngOnChildrenChanged(directive_lifecycle_interfaces_1.ChildrenChangeHook.FromView, [requiredCtrl.ngAfterViewChecked.bind(requiredCtrl)]); });\n                }\n            });\n        });\n        return acc.concat(_parentCheckedNotifiers);\n    }, []);\n    return collections_1.ListWrapper.size(parentCheckedNotifiers)\n        ? parentCheckedNotifiers\n        : [lang_1.noop];\n}\nexports._getParentCheckNotifiers = _getParentCheckNotifiers;\nfunction getControllerOnElement($element, ctrlName) {\n    if (!$element) {\n        return null;\n    }\n    return $element.controller(ctrlName);\n}\nexports.getControllerOnElement = getControllerOnElement;\n//# sourceMappingURL=children_resolver.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/directives/query/children_resolver.js\n// module id = 677\n// module chunks = 0","\"use strict\";\nvar type_1 = require(\"../../facade/type\");\nvar directive_lifecycle_interfaces_1 = require(\"./directive_lifecycle_interfaces\");\nfunction hasLifecycleHook(lcInterface, token) {\n    if (!(token instanceof type_1.Type))\n        return false;\n    var proto = token.prototype;\n    switch (lcInterface) {\n        case directive_lifecycle_interfaces_1.LifecycleHooks.AfterContentInit:\n            return !!proto.ngAfterContentInit;\n        case directive_lifecycle_interfaces_1.LifecycleHooks.AfterContentChecked:\n            return !!proto.ngAfterContentChecked;\n        case directive_lifecycle_interfaces_1.LifecycleHooks.AfterViewInit:\n            return !!proto.ngAfterViewInit;\n        case directive_lifecycle_interfaces_1.LifecycleHooks.AfterViewChecked:\n            return !!proto.ngAfterViewChecked;\n        case directive_lifecycle_interfaces_1.LifecycleHooks.OnDestroy:\n            return !!proto.ngOnDestroy;\n        case directive_lifecycle_interfaces_1.LifecycleHooks.OnInit:\n            return !!proto.ngOnInit;\n        case directive_lifecycle_interfaces_1.LifecycleHooks.OnChanges:\n            return !!proto.ngOnChanges;\n        case directive_lifecycle_interfaces_1.LifecycleHooks.DoCheck:\n            return !!proto.ngDoCheck;\n        case directive_lifecycle_interfaces_1.LifecycleHooks._OnChildrenChanged:\n            return !!proto._ngOnChildrenChanged;\n        default:\n            return false;\n    }\n}\nexports.hasLifecycleHook = hasLifecycleHook;\n/**\n * @internal\n */\nfunction resolveImplementedLifeCycleHooks(type) {\n    return {\n        ngOnInit: hasLifecycleHook(directive_lifecycle_interfaces_1.LifecycleHooks.OnInit, type),\n        ngOnChanges: hasLifecycleHook(directive_lifecycle_interfaces_1.LifecycleHooks.OnChanges, type),\n        ngDoCheck: hasLifecycleHook(directive_lifecycle_interfaces_1.LifecycleHooks.DoCheck, type),\n        ngAfterContentInit: hasLifecycleHook(directive_lifecycle_interfaces_1.LifecycleHooks.AfterContentInit, type),\n        ngAfterContentChecked: hasLifecycleHook(directive_lifecycle_interfaces_1.LifecycleHooks.AfterContentChecked, type),\n        ngAfterViewInit: hasLifecycleHook(directive_lifecycle_interfaces_1.LifecycleHooks.AfterViewInit, type),\n        ngAfterViewChecked: hasLifecycleHook(directive_lifecycle_interfaces_1.LifecycleHooks.AfterViewChecked, type),\n        ngOnDestroy: hasLifecycleHook(directive_lifecycle_interfaces_1.LifecycleHooks.OnDestroy, type),\n        _ngOnChildrenChanged: hasLifecycleHook(directive_lifecycle_interfaces_1.LifecycleHooks._OnChildrenChanged, type)\n    };\n}\nexports.resolveImplementedLifeCycleHooks = resolveImplementedLifeCycleHooks;\n//# sourceMappingURL=directive_lifecycles_reflector.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/linker/directive_lifecycles_reflector.js\n// module id = 678\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\nvar collections_1 = require(\"../../facade/collections\");\nvar reflection_1 = require(\"../reflection/reflection\");\nvar metadata_directives_1 = require(\"../directives/metadata_directives\");\nvar metadata_di_1 = require(\"../directives/metadata_di\");\nvar metadata_1 = require(\"../di/metadata\");\nvar provider_1 = require(\"../di/provider\");\nvar forward_ref_1 = require(\"../di/forward_ref\");\nvar exceptions_1 = require(\"../../facade/exceptions\");\n// asset:<package-name>/<realm>/<path-to-module>\n// var _ASSET_URL_RE = /asset:([^\\/]+)\\/([^\\/]+)\\/(.+)/g;\n// <path-to-module>/filename.js\nvar ASSET_URL_RE = /^(.+)\\/.+\\.js$/;\nfunction _isDirectiveMetadata(type) {\n    return type instanceof metadata_directives_1.DirectiveMetadata;\n}\n/**\n * return required string map for provided local DI\n * ```typescript\n * // for\n * constructor(@Inject('ngModel') @Self() @Optional() ngModel){}\n * // it returns:\n * { ngModel: '?ngModel' }\n *\n * // when MyComponent is\n * @Component({ selector: 'myCoolCmp', template:`hello`})\n * class MyComponent{}\n * // for\n * constructor(@Host() @Optional() myCmp: MyComponent){}\n * // it returns:\n * { myCmp: '^myCoolCmp' }\n * ```\n * @param paramsMeta\n * @param idx\n * @param typeOrFunc\n * @returns {{[directiveName]:string}}\n * @private\n */\nfunction _transformInjectedDirectivesMeta(paramsMeta, idx, typeOrFunc) {\n    if (!_isInjectableParamsDirective(paramsMeta)) {\n        return;\n    }\n    // @TODO unite this with _extractToken from provider.ts\n    var injectInst = collections_1.ListWrapper.find(paramsMeta, function (param) { return param instanceof metadata_1.InjectMetadata; });\n    var injectType = collections_1.ListWrapper.find(paramsMeta, lang_1.isType);\n    var _a = (injectInst || { token: injectType }).token, token = _a === void 0 ? undefined : _a;\n    // we need to decrement param count if user uses both @Inject() and :MyType\n    var paramsMetaLength = (injectInst && injectType)\n        ? paramsMeta.length - 1\n        : paramsMeta.length;\n    if (!token) {\n        throw new Error(exceptions_1.getErrorMsg(typeOrFunc, \"no Directive instance name provided within @Inject() or :DirectiveClass annotation missing\"));\n    }\n    var isHost = collections_1.ListWrapper.findIndex(paramsMeta, function (param) { return param instanceof metadata_1.HostMetadata; }) !== -1;\n    var isOptional = collections_1.ListWrapper.findIndex(paramsMeta, function (param) { return param instanceof metadata_1.OptionalMetadata; }) !== -1;\n    var isSelf = collections_1.ListWrapper.findIndex(paramsMeta, function (param) { return param instanceof metadata_1.SelfMetadata; }) !== -1;\n    var isSkipSelf = collections_1.ListWrapper.findIndex(paramsMeta, function (param) { return param instanceof metadata_1.SkipSelfMetadata; }) !== -1;\n    if (isOptional && paramsMetaLength !== 3) {\n        throw new Error(exceptions_1.getErrorMsg(typeOrFunc, \"you cannot use @Optional() without related decorator for injecting Directives. use one of @Host|@Self()|@SkipSelf() + @Optional()\"));\n    }\n    if (isSelf && isSkipSelf) {\n        throw new Error(exceptions_1.getErrorMsg(typeOrFunc, \"you cannot provide both @Self() and @SkipSelf() with @Inject(\" + lang_1.getFuncName(token) + \") for Directive Injection\"));\n    }\n    if ((isHost && isSelf) || (isHost && isSkipSelf)) {\n        throw new Error(exceptions_1.getErrorMsg(typeOrFunc, \"you cannot provide both @Host(),@SkipSelf() or @Host(),@Self() with @Inject(\" + lang_1.getFuncName(token) + \") for Directive Injections\"));\n    }\n    var locateType = _getLocateTypeSymbol();\n    var optionalType = isOptional ? '?' : '';\n    var requireExpressionPrefix = \"\" + optionalType + locateType;\n    var directiveName = _getDirectiveName(token);\n    // we need to generate unique names because if we require same directive controllers,\n    // with different locale decorators it would merge to one which is wrong\n    return _b = {},\n        _b[directiveName + \"#\" + idx] = \"\" + requireExpressionPrefix + directiveName,\n        _b;\n    function _getDirectiveName(token) {\n        return lang_1.isType(forward_ref_1.resolveForwardRef(token))\n            ? provider_1.getInjectableName(forward_ref_1.resolveForwardRef(token))\n            : token;\n    }\n    function _getLocateTypeSymbol() {\n        if (isSelf) {\n            return '';\n        }\n        if (isHost) {\n            return '^';\n        }\n        if (isSkipSelf) {\n            return '^^';\n        }\n    }\n    // exit if user uses both @Inject() and :Type for DI because this is not directive injection\n    function _isInjectableParamsDirective(paramsMeta) {\n        // if there is just @Inject or Type from design:paramtypes return\n        if (paramsMeta.length < 2) {\n            return false;\n        }\n        if (paramsMeta.length === 2) {\n            var injectableParamCount = paramsMeta.filter(function (inj) { return inj instanceof metadata_1.InjectMetadata || lang_1.isType(inj); }).length;\n            if (injectableParamCount === 2) {\n                return false;\n            }\n        }\n        return true;\n    }\n    var _b;\n}\n/**\n * Resolve a `Type` for {@link DirectiveMetadata}.\n */\nvar DirectiveResolver = (function () {\n    function DirectiveResolver() {\n    }\n    /**\n     * Return {@link DirectiveMetadata} for a given `Type`.\n     */\n    DirectiveResolver.prototype.resolve = function (type) {\n        var metadata = this._getDirectiveMeta(type);\n        var propertyMetadata = reflection_1.reflector.propMetadata(type);\n        return this._mergeWithPropertyMetadata(metadata, propertyMetadata);\n    };\n    /**\n     * transform parameter annotations to required directives map so we can use it\n     * for DDO creation\n     *\n     * map consist of :\n     *  - key == name of directive\n     *  - value == Angular 1 require expression\n     *  ```js\n     *  {\n     *    ngModel: 'ngModel',\n     *    form: '^^form',\n     *    foo: '^foo',\n     *    moo: '?^foo',\n     *  }\n     *  ```\n     *\n     * @param {Type} type\n     * @returns {StringMap}\n     */\n    DirectiveResolver.prototype.getRequiredDirectivesMap = function (type) {\n        var metadata = this._getDirectiveMeta(type);\n        var paramMetadata = reflection_1.reflector.parameters(type);\n        if (lang_1.isPresent(paramMetadata)) {\n            return paramMetadata\n                .reduce(function (acc, paramMetaArr, idx) {\n                var requireExp = _transformInjectedDirectivesMeta(paramMetaArr, idx, type);\n                if (lang_1.isPresent(requireExp)) {\n                    lang_1.assign(acc, requireExp);\n                }\n                return acc;\n            }, {});\n        }\n        return {};\n    };\n    DirectiveResolver.prototype.parseAssetUrl = function (cmpMetadata) {\n        if (lang_1.isBlank(cmpMetadata.moduleId)) {\n            return '';\n        }\n        var moduleId = cmpMetadata.moduleId;\n        var _a = moduleId.match(ASSET_URL_RE) || [], _b = _a[1], urlPathMatch = _b === void 0 ? '' : _b;\n        return urlPathMatch + \"/\";\n    };\n    /**\n     *\n     * @param type\n     * @returns {DirectiveMetadata}\n     * @throws Error\n     * @private\n     */\n    DirectiveResolver.prototype._getDirectiveMeta = function (type) {\n        var typeMetadata = reflection_1.reflector.annotations(forward_ref_1.resolveForwardRef(type));\n        if (lang_1.isPresent(typeMetadata)) {\n            var metadata = collections_1.ListWrapper.find(typeMetadata, _isDirectiveMetadata);\n            if (lang_1.isPresent(metadata)) {\n                return metadata;\n            }\n        }\n        throw new Error(\"No Directive annotation found on \" + lang_1.stringify(type));\n    };\n    DirectiveResolver.prototype._mergeWithPropertyMetadata = function (directiveMetadata, propertyMetadata) {\n        var inputs = [];\n        var attrs = [];\n        var outputs = [];\n        var host = {};\n        var queries = {};\n        collections_1.StringMapWrapper.forEach(propertyMetadata, function (metadata, propName) {\n            metadata.forEach(function (propMetaInst) {\n                if (propMetaInst instanceof metadata_directives_1.InputMetadata) {\n                    if (lang_1.isPresent(propMetaInst.bindingPropertyName)) {\n                        inputs.push(propName + \": \" + propMetaInst.bindingPropertyName);\n                    }\n                    else {\n                        inputs.push(propName);\n                    }\n                }\n                if (propMetaInst instanceof metadata_directives_1.AttrMetadata) {\n                    if (lang_1.isPresent(propMetaInst.bindingPropertyName)) {\n                        attrs.push(propName + \": \" + propMetaInst.bindingPropertyName);\n                    }\n                    else {\n                        attrs.push(propName);\n                    }\n                }\n                if (propMetaInst instanceof metadata_directives_1.OutputMetadata) {\n                    if (lang_1.isPresent(propMetaInst.bindingPropertyName)) {\n                        outputs.push(propName + \": \" + propMetaInst.bindingPropertyName);\n                    }\n                    else {\n                        outputs.push(propName);\n                    }\n                }\n                if (propMetaInst instanceof metadata_directives_1.HostBindingMetadata) {\n                    if (lang_1.isPresent(propMetaInst.hostPropertyName)) {\n                        host[\"[\" + propMetaInst.hostPropertyName + \"]\"] = propName;\n                    }\n                    else {\n                        host[\"[\" + propName + \"]\"] = propName;\n                    }\n                }\n                if (propMetaInst instanceof metadata_directives_1.HostListenerMetadata) {\n                    var args = lang_1.isPresent(propMetaInst.args)\n                        ? propMetaInst.args.join(', ')\n                        : '';\n                    host[\"(\" + propMetaInst.eventName + \")\"] = propName + \"(\" + args + \")\";\n                }\n                if (propMetaInst instanceof metadata_di_1.ContentChildrenMetadata) {\n                    queries[propName] = propMetaInst;\n                }\n                if (propMetaInst instanceof metadata_di_1.ViewChildrenMetadata) {\n                    queries[propName] = propMetaInst;\n                }\n                if (propMetaInst instanceof metadata_di_1.ContentChildMetadata) {\n                    queries[propName] = propMetaInst;\n                }\n                if (propMetaInst instanceof metadata_di_1.ViewChildMetadata) {\n                    queries[propName] = propMetaInst;\n                }\n            });\n        });\n        return this._merge(directiveMetadata, inputs, attrs, outputs, host, queries);\n    };\n    DirectiveResolver.prototype._merge = function (dm, inputs, attrs, outputs, host, queries) {\n        var mergedInputs = lang_1.isPresent(dm.inputs)\n            ? collections_1.ListWrapper.concat(dm.inputs, inputs)\n            : inputs;\n        var mergedAttrs = lang_1.isPresent(dm.attrs)\n            ? collections_1.ListWrapper.concat(dm.attrs, attrs)\n            : attrs;\n        var mergedOutputs = lang_1.isPresent(dm.outputs)\n            ? collections_1.ListWrapper.concat(dm.outputs, outputs)\n            : outputs;\n        var mergedHost = lang_1.isPresent(dm.host)\n            ? collections_1.StringMapWrapper.merge(dm.host, host)\n            : host;\n        var mergedQueries = lang_1.isPresent(dm.queries)\n            ? collections_1.StringMapWrapper.merge(dm.queries, queries)\n            : queries;\n        var directiveSettings = {\n            selector: dm.selector,\n            inputs: mergedInputs,\n            attrs: mergedAttrs,\n            outputs: mergedOutputs,\n            host: mergedHost,\n            queries: mergedQueries,\n            legacy: dm.legacy\n        };\n        if (dm instanceof metadata_directives_1.ComponentMetadata) {\n            var componentSettings = collections_1.StringMapWrapper.assign({}, directiveSettings, {\n                moduleId: dm.moduleId,\n                template: dm.template,\n                templateUrl: dm.templateUrl,\n                changeDetection: lang_1.isPresent(dm.changeDetection) ? dm.changeDetection : 1 /* Default */\n            });\n            return new metadata_directives_1.ComponentMetadata(componentSettings);\n        }\n        else {\n            return new metadata_directives_1.DirectiveMetadata(directiveSettings);\n        }\n    };\n    return DirectiveResolver;\n}());\nexports.DirectiveResolver = DirectiveResolver;\n//# sourceMappingURL=directive_resolver.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/linker/directive_resolver.js\n// module id = 679\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\nvar collections_1 = require(\"../../facade/collections\");\nvar metadata_1 = require(\"../pipes/metadata\");\nvar reflection_1 = require(\"../reflection/reflection\");\nvar forward_ref_1 = require(\"../di/forward_ref\");\nfunction _isPipeMetadata(type) {\n    return type instanceof metadata_1.PipeMetadata;\n}\n/**\n * Resolve a `Type` for {@link PipeMetadata}.\n *\n */\nvar PipeResolver = (function () {\n    function PipeResolver() {\n    }\n    /**\n     * Return {@link PipeMetadata} for a given `Type`.\n     */\n    PipeResolver.prototype.resolve = function (type) {\n        var metas = reflection_1.reflector.annotations(forward_ref_1.resolveForwardRef(type));\n        if (lang_1.isPresent(metas)) {\n            var annotation = collections_1.ListWrapper.find(metas, _isPipeMetadata);\n            if (lang_1.isPresent(annotation)) {\n                return annotation;\n            }\n        }\n        throw new Error(\"No Pipe decorator found on \" + lang_1.stringify(type));\n    };\n    return PipeResolver;\n}());\nexports.PipeResolver = PipeResolver;\n//# sourceMappingURL=pipe_resolver.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/linker/pipe_resolver.js\n// module id = 680\n// module chunks = 0","\"use strict\";\nvar decorators_1 = require(\"./pipes/decorators\");\nexports.Pipe = decorators_1.Pipe;\n//# sourceMappingURL=pipes.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/pipes.js\n// module id = 681\n// module chunks = 0","\"use strict\";\nvar decorators_1 = require(\"../util/decorators\");\nvar metadata_1 = require(\"./metadata\");\nexports.Pipe = decorators_1.makeDecorator(metadata_1.PipeMetadata);\n//# sourceMappingURL=decorators.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/pipes/decorators.js\n// module id = 682\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\nvar pipe_resolver_1 = require(\"../linker/pipe_resolver\");\n/**\n * @internal\n */\nvar PipeProvider = (function () {\n    function PipeProvider(pipeResolver) {\n        this.pipeResolver = pipeResolver;\n    }\n    PipeProvider.prototype.createFromType = function (type) {\n        var metadata = this.pipeResolver.resolve(type);\n        if (!lang_1.isFunction(type.prototype.transform)) {\n            throw new Error(\"@Pipe: must implement '#transform' method\");\n        }\n        filterFactory.$inject = ['$injector'];\n        function filterFactory($injector) {\n            var pipeInstance = $injector.instantiate(type);\n            // return angular 1 filter function\n            var filterFn = pipeInstance.transform.bind(pipeInstance);\n            if (metadata.pure === false) {\n                filterFn.$stateful = true;\n            }\n            return filterFn;\n        }\n        return [\n            metadata.name,\n            filterFactory\n        ];\n    };\n    return PipeProvider;\n}());\nexports.PipeProvider = PipeProvider;\n/** @internal */\nexports.pipeProvider = new PipeProvider(new pipe_resolver_1.PipeResolver());\n//# sourceMappingURL=pipe_provider.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/pipes/pipe_provider.js\n// module id = 683\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\nvar collections_1 = require(\"../../facade/collections\");\n// import {BaseException} from 'angular2/src/facade/exceptions';\n// This will be needed when we will used Reflect APIs\nvar Reflect = lang_1.global.Reflect;\nif (!isReflectMetadata(Reflect)) {\n    throw \"\\n    Reflect.*metadata shim is required when using class decorators.\\n    You can use one of: \\n    - \\\"reflect-metadata\\\" (https://www.npmjs.com/package/reflect-metadata) \\n    - \\\"core-js/es7/reflect\\\" (https://github.com/zloirock/core-js)\\n  \";\n}\n/**\n * @internal\n */\nexports.CLASS_META_KEY = 'annotations';\n/**\n * @internal\n */\nexports.PARAM_META_KEY = 'parameters';\n/**\n * @internal\n */\nexports.PARAM_REFLECT_META_KEY = 'design:paramtypes';\n/**\n * @internal\n */\nexports.PROP_META_KEY = 'propMetadata';\n/**\n * @internal\n */\nexports.DOWNGRADED_COMPONENT_NAME_KEY = 'downgradeComponentName';\nfunction isReflectMetadata(reflect) {\n    return lang_1.isPresent(reflect) && lang_1.isPresent(reflect.getMetadata);\n}\nvar ReflectionCapabilities = (function () {\n    function ReflectionCapabilities(reflect) {\n        if (reflect === void 0) { reflect = lang_1.global.Reflect; }\n        this._reflect = reflect;\n    }\n    ReflectionCapabilities.prototype.isReflectionEnabled = function () { return true; };\n    ReflectionCapabilities.prototype.factory = function (t) {\n        switch (t.length) {\n            case 0:\n                return function () { return new t(); };\n            case 1:\n                return function (a1) { return new t(a1); };\n            case 2:\n                return function (a1, a2) { return new t(a1, a2); };\n            case 3:\n                return function (a1, a2, a3) { return new t(a1, a2, a3); };\n            case 4:\n                return function (a1, a2, a3, a4) { return new t(a1, a2, a3, a4); };\n            case 5:\n                return function (a1, a2, a3, a4, a5) { return new t(a1, a2, a3, a4, a5); };\n            case 6:\n                return function (a1, a2, a3, a4, a5, a6) {\n                    return new t(a1, a2, a3, a4, a5, a6);\n                };\n            case 7:\n                return function (a1, a2, a3, a4, a5, a6, a7) {\n                    return new t(a1, a2, a3, a4, a5, a6, a7);\n                };\n            case 8:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8) {\n                    return new t(a1, a2, a3, a4, a5, a6, a7, a8);\n                };\n            case 9:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n                    return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9);\n                };\n            case 10:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9, a10) { return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10); };\n            case 11:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11) { return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11); };\n            case 12:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12) {\n                    return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12);\n                };\n            case 13:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13) {\n                    return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13);\n                };\n            case 14:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14) {\n                    return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14);\n                };\n            case 15:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15) {\n                    return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15);\n                };\n            case 16:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16) {\n                    return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16);\n                };\n            case 17:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17) {\n                    return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17);\n                };\n            case 18:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18) { return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18); };\n            case 19:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19) { return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19); };\n            case 20:\n                return function (a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20) { return new t(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20); };\n        }\n        throw new Error(\"Cannot create a factory for '\" + lang_1.stringify(t) + \"' because its constructor has more than 20 arguments\");\n    };\n    /** @internal */\n    ReflectionCapabilities.prototype._zipTypesAndAnnotations = function (paramTypes, paramAnnotations) {\n        var result;\n        if (typeof paramTypes === 'undefined') {\n            result = new Array(paramAnnotations.length);\n        }\n        else {\n            result = new Array(paramTypes.length);\n        }\n        for (var i = 0; i < result.length; i++) {\n            // TS outputs Object for parameters without types, while Traceur omits\n            // the annotations. For now we preserve the Traceur behavior to aid\n            // migration, but this can be revisited.\n            if (typeof paramTypes === 'undefined') {\n                result[i] = [];\n            }\n            else if (paramTypes[i] != Object) {\n                result[i] = [paramTypes[i]];\n            }\n            else {\n                result[i] = [];\n            }\n            if (lang_1.isPresent(paramAnnotations) && lang_1.isPresent(paramAnnotations[i])) {\n                result[i] = result[i].concat(paramAnnotations[i]);\n            }\n        }\n        return result;\n    };\n    ReflectionCapabilities.prototype.parameters = function (typeOrFunc) {\n        // // Prefer the direct API.\n        // if (isPresent((<any>typeOrFunc).parameters)) {\n        //   return (<any>typeOrFunc).parameters;\n        // }\n        if (isReflectMetadata(this._reflect)) {\n            // get parameter created with @Inject()\n            var paramAnnotations = this._reflect.getMetadata(exports.PARAM_META_KEY, typeOrFunc);\n            // get parameter created via TS type annotations\n            var paramTypes = this._reflect.getMetadata(exports.PARAM_REFLECT_META_KEY, typeOrFunc);\n            if (lang_1.isPresent(paramTypes) || lang_1.isPresent(paramAnnotations)) {\n                return this._zipTypesAndAnnotations(paramTypes, paramAnnotations);\n            }\n        }\n        // The array has to be filled with `undefined` because holes would be skipped by `some`\n        var parameters = new Array(typeOrFunc.length);\n        collections_1.ListWrapper.fill(parameters, undefined);\n        // parameters.fill(undefined);\n        return parameters;\n    };\n    ReflectionCapabilities.prototype.rawParameters = function (typeOrFunc) {\n        return this._reflect.getMetadata(exports.PARAM_META_KEY, typeOrFunc);\n    };\n    ReflectionCapabilities.prototype.registerParameters = function (parameters, type) {\n        this._reflect.defineMetadata(exports.PARAM_META_KEY, parameters, type);\n    };\n    ReflectionCapabilities.prototype.annotations = function (typeOrFunc) {\n        // // Prefer the direct API.\n        // if (isPresent((<any>typeOrFunc).annotations)) {\n        //   var annotations = (<any>typeOrFunc).annotations;\n        //   if (isFunction(annotations) && annotations.annotations) {\n        //     annotations = annotations.annotations;\n        //   }\n        //   return annotations;\n        // }\n        if (isReflectMetadata(this._reflect)) {\n            var annotations = this._reflect.getMetadata(exports.CLASS_META_KEY, typeOrFunc);\n            if (lang_1.isPresent(annotations))\n                return annotations;\n        }\n        return [];\n    };\n    ReflectionCapabilities.prototype.ownAnnotations = function (typeOrFunc) {\n        return this._reflect.getOwnMetadata(exports.CLASS_META_KEY, typeOrFunc);\n    };\n    ReflectionCapabilities.prototype.registerAnnotations = function (annotations, typeOrFunc) {\n        this._reflect.defineMetadata(exports.CLASS_META_KEY, annotations, typeOrFunc);\n    };\n    ReflectionCapabilities.prototype.propMetadata = function (typeOrFunc) {\n        // // Prefer the direct API.\n        // if (isPresent((<any>typeOrFunc).propMetadata)) {\n        //   var propMetadata = (<any>typeOrFunc).propMetadata;\n        //   if (isFunction(propMetadata) && propMetadata.propMetadata) {\n        //     propMetadata = propMetadata.propMetadata;\n        //   }\n        //   return propMetadata;\n        // }\n        if (isReflectMetadata(this._reflect)) {\n            var propMetadata = this._reflect.getMetadata(exports.PROP_META_KEY, typeOrFunc);\n            if (lang_1.isPresent(propMetadata))\n                return propMetadata;\n        }\n        return {};\n    };\n    ReflectionCapabilities.prototype.ownPropMetadata = function (typeOrFunc) {\n        return this._reflect.getOwnMetadata(exports.PROP_META_KEY, typeOrFunc);\n    };\n    ReflectionCapabilities.prototype.registerPropMetadata = function (propMetadata, typeOrFunc) {\n        this._reflect.defineMetadata(exports.PROP_META_KEY, propMetadata, typeOrFunc);\n    };\n    ReflectionCapabilities.prototype.registerDowngradedNg2ComponentName = function (componentName, typeOrFunc) {\n        this._reflect.defineMetadata(exports.DOWNGRADED_COMPONENT_NAME_KEY, componentName, typeOrFunc);\n    };\n    ReflectionCapabilities.prototype.downgradedNg2ComponentName = function (typeOrFunc) {\n        return this._reflect.getOwnMetadata(exports.DOWNGRADED_COMPONENT_NAME_KEY, typeOrFunc);\n    };\n    ReflectionCapabilities.prototype.interfaces = function (type) {\n        // throw new BaseException(\"JavaScript does not support interfaces\");\n        throw new Error('JavaScript does not support interfaces');\n    };\n    ReflectionCapabilities.prototype.getter = function (name) { return new Function('o', 'return o.' + name + ';'); };\n    ReflectionCapabilities.prototype.setter = function (name) {\n        return new Function('o', 'v', 'return o.' + name + ' = v;');\n    };\n    ReflectionCapabilities.prototype.method = function (name) {\n        var functionBody = \"if (!o.\" + name + \") throw new Error('\\\"\" + name + \"\\\" is undefined');\\n        return o.\" + name + \".apply(o, args);\";\n        return new Function('o', 'args', functionBody);\n    };\n    return ReflectionCapabilities;\n}());\nexports.ReflectionCapabilities = ReflectionCapabilities;\n//# sourceMappingURL=reflection_capabilities.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/reflection/reflection_capabilities.js\n// module id = 684\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar reflector_reader_1 = require(\"./reflector_reader\");\n/**\n * Reflective information about a symbol, including annotations, interfaces, and other metadata.\n */\nvar ReflectionInfo = (function () {\n    function ReflectionInfo(annotations, parameters, factory, interfaces, propMetadata) {\n        this.annotations = annotations;\n        this.parameters = parameters;\n        this.factory = factory;\n        this.interfaces = interfaces;\n        this.propMetadata = propMetadata;\n    }\n    return ReflectionInfo;\n}());\nexports.ReflectionInfo = ReflectionInfo;\n/**\n * Provides access to reflection data about symbols. Used internally by Angular\n * to power dependency injection and compilation.\n */\nvar Reflector = (function (_super) {\n    __extends(Reflector, _super);\n    function Reflector(reflectionCapabilities) {\n        var _this = _super.call(this) || this;\n        // this._usedKeys = null;\n        _this.reflectionCapabilities = reflectionCapabilities;\n        return _this;\n    }\n    Reflector.prototype.isReflectionEnabled = function () { return this.reflectionCapabilities.isReflectionEnabled(); };\n    Reflector.prototype.parameters = function (typeOrFunc) {\n        // // get cached\n        // if (this._injectableInfo.has(typeOrFunc)) {\n        //   var res = this._getReflectionInfo(typeOrFunc).parameters;\n        //   return isPresent(res) ? res : [];\n        // } else {\n        return this.reflectionCapabilities.parameters(typeOrFunc);\n        // }\n    };\n    Reflector.prototype.rawParameters = function (typeOrFunc) {\n        return this.reflectionCapabilities.rawParameters(typeOrFunc);\n    };\n    Reflector.prototype.registerParameters = function (parameters, typeOrFunc) {\n        this.reflectionCapabilities.registerParameters(parameters, typeOrFunc);\n    };\n    Reflector.prototype.annotations = function (typeOrFunc) {\n        // // get cached\n        // if (this._injectableInfo.has(typeOrFunc)) {\n        //   var res = this._getReflectionInfo(typeOrFunc).annotations;\n        //   return isPresent(res) ? res : [];\n        // } else {\n        return this.reflectionCapabilities.annotations(typeOrFunc);\n        // }\n    };\n    Reflector.prototype.ownAnnotations = function (typeOrFunc) {\n        return this.reflectionCapabilities.ownAnnotations(typeOrFunc);\n    };\n    Reflector.prototype.registerAnnotations = function (parameters, typeOrFunc) {\n        this.reflectionCapabilities.registerAnnotations(parameters, typeOrFunc);\n    };\n    Reflector.prototype.propMetadata = function (typeOrFunc) {\n        // // get cached\n        // if (this._injectableInfo.has(typeOrFunc)) {\n        //   var res = this._getReflectionInfo(typeOrFunc).propMetadata;\n        //   return isPresent(res) ? res : {};\n        // } else {\n        return this.reflectionCapabilities.propMetadata(typeOrFunc);\n        // }\n    };\n    Reflector.prototype.ownPropMetadata = function (typeOrFunc) {\n        return this.reflectionCapabilities.ownPropMetadata(typeOrFunc);\n    };\n    Reflector.prototype.registerPropMetadata = function (parameters, typeOrFunc) {\n        this.reflectionCapabilities.registerPropMetadata(parameters, typeOrFunc);\n    };\n    Reflector.prototype.registerDowngradedNg2ComponentName = function (componentName, typeOrFunc) {\n        this.reflectionCapabilities.registerDowngradedNg2ComponentName(componentName, typeOrFunc);\n    };\n    Reflector.prototype.downgradedNg2ComponentName = function (typeOrFunc) {\n        return this.reflectionCapabilities.downgradedNg2ComponentName(typeOrFunc);\n    };\n    /** @internal */\n    Reflector.prototype._getReflectionInfo = function (typeOrFunc) {\n        /*if (isPresent(this._usedKeys)) {\n         this._usedKeys.add(typeOrFunc);\n         }\n         return this._injectableInfo.get(typeOrFunc);*/\n    };\n    /** @internal */\n    Reflector.prototype._containsReflectionInfo = function (typeOrFunc) { };\n    return Reflector;\n}(reflector_reader_1.ReflectorReader));\nexports.Reflector = Reflector;\n//# sourceMappingURL=reflector.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/reflection/reflector.js\n// module id = 685\n// module chunks = 0","\"use strict\";\n/**\n * Provides read-only access to reflection data about symbols. Used internally by Angular\n * to power dependency injection and compilation.\n */\nvar ReflectorReader = (function () {\n    function ReflectorReader() {\n    }\n    return ReflectorReader;\n}());\nexports.ReflectorReader = ReflectorReader;\n//# sourceMappingURL=reflector_reader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/reflection/reflector_reader.js\n// module id = 686\n// module chunks = 0","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\n__export(require(\"./util/decorators\"));\nvar bundler_1 = require(\"./util/bundler\");\nexports.bundle = bundler_1.bundle;\n//# sourceMappingURL=util.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/util.js\n// module id = 687\n// module chunks = 0","\"use strict\";\nvar lang_1 = require(\"../../facade/lang\");\nvar reflection_1 = require(\"../reflection/reflection\");\nvar provider_1 = require(\"../di/provider\");\nvar provider_util_1 = require(\"../di/provider_util\");\nvar reflective_provider_1 = require(\"../di/reflective_provider\");\nvar collections_1 = require(\"../../facade/collections\");\nfunction _bundleComponent(ComponentClass, otherProviders, existingAngular1Module) {\n    if (otherProviders === void 0) { otherProviders = []; }\n    // Support registering downgraded ng2 components directly\n    var downgradedNgComponentName = reflection_1.reflector.downgradedNg2ComponentName(ComponentClass);\n    if (downgradedNgComponentName) {\n        var angular1Module_1 = existingAngular1Module || lang_1.global.angular.module(downgradedNgComponentName, []);\n        angular1Module_1.directive(downgradedNgComponentName, ComponentClass);\n        return angular1Module_1;\n    }\n    var angular1ModuleName = provider_1.getInjectableName(ComponentClass);\n    var angular1Module = existingAngular1Module || lang_1.global.angular.module(angular1ModuleName, []);\n    var annotations = reflection_1.reflector.annotations(ComponentClass);\n    var cmpAnnotation = annotations[0];\n    var _a = cmpAnnotation.providers, providers = _a === void 0 ? [] : _a, _b = cmpAnnotation.viewProviders, viewProviders = _b === void 0 ? [] : _b;\n    // process component\n    var _c = provider_1.provide(ComponentClass), cmpName = _c[0], cmpFactoryFn = _c[1];\n    var _d = reflective_provider_1._getAngular1ModuleMetadataByType(ComponentClass), providerName = _d.providerName, providerMethod = _d.providerMethod, moduleMethod = _d.moduleMethod;\n    if (reflective_provider_1._isTypeRegistered(cmpName, angular1Module, providerName, providerMethod)) {\n        return angular1Module;\n    }\n    // @TODO register via this once requires are resolved for 3 types of attr directive from template\n    // _registerTypeProvider( angular1Module, ComponentClass, { moduleMethod, name: cmpName, value: cmpFactoryFn } );\n    angular1Module[moduleMethod](cmpName, cmpFactoryFn);\n    // 1. process component/directive decorator providers/viewProviders\n    reflective_provider_1._normalizeProviders(angular1Module, providers);\n    reflective_provider_1._normalizeProviders(angular1Module, viewProviders);\n    // 2. process otherProviders argument\n    // - providers can be string(angular1Module reference), Type, StringMap(providerLiteral)\n    // - directives can't be registered as via global providers only @Injectable,@Pipe,{provide:any,use*:any}\n    // registerProviders(angular1Module, otherProviders);\n    reflective_provider_1._normalizeProviders(angular1Module, otherProviders);\n    return angular1Module;\n}\nfunction bundle(NgModuleClass, otherProviders, existingAngular1Module) {\n    if (otherProviders === void 0) { otherProviders = []; }\n    var angular1ModuleName = provider_1.getInjectableName(NgModuleClass);\n    var angular1Module = existingAngular1Module || lang_1.global.angular.module(angular1ModuleName, []);\n    var annotations = reflection_1.reflector.annotations(NgModuleClass);\n    var ngModuleAnnotation = annotations[0];\n    if (!provider_util_1.isNgModule(ngModuleAnnotation)) {\n        throw new Error(\"bundle() requires a decorated NgModule as its first argument\");\n    }\n    var _a = ngModuleAnnotation.declarations, declarations = _a === void 0 ? [] : _a, _b = ngModuleAnnotation.providers, providers = _b === void 0 ? [] : _b, _c = ngModuleAnnotation.imports, imports = _c === void 0 ? [] : _c;\n    /**\n     * Process `declarations`\n     */\n    collections_1.ListWrapper.flattenDeep(declarations).forEach(function (directiveType) {\n        _bundleComponent(directiveType, [], angular1Module);\n    });\n    /**\n     * Process `providers`\n     */\n    reflective_provider_1._normalizeProviders(angular1Module, providers);\n    /**\n     * Process `imports`\n     */\n    // 1. imports which are not NgModules\n    var nonNgModuleImports = imports.filter(function (imported) {\n        if (!lang_1.isFunction(imported)) {\n            return true;\n        }\n        var annotations = reflection_1.reflector.annotations(imported);\n        return !provider_util_1.isNgModule(ngModuleAnnotation);\n    });\n    reflective_provider_1._normalizeProviders(angular1Module, nonNgModuleImports);\n    // 2.imports which are NgModules\n    var NgModuleImports = imports.filter(function (imported) {\n        if (!lang_1.isFunction(imported)) {\n            return false;\n        }\n        var annotations = reflection_1.reflector.annotations(imported);\n        return provider_util_1.isNgModule(ngModuleAnnotation);\n    });\n    NgModuleImports.forEach(function (importedNgModule) {\n        bundle(importedNgModule, [], angular1Module);\n    });\n    /**\n     * Process `otherProviders`\n     */\n    reflective_provider_1._normalizeProviders(angular1Module, otherProviders);\n    return angular1Module;\n}\nexports.bundle = bundle;\n//# sourceMappingURL=bundler.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/core/util/bundler.js\n// module id = 688\n// module chunks = 0","// Public API for Facade\n// None :)\n\"use strict\";\nvar type_1 = require(\"./type\");\nexports.Type = type_1.Type;\nvar async_1 = require(\"./async\");\nexports.EventEmitter = async_1.EventEmitter;\n//# sourceMappingURL=facade.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ng-metadata/src/facade/facade.js\n// module id = 689\n// module chunks = 0","\"use strict\";\nvar root_1 = require('./util/root');\nvar toSubscriber_1 = require('./util/toSubscriber');\nvar observable_1 = require('./symbol/observable');\n/**\n * A representation of any set of values over any amount of time. This the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nvar Observable = (function () {\n    /**\n     * @constructor\n     * @param {Function} subscribe the function that is  called when the Observable is\n     * initially subscribed to. This function is given a Subscriber, to which new values\n     * can be `next`ed, or an `error` method can be called to raise an error, or\n     * `complete` can be called to notify of a successful completion.\n     */\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    /**\n     * Creates a new Observable, with this Observable as the source, and the passed\n     * operator defined as the new observable's operator.\n     * @method lift\n     * @param {Operator} operator the operator defining the operation to take on the observable\n     * @return {Observable} a new observable with the Operator applied\n     */\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber_1.toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            operator.call(sink, this.source);\n        }\n        else {\n            sink.add(this._subscribe(sink));\n        }\n        if (sink.syncErrorThrowable) {\n            sink.syncErrorThrowable = false;\n            if (sink.syncErrorThrown) {\n                throw sink.syncErrorValue;\n            }\n        }\n        return sink;\n    };\n    /**\n     * @method forEach\n     * @param {Function} next a handler for each value emitted by the observable\n     * @param {PromiseConstructor} [PromiseCtor] a constructor function used to instantiate the Promise\n     * @return {Promise} a promise that either resolves on observable completion or\n     *  rejects with the handled error\n     */\n    Observable.prototype.forEach = function (next, PromiseCtor) {\n        var _this = this;\n        if (!PromiseCtor) {\n            if (root_1.root.Rx && root_1.root.Rx.config && root_1.root.Rx.config.Promise) {\n                PromiseCtor = root_1.root.Rx.config.Promise;\n            }\n            else if (root_1.root.Promise) {\n                PromiseCtor = root_1.root.Promise;\n            }\n        }\n        if (!PromiseCtor) {\n            throw new Error('no Promise impl found');\n        }\n        return new PromiseCtor(function (resolve, reject) {\n            var subscription = _this.subscribe(function (value) {\n                if (subscription) {\n                    // if there is a subscription, then we can surmise\n                    // the next handling is asynchronous. Any errors thrown\n                    // need to be rejected explicitly and unsubscribe must be\n                    // called manually\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscription.unsubscribe();\n                    }\n                }\n                else {\n                    // if there is NO subscription, then we're getting a nexted\n                    // value synchronously during subscription. We can just call it.\n                    // If it errors, Observable's `subscribe` will ensure the\n                    // unsubscription logic is called, then synchronously rethrow the error.\n                    // After that, Promise will trap the error and send it\n                    // down the rejection path.\n                    next(value);\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        return this.source.subscribe(subscriber);\n    };\n    /**\n     * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n     * @method Symbol.observable\n     * @return {Observable} this instance of the observable\n     */\n    Observable.prototype[observable_1.$$observable] = function () {\n        return this;\n    };\n    // HACK: Since TypeScript inherits static properties too, we have to\n    // fight against TypeScript here so Subject can have a different static create signature\n    /**\n     * Creates a new cold Observable by calling the Observable constructor\n     * @static true\n     * @owner Observable\n     * @method create\n     * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n     * @return {Observable} a new cold observable\n     */\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexports.Observable = Observable;\n//# sourceMappingURL=Observable.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/Observable.js\n// module id = 690\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Observable_1 = require('./Observable');\nvar Subscriber_1 = require('./Subscriber');\nvar Subscription_1 = require('./Subscription');\nvar ObjectUnsubscribedError_1 = require('./util/ObjectUnsubscribedError');\nvar SubjectSubscription_1 = require('./SubjectSubscription');\nvar rxSubscriber_1 = require('./symbol/rxSubscriber');\n/**\n * @class SubjectSubscriber<T>\n */\nvar SubjectSubscriber = (function (_super) {\n    __extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        _super.call(this, destination);\n        this.destination = destination;\n    }\n    return SubjectSubscriber;\n}(Subscriber_1.Subscriber));\nexports.SubjectSubscriber = SubjectSubscriber;\n/**\n * @class Subject<T>\n */\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        _super.call(this);\n        this.observers = [];\n        this.closed = false;\n        this.isStopped = false;\n        this.hasError = false;\n        this.thrownError = null;\n    }\n    Subject.prototype[rxSubscriber_1.$$rxSubscriber] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription_1.Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription_1.Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription_1.SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable_1.Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable_1.Observable));\nexports.Subject = Subject;\n/**\n * @class AnonymousSubject<T>\n */\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        _super.call(this);\n        this.destination = destination;\n        this.source = source;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription_1.Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexports.AnonymousSubject = AnonymousSubject;\n//# sourceMappingURL=Subject.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/Subject.js\n// module id = 691\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subscription_1 = require('./Subscription');\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SubjectSubscription = (function (_super) {\n    __extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        _super.call(this);\n        this.subject = subject;\n        this.subscriber = subscriber;\n        this.closed = false;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription_1.Subscription));\nexports.SubjectSubscription = SubjectSubscription;\n//# sourceMappingURL=SubjectSubscription.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/SubjectSubscription.js\n// module id = 692\n// module chunks = 0","\"use strict\";\nvar root_1 = require('../util/root');\nfunction getSymbolObservable(context) {\n    var $$observable;\n    var Symbol = context.Symbol;\n    if (typeof Symbol === 'function') {\n        if (Symbol.observable) {\n            $$observable = Symbol.observable;\n        }\n        else {\n            $$observable = Symbol('observable');\n            Symbol.observable = $$observable;\n        }\n    }\n    else {\n        $$observable = '@@observable';\n    }\n    return $$observable;\n}\nexports.getSymbolObservable = getSymbolObservable;\nexports.$$observable = getSymbolObservable(root_1.root);\n//# sourceMappingURL=observable.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/symbol/observable.js\n// module id = 693\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nvar ObjectUnsubscribedError = (function (_super) {\n    __extends(ObjectUnsubscribedError, _super);\n    function ObjectUnsubscribedError() {\n        var err = _super.call(this, 'object unsubscribed');\n        this.name = err.name = 'ObjectUnsubscribedError';\n        this.stack = err.stack;\n        this.message = err.message;\n    }\n    return ObjectUnsubscribedError;\n}(Error));\nexports.ObjectUnsubscribedError = ObjectUnsubscribedError;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/util/ObjectUnsubscribedError.js\n// module id = 694\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nvar UnsubscriptionError = (function (_super) {\n    __extends(UnsubscriptionError, _super);\n    function UnsubscriptionError(errors) {\n        _super.call(this);\n        this.errors = errors;\n        var err = Error.call(this, errors ?\n            errors.length + \" errors occurred during unsubscription:\\n  \" + errors.map(function (err, i) { return ((i + 1) + \") \" + err.toString()); }).join('\\n  ') : '');\n        this.name = err.name = 'UnsubscriptionError';\n        this.stack = err.stack;\n        this.message = err.message;\n    }\n    return UnsubscriptionError;\n}(Error));\nexports.UnsubscriptionError = UnsubscriptionError;\n//# sourceMappingURL=UnsubscriptionError.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/util/UnsubscriptionError.js\n// module id = 695\n// module chunks = 0","\"use strict\";\nexports.isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });\n//# sourceMappingURL=isArray.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/util/isArray.js\n// module id = 696\n// module chunks = 0","\"use strict\";\nfunction isObject(x) {\n    return x != null && typeof x === 'object';\n}\nexports.isObject = isObject;\n//# sourceMappingURL=isObject.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/util/isObject.js\n// module id = 697\n// module chunks = 0","\"use strict\";\nvar Subscriber_1 = require('../Subscriber');\nvar rxSubscriber_1 = require('../symbol/rxSubscriber');\nvar Observer_1 = require('../Observer');\nfunction toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber_1.Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriber_1.$$rxSubscriber]) {\n            return nextOrObserver[rxSubscriber_1.$$rxSubscriber]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber_1.Subscriber(Observer_1.empty);\n    }\n    return new Subscriber_1.Subscriber(nextOrObserver, error, complete);\n}\nexports.toSubscriber = toSubscriber;\n//# sourceMappingURL=toSubscriber.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/util/toSubscriber.js\n// module id = 698\n// module chunks = 0","\"use strict\";\nvar errorObject_1 = require('./errorObject');\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    }\n    catch (e) {\n        errorObject_1.errorObject.e = e;\n        return errorObject_1.errorObject;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\nexports.tryCatch = tryCatch;\n;\n//# sourceMappingURL=tryCatch.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rxjs/util/tryCatch.js\n// module id = 699\n// module chunks = 0"],"sourceRoot":""}